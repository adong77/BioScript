!function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);h.length;)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={6:0,2:0,3:0,4:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({9:"ruleCollectionBuilder",10:"vendors~ruleCollectionBuilder",11:"vendors~workflowLayout",12:"workflowLayout"}[e]||e)+".chunk.js"}(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,n[1](l)}a[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/dist/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([1600,0,1]),n()}([function(e,t,n){var i=n(526),a=n(260);void 0===a.jQuery&&(a.jQuery=i),void 0===a.$&&(a.$=i),e.exports=i},,function(e,t,n){var i,a;i=[n(538)],void 0===(a=function(e){if(Object.prototype.hasOwnProperty.call(e,"__root")){var t=sessionStorage.getItem("currentLocale");t&&(e=e["__"+t]||e["__"+t.split("-")[0]]||e.__root)}var n=function(t){return e[t]||t};return n.cacheNonLocalized=!1,n}.apply(t,i))||(e.exports=a)},function(e,t,n){var i=n(577),a=n(260);void 0===a.config&&(a.config=i),e.exports=i},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return j}));var i=n(137),a=n(76),r=n(0),o=n.n(r),s=n(1),l=n(4),c=n.n(l),d=n(11),u=n(3),h=n(2),f=n.n(h),p=c.a.Model.extend(d.a.LoggableMixin).extend({_logNamespace:"user",urlRoot:function(){return"".concat(Object(u.getAppRoot)(),"api/users")},defaults:{id:null,username:"(".concat(f()("anonymous user"),")"),email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1,preferences:{}},initialize:function(e){this.log("User.initialize:",e),this.on("loaded",(function(e,t){this.log("".concat(this," has loaded:"),e,t)})),this.on("change",(function(e,t){this.log("".concat(this," has changed:"),e,t.changes)}))},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},updatePreferences:function(e,t){var n=this.get("preferences");n[e]=JSON.stringify(t),this.preferences=n},getFavorites:function(){var e=this.get("preferences");return e&&e.favorites?JSON.parse(e.favorites):{tools:[]}},updateFavorites:function(e,t){var n=this.getFavorites();n[e]=t[e],this.updatePreferences("favorites",n)},loadFromApi:function(e,t){e=e||p.CURRENT_ID_STR;var n=this,i=(t=t||{}).success;return t.success=function(e,t){n.trigger("loaded",e,t),i&&i(e,t)},e===p.CURRENT_ID_STR&&(t.url="".concat(this.urlRoot,"/").concat(p.CURRENT_ID_STR)),c.a.Model.prototype.fetch.call(this,t)},clearSessionStorage:function(){for(var e in sessionStorage)0===e.indexOf("history:")?sessionStorage.removeItem(e):"history-panel"===e&&sessionStorage.removeItem(e)},toString:function(){var e=[this.get("username")];return this.get("id")&&(e.unshift(this.get("id")),e.push(this.get("email"))),"User(".concat(e.join(":"),")")}});p.CURRENT_ID_STR="current",p.getCurrentUserFromApi=function(e){var t=new p;return t.loadFromApi(p.CURRENT_ID_STR,e),t};var m={User:p};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){e=e||{};return this.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,this.userId=this.userId||e.userId||null,this.consoleLogger=e.consoleLogger||null,this._init(e),this}function v(e){var t=String(e);if("[object Object]"==t)try{t=JSON.stringify(e)}catch(t){return console.error(t),String(e)}return t}function y(e){return this._init(e||{})}g.ALL=0,g.LOG=0,g.DEBUG=10,g.INFO=20,g.WARN=30,g.ERROR=40,g.METRIC=50,g.NONE=100,g.defaultOptions={logLevel:g.NONE,consoleLevel:g.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,consoleFlattenMessages:!1,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},g.prototype._init=function(e){for(var t in this.options={},g.defaultOptions)Object.prototype.hasOwnProperty.call(g.defaultOptions,t)&&(this.options[t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:g.defaultOptions[t]);return this.options.logLevel=this._parseLevel(this.options.logLevel),this.options.consoleLevel=this._parseLevel(this.options.consoleLevel),this._sending=!1,this._waiting=null,this._postSize=this.options.postSize,this._initCache(),this},g.prototype._initCache=function(){try{this.cache=new y({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(e){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",e]),this.options.logLevel=g.NONE}},g.prototype._parseLevel=function(e){var t=_(e);if("number"===t)return e;if("string"===t){var n=e.toUpperCase();if(Object.prototype.hasOwnProperty.call(g,n))return g[n]}throw new Error("Unknown log level: ".concat(e))},g.prototype.emit=function(e,t,n){return t=t||this.options.defaultNamespace,e&&n?((e=this._parseLevel(e))>=this.options.logLevel&&this._addToCache(e,t,n),this.consoleLogger&&e>=this.options.consoleLevel&&this._emitToConsole(e,t,n),this):this},g.prototype._addToCache=function(e,t,n){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var i=this;try{var a=i.cache.add(i._buildEntry(e,t,n));a>=i._postSize&&i._postCache()}catch(e){i._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",t,n]),i._emitToConsole("error","MetricsLogger",[e])}return i},g.prototype._buildEntry=function(e,t,n){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var i={level:e,namespace:this.options.clientPrefix+t,args:n};return this.options.addTime&&(i.time=(new Date).toISOString()),i},g.prototype._postCache=function(e){if(e=e||{},this._emitToConsole("info","MetricsLogger",["_postCache",e,this._postSize]),!this.options.postUrl||this._sending)return o.a.when({});var t=this,n=e.count||t._postSize,i=t.cache.get(n),a=i.length,r="function"==typeof t.options.getPingData?t.options.getPingData():{};return r.metrics=JSON.stringify(i),t._sending=!0,o.a.post(t.options.postUrl,r).always((function(){t._sending=!1})).fail((function(e,n,i){t._postSize=t.options.maxCacheSize,t.emit("error","MetricsLogger",["_postCache error:",e.readyState,e.status,e.responseJSON||e.responseText])})).done((function(e){"function"==typeof t.options.onServerResponse&&t.options.onServerResponse(e),t.cache.remove(a),t._postSize=t.options.postSize}))},g.prototype._delayPost=function(){var e=this;e._waiting=window.setTimeout((function(){e._waiting=null}),e.options.delayPostInMs)},g.prototype._emitToConsole=function(e,t,n){var i=this.options.consoleNamespaceWhitelist;if(!this.consoleLogger)return this;if(i&&-1===i.indexOf(t))return this;var a=Array.prototype.slice.call(n,0);return a.unshift(t),this.options.consoleFlattenMessages&&(a=[a.map(v).join(" ")]),e>=g.METRIC&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,a):e>=g.ERROR&&"function"==typeof this.consoleLogger.error?this.consoleLogger.error.apply(this.consoleLogger,a):(e>=g.WARN&&"function"==typeof this.consoleLogger.warn?this.consoleLogger.warn.apply(this.consoleLogger,a):e>=g.INFO&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,a):e>=g.DEBUG&&"function"==typeof this.consoleLogger.debug?this.consoleLogger.debug.apply(this.consoleLogger,a):"function"==typeof this.consoleLogger.log&&this.consoleLogger.log.apply(this.consoleLogger,a),this)},g.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.debug=function(){this.emit(g.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.info=function(){this.emit(g.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.warn=function(){this.emit(g.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.error=function(){this.emit(g.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.metric=function(){this.emit(g.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},y.defaultOptions={maxSize:5e3},y.prototype._init=function(e){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!e.key)throw new Error("LoggingCache needs key for localStorage");return this.key=e.key,this._initStorage(),this.maxSize=e.maxSize||y.defaultOptions.maxSize,this},y.prototype._hasStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},y.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},y.prototype.add=function(e){var t=this._fetchAndParse(),n=t.length+1-this.maxSize;return n>0&&t.splice(0,n),t.push(e),this._unparseAndStore(t),t.length},y.prototype._fetchAndParse=function(){return JSON.parse(localStorage.getItem(this.key))},y.prototype._unparseAndStore=function(e){return localStorage.setItem(this.key,JSON.stringify(e))},y.prototype.length=function(){return this._fetchAndParse().length},y.prototype.get=function(e){return this._fetchAndParse().slice(0,e)},y.prototype.remove=function(e){var t=this._fetchAndParse(),n=t.splice(0,e);return this._unparseAndStore(t),n},y.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},y.prototype.stringify=function(e){return JSON.stringify(this.get(e))},y.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))};var b={MetricsLogger:g,LoggingCache:y},w=n(63);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._init(e,t)}Object(i.a)(k,"GalaxyApp");var x="".concat("galaxy:debug",":namespaces"),S="".concat("galaxy:debug",":flatten"),C=!1;try{C="true"==localStorage.getItem("galaxy:debug")}catch(e){console.log(f()("localStorage not available for debug flag retrieval"))}k.prototype._init=function(e,t){s.default.extend(this,c.a.Events),C&&(this.logger=console,console.debug("debugging galaxy:","options:",e,"bootstrapped:",t)),this._processOptions(e),this._initConfig(e.config||{});var n=j();return n&&this._patchGalaxy(n),this.root=e.root||"/",this.params=e.params||{},this.session_csrf_token=e.session_csrf_token||null,this._initLogger(this.options.loggerOptions||{}),this.debug("GalaxyApp.options: ",this.options),this.debug("GalaxyApp.config: ",this.config),this.debug("GalaxyApp.logger: ",this.logger),this._initLocale(),this.debug("GalaxyApp.localize: ",this.localize),this.config=e.config||{},this.debug("GalaxyApp.config: ",this.config),this._initUser(e.user||{}),this.debug("GalaxyApp.user: ",this.user),this._initUserLocale(),this.debug("currentLocale: ",sessionStorage.getItem("currentLocale")),this._setUpListeners(),this.trigger("ready",this),this.data={},this.data.create=w.a,this.data.dialog=w.b,this},k.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},k.prototype._processOptions=function(e){var t=this.defaultOptions;for(var n in this.options={},t)Object.prototype.hasOwnProperty.call(t,n)&&(this.options[n]=Object.prototype.hasOwnProperty.call(e,n)?e[n]:t[n]);return this},k.prototype._initConfig=function(e){return this.config=e,this.config.debug=C||this.config.debug,this},k.prototype._patchGalaxy=function(e){if(this.options.patchExisting&&e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t])},k.prototype._initLogger=function(e){var t=arguments,n=this;if(this.config.debug){e.consoleLogger=e.consoleLogger||console,e.consoleLevel=e.consoleLevel||b.MetricsLogger.ALL;try{e.consoleNamespaceWhitelist=localStorage.getItem(x).split(",")}catch(e){console.debug(e)}try{e.consoleFlattenMessages="true"==localStorage.getItem(S)}catch(e){console.debug(e)}console.log(e.consoleFlattenMessages)}return this.logger=new b.MetricsLogger(e),this.emit={},["log","debug","info","warn","error","metric"].map((function(e){n.emit[e]=function(i){n.logger.emit(e,t[0],Array.prototype.slice.call(t,1))}})),this.config.debug&&(d.a.LoggableMixin.logger=this.logger),this},k.prototype._initLocale=function(e){return this.debug("_initLocale:",e),this.localize=f.a,window._l=this.localize,this},k.prototype._initUserLocale=function(e){var t=!(!this.config.default_locale||"auto"==this.config.default_locale)&&this.config.default_locale.toLowerCase(),n={};this.user&&this.user.attributes.preferences&&"extra_user_preferences"in this.user.attributes.preferences&&(n=JSON.parse(this.user.attributes.preferences.extra_user_preferences));var i="localization|locale"in n&&n["localization|locale"].toLowerCase();"auto"==i&&(i=!1);var a="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase(),r=i||a||t;sessionStorage.setItem("currentLocale",r)},k.prototype._initUser=function(e){return this.debug("_initUser:",e),this.user=new m.User(e),this.user.logger=this.logger,this},k.prototype._setUpListeners=function(){var e=this;return this.lastAjax={},o()(document).bind("ajaxSend",(function(t,n,i){var a=i.data;try{a=JSON.parse(a)}catch(e){}e.lastAjax={url:location.href.slice(0,-1)+i.url,data:a}})),this},k.prototype.debugging=function(e){try{if(void 0===e)return"true"===localStorage.getItem("galaxy:debug");if(e)return localStorage.setItem("galaxy:debug",!0),!0;localStorage.removeItem("galaxy:debug"),this.debuggingNamespaces(null)}catch(e){console.log(f()("localStorage not available for debug flag retrieval"))}return!1},k.prototype.debuggingNamespaces=function(e){try{if(void 0===e){var t=localStorage.getItem(x);return"string"==typeof t?t.split(","):[]}null===e?localStorage.removeItem(x):localStorage.setItem(x,e);var n=this.debuggingNamespaces();return this.logger&&(this.logger.options.consoleNamespaceWhitelist=n),n}catch(e){console.log(f()("localStorage not available for debug namespace retrieval"))}},k.prototype.toString=function(){var e=this.user?this.user.get("email")||"(anonymous)":"uninitialized";return"GalaxyApp(".concat(e,")")};var M=n(90);function T(e){!0==!a.a.testBuild&&console.warn("setGalaxyInstance",Object(M.a)());var t=O(),n=e(k);return n instanceof k||(n=new k(n)),void 0===n.debug&&Object(i.a)(n,"GalaxyApp"),t._galaxyInstance=n,t._galaxyInstance}function j(){return O()._galaxyInstance}function O(){return window}var D={root:Object(u.getAppRoot)(),config:{}};window.Galaxy?console.error("Detected redefinition of window.Galaxy -- skipping, but this should be investigated.",Object(M.a)()):Object.defineProperty(window,"Galaxy",{enumerable:!0,get:function(){return!0==!a.a.testBuild&&console.warn("accessing (get) window.Galaxy",Object(M.a)()),j()||D},set:function(e){console.warn("accessing (set) window.Galaxy",Object(M.a)()),T(e)}});window.Galaxy},,,function(e,t,n){(function(e){e.exports=function(){"use strict";var t,i;function a(){return t.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function f(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return It(e,t,n,i,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function _(e){if(null==e._isValid){var t=m(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function g(e){var t=p(NaN);return null!=e?f(m(t),e):m(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var v=a.momentProperties=[],y=!1;function b(e,t){var n,i,a;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),v.length>0)for(n=0;n<v.length;n++)c(a=t[i=v[n]])||(e[i]=a);return e}function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,a.updateOffset(this),y=!1)}function k(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function x(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return f((function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),n){var i,r,o,l=[];for(r=0;r<arguments.length;r++){if(i="","object"==typeof arguments[r]){for(o in i+="\n["+r+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[r];l.push(i)}x(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var C,M={};function T(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),M[e]||(x(t),M[e]=!0)}function j(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e,t){var n,i=f({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(i[n]=f({},i[n]));return i}function D(e){null!=e&&this.set(e)}function L(e,t,n){var i=""+Math.abs(e),a=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,C=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var E=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,I={},P={};function Y(e,t,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),e&&(P[e]=a),t&&(P[t[0]]=function(){return L(a.apply(this,arguments),t[1],t[2])}),n&&(P[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function R(e,t){return e.isValid()?(t=H(t,e.localeData()),I[t]=I[t]||function(e){var t,n,i,a=e.match(E);for(t=0,n=a.length;t<n;t++)P[a[t]]?a[t]=P[a[t]]:a[t]=(i=a[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,r="";for(i=0;i<n;i++)r+=j(a[i])?a[i].call(t,e):a[i];return r}}(t),I[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(A.lastIndex=0;n>=0&&A.test(e);)e=e.replace(A,i),A.lastIndex=0,n-=1;return e}var N={};function $(e,t){var n=e.toLowerCase();N[n]=N[n+"s"]=N[t]=e}function F(e){return"string"==typeof e?N[e]||N[e.toLowerCase()]:void 0}function W(e){var t,n,i={};for(n in e)s(e,n)&&(t=F(n))&&(i[t]=e[n]);return i}var z={};function U(e,t){z[e]=t}function V(e){return e%4==0&&e%100!=0||e%400==0}function B(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function q(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=B(t)),n}function G(e,t){return function(n){return null!=n?(K(this,e,n),a.updateOffset(this,t),this):J(this,e)}}function J(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function K(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&V(e.year())&&1===e.month()&&29===e.date()?(n=q(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Le(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var X,Q=/\d/,Z=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,ie=/\d\d?/,ae=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,se=/\d{1,4}/,le=/[+-]?\d{1,6}/,ce=/\d+/,de=/[+-]?\d+/,ue=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pe(e,t,n){X[e]=j(t)?t:function(e,i){return e&&n?n:t}}function me(e,t){return s(X,e)?X[e](t._strict,t._locale):new RegExp(_e(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,a){return t||n||i||a}))))}function _e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var ge={};function ve(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=q(e)}),n=0;n<e.length;n++)ge[e[n]]=i}function ye(e,t){ve(e,(function(e,n,i,a){i._w=i._w||{},t(e,i._w,i,a)}))}function be(e,t,n){null!=t&&s(ge,e)&&ge[e](t,n._a,n,e)}var we,ke=0,xe=1,Se=2,Ce=3,Me=4,Te=5,je=6,Oe=7,De=8;function Le(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=function(e,t){return(e%t+t)%t}(t,12);return e+=(t-n)/12,1===n?V(e)?29:28:31-n%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},Y("M",["MM",2],"Mo",(function(){return this.month()+1})),Y("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),Y("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),$("month","M"),U("month",8),pe("M",ie),pe("MM",ie,Z),pe("MMM",(function(e,t){return t.monthsShortRegex(e)})),pe("MMMM",(function(e,t){return t.monthsRegex(e)})),ve(["M","MM"],(function(e,t){t[xe]=q(e)-1})),ve(["MMM","MMMM"],(function(e,t,n,i){var a=n._locale.monthsParse(e,i,n._strict);null!=a?t[xe]=a:m(n).invalidMonth=e}));var Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ae="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe=fe,Ye=fe;function Re(e,t,n){var i,a,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(a=we.call(this._shortMonthsParse,o))?a:null:-1!==(a=we.call(this._longMonthsParse,o))?a:null:"MMM"===t?-1!==(a=we.call(this._shortMonthsParse,o))?a:-1!==(a=we.call(this._longMonthsParse,o))?a:null:-1!==(a=we.call(this._longMonthsParse,o))?a:-1!==(a=we.call(this._shortMonthsParse,o))?a:null}function He(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=q(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Le(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ne(e){return null!=e?(He(this,e),a.updateOffset(this,!0),this):J(this,"Month")}function $e(){function e(e,t){return t.length-e.length}var t,n,i=[],a=[],r=[];for(t=0;t<12;t++)n=p([2e3,t]),i.push(this.monthsShort(n,"")),a.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(e),a.sort(e),r.sort(e),t=0;t<12;t++)i[t]=_e(i[t]),a[t]=_e(a[t]);for(t=0;t<24;t++)r[t]=_e(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Fe(e){return V(e)?366:365}Y("Y",0,0,(function(){var e=this.year();return e<=9999?L(e,4):"+"+e})),Y(0,["YY",2],0,(function(){return this.year()%100})),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),$("year","y"),U("year",1),pe("Y",de),pe("YY",ie,Z),pe("YYYY",se,te),pe("YYYYY",le,ne),pe("YYYYYY",le,ne),ve(["YYYYY","YYYYYY"],ke),ve("YYYY",(function(e,t){t[ke]=2===e.length?a.parseTwoDigitYear(e):q(e)})),ve("YY",(function(e,t){t[ke]=a.parseTwoDigitYear(e)})),ve("Y",(function(e,t){t[ke]=parseInt(e,10)})),a.parseTwoDigitYear=function(e){return q(e)+(q(e)>68?1900:2e3)};var We=G("FullYear",!0);function ze(e,t,n,i,a,r,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,a,r,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,a,r,o),s}function Ue(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ve(e,t,n){var i=7+t-n;return-(7+Ue(e,0,i).getUTCDay()-t)%7+i-1}function Be(e,t,n,i,a){var r,o,s=1+7*(t-1)+(7+n-i)%7+Ve(e,i,a);return s<=0?o=Fe(r=e-1)+s:s>Fe(e)?(r=e+1,o=s-Fe(e)):(r=e,o=s),{year:r,dayOfYear:o}}function qe(e,t,n){var i,a,r=Ve(e.year(),t,n),o=Math.floor((e.dayOfYear()-r-1)/7)+1;return o<1?i=o+Ge(a=e.year()-1,t,n):o>Ge(e.year(),t,n)?(i=o-Ge(e.year(),t,n),a=e.year()+1):(a=e.year(),i=o),{week:i,year:a}}function Ge(e,t,n){var i=Ve(e,t,n),a=Ve(e+1,t,n);return(Fe(e)-i+a)/7}function Je(e,t){return e.slice(t,7).concat(e.slice(0,t))}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),$("week","w"),$("isoWeek","W"),U("week",5),U("isoWeek",5),pe("w",ie),pe("ww",ie,Z),pe("W",ie),pe("WW",ie,Z),ye(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=q(e)})),Y("d",0,"do","day"),Y("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),Y("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),Y("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),$("day","d"),$("weekday","e"),$("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),pe("d",ie),pe("e",ie),pe("E",ie),pe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),pe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),pe("dddd",(function(e,t){return t.weekdaysRegex(e)})),ye(["dd","ddd","dddd"],(function(e,t,n,i){var a=n._locale.weekdaysParse(e,i,n._strict);null!=a?t.d=a:m(n).invalidWeekday=e})),ye(["d","e","E"],(function(e,t,n,i){t[i]=q(e)}));var Ke="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ze=fe,et=fe,tt=fe;function nt(e,t,n){var i,a,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(a=we.call(this._weekdaysParse,o))?a:null:"ddd"===t?-1!==(a=we.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=we.call(this._minWeekdaysParse,o))?a:null:"dddd"===t?-1!==(a=we.call(this._weekdaysParse,o))?a:-1!==(a=we.call(this._shortWeekdaysParse,o))?a:-1!==(a=we.call(this._minWeekdaysParse,o))?a:null:"ddd"===t?-1!==(a=we.call(this._shortWeekdaysParse,o))?a:-1!==(a=we.call(this._weekdaysParse,o))?a:-1!==(a=we.call(this._minWeekdaysParse,o))?a:null:-1!==(a=we.call(this._minWeekdaysParse,o))?a:-1!==(a=we.call(this._weekdaysParse,o))?a:-1!==(a=we.call(this._shortWeekdaysParse,o))?a:null}function it(){function e(e,t){return t.length-e.length}var t,n,i,a,r,o=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=_e(this.weekdaysMin(n,"")),a=_e(this.weekdaysShort(n,"")),r=_e(this.weekdays(n,"")),o.push(i),s.push(a),l.push(r),c.push(i),c.push(a),c.push(r);o.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function at(){return this.hours()%12||12}function rt(e,t){Y(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function ot(e,t){return t._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,at),Y("k",["kk",2],0,(function(){return this.hours()||24})),Y("hmm",0,0,(function(){return""+at.apply(this)+L(this.minutes(),2)})),Y("hmmss",0,0,(function(){return""+at.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),Y("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),Y("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),rt("a",!0),rt("A",!1),$("hour","h"),U("hour",13),pe("a",ot),pe("A",ot),pe("H",ie),pe("h",ie),pe("k",ie),pe("HH",ie,Z),pe("hh",ie,Z),pe("kk",ie,Z),pe("hmm",ae),pe("hmmss",re),pe("Hmm",ae),pe("Hmmss",re),ve(["H","HH"],Ce),ve(["k","kk"],(function(e,t,n){var i=q(e);t[Ce]=24===i?0:i})),ve(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ve(["h","hh"],(function(e,t,n){t[Ce]=q(e),m(n).bigHour=!0})),ve("hmm",(function(e,t,n){var i=e.length-2;t[Ce]=q(e.substr(0,i)),t[Me]=q(e.substr(i)),m(n).bigHour=!0})),ve("hmmss",(function(e,t,n){var i=e.length-4,a=e.length-2;t[Ce]=q(e.substr(0,i)),t[Me]=q(e.substr(i,2)),t[Te]=q(e.substr(a)),m(n).bigHour=!0})),ve("Hmm",(function(e,t,n){var i=e.length-2;t[Ce]=q(e.substr(0,i)),t[Me]=q(e.substr(i))})),ve("Hmmss",(function(e,t,n){var i=e.length-4,a=e.length-2;t[Ce]=q(e.substr(0,i)),t[Me]=q(e.substr(i,2)),t[Te]=q(e.substr(a))}));var st,lt=G("Hours",!0),ct={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:Ae,week:{dow:0,doy:6},weekdays:Ke,weekdaysMin:Qe,weekdaysShort:Xe,meridiemParse:/[ap]\.?m?\.?/i},dt={},ut={};function ht(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function ft(e){return e?e.toLowerCase().replace("_","-"):e}function pt(t){var i=null;if(void 0===dt[t]&&void 0!==e&&e&&e.exports)try{i=st._abbr,n(540)("./"+t),mt(i)}catch(e){dt[t]=null}return dt[t]}function mt(e,t){var n;return e&&((n=c(t)?gt(e):_t(e,t))?st=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),st._abbr}function _t(e,t){if(null!==t){var n,i=ct;if(t.abbr=e,null!=dt[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=dt[e]._config;else if(null!=t.parentLocale)if(null!=dt[t.parentLocale])i=dt[t.parentLocale]._config;else{if(null==(n=pt(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;i=n._config}return dt[e]=new D(O(i,t)),ut[e]&&ut[e].forEach((function(e){_t(e.name,e.config)})),mt(e),dt[e]}return delete dt[e],null}function gt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return st;if(!r(e)){if(t=pt(e))return t;e=[e]}return function(e){for(var t,n,i,a,r=0;r<e.length;){for(t=(a=ft(e[r]).split("-")).length,n=(n=ft(e[r+1]))?n.split("-"):null;t>0;){if(i=pt(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&ht(a,n)>=t-1)break;t--}r++}return st}(e)}function vt(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[xe]<0||n[xe]>11?xe:n[Se]<1||n[Se]>Le(n[ke],n[xe])?Se:n[Ce]<0||n[Ce]>24||24===n[Ce]&&(0!==n[Me]||0!==n[Te]||0!==n[je])?Ce:n[Me]<0||n[Me]>59?Me:n[Te]<0||n[Te]>59?Te:n[je]<0||n[je]>999?je:-1,m(e)._overflowDayOfYear&&(t<ke||t>Se)&&(t=Se),m(e)._overflowWeeks&&-1===t&&(t=Oe),m(e)._overflowWeekday&&-1===t&&(t=De),m(e).overflow=t),e}var yt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/Z|[+-]\d\d(?::?\d\d)?/,kt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],St=/^\/?Date\((-?\d+)/i,Ct=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Tt(e){var t,n,i,a,r,o,s=e._i,l=yt.exec(s)||bt.exec(s);if(l){for(m(e).iso=!0,t=0,n=kt.length;t<n;t++)if(kt[t][1].exec(l[1])){a=kt[t][0],i=!1!==kt[t][2];break}if(null==a)return void(e._isValid=!1);if(l[3]){for(t=0,n=xt.length;t<n;t++)if(xt[t][1].exec(l[3])){r=(l[2]||" ")+xt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(l[4]){if(!wt.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=a+(r||"")+(o||""),Et(e)}else e._isValid=!1}function jt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ot(e){var t,n,i,a,r,o,s,l,c=Ct.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],a=c[2],r=c[5],o=c[6],s=c[7],l=[jt(n),Ae.indexOf(i),parseInt(a,10),parseInt(r,10),parseInt(o,10)],s&&l.push(parseInt(s,10)),t=l,!function(e,t,n){return!e||Xe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return Mt[e];if(t)return 0;var i=parseInt(n,10),a=i%100;return(i-a)/100*60+a}(c[8],c[9],c[10]),e._d=Ue.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Dt(e,t,n){return null!=e?e:null!=t?t:n}function Lt(e){var t,n,i,r,o,s=[];if(!e._d){for(i=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Se]&&null==e._a[xe]&&function(e){var t,n,i,a,r,o,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,o=4,n=Dt(t.GG,e._a[ke],qe(Pt(),1,4).year),i=Dt(t.W,1),((a=Dt(t.E,1))<1||a>7)&&(l=!0)):(r=e._locale._week.dow,o=e._locale._week.doy,c=qe(Pt(),r,o),n=Dt(t.gg,e._a[ke],c.year),i=Dt(t.w,c.week),null!=t.d?((a=t.d)<0||a>6)&&(l=!0):null!=t.e?(a=t.e+r,(t.e<0||t.e>6)&&(l=!0)):a=r),i<1||i>Ge(n,r,o)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(s=Be(n,i,a,r,o),e._a[ke]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=Dt(e._a[ke],i[ke]),(e._dayOfYear>Fe(o)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Ue(o,0,e._dayOfYear),e._a[xe]=n.getUTCMonth(),e._a[Se]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ce]&&0===e._a[Me]&&0===e._a[Te]&&0===e._a[je]&&(e._nextDay=!0,e._a[Ce]=0),e._d=(e._useUTC?Ue:ze).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ce]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}function Et(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,r,o,s,l=""+e._i,c=l.length,d=0;for(i=H(e._f,e._locale).match(E)||[],t=0;t<i.length;t++)r=i[t],(n=(l.match(me(r,e))||[])[0])&&((o=l.substr(0,l.indexOf(n))).length>0&&m(e).unusedInput.push(o),l=l.slice(l.indexOf(n)+n.length),d+=n.length),P[r]?(n?m(e).empty=!1:m(e).unusedTokens.push(r),be(r,n,e)):e._strict&&!n&&m(e).unusedTokens.push(r);m(e).charsLeftOver=c-d,l.length>0&&m(e).unusedInput.push(l),e._a[Ce]<=12&&!0===m(e).bigHour&&e._a[Ce]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ce]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[Ce],e._meridiem),null!==(s=m(e).era)&&(e._a[ke]=e._locale.erasConvertYear(s,e._a[ke])),Lt(e),vt(e)}else Ot(e);else Tt(e)}function At(e){var t=e._i,n=e._f;return e._locale=e._locale||gt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new w(vt(t)):(u(t)?e._d=t:r(n)?function(e){var t,n,i,a,r,o,s=!1;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)r=0,o=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],Et(t),_(t)&&(o=!0),r+=m(t).charsLeftOver,r+=10*m(t).unusedTokens.length,m(t).score=r,s?r<i&&(i=r,n=t):(null==i||r<i||o)&&(i=r,n=t,o&&(s=!0));f(e,n||t)}(e):n?Et(e):function(e){var t=e._i;c(t)?e._d=new Date(a.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=St.exec(e._i);null===t?(Tt(e),!1===e._isValid&&(delete e._isValid,Ot(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Lt(e)):o(t)?function(e){if(!e._d){var t=W(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Lt(e)}}(e):d(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),_(e)||(e._d=null),e))}function It(e,t,n,i,a){var s,c={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(e)&&l(e)||r(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=e,c._f=t,c._strict=i,(s=new w(vt(At(c))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Pt(e,t,n,i){return It(e,t,n,i,!1)}a.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),a.ISO_8601=function(){},a.RFC_2822=function(){};var Yt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Pt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Rt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Pt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Ht(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Pt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $t(e){var t=W(e),n=t.year||0,i=t.quarter||0,a=t.month||0,r=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,n,i=!1;for(t in e)if(s(e,t)&&(-1===we.call(Nt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Nt.length;++n)if(e[Nt[n]]){if(i)return!1;parseFloat(e[Nt[n]])!==q(e[Nt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+u+1e3*d+6e4*c+1e3*l*60*60,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=gt(),this._bubble()}function Ft(e){return e instanceof $t}function Wt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function zt(e,t){Y(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)}))}zt("Z",":"),zt("ZZ",""),pe("Z",he),pe("ZZ",he),ve(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Vt(he,e)}));var Ut=/([\+\-]|\d\d)/gi;function Vt(e,t){var n,i,a=(t||"").match(e);return null===a?null:0===(i=60*(n=((a[a.length-1]||[])+"").match(Ut)||["-",0,0])[1]+q(n[2]))?0:"+"===n[0]?i:-i}function Bt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(k(e)||u(e)?e.valueOf():Pt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),a.updateOffset(n,!1),n):Pt(e).local()}function qt(e){return-Math.round(e._d.getTimezoneOffset())}function Gt(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var Jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Kt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xt(e,t){var n,i,a,r,o,l,c=e,u=null;return Ft(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(c={},t?c[t]=+e:c.milliseconds=+e):(u=Jt.exec(e))?(n="-"===u[1]?-1:1,c={y:0,d:q(u[Se])*n,h:q(u[Ce])*n,m:q(u[Me])*n,s:q(u[Te])*n,ms:q(Wt(1e3*u[je]))*n}):(u=Kt.exec(e))?(n="-"===u[1]?-1:1,c={y:Qt(u[2],n),M:Qt(u[3],n),w:Qt(u[4],n),d:Qt(u[5],n),h:Qt(u[6],n),m:Qt(u[7],n),s:Qt(u[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(r=Pt(c.from),o=Pt(c.to),a=r.isValid()&&o.isValid()?(o=Bt(o,r),r.isBefore(o)?l=Zt(r,o):((l=Zt(o,r)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=a.milliseconds,c.M=a.months),i=new $t(c),Ft(e)&&s(e,"_locale")&&(i._locale=e._locale),Ft(e)&&s(e,"_isValid")&&(i._isValid=e._isValid),i}function Qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){return function(n,i){var a;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=i,i=a),tn(this,Xt(n,i),e),this}}function tn(e,t,n,i){var r=t._milliseconds,o=Wt(t._days),s=Wt(t._months);e.isValid()&&(i=null==i||i,s&&He(e,J(e,"Month")+s*n),o&&K(e,"Date",J(e,"Date")+o*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&a.updateOffset(e,o||s))}Xt.fn=$t.prototype,Xt.invalid=function(){return Xt(NaN)};var nn=en(1,"add"),an=en(-1,"subtract");function rn(e){return"string"==typeof e||e instanceof String}function on(e,t){if(e.date()<t.date())return-on(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function sn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gt(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ln=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function cn(){return this._locale}var dn=1e3,un=60*dn,hn=60*un,fn=3506328*hn;function pn(e,t){return(e%t+t)%t}function mn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-fn:new Date(e,t,n).valueOf()}function _n(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-fn:Date.UTC(e,t,n)}function gn(e,t){return t.erasAbbrRegex(e)}function vn(){var e,t,n=[],i=[],a=[],r=[],o=this.eras();for(e=0,t=o.length;e<t;++e)i.push(_e(o[e].name)),n.push(_e(o[e].abbr)),a.push(_e(o[e].narrow)),r.push(_e(o[e].name)),r.push(_e(o[e].abbr)),r.push(_e(o[e].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function yn(e,t){Y(0,[e,e.length],0,t)}function bn(e,t,n,i,a){var r;return null==e?qe(this,i,a).year:(t>(r=Ge(e,i,a))&&(t=r),wn.call(this,e,t,n,i,a))}function wn(e,t,n,i,a){var r=Be(e,t,n,i,a),o=Ue(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),pe("N",gn),pe("NN",gn),pe("NNN",gn),pe("NNNN",(function(e,t){return t.erasNameRegex(e)})),pe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ve(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var a=n._locale.erasParse(e,i,n._strict);a?m(n).era=a:m(n).invalidEra=e})),pe("y",ce),pe("yy",ce),pe("yyy",ce),pe("yyyy",ce),pe("yo",(function(e,t){return t._eraYearOrdinalRegex||ce})),ve(["y","yy","yyy","yyyy"],ke),ve(["yo"],(function(e,t,n,i){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ke]=n._locale.eraYearOrdinalParse(e,a):t[ke]=parseInt(e,10)})),Y(0,["gg",2],0,(function(){return this.weekYear()%100})),Y(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),yn("gggg","weekYear"),yn("ggggg","weekYear"),yn("GGGG","isoWeekYear"),yn("GGGGG","isoWeekYear"),$("weekYear","gg"),$("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),pe("G",de),pe("g",de),pe("GG",ie,Z),pe("gg",ie,Z),pe("GGGG",se,te),pe("gggg",se,te),pe("GGGGG",le,ne),pe("ggggg",le,ne),ye(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=q(e)})),ye(["gg","GG"],(function(e,t,n,i){t[i]=a.parseTwoDigitYear(e)})),Y("Q",0,"Qo","quarter"),$("quarter","Q"),U("quarter",7),pe("Q",Q),ve("Q",(function(e,t){t[xe]=3*(q(e)-1)})),Y("D",["DD",2],"Do","date"),$("date","D"),U("date",9),pe("D",ie),pe("DD",ie,Z),pe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ve(["D","DD"],Se),ve("Do",(function(e,t){t[Se]=q(e.match(ie)[0])}));var kn=G("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),$("dayOfYear","DDD"),U("dayOfYear",4),pe("DDD",oe),pe("DDDD",ee),ve(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=q(e)})),Y("m",["mm",2],0,"minute"),$("minute","m"),U("minute",14),pe("m",ie),pe("mm",ie,Z),ve(["m","mm"],Me);var xn=G("Minutes",!1);Y("s",["ss",2],0,"second"),$("second","s"),U("second",15),pe("s",ie),pe("ss",ie,Z),ve(["s","ss"],Te);var Sn,Cn,Mn=G("Seconds",!1);for(Y("S",0,0,(function(){return~~(this.millisecond()/100)})),Y(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),Y(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),Y(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),Y(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),Y(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),Y(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),$("millisecond","ms"),U("millisecond",16),pe("S",oe,Q),pe("SS",oe,Z),pe("SSS",oe,ee),Sn="SSSS";Sn.length<=9;Sn+="S")pe(Sn,ce);function Tn(e,t){t[je]=q(1e3*("0."+e))}for(Sn="S";Sn.length<=9;Sn+="S")ve(Sn,Tn);Cn=G("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var jn=w.prototype;function On(e){return e}jn.add=nn,jn.calendar=function(e,t){var n;1===arguments.length&&(k(n=arguments[0])||u(n)||rn(n)||d(n)||function(e){var t=r(e),n=!1;return t&&(n=0===e.filter((function(t){return!d(t)&&rn(e)})).length),t&&n}(n)||function(e){var t,n,i=o(e)&&!l(e),a=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)n=r[t],a=a||s(e,n);return i&&a}(n)||null==n?(e=arguments[0],t=void 0):function(e){var t,n,i=o(e)&&!l(e),a=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)n=r[t],a=a||s(e,n);return i&&a}(arguments[0])&&(t=arguments[0],e=void 0));var i=e||Pt(),c=Bt(i,this).startOf("day"),h=a.calendarFormat(this,c)||"sameElse",f=t&&(j(t[h])?t[h].call(this,i):t[h]);return this.format(f||this.localeData().calendar(h,this,Pt(i)))},jn.clone=function(){return new w(this)},jn.diff=function(e,t,n){var i,a,r;if(!this.isValid())return NaN;if(!(i=Bt(e,this)).isValid())return NaN;switch(a=6e4*(i.utcOffset()-this.utcOffset()),t=F(t)){case"year":r=on(this,i)/12;break;case"month":r=on(this,i);break;case"quarter":r=on(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-a)/864e5;break;case"week":r=(this-i-a)/6048e5;break;default:r=this-i}return n?r:B(r)},jn.endOf=function(e){var t,n;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?_n:mn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hn-pn(t+(this._isUTC?0:this.utcOffset()*un),hn)-1;break;case"minute":t=this._d.valueOf(),t+=un-pn(t,un)-1;break;case"second":t=this._d.valueOf(),t+=dn-pn(t,dn)-1}return this._d.setTime(t),a.updateOffset(this,!0),this},jn.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=R(this,e);return this.localeData().postformat(t)},jn.from=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Pt(e).isValid())?Xt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},jn.fromNow=function(e){return this.from(Pt(),e)},jn.to=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Pt(e).isValid())?Xt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},jn.toNow=function(e){return this.to(Pt(),e)},jn.get=function(e){return j(this[e=F(e)])?this[e]():this},jn.invalidAt=function(){return m(this).overflow},jn.isAfter=function(e,t){var n=k(e)?e:Pt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},jn.isBefore=function(e,t){var n=k(e)?e:Pt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},jn.isBetween=function(e,t,n,i){var a=k(e)?e:Pt(e),r=k(t)?t:Pt(t);return!!(this.isValid()&&a.isValid()&&r.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(a,n):!this.isBefore(a,n))&&(")"===i[1]?this.isBefore(r,n):!this.isAfter(r,n)))},jn.isSame=function(e,t){var n,i=k(e)?e:Pt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},jn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},jn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},jn.isValid=function(){return _(this)},jn.lang=ln,jn.locale=sn,jn.localeData=cn,jn.max=Rt,jn.min=Yt,jn.parsingFlags=function(){return f({},m(this))},jn.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:z[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=W(e));for(n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(j(this[e=F(e)]))return this[e](t);return this},jn.startOf=function(e){var t,n;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?_n:mn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pn(t+(this._isUTC?0:this.utcOffset()*un),hn);break;case"minute":t=this._d.valueOf(),t-=pn(t,un);break;case"second":t=this._d.valueOf(),t-=pn(t,dn)}return this._d.setTime(t),a.updateOffset(this,!0),this},jn.subtract=an,jn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},jn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},jn.toDate=function(){return new Date(this.valueOf())},jn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?R(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):j(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",R(n,"Z")):R(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},jn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=a+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(jn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),jn.toJSON=function(){return this.isValid()?this.toISOString():null},jn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},jn.unix=function(){return Math.floor(this.valueOf()/1e3)},jn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},jn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},jn.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},jn.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},jn.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},jn.eraYear=function(){var e,t,n,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,i=this.startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-a(r[e].since).year())*n+r[e].offset;return this.year()},jn.year=We,jn.isLeapYear=function(){return V(this.year())},jn.weekYear=function(e){return bn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},jn.isoWeekYear=function(e){return bn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},jn.quarter=jn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},jn.month=Ne,jn.daysInMonth=function(){return Le(this.year(),this.month())},jn.week=jn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},jn.isoWeek=jn.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},jn.weeksInYear=function(){var e=this.localeData()._week;return Ge(this.year(),e.dow,e.doy)},jn.weeksInWeekYear=function(){var e=this.localeData()._week;return Ge(this.weekYear(),e.dow,e.doy)},jn.isoWeeksInYear=function(){return Ge(this.year(),1,4)},jn.isoWeeksInISOWeekYear=function(){return Ge(this.isoWeekYear(),1,4)},jn.date=kn,jn.day=jn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},jn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},jn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},jn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},jn.hour=jn.hours=lt,jn.minute=jn.minutes=xn,jn.second=jn.seconds=Mn,jn.millisecond=jn.milliseconds=Cn,jn.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Vt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=qt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?tn(this,Xt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:qt(this)},jn.utc=function(e){return this.utcOffset(0,e)},jn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(qt(this),"m")),this},jn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Vt(ue,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},jn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Pt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},jn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},jn.isLocal=function(){return!!this.isValid()&&!this._isUTC},jn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},jn.isUtc=Gt,jn.isUTC=Gt,jn.zoneAbbr=function(){return this._isUTC?"UTC":""},jn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},jn.dates=S("dates accessor is deprecated. Use date instead.",kn),jn.months=S("months accessor is deprecated. Use month instead",Ne),jn.years=S("years accessor is deprecated. Use year instead",We),jn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),jn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=At(t))._a?(e=t._isUTC?p(t._a):Pt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(i=0;i<a;i++)(n&&e[i]!==t[i]||!n&&q(e[i])!==q(t[i]))&&o++;return o+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Dn=D.prototype;function Ln(e,t,n,i){var a=gt(),r=p().set(i,t);return a[n](r,e)}function En(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ln(e,t,n,"month");var i,a=[];for(i=0;i<12;i++)a[i]=Ln(e,i,n,"month");return a}function An(e,t,n,i){"boolean"==typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var a,r=gt(),o=e?r._week.dow:0,s=[];if(null!=n)return Ln(t,(n+o)%7,i,"day");for(a=0;a<7;a++)s[a]=Ln(t,(a+o)%7,i,"day");return s}Dn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return j(i)?i.call(t,n):i},Dn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(E).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},Dn.invalidDate=function(){return this._invalidDate},Dn.ordinal=function(e){return this._ordinal.replace("%d",e)},Dn.preparse=On,Dn.postformat=On,Dn.relativeTime=function(e,t,n,i){var a=this._relativeTime[n];return j(a)?a(e,t,n,i):a.replace(/%d/i,e)},Dn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return j(n)?n(t):n.replace(/%s/i,t)},Dn.set=function(e){var t,n;for(n in e)s(e,n)&&(j(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Dn.eras=function(e,t){var n,i,r,o=this._eras||gt("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=a(o[n].since).startOf("day"),o[n].since=r.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=a(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf()}}return o},Dn.erasParse=function(e,t,n){var i,a,r,o,s,l=this.eras();for(e=e.toUpperCase(),i=0,a=l.length;i<a;++i)if(r=l[i].name.toUpperCase(),o=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[i];break;case"NNNN":if(r===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([r,o,s].indexOf(e)>=0)return l[i]},Dn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?a(e.since).year():a(e.since).year()+(t-e.offset)*n},Dn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||vn.call(this),e?this._erasAbbrRegex:this._erasRegex},Dn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||vn.call(this),e?this._erasNameRegex:this._erasRegex},Dn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||vn.call(this),e?this._erasNarrowRegex:this._erasRegex},Dn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ie).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},Dn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ie.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Dn.monthsParse=function(e,t,n){var i,a,r;if(this._monthsParseExact)return Re.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(a=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Dn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||$e.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ye),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Dn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||$e.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Pe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Dn.week=function(e){return qe(e,this._week.dow,this._week.doy).week},Dn.firstDayOfYear=function(){return this._week.doy},Dn.firstDayOfWeek=function(){return this._week.dow},Dn.weekdays=function(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Je(n,this._week.dow):e?n[e.day()]:n},Dn.weekdaysMin=function(e){return!0===e?Je(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Dn.weekdaysShort=function(e){return!0===e?Je(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Dn.weekdaysParse=function(e,t,n){var i,a,r;if(this._weekdaysParseExact)return nt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(a=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Dn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Dn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Dn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Dn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Dn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},mt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===q(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),a.lang=S("moment.lang is deprecated. Use moment.locale instead.",mt),a.langData=S("moment.langData is deprecated. Use moment.localeData instead.",gt);var In=Math.abs;function Pn(e,t,n,i){var a=Xt(t,n);return e._milliseconds+=i*a._milliseconds,e._days+=i*a._days,e._months+=i*a._months,e._bubble()}function Yn(e){return e<0?Math.floor(e):Math.ceil(e)}function Rn(e){return 4800*e/146097}function Hn(e){return 146097*e/4800}function Nn(e){return function(){return this.as(e)}}var $n=Nn("ms"),Fn=Nn("s"),Wn=Nn("m"),zn=Nn("h"),Un=Nn("d"),Vn=Nn("w"),Bn=Nn("M"),qn=Nn("Q"),Gn=Nn("y");function Jn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Kn=Jn("milliseconds"),Xn=Jn("seconds"),Qn=Jn("minutes"),Zn=Jn("hours"),ei=Jn("days"),ti=Jn("months"),ni=Jn("years"),ii=Math.round,ai={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ri(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}var oi=Math.abs;function si(e){return(e>0)-(e<0)||+e}function li(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,a,r,o,s,l=oi(this._milliseconds)/1e3,c=oi(this._days),d=oi(this._months),u=this.asSeconds();return u?(e=B(l/60),t=B(e/60),l%=60,e%=60,n=B(d/12),d%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",a=u<0?"-":"",r=si(this._months)!==si(u)?"-":"",o=si(this._days)!==si(u)?"-":"",s=si(this._milliseconds)!==si(u)?"-":"",a+"P"+(n?r+n+"Y":"")+(d?r+d+"M":"")+(c?o+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var ci=$t.prototype;return ci.isValid=function(){return this._isValid},ci.abs=function(){var e=this._data;return this._milliseconds=In(this._milliseconds),this._days=In(this._days),this._months=In(this._months),e.milliseconds=In(e.milliseconds),e.seconds=In(e.seconds),e.minutes=In(e.minutes),e.hours=In(e.hours),e.months=In(e.months),e.years=In(e.years),this},ci.add=function(e,t){return Pn(this,e,t,1)},ci.subtract=function(e,t){return Pn(this,e,t,-1)},ci.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=F(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Rn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Hn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},ci.asMilliseconds=$n,ci.asSeconds=Fn,ci.asMinutes=Wn,ci.asHours=zn,ci.asDays=Un,ci.asWeeks=Vn,ci.asMonths=Bn,ci.asQuarters=qn,ci.asYears=Gn,ci.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},ci._bubble=function(){var e,t,n,i,a,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||r<=0&&o<=0&&s<=0||(r+=864e5*Yn(Hn(s)+o),o=0,s=0),l.milliseconds=r%1e3,e=B(r/1e3),l.seconds=e%60,t=B(e/60),l.minutes=t%60,n=B(t/60),l.hours=n%24,o+=B(n/24),a=B(Rn(o)),s+=a,o-=Yn(Hn(a)),i=B(s/12),s%=12,l.days=o,l.months=s,l.years=i,this},ci.clone=function(){return Xt(this)},ci.get=function(e){return e=F(e),this.isValid()?this[e+"s"]():NaN},ci.milliseconds=Kn,ci.seconds=Xn,ci.minutes=Qn,ci.hours=Zn,ci.days=ei,ci.weeks=function(){return B(this.days()/7)},ci.months=ti,ci.years=ni,ci.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,a=!1,r=ai;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(a=e),"object"==typeof t&&(r=Object.assign({},ai,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),i=function(e,t,n,i){var a=Xt(e).abs(),r=ii(a.as("s")),o=ii(a.as("m")),s=ii(a.as("h")),l=ii(a.as("d")),c=ii(a.as("M")),d=ii(a.as("w")),u=ii(a.as("y")),h=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=i,ri.apply(null,h)}(this,!a,r,n),a&&(i=n.pastFuture(+this,i)),n.postformat(i)},ci.toISOString=li,ci.toString=li,ci.toJSON=li,ci.locale=sn,ci.localeData=cn,ci.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",li),ci.lang=ln,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),pe("x",de),pe("X",/[+-]?\d+(\.\d{1,3})?/),ve("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ve("x",(function(e,t,n){n._d=new Date(q(e))})),
//! moment.js
a.version="2.26.0",t=Pt,a.fn=jn,a.min=function(){return Ht("isBefore",[].slice.call(arguments,0))},a.max=function(){return Ht("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=p,a.unix=function(e){return Pt(1e3*e)},a.months=function(e,t){return En(e,t,"months")},a.isDate=u,a.locale=mt,a.invalid=g,a.duration=Xt,a.isMoment=k,a.weekdays=function(e,t,n){return An(e,t,n,"weekdays")},a.parseZone=function(){return Pt.apply(null,arguments).parseZone()},a.localeData=gt,a.isDuration=Ft,a.monthsShort=function(e,t){return En(e,t,"monthsShort")},a.weekdaysMin=function(e,t,n){return An(e,t,n,"weekdaysMin")},a.defineLocale=_t,a.updateLocale=function(e,t){if(null!=t){var n,i,a=ct;null!=dt[e]&&null!=dt[e].parentLocale?dt[e].set(O(dt[e]._config,t)):(null!=(i=pt(e))&&(a=i._config),t=O(a,t),null==i&&(t.abbr=e),(n=new D(t)).parentLocale=dt[e],dt[e]=n),mt(e)}else null!=dt[e]&&(null!=dt[e].parentLocale?(dt[e]=dt[e].parentLocale,e===mt()&&mt(e)):null!=dt[e]&&delete dt[e]);return dt[e]},a.locales=function(){return C(dt)},a.weekdaysShort=function(e,t,n){return An(e,t,n,"weekdaysShort")},a.normalizeUnits=F,a.relativeTimeRounding=function(e){return void 0===e?ii:"function"==typeof e&&(ii=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==ai[e]&&(void 0===t?ai[e]:(ai[e]=t,"s"===e&&(ai.ss=t-1),!0))},a.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},a.prototype=jn,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},a}()}).call(this,n(510)(e))},function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(6),l=n(2),c=n.n(l);function d(e){var t={contentType:"application/json",type:e.type||"GET",data:e.data||{},url:e.url};"GET"==t.type||"DELETE"==t.type?(r.a.isEmptyObject(t.data)||(t.url+=-1==t.url.indexOf("?")?"?":"&",t.url+=r.a.param(t.data,!0)),t.data=null):(t.dataType="json",t.data=JSON.stringify(t.data)),r.a.ajax(t).done((function(t){if("string"==typeof t)try{t=t.replace("Infinity,",'"Infinity",'),t=r.a.parseJSON(t)}catch(e){console.debug(e)}e.success&&e.success(t)})).fail((function(t){var n=null;try{n=r.a.parseJSON(t.responseText)}catch(e){n=t.responseText}e.error&&e.error(n,t.status)})).always((function(){e.complete&&e.complete()}))}var u=1024,h=u*u,f=h*u,p=f*u;function m(e){var t,n,i=2166136261;for(t=0,n=e.length;t<n;t++)i^=e.charCodeAt(t),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0}t.a={cssLoadFile:function(e){r()('link[href^="'.concat(e,'"]')).length||r()('<link href="'.concat(Object(o.getAppRoot)()).concat(e,'" rel="stylesheet">')).appendTo("head")},cssGetAttribute:function(e,t){var n=r()('<div class="'.concat(e,'"></div>'));n.appendTo(":eq(0)");var i=n.css(t);return n.remove(),i},get:function(e){top.__utils__get__=top.__utils__get__||{};var t=JSON.stringify(e);e.cache&&top.__utils__get__[t]?(e.success&&e.success(top.__utils__get__[t]),window.console.debug("utils.js::get() - Fetching from cache [".concat(e.url,"]."))):d({url:e.url,data:e.data,success:function(n){top.__utils__get__[t]=n,e.success&&e.success(n)},error:function(t,n){e.error&&e.error(t,n)}})},merge:function(e,t){return e?i.default.defaults(e,t):t},iframe:function(e){return'<iframe src="'.concat(e,'" frameborder="0" style="width: 100%; height: 100%;"/>')},bytesToString:function(e,t,n){n=void 0!==n?n:1;var i="";if(e>=p)e/=p,i="TB";else if(e>=f)e/=f,i="GB";else if(e>=h)e/=h,i="MB";else if(e>=u)e/=u,i="KB";else{if(!(e>0))return t?"0 b":"<strong>-</strong>";i="b"}var a="b"==i?e:function(e,t){for(var n=1,i=0;i<t;i++)n*=10;return Math.round(e*n)/n}(e,n);return t?"".concat(a," ").concat(i):"<strong>".concat(a,"</strong> ").concat(i)},uid:function(){return top.__utils__uid__=top.__utils__uid__||0,"uid-".concat(top.__utils__uid__++)},time:function(){var e=new Date,t=(e.getHours()<10?"0":"")+e.getHours(),n=(e.getMinutes()<10?"0":"")+e.getMinutes();return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear(),", ").concat(t,":").concat(n)},request:d,sanitize:function(e){return r()("<div/>").text(e).html()},textify:function(e){if(r.a.isArray(e)){var t=(e=e.toString().replace(/,/g,", ")).lastIndexOf(", ");return-1!=t&&(e="".concat(e.substr(0,t)," or ").concat(e.substr(t+2))),e}return""},isEmpty:function(e){if(e instanceof Array||(e=[e]),0===e.length)return!0;for(var t in e)if(["__null__","__undefined__",null,void 0].indexOf(e[t])>-1)return!0;return!1},deepeach:function e(t,n){for(var a in t){var r=t[a];if(i.default.isObject(r)){var o=n(r);o&&(t[a]=o),e(r,n)}}},isJSON:function(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},clone:function(e){return JSON.parse(JSON.stringify(e)||null)},linkify:function(e){var t,n,i;return t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gim,n=/(^|[^/])(www\.[\S]+(\b|$))/gim,i=/(([a-zA-Z0-9\-_.])+@[a-zA-Z_]+?(\.[a-zA-Z]{2,6})+)/gim,e.replace(t,'<a href="$1" target="_blank">$1</a>').replace(n,'$1<a href="http://$2" target="_blank">$2</a>').replace(i,'<a href="mailto:$1">$1</a>')},appendScriptStyle:function(e){e.script&&""!==e.script&&r()("<script/>",{type:"text/javascript"}).text(e.script).appendTo("head"),e.styles&&""!==e.styles&&r()("<style/>",{type:"text/css"}).text(e.styles).appendTo("head")},getQueryString:function(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(e).replace(/[.+*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))},setWindowTitle:function(e){var t=Object(s.a)();window.document.title=e?"Galaxy ".concat(t.config.brand?" | ".concat(t.config.brand):""," | ").concat(c()(e)):"Galaxy ".concat(t.config.brand?" | ".concat(t.config.brand):"")}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(137),c=n(2),d=n.n(c),u={logger:null,_logNamespace:"."};Object(l.a)(u);var h=s.a.Model.extend({initialize:function(e){if(this._checkEnabledSessionStorage(),!e.id)throw new Error("SessionStorageModel requires an id in the initial attributes");this.id=e.id;var t=this.isNew()?{}:this._read(this);this.clear({silent:!0}),this.save(r.default.extend({},this.defaults,t,e),{silent:!0}),this.on("change",(function(){this.save()}))},_checkEnabledSessionStorage:function(){try{return window.sessionStorage.length>=0}catch(e){return alert("Please enable cookies in your browser for this Galaxy site"),!1}},sync:function(e,t,n){n.silent||t.trigger("request",t,{},n);var i={};switch(e){case"create":i=this._create(t);break;case"read":i=this._read(t);break;case"update":i=this._update(t);break;case"delete":i=this._delete(t)}return void 0!==i||null!==i?n.success&&n.success():n.error&&n.error(),i},_create:function(e){try{var t=e.toJSON(),n=sessionStorage.setItem(e.id,JSON.stringify(t));return null===n?n:t}catch(e){if(!(e instanceof DOMException&&navigator.userAgent.indexOf("Safari")>-1))throw e}return null},_read:function(e){return JSON.parse(sessionStorage.getItem(e.id))},_update:function(e){return e._create(e)},_delete:function(e){return sessionStorage.removeItem(e.id)},isNew:function(){return!Object.prototype.hasOwnProperty.call(sessionStorage,this.id)},_log:function(){return JSON.stringify(this.toJSON(),null,"  ")},toString:function(){return"SessionStorageModel(".concat(this.id,")")}});h.prototype=r.default.omit(h.prototype,"url","urlRoot");var f={searchAttributes:[],searchAliases:{},searchAttribute:function(e,t){var n=this.get(e);return!(!t||null==n)&&(r.default.isArray(n)?this._searchArrayAttribute(n,t):-1!==n.toString().toLowerCase().indexOf(t.toLowerCase()))},_searchArrayAttribute:function(e,t){return t=t.toLowerCase(),r.default.any(e,(function(e){return-1!==e.toString().toLowerCase().indexOf(t.toLowerCase())}))},search:function(e){var t=this;return r.default.filter(this.searchAttributes,(function(n){return t.searchAttribute(n,e)}))},matches:function(e){var t=e.split("=");if(t.length>=2){var n=t[0];return n=this.searchAliases[n]||n,this.searchAttribute(n,t[1])}return!!this.search(e).length},matchesAll:function(e){var t=this;return e=e.match(/(".*"|\w*=".*"|\S*)/g).filter((function(e){return!!e})),r.default.all(e,(function(e){return e=e.replace(/"/g,""),t.matches(e)}))}},p={hiddenUntilActivated:function(e,t){if(t=t||{},this.HUAVOptions={$elementShown:this.$el,showFn:a.a.prototype.toggle,showSpeed:"fast"},r.default.extend(this.HUAVOptions,t||{}),this.HUAVOptions.hasBeenShown=this.HUAVOptions.$elementShown.is(":visible"),this.hidden=this.isHidden(),e){var n=this;e.on("click",(function(e){n.toggle(n.HUAVOptions.showSpeed)}))}},isHidden:function(){return this.HUAVOptions.$elementShown.is(":hidden")},toggle:function(){return this.hidden?(this.HUAVOptions.hasBeenShown||r.default.isFunction(this.HUAVOptions.onshowFirstTime)&&(this.HUAVOptions.hasBeenShown=!0,this.HUAVOptions.onshowFirstTime.call(this)),r.default.isFunction(this.HUAVOptions.onshow)&&(this.HUAVOptions.onshow.call(this),this.trigger("hiddenUntilActivated:shown",this)),this.hidden=!1):(r.default.isFunction(this.HUAVOptions.onhide)&&(this.HUAVOptions.onhide.call(this),this.trigger("hiddenUntilActivated:hidden",this)),this.hidden=!0),this.HUAVOptions.showFn.apply(this.HUAVOptions.$elementShown,arguments)}},m={initialize:function(e){this.draggable=e.draggable||!1},$dragHandle:function(){return this.$(".title-bar")},toggleDraggable:function(){this.draggable?this.draggableOff():this.draggableOn()},draggableOn:function(){this.draggable=!0,this.dragStartHandler=r.default.bind(this._dragStartHandler,this),this.dragEndHandler=r.default.bind(this._dragEndHandler,this);var e=this.$dragHandle().attr("draggable",!0).get(0);e.addEventListener("dragstart",this.dragStartHandler,!1),e.addEventListener("dragend",this.dragEndHandler,!1)},draggableOff:function(){this.draggable=!1;var e=this.$dragHandle().attr("draggable",!1).get(0);e.removeEventListener("dragstart",this.dragStartHandler,!1),e.removeEventListener("dragend",this.dragEndHandler,!1)},_dragStartHandler:function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",JSON.stringify(this.model.toJSON())),this.trigger("draggable:dragstart",e,this),!1},_dragEndHandler:function(e){return this.trigger("draggable:dragend",e,this),!1}},_={initialize:function(e){this.selectable=e.selectable||!1,this.selected=e.selected||!1},$selector:function(){return this.$(".selector")},_renderSelected:function(){this.$selector().find("span").toggleClass("fa-check-square-o",this.selected).toggleClass("fa-square-o",!this.selected)},toggleSelector:function(){this.$selector().is(":visible")?this.hideSelector():this.showSelector()},showSelector:function(e){e=void 0!==e?e:this.fxSpeed,this.selectable=!0,this.trigger("selectable",!0,this),this._renderSelected(),e?this.$selector().show(e):this.$selector().show()},hideSelector:function(e){e=void 0!==e?e:this.fxSpeed,this.selectable=!1,this.trigger("selectable",!1,this),e?this.$selector().hide(e):this.$selector().hide()},toggleSelect:function(e){this.selected?this.deselect(e):this.select(e)},select:function(e){return this.selected||(this.trigger("selected",this,e),this.selected=!0,this._renderSelected()),!1},deselect:function(e){return this.selected&&(this.trigger("de-selected",this,e),this.selected=!1,this._renderSelected()),!1}};t.a={LoggableMixin:u,SessionStorageModel:h,mixin:function(e,t){var n=Array.prototype.slice.call(arguments,0),i=n.pop();return n.unshift(i),r.default.defaults.apply(r.default,n)},SearchableModelMixin:f,HiddenUntilActivatedViewMixin:p,DraggableViewMixin:m,SelectableViewMixin:_,wrapTemplate:function(e,t){t=t||"model";var n=r.default.template(e.join(""));return function(e,i){var a={view:i||{},_l:d.a};return a[t]=e||{},n(a)}},buildComparator:function(e,t){var n=(t=t||{}).ascending?1:-1;return function(t,i){return((t=t.get(e))<(i=i.get(e))?-1:t>i?1:0)*n}}}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(496),a=n.n(i).a},,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(154),c=n(447),d=n(10),u={View:s.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new s.a.Model({id:d.a.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element"),Object(c.b)(this.$text[0],{mask:function(e){return!!t._isParameter(e)||!(!t.model.get("precise")&&e!=e.split(".")[0])&&e==e.replace(/[^0-9eE.-]/g,"")}}),this.$text[0].addEventListener("change",(function(e){t.value(e.currentTarget.value)}));var n=this.model.attributes;this.has_slider=null!==n.max&&null!==n.min&&n.max>n.min;var i=n.step;i||(i=n.precise&&this.has_slider?(n.max-n.min)/n.split:1),this.has_slider&&this.$slider.slider({min:n.min,max:n.max,step:i}).on("slide",(function(e,n){t.value(n.value)})),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.get("value");this.has_slider?(this.$slider.slider("value",e),this.$slider.show(),this.$text.addClass("col-3 mr-3")):(this.$slider.hide(),this.$text.removeClass("col-3 mr-3")),e!==this.$text.val()&&this.$text.val(e)},value:function(e){if(void 0!==e){var t=this.model.attributes,n=e,i=null!==e&&""!==e&&!this._isParameter(e);i&&(isNaN(e)&&(e=0),t.precise||(e=Math.round(e)),null===t.max||isNaN(t.max)||(e=Math.min(e,t.max)),null===t.min||isNaN(t.min)||(e=Math.max(e,t.min))),this.model.set("value",e),this.model.trigger("change"),t.onchange(e);var a=i&&parseInt(n)!==parseInt(e)?"This value was invalid or out-of-range. It has been auto-corrected.":null;this.model.trigger("error",a)}return this.model.get("value")},_isParameter:function(e){return this.model.get("is_workflow")&&"$"===String(e).substring(0,1)},_template:function(){return'<div class="ui-form-slider container-fluid">\n                    <div class="row">\n                        <input class="ui-input ui-form-slider-text" type="text"/>\n                        <div class="ui-form-slider-element col mt-1"/>\n                    </div>\n                </div>'}})},h=n(66),f=s.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new s.a.Model({visible:!0,cls:null,data:[],id:d.a.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(e),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this,"change",(function(){t.model.get("onchange")(t.value())})),this.render()},render:function(){var e=this;this.$el.empty().removeClass().addClass("ui-options").addClass(this.model.get("cls")).append(this.$message=a()("<div/>").addClass("mt-2")).append(this.$menu=a()("<div/>").addClass("ui-options-menu")).append(this.$options=a()(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new h.a.ButtonCheck({onclick:function(){e.$("input").prop("checked",0!==e.all_button.value()),e.value(e._getValue()),e.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(e){e.data&&this.model.set("data",e.data)},_changeData:function(){var e=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):r.default.each(this.model.get("data"),(function(t){e.$options.append(a()(e._templateOption(t)).addClass("ui-option").tooltip({title:t.tooltip||"",placement:"bottom"}))})),this.$("input").on("change",(function(){e.value(e._getValue()),e.trigger("change")})),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(Array.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(e){return void 0!==e&&this.model.set("value",e),this._getValue()},first:function(){var e=this.$("input").first();return e.length>0?e.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},_setValue:function(e){var t=this;if(void 0!==e&&(this.$("input").prop("checked",!1),null!==e)){var n=Array.isArray(e)?e:[e];r.default.each(n,(function(e){t.$('input[value="'.concat(e,'"]')).first().prop("checked",!0)}))}},_getValue:function(){var e=[];return this.$(":checked").each((function(){e.push(a()(this).val())})),d.a.isEmpty(e)?null:this.model.get("multiple")?e:e[0]},_messageShow:function(e,t){this.$message.show().removeClass().addClass("alert alert-".concat(t)).html(e)},_template:function(){return a()("<div/>").addClass("ui-options-list")}}),p=f.extend({_templateOption:function(e){var t=d.a.uid();return a()("<div/>").addClass("ui-option").addClass(this.model.get("cls_option")).append(a()("<input/>").attr({id:t,type:this.model.get("type"),name:this.model.id,value:e.value})).append(a()("<label/>").addClass("ui-options-label").attr("for",t).html(e.label))}}),m={};m.View=p.extend({initialize:function(e){e.type="radio",p.prototype.initialize.call(this,e)}});var _={};_.View=p.extend({initialize:function(e){e.type="checkbox",e.multiple=!0,p.prototype.initialize.call(this,e)}});var g={};g.View=f.extend({initialize:function(e){f.prototype.initialize.call(this,e)},_setValue:function(e){void 0!==e&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'.concat(e,'"]')).prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(e){var t=a()("<label/>").attr("role","button");return e.icon&&t.append(a()("<i/>").addClass("fa").addClass(e.icon).addClass(!e.label&&"no-padding")),t.append(a()("<input/>").attr({type:"radio",name:this.model.id,value:e.value}).hide()),e.label&&t.append(e.label),t},_template:function(){return a()("<div/>").addClass("ui-radiobutton")}});var v={Base:f,BaseIcons:p,Radio:m,RadioButton:g,Checkbox:_},y={View:v.BaseIcons.extend({initialize:function(e){e.type=e.display||"checkbox",e.multiple="checkbox"==e.type,v.BaseIcons.prototype.initialize.call(this,e)},update:function(e){this.model.set("data",e.options)},_setValue:function(e){if(v.BaseIcons.prototype._setValue.call(this,e),null!=e&&this.header_index){var t=this,n=Array.isArray(e)?e:[e];r.default.each(n,(function(e){var n=t.header_index[e];r.default.each(n,(function(e){t._setState(e,!0)}))}))}},_setState:function(e,t){var n=this.$(".button-".concat(e)),i=this.$(".subgroup-".concat(e));n.data("is_expanded",t),t?(i.show(),n.removeClass("fa-plus-square").addClass("fa-minus-square")):(i.hide(),n.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){var e=this;function t(t,n){var i=t.find(".button-".concat(n));i.on("click",(function(){e._setState(n,!i.data("is_expanded"))}))}this.header_index={};var n=a()("<div/>");return function n(i,r,o){for(var s in o=o||[],r){var l=r[s],c=l.options&&l.options.length>0,u=o.slice(0);e.header_index[l.value]=u.slice(0);var h=a()("<div/>");if(c){var f=d.a.uid(),p=a()("<span/>").addClass("button-".concat(f)).addClass("ui-drilldown-button fa fa-plus-square"),m=a()("<div/>").addClass("subgroup-".concat(f)).addClass("ui-drilldown-subgroup");h.append(a()("<div/>").append(p).append(e._templateOption({label:l.name,value:l.value}))),u.push(f),n(m,l.options,u),h.append(m),t(h,f)}else h.append(e._templateOption({label:l.name,value:l.value}));i.append(h)}}(n,this.model.get("data")),n},_template:function(){return a()("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}})},b=n(73),w=s.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new s.a.Model({disabled:!1,visible:!0,onchange:function(){}}).set(e),this.setElement(this._template()),this.$label=this.$(".label"),this.$input=this.$(".custom-control-input"),this.listenTo(this.model,"change",this.render,this),this.listenTo(this,"change",(function(){t.model.get("onchange")(t.value())})),this.render()},events:{input:"_onchange"},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){return"true"==this.model.get("value")?(this.$label.text("Yes"),this.$input.prop("checked",!0)):(this.$label.text("No"),this.$input.prop("checked",!1)),this.model.get("disabled")?this.$input.attr("disabled",!0):this.$input.removeAttr("disabled"),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$input.prop("checked")?"true":"false"),this.trigger("change")},_template:function(){var e=this.model.id;return'<div class="ui-switch">\n                    <div class="custom-control" id="'.concat(e,'">\n                        <input type="checkbox" class="custom-control-input" id="switch-id-').concat(e,'" />\n                        <label class="custom-control-label" for="switch-id-').concat(e,'"/>\n                    </div>\n                    <div class="label" />\n                </div>')}}),k=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(e),this.listenTo(this.model,"change",this.render,this),e&&e.active_tab&&(this.active_tab=e.active_tab),this.render()},update:function(e){this.model.set(e)},render:function(){var e=this.model.get("status");if(this.$el.removeClass().addClass("alert alert-".concat(e," mt-2")).addClass(this.model.get("cls")),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var t=this;this.timeout=window.setTimeout((function(){t.model.set("message","")}),3e3)}}else this.$el.hide();return this},messageForDisplay:function(){return r.default.escape(this.model.get("message"))}}),x=k.extend({messageForDisplay:function(){return this.model.get("message")}}),S=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(e),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(a()("<".concat(this.tagName,"/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(e){return void 0!==e&&this.model.set("value","string"==typeof e?e:""),this.model.get("value")},render:function(){var e=this;this.$el.removeClass().addClass("ui-".concat(this.tagName)).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var t=this.model.get("datalist");return Array.isArray(t)&&t.length>0&&this.$el.autocomplete({source:function(t,n){n(e.model.get("datalist"))},change:function(){e._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),r.default.each(["readonly","disabled"],(function(t){e.model.get(t)?e.$el.attr(t,!0):e.$el.removeAttr(t)})),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),C=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model(e),this.setElement(a()("<div/>").append(this.$info=a()("<div/>")).append(this.$hidden=a()("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),M=S.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null,value:null}).set(e),this.optional_button=new w({id:"optional-switch-".concat(this.model.id)}),this.optional_button.model.set("value",null===this.model.get("value")?"false":"true"),this.toggleButton(),this.optional_button.setElement(a()("<div>Set value for this optional select field ?</div>").append(this.optional_button.$el)),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(a()("<".concat(this.tagName,"/>"))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.optional_button.model,"change",this.toggleButton,this),this.render()},render:function(){S.prototype.render.call(this),this.optional_button.$el.insertBefore(this.$el)},toggleButton:function(){"true"===this.optional_button.model.get("value")?(this.model.set("disabled",!1),!this.model.get("value")&&this.model.set("value","")&&this._onchange()):(this.model.set("disabled",!0),this.model.set("value",null),this._onchange())},value:function(e){return"true"===this.optional_button.model.get("value")&&null!=e&&this.model.set("value","string"==typeof e?e:""),this.model.get("value")}}),T=s.a.View.extend({initialize:function(e){var t=this;this.select=new e.SelectClass.View(e),this.model=this.select.model;var n=e.optional?M:S;this.text=new n({onchange:this.model.get("onchange")}),this.on("change",(function(){t.model.get("onchange")&&t.model.get("onchange")(t.value())})),this.setElement(a()("<div/>").append(this.select.$el).append(this.text.$el)),this.update(e)},wait:function(){this.select.wait()},unwait:function(){this.select.unwait()},value:function(e){return(this.textmode?this.text:this.select).value(e)},update:function(e){var t=e.data;t||(t=[],r.default.each(e.options,(function(e){t.push({label:e[0],value:e[1]})})));var n=this.value();this.textmode=e.textable&&(!Array.isArray(t)||0===t.length),this.text.$el[this.textmode?"show":"hide"](),this.select.$el[this.textmode?"hide":"show"](),this.select.update({data:t}),this.value(n)}}),j=s.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new s.a.Model(e),this.setElement(a()("<div/>").append(this.$info=a()("<div/>")).append(this.$file=a()("<input/>").attr("type","file").addClass("mb-1")).append(this.$text=a()("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=a()("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",(function(e){t._readFile(e)})),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(e){var t=this,n=e.target.files&&e.target.files[0];if(n){var i=new FileReader;i.onload=function(){t.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),i.readAsText(n)}}});h.a.Button,h.a.ButtonCheck,h.a.ButtonMenu,h.a.ButtonLink,v.Checkbox,v.RadioButton,v.Radio,t.a={Button:h.a.Button,ButtonCheck:h.a.ButtonCheck,ButtonMenu:h.a.ButtonMenu,ButtonLink:h.a.ButtonLink,Input:S,Message:k,UnescapedMessage:x,Upload:j,Modal:b.a,RadioButton:v.RadioButton,Checkbox:v.Checkbox,Radio:v.Radio,Switch:w,Select:l.a,NullableText:M,TextSelect:T,Hidden:C,Slider:u,Drilldown:y}},,,function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Request failed.";return e&&e.response&&e.response.data&&e.response.data.err_msg?t=e.response.data.err_msg:e&&e.response?t="".concat(e.response.statusText," (").concat(e.response.status,")"):"string"==typeof e&&(t=e),t}function a(e){throw console.debug(e),i(e)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},,,function(e,t,n){"use strict";var i={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",ERROR:"error"};i.READY_STATES=[i.OK,i.EMPTY,i.PAUSED,i.FAILED_METADATA,i.NOT_VIEWABLE,i.DISCARDED,i.ERROR],i.NOT_READY_STATES=[i.UPLOAD,i.QUEUED,i.RUNNING,i.SETTING_METADATA,i.NEW],t.a=i},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return d}));var i,a=n(0),r=n.n(a),o=function(e){this.$overlay=e.overlay,this.$dialog=e.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=e.backdrop,this.$header.find(".close").on("click",r.a.proxy(this.hide,this))};function s(){i.hide()}function l(e,t,n,a,r){i.setContent({title:e,body:t,buttons:n,extra_buttons:a}),i.show({backdrop:!0},r)}function c(e,t,n,a,r){i.setContent({title:e,body:t,buttons:n,extra_buttons:a}),i.show({backdrop:!1},r)}function d(e){var t=e.width||"600",n=e.height||"400",a=e.scroll||"auto";r()("#overlay-background").bind("click.overlay",(function(){s(),r()("#overlay-background").unbind("click.overlay")})),i.setContent({closeButton:!0,title:"&nbsp;",body:r()("<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='".concat(e.url,"' width='").concat(t,"' height='").concat(n,"' scrolling='").concat(a,"' frameborder='0'></iframe></div>"))}),i.show({backdrop:!0})}r.a.extend(o.prototype,{setContent:function(e){this.$header.hide(),e.title&&(this.$header.find(".title").html(e.title),this.$header.show()),e.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();var t=this.$footer.find(".buttons").html("");e.buttons&&(r.a.each(e.buttons,(function(e,n){t.append(r()("<button></button> ").text(e).click(n)).append(" ")})),this.$footer.show());var n=this.$footer.find(".extra_buttons").html("");e.extra_buttons&&(r.a.each(e.extra_buttons,(function(e,t){n.append(r()("<button></button>").text(e).click(t)).append(" ")})),this.$footer.show());var i=e.body;"progress"==i&&(i=r()("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(i)},show:function(e,t){e.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",r()(window).height()/1.5),t&&t()},hide:function(){var e=this;e.$dialog.fadeOut((function(){e.$overlay.hide(),e.$backdrop.removeClass("in"),e.$body.children().remove(),e.$body.css("min-width",void 0)}))}}),r()((function(){i=new o({overlay:r()("#top-modal"),dialog:r()("#top-modal-dialog"),backdrop:r()("#top-modal-backdrop")})}))},,function(e,t,n){"use strict";var i={props:{classes:{type:String,required:!1,default:null},message:{type:String,default:"Loading"}},computed:{spinnerClasses:function(){return["loading-icon","fa","fa-spinner","fa-spin"].concat(this.classes?this.classes.split(" "):[])}}},a=n(5),r=Object(a.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{class:this.spinnerClasses}),this._v(" "),t("span",{staticClass:"loading-message"},[this._v(this._s(this.message)+"."),t("span",{staticClass:"blinking"},[this._v("..")])])])}),[],!1,null,null,null);t.a=r.exports},,,function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(2),d=n.n(c),u=n(55),h=n(51),f=n(78),p=n(85),m=n(166),_=n(6),g={toJSON:function(){var e=this,t={};return i.default.each(e.constructor.to_json_keys,(function(n){var i=e.get(n);n in e.constructor.to_json_mappers&&(i=e.constructor.to_json_mappers[n](i,e)),t[n]=i})),t}},v=function(e){this.default_font=void 0!==e?e:"9px Monaco, Lucida Console, monospace",this.dummy_canvas=this.new_canvas(),this.dummy_context=this.dummy_canvas.getContext("2d"),this.dummy_context.font=this.default_font,this.char_width_px=this.dummy_context.measureText("A").width,this.patterns={},this.load_pattern("right_strand","/visualization/strand_right.png"),this.load_pattern("left_strand","/visualization/strand_left.png"),this.load_pattern("right_strand_inv","/visualization/strand_right_inv.png"),this.load_pattern("left_strand_inv","/visualization/strand_left_inv.png")};i.default.extend(v.prototype,{load_pattern:function(e,t){var n=this.patterns,i=this.dummy_context,a=new Image;a.src="".concat(Object(l.getAppRoot)(),"static/images").concat(t),a.onload=function(){n[e]=i.createPattern(a,"repeat")}},get_pattern:function(e){return this.patterns[e]},new_canvas:function(){var e=r()("<canvas/>")[0];return e.manager=this,e}});var y=s.a.Model.extend({defaults:{num_elements:20,obj_cache:null,key_ary:null},initialize:function(e){this.clear()},get_elt:function(e){var t=this.attributes.obj_cache,n=this.attributes.key_ary,a=e.toString(),r=i.default.indexOf(n,(function(e){return e.toString()===a}));return-1!==r&&(t[a].stale?(n.splice(r,1),delete t[a]):this.move_key_to_end(e,r)),t[a]},set_elt:function(e,t){var n=this.attributes.obj_cache,i=this.attributes.key_ary,a=e.toString(),r=this.attributes.num_elements;if(!n[a]){if(i.length>=r)delete n[i.shift().toString()];i.push(e)}return n[a]=t,t},move_key_to_end:function(e,t){this.attributes.key_ary.splice(t,1),this.attributes.key_ary.push(e)},clear:function(){this.attributes.obj_cache={},this.attributes.key_ary=[]},size:function(){return this.attributes.key_ary.length},most_recently_added:function(){return 0===this.size()?null:this.attributes.key_ary[this.attributes.key_ary.length-1]}}),b=y.extend({defaults:i.default.extend({},y.prototype.defaults,{dataset:null,genome:null,init_data:null,min_region_size:200,filters_manager:null,data_type:"data",data_mode_compatible:function(e,t){return!0},can_subset:function(e){return!1}}),initialize:function(e){y.prototype.initialize.call(this);var t=this.get("init_data");t&&this.add_data(t)},add_data:function(e){this.get("num_elements")<e.length&&this.set("num_elements",e.length);var t=this;i.default.each(e,(function(e){t.set_data(e.region,e)}))},data_is_ready:function(){var e=this.get("dataset"),t=r.a.Deferred(),n="raw_data"===this.get("data_type")?"state":"data"===this.get("data_type")?"converted_datasets_state":"error",i=new h.a.ServerStateDeferred({ajax_settings:{url:this.get("dataset").url(),data:{hda_ldda:e.get("hda_ldda"),data_type:n},dataType:"json"},interval:5e3,success_fn:function(e){return"pending"!==e}});return r.a.when(i.go()).then((function(e){t.resolve("ok"===e||"data"===e)})),t},search_features:function(e){var t=this.get("dataset"),n={query:e,hda_ldda:t.get("hda_ldda"),data_type:"features"};return r.a.getJSON(t.url(),n)},load_data:function(e,t,n,i){var a=this.get("dataset"),o={data_type:this.get("data_type"),chrom:e.get("chrom"),low:e.get("start"),high:e.get("end"),mode:t,resolution:n,hda_ldda:a.get("hda_ldda")};r.a.extend(o,i);var s=this.get("filters_manager");if(s){for(var l=[],c=s.filters,d=0;d<c.length;d++)l.push(c[d].name);o.filter_cols=JSON.stringify(l)}var u=this,h=r.a.getJSON(a.url(),o,(function(t){t.region=e,u.set_data(e,t)}));return this.set_data(e,h),h},get_data:function(e,t,n,i){var a=this.get_elt(e);if(a&&(h.a.is_deferred(a)||this.get("data_mode_compatible")(a,t)))return a;for(var r,o,s=this.get("key_ary"),l=this.get("obj_cache"),c=0;c<s.length;c++)if((r=s[c]).contains(e)&&(o=!0,a=l[r.toString()],h.a.is_deferred(a)||this.get("data_mode_compatible")(a,t)&&this.get("can_subset")(a))){if(this.move_key_to_end(r,c),!h.a.is_deferred(a)){var d=this.subset_entry(a,e);this.set_data(e,d),a=d}return a}if(!o&&e.length()<this.attributes.min_region_size){e=e.copy();var u=this.most_recently_added();!u||e.get("start")>u.get("start")?e.set("end",e.get("start")+this.attributes.min_region_size):e.set("start",e.get("end")-this.attributes.min_region_size),e.set("genome",this.attributes.genome),e.trim()}return this.load_data(e,t,n,i)},set_data:function(e,t){this.set_elt(e,t)},DEEP_DATA_REQ:"deep",BROAD_DATA_REQ:"breadth",get_more_data:function(e,t,n,i,a){var o=this._mark_stale(e);if(o&&this.get("data_mode_compatible")(o,t)){var s=e.get("start");a===this.DEEP_DATA_REQ?r.a.extend(i,{start_val:o.data.length+1}):a===this.BROAD_DATA_REQ&&(s=(o.max_high?o.max_high:o.data[o.data.length-1][2])+1);var l=e.copy().set("start",s),c=this,d=this.load_data(l,t,n,i),u=r.a.Deferred();return this.set_data(e,u),r.a.when(d).then((function(t){t.data&&(t.data=o.data.concat(t.data),t.max_low&&(t.max_low=o.max_low),t.message&&(t.message=t.message.replace(/[0-9]+/,t.data.length))),c.set_data(e,t),u.resolve(t)})),u}console.log("ERROR: problem with getting more data: current data is not compatible")},can_get_more_detailed_data:function(e){var t=this.get_elt(e);return"bigwig"===t.dataset_type&&t.data.length<8e3},get_more_detailed_data:function(e,t,n,i,a){var r=this._mark_stale(e);if(r)return a||(a={}),"bigwig"===r.dataset_type&&(a.num_samples=1e3*i),this.load_data(e,t,n,a);console.log("ERROR getting more detailed data: no current data")},_mark_stale:function(e){var t=this.get_elt(e);return t||console.log("ERROR: no data to mark as stale: ",this.get("dataset"),e.toString()),t.stale=!0,t},get_genome_wide_data:function(e){var t=this,n=!0,a=i.default.map(e.get("chroms_info").chrom_info,(function(e){var i=t.get_elt(new x({chrom:e.chrom,start:0,end:e.len}));return i||(n=!1),i}));if(n)return a;var o=r.a.Deferred();return r.a.getJSON(this.get("dataset").url(),{data_type:"genome_data"},(function(e){t.add_data(e.data),o.resolve(e.data)})),o},subset_entry:function(e,t){var n={bigwig:function(e,t){return i.default.filter(e,(function(e){return e[0]>=t.get("start")&&e[0]<=t.get("end")}))},refseq:function(t,n){var i=n.get("start")-e.region.get("start");return e.data.slice(i,i+n.length())}},a=e.data;return!e.region.same(t)&&e.dataset_type in n&&(a=n[e.dataset_type](e.data,t)),{region:t,data:a,dataset_type:e.dataset_type}}}),w=b.extend({initialize:function(e){var t=new s.a.Model;t.urlRoot=e.data_url,this.set("dataset",t)},load_data:function(e,t,n,i){return e.length()<=1e5?b.prototype.load_data.call(this,e,t,n,i):{data:null,region:e}}}),k=s.a.Model.extend({defaults:{name:null,key:null,chroms_info:null},initialize:function(e){this.id=e.dbkey},get_chroms_info:function(){return this.attributes.chroms_info.chrom_info},get_chrom_region:function(e){var t=i.default.find(this.get_chroms_info(),(function(t){return t.chrom===e}));return new x({chrom:t.chrom,end:t.len})},get_chrom_len:function(e){return i.default.find(this.get_chroms_info(),(function(t){return t.chrom===e})).len}}),x=s.a.Model.extend({defaults:{chrom:null,start:0,end:0,str_val:null,genome:null},same:function(e){return this.attributes.chrom===e.get("chrom")&&this.attributes.start===e.get("start")&&this.attributes.end===e.get("end")},initialize:function(e){if(e.from_str){var t=e.from_str.split(":"),n=t[0],i=t[1].split("-");this.set({chrom:n,start:parseInt(i[0],10),end:parseInt(i[1],10)})}this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end")),this.on("change",(function(){this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end"))}),this)},copy:function(){return new x({chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")})},length:function(){return this.get("end")-this.get("start")},toString:function(){return this.attributes.str_val},toJSON:function(){return{chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")}},compute_overlap:function(e){var t=this.get("chrom"),n=e.get("chrom"),i=this.get("start"),a=e.get("start"),r=this.get("end"),o=e.get("end");return t&&n&&t!==n?x.overlap_results.DIF_CHROMS:i<a?r<a?x.overlap_results.BEFORE:r<o?x.overlap_results.OVERLAP_START:x.overlap_results.CONTAINS:i>a?i>o?x.overlap_results.AFTER:r<=o?x.overlap_results.CONTAINED_BY:x.overlap_results.OVERLAP_END:r>=o?x.overlap_results.CONTAINS:x.overlap_results.CONTAINED_BY},trim:function(e){if(this.attributes.start<0&&(this.attributes.start=0),this.attributes.genome){var t=this.attributes.genome.get_chrom_len(this.attributes.chrom);this.attributes.end>t&&(this.attributes.end=t-1)}return this},contains:function(e){return this.compute_overlap(e)===x.overlap_results.CONTAINS},overlaps:function(e){return 0===i.default.intersection([this.compute_overlap(e)],[x.overlap_results.DIF_CHROMS,x.overlap_results.BEFORE,x.overlap_results.AFTER]).length}},{overlap_results:{DIF_CHROMS:1e3,BEFORE:1001,CONTAINS:1002,OVERLAP_START:1003,OVERLAP_END:1004,CONTAINED_BY:1005,AFTER:1006}}),S=s.a.Collection.extend({model:x}),C=s.a.Model.extend({defaults:{region:null,note:""},initialize:function(e){this.set("region",new x(e.region))}}),M=s.a.Collection.extend({model:C}),T=s.a.Model.extend(g).extend({defaults:{mode:"Auto"},initialize:function(e){this.set("dataset",new u.a(e.dataset));var t=[{key:"name",default_value:this.get("dataset").get("name")},{key:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:0},{key:"max_value",label:"Max Value",type:"float",default_value:1}];this.set("config",f.a.ConfigSettingCollection.from_models_and_saved_values(t,e.prefs));var n=this.get("preloaded_data");n=n?n.data:[],this.set("data_manager",new b({dataset:this.get("dataset"),init_data:n}))}},{to_json_keys:["track_type","dataset","prefs","mode","filters","tool_state"],to_json_mappers:{prefs:function(e,t){return 0===i.default.size(e)&&(e={name:t.get("config").get("name").get("value"),color:t.get("config").get("color").get("value")}),e},dataset:function(e){return{id:e.id,hda_ldda:e.get("hda_ldda")}}}}),j=s.a.Collection.extend({model:T}),O=s.a.Model.extend({defaults:{title:"",type:""},urlRoot:"".concat(Object(l.getAppRoot)(),"api/visualizations"),save:function(){return r.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{vis_json:JSON.stringify(this)}})}}),D=O.extend(g).extend({defaults:i.default.extend({},O.prototype.defaults,{dbkey:"",drawables:null,bookmarks:null,viewport:null}),initialize:function(e){this.set("drawables",new j(e.tracks));this.set("config",f.a.ConfigSettingCollection.from_models_and_saved_values([],e.prefs)),this.unset("tracks"),this.get("drawables").each((function(e){e.unset("preloaded_data")}))},add_tracks:function(e){this.get("drawables").add(e)}},{to_json_keys:["view","viewport","bookmarks"],to_json_mappers:{view:function(e,t){return{obj_type:"View",prefs:{name:t.get("title"),content_visible:!0},drawables:t.get("drawables")}}}}),L=s.a.Router.extend({initialize:function(e){var t=this;this.view=e.view,this.route(/([\w]+)$/,"change_location"),this.route(/([\w+]+:[\d,]+-[\d,]+)$/,"change_location"),this.view.on("navigate",(function(e){t.navigate(e)}))},change_location:function(e){this.view.go_to(e)}});t.a={BackboneTrack:T,BrowserBookmark:C,BrowserBookmarkCollection:M,Cache:y,CanvasManager:v,Genome:k,GenomeDataManager:b,GenomeRegion:x,GenomeRegionCollection:S,GenomeVisualization:D,GenomeReferenceDataManager:w,TrackBrowserRouter:L,Visualization:O,select_datasets:function(e,t){var n=new p.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_history_datasets"),filters:e,embedded:!0}),i=new p.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_library_datasets"),embedded:!0}),a=new m.a.View;a.add({id:"histories",title:d()("Histories"),$el:r()("<div/>").append(n.$el)}),a.add({id:"libraries",title:d()("Libraries"),$el:r()("<div/>").append(i.$el)});var o=Object(_.a)();o.modal.show({title:d()("Select datasets for new tracks"),body:a.$el,closing_events:!0,buttons:{Cancel:function(){o.modal.hide()},Add:function(){var e=[];a.$("input.grid-row-select-checkbox[name=id]:checked").each((function(){window.console.log(r()(this).val()),e[e.length]=r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/datasets/").concat(r()(this).val()),dataType:"json",data:{data_type:"track_config",hda_ldda:"histories"==a.current()?"hda":"ldda"}})})),r.a.when.apply(r.a,e).then((function(){var e=arguments[0]instanceof Array?r.a.map(arguments,(function(e){return e[0]})):[arguments[0]];t(e)})),o.modal.hide()}}})}}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f.a})),n.d(t,"f",(function(){return p.a})),n.d(t,"e",(function(){return T.a})),n.d(t,"i",(function(){return j.a})),n.d(t,"h",(function(){return D})),n.d(t,"b",(function(){return Z})),n.d(t,"g",(function(){return ee.a})),n.d(t,"l",(function(){return oe})),n.d(t,"q",(function(){return se})),n.d(t,"k",(function(){return le})),n.d(t,"o",(function(){return ce})),n.d(t,"n",(function(){return de})),n.d(t,"p",(function(){return ue})),n.d(t,"j",(function(){return fe})),n.d(t,"m",(function(){return me}));var i=n(267);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,n,i,a=c(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"getUrl",value:function(e){var t=this.id,n=this.file_ext,i={purge:"datasets/".concat(t,"/purge_async"),display:"datasets/".concat(t,"/display/?preview=True"),edit:"datasets/edit?dataset_id=".concat(t),download:"datasets/".concat(t,"/display?to_ext=").concat(n),report_error:"dataset/errors?id=".concat(t),rerun:"tool_runner/rerun?id=".concat(t),show_params:"datasets/".concat(t,"/show_params"),visualization:"visualization",meta_download:"dataset/get_metadata_file?hda_id=".concat(t,"&metadata_name=")};return e in i?i[e]:null}},{key:"canEditName",get:function(){return!this.element_identifier}},{key:"hasData",get:function(){return this.file_size&&this.file_size>0}},{key:"hasMetaData",get:function(){var e=this.meta_files||[];return e&&e.length>0}},{key:"displayLinks",get:function(){var e=this.display_apps,t=void 0===e?[]:e,n=this.display_types,i=void 0===n?[]:n;return[].concat(r(t),r(i))}}])&&s(t.prototype,n),i&&s(t,i),o}(i.a),f=n(218),p=n(459),m=n(9),_=n.n(m);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){var t="function"==typeof Map?new Map:void 0;return(w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return k(e,arguments,C(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),S(i,e)})(e)}function k(e,t,n){return(k=x()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&S(a,n.prototype),a}).apply(null,arguments)}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=_.a.utc(0);Map;var T=n(155),j=n(247);function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var D=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,e);var n=t.cursor,i=void 0===n?0:n,a=t.key,r=void 0===a?null:a;this.cursor=i,this.key=r};D.create=function(e){var t=new D(e);return Object.freeze(t)},D.equals=function(e,t){return e.cursor==t.cursor&&e.key==t.key};var L=n(508),E=n(255);function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function W(e){var t=B();return function(){var n,i=G(e);if(t){var a=G(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){var t="function"==typeof Map?new Map:void 0;return(U=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return V(e,arguments,G(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),q(i,e)})(e)}function V(e,t,n){return(V=B()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&q(a,n.prototype),a}).apply(null,arguments)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){F(n,e);var t=W(n);function n(){return $(this,n),t.apply(this,arguments)}return n}(U(Error)),K=function(e){F(n,e);var t=W(n);function n(){return $(this,n),t.apply(this,arguments)}return n}(U(Error)),X=function(e,t){return Y(e,1)[0]-Y(t,1)[0]},Q=Object(E.a)((function(e){return void 0!==e})),Z=function(e){F(r,e);var t,n,i,a=W(r);function r(e){var t;return $(this,r),(t=a.call(this,e))._domain=[-1/0,1/0],t.xPrecision=0,t.yPrecision=0,t}return t=r,(n=[{key:"set",value:function(e,t){var n=this.round(e,this.xPrecision),i=this.round(t,this.yPrecision);isFinite(n)&&isFinite(i)&&null!=t&&this.valInDomain(n)&&P(G(r.prototype),"set",this).call(this,n,i)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isNaN(e)){var n="Please provide a numeric input";throw new J(n)}var i=t.interpolate,a=void 0!==i&&i,o=t.order,s=void 0===o?2:o,l=t.precision,c=void 0===l?this.yPrecision:l,d=this.round(e,this.xPrecision),u=this.valInDomain(d),h=void 0;if(u)if(this.has(d))h=P(G(r.prototype),"get",this).call(this,d);else{var f=a?this.linearInterpolate:this.curveFit;h=f.call(this,d,{order:s,precision:c})}return h}},{key:"round",value:function(e,t){var n=Math.pow(10,t);return Math.round(+e*n)/n}},{key:"pruneDomain",value:function(e){var t,n=this,i=A(Object(E.a)((function(t){return!n.valInDomain(t,e)}),this.keys()));try{for(i.s();!(t=i.n()).done;){var a=t.value;this.delete(a)}}catch(e){i.e(e)}finally{i.f()}}},{key:"valInDomain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,n=Y(t,2),i=n[0],a=n[1];return e>=i&&e<=a}},{key:"pointInDomain",value:function(e){var t=Y(e,1),n=t[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;return this.valInDomain(n,i)}},{key:"curveFit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.size<2){var n="Need at least 2 points to perform an approximation";throw new K(n)}var i=2==this.size?L.linear:L.polynomial,a=i(this.dataPoints,t),r=a.predict,o=r(e),s=Y(o,2),l=s[1];return l}},{key:"linearInterpolate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPointWiseFilter(e),i=Array.from(n(this.dataPoints)),a=Y(i,1),r=a[0];if(r&&r.length){var o=Object(L.linear)(r,t),s=o.predict,l=s(e),c=Y(l,2),d=c[1];return d}}},{key:"getPointWiseFilter",value:function(e){return Object(E.d)(Object(E.b)(2),Object(E.c)((function(e){return Array.from(Q(e))})),Object(E.a)((function(t){if(2==t.length){var n=Y(t,2),i=Y(n[0],1)[0],a=Y(n[1],1)[0];return e>i&&e<a}return!1})))}},{key:"clone",value:function(){var e=new r;e.xPrecision=this.xPrecision,e.yPrecision=this.yPrecision,e.domain=this.domain;var t,n=A(this.entries());try{for(n.s();!(t=n.n()).done;){var i=Y(t.value,2),a=i[0],o=i[1];e.set(a,o)}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"hasData",get:function(){return this.size>=2}},{key:"dataPoints",get:function(){return Array.from(this.entries()).sort(X)}},{key:"domain",get:function(){return this._domain},set:function(e){this.pruneDomain(e),this._domain=e}}])&&I(t.prototype,n),i&&I(t,i),r}(U(Map)),ee=n(103),te=n(58),ne=n(45);function ie(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ie(r,i,a,o,s,"next",e)}function s(e){ie(r,i,a,o,s,"throw",e)}o(void 0)}))}}var re=function(e){return function(){var t=ae(regeneratorRuntime.mark((function t(n,i){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ne.a)(n,i,e);case 2:return a=t.sent,t.next=5,Object(te.a)(a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},oe=re({visible:!1}),se=re({visible:!0}),le=re({deleted:!0}),ce=re({deleted:!1}),de=re({deleted:!0,purged:!0});function ue(e){return he.apply(this,arguments)}function he(){return(he=ae(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={visible:!1},e.next=3,Object(ne.h)(t,n);case 3:if(!(i=e.sent).length){e.next=9;break}return a=i.map((function(e){return e.type_id})),e.next=8,se(t,a);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=ae(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={visible:!1},e.next=3,Object(ne.h)(t,n);case 3:if(!(i=e.sent).length){e.next=9;break}return a=i.map((function(e){return e.type_id})),e.next=8,le(t,a);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return _e.apply(this,arguments)}function _e(){return(_e=ae(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deleted:!0,purged:!1},e.next=3,Object(ne.h)(t,n);case 3:if(!(i=e.sent).length){e.next=9;break}return a=i.map((function(e){return e.type_id})),e.next=8,de(t,a);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(8),a=n(33),r=n(14),o=n(94),s=n(216),l=n(217),c=n(262);i.default.use(a.a),i.default.use(r.a),i.default.use(s.a),i.default.use(c.a),i.default.use(l.a);var d=function(e){var t=i.default.extend(e);return function(e,n){return new t({store:o.a,propsData:e,el:n})}}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n(3);function a(e){window.location=e}function r(){window.location.reload()}var o=/(\/)+/g;function s(e){var t=Object(i.getAppRoot)();return"".concat(t,"/").concat(e).replace(o,"/")}function l(e){var t=s(e),n=window.location.origin;return"".concat(n,"/").concat(t).replace(o,"/")}},,,,function(e,t,n){"use strict";n.d(t,"k",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return S})),n.d(t,"g",(function(){return M})),n.d(t,"p",(function(){return j})),n.d(t,"m",(function(){return D})),n.d(t,"i",(function(){return E})),n.d(t,"n",(function(){return I})),n.d(t,"h",(function(){return Y})),n.d(t,"e",(function(){return H})),n.d(t,"o",(function(){return $})),n.d(t,"a",(function(){return W})),n.d(t,"c",(function(){return U})),n.d(t,"f",(function(){return B})),n.d(t,"l",(function(){return ee}));var i=n(7),a=n.n(i),r=n(9),o=n.n(r),s=n(41);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){d(r,i,a,o,s,"next",e)}function s(e){d(r,i,a,o,s,"throw",e)}o(void 0)}))}}var h=a.a.create({baseURL:Object(s.b)("/api")}),f=function(e){if(200!=e.status)throw new Error(e);return e.data};function p(){var e=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Object.keys(e).map((function(t){return"q=".concat(t,"&qv=").concat(e[t])})).join("&")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return t[n]=function(e){if(!0===e)return"True";if(!1===e)return"False";return e}(e[n]),t}),{})}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return t.set(n,e[n]),t}),new FormData)}var g={view:"betawebclient"};function v(){return y.apply(this,arguments)}function y(){return(y=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={view:"summary"},e.next=3,h.get("/histories",{params:t});case 3:return n=e.sent,e.abrupt("return",f(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=u(regeneratorRuntime.mark((function e(t,n){var i,a,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="/histories/".concat(t),a=void 0!==n?o.a.utc(n).toISOString():null,r=a?"".concat(i,"?q=update_time-gt&qv=").concat(a):i,e.next=5,h.get(r,{params:g});case 5:return s=e.sent,e.abrupt("return",f(s));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return(x=u(regeneratorRuntime.mark((function e(){var t,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:{},n=Object(s.b)("/history/create_new_current"),e.next=4,h.get(n,{baseURL:""});case 4:if(i=e.sent,(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.id)||null){e.next=8;break}throw new Error("failed to create and select new history");case 8:return e.abrupt("return",f(i));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return C.apply(this,arguments)}function C(){return(C=u(regeneratorRuntime.mark((function e(t,n,i){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/histories",a={history_id:t.id,name:n,all_datasets:i,current:!0},e.next=4,h.post("/histories",a,{params:g});case 4:return r=e.sent,e.abrupt("return",f(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=u(regeneratorRuntime.mark((function e(t){var n,i,a,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],i="/histories/".concat(t)+(n?"?purge=True":""),e.next=4,h.delete(i,{params:g});case 4:return a=e.sent,e.abrupt("return",f(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=u(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="/histories/".concat(t),e.next=3,h.put(i,n,{params:g});case 3:return a=e.sent,e.abrupt("return",f(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return L.apply(this,arguments)}function L(){return(L=u(regeneratorRuntime.mark((function e(t){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i=Object(s.b)("/history/make_private"),e.next=4,a.a.post(i,_({history_id:n}));case 4:if(200==(r=e.sent).status){e.next=7;break}throw new Error(r);case 7:return e.next=9,b(n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return A.apply(this,arguments)}function A(){return(A=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/history/current_history_json",e.next=3,h.get("/history/current_history_json",{baseURL:Object(s.b)("/")});case 3:return t=e.sent,e.abrupt("return",f(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return(P=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/history/set_as_current",e.next=3,h.get("/history/set_as_current",{baseURL:Object(s.b)("/"),params:{id:t}});case 3:return n=e.sent,e.abrupt("return",f(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return R.apply(this,arguments)}function R(){return(R=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=t.id,a=p(n),r={v:"dev",view:"summary",keys:"file_size,accessible,creating_job,job_source_id"},o="/histories/".concat(i,"/contents?").concat(a),e.next=7,h.get(o,{params:r});case 7:return s=e.sent,e.abrupt("return",f(s));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return N.apply(this,arguments)}function N(){return(N=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s,l,c,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},i={purge:!1,recursive:!1},a=Object.assign({},i,n),r=t.history_id,o=t.history_content_type,s=t.id,l="/histories/".concat(r,"/contents/").concat(o,"s/").concat(s),e.next=7,h.delete(l,{params:a});case 7:return c=e.sent,e.abrupt("return",f(c));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return F.apply(this,arguments)}function F(){return(F=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=t.history_id,a=t.id,r=t.history_content_type,o="/histories/".concat(i,"/contents/").concat(r,"s/").concat(a),e.next=5,h.put(o,n);case 5:return s=e.sent,e.abrupt("return",f(s));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return z.apply(this,arguments)}function z(){return(z=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s,c,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:[],i=d.length>2&&void 0!==d[2]?d[2]:{},a=n.map((function(e){var t=l(e.split("-"),2),n=t[0];return{id:t[1],type_id:e,history_content_type:n}})),r=t.id,o="/histories/".concat(r,"/contents?view=betawebclient"),s=Object.assign({},i,{items:a}),e.next=8,h.put(o,s);case 8:return c=e.sent,console.log("bulkContentUpdate response",c),e.abrupt("return",f(c));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return(V=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},i={collection_type:"list",copy_elements:!0,name:"list",element_identifiers:[],hide_source_items:"True",type:"dataset_collection"},a=Object.assign({},i,n),r="/histories/".concat(t.id,"/contents?view=betawebclient"),e.next=6,h.post(r,a);case 6:return o=e.sent,e.abrupt("return",f(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return q.apply(this,arguments)}function q(){return(q=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s,l,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],i=c.length>2&&void 0!==c[2]&&c[2],a=t.history_id,r=t.id,o="/histories/".concat(a,"/contents/dataset_collections/").concat(r),s=m({recursive:n,purge:i}),e.next=7,h.delete(o,{params:s});case 7:return l=e.sent,e.abrupt("return",f(l));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=new Map,J=new Map;function K(e){return X.apply(this,arguments)}function X(){return(X=u(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.has(t)){e.next=7;break}return n="/jobs/".concat(t,"?full=false"),e.next=4,h.get(n);case 4:i=e.sent,a=i.data,G.set(t,a);case 7:return e.abrupt("return",G.get(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return(Z=u(regeneratorRuntime.mark((function e(t){var n,i,a,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tool_id,i=t.history_id,a="".concat(n,"-").concat(i),J.has(a)){e.next=9;break}return r="/tools/".concat(n,"/build?history_id=").concat(i),e.next=6,h.get(r);case 6:o=e.sent,s=o.data,J.set(a,s);case 9:return e.abrupt("return",J.get(a));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return n=e.sent,e.next=5,Q(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return N})),n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return Y.getAppRoot})),n.d(t,"c",(function(){return i.a}));n(702),n(485),n(541);var i=n(88);n.p="".concat(Object(i.a)().replace(/\/+$/,""),"/static/dist/");var a=n(2178),r=n(152),o=n(90),s=n(6),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Galaxy";return Object(s.b)((function(n){var i=new n(e.options,e.bootstrapped);return i.debug("".concat(t," app")),i}))},c=n(75),d=function(){return null},u=function(e){return Object.keys(e).filter((function(t){return"function"==typeof e[t]})).reduce((function(e,t){return e[t]=d,e}),{})};function h(e){"Galaxy"!=e&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="window.".concat(e),a=(r=e,1==m()[r]?console:u(console));var r;Object.defineProperty(window,e,{enumerable:!0,configurable:!1,get:function(){var n=void 0;a.groupCollapsed("".concat(i," read")),a.trace();try{n=t?t():window._monitorStorage[e],a.log(n)}catch(e){a.warn("Unable to retrieve"),a.warn(e)}return a.groupEnd(),n},set:function(t){a.groupCollapsed("".concat(i," write..."),String(t)),a.trace();try{n?n(t):window._monitorStorage[e]=t}catch(e){a.log("Unable to set value on window facade"),a.warn(e)}a.groupEnd()}})}(e)}function f(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=m();return t?n[e]=!0:e in n&&delete n[e],function(e){sessionStorage.setItem("global_monitors",JSON.stringify(e))}(n),n}function p(){var e=m();console.log(e)}function m(){var e=sessionStorage.getItem("global_monitors");return e?JSON.parse(e):{}}function _(){var e=Object.keys(m());console.groupCollapsed("monitor init"),console.log("The following global properties are monitored because they were setup in the javascript source manually:",e),console.log("To toggle messages on/off, type toggleGlobalMonitor('Galaxy', true|false) into the console"),console.log("You can set up any other variable by typing installMonitor('a window variable name')"),console.groupEnd(),e.forEach(h),window.installMonitor=h,window.showMonitorToggles=p,window.toggleGlobalMonitor=f}window._monitorStorage=window._monitorStorage||{};var g=n(442),v=n(222),y=n(504),b=function(e,t){if(console.log("initSentry"),t.sentry){var n=t.sentry,i=n.sentry_dsn_public,a=n.email;g.e({dsn:i}),a&&v.e((function(e){e.setUser({email:a})})),e.Sentry=y}},w=n(0),k=n.n(w);function x(){console.log("initTooltips"),k.a.fn.tooltip&&(k()(".unified-panel-header [title]").tooltip({placement:"bottom"}),k()("[title]").tooltip())}function S(){console.log("adjustIframeLinks"),k()("a").click((function(){var e=k()(this),t=window.parent.frames&&window.parent.frames.galaxy_main;if("galaxy_main"==e.attr("target")&&!t){var n=e.attr("href");-1==n.indexOf("?")?n+="?":n+="&",n+="use_panels=True",e.attr("href",n),e.attr("target","_self")}return e}))}function C(){console.log("addIframeClass"),window.self!==window.top&&(console.log(">>> We are in an iframe"),document.body.classList.add("framed"))}var M=n(139),T=n(113),j=n(10);function O(e){console.log("onloadWebhooks"),e.config.enable_webhooks&&T.a.load({type:"onload",callback:function(e){e.each((function(e){var t=e.toJSON();t.activate&&t.script&&j.a.appendScriptStyle(t)}))}})}function D(e,t,n){console.log("replace_big_select_inputs"),k.a.fn.select2?(void 0===e&&(e=20),void 0===t&&(t=3e3),(n=n||k()("select")).each((function(){var n,i,a=k()(this).not("[multiple]"),r=a.find("option").length;r<e||r>t||(a.hasClass("no-autocomplete")||(n=a,i={placeholder:"Click to select",closeOnSelect:!k()(n).is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"},n.select2(i)))}))):console.warn("No select 2")}var L=n(54),E=n(213);function A(e){console.log("initTours"),E.a.activeGalaxyTourRunner(),e.giveTourWithData=E.a.giveTourWithData}var I=n(73);function P(e){console.log("initModals"),e.modal||(e.modal=new I.a.View)}var Y=n(3);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Galaxy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;Object(c.d)(_,b,C,S,P,x,M.a,(function(){return D(20,1500)}),L.a,A,O);var n=Y.config$.pipe(Object(r.a)((function(n){return t(n,e)})));Object(a.a)([Y.config$,n,c.c]).subscribe((function(t){var n=R(t,3),i=n[0],a=n[1],r=n[2];console.group("runInitializations",e,Object(o.a)()),r.forEach((function(e){return e(a,i)})),Object(c.b)(),console.groupEnd()}))}var $=n(76);!0==!$.a.testBuild&&console.log("Configs:",$.a.name,$.a)},,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4);var o=n.n(r).a.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(e){return!0}},go:function(){var e=a.a.Deferred(),t=this.get("ajax_settings"),n=this.get("success_fn"),i=this.get("interval");return function r(){a.a.ajax(t).success((function(t){n(t)?e.resolve(t):setTimeout(r,i)}))}(),e}});t.a={commatize:function(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},is_deferred:function(e){return"promise"in e},ServerStateDeferred:o,get_random_color:function(e){e||(e="#ffffff"),"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)e[t]=parseInt(e[t].slice(1),16);var n,i,a,r,o,s,l,c,d,u,h,f,p,m,_,g,v,y=function(e,t,n){return(299*e+587*t+114*n)/1e3},b=!1,w=0;do{for(d=y(i=(16711680&(n=Math.round(16777215*Math.random())))>>16,a=(65280&n)>>8,r=255&n),b=!0,t=0;t<e.length;t++)if(u=y(s=(16711680&(o=e[t]))>>16,l=(65280&o)>>8,c=255&o),f=i,p=a,m=r,_=s,g=l,v=c,h=Math.max(f,_)-Math.min(f,_)+(Math.max(p,g)-Math.min(p,g))+(Math.max(m,v)-Math.min(m,v)),Math.abs(d-u)<40||h<200){b=!1;break}w++}while(!b&&w<=10);return"#".concat((16777216+n).toString(16).substr(1,6))}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=a.a;t.a=function(e){(e=e||{}).tooltipConfig=e.tooltipConfig||{placement:"bottom"},e.classes=["icon-btn"].concat(e.classes||[]),e.disabled&&e.classes.push("disabled");var t=['<a class="',e.classes.join(" "),'"',e.title?' title="'.concat(e.title,'"'):"",!e.disabled&&e.target?' target="'.concat(e.target,'"'):"",' href="',!e.disabled&&e.href?e.href:"javascript:void(0);",'">','<span class="fa ',e.faIcon,'" style="',e.style,'"></span>',"</a>"].join(""),n=o(t).tooltip(e.tooltipConfig);return r.default.isFunction(e.onclick)&&n.click((function(t){n.tooltip("hide"),n.parent().attr("tabindex",-1).focus(),e.onclick.apply(this,arguments)})),n}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n(0),a=n.n(i),r=n(1),o=a.a;function s(e,t){var n=e.data("menu_options");e.data("menu_options",t),n||e.bind("click.show_popup",(function(t){return o(".popmenu-wrapper").remove(),setTimeout((function(){var n=o('<div class="dropdown-menu" id="'.concat(e.attr("id"),'-menu"/>')),i=e.data("menu_options");r.default.size(i)<=0&&o('<div class="dropdown-item">No Options.</div>').appendTo(n),o.each(i,(function(e,t){if(t){var i=t.action||t,a=t.url||"javascript:void(0);",r=o("<a>").addClass("dropdown-item").attr("href",a).html(e).click(i);t.class&&r.addClass(t.class),n.append(r)}else n.append(o("<div/>").addClass("dropdown-item head").append(o("<a href='javascript:void(0)' role='button'></a>").html(e)))}));var a=o("<div class='popmenu-wrapper' style='position: absolute;left: 0;'></div>").append(n).appendTo("body"),s=t.pageX-a.width()/2;s=Math.min(s,o(document).scrollLeft()+o(window).width()-o(a).width()-5),s=Math.max(s,o(document).scrollLeft()+5),a.css({top:t.pageY,left:s})}),10),setTimeout((function(){var e=function(e){o(e).bind("click.close_popup",(function(){o(".popmenu-wrapper").remove(),e.unbind("click.close_popup")}))};e(o(window.document)),e(o(window.top.document));for(var t=window.top.frames.length;t--;){e(o(window.top.frames[t].document))}}),50),!1}))}function l(){o("div[popupmenu]").each((function(){var e={},t=o(this);t.find("a").each((function(){var t=o(this),n=t.get(0),i=n.getAttribute("confirm"),a=n.getAttribute("href"),r=n.getAttribute("target");e[t.text()]=a?{url:a,action:function(e){if(!i||confirm(i)){if(r)return window.open(a,r),!1;t.click()}else e.preventDefault()}}:null}));var n=o("#".concat(t.attr("popupmenu")));n.find("a").bind("click",(function(e){return e.stopPropagation(),!0})),s(n,e),n.addClass("popup"),t.remove()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return k}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(2),d=n.n(c),u=n(65),h=n(6),f=s.a.Model.extend({}),p=s.a.Model.extend({defaults:{id:"",type:"",name:"",hda_ldda:"hda",metadata:null},initialize:function(){this.get("metadata")||this._set_metadata(),this.on("change",this._set_metadata,this)},_set_metadata:function(){var e=new f;i.default.each(i.default.keys(this.attributes),(function(t){if(0===t.indexOf("metadata_")){var n=t.split("metadata_")[1];e.set(n,this.attributes[t]),delete this.attributes[t]}}),this),this.set("metadata",e,{silent:!0})},get_metadata:function(e){return this.attributes.metadata.get(e)},urlRoot:"".concat(Object(l.getAppRoot)(),"api/datasets")}),m=p.extend({defaults:i.default.extend({},p.prototype.defaults,{chunk_url:null,first_data_chunk:null,offset:0,at_eof:!1}),initialize:function(e){p.prototype.initialize.call(this),this.attributes.first_data_chunk&&(this.attributes.offset=this.attributes.first_data_chunk.offset),this.attributes.chunk_url="".concat(Object(l.getAppRoot)(),"dataset/display?dataset_id=").concat(this.id),this.attributes.url_viz="".concat(Object(l.getAppRoot)(),"visualization")},get_next_chunk:function(){if(this.attributes.at_eof)return null;var e=this,t=r.a.Deferred();return r.a.getJSON(this.attributes.chunk_url,{offset:e.attributes.offset}).success((function(n){var i;""!==n.ck_data?(i=n,e.attributes.offset=n.offset):(e.attributes.at_eof=!0,i=null),t.resolve(i)})),t}}),_=s.a.Collection.extend({model:p}),g=s.a.View.extend({initialize:function(e){this.row_count=0,this.loading_chunk=!1,new w({model:e.model,$el:this.$el})},expand_to_container:function(){this.$el.height()<this.scroll_elt.height()&&this.attempt_to_fetch()},attempt_to_fetch:function(e){var t=this;!this.loading_chunk&&this.scrolled_to_bottom()&&(this.loading_chunk=!0,this.loading_indicator.show(),r.a.when(t.model.get_next_chunk()).then((function(e){e&&(t._renderChunk(e),t.loading_chunk=!1),t.loading_indicator.hide(),t.expand_to_container()})))},render:function(){this.loading_indicator=r()("<div/>").attr("id","loading_indicator"),this.$el.append(this.loading_indicator);var e=r()("<table/>").attr({id:"content_table",cellpadding:0});this.$el.append(e);var t=this.model.get_metadata("column_names"),n=r()("<thead/>").appendTo(e),i=r()("<tr/>").appendTo(n);if(t)i.append("<th>".concat(t.join("</th><th>"),"</th>"));else for(var a=1;a<=this.model.get_metadata("columns");a++)i.append("<th>".concat(a,"</th>"));var o=this,s=this.model.get("first_data_chunk");s?this._renderChunk(s):r.a.when(o.model.get_next_chunk()).then((function(e){o._renderChunk(e)})),this.scroll_elt.scroll((function(){o.attempt_to_fetch()}))},scrolled_to_bottom:function(){return!1},_renderCell:function(e,t,n){var i=r()("<td>").text(e),a=this.model.get_metadata("column_types");return void 0!==n?i.attr("colspan",n).addClass("stringalign"):a&&t<a.length&&("str"!==a[t]&&"list"!==a[t]||i.addClass("stringalign")),i},_renderRow:function(e){var t=e.split("\t"),n=r()("<tr>"),a=this.model.get_metadata("columns");return this.row_count%2!=0&&n.addClass("dark_row"),t.length===a?i.default.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):t.length>a?(i.default.each(t.slice(0,a-1),(function(e,t){n.append(this._renderCell(e,t))}),this),n.append(this._renderCell(t.slice(a-1).join("\t"),a-1))):1===t.length?(t=e.split(",")).length===a?i.default.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):(t=e.split(" ")).length===a?i.default.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):n.append(this._renderCell(e,0,a)):(i.default.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this),i.default.each(i.default.range(a-t.length),(function(){n.append(r()("<td>"))}))),this.row_count++,n},_renderChunk:function(e){var t=this.$el.find("table");i.default.each(e.ck_data.split("\n"),(function(n,i){""!==n&&i>=(e.data_line_offset||0)&&t.append(this._renderRow(n))}),this)}}),v=g.extend({initialize:function(e){g.prototype.initialize.call(this,e);var t=i.default.find(this.$el.parents(),(function(e){return"auto"===r()(e).css("overflow")}));t||(t=window),this.scroll_elt=r()(t)},scrolled_to_bottom:function(){return this.$el.height()-this.scroll_elt.scrollTop()-this.scroll_elt.height()<=0}}),y=g.extend({initialize:function(e){g.prototype.initialize.call(this,e),this.scroll_elt=this.$el.css({position:"relative",overflow:"scroll",height:e.height||"500px"})},scrolled_to_bottom:function(){return this.$el.scrollTop()+this.$el.innerHeight()>=this.el.scrollHeight}});function b(e,t){for(var n=0;n<t.length;n++)if(t[n].match(e))return n;return-1}var w=s.a.View.extend({col:{chrom:null,start:null,end:null},url_viz:null,dataset_id:null,genome_build:null,file_ext:null,initialize:function(e){var t=Object(h.a)();if(t&&t.modal&&(this.modal=t.modal),t&&t.frame&&(this.frame=t.frame),this.modal&&this.frame){var n=e.model,i=n.get("metadata");if(n.get("file_ext")){if(this.file_ext=n.get("file_ext"),"bed"==this.file_ext){if(!(i.get("chromCol")&&i.get("startCol")&&i.get("endCol")))return void console.log("TabularButtonTrackster : Bed-file metadata incomplete.");this.col.chrom=i.get("chromCol")-1,this.col.start=i.get("startCol")-1,this.col.end=i.get("endCol")-1}if("vcf"!=this.file_ext||(this.col.chrom=b("Chrom",i.get("column_names")),this.col.start=b("Pos",i.get("column_names")),this.col.end=null,-1!=this.col.chrom&&-1!=this.col.start)){if(void 0!==this.col.chrom)if(n.id)if(this.dataset_id=n.id,n.get("url_viz")){this.url_viz=n.get("url_viz"),n.get("genome_build")&&(this.genome_build=n.get("genome_build"));var a=new u.a.IconButtonView({model:new u.a.IconButton({title:d()("Visualize"),icon_class:"chart_curve",id:"btn_viz"})});this.setElement(e.$el),this.$el.append(a.render().$el),this.hide()}else console.log("TabularButtonTrackster : Url for visualization controller is missing.");else console.log("TabularButtonTrackster : Dataset identification is missing.")}else console.log("TabularButtonTrackster : VCF-file metadata incomplete.")}}},events:{"mouseover tr":"show",mouseleave:"hide"},show:function(e){var t=this;if(null!==this.col.chrom){var n,i=r()(e.target).parent(),a=i.children().eq(this.col.chrom).html(),o=i.children().eq(this.col.start).html(),s=this.col.end?i.children().eq(this.col.end).html():o;if(a.match("^#")||""===a||(n=o,isNaN(parseFloat(n))||!isFinite(n)))r()("#btn_viz").hide();else{var l={dataset_id:this.dataset_id,gene_region:"".concat(a,":").concat(o,"-").concat(s)},c=i.offset(),u=c.left-10,h=c.top-r()(window).scrollTop()+3;r()("#btn_viz").css({position:"fixed",top:"".concat(h,"px"),left:"".concat(u,"px")}),r()("#btn_viz").off("click"),r()("#btn_viz").click((function(){t.frame.add({title:d()("Trackster"),url:"".concat(t.url_viz,"/trackster?").concat(r.a.param(l))})})),r()("#btn_viz").show()}}},hide:function(){this.$("#btn_viz").hide()}}),k=function(e){e.model||(e.model=new m(e.dataset_config));var t=e.parent_elt,n=e.embedded;delete e.embedded,delete e.parent_elt,delete e.dataset_config;var i=n?new y(e):new v(e);return i.render(),t&&(t.append(i.$el),i.expand_to_container()),i}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(140),c=n(18),d=n(10),u=n(202),h=s.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.app_options=e.model?e.model.attributes:{},this.field=t&&t.field||new s.a.View,this.model=t&&t.model||new s.a.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",text_connected_enable:this.app_options.text_connected_enable||"Add connection to module",text_connected_disable:this.app_options.text_connected_disable||"Remove connection from module",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(t),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$connected_icon=this.$(".ui-form-connected-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var i=this.model.get("collapsible_value"),a=JSON.stringify(this.model.get("value"));this.field.connected=a==JSON.stringify({__class__:"ConnectedValue"}),this.field.collapsed=this.field.connected||void 0!==i&&JSON.stringify(this.model.get("value"))==JSON.stringify(i),this.listenTo(this.model,"change",this.render,this),this.render();var r=this;this.$collapsible_icon.on("click",(function(){r.field.collapsed=!r.field.collapsed,r.field.connected=!1,e.trigger&&e.trigger("change"),r.render()})),this.$connected_icon.on("click",(function(){r.field.connected=!r.field.connected,r.field.collapsed=r.field.connected,e.trigger&&e.trigger("change"),r.render()})),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",(function(){r.reset()})),this.field.model&&this.listenTo(this.field.model,"error",(function(e){e?n.error(e):n.reset()}))},backdrop:function(){this.model.set("backdrop",!0)},error:function(e){this.model.set("error_text",e)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){a()(".tooltip").hide();var e=this.model.get("help",""),t=this.model.get("argument");t&&-1==e.indexOf("(".concat(t,")"))&&(e+=" (".concat(t,")")),this.$info.html(e),this.$el[this.model.get("hidden")?"hide":"show"]();var n=r.default.escape(this.model.get("text_value")).replace(/\n/g,"<br />");this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(n);var i=this.model.get("error_text");this.$error[i?"show":"hide"](),this.$el[i?"addClass":"removeClass"]("alert alert-danger"),this.$error_text.html(i),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")});var o=this.field.connected,s=!this.field.collapsible_disabled&&!this.model.get("disabled")&&void 0!==this.model.get("collapsible_value"),l=s&&this.model.get("connectable");if(s||l){var c=this.field.collapsed?"enable":"disable";if(this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),s&&!o?this.$collapsible_icon.removeClass().addClass("icon ui-form-collapsible-icon").addClass(this.model.get("cls_".concat(c))).tooltip("dispose").attr("data-original-title",this.model.get("text_".concat(c))).tooltip({placement:"bottom"}).show():this.$collapsible_icon.hide(),l){var d=this.field.connected?"fa fa-times":"fa fa-arrows-h",u=!o&&s?"ml-1":"",h=this.field.connected?"disable":"enable";this.$connected_icon.removeClass().addClass("icon ui-form-connected-icon").addClass(d).addClass(u).tooltip("dispose").attr("data-original-title",this.model.get("text_connected_".concat(h))).tooltip({placement:"bottom"}).show()}else this.$connected_icon.hide()}else this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();this.$field.attr("data-label",this.model.get("label"))},_template:function(){return a()("<div/>").addClass("ui-form-element").append(a()("<div/>").addClass("ui-form-error").append(a()("<span/>").addClass("fa fa-arrow-down mr-1")).append(a()("<span/>").addClass("ui-form-error-text"))).append(a()("<div/>").addClass("ui-form-title").append(a()("<div/>").addClass("ui-form-collapsible").append(a()("<i/>").addClass("ui-form-collapsible-icon")).append(a()("<i/>").addClass("ui-form-connected-icon")).append(a()("<span/>").addClass("ui-form-collapsible-text ml-1"))).append(a()("<span/>").addClass("ui-form-title-text"))).append(a()("<div/>").addClass("ui-form-field").append(a()("<span/>").addClass("ui-form-info form-text text-muted mt-2")).append(a()("<div/>").addClass("ui-form-backdrop"))).append(a()("<div/>").addClass("ui-form-preview"))}}),f=n(6),p=n(2),m=n.n(p),_=n(154),g="disabled",v="enabled",y="linked",b={data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),library:!0,multiple:!1,batch:g},{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:y},{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:y}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:g},{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collections"),multiple:!0,batch:g}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),multiple:!1,batch:g}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:g}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),multiple:!1,batch:g},{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:v}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g},{src:"hdca",icon:"fa-folder",tooltip:m()("Multiple collections"),multiple:!0,batch:v}]},w={View:s.a.View.extend({initialize:function(e){var t=this,n=this;this.model=e&&e.model||new s.a.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(e),this.setElement(a()("<div/>").addClass("ui-select-content")),this.button_product=new c.a.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]}),this.$batch={linked:a()(this._templateBatch()).clone(),enabled:a()(this._templateBatch()).clone().append(this.button_product.$el)};var i=this.$el.get(0);i.addEventListener("dragenter",(function(e){t.lastenter=e.target,n.$el.addClass("ui-dragover")})),i.addEventListener("dragover",(function(e){e.preventDefault()})),i.addEventListener("dragleave",(function(e){t.lastenter===e.target&&n.$el.removeClass("ui-dragover")})),i.addEventListener("drop",(function(e){e.preventDefault();try{var n=JSON.parse(e.dataTransfer.getData("text"))[0];t._handleDropValues(n)}catch(e){t._handleDropStatus("danger")}})),this.cache={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",(function(){e.onchange&&e.onchange(n.value())}))},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(e){this.model.set("data",e.options)},value:function(e){var t=Object(f.a)();e&&(this._patchValue(e),this.model.set("value",e));var n=this.model.get("current");if(this.config[n]){var i=this.fields[n].value();if(null!==i&&(i=Array.isArray(i)?i:[i]).length>0){var a=this._batch({values:[]});for(var r in i){var o=this.cache["".concat(i[r],"_").concat(this.config[n].src)];if(!o)return t.emit.debug("ui-select-content::value()","Requested details not found for '".concat(i[r],"'.")),null;var s=this._unpatchValue(o);a.values.push(s)}return a.values.sort((function(e,t){return e.hid-t.hid})),a}}else t.emit.debug("ui-select-content::value()","Invalid value/source '".concat(e,"'."));return null},_changeCurrent:function(){var e=this;r.default.each(this.fields,(function(t,n){var i=e.config[n];e.model.get("current")==n?(t.$el.show(),r.default.each(e.$batch,(function(e,t){i.batch==t?e.show():e.hide()})),"hda"==i.src?(e.button_dialog.show(),e.upload_dialog.show()):(e.button_dialog.hide(),e.upload_dialog.hide()),e.button_type.value(n)):t.$el.hide()})),this.fields.length>1?this.button_type.show():this.button_type.hide()},_changeType:function(){var e=this,t=this,n=Object(f.a)(),i=(this.model.get("flavor")?"".concat(this.model.get("flavor"),"_"):"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");b[i]?this.config=b[i]:(this.config=b.data,n.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '".concat(i,"'.")));var o=t.model.get("data"),s=this.model.get("extensions"),l=d.a.textify(s),u=this.model.get("src_labels");this.fields=[],this.button_data=[],r.default.each(this.config,(function(e,n){t.button_data.push({value:n,icon:e.icon,tooltip:e.tooltip}),t.fields.push(new _.a.View({optional:t.model.get("optional"),multiple:e.multiple,searchable:!e.multiple||o&&o[e.src]&&o[e.src].length>t.model.get("pagelimit"),individual:!0,error_text:"No ".concat(l?"".concat(l," "):"").concat(u[e.src]||"content"," available."),onchange:function(){t.trigger("change")}}))})),this.button_type=new c.a.RadioButton.View({value:this.model.get("current"),data:this.button_data,cls:"pr-lg-2",onchange:function(e){t.model.set("current",e),t.trigger("change")}}),this.button_dialog=new c.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",onclick:function(){var t=e.model.get("current"),i=e.config[t];n.data.dialog((function(t){e._handleDropValues(t,!1)}),{multiple:i.multiple,library:!!i.library,format:null,allowUpload:!0})}}),this.upload_dialog=new c.a.Button({icon:"fa-upload",tooltip:"Upload Dataset",onclick:function(){var t=e.model.get("current"),i=e.config[t];n.data.dialog((function(t){e._handleDropValues(t,!1)}),{multiple:i.multiple,formats:s,new:!0})}});var h=a()("<div/>").addClass("overflow-auto w-100 py-2 py-lg-0 pr-lg-2 ");this.$el.empty().addClass("d-flex flex-row flex-wrap flex-lg-nowrap").append(a()("<div/>").append(this.button_type.$el)).append(h),"always-on"==n.config.upload_from_form_button&&this.$el.append(a()("<div style='margin-right: 5px;' />").append(this.upload_dialog.$el)),this.$el.append(a()("<div/>").append(this.button_dialog.$el)),r.default.each(this.fields,(function(e){h.append(e.$el)})),r.default.each(this.$batch,(function(e,t){h.append(e)})),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var e=this;r.default.each(this.fields,(function(t){t[e.model.get("wait")?"wait":"unwait"]()}))},_changeData:function(){var e=this.model.get("data"),t=this,n={hda:[],hdca:[]};r.default.each(e,(function(e,i){r.default.each(e,(function(e){t._patchValue(e);var a=e.src||i;n[a].push({hid:e.hid,keep:e.keep,label:"".concat(e.hid||"Selected",": ").concat(e.name),value:e.id,origin:e.origin,tags:e.tags}),t.cache["".concat(e.id,"_").concat(a)]=e}))})),r.default.each(this.config,(function(e,i){n[e.src]&&t.fields[i].add(n[e.src],(function(e,t){return t.hid-e.hid}))}))},_changeValue:function(){var e=this.model.get("value");if(e&&e.values&&e.values.length>0){var t=[];r.default.each(e.values,(function(e){t.push(e.id)}));for(var n=e.values[0].src,i=e.values.length>1,a=0;a<this.config.length;a++){var o=this.fields[a],s=this.config[a];if(s.src==n&&-1!==[i,!0].indexOf(s.multiple)){this.model.set("current",a),o.value(t);break}}}else r.default.each(this.fields,(function(e){e.value(null)}))},_getSource:function(e){return"dataset_collection"==e.history_content_type?"hdca":"hda"},_patchValue:function(e){var t=this,n={ldda:"hda",dce:"hdca"};e.values?r.default.each(e.values,(function(e){t._patchValue(e)})):n[e.src]&&(e.origin=e.src,e.src=n[e.src],e.id="".concat(e.origin).concat(e.id))},_unpatchValue:function(e){if(e.origin){var t=Object.assign({},e);return t.id=t.id.substr(t.origin.length),t.src=t.origin,t}return e},_handleDropValues:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,a=this.model.get("data"),o=this.model.get("current"),s=this.config[o],l=this.fields[o];if(a){var c=Array.isArray(e)?e:[e];if(c.length>0){var d=!1;r.default.each(c,(function(e){i._patchValue(e);var n=e.id,o=e.src=t._getSource(e),s={id:n,src:o};r.default.findWhere(a[o],s)||(d=!0,a[o].push({id:n,src:o,hid:e.hid||"Selected",name:e.name?e.name:n,origin:e.origin,keep:!0,tags:[]}))})),d&&this._changeData();var u=c[0].id,h=c[0].src;if(s.src==h&&n){var f=l.value();f&&s.multiple?r.default.each(c,(function(e){-1==f.indexOf(e.id)&&f.push(e.id)})):f=u,l.value(f)}else this.model.set("value",{values:c}),this.model.trigger("change:value");this.trigger("change")}}this._handleDropStatus("success")},_handleDropStatus:function(e){var t=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-".concat(e)),setTimeout((function(){t.$el.removeClass("ui-dragover-".concat(e))}),this.model.get("statustimer"))},_batch:function(e){e.batch=!1;var t=this.model.get("current"),n=this.config[t];if("dce"==n.src||"hdca"==n.src){var i=this.cache["".concat(this.fields[t].value(),"_").concat(n.src)];i&&i.map_over_type&&(e.batch=!0)}return n.batch!=y&&n.batch!=v||(e.batch=!0,n.batch==v&&"true"===this.button_product.value()&&(e.product=!0)),e},_templateBatch:function(){return'<div class="form-text text-muted" style="clear: both;">\n                    <i class="fa fa-sitemap"/>\n                    <span>\n                        This is a batch mode input field. Separate jobs will be triggered for each dataset selection.\n                    </span>\n                </div>'}})},k={View:s.a.View.extend({initialize:function(e){var t=this;this.options=e,this.name=e.name||"element",this.multiple=e.multiple||!1,this.message=new c.a.Message({cls:"col mb-0"}),this.selections=a()("<div/>"),this.select=new c.a.Select.View({optional:e.optional}),this.$button=a()('<button class="fa fa-sign-in"/>'),this.$button.on("click",(function(){t.add({id:t.select.value(),name:t.select.text()})})),this.setElement(this._template(e)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-selections").append(this.selections),this.$(".ui-list-button").append(this.$button),this.$(".ui-list-select").append(this.select.$el)},value:function(e){if(void 0!==e){if(this.selections.empty(),Array.isArray(e))for(var t in e){var n=e[t],i=null,r=null;"string"!=a.a.type(n)?(i=n.id,r=n.name):i=r=n,null!=i&&this.add({id:i,name:r})}this._refresh()}var o=[];return this.$(".ui-list-id").each((function(){o.push({id:a()(this).prop("id"),name:a()(this).find(".ui-list-name").html()})})),0==o.length?null:o},add:function(e){var t=this;if(0===this.$('[id="'.concat(e.id,'"]')).length)if(d.a.isEmpty(e.id))this.message.update({message:"Please select a valid ".concat(this.name,"."),status:"danger"});else{var n=a()(this._templateRow({id:e.id,name:e.name}));n.find("button").on("click",(function(){n.remove(),t._refresh()})),this.selections.append(n),this._refresh()}else this.message.update({message:"This ".concat(this.name," is already in the list.")})},update:function(e){this.select.update(e)},_refresh:function(){this.$(".ui-list-id").length>0?!this.multiple&&this.$button.attr("disabled",!0):this.$button.attr("disabled",!1),this.options.onchange&&this.options.onchange()},_template:function(e){return'<div class="ui-list container">\n                    <div class="row">\n                        <div class="col-1 pl-0 mb-2">\n                            <div class="ui-list-button"/>\n                        </div>\n                        <div class="ui-list-select col pr-0"/>\n                    </div>\n                    <div class="ui-list-message mt-2 row"/>\n                    <div class="ui-list-selections mt-2"/>\n                </div>'},_templateRow:function(e){return'<div id="'.concat(e.id,'" class="ui-list-id row mt-2">\n                    <button class="ui-list-delete fa fa-trash mr-3"/>\n                    <div class="ui-list-name">').concat(e.name,"</span>\n                </div>")}})},x=n(3),S=s.a.Collection.extend({url:"".concat(Object(x.getAppRoot)(),"api/libraries?deleted=false")}),C=s.a.Collection.extend({initialize:function(){var e=this;this.config=new s.a.Model({library_id:null}),this.config.on("change",(function(){e.fetch({reset:!0})}))},url:function(){return"".concat(Object(x.getAppRoot)(),"api/libraries/").concat(this.config.get("library_id"),"/contents")}}),M={View:s.a.View.extend({initialize:function(e){var t=this;this.libraries=new S,this.datasets=new C,this.options=e,this.library_select=new c.a.Select.View({onchange:function(e){t.datasets.config.set("library_id",e)}}),this.dataset_list=new k.View({name:"dataset",optional:e.optional,multiple:e.multiple,onchange:function(){t.trigger("change")}}),this.libraries.on("reset",(function(){var e=[];t.libraries.each((function(t){e.push({value:t.id,label:t.get("name")})})),t.library_select.update({data:e})})),this.datasets.on("reset",(function(){var e=[];null!==t.library_select.text()&&t.datasets.each((function(t){"file"===t.get("type")&&e.push({value:t.id,label:t.get("name")})})),t.dataset_list.update({data:e})})),this.on("change",(function(){e.onchange&&e.onchange(t.value())})),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){t.library_select.trigger("change"),void 0!==t.options.value&&t.value(t.options.value)}})},value:function(e){return this.dataset_list.value(e)},_template:function(){return'<div class="ui-select-library">\n                    <div class="library-select mb-2"/>\n                </div>'}})},T={View:s.a.View.extend({initialize:function(e){var t=this;this.ftpfile_list=new k.View({name:"file",optional:e.optional,multiple:e.multiple,onchange:function(){e.onchange&&e.onchange(t.value())}}),this.setElement(this.ftpfile_list.$el),d.a.get({url:"".concat(Object(x.getAppRoot)(),"api/remote_files"),success:function(e){var n=[];for(var i in e)n.push({value:e[i].path,label:e[i].path});t.ftpfile_list.update(n)}})},value:function(e){return this.ftpfile_list.value(e)}})},j=n(7),O=n.n(j),D=n(8),L=n(157),E=n(122),A={data:function(){return{}},computed:{mapping:function(){return this.inputRules?this.inputRules.mapping:[]},rules:function(){return this.inputRules?this.inputRules.rules:[]},columnData:function(){var e=E.a.applyRules([],[],[],this.rules);return{colHeadersPerRule:e.colHeadersPerRule,columns:e.columns}},colHeaders:function(){var e=this.columnData.columns;return E.a.colHeadersFor([],e)}},props:{inputRules:{required:!1,type:Object}},components:{RuleDisplayPreview:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"rule"},[n("span",{staticClass:"rule-display"},[e._v(e._s(e.title)+"\n            ")]),e._v(" "),e.rule.warn?n("span",{staticClass:"rule-warning"},[e._v("\n                "+e._s(e.rule.warn)+"\n            ")]):e._e(),e._v(" "),e.rule.error?n("span",{staticClass:"rule-error"},[n("span",{staticClass:"alert-message"},[e._v(e._s(e.rule.error))])]):e._e()])},staticRenderFns:[],props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!1}},computed:{title:function(){var e=this.rule.type;return E.a.RULES[e].display(this.rule,this.colHeaders)}},methods:{}},IdentifierDisplayPreview:{render:function(){var e=this.$createElement;return(this._self._c||e)("li",{staticClass:"rule",attrs:{title:this.help}},[this._v("\n        Set "+this._s(this.columnsLabel)+" as "+this._s(this.typeDisplay)+"\n      ")])},staticRenderFns:[],props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},computed:{typeDisplay:function(){return E.a.MAPPING_TARGETS[this.type].label},help:function(){return E.a.MAPPING_TARGETS[this.type].help||""},columnsLabel:function(){return E.a.columnDisplay(this.columns,this.colHeaders)}}}}},I=n(5),P=Object(I.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ol",{staticClass:"rules"},[e._l(e.rules,(function(t,i){return n("rule-display-preview",{key:i,attrs:{rule:t,index:i,"col-headers":e.columnData.colHeadersPerRule[i]}})})),e._v(" "),e._l(e.mapping,(function(t,i){return n("identifier-display-preview",e._b({key:t.type,attrs:{index:i,"col-headers":e.colHeaders}},"identifier-display-preview",t,!1))}))],2)])}),[],!1,null,null,null).exports;function Y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var H={View:s.a.View.extend({initialize:function(e){var t=this;this.model=new s.a.Model,this.target=e.target;var n=this;this.browse_button=new c.a.Button({title:m()("Edit"),icon:"fa fa-edit",tooltip:m()("Edit Rules"),onclick:function(){n.target?n._fetchCollectionAndEdit():n._showRuleEditor(null)}}),this.on("change",(function(){e.onchange&&e.onchange(t.value())})),this.setElement(this._template(e)),this.$(".ui-rules-edit-button").append(this.browse_button.$el);var i=D.default.extend(P),a=document.createElement("div");this.$(".ui-rules-preview").append(a),this.instance=new i({propsData:{initialRules:{rules:[],mapping:[]}}}),this.instance.$mount(a),this.collapsible_disabled=!0},_fetchCollectionAndEdit:function(){var e=this,t="".concat(Object(x.getAppRoot)(),"api/dataset_collections/").concat(this.target.id,"?instance_type=history");O.a.get(t).then((function(t){return e._showCollection(t)})).catch(this._renderFetchError)},_showCollection:function(e){var t=e.data;this._showRuleEditor(t)},_showRuleEditor:function(e){var t=this,n={saveRulesFn:function(e){return t._handleRulesSave(e)},initialRules:this._value};L.a.ruleBasedCollectionCreatorModal(e,"collection_contents","collections",n).catch((function(){}))},_handleRulesSave:function(e){this._setValue(e)},_renderFetchError:function(e){console.log(e),console.log("problem fetching collection")},_template:function(e){return'\n            <div class="ui-rules-edit clearfix">\n                <span class="ui-rules-preview" />\n                <span class="ui-rules-edit-button float-left" />\n            </div>\n        '},value:function(e){if(void 0===e)return this._getValue();this._setValue(e)},update:function(e){this.target=e.target},_getValue:function(){return this._value},_setValue:function(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this._value=e,this.model.trigger("error",null),this.trigger("change"),this.instance.inputRules=e)},validate:function(){var e=this._value,t=null;if(e&&0!==e.rules.length)if(0===e.mapping.length)t="No collection identifiers defined, specify at least one collection identifier.";else{var n,i=Y(e.rules);try{for(i.s();!(n=i.n()).done;){if(n.value.error){t="One or more rules in error.";break}}}catch(e){i.e(e)}finally{i.f()}}else t="No rules defined, define at least one rule.";return t}})},N=n(63),$={View:s.a.View.extend({initialize:function(e){var t=this;this.model=new s.a.Model,this.target=e.target;var n={mode:"directory",requireWritable:!0};this.browse_button=new c.a.Button({title:m()("Select"),icon:"fa fa-edit",tooltip:m()("Select URI"),onclick:function(){Object(N.c)((function(e){t._handleRemoteFilesUri(e)}),n)}}),this.on("change",(function(){e.onchange&&e.onchange(t.value())})),this.setElement(this._template(e)),this.$text=this.$(".ui-uri-preview"),this.$(".ui-file-select-button").append(this.browse_button.$el),this.listenTo(this.model,"change",this.render,this),this.render()},_handleRemoteFilesUri:function(e){this._setValue(e)},render:function(){var e=this._value;e?"string"==typeof e?this.$text.text(e):e.url!==this.$text.text()&&this.$text.text(e.url):this.$text.text("select...")},_template:function(e){return'\n            <div class="ui-rules-edit clearfix">\n                <span class="ui-uri-preview" />\n                <span class="ui-file-select-button float-left" />\n            </div>\n        '},value:function(e){if(void 0===e)return this._getValue();this._setValue(e)},update:function(e){this.target=e.target},_getValue:function(){var e;return null===(e=this._value)||void 0===e?void 0:e.url},_setValue:function(e){if(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(n){t=e}finally{e=t}this._value=e,this.model.trigger("error",null),this.model.trigger("change"),this.trigger("change")}}})};function F(e){return"0".concat(parseInt(e).toString(16)).slice(-2)}var W=s.a.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(e){this.options=d.a.merge(e,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var t=this;this.$boxes.on("click",(function(){t.value(a()(this).css("background-color")),t.$header.trigger("click")})),this.$header.on("click",(function(){t.visible=!t.visible,t.visible?t.$view.fadeIn("fast"):t.$view.fadeOut("fast")}))},value:function(e){return null!=e&&(this.$value.css("background-color",e),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(e)),this._getValue()},_getValue:function(){var e=this.$value.css("background-color");return(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#".concat(F(e[1])).concat(F(e[2])).concat(F(e[3])):null},_build:function(){for(var e in this._content({colors:this.colors.base}),this.colors.theme){var t={};0==e?t.bottom=!0:e!=this.colors.theme.length-1?(t.top=!0,t.bottom=!0):t.top=!0,t.colors=this.colors.theme[e],this._content(t)}this._content({colors:this.colors.standard})},_content:function(e){var t=e.colors,n=a()(this._templateContent()),i=n.find(".line");for(var r in this.$panel.append(n),t){var o=a()(this._templateBox(t[r]));e.top&&(o.css("border-top","none"),o.css("border-top-left-radius","0px"),o.css("border-top-right-radius","0px")),e.bottom&&(o.css("border-bottom","none"),o.css("border-bottom-left-radius","0px"),o.css("border-bottom-right-radius","0px")),i.append(o)}return n},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(e){return'<div id="'.concat(e,'" class="ui-color-picker-box" style="background-color: #').concat(e,';"/>')},_template:function(){return'\n            <div class="ui-color-picker">\n                <div class="ui-color-picker-header">\n                    <div class="ui-color-picker-value"/>\n                    <div class="ui-color-picker-label">Select a color</div>\n                </div>\n                <div class="ui-color-picker-view ui-input">\n                    <div class="ui-color-picker-panel"/>\n                </div>\n            </div>\n            '}}),z=n(66),U=s.a.View.extend({constructor:function(e){var t=this,n=Object(f.a)();this.model=e&&e.model||new s.a.Model(e),this.button_dialog=new z.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",cls:"btn btn-secondary float-left mr-2",onclick:function(){n.data.dialog((function(e){t.model.set("value",e),t.model.get("onchange")&&t.model.get("onchange")(e)}),{multiple:Boolean(t.model.get("multiple"))})}}),this.$info=a()("<input disabled/>").addClass("ui-input float-left"),this.setElement(a()("<div/>").addClass("d-flex").append(this.button_dialog.$el).append(this.$info)),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){this.$el.attr("id",this.model.id);var e=this.model.get("value");return e&&this.model.get("multiple")&&(e=e.join(", ")),this.$info.val(e||"Empty"),this}}),V=s.a.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",group_tag:"_fieldSelect",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",rules:"_fieldRulesEdit",directory_uri:"_fieldDirectoryUri",data_dialog:"_fieldDialog"},create:function(e){var t=Object(f.a)(),n=this.types[e.hiddenInWorkflow?"hidden":e.type],i="function"==typeof this[n]?this[n].call(this,e):null;return i||(i=e.options?this._fieldSelect(e):this._fieldText(e),t.emit.debug("form-parameters::_addRow()","Auto matched field type (".concat(e.type,")."))),void 0===e.value&&(e.value=null),i.value(e.value),i},_fieldData:function(e){return new w.View({id:"field-".concat(e.id),extensions:e.extensions,optional:e.optional,multiple:e.multiple,type:e.type,flavor:e.flavor,data:e.options,onchange:e.onchange})},_fieldSelect:function(e){if(e.is_workflow)return this._fieldText(e);"data_column"==e.type&&(e.error_text="Missing columns in referenced dataset.");var t={checkboxes:c.a.Checkbox,radio:c.a.Radio,radiobutton:c.a.RadioButton}[e.display]||c.a.Select,n=Object(f.a)(),i=!0;return"workflow"==e.flavor&&(-1==n.config.select_type_workflow_threshold?i=!1:0==n.config.select_type_workflow_threshold?i=!0:n.config.select_type_workflow_threshold<e.options.length&&(i=!1)),new c.a.TextSelect({id:"field-".concat(e.id),data:e.data,options:e.options,display:e.display,error_text:e.error_text||"No options available",readonly:e.readonly,multiple:e.multiple,optional:e.optional,onchange:e.onchange,individual:e.individual,searchable:i,textable:e.textable,SelectClass:t})},_fieldDrilldown:function(e){return e.is_workflow?this._fieldText(e):new c.a.Drilldown.View({id:"field-".concat(e.id),data:e.options,display:e.display,optional:e.optional,onchange:e.onchange})},_fieldText:function(e){var t=e.optional&&"select"===e.type?c.a.NullableText:c.a.Input;if(["SelectTagParameter","ColumnListParameter"].includes(e.model_class)||e.options&&e.data)if(e.area=e.multiple,d.a.isEmpty(e.value))e.value=null;else if(Array.isArray(e.value)){var n="";for(var i in e.value){if(n+=String(e.value[i]),!e.multiple)break;n+="\n"}e.value=n}return new t({id:"field-".concat(e.id),type:e.type,area:e.area,readonly:e.readonly,placeholder:e.placeholder,datalist:e.datalist,onchange:e.onchange,value:e.value})},_fieldSlider:function(e){return new c.a.Slider.View({id:"field-".concat(e.id),precise:"float"==e.type,is_workflow:e.is_workflow,min:e.min,max:e.max,onchange:e.onchange})},_fieldHidden:function(e){return new c.a.Hidden({id:"field-".concat(e.id),info:e.info})},_fieldBoolean:function(e){return new c.a.Switch({id:"field-".concat(e.id),onchange:e.onchange})},_fieldColor:function(e){return new W({id:"field-".concat(e.id),onchange:e.onchange})},_fieldDialog:function(e){return new U({id:"field-".concat(e.id),multiple:e.multiple,onchange:e.onchange})},_fieldLibrary:function(e){return new M.View({id:"field-".concat(e.id),optional:e.optional,multiple:e.multiple,onchange:e.onchange})},_fieldFtp:function(e){return new T.View({id:"field-".concat(e.id),optional:e.optional,multiple:e.multiple,onchange:e.onchange})},_fieldDirectoryUri:function(e){return new $.View({id:"field-".concat(e.id),onchange:e.onchange,target:e.target})},_fieldRulesEdit:function(e){return new H.View({id:"field-".concat(e.id),onchange:e.onchange,target:e.target})},_fieldUpload:function(e){return new c.a.Upload({id:"field-".concat(e.id),onchange:e.onchange})}}),B=s.a.View.extend({initialize:function(e,t){this.app=e,this.inputs=t.inputs,this.parameters=new V,this.setElement(a()("<div/>")),this.rendered=!1,this.elements={},!0!==t.skip_render&&this.renderOnce()},render:function(){var e=this;this.$el.empty(),r.default.each(this.inputs,(function(t){e.add(t)}))},renderOnce:function(){!1===this.rendered&&(this.render(),this.rendered=!0)},add:function(e){var t=a.a.extend({},e);switch(t.id=d.a.uid(),this.app.input_list[t.id]=t,t.type){case"conditional":this._addConditional(t);break;case"repeat":this._addRepeat(t);break;case"section":this._addSection(t);break;default:this._addRow(t)}},_addConditional:function(e){var t=this;e.test_param.id=e.id,e.test_param.textable=!1,this.app.model.get("sustain_conditionals")&&(e.test_param.disabled=!0);var n=this._addRow(e.test_param);if(n.model){for(var i in e.cases){var a=new B(this.app,{inputs:e.cases[i].inputs,skip_render:!0});this.elements[e.id+"_"+i]=a,this._append(a.$el.addClass("ui-portlet-section pl-2"),"".concat(e.id,"-section-").concat(i))}n.model.set("onchange",(function(n){var i=t.app.data.matchCase(e,n);for(var a in e.cases){var r=e.cases[a],o=t.$("#".concat(e.id,"-section-").concat(a)),s=!1;for(var l in r.inputs)if(!r.inputs[l].hidden){s=!0;break}if(a==i)t.elements[e.id+"_"+a].renderOnce();a==i&&s?o.fadeIn("fast"):o.hide()}t.app.trigger("change")})),n.trigger("change")}},_addRepeat:function(e){var t=this,n=0,i=new u.a.View({title:e.title||"Repeat",min:e.min,max:e.max,onnew:function(){a(e.inputs),t.app.trigger("change")}});function a(a){var r="".concat(e.id,"-section-").concat(n++),o=new B(t.app,{inputs:a});i.add({id:r,$el:o.$el,ondel:function(){i.del(r),t.app.trigger("change")}})}for(var o=r.default.size(e.cache),s=0;s<Math.max(Math.max(o,e.min||0),e.default||0);s++)a(s<o?e.cache[s]:e.inputs);this.app.model.get("sustain_repeats")&&i.hideOptions();var l=new h(this.app,{label:e.title||e.name,help:e.help,field:i});this._append(l.$el,e.id)},_addSection:function(e){var t=new B(this.app,{inputs:e.inputs}),n=new l.a.View({title:e.title||e.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!e.expanded,section:t});n.append(t.$el),n.append(a()("<div/>").addClass("form-text text-muted").html(e.help)),this.app.on("expand",(function(e){n.$("#".concat(e)).length>0&&n.expand()})),this._append(n.$el,e.id)},_addRow:function(e){var t=this,n=e.id;e.onchange=e.onchange||function(){t.app.trigger("change",n)};var i=this.parameters.create(e);this.app.field_list[n]=i;var a=new h(this.app,{name:e.name,label:e.hide_label?"":e.label||e.name,value:e.value,text_value:e.text_value,collapsible_value:e.collapsible_value,collapsible_preview:e.collapsible_preview,connectable:e.connectable,help:e.help,argument:e.argument,disabled:e.disabled,color:e.color,style:e.style,backdrop:e.backdrop,hidden:e.hidden,fixed:e.fixed,field:i});return this.app.element_list[n]=a,this._append(a.$el,e.id),i},_append:function(e,t){this.$el.append(e.addClass("section-row").attr("id",t))}}),q={View:B},G=n(129);t.a=s.a.View.extend({initialize:function(e){this.model=new s.a.Model({initial_errors:!1,cls:"ui-portlet",icon:null,always_refresh:!0,status:"warning",hide_operations:!1,onchange:function(){}}).set(e),this.setElement(e.el||"<div/>"),this.render()},update:function(e){var t=this;this.data.matchModel(e,(function(e,n){var i=t.field_list[n];i.update&&(i.update(e),i.trigger("change"),Object(f.a)().emit.debug("form-view::update()","Updating input: ".concat(n)))}))},wait:function(e){for(var t in this.input_list){var n=this.field_list[t];this.input_list[t].is_dynamic&&n.wait&&n.unwait&&n[e?"wait":"unwait"]()}},highlight:function(e,t,n){var i=this.element_list[e];if(i&&(i.error(t||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",e),!n)){var r=this.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(a()(this).css("overflow"))})).first();r.animate({scrollTop:r.scrollTop()+i.$el.offset().top-r.position().top-120},500)}},errors:function(e){if(this.trigger("reset"),e&&e.errors){var t=this.data.matchResponse(e.errors);for(var n in this.element_list)t[n]&&this.highlight(n,t[n],!0)}},render:function(){var e=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new G.a.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var t=this.data.checksum();return this.on("change",(function(n){var i=e.input_list[n];if(!i||i.refresh_on_change||e.model.get("always_refresh")){var a=e.data.checksum();a!=t&&(t=a,e.model.get("onchange")())}})),this.on("reset",(function(){r.default.each(e.element_list,(function(e){e.reset()}))})),this},_renderForm:function(){a()(".tooltip").remove();var e=this.model.attributes;this.message=new c.a.UnescapedMessage,this.section=new q.View(this,{inputs:e.inputs}),this.portlet=new l.a.View({icon:e.icon,title:e.title,title_id:e.title_id,operations:!e.hide_operations&&e.operations,cls:e.cls,buttons:e.buttons,collapsible:e.collapsible,collapsed:e.collapsed,onchange_title:e.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),e.inputs&&this.$el.append(this.portlet.$el),e.message&&this.message.update({persistent:!0,status:e.status,message:e.message}),Object(f.a)().emit.debug("form-view::initialize()","Completed")}})},,function(e,t,n){"use strict";n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return W})),n.d(t,"i",(function(){return z})),n.d(t,"f",(function(){return U})),n.d(t,"e",(function(){return V})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return q})),n.d(t,"a",(function(){return G})),n.d(t,"j",(function(){return J})),n.d(t,"c",(function(){return K}));var i=n(1082),a=n(778),r=n(668),o=n(624),s=n(780),l=n(2207),c=n(152),d=n(2183),u=n(221),h=n(779),f=n(1092),p=n(502),m=n(2182);function _(){return new Worker(n.p+"CacheWorker.worker.bundled.worker.js")}var g=n(76),v=n(88);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function k(e){var t=M();return function(){var n,i=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){var t="function"==typeof Map?new Map:void 0;return(S=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return C(e,arguments,j(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),T(i,e)})(e)}function C(e,t,n){return(C=M()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&T(a,n.prototype),a}).apply(null,arguments)}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){E(r,i,a,o,s,"next",e)}function s(e){E(r,i,a,o,s,"throw",e)}o(void 0)}))}}var I=Object(i.a)((function(){return Object(a.a)(g.a).pipe(Object(s.a)(P))})).pipe(Object(l.a)(1)),P=function(){var e=A(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(new _);case 2:if(n=e.sent){e.next=5;break}throw new N;case 5:return i=Object(v.a)(),a=D(D({},t),{},{root:i}),e.next=9,n.configure(a);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){return Object(r.a)(Object(c.a)((function(t){if(!(e in t))throw new $(e);return t[e]})))},R=function(e){var t=I.pipe(Y(e)).pipe(Object(c.a)((function(e){return function(){return Object(o.a)(e.apply(void 0,arguments))}})));return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(i){var a=Object(p.v4)();return t.pipe(Object(s.a)((function(t){return i.pipe(Object(d.a)(),Object(c.a)((function(i){return t(D({id:a,cfg:n,fnName:e},i))})),Object(u.a)(Boolean),Object(h.a)(),Object(f.a)((function(){return t({id:a,kind:"C"})})))})))}}},H=function(e){return A(regeneratorRuntime.mark((function t(){var n,i,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.pipe(Y(e)).toPromise(),t.next=3,n;case 3:return i=t.sent,t.next=6,i.apply(void 0,a);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))},N=function(e){w(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(S(Error)),$=function(e){w(n,e);var t=k(n);function n(e){b(this,n);for(var i="\n            Missing method on client cache worker: ".concat(e,".\n            Please write a function named ").concat(e," in caching/cacheWorker.js\n        "),a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,i].concat(r))}return n}(S(Error)),F=R("monitorContentQuery"),W=R("monitorDscQuery"),z=R("monitorHistoryContent"),U=R("monitorCollectionContent"),V=R("loadHistoryContents"),B=R("loadDscContent"),q=H("cacheContent"),G=(H("getCachedContent"),H("uncacheContent"),H("bulkCacheContent")),J=(H("cacheCollectionContent"),H("getCachedCollectionContent"),H("bulkCacheDscContent"),H("getContentByTypeId"),H("wipeDatabase")),K=H("clearHistoryDateStore")},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n(138);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.text="",e.text&&e.text.startsWith("#")&&(e.text=e.text.replace("#","name:")),Object.assign(this,e),Object.defineProperty(this,"style",{enumerable:!0,get:function(){if(this.text.startsWith("name:")){var e=Object(i.a)(this.text),t={"background-color":e.primary,color:e.contrasting,"border-color":e.darker};return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join(";")}return""}}),Object.defineProperty(this,"label",{enumerable:!0,get:function(){return this.text.startsWith("name:")?this.text.replace("name:","#"):this.text}}),Object.defineProperty(this,"valid",{enumerable:!1,get:function(){return!!this.text.length&&"name:"!=this.text}})}function o(e){var t={};switch(a(e)){case"string":t={text:e};break;case"object":t=Object.assign({},e)}return new r(t)}r.prototype.equals=function(e){return this.text==e.text},r.prototype.toString=function(){return this.text};var s=function(e,t){var n=e.map(o),i=t.map(o);return n.filter((function(e){return!i.some((function(t){return t.equals(e)}))}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(1),l=n(11),c=o.a.View.extend(l.a.LoggableMixin).extend({_logNamespace:"list",initialize:function(e){this.expanded=e.expanded||!1,this.log("\t expanded:",this.expanded),this.fxSpeed=void 0!==e.fxSpeed?e.fxSpeed:this.fxSpeed},fxSpeed:"fast",render:function(e){var t=this._buildNewRender();return this._setUpBehaviors(t),this._queueNewRender(t,e),this},_buildNewRender:function(){var e=a()(this.templates.el(this.model.toJSON(),this));return this.expanded&&this.$details(e).replaceWith(this._renderDetails().show()),e},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;var n=this;0===t?(n._swapNewRender(e),n.trigger("rendered",n)):a()(n).queue("fx",[function(e){n.$el.fadeOut(t,e)},function(t){n._swapNewRender(e),t()},function(e){n.$el.fadeIn(t,e)},function(e){n.trigger("rendered",n),e()}])},_swapNewRender:function(e){return this.$el.empty().attr("class",s.default.isFunction(this.className)?this.className():this.className).append(e.children())},_setUpBehaviors:function(e){(e=e||this.$el).find("[title]").tooltip({placement:"bottom"})},$details:function(e){return(e=e||this.$el).find("> .details")},_renderDetails:function(){var e=a()(this.templates.details(this.model.toJSON(),this));return this._setUpBehaviors(e),e},toggleExpanded:function(e){return(e=void 0===e?!this.expanded:e)?this.expand():this.collapse(),this},expand:function(){var e=this;return e._fetchModelDetails().always((function(){e._expand()}))},_fetchModelDetails:function(){return this.model.hasDetails()?a.a.when():this.model.fetch()},_expand:function(){var e=this,t=e._renderDetails();e.$details().replaceWith(t),e.expanded=!0,e.$details().slideDown(e.fxSpeed,(function(){e.trigger("expanded",e)}))},collapse:function(){this.debug("".concat(this,"(ExpandableView).collapse"));var e=this;e.expanded=!1,this.$details().slideUp(e.fxSpeed,(function(){e.trigger("collapsed",e)}))}}),d=c.extend(l.a.mixin(l.a.SelectableViewMixin,l.a.DraggableViewMixin,{tagName:"div",className:"list-item",initialize:function(e){c.prototype.initialize.call(this,e),l.a.SelectableViewMixin.initialize.call(this,e),l.a.DraggableViewMixin.initialize.call(this,e),this._setUpListeners()},_setUpListeners:function(){return this.on("selectable",(function(e){e?this.$(".primary-actions").hide():this.$(".primary-actions").show()}),this),this},_buildNewRender:function(){var e=c.prototype._buildNewRender.call(this);return e.children(".warnings").replaceWith(this._renderWarnings()),e.children(".title-bar").replaceWith(this._renderTitleBar()),e.children(".primary-actions").append(this._renderPrimaryActions()),e.find("> .title-bar .subtitle").replaceWith(this._renderSubtitle()),e},_swapNewRender:function(e){return c.prototype._swapNewRender.call(this,e),this.selectable&&this.showSelector(0),this.draggable&&this.draggableOn(),this.$el},_renderWarnings:function(){var e=this,t=a()('<div class="warnings"></div>'),n=e.model.toJSON();return s.default.each(e.templates.warnings,(function(i){t.append(a()(i(n,e)))})),t},_renderTitleBar:function(){return a()(this.templates.titleBar(this.model.toJSON(),this))},_renderPrimaryActions:function(){return[]},_renderSubtitle:function(){return a()(this.templates.subtitle(this.model.toJSON(),this))},events:{"click .title-bar":"_clickTitleBar","keydown .title-bar":"_keyDownTitleBar","click .selector":"toggleSelect"},_clickTitleBar:function(e){e.stopPropagation(),e.altKey?(this.toggleSelect(e),this.selectable||this.showSelector()):this.toggleExpanded()},_keyDownTitleBar:function(e){return!e||"keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode||(this.toggleExpanded(),e.stopPropagation(),!1)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"ListItemView(".concat(e,")")}}));d.prototype.templates={el:l.a.wrapTemplate(['<div class="list-element">','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]),warnings:{},titleBar:l.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element"),subtitle:l.a.wrapTemplate(['<div class="subtitle"></div>']),details:l.a.wrapTemplate(['<div class="details"></div>'])};var u,h=d.extend({foldoutStyle:"foldout",foldoutPanelClass:null,initialize:function(e){"drilldown"===this.foldoutStyle&&(this.expanded=!1),this.foldoutStyle=e.foldoutStyle||this.foldoutStyle,this.foldoutPanelClass=e.foldoutPanelClass||this.foldoutPanelClass,d.prototype.initialize.call(this,e),this.foldout=this._createFoldoutPanel()},_renderDetails:function(){if("drilldown"===this.foldoutStyle)return a()();var e=d.prototype._renderDetails.call(this);return this._attachFoldout(this.foldout,e)},_createFoldoutPanel:function(){var e=this.model,t=this._getFoldoutPanelClass(e),n=this._getFoldoutPanelOptions(e);return new t(s.default.extend(n,{model:e}))},_getFoldoutPanelClass:function(){return this.foldoutPanelClass},_getFoldoutPanelOptions:function(){return{foldoutStyle:this.foldoutStyle,fxSpeed:this.fxSpeed}},_attachFoldout:function(e,t){return t=t||this.$("> .details"),this.foldout=e.render(0),e.$("> .controls").hide(),t.append(e.$el)},expand:function(){var e=this;return e._fetchModelDetails().always((function(){"foldout"===e.foldoutStyle?e._expand():"drilldown"===e.foldoutStyle&&e._expandByDrilldown()}))},_expandByDrilldown:function(){var e=this;e.listenTo(e.foldout,"close",(function(){e.trigger("collapsed:drilldown",e,e.foldout)})),e.trigger("expanded:drilldown",e,e.foldout)}});h.prototype.templates=(u=l.a.wrapTemplate(['<div class="details">',"</div>"],"collection"),s.default.extend({},d.prototype.templates,{details:u})),t.c={ExpandableView:c,ListItemView:d,FoldoutListItemView:h}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return O}));var i=n(0),a=n.n(i),r=n(7),o=n.n(r),s=n(8),l=n(141),c=n(106),d=n(196),u=n(235);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.values={},this.multiple=t.multiple||!1}var t,n,i;return t=e,(n=[{key:"add",value:function(e){this.multiple||(this.values={});var t=e&&e.id;if(!t)throw"Invalid record with no <id>.";this.values[t]?delete this.values[t]:this.values[t]=e}},{key:"count",value:function(){return Object.keys(this.values).length}},{key:"exists",value:function(e){return!!this.values[e]}},{key:"finalize",value:function(){var e=[];return Object.values(this.values).forEach((function(t){e.push(t)})),e.length>0&&!this.multiple&&(e=e[0]),e}}])&&h(t.prototype,n),i&&h(t,i),e}();function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _={mixins:[c.a],props:{multiple:{type:Boolean,default:!1},mode:{type:String,default:"file",validator:function(e){return["file","directory"].includes(e)}},requireWritable:{type:Boolean,default:!1}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1,showTime:!0,showDetails:!0}},created:function(){this.services=new u.a,this.urlTracker=new d.a(""),this.model=new f({multiple:this.multiple}),this.load()},computed:{fileMode:function(){return"file"==this.mode}},methods:{formatRows:function(){var e,t=p(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value,i="active";!n.isLeaf&&this.fileMode||(i=this.model.exists(n.id)?"success":"default"),s.default.set(n,"_rowVariant",i)}}catch(e){t.e(e)}finally{t.f()}},clicked:function(e){e.isLeaf||!this.fileMode?(this.model.add(e),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.finalize()):this.open(e)},open:function(e){this.load(e.url)},finalize:function(){var e=this.model.finalize();this.modalShow=!1,this.callback(e)},load:function(e){var t=this;e=this.urlTracker.getUrl(e),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.urlTracker.atRoot()?this.services.getFileSources().then((function(e){e=e.filter((function(e){return!t.requireWritable||e.writable})).map((function(e){return{id:e.id,label:e.label,details:e.doc,isLeaf:!1,url:e.uri_root,labelTitle:e.uri_root}})),t.items=e,t.formatRows(),t.optionsShow=!0,t.showTime=!1,t.showDetails=!0})).catch((function(e){t.errorMessage=e})):this.services.list(e).then((function(e){e=t.fileMode?e.map((function(e){var t=e.class;return{id:e.uri,label:e.name,time:e.ctime,isLeaf:"File"==t,size:e.size,url:e.uri,labelTitle:e.uri}})):e.filter((function(e){return"Directory"==e.class})).map((function(e){return{id:e.uri,label:e.name,time:e.ctime,isLeaf:!1,size:e.size,url:e.uri,labelTitle:e.uri}})),t.items=e,t.formatRows(),t.optionsShow=!0,t.showTime=!0,t.showDetails=!1})).catch((function(e){t.errorMessage=e}))}}},g=n(5),v=Object(g.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":function(){return e.modalShow=!1}},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:e.multiple,filter:e.filter,"show-details":e.showDetails,"show-time":e.showTime,"show-navigate":"directory"==e.mode},on:{clicked:e.clicked,open:e.open,load:e.load}}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[e.undoShow?n("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(t){return e.load()}}},[n("div",{staticClass:"fa fa-caret-left mr-1"}),e._v("\n            Back\n        ")]):e._e(),e._v(" "),e.multiple?n("b-btn",{staticClass:"float-right ml-1 file-dialog-modal-ok",attrs:{size:"sm",variant:"primary",disabled:!e.hasValue},on:{click:e.finalize}},[e._v("\n            Ok\n        ")]):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,y=(n(205),n(145)),b=n(6),w=n(3);function k(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){k(r,i,a,o,s,"next",e)}function s(e){k(r,i,a,o,s,"throw",e)}o(void 0)}))}}function S(){return C.apply(this,arguments)}function C(){return(C=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(b.a)()).currHistoryPanel||!t.currHistoryPanel.model.id){e.next=5;break}return e.abrupt("return",t.currHistoryPanel.model.id);case 5:return e.abrupt("return",o.a.get("".concat(Object(w.getAppRoot)(),"history/current_history_json")).then((function(e){return e.data.id})).catch((function(e){return console.error("Error fetching current user history:",e),null})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S().then((function(n){Object.assign(t,{callback:e,history:n}),t.new?Object(y.b)(t):j(l.a,t)}))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(t,{callback:e}),j(v,t)}function j(e,t){var n=s.default.extend(e),i=document.createElement("div");a()("body").append(i),new n({propsData:t}).$mount(i)}function O(e){var t=Object(b.a)().currHistoryPanel;function n(){return(n=x(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.history_id){t.next=2;break}return t.abrupt("return",S());case 2:return t.abrupt("return",e.history_id);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){a.a.uploadpost({url:"".concat(Object(w.getAppRoot)(),"api/tools"),success:function(n){t&&t.refreshContents(),e.success&&e.success(n)},error:e.error,data:{payload:{tool_id:"upload1",history_id:n,inputs:JSON.stringify({"files_0|type":"upload_dataset","files_0|NAME":e.file_name,"files_0|space_to_tab":e.space_to_tab?"Yes":null,"files_0|to_posix_lines":e.to_posix_lines?"Yes":null,"files_0|dbkey":e.genome||"?","files_0|file_type":e.extension||"auto","files_0|url_paste":e.url_paste})}}})}))}},,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(54),c=s.a.Model.extend({defaults:{title:"",icon_class:"",on_click:null,menu_options:null,is_menu_button:!0,id:null,href:null,target:null,enabled:!0,visible:!0,tooltip_config:{}}}),d=s.a.View.extend({initialize:function(){this.model.attributes.tooltip_config={placement:"bottom"},this.model.bind("change",this.render,this)},render:function(){this.$el.tooltip("hide");var e=this.template(this.model.toJSON());return e.tooltip(this.model.get("tooltip_config")),this.$el.replaceWith(e),this.setElement(e),this},events:{click:"click"},click:function(e){return!r.default.isFunction(this.model.get("on_click"))||(this.model.get("on_click")(e),!1)},template:function(e){var t='title="'.concat(e.title,'" class="icon-button');return e.is_menu_button&&(t+=" menu-button"),t+=" ".concat(e.icon_class),e.enabled||(t+="_disabled"),t+='"',e.id&&(t+=' id="'.concat(e.id,'"')),t+=' href="'.concat(e.href,'"'),e.target&&(t+=' target="'.concat(e.target,'"')),e.visible||(t+=' style="display: none;"'),t=e.enabled?"<a ".concat(t,"/>"):"<span ".concat(t,"/>"),a()(t)}}),u=s.a.Collection.extend({model:c}),h=s.a.View.extend({tagName:"div",initialize:function(){this.render()},render:function(){var e=this;return this.collection.each((function(t){var n=a()("<a/>").attr("href","javascript:void(0)").attr("title",t.attributes.title).addClass("icon-button menu-button").addClass(t.attributes.icon_class).appendTo(e.$el).click(t.attributes.on_click);t.attributes.tooltip_config&&n.tooltip(t.attributes.tooltip_config);var i=t.get("options");i&&Object(l.b)(n,i)})),this}});t.a={IconButton:c,IconButtonView:d,IconButtonCollection:u,IconButtonMenuView:h,create_icon_buttons_menu:function(e,t){t||(t={});var n=new u(r.default.map(e,(function(e){return new c(r.default.extend(e,t))})));return new h({collection:n})}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(10),o=n(4),s=n.n(o),l=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({id:r.a.uid(),title:"",icon:"",cls:"btn btn-secondary",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1,visible:!0}).set(e),this.setElement(a()("<button/>").attr("type","button").append(this.$icon=a()("<i/>")).append(this.$title=a()("<span/>")).append(this.$progress=a()("<div/>").append(this.$progress_bar=a()("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this,t=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(t.disabled&&"disabled").attr("id",t.id).attr("disabled",t.disabled).css("display",t.visible?"inline-block":"none").off("click").on("click",(function(){a()(".tooltip").hide(),t.onclick&&!e.disabled&&t.onclick()})).tooltip({title:t.tooltip||"",placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==t.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:"".concat(t.percentage,"%")}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),t.wait?(this.$el.addClass(t.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin mr-1"),this.$title.html(t.wait_text)):(this.$el.addClass(t.cls),this.$icon.addClass(t.icon),t.title&&(this.$title.html(t.title),t.icon&&this.$icon.addClass("mr-1")))},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(e){this.model.set("icon",e)}}),c=l.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({id:r.a.uid(),visible:!0,title:"",icon:"",cls:""}).set(e),this.setElement(a()("<a/>").append(this.$icon=a()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.attributes;this.$el.removeClass().addClass(e.cls).attr({id:e.id,href:e.href||"javascript:void(0)",title:e.title,target:e.target||"_top",disabled:e.disabled}).css("display",e.visible?"inline-block":"none").tooltip({placement:"bottom"}).off("click").on("click",(function(){e.onclick&&!e.disabled&&e.onclick()})),this.$icon.removeClass().addClass(e.icon)}}),d=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model({id:r.a.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,visible:!0,onchange:function(){}}).set(e),this.setElement(a()("<div/>").addClass("mb-2").append(this.$icon=a()("<span/>")).append(this.$title=a()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(e){var t=this;e=this.model.attributes,this.$el.addClass("ui-button-check").css("display",e.visible?"inline-block":"none").off("click").on("click",(function(){t.model.set("value",0===t.model.get("value")?2:0),e.onclick&&e.onclick()})),this.$title.html(e.title),this.$icon.removeClass().addClass("icon fa mr-1").addClass(e.icons[e.value])},value:function(e,t){return void 0!==e&&(t&&0!==e&&(e=e!==t?1:2),this.model.set("value",e),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),u=s.a.View.extend({$menu:null,initialize:function(e){this.model=e&&e.model||new s.a.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"btn btn-secondary float-right",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(e),this.collection=new s.a.Collection,this.setElement(a()("<div/>").append(this.$root=a()("<button/>").append(this.$icon=a()("<i/>")).append(this.$title=a()("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var e=this,t=this.model.attributes;this.$el.removeClass().addClass("dropdown").attr("id",t.id).css({display:t.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass(t.cls).attr("data-toggle","dropdown").tooltip({title:t.tooltip||"",placement:"bottom"}).off("click").on("click",(function(e){a()(".tooltip").hide(),e.preventDefault(),t.onclick&&t.onclick()})),this.$icon.removeClass().addClass("icon fa").addClass(t.icon),t.title&&this.$title.removeClass().addClass("title ml-1").html(t.title),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=a()("<div/>").addClass("menu dropdown-menu dropdown-menu-right").addClass("pull-".concat(this.model.get("pull"))).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each((function(t){var n=t.attributes;if(n.visible){var i=a()("<a/>").addClass("dropdown-item").attr({href:n.href,target:n.target}).append(a()("<i/>").addClass("fa mr-2").addClass(n.icon).css("display",n.icon?"inline-block":"none")).append(n.title).on("click",(function(e){n.onclick&&(e.preventDefault(),n.onclick())}));e.$menu.append(i),n.divider&&e.$menu.append(a()("<div/>").addClass("divider"))}}))},addMenu:function(e){this.collection.add(r.a.merge(e,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});t.a={Button:l,ButtonLink:c,ButtonCheck:d,ButtonMenu:u}},function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return _})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return b}));var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(98);function l(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){l(r,i,a,o,s,"next",e)}function s(e){l(r,i,a,o,s,"throw",e)}o(void 0)}))}}function d(e){return u.apply(this,arguments)}function u(){return(u=c(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.get("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(t,"/versions"));case 3:return n=e.sent,i=n.data,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0),Object(r.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=c(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),t);case 3:return n=e.sent,i=n.data,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0),Object(r.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function p(e,t){return m.apply(this,arguments)}function m(){return(m=c(regeneratorRuntime.mark((function e(t,n){var i,s,l,c,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>2&&void 0!==d[2]&&d[2],e.prev=1,s={actions:n,style:"editor",dry_run:i},e.next=5,a.a.put("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(t,"/refactor"),s);case 5:return l=e.sent,c=l.data,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(1),Object(r.b)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function _(e,t,n,i){return g.apply(this,arguments)}function g(){return(g=c(regeneratorRuntime.mark((function e(t,n,i,l){var c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Number.isInteger(i)?"version=".concat(i):"",e.next=4,a.a.get("".concat(Object(o.getAppRoot)(),"workflow/load_workflow?_=true&id=").concat(n,"&").concat(c));case 4:return d=e.sent,u=d.data,Object(s.a)(t,u,l),e.abrupt("return",u);case 10:e.prev=10,e.t0=e.catch(0),console.debug(e.t0),Object(r.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=c(regeneratorRuntime.mark((function e(t){var n,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasChanges){e.next=19;break}return e.prev=1,n={workflow:Object(s.b)(t),from_tool_form:!0},e.next=5,a.a.put("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(t.id),n);case 5:return i=e.sent,l=i.data,t.name=l.name,t.hasChanges=!1,t.requiresReindex=!1,t.stored=!0,t.version=l.version,t.annotation=l.annotation,e.abrupt("return",l);case 16:e.prev=16,e.t0=e.catch(1),Object(r.b)(e.t0);case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=c(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/get_tool_predictions"),t);case 3:return n=e.sent,i=n.data,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0),Object(r.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},function(e,t,n){"use strict";var i=n(1);t.a={get:function(e,t){t=t||window.location.search.substr(1);var n=new RegExp("".concat(e,"=([^&#$]+)"),"g"),a=t.match(n);if(a&&a.length)return 1===(a=i.default.map(a,(function(t){return decodeURIComponent(t.substr(e.length+1).replace(/\+/g," "))}))).length?a[0]:a},parse:function(e){if(!e)return{};var t={};return e.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=decodeURI(n[1])})),t}}},,function(e,t,n){var i,a,r;
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */a="undefined"!=typeof window?window:this,r=function(n,a){var r=[],o=n.document,s=r.slice,l=r.concat,c=r.push,d=r.indexOf,u={},h=u.toString,f=u.hasOwnProperty,p={},m=function(e,t){return new m.fn.init(e,t)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,v=/-([\da-z])/gi,y=function(e,t){return t.toUpperCase()};function b(e){var t=!!e&&"length"in e&&e.length,n=m.type(e);return"function"!==n&&!m.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:"2.2.4",constructor:m,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return m.each(this,e)},map:function(e){return this.pushStack(m.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var e,t,n,i,a,r,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||m.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],o!==(i=e[t])&&(c&&i&&(m.isPlainObject(i)||(a=m.isArray(i)))?(a?(a=!1,r=n&&m.isArray(n)?n:[]):r=n&&m.isPlainObject(n)?n:{},o[t]=m.extend(c,r,i)):void 0!==i&&(o[t]=i));return o},m.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!m.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==m.type(e)||e.nodeType||m.isWindow(e))return!1;if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||f.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[h.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=o.createElement("script")).text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(g,"ms-").replace(v,y)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(b(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(_,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?m.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;i<n;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,n){for(var i=[],a=0,r=e.length,o=!n;a<r;a++)!t(e[a],a)!==o&&i.push(e[a]);return i},map:function(e,t,n){var i,a,r=0,o=[];if(b(e))for(i=e.length;r<i;r++)null!=(a=t(e[r],r,n))&&o.push(a);else for(r in e)null!=(a=t(e[r],r,n))&&o.push(a);return l.apply([],o)},guid:1,proxy:function(e,t){var n,i,a;if("string"==typeof t&&(n=e[t],t=e,e=n),m.isFunction(e))return i=s.call(arguments,2),(a=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||m.guid++,a},now:Date.now,support:p}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var w=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(e){var t,n,i,a,r,o,s,l,c,d,u,h,f,p,m,_,g,v,y,b="sizzle"+1*new Date,w=e.document,k=0,x=0,S=re(),C=re(),M=re(),T=function(e,t){return e===t&&(u=!0),0},j=1<<31,O={}.hasOwnProperty,D=[],L=D.pop,E=D.push,A=D.push,I=D.slice,P=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+R+"*("+H+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+R+"*\\]",$=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),W=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),z=new RegExp("^"+R+"*,"+R+"*"),U=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),B=new RegExp($),q=new RegExp("^"+H+"$"),G={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){h()};try{A.apply(D=I.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(e){A={apply:D.length?function(e,t){E.apply(e,I.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,a){var r,s,c,d,u,p,g,v,k=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!a&&((t?t.ownerDocument||t:w)!==f&&h(t),t=t||f,m)){if(11!==x&&(p=Q.exec(e)))if(r=p[1]){if(9===x){if(!(c=t.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(k&&(c=k.getElementById(r))&&y(t,c)&&c.id===r)return i.push(c),i}else{if(p[2])return A.apply(i,t.getElementsByTagName(e)),i;if((r=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return A.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!M[e+" "]&&(!_||!_.test(e))){if(1!==x)k=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((d=t.getAttribute("id"))?d=d.replace(ee,"\\$&"):t.setAttribute("id",d=b),s=(g=o(e)).length,u=q.test(d)?"#"+d:"[id='"+d+"']";s--;)g[s]=u+" "+me(g[s]);v=g.join(","),k=Z.test(e)&&fe(t.parentNode)||t}if(v)try{return A.apply(i,k.querySelectorAll(v)),i}catch(e){}finally{d===b&&t.removeAttribute("id")}}}return l(e.replace(W,"$1"),t,i,a)}function re(){var e=[];return function t(n,a){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function oe(e){return e[b]=!0,e}function se(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),a=n.length;a--;)i.attrHandle[n[a]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return oe((function(t){return t=+t,oe((function(n,i){for(var a,r=e([],n.length,t),o=r.length;o--;)n[a=r[o]]&&(n[a]=!(i[a]=n[a]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},r=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=ae.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:w;return o!==f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,m=!r(f),(a=f.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.attributes=se((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=se((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=X.test(f.getElementsByClassName),n.getById=se((function(e){return p.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}},i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],a=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[a++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},g=[],_=[],(n.qsa=X.test(f.querySelectorAll))&&(se((function(e){p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+R+"*(?:value|"+Y+")"),e.querySelectorAll("[id~="+b+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||_.push(".#.+[+~]")})),se((function(e){var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+R+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")}))),(n.matchesSelector=X.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&se((function(e){n.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),g.push("!=",$)})),_=_.length&&new RegExp(_.join("|")),g=g.length&&new RegExp(g.join("|")),t=X.test(p.compareDocumentPosition),y=t||X.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===f||e.ownerDocument===w&&y(w,e)?-1:t===f||t.ownerDocument===w&&y(w,t)?1:d?P(d,e)-P(d,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,a=e.parentNode,r=t.parentNode,o=[e],s=[t];if(!a||!r)return e===f?-1:t===f?1:a?-1:r?1:d?P(d,e)-P(d,t):0;if(a===r)return ce(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?ce(o[i],s[i]):o[i]===w?-1:s[i]===w?1:0},f):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),t=t.replace(V,"='$1']"),n.matchesSelector&&m&&!M[t+" "]&&(!g||!g.test(t))&&(!_||!_.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var a=i.attrHandle[t.toLowerCase()],r=a&&O.call(i.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==r?r:n.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],a=0,r=0;if(u=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(T),u){for(;t=e[r++];)t===e[r]&&(a=i.push(r));for(;a--;)e.splice(i[a],1)}return d=null,e},a=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=a(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:oe,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&B.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var a=ae.attr(i,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,a){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,f,p,m=r!==o?"nextSibling":"previousSibling",_=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!l&&!s,y=!1;if(_){if(r){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?_.firstChild:_.lastChild],o&&v){for(y=(f=(c=(d=(u=(h=_)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===k&&c[1])&&c[2],h=f&&_.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){d[e]=[k,f,y];break}}else if(v&&(y=f=(c=(d=(u=(h=t)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===k&&c[1]),!1===y)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(v&&((d=(u=h[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[k,y]),h!==t)););return(y-=a)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,a=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return a[b]?a(t):a.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?oe((function(e,n){for(var i,r=a(e,t),o=r.length;o--;)e[i=P(e,r[o])]=!(n[i]=r[o])})):function(e){return a(e,0,n)}):a}},pseudos:{not:oe((function(e){var t=[],n=[],i=s(e.replace(W,"$1"));return i[b]?oe((function(e,t,n,a){for(var r,o=i(e,null,a,[]),s=e.length;s--;)(r=o[s])&&(e[s]=!(t[s]=r))})):function(e,a,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}})),has:oe((function(e){return function(t){return ae(e,t).length>0}})),contains:oe((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}})),lang:oe((function(e){return q.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he((function(){return[0]})),last:he((function(e,t){return[t-1]})),eq:he((function(e,t,n){return[n<0?n+t:n]})),even:he((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:he((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:he((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:he((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function pe(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function _e(e,t,n){var i=t.dir,a=n&&"parentNode"===i,r=x++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r)}:function(t,n,o){var s,l,c,d=[k,r];if(o){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if((s=(l=(c=t[b]||(t[b]={}))[t.uniqueID]||(c[t.uniqueID]={}))[i])&&s[0]===k&&s[1]===r)return d[2]=s[2];if(l[i]=d,d[2]=e(t,n,o))return!0}}}function ge(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function ve(e,t,n,i,a){for(var r,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(r=e[s])&&(n&&!n(r,i,a)||(o.push(r),c&&t.push(s)));return o}function ye(e,t,n,i,a,r){return i&&!i[b]&&(i=ye(i)),a&&!a[b]&&(a=ye(a,r)),oe((function(r,o,s,l){var c,d,u,h=[],f=[],p=o.length,m=r||function(e,t,n){for(var i=0,a=t.length;i<a;i++)ae(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),_=!e||!r&&t?m:ve(m,h,e,s,l),g=n?a||(r?e:p||i)?[]:o:_;if(n&&n(_,g,s,l),i)for(c=ve(g,f),i(c,[],s,l),d=c.length;d--;)(u=c[d])&&(g[f[d]]=!(_[f[d]]=u));if(r){if(a||e){if(a){for(c=[],d=g.length;d--;)(u=g[d])&&c.push(_[d]=u);a(null,g=[],c,l)}for(d=g.length;d--;)(u=g[d])&&(c=a?P(r,u):h[d])>-1&&(r[c]=!(o[c]=u))}}else g=ve(g===o?g.splice(p,g.length):g),a?a(null,o,g,l):A.apply(o,g)}))}function be(e){for(var t,n,a,r=e.length,o=i.relative[e[0].type],s=o||i.relative[" "],l=o?1:0,d=_e((function(e){return e===t}),s,!0),u=_e((function(e){return P(t,e)>-1}),s,!0),h=[function(e,n,i){var a=!o&&(i||n!==c)||((t=n).nodeType?d(e,n,i):u(e,n,i));return t=null,a}];l<r;l++)if(n=i.relative[e[l].type])h=[_e(ge(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(a=++l;a<r&&!i.relative[e[a].type];a++);return ye(l>1&&ge(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),n,l<a&&be(e.slice(l,a)),a<r&&be(e=e.slice(a)),a<r&&me(e))}h.push(n)}return ge(h)}return pe.prototype=i.filters=i.pseudos,i.setFilters=new pe,o=ae.tokenize=function(e,t){var n,a,r,o,s,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(o in n&&!(a=z.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(r=[])),n=!1,(a=U.exec(s))&&(n=a.shift(),r.push({value:n,type:a[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(a=G[o].exec(s))||c[o]&&!(a=c[o](a))||(n=a.shift(),r.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):C(e,l).slice(0)},s=ae.compile=function(e,t){var n,a=[],r=[],s=M[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=be(t[n]))[b]?a.push(s):r.push(s);(s=M(e,function(e,t){var n=t.length>0,a=e.length>0,r=function(r,o,s,l,d){var u,p,_,g=0,v="0",y=r&&[],b=[],w=c,x=r||a&&i.find.TAG("*",d),S=k+=null==w?1:Math.random()||.1,C=x.length;for(d&&(c=o===f||o||d);v!==C&&null!=(u=x[v]);v++){if(a&&u){for(p=0,o||u.ownerDocument===f||(h(u),s=!m);_=e[p++];)if(_(u,o||f,s)){l.push(u);break}d&&(k=S)}n&&((u=!_&&u)&&g--,r&&y.push(u))}if(g+=v,n&&v!==g){for(p=0;_=t[p++];)_(y,b,o,s);if(r){if(g>0)for(;v--;)y[v]||b[v]||(b[v]=L.call(l));b=ve(b)}A.apply(l,b),d&&!r&&b.length>0&&g+t.length>1&&ae.uniqueSort(l)}return d&&(k=S,c=w),y};return n?oe(r):r}(r,a))).selector=e}return s},l=ae.select=function(e,t,a,r){var l,c,d,u,h,f="function"==typeof e&&e,p=!r&&o(e=f.selector||e);if(a=a||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(d=c[0]).type&&n.getById&&9===t.nodeType&&m&&i.relative[c[1].type]){if(!(t=(i.find.ID(d.matches[0].replace(te,ne),t)||[])[0]))return a;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=G.needsContext.test(e)?0:c.length;l--&&(d=c[l],!i.relative[u=d.type]);)if((h=i.find[u])&&(r=h(d.matches[0].replace(te,ne),Z.test(c[0].type)&&fe(t.parentNode)||t))){if(c.splice(l,1),!(e=r.length&&me(c)))return A.apply(a,r),a;break}}return(f||s(e,p))(r,t,!m,a,!t||Z.test(e)&&fe(t.parentNode)||t),a},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!u,h(),n.sortDetached=se((function(e){return 1&e.compareDocumentPosition(f.createElement("div"))})),se((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||le("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&se((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||le("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),se((function(e){return null==e.getAttribute("disabled")}))||le(Y,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ae}(n);m.find=w,m.expr=w.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=w.uniqueSort,m.text=w.getText,m.isXMLDoc=w.isXML,m.contains=w.contains;var k=function(e,t,n){for(var i=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&m(e).is(n))break;i.push(e)}return i},x=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=m.expr.match.needsContext,C=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,M=/^.[^:#\[\.,]*$/;function T(e,t,n){if(m.isFunction(t))return m.grep(e,(function(e,i){return!!t.call(e,i,e)!==n}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(M.test(t))return m.filter(t,e,n);t=m.filter(t,e)}return m.grep(e,(function(e){return d.call(t,e)>-1!==n}))}m.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?m.find.matchesSelector(i,e)?[i]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,n=this.length,i=[],a=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<n;t++)if(m.contains(a[t],this))return!0})));for(t=0;t<n;t++)m.find(e,a[t],i);return(i=this.pushStack(n>1?m.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&S.test(e)?m(e):e||[],!1).length}});var j,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t,n){var i,a;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:O.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(i[1])&&m.isPlainObject(t))for(i in t)m.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(a=o.getElementById(i[2]))&&a.parentNode&&(this.length=1,this[0]=a),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==n.ready?n.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,j=m(o);var D=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.fn.extend({has:function(e){var t=m(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,i=0,a=this.length,r=[],o=S.test(e)||"string"!=typeof e?m(e,t||this.context):0;i<a;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&m.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?m.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?d.call(m(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(n,i){var a=m.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=m.filter(i,a)),this.length>1&&(L[e]||m.uniqueSort(a),D.test(e)&&a.reverse()),this.pushStack(a)}}));var A,I=/\S+/g;function P(){o.removeEventListener("DOMContentLoaded",P),n.removeEventListener("load",P),m.ready()}m.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return m.each(e.match(I)||[],(function(e,n){t[n]=!0})),t}(e):m.extend({},e);var t,n,i,a,r=[],o=[],s=-1,l=function(){for(a=e.once,i=t=!0;o.length;s=-1)for(n=o.shift();++s<r.length;)!1===r[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=r.length,n=!1);e.memory||(n=!1),t=!1,a&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(s=r.length-1,o.push(n)),function t(n){m.each(n,(function(n,i){m.isFunction(i)?e.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==m.type(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return m.each(arguments,(function(e,t){for(var n;(n=m.inArray(t,r,n))>-1;)r.splice(n,1),n<=s&&s--})),this},has:function(e){return e?m.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return a=o=[],r=n="",this},disabled:function(){return!r},lock:function(){return a=o=[],n||(r=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(n){m.each(t,(function(t,r){var o=m.isFunction(e[t])&&e[t];a[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,o?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,i):i}},a={};return i.pipe=i.then,m.each(t,(function(e,r){var o=r[2],s=r[3];i[r[1]]=o.add,s&&o.add((function(){n=s}),t[1^e][2].disable,t[2][2].lock),a[r[0]]=function(){return a[r[0]+"With"](this===a?i:this,arguments),this},a[r[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,i,a=0,r=s.call(arguments),o=r.length,l=1!==o||e&&m.isFunction(e.promise)?o:0,c=1===l?e:m.Deferred(),d=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?s.call(arguments):a,i===t?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);a<o;a++)r[a]&&m.isFunction(r[a].promise)?r[a].promise().progress(d(a,n,t)).done(d(a,i,r)).fail(c.reject):--l;return l||c.resolveWith(i,r),c.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(A.resolveWith(o,[m]),m.fn.triggerHandler&&(m(o).triggerHandler("ready"),m(o).off("ready"))))}}),m.ready.promise=function(e){return A||(A=m.Deferred(),"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?n.setTimeout(m.ready):(o.addEventListener("DOMContentLoaded",P),n.addEventListener("load",P))),A.promise(e)},m.ready.promise();var Y=function(e,t,n,i,a,r,o){var s=0,l=e.length,c=null==n;if("object"===m.type(n))for(s in a=!0,n)Y(e,t,s,n[s],!0,r,o);else if(void 0!==i&&(a=!0,m.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(m(e),n)})),t))for(;s<l;s++)t(e[s],n,o?i:i.call(e[s],s,t(e[s],n)));return a?e:c?t.call(e):l?t(e[0],n):r},R=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function H(){this.expando=m.expando+H.uid++}H.uid=1,H.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!R(e))return{};var t=e[this.expando];return t||(t={},R(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,a=this.cache(e);if("string"==typeof t)a[t]=n;else for(i in t)a[i]=t[i];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,m.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,a,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{m.isArray(t)?i=t.concat(t.map(m.camelCase)):(a=m.camelCase(t),i=t in r?[t,a]:(i=a)in r?[i]:i.match(I)||[]),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||m.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!m.isEmptyObject(t)}};var N=new H,$=new H,F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function z(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(W,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:F.test(n)?m.parseJSON(n):n)}catch(e){}$.set(e,t,n)}else n=void 0;return n}m.extend({hasData:function(e){return $.hasData(e)||N.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return N.access(e,t,n)},_removeData:function(e,t){N.remove(e,t)}}),m.fn.extend({data:function(e,t){var n,i,a,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(a=$.get(r),1===r.nodeType&&!N.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),z(r,i,a[i]));N.set(r,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each((function(){$.set(this,e)})):Y(this,(function(t){var n,i;if(r&&void 0===t)return void 0!==(n=$.get(r,e)||$.get(r,e.replace(W,"-$&").toLowerCase()))?n:(i=m.camelCase(e),void 0!==(n=$.get(r,i))?n:void 0!==(n=z(r,i,void 0))?n:void 0);i=m.camelCase(e),this.each((function(){var n=$.get(this,i);$.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&$.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),m.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=N.get(e,t),n&&(!i||m.isArray(n)?i=N.access(e,t,m.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=m.queue(e,t),i=n.length,a=n.shift(),r=m._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete r.stop,a.call(e,(function(){m.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return N.get(e,n)||N.access(e,n,{empty:m.Callbacks("once memory").add((function(){N.remove(e,[t+"queue",n])}))})}}),m.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?m.queue(this[0],e):void 0===t?this:this.each((function(){var n=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=m.Deferred(),r=this,o=this.length,s=function(){--i||a.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=N.get(r[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),a.promise(t)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),B=["Top","Right","Bottom","Left"],q=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)};function G(e,t,n,i){var a,r=1,o=20,s=i?function(){return i.cur()}:function(){return m.css(e,t,"")},l=s(),c=n&&n[3]||(m.cssNumber[t]?"":"px"),d=(m.cssNumber[t]||"px"!==c&&+l)&&V.exec(m.css(e,t));if(d&&d[3]!==c){c=c||d[3],n=n||[],d=+l||1;do{d/=r=r||".5",m.style(e,t,d+c)}while(r!==(r=s()/l)&&1!==r&&--o)}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}var J=/^(?:checkbox|radio)$/i,K=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],n):n}function ee(e,t){for(var n=0,i=e.length;n<i;n++)N.set(e[n],"globalEval",!t||N.get(t[n],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var te,ne,ie=/<|&#?\w+;/;function ae(e,t,n,i,a){for(var r,o,s,l,c,d,u=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((r=e[f])||0===r)if("object"===m.type(r))m.merge(h,r.nodeType?[r]:r);else if(ie.test(r)){for(o=o||u.appendChild(t.createElement("div")),s=(K.exec(r)||["",""])[1].toLowerCase(),l=Q[s]||Q._default,o.innerHTML=l[1]+m.htmlPrefilter(r)+l[2],d=l[0];d--;)o=o.lastChild;m.merge(h,o.childNodes),(o=u.firstChild).textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",f=0;r=h[f++];)if(i&&m.inArray(r,i)>-1)a&&a.push(r);else if(c=m.contains(r.ownerDocument,r),o=Z(u.appendChild(r),"script"),c&&ee(o),n)for(d=0;r=o[d++];)X.test(r.type||"")&&n.push(r);return u}te=o.createDocumentFragment().appendChild(o.createElement("div")),(ne=o.createElement("input")).setAttribute("type","radio"),ne.setAttribute("checked","checked"),ne.setAttribute("name","t"),te.appendChild(ne),p.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue;var re=/^key/,oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,se=/^([^.]*)(?:\.(.+)|)/;function le(){return!0}function ce(){return!1}function de(){try{return o.activeElement}catch(e){}}function ue(e,t,n,i,a,r){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)ue(e,s,n,i,t[s],r);return e}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),!1===a)a=ce;else if(!a)return e;return 1===r&&(o=a,(a=function(e){return m().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=m.guid++)),e.each((function(){m.event.add(this,t,a,i,n)}))}m.event={global:{},add:function(e,t,n,i,a){var r,o,s,l,c,d,u,h,f,p,_,g=N.get(e);if(g)for(n.handler&&(n=(r=n).handler,a=r.selector),n.guid||(n.guid=m.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==m&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(I)||[""]).length;c--;)f=_=(s=se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(u=m.event.special[f]||{},f=(a?u.delegateType:u.bindType)||f,u=m.event.special[f]||{},d=m.extend({type:f,origType:_,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&m.expr.match.needsContext.test(a),namespace:p.join(".")},r),(h=l[f])||((h=l[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(f,o)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),m.event.global[f]=!0)},remove:function(e,t,n,i,a){var r,o,s,l,c,d,u,h,f,p,_,g=N.hasData(e)&&N.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(f=_=(s=se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(u=m.event.special[f]||{},h=l[f=(i?u.delegateType:u.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)d=h[r],!a&&_!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(r,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));o&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,p,g.handle)||m.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)m.event.remove(e,f+t[c],n,i,!0);m.isEmptyObject(l)&&N.remove(e,"handle events")}},dispatch:function(e){e=m.event.fix(e);var t,n,i,a,r,o=[],l=s.call(arguments),c=(N.get(this,"events")||{})[e.type]||[],d=m.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,e)){for(o=m.event.handlers.call(this,e,c),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(r=a.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(i=((m.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,a,r,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<s;n++)void 0===i[a=(r=t[n]).selector+" "]&&(i[a]=r.needsContext?m(a,this).index(l)>-1:m.find(a,this,null,[l]).length),i[a]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,a,r=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||o).documentElement,a=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,n,i,a=e.type,r=e,s=this.fixHooks[a];for(s||(this.fixHooks[a]=s=oe.test(a)?this.mouseHooks:re.test(a)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new m.Event(r),t=i.length;t--;)e[n=i[t]]=r[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==de()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===de()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},m.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?le:ce):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:ce,isPropagationStopped:ce,isImmediatePropagationStopped:ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,r=e.handleObj;return a&&(a===i||m.contains(i,a))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),m.fn.extend({on:function(e,t,n,i){return ue(this,e,t,n,i)},one:function(e,t,n,i){return ue(this,e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,m(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ce),this.each((function(){m.event.remove(this,e,n,t)}))}});var he=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,fe=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,me=/^true\/(.*)/,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ge(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ve(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ye(e){var t=me.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function be(e,t){var n,i,a,r,o,s,l,c;if(1===t.nodeType){if(N.hasData(e)&&(r=N.access(e),o=N.set(t,r),c=r.events))for(a in delete o.handle,o.events={},c)for(n=0,i=c[a].length;n<i;n++)m.event.add(t,a,c[a][n]);$.hasData(e)&&(s=$.access(e),l=m.extend({},s),$.set(t,l))}}function we(e,t,n,i){t=l.apply([],t);var a,r,o,s,c,d,u=0,h=e.length,f=h-1,_=t[0],g=m.isFunction(_);if(g||h>1&&"string"==typeof _&&!p.checkClone&&pe.test(_))return e.each((function(a){var r=e.eq(a);g&&(t[0]=_.call(this,a,r.html())),we(r,t,n,i)}));if(h&&(r=(a=ae(t,e[0].ownerDocument,!1,e,i)).firstChild,1===a.childNodes.length&&(a=r),r||i)){for(s=(o=m.map(Z(a,"script"),ve)).length;u<h;u++)c=a,u!==f&&(c=m.clone(c,!0,!0),s&&m.merge(o,Z(c,"script"))),n.call(e[u],c,u);if(s)for(d=o[o.length-1].ownerDocument,m.map(o,ye),u=0;u<s;u++)c=o[u],X.test(c.type||"")&&!N.access(c,"globalEval")&&m.contains(d,c)&&(c.src?m._evalUrl&&m._evalUrl(c.src):m.globalEval(c.textContent.replace(_e,"")))}return e}function ke(e,t,n){for(var i,a=t?m.filter(t,e):e,r=0;null!=(i=a[r]);r++)n||1!==i.nodeType||m.cleanData(Z(i)),i.parentNode&&(n&&m.contains(i.ownerDocument,i)&&ee(Z(i,"script")),i.parentNode.removeChild(i));return e}m.extend({htmlPrefilter:function(e){return e.replace(he,"<$1></$2>")},clone:function(e,t,n){var i,a,r,o,s,l,c,d=e.cloneNode(!0),u=m.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(o=Z(d),i=0,a=(r=Z(e)).length;i<a;i++)s=r[i],l=o[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&J.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(r=r||Z(e),o=o||Z(d),i=0,a=r.length;i<a;i++)be(r[i],o[i]);else be(e,d);return(o=Z(d,"script")).length>0&&ee(o,!u&&Z(e,"script")),d},cleanData:function(e){for(var t,n,i,a=m.event.special,r=0;void 0!==(n=e[r]);r++)if(R(n)){if(t=n[N.expando]){if(t.events)for(i in t.events)a[i]?m.event.remove(n,i):m.removeEvent(n,i,t.handle);n[N.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),m.fn.extend({domManip:we,detach:function(e){return ke(this,e,!0)},remove:function(e){return ke(this,e)},text:function(e){return Y(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return we(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ge(this,e).appendChild(e)}))},prepend:function(){return we(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ge(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return we(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return we(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(Z(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return Y(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!fe.test(e)&&!Q[(K.exec(e)||["",""])[1].toLowerCase()]){e=m.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(m.cleanData(Z(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return we(this,arguments,(function(t){var n=this.parentNode;m.inArray(this,e)<0&&(m.cleanData(Z(this)),n&&n.replaceChild(t,this))}),e)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var n,i=[],a=m(e),r=a.length-1,o=0;o<=r;o++)n=o===r?this:this.clone(!0),m(a[o])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var xe,Se={HTML:"block",BODY:"block"};function Ce(e,t){var n=m(t.createElement(e)).appendTo(t.body),i=m.css(n[0],"display");return n.detach(),i}function Me(e){var t=o,n=Se[e];return n||("none"!==(n=Ce(e,t))&&n||((t=(xe=(xe||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Ce(e,t),xe.detach()),Se[e]=n),n}var Te=/^margin/,je=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Oe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},De=function(e,t,n,i){var a,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in a=n.apply(e,i||[]),t)e.style[r]=o[r];return a},Le=o.documentElement;function Ee(e,t,n){var i,a,r,o,s=e.style;return""!==(o=(n=n||Oe(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==o||m.contains(e.ownerDocument,e)||(o=m.style(e,t)),n&&!p.pixelMarginRight()&&je.test(o)&&Te.test(t)&&(i=s.width,a=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=a,s.maxWidth=r),void 0!==o?o+"":o}function Ae(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,i,a,r=o.createElement("div"),s=o.createElement("div");function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Le.appendChild(r);var o=n.getComputedStyle(s);e="1%"!==o.top,a="2px"===o.marginLeft,t="4px"===o.width,s.style.marginRight="50%",i="4px"===o.marginRight,Le.removeChild(r)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(s),m.extend(p,{pixelPosition:function(){return l(),e},boxSizingReliable:function(){return null==t&&l(),t},pixelMarginRight:function(){return null==t&&l(),i},reliableMarginLeft:function(){return null==t&&l(),a},reliableMarginRight:function(){var e,t=s.appendChild(o.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",Le.appendChild(r),e=!parseFloat(n.getComputedStyle(t).marginRight),Le.removeChild(r),s.removeChild(t),e}}))}();var Ie=/^(none|table(?!-c[ea]).+)/,Pe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Re=["Webkit","O","Moz","ms"],He=o.createElement("div").style;function Ne(e){if(e in He)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Re.length;n--;)if((e=Re[n]+t)in He)return e}function $e(e,t,n){var i=V.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Fe(e,t,n,i,a){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;r<4;r+=2)"margin"===n&&(o+=m.css(e,n+B[r],!0,a)),i?("content"===n&&(o-=m.css(e,"padding"+B[r],!0,a)),"margin"!==n&&(o-=m.css(e,"border"+B[r]+"Width",!0,a))):(o+=m.css(e,"padding"+B[r],!0,a),"padding"!==n&&(o+=m.css(e,"border"+B[r]+"Width",!0,a)));return o}function We(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,r=Oe(e),o="border-box"===m.css(e,"boxSizing",!1,r);if(a<=0||null==a){if(((a=Ee(e,t,r))<0||null==a)&&(a=e.style[t]),je.test(a))return a;i=o&&(p.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+Fe(e,t,n||(o?"border":"content"),i,r)+"px"}function ze(e,t){for(var n,i,a,r=[],o=0,s=e.length;o<s;o++)(i=e[o]).style&&(r[o]=N.get(i,"olddisplay"),n=i.style.display,t?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(r[o]=N.access(i,"olddisplay",Me(i.nodeName)))):(a=q(i),"none"===n&&a||N.set(i,"olddisplay",a?n:m.css(i,"display"))));for(o=0;o<s;o++)(i=e[o]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[o]||"":"none"));return e}function Ue(e,t,n,i,a){return new Ue.prototype.init(e,t,n,i,a)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ee(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,o,s=m.camelCase(t),l=e.style;if(t=m.cssProps[s]||(m.cssProps[s]=Ne(s)||s),o=m.cssHooks[t]||m.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,i))?a:l[t];"string"==(r=typeof n)&&(a=V.exec(n))&&a[1]&&(n=G(e,t,a),r="number"),null!=n&&n==n&&("number"===r&&(n+=a&&a[3]||(m.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var a,r,o,s=m.camelCase(t);return t=m.cssProps[s]||(m.cssProps[s]=Ne(s)||s),(o=m.cssHooks[t]||m.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=Ee(e,t,i)),"normal"===a&&t in Ye&&(a=Ye[t]),""===n||n?(r=parseFloat(a),!0===n||isFinite(r)?r||0:a):a}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,n,i){if(n)return Ie.test(m.css(e,"display"))&&0===e.offsetWidth?De(e,Pe,(function(){return We(e,t,i)})):We(e,t,i)},set:function(e,n,i){var a,r=i&&Oe(e),o=i&&Fe(e,t,i,"border-box"===m.css(e,"boxSizing",!1,r),r);return o&&(a=V.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=m.css(e,t)),$e(0,n,o)}}})),m.cssHooks.marginLeft=Ae(p.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ee(e,"marginLeft"))||e.getBoundingClientRect().left-De(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),m.cssHooks.marginRight=Ae(p.reliableMarginRight,(function(e,t){if(t)return De(e,{display:"inline-block"},Ee,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(n){for(var i=0,a={},r="string"==typeof n?n.split(" "):[n];i<4;i++)a[e+B[i]+t]=r[i]||r[i-2]||r[0];return a}},Te.test(e)||(m.cssHooks[e+t].set=$e)})),m.fn.extend({css:function(e,t){return Y(this,(function(e,t,n){var i,a,r={},o=0;if(m.isArray(t)){for(i=Oe(e),a=t.length;o<a;o++)r[t[o]]=m.css(e,t[o],!1,i);return r}return void 0!==n?m.style(e,t,n):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){q(this)?m(this).show():m(this).hide()}))}}),m.Tween=Ue,Ue.prototype={constructor:Ue,init:function(e,t,n,i,a,r){this.elem=e,this.prop=n,this.easing=a||m.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(m.cssNumber[n]?"":"px")},cur:function(){var e=Ue.propHooks[this.prop];return e&&e.get?e.get(this):Ue.propHooks._default.get(this)},run:function(e){var t,n=Ue.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ue.propHooks._default.set(this),this}},Ue.prototype.init.prototype=Ue.prototype,Ue.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[m.cssProps[e.prop]]&&!m.cssHooks[e.prop]?e.elem[e.prop]=e.now:m.style(e.elem,e.prop,e.now+e.unit)}}},Ue.propHooks.scrollTop=Ue.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},m.fx=Ue.prototype.init,m.fx.step={};var Ve,Be,qe=/^(?:toggle|show|hide)$/,Ge=/queueHooks$/;function Je(){return n.setTimeout((function(){Ve=void 0})),Ve=m.now()}function Ke(e,t){var n,i=0,a={height:e};for(t=t?1:0;i<4;i+=2-t)a["margin"+(n=B[i])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function Xe(e,t,n){for(var i,a=(Qe.tweeners[t]||[]).concat(Qe.tweeners["*"]),r=0,o=a.length;r<o;r++)if(i=a[r].call(n,t,e))return i}function Qe(e,t,n){var i,a,r=0,o=Qe.prefilters.length,s=m.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var t=Ve||Je(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),r=0,o=c.tweens.length;r<o;r++)c.tweens[r].run(i);return s.notifyWith(e,[c,i,n]),i<1&&o?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ve||Je(),duration:n.duration,tweens:[],createTween:function(t,n){var i=m.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),d=c.props;for(function(e,t){var n,i,a,r,o;for(n in e)if(a=t[i=m.camelCase(n)],r=e[n],m.isArray(r)&&(a=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(o=m.cssHooks[i])&&"expand"in o)for(n in r=o.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=a);else t[i]=a}(d,c.opts.specialEasing);r<o;r++)if(i=Qe.prefilters[r].call(c,e,d,c.opts))return m.isFunction(i.stop)&&(m._queueHooks(c.elem,c.opts.queue).stop=m.proxy(i.stop,i)),i;return m.map(d,Xe,c),m.isFunction(c.opts.start)&&c.opts.start.call(e,c),m.fx.timer(m.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}m.Animation=m.extend(Qe,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return G(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.match(I);for(var n,i=0,a=e.length;i<a;i++)n=e[i],Qe.tweeners[n]=Qe.tweeners[n]||[],Qe.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,a,r,o,s,l,c,d=this,u={},h=e.style,f=e.nodeType&&q(e),p=N.get(e,"fxshow");for(i in n.queue||(null==(s=m._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,m.queue(e,"fx").length||s.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=m.css(e,"display"))?N.get(e,"olddisplay")||Me(e.nodeName):c)&&"none"===m.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),t)if(a=t[i],qe.exec(a)){if(delete t[i],r=r||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!p||void 0===p[i])continue;f=!0}u[i]=p&&p[i]||m.style(e,i)}else c=void 0;if(m.isEmptyObject(u))"inline"===("none"===c?Me(e.nodeName):c)&&(h.display=c);else for(i in p?"hidden"in p&&(f=p.hidden):p=N.access(e,"fxshow",{}),r&&(p.hidden=!f),f?m(e).show():d.done((function(){m(e).hide()})),d.done((function(){var t;for(t in N.remove(e,"fxshow"),u)m.style(e,t,u[t])})),u)o=Xe(f?p[i]:0,i,d),i in p||(p[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Qe.prefilters.unshift(e):Qe.prefilters.push(e)}}),m.speed=function(e,t,n){var i=e&&"object"==typeof e?m.extend({},e):{complete:n||!n&&t||m.isFunction(e)&&e,duration:e,easing:n&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=m.isEmptyObject(e),r=m.speed(t,n,i),o=function(){var t=Qe(this,m.extend({},e),r);(a||N.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",r=m.timers,o=N.get(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&Ge.test(a)&&i(o[a]);for(a=r.length;a--;)r[a].elem!==this||null!=e&&r[a].queue!==e||(r[a].anim.stop(n),t=!1,r.splice(a,1));!t&&n||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=N.get(this),i=n[e+"queue"],a=n[e+"queueHooks"],r=m.timers,o=i?i.length:0;for(n.finish=!0,m.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var n=m.fn[t];m.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ke(t,!0),e,i,a)}})),m.each({slideDown:Ke("show"),slideUp:Ke("hide"),slideToggle:Ke("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),m.timers=[],m.fx.tick=function(){var e,t=0,n=m.timers;for(Ve=m.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||m.fx.stop(),Ve=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Be||(Be=n.setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){n.clearInterval(Be),Be=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var a=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(a)}}))},function(){var e=o.createElement("input"),t=o.createElement("select"),n=t.appendChild(o.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=n.selected,t.disabled=!0,p.optDisabled=!n.disabled,(e=o.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Ze,et=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return Y(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,n){var i,a,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?m.prop(e,t,n):(1===r&&m.isXMLDoc(e)||(t=t.toLowerCase(),a=m.attrHooks[t]||(m.expr.match.bool.test(t)?Ze:void 0)),void 0!==n?null===n?void m.removeAttr(e,t):a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(i=a.get(e,t))?i:null==(i=m.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&m.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,a=0,r=t&&t.match(I);if(r&&1===e.nodeType)for(;n=r[a++];)i=m.propFix[n]||n,m.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),Ze={set:function(e,t,n){return!1===t?m.removeAttr(e,n):e.setAttribute(n,n),n}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=et[t]||m.find.attr;et[t]=function(e,t,i){var a,r;return i||(r=et[t],et[t]=a,a=null!=n(e,t,i)?t.toLowerCase():null,et[t]=r),a}}));var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;m.fn.extend({prop:function(e,t){return Y(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({prop:function(e,t,n){var i,a,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&m.isXMLDoc(e)||(t=m.propFix[t]||t,a=m.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=m.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var it=/[\t\r\n\f]/g;function at(e){return e.getAttribute&&e.getAttribute("class")||""}m.fn.extend({addClass:function(e){var t,n,i,a,r,o,s,l=0;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,at(this)))}));if("string"==typeof e&&e)for(t=e.match(I)||[];n=this[l++];)if(a=at(n),i=1===n.nodeType&&(" "+a+" ").replace(it," ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a!==(s=m.trim(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,a,r,o,s,l=0;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,at(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(I)||[];n=this[l++];)if(a=at(n),i=1===n.nodeType&&(" "+a+" ").replace(it," ")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a!==(s=m.trim(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(n){m(this).toggleClass(e.call(this,n,at(this),t),t)})):this.each((function(){var t,i,a,r;if("string"===n)for(i=0,a=m(this),r=e.match(I)||[];t=r[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=at(this))&&N.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":N.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+at(n)+" ").replace(it," ").indexOf(t)>-1)return!0;return!1}});var rt=/\r/g,ot=/[\x20\t\r\n\f]+/g;m.fn.extend({val:function(e){var t,n,i,a=this[0];return arguments.length?(i=m.isFunction(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=i?e.call(this,n,m(this).val()):e)?a="":"number"==typeof a?a+="":m.isArray(a)&&(a=m.map(a,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=m.valHooks[a.type]||m.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(rt,""):null==n?"":n:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e)).replace(ot," ")}},select:{get:function(e){for(var t,n,i=e.options,a=e.selectedIndex,r="select-one"===e.type||a<0,o=r?null:[],s=r?a+1:i.length,l=a<0?s:r?a:0;l<s;l++)if(((n=i[l]).selected||l===a)&&(p.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!m.nodeName(n.parentNode,"optgroup"))){if(t=m(n).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var n,i,a=e.options,r=m.makeArray(t),o=a.length;o--;)((i=a[o]).selected=m.inArray(m.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>-1}},p.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var st=/^(?:focusinfocus|focusoutblur)$/;m.extend(m.event,{trigger:function(e,t,i,a){var r,s,l,c,d,u,h,p=[i||o],_=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(s=l=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!st.test(_+m.event.triggered)&&(_.indexOf(".")>-1&&(g=_.split("."),_=g.shift(),g.sort()),d=_.indexOf(":")<0&&"on"+_,(e=e[m.expando]?e:new m.Event(_,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:m.makeArray(t,[e]),h=m.event.special[_]||{},a||!h.trigger||!1!==h.trigger.apply(i,t))){if(!a&&!h.noBubble&&!m.isWindow(i)){for(c=h.delegateType||_,st.test(c+_)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(i.ownerDocument||o)&&p.push(l.defaultView||l.parentWindow||n)}for(r=0;(s=p[r++])&&!e.isPropagationStopped();)e.type=r>1?c:h.bindType||_,(u=(N.get(s,"events")||{})[e.type]&&N.get(s,"handle"))&&u.apply(s,t),(u=d&&s[d])&&u.apply&&R(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=_,a||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!R(i)||d&&m.isFunction(i[_])&&!m.isWindow(i)&&((l=i[d])&&(i[d]=null),m.event.triggered=_,i[_](),m.event.triggered=void 0,l&&(i[d]=l)),e.result}},simulate:function(e,t,n){var i=m.extend(new m.Event,n,{type:e,isSimulated:!0});m.event.trigger(i,null,t)}}),m.fn.extend({trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return m.event.trigger(e,t,n,!0)}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),p.focusin="onfocusin"in n,p.focusin||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){m.event.simulate(t,e.target,m.event.fix(e))};m.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=N.access(i,t);a||i.addEventListener(e,n,!0),N.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=N.access(i,t)-1;a?N.access(i,t,a):(i.removeEventListener(e,n,!0),N.remove(i,t))}}}));var lt=n.location,ct=m.now(),dt=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var ut=/#.*$/,ht=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:GET|HEAD)$/,mt=/^\/\//,_t={},gt={},vt="*/".concat("*"),yt=o.createElement("a");function bt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,r=t.toLowerCase().match(I)||[];if(m.isFunction(n))for(;i=r[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function wt(e,t,n,i){var a={},r=e===gt;function o(s){var l;return a[s]=!0,m.each(e[s]||[],(function(e,s){var c=s(t,n,i);return"string"!=typeof c||r||a[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),l}return o(t.dataTypes[0])||!a["*"]&&o("*")}function kt(e,t){var n,i,a=m.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&m.extend(!0,e,i),e}yt.href=lt.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?kt(kt(e,m.ajaxSettings),t):kt(m.ajaxSettings,e)},ajaxPrefilter:bt(_t),ajaxTransport:bt(gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,a,r,s,l,c,d,u,h=m.ajaxSetup({},t),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?m(f):m.event,_=m.Deferred(),g=m.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!s)for(s={};t=ft.exec(r);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||k;return i&&i.abort(t),S(0,t),this}};if(_.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||lt.href)+"").replace(ut,"").replace(mt,lt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=m.trim(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain){c=o.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=yt.protocol+"//"+yt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=m.param(h.data,h.traditional)),wt(_t,h,t,x),2===w)return x;for(u in(d=m.event&&h.global)&&0==m.active++&&m.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!pt.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(dt.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ht.test(a)?a.replace(ht,"$1_="+ct++):a+(dt.test(a)?"&":"?")+"_="+ct++)),h.ifModified&&(m.lastModified[a]&&x.setRequestHeader("If-Modified-Since",m.lastModified[a]),m.etag[a]&&x.setRequestHeader("If-None-Match",m.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+vt+"; q=0.01":""):h.accepts["*"]),h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(f,x,h)||2===w))return x.abort();for(u in k="abort",{success:1,error:1,complete:1})x[u](h[u]);if(i=wt(gt,h,t,x)){if(x.readyState=1,d&&p.trigger("ajaxSend",[x,h]),2===w)return x;h.async&&h.timeout>0&&(l=n.setTimeout((function(){x.abort("timeout")}),h.timeout));try{w=1,i.send(y,S)}catch(e){if(!(w<2))throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,s){var c,u,y,b,k,S=t;2!==w&&(w=2,l&&n.clearTimeout(l),i=void 0,r=s||"",x.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var i,a,r,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){r=a;break}o||(o=a)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}(h,x,o)),b=function(e,t,n,i){var a,r,o,s,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(r=d.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=c[l+" "+r]||c["* "+r]))for(a in c)if((s=a.split(" "))[1]===r&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(r=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(h,b,x,c),c?(h.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(m.lastModified[a]=k),(k=x.getResponseHeader("etag"))&&(m.etag[a]=k)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,u=b.data,c=!(y=b.error))):(y=S,!e&&S||(S="error",e<0&&(e=0))),x.status=e,x.statusText=(t||S)+"",c?_.resolveWith(f,[u,S,x]):_.rejectWith(f,[x,S,y]),x.statusCode(v),v=void 0,d&&p.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?u:y]),g.fireWith(f,[x,S]),d&&(p.trigger("ajaxComplete",[x,h]),--m.active||m.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return m.get(e,t,n,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,n,i,a){return m.isFunction(n)&&(a=a||i,i=n,n=void 0),m.ajax(m.extend({url:e,type:t,dataType:a,data:n,success:i},m.isPlainObject(e)&&e))}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(n){m(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return!m.expr.filters.visible(e)},m.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var xt=/%20/g,St=/\[\]$/,Ct=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,i){var a;if(m.isArray(t))m.each(t,(function(t,a){n||St.test(e)?i(e,a):jt(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,i)}));else if(n||"object"!==m.type(t))i(e,t);else for(a in t)jt(e+"["+a+"]",t[a],n,i)}m.param=function(e,t){var n,i=[],a=function(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){a(this.name,this.value)}));else for(n in e)jt(n,e[n],t,a);return i.join("&").replace(xt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&Tt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!J.test(e))})).map((function(e,t){var n=m(this).val();return null==n?null:m.isArray(n)?m.map(n,(function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}})):{name:t.name,value:n.replace(Ct,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ot={0:200,1223:204},Dt=m.ajaxSettings.xhr();p.cors=!!Dt&&"withCredentials"in Dt,p.ajax=Dt=!!Dt,m.ajaxTransport((function(e){var t,i;if(p.cors||Dt&&!e.crossDomain)return{send:function(a,r){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Ot[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(i,a){t=m("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Lt=[],Et=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||m.expando+"_"+ct++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,i){var a,r,o,s=!1!==e.jsonp&&(Et.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Et.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Et,"$1"+a):!1!==e.jsonp&&(e.url+=(dt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||m.error(a+" was not called"),o[0]},e.dataTypes[0]="json",r=n[a],n[a]=function(){o=arguments},i.always((function(){void 0===r?m(n).removeProp(a):n[a]=r,e[a]&&(e.jsonpCallback=t.jsonpCallback,Lt.push(a)),o&&m.isFunction(r)&&r(o[0]),o=r=void 0})),"script"})),m.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var i=C.exec(e),a=!n&&[];return i?[t.createElement(i[1])]:(i=ae([e],t,a),a&&a.length&&m(a).remove(),m.merge([],i.childNodes))};var At=m.fn.load;function It(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.fn.load=function(e,t,n){if("string"!=typeof e&&At)return At.apply(this,arguments);var i,a,r,o=this,s=e.indexOf(" ");return s>-1&&(i=m.trim(e.slice(s)),e=e.slice(0,s)),m.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&m.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){r=arguments,o.html(i?m("<div>").append(m.parseHTML(e)).find(i):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length},m.offset={setOffset:function(e,t,n){var i,a,r,o,s,l,c=m.css(e,"position"),d=m(e),u={};"static"===c&&(e.style.position="relative"),s=d.offset(),r=m.css(e,"top"),l=m.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(o=(i=d.position()).top,a=i.left):(o=parseFloat(r)||0,a=parseFloat(l)||0),m.isFunction(t)&&(t=t.call(e,n,m.extend({},s))),null!=t.top&&(u.top=t.top-s.top+o),null!=t.left&&(u.left=t.left-s.left+a),"using"in t?t.using.call(e,u):d.css(u)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,n,i=this[0],a={top:0,left:0},r=i&&i.ownerDocument;return r?(t=r.documentElement,m.contains(t,i)?(a=i.getBoundingClientRect(),n=It(r),{top:a.top+n.pageYOffset-t.clientTop,left:a.left+n.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===m.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(i=e.offset()),i.top+=m.css(e[0],"borderTopWidth",!0),i.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-m.css(n,"marginTop",!0),left:t.left-i.left-m.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Le}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;m.fn[e]=function(i){return Y(this,(function(e,i,a){var r=It(e);if(void 0===a)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:a,n?a:r.pageYOffset):e[i]=a}),e,i,arguments.length)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Ae(p.pixelPosition,(function(e,n){if(n)return n=Ee(e,t),je.test(n)?m(e).position()[t]+"px":n}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){m.fn[i]=function(i,a){var r=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===a?"margin":"border");return Y(this,(function(t,n,i){var a;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?m.css(t,n,o):m.style(t,n,i,o)}),t,r?i:void 0,r,null)}}))})),m.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),m.fn.andSelf=m.fn.addBack,void 0===(i=function(){return m}.apply(t,[]))||(e.exports=i);var Pt=n.jQuery,Yt=n.$;return m.noConflict=function(e){return n.$===m&&(n.$=Yt),e&&n.jQuery===m&&(n.jQuery=Pt),m},a||(n.jQuery=n.$=m),m},"object"==typeof e.exports?e.exports=a.document?r(a,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(a)},,function(e,t,n){"use strict";t.a=function(e){var t=document.createElement("p");t.textContent=e,t.setAttribute("role","alert"),document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),2e3)}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o).a.View.extend({className:"ui-modal",optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,xlarge:!1,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(e){this.options=r.default.defaults(e||{},this.optionsDefault),a()(this.options.container).prepend(this.el),e&&this.render()},show:function(e){var t=this;e&&(this.options=r.default.defaults(e,this.optionsDefault),this.render()),this.visible||(this.visible=!0,this.$el.fadeIn("fast")),this.options.closing_events&&(a()(document).on("keyup.ui-modal",(function(e){27==e.keyCode&&t.hide(!0)})),this.$backdrop.on("click",(function(){t.hide(!0)}))),this.$el.find(".title").focus()},hide:function(e){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(e),a()(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var e=this;if(this.$el.html(this._template()),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.options.extra_class&&this.$dialog.addClass(this.options.extra_class),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),"progress"==this.options.body&&(this.options.body=a()('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var t=0;a.a.each(this.options.buttons,(function(n,i){var r=a()("<button/>").attr("id","button-".concat(t++)).text(n).click(i);e.$buttons.append(r).append("&nbsp;"),e.buttonList[n]=r}))}else this.$footer.hide();this.$backdrop[this.options.backdrop?"addClass":"removeClass"]("in"),this.$header[this.options.title_separator?"removeClass":"addClass"]("no-separator"),this.$body.removeAttr("style"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",a()(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width),this.options.xlarge&&this.$dialog.css("max-width","3000px")},getButton:function(e){return this.buttonList[e]},enableButton:function(e){this.getButton(e).prop("disabled",!1)},disableButton:function(e){this.getButton(e).prop("disabled",!0)},showButton:function(e){this.getButton(e).show()},hideButton:function(e){this.getButton(e).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title" tabindex="0"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div>'}});t.a={View:s}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n(795),a=n(221);function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s=new i.a([]),l=s.pipe(Object(a.a)((function(e){return e.length>0}))),c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=[].concat(r(s.getValue()),t);s.next(i)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=[].concat(t,r(s.getValue()));s.next(i)},u=function(){return s.next([])}},function(e,t,n){"use strict";t.a={name:"production",debug:!1,rxjsDebug:!1,caching:{adapter:"idb",revs_limit:1,pageSize:60}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=n(7),s=n.n(o),l=n(21);function c(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h;var f,p=function(e){return function(t,n){return t.id==e?-1:n.id==e?1:t.text>n.text?1:t.text<n.text?-1:0}};function m(){var e;return e=regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object(r.getAppRoot)(),"api/remote_files?target=").concat(t),e.prev=1,e.next=4,s.a.get(n);case 4:return i=e.sent,a=i.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),Object(l.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})),(m=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){c(r,i,a,o,s,"next",e)}function s(e){c(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}t.a={AUTO_EXTENSION:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be.  You can also upload compressed files, which will automatically be decompressed."},DEFAULT_GENOME:"?",DEFAULT_EXTENSION:"auto",getRemoteFiles:function(e,t){return a.a.ajax({url:"".concat(Object(r.getAppRoot)(),"api/remote_files"),method:"GET",success:e,error:t})},getRemoteFilesAt:function(e){return m.apply(this,arguments)},getUploadDatatypes:function(e,t){return function(){if(h)return Promise.resolve(h);var e="".concat(Object(r.getAppRoot)(),"api/datatypes?extension_only=False");return s.a.get(e).then((function(e){var t=e.data,n=[];for(var i in t)n.push({id:t[i].extension,text:t[i].extension,description:t[i].description,description_url:t[i].description_url,composite_files:t[i].composite_files});return n.sort((function(e,t){var n=e.text&&e.text.toLowerCase(),i=t.text&&t.text.toLowerCase();return n>i?1:n<i?-1:0})),n})).then((function(e){return h=e,e}))}().then((function(n){var i=d(n);return e||i.unshift(t),i}))},getUploadGenomes:function(e){return function(){if(f)return Promise.resolve(f);var e="".concat(Object(r.getAppRoot)(),"api/genomes");return s.a.get(e).then((function(e){var t=e.data,n=[];for(var i in t)n.push({id:t[i][1],text:t[i][0]});return n})).then((function(e){return f=e,e}))}().then((function(t){var n=d(t);return n.sort(p(e)),n}))}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(51),c=n(6),d=s.a.Model.extend({initialize:function(e){var t=this.get("key");this.set("id",t);var n=r.default.find([{key:"name",label:"Name",type:"text",default_value:""},{key:"color",label:"Color",type:"color",default_value:null},{key:"min_value",label:"Min Value",type:"float",default_value:null},{key:"max_value",label:"Max Value",type:"float",default_value:null},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:32,hidden:!0},{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"block_color",label:"Block color",type:"color",default_value:null},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"reverse_strand_color",label:"Antisense strand color",type:"color",default_value:null},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0}],(function(e){return e.key===t}));n&&this.set(r.default.extend({},n,e)),void 0===this.get("value")&&void 0!==this.get("default_value")&&(this.set_value(this.get("default_value")),this.get("value")||"color"!==this.get("type")||this.set("value",l.a.get_random_color()))},set_value:function(e,t){var n=this.get("type");"float"===n?e=parseFloat(e):"int"===n&&(e=parseInt(e,10)),this.set({value:e},t)}}),u=s.a.Collection.extend({model:d,to_key_value_dict:function(){var e={};return this.each((function(t){e[t.get("key")]=t.get("value")})),e},get_value:function(e){var t=this.get(e);if(t)return t.get("value")},set_value:function(e,t,n){var i=this.get(e);if(i)return i.set_value(t,n)},set_default_value:function(e,t){var n=this.get(e);if(n)return n.set("default_value",t)}},{from_models_and_saved_values:function(e,t){return t&&(e=r.default.map(e,(function(e){return r.default.extend({},e,{value:t[e.key]})}))),new u(e)}}),h=s.a.View.extend({className:"config-settings-view",render:function(){var e=this.$el;return this.collection.each((function(t,n){if(!t.get("hidden")){var i,o="param_".concat(n),s=t.get("type"),c=t.get("value"),d=a()("<div class='form-row' />").appendTo(e);if(d.append(a()("<label />").attr("for",o).text("".concat(t.get("label"),":"))),"bool"===s)d.append(a()('<input type="checkbox" />').attr("id",o).attr("name",o).attr("checked",c));else if("text"===s)d.append(a()('<input type="text"/>').attr("id",o).val(c).click((function(){a()(this).select()})));else if("select"===s){var u=a()("<select />").attr("id",o);r.default.each(t.get("options"),(function(e){a()("<option/>").text(e.label).attr("value",e.value).appendTo(u)})),u.val(c),d.append(u)}else if("color"===s){var h=a()("<div/>").appendTo(d),f=a()("<input />").attr("id",o).attr("name",o).val(c).css("float","left").appendTo(h).click((function(e){a()(".tooltip").removeClass("in");var t=a()(this).siblings(".tooltip").addClass("in");t.css({left:a()(this).position().left+a()(this).width()+5,top:a()(this).position().top-a()(t).height()/2+a()(this).height()/2}).show(),t.click((function(e){e.stopPropagation()})),a()(document).bind("click.color-picker",(function(){t.hide(),a()(document).unbind("click.color-picker")})),e.stopPropagation()})),p=a()("<a href='javascript:void(0)'/>").addClass("icon-button arrow-circle").appendTo(h).attr("title","Set new random color").tooltip(),m=a()("<div class='tooltip right' style='position: absolute;' />").appendTo(h).hide(),_=a()("<div class='tooltip-inner' style='text-align: inherit'></div>").appendTo(m);a()("<div class='tooltip-arrow'></div>").appendTo(m);var g=a.a.farbtastic(_,{width:100,height:100,callback:f,color:c});h.append(a()("<div/>").css("clear","both")),i=g,p.click((function(){i.setColor(l.a.get_random_color())}))}else d.append(a()("<input />").attr("id",o).attr("name",o).val(c));t.help&&d.append(a()("<div class='help'/>").text(t.help))}})),this},render_in_modal:function(e){var t=this,n=Object(c.a)(),i=function(){n.modal.hide(),a()(window).unbind("keypress.check_enter_esc")},r=function(){n.modal.hide(),a()(window).unbind("keypress.check_enter_esc"),t.update_from_form()};a()(window).bind("keypress.check_enter_esc",(function(e){27===(e.keyCode||e.which)?i():13===(e.keyCode||e.which)&&r()})),0===this.$el.children().length&&this.render(),n.modal.show({title:e||"Configure",body:this.$el,buttons:{Cancel:i,OK:r}})},update_from_form:function(){var e=this;this.collection.each((function(t,n){if(!t.get("hidden")){var i="param_".concat(n),a=e.$el.find("#".concat(i)).val();"bool"===t.get("type")&&(a=e.$el.find("#".concat(i)).is(":checked")),t.set_value(a)}}))}});t.a={ConfigSetting:d,ConfigSettingCollection:u,ConfigSettingCollectionView:h}},,function(e,t,n){"use strict";var i=n(4),a=n.n(i),r=n(1),o=n(10),s=a.a.View.extend({optionsDefault:{css:"",placeholder:"No data available",data:[],value:null,multiple:!1,minimumInputLength:0,maximumTextLength:100,initialData:""},initialize:function(e){if(this.options=o.a.merge(e,this.optionsDefault),this.setElement(this._template(this.options)),this.options.container){if(this.options.container.append(this.$el),this.select_data=this.options.data,this._refresh(),!this.options.multiple){this.options.value&&this._setValue(this.options.value);var t=this;this.options.onchange&&this.$el.on("change",(function(){t.options.onchange(t.value())}))}}else console.log("ui-select::initialize() : container not specified.")},value:function(e){var t=this._getValue();void 0!==e&&this._setValue(e);var n=this._getValue();return n!=t&&this.options.onchange&&this.options.onchange(n),n},text:function(){return this.$el.select2("data").text},disabled:function(){return!this.$el.select2("enable")},enable:function(){this.$el.select2("enable",!0)},disable:function(){this.$el.select2("enable",!1)},add:function(e){this.select_data.push({id:e.id,text:e.text}),this._refresh()},del:function(e){var t=this._getIndex(e);-1!=t&&(this.select_data.splice(t,1),this._refresh())},remove:function(){this.$el.select2("destroy")},update:function(e){for(var t in this.select_data=[],e.data)this.select_data.push(e.data[t]);this._refresh()},_refresh:function(){var e,t=this;if(this.options.multiple)e={multiple:this.options.multiple,containerCssClass:this.options.css,placeholder:this.options.placeholder,minimumInputLength:this.options.minimumInputLength,ajax:this.options.ajax,dropdownCssClass:this.options.dropdownCssClass,escapeMarkup:this.options.escapeMarkup,formatResult:this.options.formatResult,formatSelection:this.options.formatSelection,initSelection:this.options.initSelection,initialData:this.options.initialData},this.$el.select2(e);else{this.select_data&&this.select_data.map((function(e){var n=t.options.maximumTextLength+3;if(e.text&&e.text.length>n){var i=e.text.indexOf("(".concat(e.id,")"));i=-1!=i&&i<n?i:n;var a=e.text.substring(0,i).replace(/[ .]*$/,"");e.text="".concat(a,"...(").concat(e.id,")")}}));var n=this._getValue();e={data:this.select_data,containerCssClass:this.options.css,placeholder:this.options.placeholder,dropdownAutoWidth:!0},this.$el.select2(e),this._setValue(n)}},_getIndex:function(e){r.default.findIndex(this.select_data,{id:e})},_getValue:function(){return this.$el.select2("val")},_setValue:function(e){-1==this._getIndex(e)&&this.select_data.length>0&&(e=this.select_data[0].id),this.$el.select2("val",e)},_template:function(e){return'<input type="hidden" value="'.concat(this.options.initialData,'"/>')}});t.a={View:s}},function(e,t,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=n(6);n(286);var s=function(e,t){return function(n,i){return n.has(e)||i.has(e)?n.has(e)?i.has(e)?("number"==typeof n.get(e)?(a=n.get(e),r=i.get(e)):(a=n.get(e).toLowerCase(),r=i.get(e).toLowerCase()),a>r?"asc"===t?1:-1:r>a?"asc"===t?-1:1:0):-1:1:0;var a,r}},l=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries/"),isVisible:function(e){var t=!0;return!e&&this.get("deleted")&&(t=!1),t}}),c=a.a.Collection.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries"),model:l,initialize:function(e){e=e||{}},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.filter((function(e){return-1!==e.get("name").toLowerCase().indexOf(t)}))},getVisible:function(e,t){return t=t||[],new c(this.filter((function(t){return t.isVisible(e)})))},sortLibraries:function(e,t){this.comparator=s(e,t),this.sort()}}),d=a.a.Model.extend({}),u=d.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries/datasets/")}),h=d.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/folders/")}),f=a.a.Collection.extend({model:d}),p=a.a.Model.extend({defaults:{folder:new f,urlRoot:"".concat(Object(r.getAppRoot)(),"api/folders/"),id:"unknown"},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.get("folder").filter((function(e){return-1!==e.get("name").toLowerCase().indexOf(t)}))},sortFolder:function(e,t){return this.get("folder").comparator=s(e,t),this.get("folder").sort(),this.get("folder")},parse:function(e){var t=Object(o.a)();this.get("folder").reset();for(var n=0;n<e.folder_contents.length;n++)if("folder"===e.folder_contents[n].type){var i=new h(e.folder_contents[n]);this.get("folder").add(i)}else if("file"===e.folder_contents[n].type){var a=new u(e.folder_contents[n]);this.get("folder").add(a)}else t.emit.error("Unknown folder item type encountered while parsing response.");return e}}),m=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/")}),_=a.a.Collection.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/"),initialize:function(e){this.id=e.id},url:function(){return"".concat(this.urlRoot+this.id,"/contents")},model:m}),g=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/")}),v=a.a.Collection.extend({url:"".concat(Object(r.getAppRoot)(),"api/histories"),model:g}),y=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/remote_files")});t.a={Library:l,Libraries:c,Item:u,Ldda:u,FolderAsModel:h,Folder:f,FolderContainer:p,HistoryItem:m,HistoryContents:_,GalaxyHistory:g,GalaxyHistories:v,Jstree:y}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(12),o=n(16);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.dragging=!1,this.innerClass="ribbon-inner",this.canvas=document.createElement("div"),this.canvas.style.position="absolute",document.getElementById("canvas-container").appendChild(this.canvas),this.svg=r.select(this.canvas).append("svg"),this.svg.attr("class","ribbon"),n&&i&&this.connect(n,i)}var t,n,i;return t=e,(n=[{key:"connect",value:function(e,t){var n,i;this.outputHandle=e,null===(n=this.outputHandle)||void 0===n||n.connect(this),this.inputHandle=t,null===(i=this.inputHandle)||void 0===i||i.connect(this)}},{key:"destroy",value:function(){var e,t;null===(e=this.outputHandle)||void 0===e||e.disconnect(this),null===(t=this.inputHandle)||void 0===t||t.disconnect(this),this.canvas.remove()}},{key:"destroyIfInvalid",value:function(e){this.outputHandle&&this.inputHandle&&!this.inputHandle.attachable(this.outputHandle).canAccept&&(e&&o.a.warning("Destroying a connection because collection type has changed."),this.destroy())}},{key:"dropStart",value:function(e){this.innerClass=e?"ribbon-inner-valid":"ribbon-inner-invalid"}},{key:"dropEnd",value:function(){this.innerClass="ribbon-inner"}},{key:"redraw",value:function(){var e=this.outputHandle,t=this.inputHandle;if(e&&t){var n=a()("#canvas-container"),i=this.manager.canvasZoom;this.dragging&&(this.canvas.style.zIndex=1e3);var r=function(e){return(a()(e).offset().left-n.offset().left)/i},o=function(e){return(a()(e).offset().top-n.offset().top)/i};if(e&&t){this.canvas.setAttribute("output-handle-id",e.element.getAttribute("id")),this.canvas.setAttribute("input-handle-id",t.element.getAttribute("id"));var s=r(e.element)+8,l=o(e.element)+.5*a()(e.element).height(),c=r(t.element)+8,d=o(t.element)+.5*a()(t.element).height(),u=Math.min(s,c),h=Math.max(s,c),f=Math.min(l,d),p=Math.max(l,d),m=u-100,_=f-100,g=h-u+200,v=p-f+200;this.canvas.style.left="".concat(m,"px"),this.canvas.style.top="".concat(_,"px"),this.svg.style("width","".concat(g,"px")),this.svg.style("height","".concat(v,"px")),s-=m,l-=_,c-=m,d-=_;var y=Math.min(Math.max(Math.abs(p-f)/2,10),30);this.drawRibbon(e,t,y,s,l,c,d)}}}},{key:"drawRibbon",value:function(e,t,n,i,a,r,o){var s=e&&e.isMappedOver(),l=t&&t.isMappedOver(),c=[0],d=[0],u=[-8,-4,0,4,8],h=1;s&&(c=u,h=u.length),l&&(d=u,h=u.length),this.svg.selectAll("*").remove();for(var f=0;f<h;f++){var p=4,m=6;(c.length>1||d.length>1)&&(p=1,m=3),this.drawCurve(i,a,r,o,n,p,m,c[f%c.length],d[f%d.length])}}},{key:"drawCurve",value:function(e,t,n,i,a,o,s,l,c){var d=[{x:e,y:t+(l=l||0)},{x:e+a,y:t+l},{x:n-a,y:i+(c=c||0)},{x:n,y:i+c}],u=r.svg.line().x((function(e){return e.x})).y((function(e){return e.y})).interpolate("basis");this.svg.append("path").attr("class","ribbon-outer").attr("d",u(d)).attr("stroke-width",s).attr("fill","none"),this.svg.append("path").attr("class",this.innerClass).attr("d",u(d)).attr("stroke-width",o).attr("fill","none")}}])&&s(t.prototype,n),i&&s(t,i),e}();t.a=l},function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(2),s=n.n(o),l=n(6),c=s()("Please contact a Galaxy administrator if the problem persists."),d=s()("An error occurred while updating information with the server."),u=s()("The following information can assist the developers in finding the source of the error:");function h(e,t,n){if(e){var i=Object(l.a)();if(e=s()(e),t=s()(t)||s()("Error:"),i&&i.modal)return function(e,t,n){var i=Object(l.a)();return i.modal.show({title:t,body:e,closing_events:!0,buttons:{Ok:function(){i.modal.hide()}}}),i.modal.$el.addClass("error-modal"),n&&(i.modal.$(".error-details").add(i.modal.$('button:contains("Details")')).remove(),r()("<div/>").addClass("error-details").hide().appendTo(i.modal.$(".modal-content")).append([r()("<p/>").text(u),r()("<pre/>").text(JSON.stringify(n,null,"  "))]),r()('<button id="button-1" class="float-left">'.concat(s()("Details"),"</button>")).appendTo(i.modal.$(".buttons")).click((function(){i.modal.$(".error-details").toggle()}))),i.modal}(e,t,n);alert("".concat(t,"\n\n").concat(e)),console.log("error details:",JSON.stringify(n))}}t.a={errorModal:h,offlineErrorModal:function(){return h(s()("You appear to be offline. Please check your connection and try again."),s()("Offline?"))},badGatewayErrorModal:function(){return h("".concat(s()("Galaxy is currently unreachable. Please try again in a few minutes.")," ").concat(c),s()("Cannot connect to Galaxy"))},ajaxErrorModal:function(e,t,n,a,r){return a=a||d,h(a+=" ".concat(c),r=r||s()("An error occurred"),function(e,t,n){var a=Object(l.a)();return{sentry:null==a?void 0:a.Sentry.lastEventId(),userAgent:navigator.userAgent,onLine:navigator.onLine,version:i.default.result(a.config,"version_major"),xhr:i.default.omit(t,i.default.functions(t)),options:i.default.omit(n,"xhr"),url:i.default.result(a.lastAjax,"url"),data:i.default.result(a.lastAjax,"data"),model:i.default.result(e,"toJSON","".concat(e)),user:i.default.omit(i.default.result(a.user,"toJSON"),"email")}}(e,t,n))}}},,function(e,t,n){"use strict";var i=n(4),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(6),c=n(10),d=a.a.Model.extend({defaults:{url_base:"",title_id:void 0,async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},add_filter:function(e,t,n){if(n){var i,a=this.attributes.filters[e];if(null==a)i=t;else if("string"==typeof a)if("All"==a||a==t)i=t;else{var r=[];r[0]=a,r[1]=t,i=r}else-1===(i=a).indexOf(t)&&i.push(t);this.attributes.filters[e]=i}else this.attributes.filters[e]=t},remove_filter:function(e,t){var n=this.attributes.filters[e];if(null==n)return!1;if("string"==typeof n)this.attributes.filters[e]="";else{var i=r.default.indexOf(n,t);-1!==i&&(n[i]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return r.default.each(r.default.pairs(this.attributes.filters),(function(t){e["f-".concat(t[0])]=t[1]})),e},get_url:function(e){return"".concat(this.get("url_base"),"?").concat(s.a.param(this.get_url_data()),"&").concat(s.a.param(e))}});function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f={grid:function(e){var t;return t=e.embedded?this.grid_header(e)+this.grid_table(e):'\n                <div class="loading-elt-overlay"></div>\n                <table class="grid-table">\n                    <tr>\n                        <td width="75%">'.concat(this.grid_header(e),'</td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td width="100%" id="grid-message" valign="top"></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </table>\n                ').concat(this.grid_table(e),"\n            "),e.info_text&&(t+='<br><div class="toolParamHelp" style="clear: both;">'.concat(e.info_text,"</div>")),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(!e.embedded){var n="";e.title_id&&(n+=' id="'.concat(e.title_id,'"')),t+="<h2".concat(n,">").concat(e.title,"</h2>")}if(e.global_actions){t+='<ul class="manage-table-actions">';var i=e.global_actions.length>=3;i&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var a,r=u(e.global_actions);try{for(r.s();!(a=r.n()).done;){var o=a.value;t+='<li><a class="action-button use-target" target="'.concat(o.target,'" href="').concat(o.url_args,'" onclick="return false;" >').concat(o.label,"</a></li>")}}catch(e){r.e(e)}finally{r.f()}i&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");var n,i=u(e.columns);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.visible&&(t+='<th id="'.concat(a.key,'-header">'),a.sortable?t+='<a href="javascript:void(0)" class="sort-link" sort_key="'.concat(a.key,'">').concat(a.label,"</a>"):t+=a.label,t+='<span class="sort-arrow">'.concat(a.extra,"</span></th>"))}}catch(e){i.e(e)}finally{i.f()}return t+="</tr>"},body:function(e){var t="";if(0===e.items.length){var n=e.filters,i=n["free-text-search"]||"",a=n.tags&&"All"!==n.tags?"tags:".concat(n.tags," "):"",r=n.name&&"All"!==n.name?"name:".concat(n.name):"",o=i||"".concat(a).concat(r),l=o?"No matching entries found for <strong>".concat(o,"</strong>"):"No items";t+='<tr><td colspan="100"><em>'.concat(l,"</em></td></tr>")}var c,d=u(e.items);try{for(d.s();!(c=d.n()).done;){var h=c.value;t+="<tr ",e.current_item_id==h.id&&(t+='class="current"'),t+=">",e.show_item_checkboxes&&(t+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(h.encode_id,'" id="').concat(h.encode_id,'" class="grid-row-select-checkbox" /></td>'));var f,p=u(e.columns);try{for(p.s();!(f=p.n()).done;){var m=f.value;if(m.visible){var _="";m.nowrap&&(_='style="white-space:nowrap;"');var g=h.column_config[m.label],v=g.link,y=g.value,b=g.target;"string"===s.a.type(y)&&(y=y.replace(/\/\//g,"/"));var w="";m.attach_popup&&(w="grid-".concat(h.encode_id,"-popup")),t+="<td ".concat(_,">"),m.delayed?t+='<div class="delayed-value-'.concat(m.key,'" data-id="').concat(h.encode_id,'" data-value="').concat(y,'"><span class="fa fa-spinner fa-spin"></span></div>'):m.attach_popup&&v?t+='<div class="btn-group">\n                                    <button class="btn btn-secondary use-target" target="'.concat(b,'" href="').concat(v,'" onclick="return false;">').concat(y,'</button>\n                                    <button id="').concat(w,'" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"/>\n                                </div>'):m.attach_popup?t+='<button id="'.concat(w,'" class="btn dropdown-toggle" data-toggle="dropdown">').concat(y,"</button>"):t+=v?'<a class="use-target" target="'.concat(b,'" href="').concat(v,'" onclick="return false;">').concat(y,"</a>"):"<label>".concat(y||"","</label>"),t+="</td>"}}}catch(e){p.e(e)}finally{p.f()}t+="</tr>"}}catch(e){d.e(e)}finally{d.f()}return t},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,i=e.cur_page_num,a=e.num_pages,r=n/2,o=i-r,s=0;o<=0&&(s=r-(i-(o=1)));var l,c=r+s,d=i+c;0!==(l=d<=a?0:c-((d=a)+1-i))&&(o-=l)<1&&(o=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',o>1&&(t+='<span class="page-link-grid" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var h=o;h<d+1;h++)h==e.cur_page_num?t+='<span class="page-link-grid inactive-link" id="page-link-'.concat(h,'">').concat(h,"</span>"):t+='<span class="page-link-grid" id="page-link-'.concat(h,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(h,'">').concat(h,"</a></span>");d<a&&(t+='...<span class="page-link-grid" id="page-link-'.concat(a,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(a,'">').concat(a,"</a></span>")),t+="</span>",t+='\n                    <span class="page-link-grid" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var f,p=u(e.operations);try{for(p.s();!(f=p.n()).done;){var m=f.value;m.allow_multiple&&(t+='<input type="button" value="'.concat(m.label,'" class="operation-button action-button">&nbsp;'))}}catch(e){p.e(e)}finally{p.f()}t+="</td></tr>"}var _,g=!1,v=u(e.operations);try{for(v.s();!(_=v.n()).done;){if(_.value.global_operation){g=!0;break}}}catch(e){v.e(e)}finally{v.f()}if(g){t+='<tr><td colspan="100">';var y,b=u(e.operations);try{for(b.s();!(y=b.n()).done;){var w=y.value;w.global_operation&&(t+='<a class="action-button" href="'.concat(w.global_operation,'">').concat(w.label,"</a>"))}}catch(e){b.e(e)}finally{b.f()}t+="</td></tr>"}return e.legend&&(t+='<tr><td colspan="100">'.concat(e.legend,"</td></tr>")),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),'<p><div class="'.concat(t,'message transient-message">').concat(r.default.escape(e.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,i="none";e.advanced_search&&(i="block");var a,r=!1,o=u(e.columns);try{for(o.s();!(a=o.n()).done;){var s=a.value;if("advanced"==s.filterable){var l=s.key,c=n[l],d=t[l];c&&d&&c!=d&&(i="block"),r=!0}}}catch(e){o.e(e)}finally{o.f()}var h="block";"block"==i&&(h="none");var f,p='<div id="standard-search" style="display: '.concat(h,';"><table><tr><td style="padding: 0;"><table>'),m=u(e.columns);try{for(m.s();!(f=m.n()).done;){var _=f.value;"standard"==_.filterable&&(p+=this.grid_column_filter(e,_))}}catch(e){m.e(e)}finally{m.f()}p+="</table></td></tr><tr><td>",r&&(p+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),p+="</td></tr></table></div>",p+='<div id="advanced-search" style="display: '.concat(i,'; margin-top: 5px;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var g,v=u(e.columns);try{for(v.s();!(g=v.n()).done;){var y=g.value;"advanced"==y.filterable&&(p+=this.grid_column_filter(e,y))}}catch(e){v.e(e)}finally{v.f()}return p+="</table></div>"},grid_column_filter:function(e,t){var n=e.filters,i=t.label,a=t.key;"advanced"==t.filterable&&(i=i.toLowerCase());var r="<tr>";if("advanced"==t.filterable&&(r+='<td align="left" style="padding-left: 10px">'.concat(i,":</td>")),r+='<td style="padding-bottom: 1px;">',t.is_text){r+='<form class="text-filter-form" column_key="'.concat(a,'" action="').concat(e.url,'" method="get" >');var o,l=u(e.columns);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=n[c.key];d&&"All"!=d&&(c.is_text&&(d=JSON.stringify(d)),r+='<input type="hidden" id="'.concat(c.key,'" name="f-').concat(c.key,'" value="').concat(d,'"/>'))}}catch(e){l.e(e)}finally{l.f()}r+='<span id="'.concat(a,'-filtering-criteria">');var h=n[a];if(h){var f=s.a.type(h);if("string"==f&&"All"!=h&&(r+=this.filter_element(a,h)),"array"==f)for(var p in h){h.slice(p),r+=this.filter_element(a,h[p])}}r+="</span>";var m="",_=20;"standard"==t.filterable&&((m=t.label.toLowerCase()).length<20&&(_=m.length),_+=4),r+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(a,'-filter" name="f-').concat(a,'" type="text" placeholder="').concat(m,'" size="').concat(_,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{r+='<span id="'.concat(a,'-filtering-criteria">');var g=!1;for(var v in e.categorical_filters[a]){var y=e.categorical_filters[a][v],b="",w="";for(var k in y)b=k,w=y[k];g&&(r+=" | "),g=!0;var x=n[a];x&&y[a]&&x==w?r+='<span class="categorical-filter '.concat(a,'-filter current-filter">').concat(v,"</span>"):r+='<span class="categorical-filter '.concat(a,'-filter"><a href="javascript:void(0);" filter_key="').concat(b,'" filter_val="').concat(w,'">').concat(v,"</a></span>")}r+="</span>"}return r+="</td></tr>"},filter_element:function(e,t){return t=c.a.sanitize(t),'<span class="text-filter-val">'.concat(t,'<a href="javascript:void(0);" filter_key="').concat(e,'" filter_val="').concat(t,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}},p=n(165),m=n(156),_=n(139),g=n(94),v=n(495),y=n.n(v);s.a.ajaxSettings.traditional=!0;t.a=a.a.View.extend({grid:null,initialize:function(e){this.grid=new d,this.title=e.title,this.active_tab=e.active_tab;var t=this;if(g.a.watch((function(e){return e.gridSearch.searchTags}),(function(e){var n=Array.from(e);t.grid.add_filter("tags",n,!1),t.openAdvancedSearch(),t.render_filter_button("tags",n),t.go_page_one(),t.execute()})),e.url_base&&!e.items){m.a.markViewAsLoading(this);var n=e.url_data||{};r.default.each(e.filters,(function(e,t){n["f-".concat(t)]=e})),s.a.ajax({url:"".concat(e.url_base,"?").concat(s.a.param(n)),success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.setElement("<div>"),this.init_grid(e);e.use_panels&&s()("#center").css({padding:"10px",overflow:"auto"})},openAdvancedSearch:function(){s()("#advanced-search").is(":visible")||(s()("#standard-search").slideToggle("fast"),s()("#advanced-search").slideToggle("fast"))},handle_refresh:function(e){if(e&&s.a.inArray("history",e)>-1){var t=Object(l.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.loadCurrentHistory()}},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&c.a.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^/]+/,""),this.grid.set("url_base",n),this.$el.html(f.grid(t)),this.$el.addClass(this.getRootClassName(e)),this.$el.find("#grid-table-header").html(f.header(t)),this.$el.find("#grid-table-body").html(f.body(t)),this.$el.find("#grid-table-footer").html(f.footer(t)),t.message){this.$el.find("#grid-message").html(f.message(t));var i=this;t.use_hide_message&&window.setTimeout((function(){i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(_.a)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){s()(this).off(),s()(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){s()(this).off(),s()(this).click((function(){s()(this).select()})).keyup((function(){s()(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){s()(this).off(),s()(this).click((function(){return e.set_sort_condition(s()(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){s()(this).off(),s()(this).submit((function(){var t=s()(this).attr("column_key"),n=s()("#input-".concat(t,"-filter")),i=n.val();return n.val(""),e.add_filter_condition(t,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){s()(this).off(),s()(this).click((function(){return s()(this).parent().remove(),e.remove_filter_condition(s()(this).attr("filter_key"),s()(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){s()(this).off(),s()(this).click((function(){return e.set_categorical_filter(s()(this).attr("filter_key"),s()(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){s()(this).off(),s()(this).click((function(){return e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=s()(this).find("input.grid-row-select-checkbox"),t=s()(this).find("span.grid-selected-count"),n=function(){t.text(s()(e).filter(":checked").length)};s()(e).each((function(){s()(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link-grid > a").each((function(){s()(this).click((function(){return t.set_page(s()(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){s()(this).click((function(){return t.execute({href:s()(this).attr("href"),target:s()(this).attr("target")}),!1}))})),0!==e.items.length&&r.default.each(e.items,(function(n,i){var a=t.$("#grid-".concat(n.encode_id,"-popup")).off(),o=new p.a(a);r.default.each(e.operations,(function(e){t.add_operation(o,e,n)}))}))},add_operation:function(e,t,n){var i=this,a=n.operation_config[t.label];a.allowed&&t.allow_popup&&e.addItem({html:t.label,href:a.url_args,target:a.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var a=s()(e.target).html();t.onclick?t.onclick(n.encode_id):i.execute(this.findItemByHtml(a))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0),this.render_filter_button(e,t),this.go_page_one(),this.execute()},render_filter_button:function(e,t){var n=s()(f.filter_element(e,t)),i=this;n.click((function(){s()(this).remove(),i.remove_filter_condition(e,t)})),this.$el.find("#".concat(e,"-filtering-criteria")).append(n)},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),"tags"==e&&g.a.dispatch("removeSearchTag",{text:t}),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n="-".concat(e)),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",a=s()("<span>".concat(i,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(e,"-header")).append(a),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],i=this.grid.get("filters")[e],a=this;this.$el.find(".".concat(e,"-filter")).each((function(){var r=s.a.trim(s()(this).text()),o=n[r][e];if(o==t)s()(this).empty(),s()(this).addClass("current-filter"),s()(this).append(r);else if(o==i){s()(this).empty();var l=s()('<a href="javascript:void(0)" role="button">'.concat(r,"</a>"));l.click((function(){a.set_categorical_filter(e,o)})),s()(this).removeClass("current-filter"),s()(this).append(l)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,i=s()(this).attr("id"),a=parseInt(i.split("-")[2],10),r=t.grid.get("cur_page");if(a===e)n=s()(this).children().text(),s()(this).empty(),s()(this).addClass("inactive-link"),s()(this).text(n);else if(a===r){n=s()(this).text(),s()(this).empty(),s()(this).removeClass("inactive-link");var o=s()('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));o.click((function(){t.set_page(a)})),s()(this).append(o)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=s()(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=r.default.findWhere(this.grid.attributes.operations,{label:n});i&&!t&&(t=i.confirm||"");var a=[];this.$el.find("input[name=id]:checked").each((function(){a.push(s()(this).val())}));var o={operation:n,id:a,confirmation_text:t};return"top"!=i.target&&"center"!=i.target||(o=r.default.extend(o,{href:i.href,target:i.target})),this.execute(o),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");r.default.each(e,(function(e){s()(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,i=null,a=null,r=null;if(e&&(n=e.href,i=e.operation,t=e.id,a=e.confirmation_text,r=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var o=n.split("?");if(o.length>1)for(var l=o[1].split("&"),c=0;c<l.length;c++)-1!=l[c].indexOf("operation")?i=(i=l[c].split("=")[1]).replace(/\+/g," "):-1!=l[c].indexOf("id")&&(t=l[c].split("=")[1])}return i&&t?!(a&&""!==a&&"None"!=a&&"null"!=a&&!window.confirm(a))&&(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:t}),"top"==r?window.top.location="".concat(n,"?").concat(s.a.param(this.grid.get_url_data())):"center"==r?s()("#galaxy_main").attr("src","".concat(n,"?").concat(s.a.param(this.grid.get_url_data()))):this.update_grid(),!1):n?(this.go_to(r,n),!1):(this.update_grid(),!1)},go_to:function(e,t){var n=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",n),t||(t="".concat(this.grid.get("url_base"),"?").concat(s.a.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0}),e){case"center":s()("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;s.a.ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),i=t.grid.get("insert"),a=t.$el.find("#advanced-search").is(":visible"),r=e;r.embedded=n,r.insert=i,r.advanced_search=a,t.init_grid(r),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})},getRootClassName:function(e){var t=e.title,n=void 0===t?"grid":t;return y()(n).toLowerCase()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"e",(function(){return I})),n.d(t,"g",(function(){return P})),n.d(t,"f",(function(){return Y})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return H})),n.d(t,"b",(function(){return N}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(2),l=n.n(s),c=n(7),d=n.n(c),u=n(6),h=n(10),f=n(56),p=n(240),m=n(116),_=n(18);function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var S=function e(t){x(this,e);var n=this,i=t.node,a=t.workflow;this.workflow=a,M(this,i);var r={};"subworkflow"==i.type&&(r.edit_subworkflow=new _.a.Button({tooltip:l()("Edit targeted subworkflow at its newest version. You'll need to return here and upgrade this workflow step after."),icon:"fa-pencil-alt",onclick:function(){a.onEditSubworkflow(i.content_id)}}),r.upgrade_subworkflow=new _.a.Button({tooltip:l()("Attempt to upgrade this step to latest version of this subworkflow."),icon:"fa-cubes",onclick:function(){a.onAttemptRefactor([{action_type:"upgrade_subworkflow",step:{order_index:parseInt(i.id)}}])}})),this.form=new f.a(w(w({},i.config_form),{},{icon:m.a[i.type],operations:r,cls:"ui-portlet-section",onchange:function(){d.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),{id:i.id,type:i.type,content_id:i.content_id,inputs:n.form.data.create()}).then((function(e){var t=e.data;i.updateData(t)}))}}))},C=function(){function e(t){x(this,e);var n=this,i=t.node;this.workflow=t.workflow,this.datatypes=t.datatypes,this._customize(i),this.form=new p.a(w(w({},i.config_form),{},{tool_version:i.config_form.version,icon:m.a[i.type],text_enable:"Set in Advance",text_disable:"Set at Runtime",narrow:!0,initial_errors:!0,cls:"ui-portlet-section",postchange:function(e,t){var a=Object(u.a)(),r=t.model.attributes,s={tool_id:r.id,tool_version:r.version,type:"tool",inputs:Object.assign({},t.data.create())};a.emit.debug("tool-form-workflow::postchange()","Sending current state.",s),d.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),s).then((function(t){var r=t.data;i.updateData(r),n.form.model.set(i.config_form),n.form.update(i.config_form),n.form.errors(i.config_form),n._customize(i),a.emit.debug("tool-form-workflow::postchange()","Received new model.",r),e.resolve()})).catch((function(t){a.emit.debug("tool-form-workflow::postchange()","Refresh request failed.",t),e.reject()}))}}))}var t,n,i;return t=e,(n=[{key:"_customize",value:function(e){var t=e.config_form.inputs;h.a.deepeach(t,(function(e){e.type&&(-1!=["data","data_collection"].indexOf(e.type)?(e.hiddenInWorkflow=!0,e.info="Data input '".concat(e.name,"' (").concat(h.a.textify(e.extensions),")"),e.value={__class__:"RuntimeValue"}):e.fixed||(e.connectable=!0,e.collapsible_value={__class__:"RuntimeValue"},e.is_workflow=e.options&&0===e.options.length||-1!=["integer","float"].indexOf(e.type)))})),h.a.deepeach(t,(function(e){"conditional"===e.type&&(e.connectable=!1,e.test_param.collapsible_value=void 0)})),function(e,t){var n=t.config_form.inputs,i=t.postJobActions,a=t.outputs.length>0&&t.outputs[0];if(a){n.push({name:"pja__".concat(a.name,"__EmailAction"),label:"Email notification",type:"boolean",value:String(Boolean(i["EmailAction".concat(a.name)])),ignore:"false",help:l()("An email notification will be sent when the job has completed."),payload:{host:window.location.host},skipOnClone:!0}),n.push({name:"pja__".concat(a.name,"__DeleteIntermediatesAction"),label:"Output cleanup",type:"boolean",value:String(Boolean(i["DeleteIntermediatesAction".concat(a.name)])),ignore:"false",help:"Upon completion of this step, delete non-starred outputs from completed workflow steps if they are no longer required as inputs.",skipOnClone:!0});var r,o=g(t.outputs);try{for(o.s();!(r=o.n()).done;){var s=r.value;n.push(T(e,t,s))}}catch(e){o.e(e)}finally{o.f()}}}(this,e),M(this,e)}}])&&y(t.prototype,n),i&&y(t,i),e}();function M(e,t){var n=e.workflow,i=t.config_form.inputs;i.unshift({skipOnClone:!0,type:"text",name:"__annotation",label:"Step Annotation",fixed:!0,value:t.annotation,area:!0,onchange:function(e){t.setAnnotation(e)},help:"Add an annotation or notes to this step. Annotations are available when a workflow is viewed."}),i.unshift({skipOnClone:!0,type:"text",name:"__label",label:"Label",value:t.label,help:l()("Add a step label."),fixed:!0,onchange:function(i){t.setLabel(i);var a=!1;for(var r in n.nodes){var o=n.nodes[r];if(o.label&&o.label==i&&o.id!=t.id){a=!0;break}}e.form.data.create();var s=e.form.data.match("__label");e.form.element_list[s].model.set("error_text",a&&"Duplicate label. Please fix this before saving the workflow.")}})}function T(e,t,n){var i=[],a=[],r=e.datatypes;for(var o in r)i.push({0:r[o],1:r[o]});var s,c=g(t.inputs);try{for(c.s();!(s=c.n()).done;){var d=s.value;a.push({name:d.name,label:d.label})}}catch(e){c.e(e)}finally{c.f()}var u,h=(u='This action will rename the output dataset. Click <a href="https://galaxyproject.org/learn/advanced-workflow/variables/">here</a> for more information. Valid input variables are:',u+="\n        <ul>\n            ".concat(a.map((function(e){return"<li><strong>".concat(e.name.replace(/\|/g,"."),"</strong>\n                                                         ").concat(e.label?"(".concat(e.label,")"):"","\n                                             </li>")})).join(""),"\n        </ul>\n    "));i.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0})),i.unshift({0:"Sequences",1:"Sequences"}),i.unshift({0:"Roadmaps",1:"Roadmaps"}),i.unshift({0:"Leave unchanged",1:"__empty__"});var f=t.activeOutputs.get(n.name),p=n.label||n.name,m={skipOnClone:!0,title:"Configure Output: '".concat(p,"'"),type:"section",flat:!0,inputs:[{label:"Label",name:"__label__".concat(n.name),type:"text",value:f&&f.label,help:"This will provide a short name to describe the output - this must be unique across workflows.",fixed:!0,onchange:function(i){e.form.data.create();var a=t.labelOutput(n.name,i),r=e.form.data.match("__label__".concat(n.name)),o=e.form.element_list[r];a?(o.field.model.set("value",a),o.model.set("error_text","Duplicate output label '".concat(i,"' will be ignored."))):o.model.set("error_text",""),e.form.trigger("change")}},{action:"RenameDatasetAction",pja_arg:"newname",label:"Rename dataset",type:"text",value:"",ignore:"",help:h},{action:"ChangeDatatypeAction",pja_arg:"newtype",label:"Change datatype",type:"select",ignore:"__empty__",value:"__empty__",options:i,help:"This action will change the datatype of the output to the indicated datatype.",onchange:function(e){t.changeOutputDatatype(n.name,e)}},{action:"TagDatasetAction",pja_arg:"tags",label:"Add Tags",type:"text",value:"",ignore:"",help:"This action will set tags for the dataset."},{action:"RemoveTagDatasetAction",pja_arg:"tags",label:"Remove Tags",type:"text",value:"",ignore:"",help:"This action will remove tags for the dataset."},{title:l()("Assign columns"),type:"section",flat:!0,inputs:[{action:"ColumnSetAction",pja_arg:"chromCol",label:"Chrom column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"startCol",label:"Start column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"endCol",label:"End column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"strandCol",label:"Strand column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"nameCol",label:"Name column",type:"integer",value:"",ignore:""}],help:"This action will set column assignments in the output dataset. Blank fields are ignored."}]};return function e(t,n,i,a){var r=a.postJobActions;for(var o in(n=n||[]).push(t),t.inputs){var s=t.inputs[o];if(s.action){if(s.name="pja__".concat(i.name,"__").concat(s.action),s.pja_arg&&(s.name+="__".concat(s.pja_arg)),s.payload)for(var l in s.payload)s.payload["".concat(s.name,"__").concat(l)]=s.payload[l],delete s.payload[l];var c=r[s.action+i.name];if(c){for(var d in n)n[d].expanded=!0;s.pja_arg?s.value=c.action_arguments&&c.action_arguments[s.pja_arg]||s.value:s.value="true"}}s.inputs&&e(s,n.slice(0),i,a)}}(m,[],n,t),m}var j=n(67),O=n(98),D=n(27);function L(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=function(){e.onWorkflowMessage("Importing workflow","progress"),Object(j.d)(e,t,null,!0).then((function(t){var n=R(t);e.onInsertedStateMessages(n)}))};n<2?i():Object(D.e)(l()("Warning"),"This will copy ".concat(n," new steps into your workflow."),{Cancel:function(){e.hideModal()},Copy:i})}function I(){r()(".right-content").hide(),r()("#edit-attributes").show()}function P(){r()(".right-content").hide(),r()("#lint-panel").show()}function Y(e,t,n){if(t&&t.config_form&&Object.keys(t.config_form).length>0){var i="right-content",a="".concat(i,"-").concat(t.id),o=r()("#".concat(i));if(0===o.find("#".concat(a)).length){var s=r()('<div id="'.concat(a,'" class="').concat(i,'"/>')),l={node:t,workflow:e,datatypes:n},c=null;c="tool"==t.type?new C(l):new S(l),s.append(c.form.$el),o.append(s)}r()(".".concat(i)).hide(),o.find("#".concat(a)).show(),o.show(),o.scrollTop()}}function R(e){var t=[];return i.default.each(e.steps,(function(n,a){var r=[];if(n.errors&&r.push(n.errors),i.default.each(e.upgrade_messages[a],(function(e){r.push(e)})),r.length){var o=m.a[n.type],s={stepIndex:a,name:n.name,details:r,iconType:o,label:n.label};t.push(s)}})),t}function H(e){var t=r()('<form><label style="display:inline-block; width: 100%;">Save as name: </label><input type="text" id="workflow_rename" style="width: 80%;" autofocus/><br><label style="display:inline-block; width: 100%;">Annotation: </label><input type="text" id="wf_annotation" style="width: 80%;" /></form>');Object(D.e)("Save As a New Workflow",t,{OK:function(){var t=r()("#workflow_rename").val().length>0?r()("#workflow_rename").val():"SavedAs_".concat(e.name),n=r()("#wf_annotation").val().length>0?r()("#wf_annotation").val():"";r.a.ajax({url:"".concat(Object(o.getAppRoot)(),"workflow/save_workflow_as"),type:"POST",data:{workflow_name:t,workflow_annotation:n,from_tool_form:!0,workflow_data:function(){return JSON.stringify(Object(O.b)(e))}}}).done((function(t){e.onNavigate("".concat(Object(o.getAppRoot)(),"workflow/editor?id=").concat(t),!0)})).fail((function(t){console.debug(t),e.onWorkflowError("Saving this workflow failed. Please contact this site's administrator.",t)}))},Cancel:function(){e.hideModal()}})}function N(e,t,n){var i,a=[],r=new Map,o=L(e.entries());try{for(o.s();!(i=o.n()).done;){var s,l=i.value,c=l[1].i_extensions,d=L(t.entries());try{for(d.s();!(s=d.n()).done;){var u,h=s.value,f=L(c.entries());try{for(f.s();!(u=f.n()).done;){var p=u.value;if(n.isSubType(h[1],p[1])||"input"===h[1]||"_sniff_"===h[1]||"input_collection"===h[1]){var m=l[1].tool_id;if(!r.has(m)){r.set(m,!0),a.push({id:m,name:l[1].name});break}}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){d.e(e)}finally{d.f()}}}catch(e){o.e(e)}finally{o.f()}return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return v}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=n(3),d=n(136),u=n(197),h=n(10),f=n(11),p=n(2),m=n.n(p),_=s.a.Model.extend(f.a.LoggableMixin).extend(f.a.mixin(f.a.SearchableModelMixin,{_logNamespace:"history",UPDATE_DELAY:4e3,defaults:{model_class:"History",id:null,name:"Unnamed History",state:"new",deleted:!1,contents_active:{},contents_states:{}},contentsClass:d.a,searchAttributes:["name","annotation","tags"],searchAliases:{title:"name",tag:"tags"},initialize:function(e,t){t=t||{},this.logger=t.logger||null,this.log("".concat(this,".initialize:"),e,t),this.urlRoot="".concat(Object(c.getAppRoot)(),"api/histories"),this.contents=new this.contentsClass([],{history:this,historyId:this.get("id"),order:t.order}),this._setUpListeners(),this._setUpCollectionListeners(),this.updateTimeoutId=null},_setUpListeners:function(){return this.on({error:function(e,t,n,i,a){this.clearUpdateTimeout()},"change:id":function(e,t){this.contents&&(this.contents.historyId=t)}})},_setUpCollectionListeners:function(){return this.contents?this.listenTo(this.contents,{error:function(){this.trigger.apply(this,r.a.makeArray(arguments))}}):this},contentsShown:function(){var e=this.get("contents_active"),t=e.active||0;return t+=this.contents.includeDeleted?e.deleted:0,t+=this.contents.includeHidden?e.hidden:0},nice_size:function(){var e=this.get("size");return e?h.a.bytesToString(e,!0,2):m()("(empty)")},toJSON:function(){return i.default.extend(s.a.Model.prototype.toJSON.call(this),{nice_size:this.nice_size()})},get:function(e){return"nice_size"===e?this.nice_size():s.a.Model.prototype.get.apply(this,arguments)},ownedByCurrUser:function(){var e=Object(l.a)();return!(!e||!e.user)&&(!e.user.isAnonymous()&&e.user.id===this.get("user_id"))},numOfUnfinishedJobs:function(){var e=this.get("non_ready_jobs");return e?e.length:0},numOfUnfinishedShownContents:function(){return this.contents.runningAndActive().length||0},_fetchContentRelatedAttributes:function(){return this.fetch({data:r.a.param({keys:["size","non_ready_jobs","contents_active","hid_counter"].join(",")})})},refresh:function(e){var t=this;e=e||{};var n=this.lastUpdateTime;return this.contents.allFetched=!1,(0!==this.contents.currentPage?function(){return t.contents.fetchPage(t.contents.currentPage)}:function(){return t.contents.fetchUpdated(n)})().done((function(n,i,a){var r;try{r=new Date(a.getResponseHeader("Date"))}catch(e){console.error(e)}t.lastUpdateTime=r||new Date,t.checkForUpdates(e)}))},checkForUpdates:function(e){var t=this;e=e||{};var n=this.UPDATE_DELAY;if(this.id){var i=function(){t.clearUpdateTimeout(),t.updateTimeoutId=setTimeout((function(){t.refresh(e)}),n)};this.numOfUnfinishedShownContents()>0?i():this._fetchContentRelatedAttributes().done((function(e){t.numOfUnfinishedJobs()>0?i():t.trigger("ready")}))}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},stopPolling:function(){this.clearUpdateTimeout(),this.contents&&this.contents.stopPolling()},parse:function(e,t){var n=s.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},fetchWithContents:function(e,t){var n=this;return(e=e||{}).view="dev-detailed",this.fetch(e).then((function(e){return n.contents.history=n,n.contents.setHistoryId(e.id),n.fetchContents(t)}))},fetchContents:function(e){return e=e||{},this.lastUpdateTime=new Date,this.contents.fetchCurrentPage(e)},_delete:function(e){return this.get("deleted")?r.a.when():this.save({deleted:!0},e)},purge:function(e){return this.get("purged")?r.a.when():this.save({deleted:!0,purged:!0},e)},undelete:function(e){return this.get("deleted")?this.save({deleted:!1},e):r.a.when()},copy:function(e,t,n){if(e=void 0===e||e,!this.id)throw new Error("You must set the history ID before copying it.");var i={history_id:this.id};e&&(i.current=!0),t&&(i.name=t),n||(i.all_datasets=!1),i.view="dev-detailed";var a=this,o=r.a.post(this.urlRoot,i);return e?o.then((function(e){return new _(e).setAsCurrent().done((function(){a.trigger("copied",a,e)}))})):o.done((function(e){a.trigger("copied",a,e)}))},setAsCurrent:function(){var e=this,t=r.a.getJSON("".concat(Object(c.getAppRoot)(),"history/set_as_current?id=").concat(this.id));return t.done((function(){e.trigger("set-as-current",e)})),t},toString:function(){return"History(".concat(this.get("id"),",").concat(this.get("name"),")")}})),g=u.a.InfinitelyScrollingCollection,v=g.extend(f.a.LoggableMixin).extend({_logNamespace:"history",model:_,order:"update_time",limitOnFirstFetch:10,limitPerFetch:10,initialize:function(e,t){t=t||{},this.log("HistoryCollection.initialize",e,t),this.urlRoot="".concat(Object(c.getAppRoot)(),"api/histories"),g.prototype.initialize.call(this,e,t),this.includeDeleted=t.includeDeleted||!1,this.currentHistoryId=t.currentHistoryId,this.setUpListeners()},url:function(){return this.urlRoot},setUpListeners:function(){return this.on({"change:deleted":function(e){this.debug("change:deleted",this.includeDeleted,e.get("deleted")),!this.includeDeleted&&e.get("deleted")&&this.remove(e)},copied:function(e,t){this.setCurrent(new _(t,[]))},"set-as-current":function(e){var t=this.currentHistoryId;this.trigger("no-longer-current",t),this.currentHistoryId=e.id}})},_buildFetchData:function(e){return i.default.extend(g.prototype._buildFetchData.call(this,e),{view:"dev-detailed"})},_buildFetchFilters:function(e){var t=g.prototype._buildFetchFilters.call(this,e)||{},n={};return!0!==this.includeDeleted?(n.deleted=!1,n.purged=!1):n.deleted=null,i.default.defaults(t,n)},fetchFirst:function(e){var t=this,n=r.a.when();return this.currentHistoryId&&(n=g.prototype.fetchFirst.call(this,{silent:!0,limit:1,filters:{"encoded_id-in":this.currentHistoryId,deleted:null,purged:""}})),n.then((function(){return(e=e||{}).offset=0,t.fetchMore(e)}))},comparators:i.default.extend(i.default.clone(g.prototype.comparators),{name:f.a.buildComparator("name",{ascending:!0}),"name-dsc":f.a.buildComparator("name",{ascending:!1}),size:f.a.buildComparator("size",{ascending:!1}),"size-asc":f.a.buildComparator("size",{ascending:!0})}),sort:function(e){var t=(e=e||{}).silent,n=this.remove(this.get(this.currentHistoryId));return g.prototype.sort.call(this,i.default.defaults({silent:!0},e)),this.unshift(n,{silent:!0}),t||this.trigger("sort",this,e),this},create:function(e,t,n,i){var a=this;return r.a.getJSON("".concat(Object(c.getAppRoot)(),"history/create_new_current")).done((function(e){a.setCurrent(new _(e,[],n||{}))}))},setCurrent:function(e,t){return t=t||{},this.unshift(e,t),this.currentHistoryId=e.get("id"),t.silent||this.trigger("new-current",e,this),this},toString:function(){return"HistoryCollection(".concat(this.length,",current:").concat(this.currentHistoryId,")")}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(90);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=document.getElementsByTagName("link"),n=Array.from(t).find((function(e){return"index"==e.rel}));return n&&n.href?Object(i.a)(n.href):e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return j}));var i=n(134),a=n(8),r=n(212),o=n(33),s=n(152),l=n(60),c=n(132);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.default.use(r.a);var h={components:{StatelessTags:i.a},props:{tags:{type:Array,required:!1,default:function(){return[]}},tagService:{type:c.a,required:!0},storeKey:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}},computed:{observedTags:{get:function(){return this.$store.getters.getTagsById(this.storeKey)},set:function(e){this.updateTags({key:this.storeKey,tags:e})}}},subscriptions:function(){var e=this;return{autocompleteItems:this.tagService.autocompleteOptions.pipe(Object(s.a)((function(t){return Object(l.b)(t,e.tags)})))}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClick:function(e){this.$emit("tag-click",e)},beforeAddingTag:function(e){var t=e.tag,n=e.addTag;this.tagService.save(t).then((function(){return n(t)})).catch((function(e){return console.warn("Unable to save tag",e)}))},beforeDeletingTag:function(e){var t=e.tag,n=e.deleteTag;this.tagService.delete(t).then((function(){return n(t)})).catch((function(e){return console.warn("Unable to delete tag",e)}))},updateTagSearch:function(e){this.tagService.autocompleteSearchText=e}},Object(o.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},f=n(5),p=Object(f.a)(h,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("stateless-tags",{attrs:{disabled:e.disabled,"autocomplete-items":e.autocompleteItems},on:{"tag-click":e.onClick,"tag-input-changed":e.updateTagSearch,"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag},model:{value:e.observedTags,callback:function(t){e.observedTags=t},expression:"observedTags"}})}),[],!1,null,null,null).exports,m=n(38),_=n(41);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){v(r,i,a,o,s,"next",e)}function s(e){v(r,i,a,o,s,"throw",e)}o(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,n,i,a,r,o=k(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).model=e.model,t}return t=s,(n=[{key:"save",value:(r=y(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(l.a)(t)).valid){e.next=3;break}throw new Error("Invalid tag");case 3:return(i=new Set(this.model.attributes.tags)).add(n.text),i=Array.from(i),e.next=8,this.model.save({tags:i});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:(a=y(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(t),(i=new Set(this.model.attributes.tags)).delete(n.text),i=Array.from(i),e.next=6,this.model.save({tags:i});case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}])&&b(t.prototype,n),i&&b(t,i),s}(c.a),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.id,i=e.itemClass,a=e.tags,r=void 0===a?[]:a,o=e.disabled,s=void 0!==o&&o,l=e.context,d=void 0===l?"unspecified":l,u={storeKey:"".concat(i,"-").concat(n),tagService:new c.a({id:n,itemClass:i,context:d}),tags:r,disabled:s},h=Object(m.a)(p),f=h(u,t);return f.$on("tag-click",T(e,f)),f},T=function(e,t){return function(n){if(n){var i=e.tagClickFn,a=void 0===i?"none":i,r=e.clickUrl;switch(a){case"community_tag_click":if(void 0!==r){var o=n.value?":".concat(n.value):"",s="".concat(r,"?f-tags=").concat(n.text).concat(o);Object(_.c)(s)}break;case"add_tag_to_grid_filter":t.$store.dispatch("toggleSearchTag",n)}}}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.model,i=e.disabled,a=void 0!==i&&i,r=e.context,o=void 0===r?"unspecified":r;if(n){var s=n.attributes,l=s.id,c=s.model_class,d=s.tags,u=void 0===d?[]:d,h={storeKey:"".concat(c,"-").concat(l),tagService:new C({id:l,itemClass:c,context:o,model:n}),tags:u,disabled:a},f=Object(m.a)(p);return f(h,t)}console.warn("Missing model in mountModelTags")}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return new URL(e).pathname}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var i,a,r,o=n(1),s=n(0),l=n.n(s),c=n(61),d=n(99),u=n(11),h=n(2),f=n.n(h),p=c.a.extend({className:"".concat(c.a.prototype.className," dataset-collection"),id:function(){return["dataset_collection",this.model.get("id")].join("-")},initialize:function(e){this.linkTarget=e.linkTarget||"_blank",this.hasUser=e.hasUser,c.a.prototype.initialize.call(this,e)},_setUpListeners:function(){c.a.prototype._setUpListeners.call(this),this.listenTo(this.model,"change",(function(e,t){o.default.has(e.changed,"deleted")?this.render():o.default.has(e.changed,"element_count")&&this.$("> .title-bar .subtitle").replaceWith(this._renderSubtitle())}))},_renderSubtitle:function(){return l()(this.templates.subtitle(this.model.toJSON(),this))},_getFoldoutPanelOptions:function(){var e=c.a.prototype._getFoldoutPanelOptions.call(this);return o.default.extend(e,{linkTarget:this.linkTarget,hasUser:this.hasUser})},$selector:function(){return this.$("> .selector")},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCListItemView(".concat(e,")")}});p.prototype.templates=(i=o.default.extend({},c.a.prototype.templates.warnings,{error:u.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',f()("There was an error getting the data for this collection"),": <%- model.error %>","</div>","<% } %>"]),purged:u.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',f()("This collection has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:u.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',f()("This collection has been deleted"),"</div>","<% } %>"])}),a=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection"),r=u.a.wrapTemplate(['<div class="subtitle">','<% var countText = collection.element_count? ( collection.element_count + " " ) : ""; %>','<%        if( collection.collection_type === "list" ){ %>',f()("a list of <%- countText %>datasets"),'<% } else if( collection.collection_type === "paired" ){ %>',f()("a pair of datasets"),'<% } else if( collection.collection_type === "list:paired" ){ %>',f()("a list of <%- countText %>dataset pairs"),'<% } else if( collection.collection_type === "list:list" ){ %>',f()("a list of <%- countText %>dataset lists"),"<% } %>","</div>"],"collection"),o.default.extend({},c.a.prototype.templates,{warnings:i,titleBar:a,subtitle:r}));var m=c.b.extend({className:"".concat(c.b.prototype.className," dataset-collection-element"),initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DCEListItemView.initialize:",e),c.b.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCEListItemView(".concat(e,")")}});m.prototype.templates=function(){var e=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return o.default.extend({},c.b.prototype.templates,{titleBar:e})}();var _=d.a.extend({className:"".concat(d.a.prototype.className," dataset-collection-element"),initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DatasetDCEListItemView.initialize:",e),d.a.prototype.initialize.call(this,e)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):l.a.when()},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemView(".concat(e,")")}});_.prototype.templates=function(){var e=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return o.default.extend({},d.a.prototype.templates,{titleBar:e})}();var g=p.extend({className:"".concat(p.prototype.className," dataset-collection-element"),_swapNewRender:function(e){p.prototype._swapNewRender.call(this,e);var t=this.model.get("state")||"ok";return this.$el.addClass("state-".concat(t)),this.$el},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemView(".concat(e,")")}});t.a={DCListItemView:p,DCEListItemView:m,DatasetDCEListItemView:_,NestedDCDCEListItemView:g}},,,function(e,t,n){"use strict";var i=n(8),a=n(33),r=n(50),o=n(76),s={state:{searchTags:new Set},mutations:{setSearchTags:function(e,t){e.searchTags=new Set(t)}},actions:{toggleSearchTag:function(e,t){var n=e.state,i=e.commit,a=t.text,r=new Set(n.searchTags);r.has(a)?r.delete(a):r.add(a),i("setSearchTags",r)},removeSearchTag:function(e,t){var n=e.state,i=e.commit,a=t.text,r=new Set(n.searchTags);r.delete(a),i("setSearchTags",r)},clearSearchTags:function(e){e.state;(0,e.commit)("setSearchTags",new Set)}}},l={state:{userTagList:[],modelTagCache:new Map},getters:{getTagsById:function(e){return function(t){if(e.modelTagCache.has(t)){var n=e.modelTagCache.get(t);return Array.from(n)}return[]}}},actions:{updateTags:function(e,t){(0,e.commit)("setTags",{key:t.key,tags:t.tags})},initializeTags:function(e,t){var n=e.dispatch,i=e.state,a=t.key,r=t.tags;i.modelTagCache.has(a)||n("updateTags",{key:a,tags:r})}},mutations:{setTags:function(e,t){var n=t.key,i=t.tags;e.modelTagCache=new Map(e.modelTagCache),e.modelTagCache.set(n,new Set(i))},reset:function(e){e.userTagList=[],e.modelTagCache=new Map}}},c=n(3),d=n(7),u=n.n(d);function h(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){h(r,i,a,o,s,"next",e)}function s(e){h(r,i,a,o,s,"throw",e)}o(void 0)}))}}var p,m,_={state:{jobMetricsByHdaId:{},jobMetricsByLddaId:{},jobMetricsByJobId:{}},getters:{getJobMetricsByDatasetId:function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hda",i="hda"==n?e.jobMetricsByHdaId:e.jobMetricsByLddaId;return i[t]||[]}},getJobMetricsByJobId:function(e){return function(t){return e.jobMetricsByJobId[t]||[]}}},actions:{fetchJobMetricsForDatasetId:(m=f(regeneratorRuntime.mark((function e(t,n){var i,a,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,a=n.datasetId,r=n.datasetType,e.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/datasets/").concat(a,"/metrics?hda_ldda=").concat(r));case 4:o=e.sent,s=o.data,i("saveJobMetricsForDatasetId",{datasetId:a,datasetType:r,jobMetrics:s});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),fetchJobMetricsForJobId:(p=f(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"/metrics"));case 3:a=e.sent,r=a.data,i("saveJobMetricsForJobId",{jobId:n,jobMetrics:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},mutations:{saveJobMetricsForDatasetId:function(e,t){var n=t.datasetId,a=t.datasetType,r=t.jobMetrics,o="hda"==a?e.jobMetricsByHdaId:e.jobMetricsByLddaId;i.default.set(o,n,r)},saveJobMetricsForJobId:function(e,t){var n=t.jobId,a=t.jobMetrics;i.default.set(e.jobMetricsByJobId,n,a)}}};function g(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var v,y,b={state:{jobDestinationParametersByJobId:{}},getters:{jobDestinationParams:function(e){return function(t){return e.jobDestinationParametersByJobId[t]||[]}}},actions:{fetchJobDestinationParams:(v=regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"/destination_params"));case 3:a=e.sent,r=a.data,i("saveJobDestinationParamsForJobId",{jobId:n,jobDestinationParams:r});case 6:case"end":return e.stop()}}),e)})),y=function(){var e=this,t=arguments;return new Promise((function(n,i){var a=v.apply(e,t);function r(e){g(a,n,i,r,o,"next",e)}function o(e){g(a,n,i,r,o,"throw",e)}r(void 0)}))},function(e,t){return y.apply(this,arguments)})},mutations:{saveJobDestinationParamsForJobId:function(e,t){var n=t.jobId,a=t.jobDestinationParams;i.default.set(e.jobDestinationParametersByJobId,n,a)}}};function w(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){w(r,i,a,o,s,"next",e)}function s(e){w(r,i,a,o,s,"throw",e)}o(void 0)}))}}var x,S,C,M={state:{invocationDetailsById:{},invocationJobsSummaryById:{},invocationStepById:{}},getters:{getInvocationById:function(e){return function(t){return e.invocationDetailsById[t]}},getInvocationJobsSummaryById:function(e){return function(t){return e.invocationJobsSummaryById[t]}},getInvocationStepById:function(e){return function(t){return e.invocationStepById[t]}}},actions:{fetchInvocationForId:(C=k(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/").concat(n));case 3:a=e.sent,r=a.data,i("saveInvocationForId",{invocationId:n,invocationData:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)}),fetchInvocationJobsSummaryForId:(S=k(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/").concat(n,"/jobs_summary"));case 3:a=e.sent,r=a.data,i("saveInvocationJobsSummaryForId",{invocationId:n,jobsSummary:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)}),fetchInvocationStepById:(x=k(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/any/steps/").concat(n));case 3:a=e.sent,r=a.data,i("saveInvocationStepById",{invocationStepId:n,invocationStepData:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)})},mutations:{saveInvocationForId:function(e,t){var n=t.invocationId,a=t.invocationData;i.default.set(e.invocationDetailsById,n,a)},saveInvocationJobsSummaryForId:function(e,t){var n=t.invocationId,a=t.jobsSummary;i.default.set(e.invocationJobsSummaryById,n,a)},saveInvocationStepById:function(e,t){var n=t.invocationStepId,a=t.invocationStepData;i.default.set(e.invocationStepById,n,a)}}};function T(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){T(r,i,a,o,s,"next",e)}function s(e){T(r,i,a,o,s,"throw",e)}o(void 0)}))}}var O,D,L={state:{historyDetailsById:{},historyById:{}},getters:{getHistoryById:function(e){return function(t){return e.historyById[t]}},getHistoryNameById:function(e){return function(t){var n=e.historyById[t];return n&&n.name?n.name:"..."}}},actions:{fetchHistories:(D=j(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories"));case 3:i=e.sent,a=i.data,n("saveHistories",{histories:a});case 6:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),fetchHistoryForId:(O=j(regeneratorRuntime.mark((function e(t,n){var i,a,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,a={},e.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories/").concat(n),{params:a});case 4:r=e.sent,o=r.data,i("saveHistoryForId",{historyId:n,historyData:o});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)})},mutations:{saveHistories:function(e,t){var n=t.histories,i={};n.forEach((function(e){i[e.id]=e})),e.historyDetailsById=i},saveHistoryForId:function(e,t){var n=t.historyId,a=t.historyData;i.default.set(e.historyById,n,a)}}},E=n(41);function A(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function I(){return(I=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){A(r,i,a,o,s,"next",e)}function s(e){A(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(E.b)("/api/users/current"),e.next=3,u.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t)}var t,n,i;return t=e,(n=[{key:"isAnonymous",get:function(){return!this.email}}])&&P(t.prototype,n),i&&P(t,i),e}();function R(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var H,N={namespaced:!0,state:{currentUser:null},getters:{currentUser:function(e){var t=e.currentUser||{},n=new Y(t);return Object.freeze(n)}},mutations:{setCurrentUser:function(e,t){e.currentUser=t}},actions:{loadUser:function(e){var t=e.dispatch;H||(H=function(){return I.apply(this,arguments)}().then((function(e){t("setCurrentUser",e)})).catch((function(e){console.warn("loadUser error",e)})).finally((function(){H=null})))},setCurrentUser:function(e,t){return function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){R(r,i,a,o,s,"next",e)}function s(e){R(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,i("setCurrentUser",t),n.next=4,a("betaHistory/loadUserHistories",t,{root:!0});case 4:case"end":return n.stop()}}),n)})))()}}},$=n(796),F=n(631),W=n(265);function z(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function U(){return(U=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){z(r,i,a,o,s,"next",e)}function s(e){z(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(E.b)("/api/configuration"),e.next=3,u.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V,B={namespaced:!0,getters:{config:function(e){return(null==e?void 0:e.config)||{}},configIsLoaded:function(e){return null!==(null==e?void 0:e.config)}},state:{config:null},mutations:{setConfigs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.config=Object.assign({},e.config||{},t)}},actions:{loadConfigs:function(e){var t=e.commit;V||(V=function(){return U.apply(this,arguments)}().then((function(e){return t("setConfigs",e)})).catch((function(e){return console.warn("loadConfigs error",e)})).finally((function(){return V=null})))}}},q=n(152);function G(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var J,K={state:{workflowsByInstanceId:{}},getters:{getWorkflowByInstanceId:function(e){return function(t){return e.workflowsByInstanceId[t]}},getWorkflowNameByInstanceId:function(e){return function(t){var n=e.workflowsByInstanceId[t];return n&&n.name?n.name:"..."}}},actions:{fetchWorkflowForInstanceId:(J=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){G(r,i,a,o,s,"next",e)}function s(e){G(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,a={instance:"true"},e.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/workflows/").concat(n),{params:a});case 4:r=e.sent,o=r.data,i("saveWorkflowForInstanceId",{workflowId:n,workflowData:o});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return J.apply(this,arguments)})},mutations:{saveWorkflowForInstanceId:function(e,t){var n=t.workflowId,a=t.workflowData;i.default.set(e.workflowsByInstanceId,n,a)}}};function X(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var Q,Z={state:{toolById:{}},getters:{getToolForId:function(e){return function(t){return e.toolById[t]}},getToolNameById:function(e){return function(t){var n=e.toolById[t];return n&&n.name?n.name:"..."}}},actions:{fetchToolForId:(Q=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){X(r,i,a,o,s,"next",e)}function s(e){X(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,console.log("fetching tool"),e.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/tools/").concat(n));case 4:a=e.sent,r=a.data,i("saveToolForId",{toolId:n,toolData:r});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return Q.apply(this,arguments)})},mutations:{saveToolForId:function(e,t){var n=t.toolId,a=t.toolData;i.default.set(e.toolById,n,a)}}},ee=n(164);function te(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var ne=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){te(r,i,a,o,s,"next",e)}function s(e){te(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new ee.a({root:Object(c.getAppRoot)()}),a=function(e){if(void 0===n||"undefined"===n)return e;var a=n,o=r.find((function(e){return a===e.path}));if(o){if("Directory"===o.class)return e.isDirectory=!0,e.filepath=a,e;e.fileLink=i.getCompositeDatasetLink(t,o.path)}return e},null!=(r=ze.getters.getDatasetExtFiles(t))){e.next=7;break}return e.next=6,ze.dispatch("fetchDatasetExtFiles",t);case 6:r=ze.getters.getDatasetExtFiles(t);case 7:return e.abrupt("return",a({datasetContent:r}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ie(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var ae,re={state:{datasetPathDestination:{}},getters:{pathDestination:function(e){return function(t,n){return e.datasetPathDestination[t]?e.datasetPathDestination[t][n]:void 0}}},actions:{fetchPathDestination:(ae=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ie(r,i,a,o,s,"next",e)}function s(e){ie(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,a=n.history_dataset_id,r=n.path,e.next=4,ne(a,r);case 4:o=e.sent,i("savePathDestination",{history_dataset_id:a,path:r,pathDestination:o});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return ae.apply(this,arguments)})},mutations:{savePathDestination:function(e,t){var n,i,a,r=t.history_dataset_id,o=t.path,s=t.pathDestination;e.datasetPathDestination[r]=(a=s,(i=o)in(n={})?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,n)}}};function oe(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var se,le={state:{datasetExtFilesById:{}},getters:{getDatasetExtFiles:function(e){return function(t){return e.datasetExtFilesById[t]||null}}},actions:{fetchDatasetExtFiles:(se=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){oe(r,i,a,o,s,"next",e)}function s(e){oe(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories/").concat(n,"/contents/").concat(n,"/extra_files"));case 3:a=e.sent,r=a.data,i("saveDatasetExtFiles",{history_dataset_id:n,datasetExtFiles:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return se.apply(this,arguments)})},mutations:{saveDatasetExtFiles:function(e,t){var n=t.history_dataset_id,a=t.datasetExtFiles;i.default.set(e.datasetExtFilesById,n,a)}}};function ce(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var de,ue={state:{job:{}},getters:{job:function(e){return function(t){return e.job[t]}}},actions:{fetchJob:(de=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ce(r,i,a,o,s,"next",e)}function s(e){ce(r,i,a,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"?full=true"));case 3:a=e.sent,r=a.data,i("saveJobForJobId",{jobId:n,job:r});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return de.apply(this,arguments)})},mutations:{saveJobForJobId:function(e,t){var n=t.jobId,a=t.job;i.default.set(e.job,n,a)}}},he=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){if(void 0!==e)return t in e?e[t]:void 0}),e)}},fe=n(45);function pe(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function me(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){me(r,i,a,o,s,"next",e)}function s(e){me(r,i,a,o,s,"throw",e)}o(void 0)}))}}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke={setCurrentHistoryId:function(e,t){e.currentHistoryId=t},setHistory:function(e,t){i.default.set(e.histories,t.id,t)},deleteHistory:function(e,t){i.default.delete(e.histories,t.id)},setHistories:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.reduce((function(e,t){return be(be({},e),{},we({},t.id,t))}),{});i.default.set(e,"histories",n)},setLoadedForUser:function(e,t){e.loadedForUser=t}},xe={currentHistoryId:function(e,t){var n=e.histories,i=e.currentHistoryId;return i in n?i:t.firstHistoryId},firstHistory:function(e,t){var n=t.histories;return n.length?n[0]:null},firstHistoryId:function(e,t){var n;return(null==t?void 0:null===(n=t.firstHistory)||void 0===n?void 0:n.id)||null},currentHistory:function(e,t){var n=t.currentHistoryId;return n?t.getHistoryById(n):null},histories:function(e){return Object.values(e.histories).sort(function(){var e=he.apply(void 0,arguments);return function(t,n){var i=e(t).toLowerCase();return e(n).toLowerCase()-i}}("name"))},getHistoryById:function(e){return function(t){return t in e.histories?e.histories[t]:null}}},Se={load:null,byId:new Map},Ce={namespaced:!0,state:{loadedForUser:null,currentHistoryId:null,histories:{}},getters:xe,mutations:ke,actions:{loadUserHistories:function(e){var t=e.dispatch,n=e.commit;Se.load||(Se.load=Promise.all([Object(fe.k)(),Object(fe.i)()]).then((function(e){var i=ge(e,2),a=i[0],r=i[1];n("setHistories",a),t("selectHistory",r)})).catch((function(e){console.warn("loadUserHistories error",e)})).finally((function(){Se.load=null})))},loadHistoryById:function(e,t){var n=e.commit,i=e.getters,a=e.dispatch;if(!Se.byId.has(t)){var r=i.getHistoryById(t);r&&n("setHistory",r);var o=Object(fe.j)(t).then((function(e){a("selectHistory",e)})).catch((function(e){console.warn("loadHistoryById error",t,e)})).finally((function(){Se.byId.delete(t)}));Se.byId.set(t,o)}},setCurrentHistoryId:function(e,t){return _e(regeneratorRuntime.mark((function n(){var i,a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.dispatch,a=e.getters,t===a.currentHistoryId){n.next=6;break}return n.next=4,Object(fe.n)(t);case 4:r=n.sent,i("loadHistoryById",r.id);case 6:case"end":return n.stop()}}),n)})))()},createNewHistory:function(e){return _e(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,Object(fe.d)();case 3:i=t.sent,n("selectHistory",i);case 5:case"end":return t.stop()}}),t)})))()},updateHistory:function(e,t){return _e(regeneratorRuntime.mark((function n(){var i,a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=t.id,r=pe(t,["id"]),n.next=4,Object(fe.p)(a,r);case 4:o=n.sent,i("setHistory",o);case 6:case"end":return n.stop()}}),n)})))()},deleteHistory:function(e,t){return _e(regeneratorRuntime.mark((function n(){var i,a,r,o,s,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.dispatch,a=e.commit,r=e.getters,o=t.history,s=t.purge,l=void 0!==s&&s,n.next=4,Object(fe.g)(o.id,l);case 4:if(c=n.sent,a("deleteHistory",c),!r.firstHistoryId){n.next=11;break}return n.next=9,i("setCurrentHistoryId",r.firstHistoryId);case 9:n.next=13;break;case 11:return n.next=13,i("createNewHistory");case 13:case"end":return n.stop()}}),n)})))()},copyHistory:function(e,t){return _e(regeneratorRuntime.mark((function n(){var i,a,r,o,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.dispatch,a=t.history,r=t.name,o=t.copyAll,n.next=4,Object(fe.b)(a,r,o);case 4:s=n.sent,i("selectHistory",s);case 6:case"end":return n.stop()}}),n)})))()},secureHistory:function(e,t){return _e(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,n.next=3,Object(fe.m)(t);case 3:a=n.sent,i("setHistory",a);case 5:case"end":return n.stop()}}),n)})))()},setHistory:function(e,t){(0,e.commit)("setHistory",t)},selectHistory:function(e,t){var n=e.commit;n("setHistory",t),n("setCurrentHistoryId",t.id)},reset:function(e){var t=e.commit;t("setHistories",[]),t("setCurrentHistoryId",null)}}},Me=n(1082),Te=n(2207),je=n(6),Oe=n(266),De=n(1081),Le=n(904),Ee=n(675),Ae=n(2179),Ie=n(2180),Pe=n(798),Ye=n(221),Re=n(634),He=n(2181);var Ne=n(219),$e=function(e){var t=Object(Me.a)((function(){return Object(Oe.a)((function(){return Object(je.a)()})).pipe(Object(Te.a)(1))}));!function(e,t){e.pipe(Object($.a)("user"),Object(F.a)((function(e){return Object(W.a)(e)}))).subscribe((function(e){return t.commit("user/setCurrentUser",e)}),(function(e){return console.log("syncUserToGalaxy error",e)}),(function(){return console.log("syncUserToGalaxy complete")}))}(t,e),function(e,t){e.pipe(Object($.a)("config"),Object(q.a)((function(e){return Object.assign({},e)}))).subscribe((function(e){return t.commit("config/setConfigs",e)}),(function(e){return console.log("syncConfigToGalaxy error",e)}),(function(){return console.log("syncConfigToGalaxy complete")}))}(t,e),Object(Ne.a)()||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.retryPeriod,a=void 0===i?500:i,r=n.retries,o=void 0===r?20:r;e.pipe(Object($.a)("currHistoryPanel"),Object(Ae.a)((function(e){var t=e.pipe(Object(Ie.a)(a),Object(Pe.a)(o)),n=Object(De.a)("Unable to sync to currHistoryPanel because it never appeared");return Object(Le.a)(t,n)}))).pipe(Object(F.a)((function(e){return Object(Ee.a)(e,"all").pipe(Object(q.a)((function(){return e.model.id})))})),Object(Ye.a)(Boolean),Object(Re.a)(),Object(He.a)((function(){return console.log("Vuex is now tracking galaxy.currHistoryPanel")}))).subscribe((function(e){return t.dispatch("betaHistory/setCurrentHistoryId",e)}),(function(e){return console.warn("syncCurrentHistoryToGalaxy error",e)}),(function(){return console.log("syncCurrentHistoryToGalaxy complete")}))}(t,e)};i.default.use(a.a);var Fe,We=(Fe={plugins:[Object(r.a)()],modules:{user:N,config:B,betaHistory:Ce,gridSearch:s,histories:L,tags:l,jobMetrics:_,destinationParameters:b,datasetPathDestination:re,datasetExtFiles:le,invocations:M,workflows:K,informationStore:ue,tools:Z}},o.a.testBuild||Fe.plugins.push($e),new a.a.Store(Fe)),ze=t.a=We},,,function(e,t,n){"use strict";var i=n(9),a=n.n(i),r={props:{date:{type:String,required:!0},mode:{type:String,default:"date"},customFormat:{type:String,default:void 0}},computed:{elapsedTime:function(){return a()(a.a.utc(this.formattedDate)).from(a()().utc())},fullDate:function(){return a.a.utc(this.formattedDate).format()},formattedDate:function(){return void 0!==this.customFormat?a()(this.date,this.customFormat).format():this.date},pretty:function(){return a.a.utc(this.formattedDate).format("dddd MMM Do h:mm:ss YYYY [UTC]")}}},o=n(5),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"date"==e.mode?n("span",{staticClass:"utc-time",attrs:{title:e.elapsedTime}},[e._v("\n    "+e._s(e.fullDate)+"\n")]):"elapsed"===e.mode?n("span",{staticClass:"utc-time utc-time-elapsed",attrs:{title:e.fullDate}},[e._v("\n    "+e._s(e.elapsedTime)+"\n")]):n("span",{staticClass:"utc-time",attrs:{title:e.elapsedTime}},[e._v("\n    "+e._s(e.pretty)+"\n")])}),[],!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n(82),a=n(8);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0;n?o=e.nodeIndex:(e.nodeIndex=0,e.name=t.name,e.annotation=t.annotation,e.license=t.license,e.creator=t.creator,Object.values(e.nodes).forEach((function(e){e.onRemove()}))),a.default.nextTick((function(){e.version=t.version,e.report=t.report||{},Object.values(t.steps).forEach((function(t){n&&(t.uuid=null),a.default.set(e.steps,e.nodeIndex++,l(l({},t),{},{_complete:!0}))})),a.default.nextTick((function(){var n=!1;Object.entries(t.steps).forEach((function(e){var t=r(e,2),i=(t[0],t[1]);i.workflow_outputs&&i.workflow_outputs.length>0&&(n=!0)})),Object.entries(t.steps).forEach((function(t){var a=r(t,2),s=a[0],l=a[1],c=parseInt(s)+o,d=e.nodes[c];Object.entries(l.input_connections).forEach((function(t){var n=r(t,2),a=n[0],s=n[1];s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){var n=parseInt(t.id)+o,r=e.nodes[n],s=new i.a(e.canvasManager);s.connect(r.outputTerminals[t.output_name],d.inputTerminals[a]),s.redraw()})))})),n||Object.values(d.outputs).forEach((function(e){d.postJobActions["HideDatasetAction".concat(e.name)]||d.activeOutputs.add(e.name)}))}))}))}))}function u(e){var t={},n=e.canvasManager.canvasZoom;!function(e){var t=!1,n=!1;Object.values(e.nodes).forEach((function(e){e.activeOutputs.count()>0&&(t=!0),Object.values(e.postJobActions).forEach((function(e){"HideDatasetAction"===e.action_type&&(n=!0)}))})),(!1!==t||!1!==n)&&Object.values(e.nodes).forEach((function(e){null===e.postJobActions&&(e.postJobActions={});var n=[];Object.entries(e.postJobActions).forEach((function(e){var t=r(e,2),i=t[0];"HideDatasetAction"==t[1].action_type&&n.push(i)})),n.length>0&&n.forEach((function(t){delete e.postJobActions[t]})),t&&Object.values(e.outputs).forEach((function(t){if(!0===!e.activeOutputs.exists(t.name)){var n={action_type:"HideDatasetAction",output_name:t.name,action_arguments:{}};e.postJobActions["HideDatasetAction".concat(t.name)]=null,e.postJobActions["HideDatasetAction".concat(t.name)]=n}}))}))}(e),Object.values(e.nodes).forEach((function(e){var i={};Object.values(e.inputTerminals).forEach((function(e){i[e.name]=null;var t=[];e.connectors.forEach((function(n,a){if(n.outputHandle){var r={id:n.outputHandle.node.id,output_name:n.outputHandle.name},o=e.attributes.input.input_subworkflow_step_id;void 0!==o&&(r.input_subworkflow_step_id=o),t[a]=r,i[e.name]=t}}))}));var a={};e.postJobActions&&Object.values(e.postJobActions).forEach((function(e){var t={action_type:e.action_type,output_name:e.output_name,action_arguments:e.action_arguments};a[e.action_type+e.output_name]=null,a[e.action_type+e.output_name]=t}));var r={id:e.id,type:e.type,content_id:e.content_id,tool_version:e.config_form?e.config_form.version:null,tool_state:e.tool_state,errors:e.errors,input_connections:i,position:h(e.element,n),annotation:e.annotation,post_job_actions:e.postJobActions,uuid:e.uuid,label:e.label,workflow_outputs:e.activeOutputs.getAll()};t[e.id]=r}));var i=e.report,a=e.license,o=e.creator,s=e.annotation,l=e.name;return{steps:t,report:i,license:a,creator:o,annotation:s,name:l}}function h(e,t){var n=e.getBoundingClientRect();return n.x/=t,n.y/=t,n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=n(61),d=n(24),u=n(52),h=n(11),f=n(2),p=n.n(f),m=n(102),_=n(16),g=c.c.ListItemView,v=g.extend({_logNamespace:"dataset",className:"".concat(g.prototype.className," dataset"),id:function(){return["dataset",this.model.get("id")].join("-")},initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("".concat(this,".initialize:"),e),g.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank"},render:function(){var e=g.prototype.render.apply(this,arguments);return this._mountVueNametags(),e},_mountVueNametags:function(){var e=this.$(".nametags")[0],t=this.model.attributes,n=t.id,i=t.model_class,a=t.tags,r="".concat(i,"-").concat(n);Object(m.b)({storeKey:r,tags:a},e)},_setUpListeners:function(){g.prototype._setUpListeners.call(this);var e=this;return e.listenTo(e.model,{change:function(t){e.model.changedAttributes().state&&e.model.inReadyState()&&e.expanded&&!e.model.hasDetails()?e.model.fetch({silent:!0}).done((function(){e.render()})):i.default.has(e.model.changed,"tags")&&2===i.default.keys(e.model.changed).length?e._mountVueNametags():e.render()}})},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):r.a.when()},remove:function(e,t){var n=this;e=e||this.fxSpeed,this.$el.fadeOut(e,(function(){s.a.View.prototype.remove.call(n),t&&t.call(n)}))},_swapNewRender:function(e){return g.prototype._swapNewRender.call(this,e),this.model.has("state")&&this.$el.addClass("state-".concat(this.model.get("state"))),this.$el},_renderPrimaryActions:function(){return[this._renderDisplayButton()]},_renderDisplayButton:function(){var e=this.model.get("state");if(e===d.a.NOT_VIEWABLE||e===d.a.DISCARDED||!this.model.get("accessible"))return null;var t={target:this.linkTarget,classes:"display-btn"};if(this.model.get("purged"))t.disabled=!0,t.title=p()("Cannot display datasets removed from disk");else if(e===d.a.UPLOAD)t.disabled=!0,t.title=p()("This dataset must finish uploading before it can be viewed");else if(e===d.a.NEW)t.disabled=!0,t.title=p()("This dataset is not yet viewable");else{t.title=p()("View data"),t.href=this.model.urls.display;var n=this;t.onclick=function(e){var t=Object(l.a)();if(t.frame&&t.frame.active){var i=n.model.get("element_id")||n.model.get("id");t.frame.addDataset(i),e.preventDefault()}}}return t.faIcon="fa-eye",Object(u.a)(t)},_renderDetails:function(){if(this.model.get("state")===d.a.NOT_VIEWABLE)return r()(this.templates.noAccess(this.model.toJSON(),this));var e=g.prototype._renderDetails.call(this);return e.find(".actions .left").empty().append(this._renderSecondaryActions()),e.find(".summary").html(this._renderSummary()).prepend(this._renderDetailMessages()),e.find(".display-applications").html(this._renderDisplayApplications()),this._setUpBehaviors(e),e},_renderSummary:function(){var e=this.model.toJSON(),t=this.templates.summaries[e.state];return(t=t||this.templates.summaries.unknown)(e,this)},_renderDetailMessages:function(){var e=this,t=r()('<div class="detail-messages"></div>'),n=e.model.toJSON();return i.default.each(e.templates.detailMessages,(function(i){t.append(r()(i(n,e)))})),t},_renderDisplayApplications:function(){return this.model.isDeletedOrPurged()?"":[this.templates.displayApplications(this.model.get("display_apps"),this),this.templates.displayApplications(this.model.get("display_types"),this)].join("")},_renderSecondaryActions:function(){switch(this.debug("_renderSecondaryActions"),this.model.get("state")){case d.a.NOT_VIEWABLE:return[];case d.a.OK:case d.a.FAILED_METADATA:case d.a.ERROR:return[this._renderDownloadButton(),this._renderClipboardButton(),this._renderShowParamsButton()]}return[this._renderShowParamsButton()]},_renderShowParamsButton:function(){return Object(u.a)({title:p()("View details"),classes:"params-btn",href:this.model.urls.show_params,target:this.linkTarget,faIcon:"fa-info-circle",onclick:function(e){var t=Object(l.a)();t.frame&&t.frame.active&&(t.frame.add({title:p()("Dataset details"),url:this.href}),e.preventDefault(),e.stopPropagation())}})},isPurged:function(){return!(!this.model.get("purged")&&this.model.hasData())},_renderClipboardButton:function(){var e=this.model.attributes.permissions&&1===this.model.attributes.permissions.access.length&&this.model.attributes.permissions.access.includes(Object(l.a)().user.id),t=this.model.urls;if(!this.isPurged()&&t.download){var n=p()("Copy link"),i="";return e&&(n=p()("Preferences restrict sharing"),i="opacity: 0.3"),Object(u.a)({faIcon:"fa-chain",style:i,title:n,onclick:function(){e?_.a.warning("Dataset is not sharable"):navigator.clipboard.writeText("".concat(window.location.origin).concat(t.download)).then((function(){_.a.info("Link is copied to your clipboard")}))}})}},_renderDownloadButton:function(){return this.isPurged()?null:i.default.isEmpty(this.model.get("meta_files"))?r()('\n                <a class="download-btn icon-btn" href="'.concat(this.model.urls.download,'" title="').concat(p()("Download"),'">\n                    <span class="fa fa-floppy-o"></span>\n                </a>')):this._renderMetaFileDownloadButton()},_renderMetaFileDownloadButton:function(){var e=this.model.urls;return r()('\n                <div class="metafile-dropdown dropdown">\n                    <a class="download-btn icon-btn" href="'.concat(e.download,'" data-toggle="dropdown" title="').concat(p()("Download"),'">\n                        <span class="fa fa-floppy-o"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                        <a class="dropdown-item" href="').concat(e.download,'">\n                            ').concat(p()("Download dataset"),"\n                        </a>\n                        ").concat(i.default.map(this.model.get("meta_files"),(function(t){return'<a class="dropdown-item" href="'.concat(e.meta_download+t.file_type,'">\n                                    ').concat(p()("Download")," ").concat(t.file_type,"\n                                </a>")})),"\n                    </div>\n                </div>"))},events:i.default.extend(i.default.clone(g.prototype.events),{"click .display-btn":function(e){this.trigger("display",this,e)},"click .params-btn":function(e){this.trigger("params",this,e)},"click .download-btn":function(e){this.trigger("download",this,e)}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetListItemView(".concat(e,")")}});v.prototype.templates=function(){var e=i.default.extend({},g.prototype.templates.warnings,{failed_metadata:h.a.wrapTemplate(['<% if( model.state === "failed_metadata" ){ %>','<div class="warningmessagesmall">',p()("An error occurred setting the metadata for this dataset"),"</div>","<% } %>"]),error:h.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',p()("There was an error getting the data for this dataset"),": <%- model.error %>","</div>","<% } %>"]),purged:h.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',p()("This dataset has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:h.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',p()("This dataset has been deleted"),"</div>","<% } %>"])}),t=h.a.wrapTemplate(['<div class="details">','<div class="summary"></div>','<div class="actions clear">','<div class="left"></div>','<div class="right"></div>',"</div>","<% if( !dataset.deleted && !dataset.purged ){ %>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="display-applications"></div>',"<% if( dataset.peek ){ %>",'<pre class="dataset-peek"><%= dataset.peek %></pre>',"<% } %>","<% } %>","</div>"],"dataset"),n=h.a.wrapTemplate(['<div class="details">','<div class="summary">',p()("You do not have permission to view this dataset"),"</div>","</div>"],"dataset"),a={};a[d.a.OK]=a[d.a.FAILED_METADATA]=h.a.wrapTemplate(["<% if( dataset.misc_blurb ){ %>",'<div class="blurb">','<span class="value"><%- dataset.misc_blurb %></span>',"</div>","<% } %>","<% if( dataset.file_ext ){ %>",'<div class="datatype">','<label class="prompt">',p()("format"),"</label>",'<span class="value"><%- dataset.file_ext %></span>',"</div>","<% } %>","<% if( dataset.metadata_dbkey ){ %>",'<div class="dbkey">','<label class="prompt">',p()("database"),"</label>",'<span class="value">',"<%- dataset.metadata_dbkey %>","</span>","</div>","<% } %>","<% if( dataset.misc_info ){ %>",'<div class="info">','<span class="value"><%- dataset.misc_info %></span>',"</div>","<% } %>"],"dataset"),a[d.a.NEW]=h.a.wrapTemplate(["<div>",p()("This is a new dataset and not all of its data are available yet"),"</div>"],"dataset"),a[d.a.NOT_VIEWABLE]=h.a.wrapTemplate(["<div>",p()("You do not have permission to view this dataset"),"</div>"],"dataset"),a[d.a.DISCARDED]=h.a.wrapTemplate(["<div>",p()("The job creating this dataset was cancelled before completion"),"</div>"],"dataset"),a[d.a.QUEUED]=h.a.wrapTemplate(["<div>",p()("This job is waiting to run"),"</div>"],"dataset"),a[d.a.RUNNING]=h.a.wrapTemplate(["<div>",p()("This job is currently running"),"</div>"],"dataset"),a[d.a.UPLOAD]=h.a.wrapTemplate(["<div>",p()("This dataset is currently uploading"),"</div>"],"dataset"),a[d.a.SETTING_METADATA]=h.a.wrapTemplate(["<div>",p()("Metadata is being auto-detected"),"</div>"],"dataset"),a[d.a.PAUSED]=h.a.wrapTemplate(["<div>",p()('This job is paused. Use the "Resume Paused Jobs" in the history menu to resume'),"</div>",'<div class="info"><%- dataset.misc_info %></div>'],"dataset"),a[d.a.ERROR]=h.a.wrapTemplate(["<% if( !dataset.purged ){ %>","<div><%- dataset.misc_blurb %></div>","<% } %>",'<span class="help-text">',p()("An error occurred with this dataset"),":</span>",'<div class="job-error-text"><%- dataset.misc_info %></div>'],"dataset"),a[d.a.EMPTY]=h.a.wrapTemplate(["<div>",p()("No data"),": <i><%- dataset.misc_blurb %></i></div>"],"dataset"),a.unknown=h.a.wrapTemplate(['<div>Error: unknown dataset state: "<%- dataset.state %>"</div>'],"dataset");var r={resubmitted:h.a.wrapTemplate(["<% if( model.resubmitted ){ %>",'<div class="resubmitted-msg infomessagesmall">',p()("The job creating this dataset has been resubmitted"),"</div>","<% } %>"])},o=h.a.wrapTemplate(["<% _.each( apps, function( app ){ %>",'<div class="display-application">','<span class="display-application-location"><%- app.label %></span> ','<span class="display-application-links">',"<% _.each( app.links, function( link ){ %>",'<a target="<%- link.target %>" href="<%- link.href %>">',"<% print( _l( link.text ) ); %>","</a> ","<% }); %>","</span>","</div>","<% }); %>"],"apps");return i.default.extend({},g.prototype.templates,{warnings:e,details:t,noAccess:n,summaries:a,detailMessages:r,displayApplications:o})}(),t.b={DatasetListItemView:v}},function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=n(32),f=n(54),p={TrackHeaderView:s.a.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append(r()("<div/>").addClass(this.model.drag_handle_class)),this.$el.append(r()("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick((function(e){e.stopPropagation()})),this.$el.append(r()("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var e=this;this.icons_div=r()("<div/>").addClass("track-icons").hide().appendTo(this.$el),i.default.each(this.model.action_icons_def,(function(t){e.add_action_icon(t.name,t.title,t.css_class,t.on_click_fn,t.prepend,t.hide)})),this.set_display_modes(this.model.display_modes)},add_action_icon:function(e,t,n,i,a,o){var s=this;this.action_icons[e]=r()("<a/>").attr("title",t).addClass("icon-button").addClass(n).tooltip().click((function(){i(s.model)})).appendTo(this.icons_div),o&&this.action_icons[e].hide()},set_display_modes:function(e,t){if(e){this.model.display_modes=e,this.model.mode=t||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")"));for(var n=this.model,i={},a=0,r=n.display_modes.length;a<r;a++){var o=n.display_modes[a];i[o]=function(e){return function(){n.change_mode(e)}}(o)}Object(f.b)(this.action_icons.mode_icon,i)}}})},m=n(51),_=i.default.extend,g=function(e,t){this.slot=e,this.feature=t},v=function(e,t,n,i){this.slots={},this.start_end_dct={},this.w_scale=e,this.mode=t,this.include_label="Pack"===t,this.max_rows=n,this.measureText=i};_(v.prototype,{_get_draw_coords:function(e){var t=Math.floor(e[1]*this.w_scale),n=Math.ceil(e[2]*this.w_scale),i=e[3];if(void 0!==i&&this.include_label){var a=this.measureText(i).width+7;t-a>=0?t-=a:n+=a}return[t,n]},_find_slot:function(e){for(var t=e[0],n=e[1],i=0;i<=this.max_rows;i++){var a=!1,r=this.start_end_dct[i];if(void 0!==r)for(var o=0,s=r.length;o<s;o++){var l=r[o];if(n>l[0]&&t<l[1]){a=!0;break}}if(!a)return i}return-1},slot_features:function(e){for(var t,n,i=this.start_end_dct,a=[],r=0,o=0,s=e.length;o<s;o++){n=(t=e[o])[0];var l=this.slots[n];if(l){if(t[1]<l.feature[1]||l.feature[2]<t[2])for(var c=this._get_draw_coords(l.feature),d=this._get_draw_coords(t),u=this.start_end_dct[l.slot],h=0;h<u.length;h++){var f=u[h];f[0]===c[0]&&f[1]===c[1]&&(u[h]=d)}r=Math.max(r,this.slots[n].slot)}else a.push(o)}for(var p=0,m=a.length;p<m;p++){n=(t=e[a[p]])[0];var _=this._get_draw_coords(t),v=this._find_slot(_);v>=0&&(void 0===i[v]&&(i[v]=[]),i[v].push(_),this.slots[n]=new g(v,t),r=Math.max(r,v))}return r+1}});var y=v;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=C(e);if(t){var a=C(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}var O=1001,D=1002,L=1003,E=1004,A=1005,I=1006;function P(e,t){var n=e[0],i=e[1],a=t[0],r=t[1];return n<a?i<=a?O:i<=r?L:D:n>r?I:i<=r?A:E}function Y(e,t){var n=P(e,t);return n!==O&&n!==I}function R(e,t,n,i){var a=t-i/2,r=t+i/2,o=n-Math.sqrt(3*i/2);e.beginPath(),e.moveTo(a,o),e.lineTo(r,o),e.lineTo(t,n),e.lineTo(a,o),e.strokeStyle=this.fillStyle,e.fill(),e.stroke(),e.closePath()}var H=function(){function e(t){M(this,e),this.default_val=t||1}return j(e,[{key:"gen_val",value:function(e){return this.default_val}}]),e}(),N=function e(t){M(this,e),this.incomplete_features=t.incomplete_features,this.feature_mapper=t.feature_mapper},$=function(){function e(t,n,a,r,o){M(this,e),this.data=t,this.default_prefs={},this.view_start=n,this.view_end=a,this.prefs=i.default.extend({},this.default_prefs,r),this.mode=o}return j(e,[{key:"draw",value:function(e,t,n,i){}},{key:"get_start_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,-.5)}},{key:"get_end_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,.5)}},{key:"get_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,0)}},{key:"_chrom_pos_to_draw_pos",value:function(e,t,n){return Math.floor(t*(Math.max(0,e-this.view_start)+n))}}],[{key:"default_prefs",get:function(){return{}}}]),e}(),F=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o){return M(this,n),t.call(this,e,i,a,r,o)}return j(n,[{key:"draw",value:function(e,t,n,a){var r=!1,o=this.prefs.min_value,s=this.prefs.max_value,l=s-o,c=n,d=this.view_start,u=this.mode,h=this.data;e.save();var f,p,m,_=Math.round(n+o/l*n);"Intensity"!==u&&(e.fillStyle="#aaa",e.fillRect(0,_,t,1)),e.beginPath(),m=h.length>1?i.default.map(h.slice(0,-1),(function(e,t){return Math.ceil((h[t+1][0]-h[t][0])*a)})):[10];for(var g,v=this.prefs.block_color||this.prefs.color,y=parseInt(v.slice(1),16),b=(16711680&y)>>16,w=(65280&y)>>8,k=255&y,x=!1,S=!1,C=0,M=h.length;C<M;C++)if(e.fillStyle=e.strokeStyle=v,x=S=!1,g=m[C],f=Math.floor((h[C][0]-d-.5)*a),null!==(p=h[C][1])){if(p<o?(S=!0,p=o):p>s&&(x=!0,p=s),"Histogram"===u)p=Math.round(p/l*c),e.fillRect(f,_,g,-p);else if("Intensity"===u){var T=(p-o)/l,j=Math.round(b+(255-b)*(1-T)),O=Math.round(w+(255-w)*(1-T)),D=Math.round(k+(255-k)*(1-T));e.fillStyle="rgb(".concat(j,",").concat(O,",").concat(D,")"),e.fillRect(f,0,g,c)}else p=Math.round(c-(p-o)/l*c),r?e.lineTo(f,p):(r=!0,"Filled"===u?(e.moveTo(f,c),e.lineTo(f,p)):e.moveTo(f,p));var L;if(e.fillStyle=this.prefs.overflow_color,x||S)"Histogram"===u||"Intensity"===u?L=g:(f-=2,L=4),x&&e.fillRect(f,0,L,3),S&&e.fillRect(f,c-3,L,3);e.fillStyle=v}else r&&"Filled"===u&&e.lineTo(f,c),r=!1;"Filled"===u?(r&&(e.lineTo(f,_),e.lineTo(0,_)),e.fill()):e.stroke(),e.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Histogram",color:"#000",overflow_color:"#F66"}}}]),n}($),W=function(){function e(t){M(this,e),this.feature_positions={},this.slot_height=t,this.translation=0,this.y_translation=0}return j(e,[{key:"map_feature_data",value:function(e,t,n,i){this.feature_positions[t]||(this.feature_positions[t]=[]),this.feature_positions[t].push({data:e,x_start:n,x_end:i})}},{key:"get_feature_data",value:function(e,t){var n,i=Math.floor((t-this.y_translation)/this.slot_height);if(!this.feature_positions[i])return null;e+=this.translation;for(var a=0;a<this.feature_positions[i].length;a++)if(e>=(n=this.feature_positions[i][a]).x_start&&e<=n.x_end)return n.data}}]),e}(),z=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o,s,l){var c;return M(this,n),(c=t.call(this,e,i,a,r,o)).alpha_scaler=s||new H,c.height_scaler=l||new H,c.max_label_length=200,c}return j(n,[{key:"get_required_height",value:function(e,t){var n=this.get_row_height(),i=n,a=this.mode;return"no_detail"!==a&&"Squish"!==a&&"Pack"!==a||(n=e*i),n+this.get_top_padding(t)}},{key:"get_top_padding",value:function(e){return 0}},{key:"draw",value:function(e,t,n,i,a){e.save(),e.fillStyle=this.prefs.block_color,e.textAlign="right";for(var r,o=this.get_row_height(),s=new W(o),l=[],c=0,d=this.data.length;c<d;c++){var u=this.data[c],h=u[0],f=u[1],p=u[2],m=a&&void 0!==a[h]?a[h].slot:null;("Dense"===this.mode||null!==m)&&f<this.view_end&&p>this.view_start&&(r=this.draw_element(e,this.mode,u,m,this.view_start,this.view_end,i,o,t),s.map_feature_data(u,m,r[0],r[1]),(f<this.view_start||p>this.view_end)&&l.push(u))}return e.restore(),s.y_translation=this.get_top_padding(t),new N({incomplete_features:l,feature_mapper:s})}},{key:"draw_element",value:function(e,t,n,i,a,r,o,s,l){return[0,0]}}],[{key:"default_prefs",get:function(){return{block_color:"#FFF",connector_color:"#FFF"}}}]),n}($),U=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o,s,l){var c;return M(this,n),(c=t.call(this,e,i,a,r,o,s,l)).draw_background_connector=!0,c.draw_individual_connectors=!1,c}return j(n,[{key:"get_row_height",value:function(){var e=this.mode;return"Dense"===e?10:"no_detail"===e?3:"Squish"===e?5:10}},{key:"draw_element",value:function(e,t,n,i,a,r,o,s,l){var c=n[1],d=n[2],u=n[3],h=n[4],f=Math.floor(Math.max(0,(c-a-.5)*o)),p=Math.ceil(Math.min(l,Math.max(0,(d-a-.5)*o))),m=f,_=p,g=("Dense"===t?0:0+i)*s+this.get_top_padding(l),v=null,y=null,b=h&&"+"!==h&&"."!==h?this.prefs.reverse_strand_color:this.prefs.block_color,w=this.prefs.label_color;if(e.globalAlpha=this.alpha_scaler.gen_val(n),"Dense"===t&&(i=1),"no_detail"===t)e.fillStyle=b,e.fillRect(f,g+5,p-f,1);else{var k,x,S=n[5],C=n[6],M=n[7],T=!0;if(S&&C&&(v=Math.floor(Math.max(0,(S-a)*o)),y=Math.ceil(Math.min(l,Math.max(0,(C-a)*o)))),"Squish"===t?(k=1,x=3,T=!1):(k=5,x=9),M){var j,O;"Squish"===t||"Dense"===t?(j=g+Math.floor(1.5)+1,O=1):h?(j=g,O=x):(j+=2.5,O=1),this.draw_background_connector&&("Squish"===t||"Dense"===t?e.fillStyle="#ccc":h?"+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand")):e.fillStyle="#ccc",e.fillRect(f,j,p-f,O));for(var D=0,L=M.length;D<L;D++){var E,A,I=M[D],P=Math.floor(Math.max(0,(I[0]-a-.5)*o)),Y=Math.ceil(Math.min(l,Math.max((I[1]-a-.5)*o)));if(!(P>Y)){if(e.fillStyle=b,e.fillRect(P,g+(x-k)/2+1,Y-P,k),void 0!==v&&C>S&&!(P>y||Y<v)){var R=Math.max(P,v),H=Math.min(Y,y);e.fillRect(R,g+1,H-R,x),1===M.length&&"Pack"===t&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),R+14<H&&(R+=2,H-=2),e.fillRect(R,g+1,H-R,x))}this.draw_individual_connectors&&E&&this.draw_connector(e,E,A,P,Y,g),E=P,A=Y}}if("Pack"===t){e.globalAlpha=1,e.fillStyle="white";var N=this.height_scaler.gen_val(n),$=Math.ceil(x*N),F=Math.round((x-$)/2);1!==N&&(e.fillRect(f,j+1,p-f,F),e.fillRect(f,j+x-F+1,p-f,F))}}else e.fillStyle=b,e.fillRect(f,g+1,p-f,x),h&&T&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),e.fillRect(f,g+1,p-f,x));e.globalAlpha=1,u&&"Pack"===t&&c>a&&(e.fillStyle=w,0===a&&f-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,p+2,g+8,this.max_label_length),_+=e.measureText(u).width+2):(e.textAlign="right",e.fillText(u,f-2,g+8,this.max_label_length),m-=e.measureText(u).width+2))}return e.globalAlpha=1,[m,_]}}]),n}(z),V=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o,s,l,c,d){var u;return M(this,n),(u=t.call(this,e,i,a,r,o,s,l)).ref_seq=c?c.data:null,u.base_color_fn=d,u}return j(n,[{key:"get_row_height",value:function(){var e,t=this.mode;return"Dense"===t?e=10:"Squish"===t?e=5:(e=10,this.prefs.show_insertions&&(e*=2)),e}},{key:"_parse_cigar",value:function(e){var t=[[0,0]],n=t[0],a=0,r=i.default.map(e.match(/[0-9]+[MIDNSHP=X]/g),(function(e){var i=parseInt(e.slice(0,-1),10),r=e.slice(-1);return"N"===r?0!==n[1]&&(n=[a+i,a+i],t.push(n)):-1==="ISHP".indexOf(r)&&(n[1]+=i,a+=i),["MIDNSHP=X".indexOf(r),i]}));return{blocks:t,cigar:r}}},{key:"draw_read",value:function(e,t,n,i,a,r,o,s,l,c){var d=function(e,t,n){return-1!=="M=NXD".indexOf(t)&&(e+=n),e},u=function(e,t,n){return-1!=="IX".indexOf(t)&&(e+=n),e},h=function(e){return Math.floor(Math.max(0,(e-a-.5)*n))};e.textAlign="center";var f,p,m,_,g,v,y=[a,r],b=0,w=0,k=Math.round(n/2),x=e.canvas.manager.char_width_px,S="+"===l?this.prefs.detail_block_color:this.prefs.reverse_strand_color,C="Pack"===t,M=C?9:3,T=i+1,j=new X(e,M,n,t),O=[],I=this._parse_cigar(s);s=I.cigar,f=I.blocks;for(var H=0;H<f.length;H++){var N=f[H];Y([o+N[0],o+N[1]],y)&&((p=h(o+N[0]))===(m=h(o+N[1]))&&(m+=1),e.fillStyle=S,e.fillRect(p,T,m-p,M))}for(var $=0,F=s.length;$<F;$++){var W=s[$],z="MIDNSHP=X"[W[0]],U=W[1],V=o+b;if(p=h(V),m=h(V+U),Y([V,V+U],y))switch(p===m&&(m+=1),z){case"H":case"S":case"P":break;case"M":b+=U;break;case"=":case"X":var B="";"X"===z?B=c.slice(w,w+U):this.ref_seq&&(B=this.ref_seq.slice(Math.max(0,V-a),Math.min(V-a+U,r-a)));for(var q=Math.max(V,a),G=0;G<B.length;G++)if(B&&!this.prefs.show_differences||"X"===z){var J=Math.floor(Math.max(0,(q+G-a)*n));e.fillStyle=this.base_color_fn(B[G]),C&&n>x?e.fillText(B[G],J,i+9):n>.05&&e.fillRect(J-k,T,Math.max(1,Math.round(n)),M)}"X"===z&&(w+=U),b+=U;break;case"N":e.fillStyle="#ccc",e.fillRect(p,T+(M-1)/2,m-p,1),b+=U;break;case"D":j.draw_deletion(p,T,U),b+=U;break;case"I":var K=p-k;if(Y([V,V+U],y)){var Q=c.slice(w,w+U);if(this.prefs.show_insertions){var Z=p-(m-p)/2;if(("Pack"===t||"Auto"===this.mode)&&void 0!==c&&n>x){switch(e.fillStyle="yellow",e.fillRect(Z-k,i-9,m-p,9),O[O.length]={type:"triangle",data:[K,i+4,5]},e.fillStyle="#ccc",P([V,V+U],y)){case L:Q=Q.slice(a-V);break;case E:Q=Q.slice(0,V-r);break;case A:break;case D:Q=Q.slice(a-V,V-r)}for(var ee=0,te=Q.length;ee<te;ee++){var ne=Math.floor(Math.max(0,(V+ee-a)*n));e.fillText(Q[ee],ne-(m-p)/2,i)}}else e.fillStyle="yellow",e.fillRect(Z,i+("Dense"!==this.mode?2:5),m-p,"Dense"!==t?3:9)}else("Pack"===t||"Auto"===this.mode)&&void 0!==c&&n>x&&O.push({type:"text",data:[Q.length,K,i+9]})}w+=U}else b=d(b,z,U),w=u(w,z,U)}e.fillStyle="yellow";for(var ie=0;ie<O.length;ie++)g=(_=O[ie]).type,v=_.data,"text"===g?(e.save(),e.font="bold ".concat(e.font),e.fillText(v[0],v[1],v[2]),e.restore()):"triangle"===g&&R(e,v[0],v[1],v[2])}},{key:"draw_element",value:function(e,t,n,i,a,r,o,s,l){var c=n[1],d=n[2],u=n[3],h=Math.floor(Math.max(-.5*o,(c-a-.5)*o)),f=Math.ceil(Math.min(l,Math.max(0,(d-a-.5)*o))),p=("Dense"===t?0:0+i)*s,m="Pack"===t?9:3;if(n[5]instanceof Array){var _=!0;n[4][1]>=a&&n[4][0]<=r&&n[4][2]?this.draw_read(e,t,o,p,a,r,n[4][0],n[4][2],n[4][3],n[4][4]):_=!1,n[5][1]>=a&&n[5][0]<=r&&n[5][2]?this.draw_read(e,t,o,p,a,r,n[5][0],n[5][2],n[5][3],n[5][4]):_=!1;var g=Math.ceil(Math.min(l,Math.max(-.5*o,(n[4][1]-a-.5)*o))),v=Math.floor(Math.max(-.5*o,(n[5][0]-a-.5)*o));if(_&&v>g){e.fillStyle="#ccc";var y=p+1+(m-1)/2;!function(e,t,n,i,a,r){void 0===r&&(r=4);var o,s=i-t,l=a-n,c=Math.floor(Math.sqrt(s*s+l*l)/r),d=s/c,u=l/c;for(o=0;o<c;o++,t+=d,n+=u)o%2==0&&e.fillRect(t,n,r,1)}(e,g,y,v,y)}}else this.draw_read(e,t,o,p,a,r,c,n[4],n[5],n[6]);return"Pack"===t&&c>=a&&"."!==u&&(e.fillStyle=this.prefs.label_color,0===a&&h-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,f+2,p+9,this.max_label_length)):(e.textAlign="right",e.fillText(u,h-2,p+9,this.max_label_length))),[0,0]}}]),n}(z),B=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o,s,l){var c;return M(this,n),(c=t.call(this,e,i,a,r,o,s,l)).longest_feature_length=c.calculate_longest_feature_length(),c.draw_background_connector=!1,c.draw_individual_connectors=!0,c}return j(n,[{key:"calculate_longest_feature_length",value:function(){for(var e=0,t=0,n=this.data.length;t<n;t++){var i=this.data[t],a=i[1],r=i[2];e=Math.max(e,r-a)}return e}},{key:"get_top_padding",value:function(e){var t=e/(this.view_end-this.view_start);return Math.min(128,Math.ceil(this.longest_feature_length/2*t))}},{key:"draw_connector",value:function(e,t,n,i,a,r){var o=(n+i)/2;i-o>0&&(e.beginPath(),e.arc(o,r,i-o,Math.PI,0),e.stroke())}}]),n}(U),q=function(){function e(t,n){M(this,e),Array.isArray(t)?this.rgb=t:6==t.length?this.rgb=t.match(/.{2}/g).map((function(e){return parseInt(e,16)})):7==t.length?this.rgb=t.substring(1,7).match(/.{2}/g).map((function(e){return parseInt(e,16)})):this.rgb=t.split("").map((function(e){return parseInt(e+e,16)})),this.alpha="number"==typeof n?n:1}return j(e,[{key:"eval",value:function(){return this}},{key:"toCSS",value:function(){return this.alpha<1?"rgba(".concat(this.rgb.map((function(e){return Math.round(e)})).concat(this.alpha).join(", "),")"):"#".concat(this.rgb.map((function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0".concat(e):e})).join(""))}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,i=this.rgb[1]/255,a=this.rgb[2]/255,r=this.alpha,o=Math.max(n,i,a),s=Math.min(n,i,a),l=(o+s)/2,c=o-s;if(o===s)e=t=0;else{switch(t=l>.5?c/(2-o-s):c/(o+s),o){case n:e=(i-a)/c+(i<a?6:0);break;case i:e=(a-n)/c+2;break;case a:e=(n-i)/c+4}e/=6}return{h:360*e,s:t,l:l,a:r}}},{key:"toARGB",value:function(){var e=[Math.round(255*this.alpha)].concat(this.rgb);return"#".concat(e.map((function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0".concat(e):e})).join(""))}},{key:"mix",value:function(t,n){var i=n,a=2*i-1,r=this.toHSL().a-t.toHSL().a,o=((a*r==-1?a:(a+r)/(1+a*r))+1)/2,s=1-o;return new e([this.rgb[0]*o+t.rgb[0]*s,this.rgb[1]*o+t.rgb[1]*s,this.rgb[2]*o+t.rgb[2]*s],this.alpha*i+t.alpha*(1-i))}}]),e}(),G=function(){function e(t,n,i,a){M(this,e),this.start_color=new q(t),this.end_color=new q(n),this.start_value=i,this.end_value=a,this.value_range=a-i}return j(e,[{key:"map_value",value:function(e){return e=Math.max(e,this.start_value),e=((e=Math.min(e,this.end_value))-this.start_value)/this.value_range,this.start_color.mix(this.end_color,1-e).toCSS()}}]),e}(),J=function(){function e(t,n,i,a,r){M(this,e),this.positive_ramp=new G(n,i,0,r),this.negative_ramp=new G(n,t,0,-a),this.start_value=a,this.end_value=r}return j(e,[{key:"map_value",value:function(e){return e=Math.max(e,this.start_value),(e=Math.min(e,this.end_value))>=0?this.positive_ramp.map_value(e):this.negative_ramp.map_value(-e)}}]),e}(),K=function(e){w(n,e);var t=x(n);function n(e,i,a,r,o){var s,l,c;if(M(this,n),void 0===(s=t.call(this,e,i,a,r,o)).prefs.min_value){var d=1/0;for(l=0,c=s.data.length;l<c;l++)d=Math.min(d,s.data[l][6]);s.prefs.min_value=d}if(void 0===s.prefs.max_value){var u=-1/0;for(l=0,c=s.data.length;l<c;l++)u=Math.max(u,s.data[l][6]);s.prefs.max_value=u}return s}return j(n,[{key:"draw",value:function(e,t,n,i){var a,r,o,s,l,c,d=this.prefs.min_value,u=this.prefs.max_value,h=this.view_start,f=1/Math.sqrt(2),p=new J(this.prefs.neg_color,"#FFFFFF",this.prefs.pos_color,d,u),m=function(e){return(e-h)*i};e.save(),e.rotate(-45*Math.PI/180),e.scale(f,f);for(var _=0,g=this.data.length;_<g;_++)r=m((a=this.data[_])[1]),o=m(a[2]),s=m(a[4]),l=m(a[5]),c=a[6],e.fillStyle=p.map_value(c),e.fillRect(r,s,o-r,l-s);e.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Heatmap",pos_color:"#FF8C00",neg_color:"#4169E1"}}}]),n}($),X=function(){function e(t,n,i,a){M(this,e),this.ctx=t,this.row_height=n,this.px_per_base=i,this.draw_details=("Pack"===a||"Auto"===a)&&i>=t.canvas.manager.char_width_px,this.delete_details_thickness=.2}return j(e,[{key:"draw_deletion",value:function(e,t,n){this.ctx.fillStyle="black";var i=(this.draw_details?this.delete_details_thickness:1)*this.row_height;t+=.5*(this.row_height-i),this.ctx.fillRect(e,t,n*this.px_per_base,i)}}]),e}(),Q={Scaler:H,LinePainter:F,LinkedFeaturePainter:U,ReadPainter:V,ArcLinkedFeaturePainter:B,DiagonalHeatmapPainter:K,VariantPainter:function(e){w(n,e);var t=x(n);function n(e,i,a,r,o,s){var l;return M(this,n),(l=t.call(this,e,i,a,r,o)).base_color_fn=s,l.divider_height=1,l}return j(n,[{key:"get_row_height",value:function(){var e=this.mode;return"Dense"===e?10:"Squish"===e?5:10}},{key:"get_required_height",value:function(e){var t=this.prefs.summary_height;return e>1&&this.prefs.show_sample_data&&(t+=this.divider_height+e*this.get_row_height()),t}},{key:"draw",value:function(e,t,n,a){e.save();var r,o,s,l,c,d,u,h,f,p,m,_=function(e,t){var n=e.length,i=t.length,a=0,r=1,o=null;return"-"===t?(o="deletion",r=e.length):0===e.indexOf(t)&&n>i?(o="deletion",r=n-i,a=i):0===t.indexOf(e)&&n<i&&(o="insertion",r=i-n,a=i),null!==o?{type:o,start:a,len:r}:{}},g=Math.max(1,Math.floor(a)),v=this.data.length?this.data[0][7].split(",").length:0,y="Squish"===this.mode?5:10,b=a<.1?y:"Squish"===this.mode?3:9,w=!0,k=new X(e,y,a,this.mode);1===v&&(y=b=a<e.canvas.manager.char_width_px?this.prefs.summary_height:y,k.row_height=y,w=!1),this.prefs.show_sample_data&&w&&(e.fillStyle="#F3F3F3",e.globalAlpha=1,e.fillRect(0,this.prefs.summary_height-this.divider_height,t,this.divider_height)),e.textAlign="center";for(var x=0;x<this.data.length;x++)if(o=(r=this.data[x])[1],s=r[3],l=[r[4].split(",")],c=r[7].split(","),d=r.slice(8),l=i.default.map(i.default.flatten(l),(function(e){var t={type:"snp",value:e,start:0},n=_(s,e);return i.default.extend(t,n)})),!(o<this.view_start||o>this.view_end)){if(w)for(e.fillStyle="#999999",e.globalAlpha=1,m=0;m<l.length;m++)for(h=this.get_start_draw_pos(o+l[m].start,a),e.fillRect(h,0,g,this.prefs.summary_height),f=this.prefs.summary_height,m=0;m<l.length;m++){e.fillStyle="deletion"===l[m].type?"black":this.base_color_fn(l[m].value);var S=d/c.length,C=Math.ceil(this.prefs.summary_height*S);e.fillRect(h,f-C,g,C),f-=C}if(this.prefs.show_sample_data)for(f=w?this.prefs.summary_height+this.divider_height:0,m=0;m<c.length;m++,f+=y)if(u=null,(p=c[m]?c[m].split(/\/|\|/):["0","0"])[0]===p[1]?"."===p[0]||"0"!==p[0]&&(u=l[parseInt(p[0],10)-1],e.globalAlpha=1):(u="0"!==p[0]?p[0]:p[1],u=l[parseInt(u,10)-1],e.globalAlpha=.5),u)if(h=this.get_start_draw_pos(o+u.start,a),"snp"===u.type){var M=u.value;e.fillStyle=this.base_color_fn(M),k.draw_details?e.fillText(M,this.get_draw_pos(o,a),f+y):e.fillRect(h,f+1,g,b)}else"deletion"===u.type&&k.draw_deletion(h,f+1,u.len)}e.restore()}}]),n}($)},Z=function(e){this.manager=null,this.name=e.name,this.index=e.index,this.tool_id=e.tool_id,this.tool_exp_name=e.tool_exp_name};i.default.extend(Z.prototype,{to_dict:function(){return{name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name}}});var ee=function(e,t,n){return r()("<a/>").attr("href","javascript:void(0);").attr("title",e).addClass("icon-button").addClass(t).tooltip().click(n)},te=function(e){Z.call(this,e),this.low="low"in e?e.low:-Number.MAX_VALUE,this.high="high"in e?e.high:Number.MAX_VALUE,this.min="min"in e?e.min:Number.MAX_VALUE,this.max="max"in e?e.max:-Number.MAX_VALUE,this.container=null,this.slider=null,this.slider_label=null;var t=this;t.parent_div=r()("<div/>").addClass("filter-row slider-row");var n=r()("<div/>").addClass("elt-label").appendTo(t.parent_div);r()("<span/>").addClass("slider-name").text("".concat(t.name,"  ")).appendTo(n);var i=r()("<span/>").text("".concat(this.low,"-").concat(this.high)),a=r()("<span/>").addClass("slider-value").appendTo(n).append("[").append(i).append("]");t.values_span=i;var o,s,l,c=r()("<div/>").addClass("slider").appendTo(t.parent_div);t.control_element=r()("<div/>").attr("id","".concat(t.name,"-filter-control")).appendTo(c),t.control_element.slider({range:!0,min:this.min,max:this.max,step:this.get_slider_step(this.min,this.max),values:[this.low,this.high],slide:function(e,n){t.slide(e,n)},change:function(e,n){t.control_element.slider("option","slide").call(t.control_element,e,n)}}),t.slider=t.control_element,t.slider_label=i,o=a,s=i,l=t.control_element,o.click((function(){var e=s.text(),t=parseFloat(l.slider("option","max")),n=t<=1?4:t<=1e6?t.toString().length:6,i=!1,a=r()(this).parents(".slider-row");a.addClass("input"),l.slider("option","values")&&(n=2*n+1,i=!0),s.text(""),r()("<input type='text'/>").attr("size",n).attr("maxlength",n).attr("value",e).appendTo(s).focus().select().click((function(e){e.stopPropagation()})).blur((function(){r()(this).remove(),s.text(e),a.removeClass("input")})).keyup((function(e){if(27===e.keyCode)r()(this).trigger("blur");else if(13===e.keyCode){var t=l.slider("option","min"),n=l.slider("option","max"),o=function(e){return isNaN(e)||e>n||e<t},s=r()(this).val();if(i){if(s=s.split("-"),o((s=[parseFloat(s[0]),parseFloat(s[1])])[0])||o(s[1]))return alert("Parameter value must be in the range [".concat(t,"-").concat(n,"]")),r()(this)}else if(o(s=parseFloat(s)))return alert("Parameter value must be in the range [".concat(t,"-").concat(n,"]")),r()(this);l.slider(i?"values":"value",s),a.removeClass("input")}}))}));var d=r()("<div/>").addClass("display-controls").appendTo(t.parent_div);this.transparency_icon=ee("Use filter for data transparency","layer-transparent",(function(){t.manager.alpha_filter!==t?(t.manager.alpha_filter=t,t.manager.parent_div.find(".layer-transparent").removeClass("active").hide(),t.transparency_icon.addClass("active").show()):(t.manager.alpha_filter=null,t.transparency_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),this.height_icon=ee("Use filter for data height","arrow-resize-090",(function(){t.manager.height_filter!==t?(t.manager.height_filter=t,t.manager.parent_div.find(".arrow-resize-090").removeClass("active").hide(),t.height_icon.addClass("active").show()):(t.manager.height_filter=null,t.height_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),t.parent_div.hover((function(){t.transparency_icon.show(),t.height_icon.show()}),(function(){t.manager.alpha_filter!==t&&t.transparency_icon.hide(),t.manager.height_filter!==t&&t.height_icon.hide()})),r()("<div style='clear: both;'/>").appendTo(t.parent_div)};i.default.extend(te.prototype,{to_dict:function(){var e=Z.prototype.to_dict.call(this);return i.default.extend(e,{type:"number",min:this.min,max:this.max,low:this.low,high:this.high})},copy:function(){return new te({name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name})},get_slider_step:function(e,t){return t-e<=2?.01:1},slide:function(e,t){var n=t.values;this.values_span.text("".concat(n[0],"-").concat(n[1])),this.low=n[0],this.high=n[1];var i=this;setTimeout((function(){n[0]===i.low&&n[1]===i.high&&i.manager.track.request_draw({force:!0,clear_after:!0})}),25)},applies_to:function(e){return e.length>this.index},_keep_val:function(e){return isNaN(e)||e>=this.low&&e<=this.high},keep:function(e){if(!this.applies_to(e))return!0;var t=e[this.index];if(t instanceof Array){for(var n=!0,i=0;i<t.length;i++)if(!this._keep_val(t[i])){n=!1;break}return n}return this._keep_val(e[this.index])},update_attrs:function(e){var t=!1;if(!this.applies_to(e))return t;var n=e[this.index];n instanceof Array||(n=[n]);for(var i=0;i<n.length;i++){var a=n[i];a<this.min&&(this.min=Math.floor(a),t=!0),a>this.max&&(this.max=Math.ceil(a),t=!0)}return t},update_ui_elt:function(){this.min<this.max?this.parent_div.show():this.parent_div.hide();var e=this.slider.slider("option","min"),t=this.slider.slider("option","max");(this.min<e||this.max>t)&&(this.slider.slider("option","min",this.min),this.slider.slider("option","max",this.max),this.slider.slider("option","step",this.get_slider_step(this.min,this.max)),this.slider.slider("option","values",[this.min,this.max]))}});var ne=function(e,t){if(this.track=e,this.alpha_filter=null,this.height_filter=null,this.filters=[],this.parent_div=r()("<div/>").addClass("filters").hide(),this.parent_div.bind("drag",(function(e){e.stopPropagation()})).click((function(e){e.stopPropagation()})).bind("dblclick",(function(e){e.stopPropagation()})).bind("keydown",(function(e){e.stopPropagation()})),t&&"filters"in t){for(var n,i=("alpha_filter"in t?t.alpha_filter:null),a=("height_filter"in t?t.height_filter:null),o=t.filters,s=0;s<o.length;s++)"number"===o[s].type?(n=new te(o[s]),this.add_filter(n),n.name===i&&(this.alpha_filter=n,n.transparency_icon.addClass("active").show()),n.name===a&&(this.height_filter=n,n.height_icon.addClass("active").show())):console.log("ERROR: unsupported filter: ",o[s]);"visible"in t&&t.visible&&this.parent_div.show()}if(0!==this.filters.length){var l=r()("<div/>").addClass("param-row").appendTo(this.parent_div),c=r()("<input type='submit'/>").attr("value","Run on complete dataset").appendTo(l),d=this;c.click((function(){d.run_on_dataset()}))}};i.default.extend(ne.prototype,{show:function(){this.parent_div.show()},hide:function(){this.parent_div.hide()},toggle:function(){this.parent_div.toggle()},visible:function(){return this.parent_div.is(":visible")},to_dict:function(){for(var e,t={},n=[],i=0;i<this.filters.length;i++)e=this.filters[i],n.push(e.to_dict());return t.filters=n,t.alpha_filter=this.alpha_filter?this.alpha_filter.name:null,t.height_filter=this.height_filter?this.height_filter.name:null,t.visible=this.parent_div.is(":visible"),t},copy:function(e){for(var t=new ne(e),n=0;n<this.filters.length;n++)t.add_filter(this.filters[n].copy());return t},add_filter:function(e){e.manager=this,this.parent_div.append(e.parent_div),this.filters.push(e)},remove_all:function(){this.filters=[],this.parent_div.children().remove()},init_filters:function(){for(var e=0;e<this.filters.length;e++){this.filters[e].update_ui_elt()}},clear_filters:function(){for(var e=0;e<this.filters.length;e++){var t=this.filters[e];t.slider.slider("option","values",[t.min,t.max])}this.alpha_filter=null,this.height_filter=null,this.parent_div.find(".icon-button").hide()},run_on_dataset:function(){for(var e,t,n=function(e,t,n){return t in e||(e[t]=n),e[t]},i={},a=0;a<this.filters.length;a++)(e=this.filters[a]).tool_id&&(e.min!==e.low&&((t=n(i,e.tool_id,[]))[t.length]="".concat(e.tool_exp_name," >= ").concat(e.low)),e.max!==e.high&&((t=n(i,e.tool_id,[]))[t.length]="".concat(e.tool_exp_name," <= ").concat(e.high)));var o=[];for(var s in i)o[o.length]=[s,i[s]];!function e(t,n){var i=n[0],a=i[0],o=i[1],s={cond:"(".concat(o.join(") and ("),")"),input:t,target_dataset_id:t,tool_id:a};n=n.slice(1),r.a.getJSON(run_tool_url,s,(function(t){var i=Object(c.a)();t.error?i.modal.show({title:u()("Filter Dataset"),body:"Error running tool ".concat(a),buttons:{Close:i.modal.hide()}}):0===n.length?i.modal.show({title:u()("Filtering Dataset"),body:"Filter(s) are running on the complete dataset. Outputs are in dataset's history.",buttons:{Close:i.modal.hide()}}):e(t.dataset_id,n)}))}(this.track.dataset_id,o)}});var ie=ne,ae=te,re=n(55),oe=n(108),se=n(78),le=n(426),ce={BBIDataManager:h.a.GenomeDataManager.extend({load_data:function(e,t,n,i){var a=r.a.Deferred();this.set_data(e,a);var o="".concat(Object(l.getAppRoot)(),"datasets/").concat(this.get("dataset").id,"/display"),s=this;return r.a.when(le.makeBwg(o)).then((function(t,n){r.a.when(t.readWigData(e.get("chrom"),e.get("start"),e.get("end"))).then((function(t){var n=[],i={max:Number.MIN_VALUE};t.forEach((function(e){i.max!==e.min-1&&(n.push([i.max+1,0]),n.push([e.min-2,0])),n.push([e.min-1,e.score]),n.push([e.max,e.score]),i=e}));var r={data:n,region:e,dataset_type:"bigwig"};s.set_data(e,r),a.resolve(r)}))})),a}})},de=(n(153),i.default.extend),ue={};function he(e,t){ue[e.attr("id")]=t}function fe(e,t,n,i){ue[e.attr("id")]=i,e.bind("drag",{handle:".".concat(t),relative:!0},(function(e,t){var n,i,a,o,s,l=r()(this).parent(),c=l.children(".track,.group"),d=ue[r()(this).attr("id")];if(0!==(i=r()(this).parents(".group")).length){o=(a=i.position().top)+i.outerHeight();var u=ue[i.attr("id")];if(t.offsetY<a)return r()(this).insertBefore(i),u.remove_drawable(d),void u.container.add_drawable_before(d,u);if(t.offsetY>o)return r()(this).insertAfter(i),u.remove_drawable(d),void u.container.add_drawable(d)}for(i=null,s=0;s<c.length;s++)if(o=(a=(n=r()(c.get(s))).position().top)+n.outerHeight(),n.is(".group")&&this!==n.get(0)&&t.offsetY>=a&&t.offsetY<=o)return t.offsetY-a<o-t.offsetY?n.find(".content-div").prepend(this):n.find(".content-div").append(this),d.container&&d.container.remove_drawable(d),void ue[n.attr("id")].add_drawable(d);for(s=0;s<c.length&&(n=r()(c.get(s)),!(t.offsetY<n.position().top)||n.hasClass("reference-track")||n.hasClass("intro"));s++);s===c.length?this!==c.get(s-1)&&(l.append(this),ue[l.attr("id")].move_drawable(d,s)):this!==c.get(s)&&(r()(this).insertBefore(c.get(s)),ue[l.attr("id")].move_drawable(d,t.deltaY>0?s-1:s))})).bind("dragstart",(function(){r()(this).addClass("dragging")})).bind("dragend",(function(){r()(this).removeClass("dragging")}))}var pe="A converter for this dataset is not installed. Please check your datatypes_conf.xml file.",me=["Histogram","Line","Filled","Intensity"];function _e(e,t){t||(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n}var ge=function e(t,n,i){if(e.id_counter||(e.id_counter=0),this.id=e.id_counter++,this.view=t,this.container=n,this.drag_handle_class=i.drag_handle_class,this.is_overview=!1,this.action_icons={},this.config=se.a.ConfigSettingCollection.from_models_and_saved_values(this.build_config_params(),i.prefs),this.config.get_value("name")||this.config.set_value("name",i.name),this.config_onchange&&this.config.on("change",this.config_onchange,this),this.container_div=this.build_container_div(),this.header_div=null,!1!==i.header){var a=new p.TrackHeaderView({model:this,id:this.id});this.header_div=a.$el,this.container_div.append(this.header_div);var r=a.icons_div;this.action_icons=a.action_icons,this.container_div.hover((function(){r.show()}),(function(){r.hide()}))}};ge.prototype.action_icons_def=[{name:"toggle_icon",title:"Hide/show content",css_class:"toggle",on_click_fn:function(e){e.config.get_value("content_visible")?(e.action_icons.toggle_icon.addClass("toggle-expand").removeClass("toggle"),e.hide_contents(),e.config.set_value("content_visible",!1)):(e.action_icons.toggle_icon.addClass("toggle").removeClass("toggle-expand"),e.config.set_value("content_visible",!0),e.show_contents())}},{name:"settings_icon",title:u()("Edit settings"),css_class:"gear",on_click_fn:function(e){new se.a.ConfigSettingCollectionView({collection:e.config}).render_in_modal("Configure Track")}},{name:"remove_icon",title:u()("Remove"),css_class:"remove-icon",on_click_fn:function(e){r()(".tooltip").remove(),e.remove()}}],de(ge.prototype,{config_params:[{key:"name",label:"Name",type:"text",default_value:""},{key:"content_visible",type:"bool",default_value:!0,hidden:!0}],build_config_params:function(){return this.config_params},config_onchange:function(){},init:function(){},changed:function(){this.view.changed()},can_draw:function(){return!(!this.enabled||!this.config.get_value("content_visible"))},request_draw:function(){},_draw:function(e){},to_dict:function(){},set_name:function(e){this.old_name=this.config.get_value("name"),this.config.set_value("name",e)},revert_name:function(){this.old_name&&this.config.set_value("name",this.old_name)},remove:function(){this.changed(),this.container.remove_drawable(this);var e=this.view;this.container_div.hide(0,(function(){r()(this).remove(),e.update_intro_div()}))},build_container_div:function(){},update_icons:function(){},hide_contents:function(){},show_contents:function(){},get_drawables:function(){}});var ve=function(e,t,n){ge.call(this,e,t,n),this.obj_type=n.obj_type,this.drawables=[]};de(ve.prototype,ge.prototype,{unpack_drawables:function(e){var t;this.drawables=[];for(var n=0;n<e.length;n++)t=Ne(e[n],this.view,this),this.add_drawable(t)},init:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].init()},_draw:function(e){for(var t=0;t<this.drawables.length;t++)this.drawables[t]._draw(e)},to_dict:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].to_dict());return{prefs:this.config.to_key_value_dict(),obj_type:this.obj_type,drawables:e}},add_drawable:function(e){this.drawables.push(e),e.container=this,this.changed()},add_drawable_before:function(e,t){this.changed();var n=this.drawables.indexOf(t);return-1!==n&&(this.drawables.splice(n,0,e),!0)},replace_drawable:function(e,t,n){var i=this.drawables.indexOf(e);return-1!==i&&(this.drawables[i]=t,n&&e.container_div.replaceWith(t.container_div),this.changed()),i},remove_drawable:function(e){var t=this.drawables.indexOf(e);return-1!==t&&(this.drawables.splice(t,1),e.container=null,this.changed(),!0)},move_drawable:function(e,t){var n=this.drawables.indexOf(e);return-1!==n&&(this.drawables.splice(n,1),this.drawables.splice(t,0,e),this.changed(),!0)},get_drawables:function(){return this.drawables},get_tracks:function(e){for(var t,n=this.drawables.slice(0),i=[];0!==n.length;)(t=n.shift())instanceof e?i.push(t):t.drawables&&(n=n.concat(t.drawables));return i}});var ye=function(e,t,n){if(de(n,{obj_type:"DrawableGroup",drag_handle_class:"group-handle"}),ve.call(this,e,t,n),this.content_div=r()("<div/>").addClass("content-div").attr("id","group_".concat(this.id,"_content_div")).appendTo(this.container_div),he(this.container_div,this),he(this.content_div,this),fe(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new ie(this),this.header_div.after(this.filters_manager.parent_div),this.filters_manager.parent_div.after(r()("<div style='clear: both'/>")),this.saved_filters_managers=[],"drawables"in n&&this.unpack_drawables(n.drawables),"filters"in n){var i=this.filters_manager;this.filters_manager=new ie(this,n.filters),i.parent_div.replaceWith(this.filters_manager.parent_div),n.filters.visible&&this.setup_multitrack_filtering()}};de(ye.prototype,ge.prototype,ve.prototype,{action_icons_def:[ge.prototype.action_icons_def[0],ge.prototype.action_icons_def[1],{name:"composite_icon",title:u()("Show composite track"),css_class:"layers-stack",on_click_fn:function(e){r()(".tooltip").remove(),e.show_composite_track()}},{name:"filters_icon",title:u()("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?(e.filters_manager.clear_filters(),e._restore_filter_managers()):(e.setup_multitrack_filtering(),e.request_draw({clear_tile_cache:!0})),e.filters_manager.toggle()}},ge.prototype.action_icons_def[2]],build_container_div:function(){var e=r()("<div/>").addClass("group").attr("id","group_".concat(this.id));return this.container&&this.container.content_div.append(e),e},hide_contents:function(){this.tiles_div.hide()},show_contents:function(){this.tiles_div.show(),this.request_draw()},update_icons:function(){var e=this.drawables.length;if(0===e)this.action_icons.composite_icon.hide(),this.action_icons.filters_icon.hide();else if(1===e)this.action_icons.composite_icon.toggle(this.drawables[0]instanceof Le),this.action_icons.filters_icon.hide();else{var t,n,i,a=this.drawables[0].get_type(),o=0;for(t=0;t<e&&(i=this.drawables[t]).get_type()===a;t++)i instanceof Pe&&o++;if(this.drawables[0]instanceof Ae?this.action_icons.composite_icon.show():(this.action_icons.composite_icon.hide(),r()(".tooltip").remove()),o>1&&o===this.drawables.length){var s,l={};for(i=this.drawables[0],n=0;n<i.filters_manager.filters.length;n++)l[(s=i.filters_manager.filters[n]).name]=[s];for(t=1;t<this.drawables.length;t++)for(i=this.drawables[t],n=0;n<i.filters_manager.filters.length;n++)(s=i.filters_manager.filters[n]).name in l&&l[s.name].push(s);for(var c in this.filters_manager.remove_all(),l){var d=l[c];if(d.length===o){var u=new ae({name:d[0].name,index:d[0].index});this.filters_manager.add_filter(u)}}this.action_icons.filters_icon.toggle(this.filters_manager.filters.length>0)}else this.action_icons.filters_icon.hide()}},_restore_filter_managers:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].filters_manager=this.saved_filters_managers[e];this.saved_filters_managers=[]},setup_multitrack_filtering:function(){if(this.filters_manager.filters.length>0){this.saved_filters_managers=[];for(var e=0;e<this.drawables.length;e++){var t=this.drawables[e];this.saved_filters_managers.push(t.filters_manager),t.filters_manager=this.filters_manager}}this.filters_manager.init_filters()},show_composite_track:function(){var e=new Le(this.view,this.view,{name:this.config.get_value("name"),drawables:this.drawables});this.container.replace_drawable(this,e,!0),e.request_draw()},add_drawable:function(e){ve.prototype.add_drawable.call(this,e),this.update_icons()},remove_drawable:function(e){ve.prototype.remove_drawable.call(this,e),this.update_icons()},to_dict:function(){this.filters_manager.visible()&&this._restore_filter_managers();var e=de(ve.prototype.to_dict.call(this),{filters:this.filters_manager.to_dict()});return this.filters_manager.visible()&&this.setup_multitrack_filtering(),e},request_draw:function(e){i.default.each(this.drawables,(function(t){t.request_draw(e)}))}});var be=s.a.View.extend({initialize:function(e){de(e,{obj_type:"View"}),ve.call(this,"View",e.container,e),this.chrom=null,this.vis_id=e.vis_id,this.dbkey=e.dbkey,this.stand_alone=void 0===e.stand_alone||e.stand_alone,this.label_tracks=[],this.tracks_to_be_redrawn=[],this.max_low=0,this.max_high=0,this.zoom_factor=3,this.min_separation=30,this.has_changes=!1,this.load_chroms_deferred=null,this.render(),this.canvas_manager=new h.a.CanvasManager(this.container.get(0).ownerDocument),this.reset(),this.config=se.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"}],{name:e.name})},render:function(){this.requested_redraw=!1;var e=this.container,t=this;this.top_container=r()("<div/>").addClass("top-container").appendTo(e),this.browser_content_div=r()("<div/>").addClass("content").appendTo(e),this.bottom_container=r()("<div/>").addClass("bottom-container").appendTo(e),this.top_labeltrack=r()("<div/>").addClass("top-labeltrack").appendTo(this.top_container),this.viewport_container=r()("<div/>").addClass("viewport-container").attr("id","viewport-container").appendTo(this.browser_content_div),this.content_div=this.viewport_container,he(this.viewport_container,t),this.intro_div=r()("<div/>").addClass("intro").appendTo(this.viewport_container),r()("<div/>").text("Add Datasets to Visualization").addClass("action-button").appendTo(this.intro_div).click((function(){h.a.select_datasets({dbkey:t.dbkey},(function(e){i.default.each(e,(function(e){t.add_drawable(Ne(e,t,t))}))}))})),e.attr("style","overflow: visible !important"),this.nav_container=r()("<div/>").addClass("trackster-nav-container").prependTo(this.top_container),this.nav=r()("<div/>").addClass("trackster-nav").appendTo(this.nav_container),this.stand_alone&&(this.nav_container.addClass("stand-alone"),this.nav.addClass("stand-alone")),this.overview=r()("<div/>").addClass("overview").appendTo(this.bottom_container),this.overview_viewport=r()("<div/>").addClass("overview-viewport").appendTo(this.overview),this.overview_close=r()("<a/>").attr("title","Close overview").addClass("icon-button overview-close tooltip").hide().appendTo(this.overview_viewport),this.overview_highlight=r()("<div/>").addClass("overview-highlight").hide().appendTo(this.overview_viewport),this.overview_box_background=r()("<div/>").addClass("overview-boxback").appendTo(this.overview_viewport),this.overview_box=r()("<div/>").addClass("overview-box").appendTo(this.overview_viewport),this.default_overview_height=this.overview_box.height(),this.nav_controls=r()("<div/>").addClass("nav-controls").appendTo(this.nav),this.chrom_select=r()("<select/>").attr({name:"chrom"}).addClass("chrom-nav").append("<option value=''>Loading</option>").appendTo(this.nav_controls);this.nav_input=r()("<input/>").addClass("nav-input").hide().bind("keyup focusout",(function(e){"focusout"!==e.type&&13!==(e.keyCode||e.which)&&27!==(e.keyCode||e.which)||(27!==(e.keyCode||e.which)&&t.go_to(r()(this).val()),r()(this).hide(),r()(this).val(""),t.location_span.show(),t.chrom_select.show()),e.stopPropagation()})).appendTo(this.nav_controls),this.location_span=r()("<span/>").addClass("location").attr("title","Click to change location").tooltip({placement:"bottom"}).appendTo(this.nav_controls),this.location_span.click((function(){t.location_span.hide(),t.chrom_select.hide(),t.nav_input.val("".concat(t.chrom,":").concat(t.low,"-").concat(t.high)),t.nav_input.css("display","inline-block"),t.nav_input.select(),t.nav_input.focus(),t.nav_input.autocomplete({source:function(e,n){var i=[],a=r.a.map(t.get_tracks(Pe),(function(t){return t.data_manager.search_features(e.term).success((function(e){i=i.concat(e)}))}));r.a.when.apply(r.a,a).done((function(){n(r.a.map(i,(function(e){return{label:e[0],value:e[1]}})))}))},minLength:2})})),void 0!==this.vis_id&&(this.hidden_input=r()("<input/>").attr("type","hidden").val(this.vis_id).appendTo(this.nav_controls)),this.zo_link=r()("<a/>").attr("id","zoom-out").attr("title","Zoom out").tooltip({placement:"bottom"}).click((function(){t.zoom_out()})).appendTo(this.nav_controls),this.zi_link=r()("<a/>").attr("id","zoom-in").attr("title","Zoom in").tooltip({placement:"bottom"}).click((function(){t.zoom_in()})).appendTo(this.nav_controls),this.load_chroms_deferred=this.load_chroms({low:0}),this.chrom_select.bind("change",(function(){t.change_chrom(t.chrom_select.val())})),this.browser_content_div.click((function(e){r()(this).find("input").trigger("blur")})),this.browser_content_div.bind("dblclick",(function(e){t.zoom_in(e.pageX,this.viewport_container)})),this.overview_box.bind("dragstart",(function(e,t){this.current_x=t.offsetX})).bind("drag",(function(e,n){var i=n.offsetX-this.current_x;this.current_x=n.offsetX;var a=Math.round(i/t.viewport_container.width()*(t.max_high-t.max_low));t.move_delta(-a)})),this.overview_close.click((function(){t.reset_overview()})),this.viewport_container.bind("draginit",(function(e,n){if(e.clientX>t.viewport_container.width()-16)return!1})).bind("dragstart",(function(e,n){n.original_low=t.low,n.current_height=e.clientY,n.current_x=n.offsetX})).bind("drag",(function(e,n){var i=r()(this),a=n.offsetX-n.current_x,o=i.scrollTop()-(e.clientY-n.current_height);i.scrollTop(o),n.current_height=e.clientY,n.current_x=n.offsetX;var s=Math.round(a/t.viewport_container.width()*(t.high-t.low));t.move_delta(s)})),this.top_labeltrack.bind("dragstart",(function(e,n){return r()("<div/>").addClass("zoom-area").css("height",t.browser_content_div.height()+t.top_labeltrack.height()+1).appendTo(r()(this))})).bind("drag",(function(e,n){r()(n.proxy).css({left:Math.min(e.pageX,n.startX)-t.container.offset().left,width:Math.abs(e.pageX-n.startX)});var i=Math.min(e.pageX,n.startX)-t.container.offset().left,a=Math.max(e.pageX,n.startX)-t.container.offset().left,o=t.high-t.low,s=t.viewport_container.width();t.update_location(Math.round(i/s*o)+t.low,Math.round(a/s*o)+t.low)})).bind("dragend",(function(e,n){var i=Math.min(e.pageX,n.startX),a=Math.max(e.pageX,n.startX),o=t.high-t.low,s=t.viewport_container.width(),l=t.low;t.low=Math.round(i/s*o)+l,t.high=Math.round(a/s*o)+l,r()(n.proxy).remove(),t.request_redraw()})),this.add_label_track(new De(this,{content_div:this.top_labeltrack})),r()(window).bind("resize",(function(){this.resize_timer&&window.clearTimeout(this.resize_timer),this.resize_timer=window.setTimeout((function(){t.resize_window()}),500)})),r()(document).bind("redraw",(function(){t.redraw()})),this.reset(),r()(window).trigger("resize")},get_base_color:function(e){return this.config.get_value("".concat(e.toLowerCase(),"_color"))||this.config.get_value("n_color")}});de(be.prototype,ve.prototype,{changed:function(){this.has_changes=!0},update_intro_div:function(){this.intro_div.toggle(0===this.drawables.length)},trigger_navigate:function(e,t,n,i){var a=this;this.timer&&window.clearTimeout(this.timer),i?this.timer=window.setTimeout((function(){a.trigger("navigate","".concat(e,":").concat(t,"-").concat(n))}),500):this.trigger("navigate","".concat(e,":").concat(t,"-").concat(n))},update_location:function(e,t){this.location_span.text("".concat(m.a.commatize(e)," - ").concat(m.a.commatize(t))),this.nav_input.val("".concat(this.chrom,":").concat(m.a.commatize(e),"-").concat(m.a.commatize(t)));var n=this.chrom_select.val();""!==n&&this.trigger_navigate(n,this.low,this.high,!0)},load_chroms:function(e){var t=this;e.num=100;var n=r.a.Deferred();return r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/genomes/").concat(this.dbkey),data:e,dataType:"json",success:function(e){if(0!==e.chrom_info.length){if(e.reference){var i=new Ee(t);t.add_label_track(i),t.reference_track=i}t.chrom_data=e.chrom_info,t.chrom_select.html(""),t.chrom_select.append(r()('<option value="">Select Chrom/Contig</option>'));for(var a=0,o=t.chrom_data.length;a<o;a++){var s=t.chrom_data[a].chrom,l=r()("<option>");l.text(s),l.val(s),t.chrom_select.append(l)}e.prev_chroms&&t.chrom_select.append(r()('<option value="previous">Previous '.concat(100,"</option>"))),e.next_chroms&&t.chrom_select.append(r()('<option value="next">Next '.concat(100,"</option>"))),t.chrom_start_index=e.start_index,n.resolve(e.chrom_info)}},error:function(){alert("Could not load chroms for this dbkey: ".concat(this.dbkey))}}),n},change_chrom:function(e,t,n){var i=this;if(i.chrom_data){if(e&&"None"!==e)if("previous"!==e)if("next"!==e){var a=r.a.grep(i.chrom_data,(function(t,n){return t.chrom===e}))[0];if(void 0!==a){if(e!==i.chrom){i.chrom=e,i.chrom_select.val(i.chrom),i.max_high=a.len-1,i.reset();for(var o=0,s=i.drawables.length;o<s;o++){var l=i.drawables[o];l.init&&l.init()}i.reference_track&&i.reference_track.init()}void 0===t&&void 0===n?(i.low=0,i.high=i.max_high):(i.low=void 0!==t?Math.max(t,0):0,void 0===n?(i.low=Math.max(i.low-15,0),i.high=i.low+30):i.high=Math.min(n,i.max_high)),i.request_redraw()}else i.load_chroms({chrom:e},(function(){i.change_chrom(e,t,n)}))}else i.load_chroms({low:this.chrom_start_index+100});else i.load_chroms({low:this.chrom_start_index-100})}else i.load_chroms_deferred.then((function(){i.change_chrom(e,t,n)}))},go_to:function(e){var t=(e=(e=e.replace(/,/g,"")).replace(/:|-/g," ")).split(/\s+/),n=t[0],i=t[1]?parseInt(t[1],10):void 0,a=t[2]?parseInt(t[2],10):void 0;this.change_chrom(n,i,a)},move_fraction:function(e){var t=this.high-this.low;this.move_delta(e*t)},move_delta:function(e){var t=this,n=t.high-t.low;t.low-e<t.max_low?(t.low=t.max_low,t.high=t.max_low+n):t.high-e>t.max_high?(t.high=t.max_high,t.low=t.max_high-n):(t.high-=e,t.low-=e),t.request_redraw({data_fetch:!1}),this.redraw_on_move_fn&&window.clearTimeout(this.redraw_on_move_fn),this.redraw_on_move_fn=window.setTimeout((function(){t.request_redraw()}),200);var i=t.chrom_select.val();this.trigger_navigate(i,t.low,t.high,!0)},add_drawable:function(e){ve.prototype.add_drawable.call(this,e),e.init(),this.changed(),this.update_intro_div();var t=this;e.config.on("change",(function(){t.changed()}))},add_label_track:function(e){e.view=this,e.init(),this.label_tracks.push(e)},remove_drawable:function(e,t){if(ve.prototype.remove_drawable.call(this,e),t){var n=this;e.container_div.hide(0,(function(){r()(this).remove(),n.update_intro_div()}))}},reset:function(){this.low=this.max_low,this.high=this.max_high,this.viewport_container.find(".yaxislabel").remove()},request_redraw:function(e,t){var n=this,a=t?[t]:n.drawables;i.default.each(a,(function(t){var a=i.default.find(n.tracks_to_be_redrawn,(function(e){return e[0]===t}));a?a[1]=e:n.tracks_to_be_redrawn.push([t,e])})),this.requested_redraw||(window.requestAnimationFrame((function(){n._redraw()})),this.requested_redraw=!0)},_redraw:function(){this.requested_redraw=!1;var e=this.low,t=this.high;e<this.max_low&&(e=this.max_low),t>this.max_high&&(t=this.max_high);var n=this.high-this.low;0!==this.high&&n<this.min_separation&&(t=e+this.min_separation),this.low=Math.floor(e),this.high=Math.ceil(t),this.update_location(this.low,this.high),this.resolution_px_b=this.viewport_container.width()/(this.high-this.low);var a=this.low/(this.max_high-this.max_low)*this.overview_viewport.width()||0,r=(this.high-this.low)/(this.max_high-this.max_low)*this.overview_viewport.width()||0;this.overview_box.css({left:a,width:Math.max(13,r)}).show(),r<13&&this.overview_box.css("left",a-(13-r)/2),this.overview_highlight&&this.overview_highlight.css({left:a,width:r}),i.default.each(this.tracks_to_be_redrawn,(function(e){var t=e[0],n=e[1];t&&t._draw(n)})),this.tracks_to_be_redrawn=[],i.default.each(this.label_tracks,(function(e){e._draw()}))},zoom_in:function(e,t){if(!(0===this.max_high||this.high-this.low<=this.min_separation)){var n=this.high-this.low,i=n/2+this.low,a=n/this.zoom_factor/2;e&&(i=e/this.viewport_container.width()*(this.high-this.low)+this.low),this.low=Math.round(i-a),this.high=Math.round(i+a),this.changed(),this.request_redraw()}},zoom_out:function(){if(0!==this.max_high){var e=this.high-this.low,t=e/2+this.low,n=e*this.zoom_factor/2;this.low=Math.round(t-n),this.high=Math.round(t+n),this.changed(),this.request_redraw()}},resize_viewport:function(){this.viewport_container.height(this.container.height()-this.top_container.height()-this.bottom_container.height())},resize_window:function(){this.resize_viewport(),this.request_redraw()},set_overview:function(e){if(this.overview_drawable){if(this.overview_drawable.dataset.id===e.dataset.id)return;this.overview_viewport.find(".track").remove()}var t=e.copy({content_div:this.overview_viewport}),n=this;t.header_div.hide(),t.is_overview=!0,n.overview_drawable=t,this.overview_drawable.postdraw_actions=function(){n.overview_highlight.show().height(n.overview_drawable.content_div.height()),n.overview_viewport.height(n.overview_drawable.content_div.height()+n.overview_box.outerHeight()),n.overview_close.show(),n.resize_window()},n.overview_drawable.request_draw(),this.changed()},reset_overview:function(){r()(".tooltip").remove(),this.overview_viewport.find(".track-tile").remove(),this.overview_viewport.height(this.default_overview_height),this.overview_box.height(this.default_overview_height),this.overview_close.hide(),this.overview_highlight.hide(),this.resize_window(),this.overview_drawable=null}});var we=oe.a.Tool.extend({defaults:{track:null},initialize:function(e){oe.a.Tool.prototype.initialize.call(this,e);var t=!0;void 0!==e.tool_state&&void 0!==e.tool_state.hidden&&(t=e.tool_state.hidden),this.set("hidden",t),this.remove_inputs(["data","hidden_data","conditional"])},state_dict:function(e){return i.default.extend(this.get_inputs_dict(),{hidden:!this.is_visible()})}}),ke=s.a.View.extend({events:{"change :input":"update_value"},render:function(){var e=this.$el.addClass("param-row"),t=this.model;r()("<div>").addClass("param-label").text(t.get("label")).appendTo(e),r()("<div/>").addClass("param-input").html(t.get("html")).appendTo(e).find(":input").val(t.get("value")),r()("<div style='clear: both;'/>").appendTo(e)},update_value:function(e){this.model.set_value(r()(e.target).val())}}),xe=s.a.View.extend({initialize:function(e){this.model.on("change:hidden",this.set_visible,this)},render:function(){var e=this,t=this.model,n=this.$el.addClass("dynamic-tool").hide();n.bind("drag",(function(e){e.stopPropagation()})).click((function(e){e.stopPropagation()})).bind("dblclick",(function(e){e.stopPropagation()})).keydown((function(e){e.stopPropagation()})),r()("<div class='tool-name'>").appendTo(n).text(t.get("name")),t.get("inputs").each((function(e){var t=new ke({model:e});t.render(),n.append(t.$el)})),n.find("input").click((function(){r()(this).select()}));var i=r()("<div>").addClass("param-row").appendTo(n),a=r()("<input type='submit'>").attr("value","Run on complete dataset").appendTo(i);r()("<input type='submit'>").attr("value","Run on visible region").appendTo(i).click((function(){e.run_on_region()})),a.click((function(){e.run_on_dataset()})),t.is_visible()&&this.$el.show()},set_visible:function(){this.$el.toggle(this.model.is_visible())},update_params:function(){for(var e=0;e<this.params.length;e++)this.params[e].update_value()},run_on_dataset:function(){var e=this.model,t=Object(c.a)();this.run({target_dataset_id:this.model.get("track").dataset.id,action:"rerun",tool_id:e.id},null,(function(n){t.modal.show({title:"".concat(e.get("name")," is Running"),body:"".concat(e.get("name")," is running on the complete dataset. Tool outputs are in dataset's history."),buttons:{Close:function(){t.modal.hide()}}})}))},run_on_region:function(){var e,t=this.model.get("track"),n=this.model,i=new h.a.GenomeRegion({chrom:t.view.chrom,start:t.view.low,end:t.view.high}),a={target_dataset_id:t.dataset.id,action:"rerun",tool_id:n.id,regions:[i.toJSON()]},r=n.get("name")+t.tool_region_and_parameters_str(i);if(t.container===t.view){var o=new ye(t.view,t.view,{name:t.config.get_value("name")}),s=t.container.replace_drawable(t,o,!1);o.container_div.insertBefore(t.view.content_div.children()[s]),o.add_drawable(t),t.container_div.appendTo(o.content_div),e=o}else e=t.container;var l=new t.constructor(t.view,e,{name:r,hda_ldda:"hda"});l.init_for_tool_data(),l.change_mode(t.mode),l.set_filters_manager(t.filters_manager.copy(l)),l.update_icons(),e.add_drawable(l),l.tiles_div.text("Starting job."),this.run(a,l,(function(e){l.set_dataset(new re.a(e)),l.tiles_div.text("Running job."),l.init()}))},run:function(e,t,n){e.inputs=this.model.get_inputs_dict();var i=new m.a.ServerStateDeferred({ajax_settings:{url:"".concat(Object(l.getAppRoot)(),"api/tools"),data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});r.a.when(i.go()).then((function(e){"no converter"===e?(t.container_div.addClass("error"),t.content_div.text(pe)):e.error?(t.container_div.addClass("error"),t.content_div.text("Tool cannot be rerun: "+e.message)):n(e)}))}}),Se=function(e,t){Q.Scaler.call(this,t),this.filter=e};Se.prototype.gen_val=function(e){return this.filter.high===Number.MAX_VALUE||this.filter.low===-Number.MAX_VALUE||this.filter.low===this.filter.high?this.default_val:(parseFloat(e[this.filter.index])-this.filter.low)/(this.filter.high-this.filter.low)};var Ce=function(e,t,n,i,a){this.track=e,this.region=t,this.low=t.get("start"),this.high=t.get("end"),this.w_scale=n,this.canvas=i,this.html_elt=r()("<div class='track-tile'/>").append(i),this.data=a,this.stale=!1};Ce.prototype.predisplay_actions=function(){};var Me=function(e,t,n,i,a){Ce.call(this,e,t,n,i,a)};Me.prototype.predisplay_actions=function(){};var Te=function(e,t,n,i,a,r,o,s,l,c,d){Ce.call(this,e,t,n,i,a),this.mode=r,this.all_slotted=s,this.feature_mapper=l,this.has_icons=!1,this.incomplete_features=c,this.other_tiles_features_drawn={},this.seq_data=d};de(Te.prototype,Ce.prototype),Te.prototype.predisplay_actions=function(){};var je=function(e,t,n){de(n,{drag_handle_class:"draghandle"}),ge.call(this,e,t,n),this.dataset=null,n.dataset&&(this.dataset=n.dataset instanceof s.a.Model?n.dataset:new re.a(n.dataset)),this.dataset_check_type="converted_datasets_state",this.data_url_extra_params={},this.data_query_wait="data_query_wait"in n?n.data_query_wait:5e3,this.data_manager="data_manager"in n?n.data_manager:new h.a.GenomeDataManager({dataset:this.dataset,genome:new h.a.Genome({key:e.dbkey,chroms_info:{chrom_info:e.chrom_data}}),data_mode_compatible:this.data_and_mode_compatible,can_subset:this.can_subset}),this.min_height_px=16,this.max_height_px=800,this.visible_height_px=this.config.get_value("height"),this.content_div=r()("<div class='track-content'>").appendTo(this.container_div),this.container&&(this.container.content_div.append(this.container_div),"resize"in n&&!n.resize||this.add_resize_handle())};de(je.prototype,ge.prototype,{action_icons_def:[{name:"mode_icon",title:u()("Set display mode"),css_class:"chevron-expand",on_click_fn:function(){}},ge.prototype.action_icons_def[0],{name:"overview_icon",title:u()("Set as overview"),css_class:"application-dock-270",on_click_fn:function(e){e.view.set_overview(e)}},ge.prototype.action_icons_def[1],{name:"filters_icon",title:u()("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?e.filters_manager.clear_filters():e.filters_manager.init_filters(),e.filters_manager.toggle()}},{name:"tools_icon",title:u()("Tool"),css_class:"hammer",on_click_fn:function(e){e.tool.toggle(),e.tool.is_visible()?e.set_name(e.config.get_value("name")+e.tool_region_and_parameters_str()):e.revert_name(),r()(".tooltip").remove()}},{name:"param_space_viz_icon",title:u()("Tool parameter space visualization"),css_class:"arrow-split",on_click_fn:function(e){var t=Object(c.a)(),n="\n                    <strong>Tool</strong>:".concat(e.tool.get("name"),"<br/>\n                    <strong>Dataset</strong>:").concat(e.config.get_value("name"),'<br/>\n                    <strong>Region(s)</strong>:\n                        <select name="regions">\n                            <option value="cur">current viewing area</option>\n                            <option value="bookmarks">bookmarks</option>\n                            <option value="both">current viewing area and bookmarks</option>\n                        </select>\n                    ');t.modal.show({title:"Visualize tool parameter space and output from different parameter settings?",body:n,buttons:{No:function(){t.modal.hide(),r()(window).unbind("keypress.check_enter_esc")},Yes:function(){var n,a=r()('select[name="regions"] option:selected').val(),o=new h.a.GenomeRegion({chrom:(void 0).view.chrom,start:(void 0).view.low,end:(void 0).view.high}),c=i.default.map(r()(".bookmark"),(function(e){return new h.a.GenomeRegion({from_str:r()(e).children(".position").text()})}));n="cur"===a?[o]:"bookmarks"===a?c:[o].concat(c),t.modal.hide(),window.top.location.href="".concat(Object(l.getAppRoot)(),"visualization/sweepster?").concat(r.a.param({dataset_id:e.dataset.id,hda_ldda:e.dataset.get("hda_ldda"),regions:JSON.stringify(new s.a.Collection(n).toJSON())}))}}})}},ge.prototype.action_icons_def[2]],can_draw:function(){return this.dataset&&ge.prototype.can_draw.call(this)},build_container_div:function(){return r()("<div/>").addClass("track").attr("id","track_".concat(this.id))},set_dataset:function(e){this.dataset=e,this.data_manager.set("dataset",e)},on_resize:function(){this.request_draw({clear_tile_cache:!0})},add_resize_handle:function(){var e=this,t=!1,n=!1,i=r()("<div class='track-resize'>");r()(e.container_div).hover((function(){e.config.get_value("content_visible")&&(t=!0,i.show())}),(function(){t=!1,n||i.hide()})),i.hide().bind("dragstart",(function(t,i){n=!0,i.original_height=r()(e.content_div).height()})).bind("drag",(function(t,n){var i=Math.min(Math.max(n.original_height+n.deltaY,e.min_height_px),e.max_height_px);r()(e.tiles_div).css("height",i),e.visible_height_px=e.max_height_px===i?0:i,e.on_resize()})).bind("dragend",(function(a,r){e.tile_cache.clear(),n=!1,t||i.hide(),e.config.set_value("height",e.visible_height_px),e.changed()})).appendTo(e.container_div)},hide_contents:function(){this.tiles_div.hide(),this.container_div.find(".yaxislabel, .track-resize").hide()},show_contents:function(){this.tiles_div.show(),this.container_div.find(".yaxislabel, .track-resize").show(),this.request_draw()},get_type:function(){return this instanceof De?"LabelTrack":this instanceof Ee?"ReferenceTrack":this instanceof Ae?"LineTrack":this instanceof Re?"ReadTrack":this instanceof Ye?"VariantTrack":this instanceof Le?"CompositeTrack":this instanceof Pe?"FeatureTrack":""},show_message:function(e){return this.tiles_div.remove(),r()("<span/>").addClass("message").html(e).appendTo(this.content_div)},init:function(e){var t=this;if(t.enabled=!1,t.tile_cache.clear(),t.data_manager.clear(),t.content_div.children().remove(),t.container_div.removeClass("nodata error pending"),t.tiles_div=r()("<div/>").addClass("tiles").appendTo(t.content_div),t.dataset.id){var n=r.a.Deferred(),i={hda_ldda:t.dataset.get("hda_ldda"),data_type:this.dataset_check_type,chrom:t.view.chrom,retry:e};return r.a.getJSON(this.dataset.url(),i,(function(e){if(e&&"error"!==e&&"error"!==e.kind)"no converter"===e?(t.container_div.addClass("error"),t.show_message(pe)):"no data"===e||void 0!==e.data&&(null===e.data||0===e.data.length)?(t.container_div.addClass("nodata"),t.show_message("No data for this chrom/contig.")):"pending"===e?(t.container_div.addClass("pending"),t.show_message("Preparing data. This can take a while for a large dataset. If the visualization is saved and closed, preparation will continue in the background."),window.setTimeout((function(){t.init()}),t.data_query_wait)):"data"!==e&&"data"!==e.status||(e.valid_chroms&&(t.valid_chroms=e.valid_chroms,t.update_icons()),t.tiles_div.text("Ready for display"),t.view.chrom?(t.tiles_div.text(""),t.tiles_div.css("height","".concat(t.visible_height_px,"px")),t.enabled=!0,r.a.when.apply(r.a,t.predraw_init()).done((function(){n.resolve(),t.container_div.removeClass("nodata error pending"),t.request_draw()}))):n.resolve());else{t.container_div.addClass("error");var i=t.show_message("Cannot display dataset due to an error. ");e.message&&(i.append(r()("<a href='javascript:void(0);'></a>").text("View error").click((function(){var t=Object(c.a)();t.modal.show({title:u()("Trackster Error"),body:"<pre>".concat(e.message,"</pre>"),buttons:{Close:function(){t.modal.hide()}}})}))),i.append(r()("<span/>").text(" ")),i.append(r()("<a href='javascript:void(0);'></a>").text("Try again").click((function(){t.init(!0)}))))}})),this.update_icons(),n}},predraw_init:function(){var e=this;return r.a.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(function(t){var n=t.data;if(n&&void 0!==n.min&&void 0!==n.max){var i=n.min,a=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),a=Math.ceil(Math.max(0,Math.min(a,n.mean+2*n.sd))),e.config.set_default_value("min_value",i),e.config.set_default_value("max_value",a),e.config.set_value("min_value",i),e.config.set_value("max_value",a)}}))},get_drawables:function(){return this}});var Oe=function(e,t,n){je.call(this,e,t,n);if(fe(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new ie(this,"filters"in n?n.filters:null),this.data_manager.set("filters_manager",this.filters_manager),this.filters_available=!1,this.tool=n.tool?new we(i.default.extend(n.tool,{track:this,tool_state:n.tool_state})):null,this.tile_cache=new h.a.Cache(10),this.left_offset=0,this.header_div&&(this.set_filters_manager(this.filters_manager),this.tool)){var a=new xe({model:this.tool});a.render(),this.dynamic_tool_div=a.$el,this.header_div.after(this.dynamic_tool_div)}this.tiles_div=r()("<div/>").addClass("tiles").appendTo(this.content_div),this.config.get_value("content_visible")||this.tiles_div.hide(),this.overlay_div=r()("<div/>").addClass("overlay").appendTo(this.content_div),n.mode&&this.change_mode(n.mode)};de(Oe.prototype,ge.prototype,je.prototype,{action_icons_def:je.prototype.action_icons_def.concat([{name:"show_more_rows_icon",title:"To minimize track height, not all feature rows are displayed. Click to display more rows.",css_class:"exclamation",on_click_fn:function(e){r()(".tooltip").remove(),e.slotters[e.view.resolution_px_b].max_rows*=2,e.request_draw({clear_tile_cache:!0})},hide:!0}]),copy:function(e){var t=this.to_dict();de(t,{data_manager:this.data_manager});var n=new this.constructor(this.view,e,t);return n.change_mode(this.mode),n.enabled=this.enabled,n},set_filters_manager:function(e){this.filters_manager=e,this.header_div.after(this.filters_manager.parent_div)},to_dict:function(){return{track_type:this.get_type(),dataset:{id:this.dataset.id,hda_ldda:this.dataset.get("hda_ldda")},prefs:this.config.to_key_value_dict(),mode:this.mode,filters:this.filters_manager.to_dict(),tool_state:this.tool?this.tool.state_dict():{}}},set_min_max:function(){var e=this;return r.a.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(function(t){var n=t.data;if(isNaN(parseFloat(e.config.get_value("min_value")))||isNaN(parseFloat(e.config.get_value("max_value")))){var i=n.min,a=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),a=Math.ceil(Math.max(0,Math.min(a,n.mean+2*n.sd))),e.config.set_value("min_value",i),e.config.set_value("max_value",a)}}))},change_mode:function(e){return this.mode=e,this.config.set_value("mode",e),"Auto"===e&&this.data_manager.clear(),this.request_draw({clear_tile_cache:!0}),this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")")),this},update_icons:function(){this.action_icons.filters_icon.toggle(this.filters_available),this.action_icons.tools_icon.toggle(null!==this.tool),this.action_icons.param_space_viz_icon.toggle(null!==this.tool)},_gen_tile_cache_key:function(e,t){return"".concat(e,"_").concat(t)},request_draw:function(e){e&&e.clear_tile_cache&&this.tile_cache.clear(),this.view.request_redraw(e,this)},before_draw:function(){this.max_height_px=0},_draw:function(e){var t=this;if(this.can_draw()){var n=e&&e.clear_after,a=this.view.low,o=this.view.high,s=this.view.container.width(),l=this.view.resolution_px_b,c=1/l;this.is_overview&&(a=this.view.max_low,o=this.view.max_high,c=1/(l=s/(this.view.max_high-this.view.max_low))),this.before_draw(),this.tiles_div.children().addClass("remove");for(var d,u,f=Math.floor(400*c),p=Math.floor(a/f),m=[],_=[];p*f<o;)d=new h.a.GenomeRegion({chrom:this.view.chrom,start:p*f,end:Math.min((p+1)*f,this.view.max_high)}),u=this.draw_helper(d,l,e),m.push(u),r.a.when(u).then((function(e){_.push(e)})),p+=1;n||this.tiles_div.children(".remove").removeClass("remove").remove(),r.a.when.apply(r.a,m).then((function(){t.tiles_div.children(".remove").remove(),0!==(_=i.default.filter(_,(function(e){return null!==e}))).length&&t.postdraw_actions(_,s,l,n)}))}},_add_yaxis_label:function(e,t){var n=this,i="max"===e?"top":"bottom",a="max"===e?"max":"min",o="max"===e?"max_value":"min_value",s=this.container_div.find(".yaxislabel.".concat(i)),l=_e(this.config.get_value(o),1);t=t||function(){n.request_draw({clear_tile_cache:!0})},0!==s.length?s.text(l):(s=r()("<div/>").text(l).make_text_editable({num_cols:12,on_finish:function(e){r()(".tooltip").remove(),this.config.set_value(o,_e(e,1)),t()},help_text:"Set ".concat(a," value")}).addClass("yaxislabel ".concat(i)).css("color",this.config.get_value("label_color")),this.container_div.prepend(s))},postdraw_actions:function(e,t,n,a){var r=this;i.default.filter(e,(function(e){return e instanceof Me})).length>0?(this.max_height_px=0,i.default.each(e,(function(e){e instanceof Me||(e.html_elt.remove(),r.draw_helper(e.region,n,{force:!0,mode:"Coverage"}))})),this._add_yaxis_label("max")):(this.container_div.find(".yaxislabel").remove(),i.default.find(e,(function(e){return e.has_icons}))&&i.default.each(e,(function(e){e.has_icons||e.html_elt.css("padding-top",20)})))},get_mode:function(e){return this.mode},update_auto_mode:function(e){},_get_drawables:function(){return[this]},draw_helper:function(e,t,n){var a=this;n||(n={});var o,s=n.force,l=n.mode||this.mode,c=1/t,d=this._get_drawables(),u=this._gen_tile_cache_key(t,e),h=s?void 0:this.tile_cache.get_elt(u);if(h)return(o=h)&&"track"in o&&this.show_tile(h,t),h;if(!1===n.data_fetch)return null;var f=function(){var t=i.default.find(me,(function(e){return e===l}))?"Coverage":l,n=i.default.map(d,(function(n){return n.data_manager.get_data(e,t,c,a.data_url_extra_params)}));return a.view.reference_track&&n.push(a.view.reference_track.data_manager.get_data(e,l,c,a.view.reference_track.data_url_extra_params)),n},p=r.a.Deferred();return this.tile_cache.set_elt(u,p),r.a.when.apply(r.a,f()).then((function(){var o,s=f(),l=s;if(i.default.find(s,(function(e){return m.a.is_deferred(e)})))return a.tile_cache.set_elt(u,void 0),void r.a.when(a.draw_helper(e,t,n)).then((function(e){p.resolve(e)}));a.view.reference_track&&(o=a.view.reference_track.data_manager.subset_entry(s.pop(),e));var c=[],h=[];i.default.each(d,(function(e,n){var i=l[n];"Auto"===e.mode&&(e.mode=e.get_mode(i),e.update_auto_mode(e.mode)),c.push(e.mode),h.push(e.get_canvas_height(i,e.mode,t,b))}));var _,g=a.view.canvas_manager.new_canvas(),v=e.get("start"),y=e.get("end"),b=Math.ceil((y-v)*t)+a.left_offset,w=i.default.max(h);g.width=b,g.height=n.height||w;var k=g.getContext("2d");k.translate(a.left_offset,0),d.length>1&&(k.globalAlpha=.5,k.globalCompositeOperation="source-over"),i.default.each(d,(function(n,i){_=n.draw_tile(l[i],k,c[i],e,t,o)})),void 0!==_&&(a.tile_cache.set_elt(u,_),a.show_tile(_,t)),p.resolve(_)})),p},get_canvas_height:function(e,t,n,i){return this.visible_height_px},_draw_line_track_tile:function(e,t,n,a,r){-1!==[void 0,null].indexOf(this.config.get_value("min_value"))&&this.config.set_value("min_value",0),-1!==[void 0,null,0].indexOf(this.config.get_value("max_value"))&&this.config.set_value("max_value",i.default.max(i.default.map(e.data,(function(e){return e[1]})))||0);var o=t.canvas;return new Q.LinePainter(e.data,a.get("start"),a.get("end"),this.config.to_key_value_dict(),n).draw(t,o.width,o.height,r),new Me(this,a,r,o,e.data)},draw_tile:function(e,t,n,i,a,r){},show_tile:function(e,t){var n=e.html_elt;e.predisplay_actions();var i=Math.round((e.low-(this.is_overview?this.view.max_low:this.view.low))*t);this.left_offset&&(i-=this.left_offset),n.css("left",i),n.hasClass("remove")?n.removeClass("remove"):this.tiles_div.append(n),n.css("height","auto"),this.max_height_px=Math.max(this.max_height_px,n.height()-2),n.parent().children().css("height","".concat(this.max_height_px,"px"));var a=this.max_height_px;0!==this.visible_height_px&&(a=Math.min(this.max_height_px,this.visible_height_px)),this.tiles_div.css("height","".concat(a,"px"))},tool_region_and_parameters_str:function(e){var t=void 0!==e?e.toString():"all",n=i.default.values(this.tool.get_inputs_dict()).join(", ");return" - region=[".concat(t,"], parameters=[").concat(n,"]")},data_and_mode_compatible:function(e,t){return"Auto"===t||("Coverage"===t?"bigwig"===e.dataset_type:"bigwig"!==e.dataset_type&&"no_detail"!==e.extra_info)},can_subset:function(e){return!e.message&&"no_detail"!==e.extra_info&&("bigwig"!==e.dataset_type||e.data[1][0]-e.data[0][0]==1)},init_for_tool_data:function(){this.data_manager.set("data_type","raw_data"),this.data_query_wait=1e3,this.dataset_check_type="state"}});var De=function(e,t){je.call(this,e,t,{resize:!1,header:!1}),this.container_div.addClass("label-track")};de(De.prototype,je.prototype,{init:function(){this.enabled=!0},predraw_init:function(){},_draw:function(e){for(var t=this.view,n=t.high-t.low,i=Math.floor(Math.pow(10,Math.floor(Math.log(n)/Math.log(10)))),a=Math.floor(t.low/i)*i,o=this.view.container.width(),s=r()("<div/>").addClass("label-container");a<t.high;){var l=Math.floor((a-t.low)/n*o);s.append(r()("<div/>").addClass("pos-label").text(m.a.commatize(a)).css({left:l})),a+=i}this.content_div.children(":first").remove(),this.content_div.append(s)}});var Le=function(e,t,n){if(Oe.call(this,e,t,n),this.drawables=[],"drawables"in n){for(var a,r=0;r<n.drawables.length;r++)a=n.drawables[r],this.drawables[r]=Ne(a,e,null),a.left_offset>this.left_offset&&(this.left_offset=a.left_offset);this.enabled=!0}i.default.each(this.drawables,(function(e){(e instanceof Pe||e instanceof Re)&&e.change_mode("Coverage")})),this.update_icons(),this.obj_type="CompositeTrack"};de(Le.prototype,Oe.prototype,{display_modes:me,build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},action_icons_def:[{name:"composite_icon",title:u()("Show individual tracks"),css_class:"layers-stack",on_click_fn:function(e){r()(".tooltip").remove(),e.show_group()}}].concat(Oe.prototype.action_icons_def),to_dict:ve.prototype.to_dict,add_drawable:ve.prototype.add_drawable,unpack_drawables:ve.prototype.unpack_drawables,config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},on_resize:function(){var e=this.visible_height_px;i.default.each(this.drawables,(function(t){t.visible_height_px=e})),je.prototype.on_resize.call(this)},change_mode:function(e){Oe.prototype.change_mode.call(this,e);for(var t=0;t<this.drawables.length;t++)this.drawables[t].change_mode(e)},init:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].init());var n=this;r.a.when.apply(r.a,e).then((function(){n.enabled=!0,n.request_draw()}))},update_icons:function(){this.action_icons.filters_icon.hide(),this.action_icons.tools_icon.hide(),this.action_icons.param_space_viz_icon.hide()},can_draw:ge.prototype.can_draw,_get_drawables:function(){return this.drawables},show_group:function(){for(var e,t=new ye(this.view,this.container,{name:this.config.get_value("name")}),n=0;n<this.drawables.length;n++)(e=this.drawables[n]).update_icons(),t.add_drawable(e),e.container=t,t.content_div.append(e.container_div);this.container.replace_drawable(this,t,!0),t.request_draw({clear_tile_cache:!0})},before_draw:function(){var e=i.default.min(i.default.map(this.drawables,(function(e){return e.config.get_value("min_value")}))),t=i.default.max(i.default.map(this.drawables,(function(e){return e.config.get_value("max_value")})));this.config.set_value("min_value",e),this.config.set_value("max_value",t),i.default.each(this.drawables,(function(n){n.config.set_value("min_value",e),n.config.set_value("max_value",t)}))},update_all_min_max:function(){var e=this.config.get_value("min_value"),t=this.config.get_value("max_value");i.default.each(this.drawables,(function(n){n.config.set_value("min_value",e),n.config.set_value("max_value",t)})),this.request_draw({clear_tile_cache:!0})},postdraw_actions:function(e,t,n,i){var a,r=-1;for(a=0;a<e.length;a++){var o=e[a].html_elt.find("canvas").height();o>r&&(r=o)}for(a=0;a<e.length;a++){var s=e[a];s.html_elt.find("canvas").height()!==r&&(this.draw_helper(s.region,n,{force:!0,height:r}),s.html_elt.remove())}var l=this,c=function(){l.update_all_min_max()};this._add_yaxis_label("min",c),this._add_yaxis_label("max",c)}});var Ee=function(e){Oe.call(this,e,{content_div:e.top_labeltrack},{resize:!1,header:!1}),this.left_offset=e.canvas_manager.char_width_px,this.container_div.addClass("reference-track"),this.data_url="".concat(Object(l.getAppRoot)(),"api/genomes/").concat(this.view.dbkey),this.data_url_extra_params={reference:!0},this.data_manager=new h.a.GenomeReferenceDataManager({data_url:this.data_url,can_subset:this.can_subset}),this.hide_contents()};de(Ee.prototype,ge.prototype,Oe.prototype,{build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"height",type:"int",default_value:13,hidden:!0}])},init:function(){this.data_manager.clear(),this.enabled=!0},predraw_init:function(){},can_draw:ge.prototype.can_draw,draw_helper:function(e,t,n){var i,a=this.tiles_div.is(":visible"),r=null;return t>this.view.canvas_manager.char_width_px?(this.tiles_div.show(),i=!0,r=Oe.prototype.draw_helper.call(this,e,t,n)):(i=!1,this.tiles_div.hide()),a!==i&&this.view.resize_viewport(),r},can_subset:function(e){return!0},draw_tile:function(e,t,n,i,a){var r=this.data_manager.subset_entry(e,i),o=r.data,s=t.canvas;t.font=t.canvas.manager.default_font,t.textAlign="center";for(var l=0,c=o.length;l<c;l++)t.fillStyle=this.view.get_base_color(o[l]),t.fillText(o[l],Math.floor(l*a),10);return new Ce(this,i,a,s,r)}});var Ae=function(e,t,n){this.mode="Histogram",Oe.call(this,e,t,n),this.left_offset=30;var i,a,o=this;r.a.when((i="".concat(Object(l.getAppRoot)(),"datasets/").concat(this.dataset.id,"/display"),a=r.a.Deferred(),r.a.ajax({type:"HEAD",url:i,beforeSend:function(e){e.setRequestHeader("Range","bytes=0-10")},success:function(e,t,n){a.resolve(206===n.status)}}),a)).then((function(e){e&&(o.data_manager=new ce.BBIDataManager({dataset:o.dataset}))}))};de(Ae.prototype,ge.prototype,Oe.prototype,{display_modes:me,build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"color",label:"Color",type:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},before_draw:function(){},draw_tile:function(e,t,n,i,a){return this._draw_line_track_tile(e,t,n,i,a)},can_subset:function(e){return e.data[1][0]-e.data[0][0]==1},postdraw_actions:function(e,t,n,i){this._add_yaxis_label("max"),this._add_yaxis_label("min")}});var Ie=function(e,t,n){this.mode="Heatmap",Oe.call(this,e,t,n)};de(Ie.prototype,ge.prototype,Oe.prototype,{display_modes:["Heatmap"],build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"min_value",label:"Min Value",type:"int",default_value:void 0},{key:"max_value",label:"Max Value",type:"int",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:500,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},predraw_init:function(){return r.a.getJSON(this.dataset.url(),{data_type:"data",stats:!0,chrom:this.view.chrom,low:0,high:this.view.max_high,hda_ldda:this.dataset.get("hda_ldda")},(function(e){}))},draw_tile:function(e,t,n,i,a){var r=t.canvas;return new Q.DiagonalHeatmapPainter(e.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n).draw(t,r.width,r.height,a),new Ce(this,i,a,r,e.data)}});var Pe=function(e,t,n){Oe.call(this,e,t,n),this.container_div.addClass("feature-track"),this.summary_draw_height=30,this.slotters={},this.start_end_dct={},this.left_offset=200,this.set_painter_from_config()};de(Pe.prototype,ge.prototype,Oe.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0,help:"Show the number of items in each bin when drawing summary histogram"},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"connector_style",label:"Connector style",type:"select",default_value:"fishbones",options:[{label:"Line with arrows",value:"fishbone"},{label:"Arcs",value:"arcs"}]},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.set_painter_from_config(),this.request_draw({clear_tile_cache:!0})},set_painter_from_config:function(){"arcs"===this.config.get_value("connector_style")?this.painter=Q.ArcLinkedFeaturePainter:this.painter=Q.LinkedFeaturePainter},postdraw_actions:function(e,t,n,a){var o=this;if(Oe.prototype.postdraw_actions.call(this,e,t,n,a),0===i.default.filter(e,(function(e){return e instanceof Me})).length){var s={};i.default.each(i.default.pluck(e,"incomplete_features"),(function(e){i.default.each(e,(function(e){s[e[0]]=e}))})),i.default.each(e,(function(e){var t=i.default.omit(s,i.default.map(e.incomplete_features,(function(e){return e[0]})));if(t=i.default.omit(t,i.default.keys(e.other_tiles_features_drawn)),0!==i.default.size(t)){var n={data:i.default.values(t)},a=o.view.canvas_manager.new_canvas(),l=a.getContext("2d");a.height=Math.max(e.canvas.height,o.get_canvas_height(n,e.mode,e.w_scale,100)),a.width=e.canvas.width,l.drawImage(e.canvas,0,0),l.translate(o.left_offset,0);var c=o.draw_tile(n,l,e.mode,e.region,e.w_scale,e.seq_data);r()(e.canvas).replaceWith(r()(c.canvas)),e.canvas=a,i.default.extend(e.other_tiles_features_drawn,s)}}))}if(this.filters_manager){var l,c=this.filters_manager.filters;for(l=0;l<c.length;l++)c[l].update_ui_elt();for(var d,u,h=!1,f=0;f<e.length;f++)if(e[f].data.length)for(d=e[f].data[0],l=0;l<c.length;l++)if((u=c[l]).applies_to(d)&&u.min!==u.max){h=!0;break}this.filters_available!==h&&(this.filters_available=h,this.filters_available||this.filters_manager.hide(),this.update_icons())}if(e[0]instanceof Te){for(var p=!0,m=0;m<e.length;m++)if(!e[m].all_slotted){p=!1;break}this.action_icons.show_more_rows_icon.toggle(!p)}else this.action_icons.show_more_rows_icon.hide()},update_auto_mode:function(e){"Auto"===this.mode&&("no_detail"===e&&(e="feature spans"),this.action_icons.mode_icon.attr("title","Set display mode (now: Auto/".concat(e,")")))},incremental_slots:function(e,t,n){var i=this.view.canvas_manager.dummy_context,a=this.slotters[e];return a&&a.mode===n||(a=new y(e,n,100,(function(e){return i.measureText(e)})),this.slotters[e]=a),a.slot_features(t)},get_mode:function(e){return"no_detail"===e.extra_info||this.is_overview?"no_detail":this.view.high-this.view.low>12e3?"Squish":"Pack"},get_canvas_height:function(e,t,n,i){if("Coverage"===t||"bigwig"===e.dataset_type)return this.summary_draw_height;var a=this.incremental_slots(n,e.data,t),r=new this.painter(null,null,null,this.config.to_key_value_dict(),t);return Math.max(this.min_height_px,r.get_required_height(a,i))},draw_tile:function(e,t,n,i,a,r,o){var s=this,l=t.canvas,c=i.get("start"),d=i.get("end"),u=this.left_offset;if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,n,i,a);var h=[],f=this.slotters[a].slots,p=!0;if(e.data)for(var m=this.filters_manager.filters,_=0,g=e.data.length;_<g;_++){for(var v,y=e.data[_],b=!1,w=0,k=m.length;w<k;w++)if((v=m[w]).update_attrs(y),!v.keep(y)){b=!0;break}b||(h.push(y),y[0]in f||(p=!1))}var x=this.filters_manager.alpha_filter?new Se(this.filters_manager.alpha_filter):null,S=this.filters_manager.height_filter?new Se(this.filters_manager.height_filter):null,C=new this.painter(h,c,d,this.config.to_key_value_dict(),n,x,S,r,(function(e){return s.view.get_base_color(e)})),M=null,T=null;if(t.fillStyle=this.config.get_value("block_color"),t.font=t.canvas.manager.default_font,t.textAlign="right",e.data){var j=C.draw(t,l.width,l.height,a,f);M=j.feature_mapper,T=j.incomplete_features,M.translation=-u}return o?void 0:new Te(s,i,a,l,e.data,n,e.message,p,M,T,r)}});var Ye=function(e,t,n){Oe.call(this,e,t,n),this.painter=Q.VariantPainter,this.summary_draw_height=30,this.left_offset=30};de(Ye.prototype,ge.prototype,Oe.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"color",label:"Histogram color",type:"color"},{key:"show_sample_data",label:"Show sample data",type:"bool",default_value:!0},{key:"show_labels",label:"Show summary and sample labels",type:"bool",default_value:!0},{key:"summary_height",label:"Locus summary height",type:"float",default_value:20},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},draw_tile:function(e,t,n,i,a){if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,"Histogram",i,a);var r=this.view;return new this.painter(e.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n,(function(e){return r.get_base_color(e)})).draw(t,t.canvas.width,t.canvas.height,a),new Ce(this,i,a,t.canvas,e.data)},get_canvas_height:function(e,t,n,i){if("bigwig"===e.dataset_type)return this.summary_draw_height;var a=this.dataset.get_metadata("sample_names")?this.dataset.get_metadata("sample_names").length:0;return 0===a&&0!==e.data.length&&(a=null===(a=e.data[0][7].match(/,/g))?1:a.length+1),new this.painter(null,null,null,this.config.to_key_value_dict(),t).get_required_height(a)},predraw_init:function(){var e=[je.prototype.predraw_init.call(this)];return this.dataset.get_metadata("sample_names")||e.push(this.dataset.fetch()),e},postdraw_actions:function(e,t,n,a){Oe.prototype.postdraw_actions.call(this,e,t,n,a);var o=i.default.filter(e,(function(e){return e instanceof Me})),s=this.dataset.get_metadata("sample_names");if(0===o.length&&this.config.get_value("show_labels")&&s&&s.length>1){var l;if(0===this.container_div.find(".yaxislabel.variant").length&&(l=this.config.get_value("summary_height")/2,this.tiles_div.prepend(r()("<div/>").text("Summary").addClass("yaxislabel variant top").css({"font-size":"".concat(l,"px"),top:"".concat((this.config.get_value("summary_height")-l)/2,"px")})),this.config.get_value("show_sample_data"))){var c=s.join("<br/>");this.tiles_div.prepend(r()("<div/>").html(c).addClass("yaxislabel variant top sample").css({top:this.config.get_value("summary_height")}))}l="".concat("Squish"===this.mode?5:10,"px"),r()(this.tiles_div).find(".sample").css({"font-size":l,"line-height":l}),r()(this.tiles_div).find(".yaxislabel").css("color",this.config.get_value("label_color"))}else this.container_div.find(".yaxislabel.variant").remove()}});var Re=function(e,t,n){Pe.call(this,e,t,n),this.painter=Q.ReadPainter,this.update_icons()};de(Re.prototype,ge.prototype,Oe.prototype,Pe.prototype,{build_config_params:function(){return i.default.union(ge.prototype.config_params,[{key:"block_color",label:"Histogram color",type:"color"},{key:"detail_block_color",label:"Sense strand block color",type:"color",default_value:"#AAAAAA"},{key:"reverse_strand_color",label:"Antisense strand block color",type:"color",default_value:"#DDDDDD"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})}});var He={CompositeTrack:Le,DrawableGroup:ye,DiagonalHeatmapTrack:Ie,FeatureTrack:Pe,LineTrack:Ae,ReadTrack:Re,VariantTrack:Ye,VcfTrack:Ye},Ne=function(e,t,n){if("copy"in e)return e.copy(n);var i=e.obj_type;return i||(i=e.track_type),new He[i](t,n,e)};t.a={TracksterView:be,DrawableGroup:ye,LineTrack:Ae,FeatureTrack:Pe,DiagonalHeatmapTrack:Ie,ReadTrack:Re,VariantTrack:Ye,CompositeTrack:Le,object_from_template:Ne}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f}));var i=n(138),a={props:{tag:{type:String,required:!0}},computed:{tagLabel:function(){return this.tag.startsWith("name:")?this.tag.replace("name:",""):this.tag},tagStyles:function(){var e=Object(i.a)(this.tag);return{"background-color":e.primary,color:e.contrasting,"border-color":e.darker}}}},r=(n(551),n(5)),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"badge badge-tags",style:e.tagStyles,on:{click:function(t){return t.preventDefault(),e.$emit("tag-click",e.tag)}}},[e._v(" "+e._s(e.tagLabel)+" ")])}),[],!1,null,null,null).exports,s=n(33);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={components:{Nametag:o},props:{storeKey:{type:String,required:!0},tags:{type:Array,required:!1,default:function(){return[]}}},computed:{nameTags:function(){return this.$store.getters.getTagsById(this.storeKey).filter((function(e){return e.startsWith("name:")}))},title:function(){return"".concat(this.nameTags.length," nametags")}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},u=(n(552),Object(r.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nametags",attrs:{title:this.title}},this._l(this.nameTags,(function(e){return t("nametag",{key:e,attrs:{tag:e}})})),1)}),[],!1,null,null,null).exports),h=n(38),f=Object(h.a)(u)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",WAITING:"waiting",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",ERROR:"error",DELETED:"deleted"};i.UPLOAD,i.QUEUED,i.RUNNING,i.SETTING_METADATA,i.NEW},function(e,t,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=(n(114),["new","queued","running","waiting"]),s=["error","deleted"],l=["ok"].concat(s),c=a.a.Model.extend({url:function(){return"".concat(Object(r.getAppRoot)(),"api/histories/").concat(this.attributes.history_id,"/contents/dataset_collections/").concat(this.attributes.collection_id,"/jobs_summary")},hasDetails:function(){return this.has("populated_state")},new:function(){return!this.hasDetails()||"new"==this.get("populated_state")},errored:function(){return"error"===this.get("populated_state")||this.anyWithStates(s)},states:function(){return this.get("states")||{}},anyWithState:function(e){return(this.states()[e]||0)>0},anyWithStates:function(e){var t=this.states();for(var n in e)if((t[e[n]]||0)>0)return!0;return!1},numWithStates:function(e){var t=this.states(),n=0;for(var i in e)n+=t[e[i]]||0;return n},numInError:function(){return this.numWithStates(s)},numTerminal:function(){return this.numWithStates(l)},running:function(){return this.anyWithState("running")},terminal:function(){return!this.new()&&!this.anyWithStates(o)},jobCount:function(){var e=this.states(),t=0;for(var n in e)t+=e[n];return t},toString:function(){return"JobStatesSummary(id=".concat(this.get("id"),")")}}),d=a.a.Collection.extend({model:c,initialize:function(){var e=this;this.on({add:function(t){e.active||t.fetch()}}),this.updateTimeoutId=null,this.active=!0},trackModel:function(e){if(!e.has("job_states_summary")){var t=this.historyId;if("dataset_collection"===e.attributes.history_content_type){var n=e.attributes.job_source_type,i=e.attributes.job_source_id;n&&(this.add({id:i,model:n,history_id:t,collection_id:e.attributes.id}),e.jobStatesSummary=this.get(i))}}},url:function(){var e=this.models.filter((function(e){return!e.terminal()})),t=e.map((function(e){return e.get("id")})).join(","),n=e.map((function(e){return e.get("model")})).join(",");return"".concat(Object(r.getAppRoot)(),"api/histories/").concat(this.historyId,"/jobs_summary?ids=").concat(t,"&types=").concat(n)},monitor:function(){var e=this;if(this.clearUpdateTimeout(),this.active){var t=function(){e.updateTimeoutId=setTimeout((function(){e.monitor()}),2e3)},n=this.models.filter((function(e){return!e.terminal()}));n.length,n.length>0?this.fetch({remove:!1}).done(t):t()}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},toString:function(){return"JobStatesSummaryCollection()"}});t.a={JobStatesSummary:c,JobStatesSummaryCollection:d,FETCH_STATE_ON_ADD:!1,NON_TERMINAL_STATES:o,ERROR_STATES:s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(6),a=n(73),r=n(2),o=n.n(r);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(t=t||Object(i.a)()).modal||new a.a.View;return{promise:new Promise((function(t,i){e.oncancel=function(){n.hide(),i("cancelled")},e.oncreate=function(e,i){n.hide(),t(i)}})),options:e,showEl:function(t){n.show({title:e.title||o()("Create a collection"),body:t,width:"85%",height:"100%",xlarge:!0,closing_events:!0})}}}},function(e,t,n){"use strict";var i=n(8),a=n(14);i.default.use(a.a);var r={props:{value:{type:String,default:null},title:{type:String,default:""}},computed:{placeholder:function(){return"Type to Search ".concat(this.title)},filter:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},o=n(5),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-input-group",[n("b-input",{attrs:{placeholder:e.placeholder},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[n("i",{staticClass:"fa fa-times"})])],1)],1)}),[],!1,null,null,null).exports;i.default.use(a.a);var l={key:"label",sortable:!0},c={key:"details",sortable:!0},d={key:"time",sortable:!0},u={key:"navigate",label:"",sortable:!1},h={props:{items:{type:Array,required:!0},filter:{type:String,default:null},multiple:{type:Boolean,default:!1},leafIcon:{type:String,default:"fa fa-file-o"},showDetails:{type:Boolean,default:!0},showTime:{type:Boolean,default:!0},showNavigate:{type:Boolean,default:!1},isEncoded:{type:Boolean,default:!1}},data:function(){return{currentPage:1,nItems:0,perPage:100}},watch:{items:{immediate:!0,handler:function(e){this.filtered(e)}}},computed:{fields:function(){var e=[l];return this.showDetails&&e.push(c),this.showTime&&e.push(d),this.showNavigate&&e.push(u),e}},methods:{filtered:function(e){this.nItems=e.length,this.currentPage=1},clicked:function(e){this.$emit("clicked",e)},open:function(e){this.$emit("open",e)}}},f=Object(o.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-table",{attrs:{small:"",hover:"",items:e.items,fields:e.fields,filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage},on:{"row-clicked":e.clicked,filtered:e.filtered},scopedSlots:e._u([{key:"cell(label)",fn:function(t){return[e.isEncoded?n("pre",{attrs:{title:t.item.labelTitle}},[n("code",[e._v(e._s(t.value?t.value:"-"))])]):n("span",[t.item.isLeaf?n("i",{class:e.leafIcon}):n("i",{staticClass:"fa fa-folder"}),e._v(" "),n("span",{attrs:{title:t.item.labelTitle}},[e._v(e._s(t.value?t.value:"-"))])])]}},{key:"cell(details)",fn:function(t){return[e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}},{key:"cell(time)",fn:function(t){return[e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}},{key:"cell(navigate)",fn:function(t){return[t.item.isLeaf?e._e():n("i",{staticClass:"fa fa-caret-square-o-right",on:{click:function(n){return n.stopPropagation(),e.open(t.item)}}})]}}])}),e._v(" "),0===e.nItems?n("div",[e.filter?n("div",[e._v("\n            No search results found for: "),n("b",[e._v(e._s(this.filter))]),e._v(".\n        ")]):n("div",[e._v("No entries.")])]):e._e(),e._v(" "),e.nItems>e.perPage?n("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.nItems},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)}),[],!1,null,null,null).exports;i.default.use(a.a);var p={props:{multiple:{type:Boolean,default:!1},modalStatic:{type:Boolean,default:!1},errorMessage:{type:String,default:null},optionsShow:{type:Boolean,default:!1},modalShow:{type:Boolean,default:!0},hideModal:{type:Function,required:!0}}},m=(n(539),Object(o.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.modalShow?n("b-modal",{attrs:{"modal-class":"selection-dialog-modal",visible:"","ok-only":"","ok-title":"Close",static:e.modalStatic},on:{hide:e.hideModal},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._t("search")]},proxy:!0},e.errorMessage?null:{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[e._t("buttons"),e._v(" "),n("b-btn",{staticClass:"float-right selection-dialog-modal-cancel",attrs:{size:"sm"},on:{click:e.hideModal}},[e._v(" Cancel ")])],2)]},proxy:!0}],null,!0)},[e._v(" "),e.errorMessage?n("b-alert",{attrs:{variant:"danger",show:""},domProps:{innerHTML:e._s(e.errorMessage)}}):n("div",[e.optionsShow?e._t("options"):n("div",[n("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),n("span",[e._v("Please wait...")])])],2)],1):e._e()}),[],!1,null,null,null).exports);t.a={components:{"selection-dialog":m,"data-dialog-table":f,"data-dialog-search":s},props:{callback:{type:Function,default:function(){}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(16);function a(e,t){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){i.a.info(t)})):prompt("Copy to clipboard: Ctrl+C, Enter",e)}},function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(12),s=n.n(o),l=n(4),c=n.n(l),d=n(3),u=n(51),h=n(55),f=c.a.Model.extend({defaults:{name:null,label:null,type:null,value:null,html:null,num_samples:5},initialize:function(e){this.attributes.html=unescape(this.attributes.html)},copy:function(){return new f(this.toJSON())},set_value:function(e){this.set("value",e||"")}}),p=c.a.Collection.extend({model:f}),m=f.extend({}),_=f.extend({set_value:function(e){this.set("value",parseInt(e,10))},get_samples:function(){return s.a.scale.linear().domain([this.get("min"),this.get("max")]).ticks(this.get("num_samples"))}}),g=_.extend({set_value:function(e){this.set("value",parseFloat(e))}}),v=f.extend({get_samples:function(){return i.default.map(this.get("options"),(function(e){return e[0]}))}});f.subModelTypes={integer:_,float:g,data:m,select:v};var y=c.a.Model.extend({defaults:{id:null,name:null,description:null,target:null,inputs:[],outputs:[]},urlRoot:"".concat(Object(d.getAppRoot)(),"api/tools"),initialize:function(e){this.set("inputs",new p(i.default.map(e.inputs,(function(e){return new(f.subModelTypes[e.type]||f)(e)}))))},toJSON:function(){var e=c.a.Model.prototype.toJSON.call(this);return e.inputs=this.get("inputs").map((function(e){return e.toJSON()})),e},remove_inputs:function(e){var t=this.get("inputs").filter((function(t){return-1!==e.indexOf(t.get("type"))}));this.get("inputs").remove(t)},copy:function(e){var t=new y(this.toJSON());if(e){var n=new c.a.Collection;t.get("inputs").each((function(e){e.get_samples()&&n.push(e)})),t.set("inputs",n)}return t},apply_search_results:function(e){return-1!==i.default.indexOf(e,this.attributes.id)?this.show():this.hide(),this.is_visible()},set_input_value:function(e,t){this.get("inputs").find((function(t){return t.get("name")===e})).set("value",t)},set_input_values:function(e){var t=this;i.default.each(i.default.keys(e),(function(n){t.set_input_value(n,e[n])}))},run:function(){return this._run()},rerun:function(e,t){return this._run({action:"rerun",target_dataset_id:e.id,regions:t})},get_inputs_dict:function(){var e={};return this.get("inputs").each((function(t){e[t.get("name")]=t.get("value")})),e},_run:function(e){var t=i.default.extend({tool_id:this.id,inputs:this.get_inputs_dict()},e),n=r.a.Deferred(),a=new u.a.ServerStateDeferred({ajax_settings:{url:this.urlRoot,data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});return r.a.when(a.go()).then((function(e){n.resolve(new h.b(e))})),n}});i.default.extend(y.prototype,{hidden:!1,show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},toggle:function(){this.set("hidden",!this.get("hidden"))},is_visible:function(){return!this.attributes.hidden}});var b=c.a.View.extend({className:"toolForm",render:function(){this.$el.children().remove(),this.$el.append(w.tool_form(this.model.toJSON()))}}),w={tool_form:i.default.template(['<div class="toolFormTitle"><%- tool.name %> (version <%- tool.version %>)</div>','<div class="toolFormBody">',"<% _.each( tool.inputs, function( input ){ %>",'<div class="form-row">','<label for="<%- input.name %>"><%- input.label %>:</label>','<div class="form-row-input">',"<%= input.html %>","</div>",'<div class="toolParamHelp" style="clear: both;">',"<%- input.help %>","</div>",'<div style="clear: both;"></div>',"</div>","<% }); %>","</div>",'<div class="form-row form-actions">','<input type="submit" class="btn btn-primary" name="runtool_btn" value="Execute" />',"</div>",'<div class="toolHelp">','<div class="toolHelpBody"><% tool.help %></div>',"</div>"].join(""),{variable:"tool"})};t.a={ToolParameter:f,IntegerToolParameter:_,SelectToolParameter:v,Tool:y,ToolFormView:b}},,,,function(e,t,n){"use strict";var i=n(1),a=n(158),r=n(198),o=n(11),s=a.a.DatasetAssociation,l=r.a.HistoryContentMixin,c=s.extend(o.a.mixin(l,{defaults:i.default.extend({},s.prototype.defaults,l.defaults,{history_content_type:"dataset",model_class:"HistoryDatasetAssociation"})}));t.a={HistoryDatasetAssociation:c}},function(e,t,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=n(10);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=a.a.Collection.extend({url:function(){return"".concat(Object(r.getAppRoot)(),"api/webhooks")}}),u=a.a.View.extend({el:"#webhook-view",initialize:function(e){var t=this,n=e.toolId||"",i=e.toolVersion||"";this.$el.attr("tool_id",n),this.$el.attr("tool_version",i),(new d).fetch({success:function(n){e.type&&n.reset(h(n,e.type)),n.length>0&&t.render(function(e){var t=e.pluck("weight"),n=t.reduce((function(e,t){return e+t})),i=new Map;t.forEach((function(e,t){i.set(t,parseFloat((e/n).toFixed(2)))}));var a,r=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(i);try{for(o.s();!(a=o.n()).done;)for(var c=s(a.value,2),d=c[0],u=c[1],h=0;h<100*u;h++)r.push(d)}catch(e){o.e(e)}finally{o.f()}return e.at(r[Math.floor(Math.random()*r.length)])}(n))}})},render:function(e){var t=e.toJSON();return this.$el.html('<div id="'.concat(t.id,'"></div>')),o.a.appendScriptStyle(t),this}});function h(e,t){return e.models.filter((function(e){var n=e.get("type");return!!n&&-1!==n.indexOf(t)}))}t.a={WebhookView:u,load:function(e){(new d).fetch({async:void 0===e.async||e.async,success:function(t){e.type&&t.reset(h(t,e.type)),e.callback(t)}})}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var p=function(){function e(t){u(this,e),this.deferred=a.a.Deferred(),this.queue=[],this.responses=[],this.numToProcess=0,this.running=!1,this.init(t||[]),this.start()}return f(e,[{key:"init",value:function(e){var t=this;e.forEach((function(e){t.add(e)}))}},{key:"add",value:function(e){var t=this,n=this.queue.length;return this.numToProcess+=1,this.queue.push((function(){var i=n,a=e();a.done((function(e){t.deferred.notify({curr:i,total:t.numToProcess,response:e})})),a.always((function(e){t.responses.push(e),t.queue.length?t.queue.shift()():t.stop()}))})),this}},{key:"start",value:function(){return this.queue.length&&(this.running=!0,this.queue.shift()()),this}},{key:"stop",value:function(e,t){return this.running=!1,this.queue=[],e?this.deferred.reject(t):this.deferred.resolve(this.responses),this.numToProcess=0,this.deferred=a.a.Deferred(),this}},{key:"done",value:function(e){return this.deferred.done(e)}},{key:"fail",value:function(e){return this.deferred.fail(e)}},{key:"always",value:function(e){return this.deferred.always(e)}},{key:"progress",value:function(e){return this.deferred.progress(e)}}],[{key:"create",value:function(t){return new e(t).deferred}}]),e}(),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=l(n);function n(e){var i;return u(this,n),(i=t.call(this,e)).names={},i}return f(n,[{key:"add",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"name")||!Object.prototype.hasOwnProperty.call(e,"fn"))throw new Error('NamedAjaxQueue.add requires an object with both "name" and "fn": '.concat(JSON.stringify(e)));if(!Object.prototype.hasOwnProperty.call(this.names,e.name))return this.names[e.name]=!0,o(d(n.prototype),"add",this).call(this,e.fn)}},{key:"clear",value:function(){return this.names={},this}}],[{key:"create",value:function(e){return new n(e).deferred}}]),n}(p);t.a={AjaxQueue:p,NamedAjaxQueue:m}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return b}));var i=n(7),a=n.n(i),r=n(41),o=n(50),s=n(33);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){u(r,i,a,o,s,"next",e)}function s(e){u(r,i,a,o,s,"throw",e)}o(void 0)}))}}var f={props:{id:{type:String,required:!0}},data:function(){return{loading:!1,item:null}},watch:{id:{immediate:!0,handler:function(e,t){e!==t&&this.load()}}},methods:{load:function(){var e=this;return h(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,a.a.get(e.url);case 3:n=t.sent,i=n.data,e.item=i,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},save:function(e){var t=this;return h(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,a.a.put(t.url,e);case 3:i=n.sent,r=i.data,t.item=r,t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()}},render:function(){return this.$scopedSlots.default({loading:this.loading,item:this.item,save:this.save})}},p=(c(c({},Object(o.b)("datasetCollections",["fetchDatasetCollection"])),{},{load:function(){var e=this;return h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.fetchDatasetCollection(e.id);case 3:e.item=t.sent,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}),c(c({},Object(s.c)("datasetCollections",["getDatasetCollectionById"])),{},{storeItem:function(){return this.getDatasetCollectionById(this.id)}}),{mixins:[f],computed:{url:function(){return Object(r.b)(this.id)}}}),m={mixins:[f],computed:{url:function(){return Object(r.b)("api/jobs/".concat(this.id,"?full=true"))}}},_={props:{id:{type:String,required:!0}},data:function(){return{item:void 0}},computed:{loading:function(){return void 0===this.item}},methods:{buildMonitor:function(){throw new Error("define me")}},created:function(){var e=this,t=this.watch$("id").pipe(this.buildMonitor());this.listenTo(t,{next:function(t){e.item=t},error:function(e){console.warn("error in content monitor",e)},complete:function(){console.log("I should only complete on destroy")}})},render:function(){return this.$scopedSlots.default({loading:this.loading,item:this.item})}},g=n(120),v={mixins:[_],methods:{buildMonitor:function(){return Object(g.b)()}}},y={mixins:[_],methods:{buildMonitor:function(){return Object(g.a)()}}},b={mixins:[_],methods:{buildMonitor:function(){return Object(g.c)()}}}},function(e,t,n){"use strict";t.a={tool:"fa-wrench",data_input:"fa-file-o",data_collection_input:"fa-folder-o",subworkflow:"fa-sitemap fa-rotate-270",parameter_input:"fa-pencil",pause:"fa-pause"}},,function(e,t,n){"use strict";var i=n(73),a=n(83),r=n(2),o=n.n(r),s=n(1),l=n(0),c=n.n(l),d=n(6),u=n(3),h=c.a,f={defaultName:s.default.template("Copy of '<%- name %>'"),title:s.default.template("".concat(o()("Copying history"),' "<%- name %>"')),submitLabel:o()("Copy"),errorMessage:o()("History could not be copied."),progressive:o()("Copying history"),activeLabel:o()("Copy only the active, non-deleted datasets"),allLabel:o()("Copy all datasets including deleted ones"),anonWarning:o()("As an anonymous user, unless you login or register, you will lose your current history ")+o()("after copying this history. "),_template:s.default.template(["<% if( isAnon ){ %>",'<div class="warningmessage">',"<%- anonWarning %>",o()("You can"),' <a href="<%= galaxyRoot %>user/login">',o()("login here"),"</a> ",o()("or")," ",' <a href="<%= galaxyRoot %>user/create">',o()("register here"),"</a>.","</div>","<% } %>","<form>",'<label for="copy-modal-title">',o()("Enter a title for the new history"),":","</label><br />",'<input id="copy-modal-title" class="form-control" style="width: 100%" value="<%= name %>" />','<p class="invalid-title bg-danger" style="color: red; margin: 8px 0px 8px 0px; display: none">',o()("Please enter a valid history title"),"</p>","<% if( allowAll ){ %>","<br />","<p>",o()("Choose which datasets from the original history to include:"),"</p>",'<input name="copy-what" type="radio" id="copy-non-deleted" value="copy-non-deleted" ','<% if( copyWhat === "copy-non-deleted" ){ print( "checked" ); } %>/>','<label for="copy-non-deleted"> <%- activeLabel %></label>',"<br />",'<input name="copy-what" type="radio" id="copy-all" value="copy-all" ','<% if( copyWhat === "copy-all" ){ print( "checked" ); } %>/>','<label for="copy-all"> <%- allLabel %></label>',"<% } %>","</form>"].join("")),_showAjaxIndicator:function(){var e='<p><span class="fa fa-spinner fa-spin"></span> '.concat(this.progressive,"...</p>");this.modal.$(".modal-body").empty().append(e).css({"margin-top":"8px"})},dialog:function(e,t,n){n=n||{};var i=this,r=c.a.Deferred(),l=(n.nameFn||this.defaultName)({name:t.get("name")}),f=n.allDatasets?"copy-all":"copy-non-deleted",p=!!s.default.isUndefined(n.allowAll)||n.allowAll,m=!!s.default.isUndefined(n.autoClose)||n.autoClose;function _(){var n=e.$("#copy-modal-title").val();if(n){var o="copy-all"===e.$('input[name="copy-what"]:checked').val();e.$("button").prop("disabled",!0),i._showAjaxIndicator(),t.copy(!0,n,o).done((function(e){r.resolve(e)})).fail((function(e,s,l){var c={name:n,copyAllDatasets:o};a.a.ajaxErrorModal(t,e,c,i.errorMessage),r.rejectWith(r,arguments)})).done((function(){m&&e.hide()}))}else e.$(".invalid-title").show()}this.modal=e;var g=n.closing_callback,v=Object(d.a)();return e.show(s.default.extend(n,{title:this.title({name:t.get("name")}),body:h(i._template({galaxyRoot:Object(u.getAppRoot)(),name:l,isAnon:v.user.isAnonymous(),allowAll:p,copyWhat:f,activeLabel:this.activeLabel,allLabel:this.allLabel,anonWarning:this.anonWarning})),buttons:s.default.object([[o()("Cancel"),function(){e.hide()}],[this.submitLabel,_]]),height:"auto",closing_events:!0,closing_callback:function(e){e&&r.reject({cancelled:!0}),g&&g(e)}})),e.$("#copy-modal-title").focus().select(),e.$("#copy-modal-title").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),_())})),r}},p=s.default.extend({},f,{defaultName:s.default.template("imported: <%- name %>"),title:s.default.template("".concat(o()("Importing history"),' "<%- name %>"')),submitLabel:o()("Import"),errorMessage:o()("History could not be imported."),progressive:o()("Importing history"),activeLabel:o()("Import only the active, non-deleted datasets"),allLabel:o()("Import all datasets including deleted ones"),anonWarning:o()("As an anonymous user, unless you login or register, you will lose your current history ")+o()("after importing this history. ")});t.a=function(e,t){t=t||{};var n=Object(d.a)().modal||new i.a.View({});return t.useImport?p.dialog(n,e,t):f.dialog(n,e,t)}},function(e,t,n){"use strict";var i=n(3),a=n(7),r=n.n(a),o=n(8),s=n(14);o.default.use(s.a);var l={props:{parameter_value:{type:Array}},methods:{appRoot:function(){return Object(i.getAppRoot)()}}},c=n(5),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticStyle:{"padding-inline-start":"25px"}},e._l(e.parameter_value,(function(t,i){return n("li",{key:i},["hda"==t.src?n("span",[n("a",{attrs:{href:e.appRoot()+"datasets/"+t.id+"/show_params"}},[e._v("\n                    "+e._s(t.hid)+": "+e._s(t.name)+"\n                ")])]):n("span",[e._v(" "+e._s(t.hid)+": "+e._s(t.name)+" ")])])})),0)])}),[],!1,null,null,null).exports;o.default.use(s.a);var u={props:{jobId:{type:String,default:null},datasetId:{type:String,default:null},datasetType:{type:String,default:"hda"},param:{type:String,default:void 0},includeTitle:{type:Boolean,default:!0}},components:{JobParametersArrayValue:d},data:function(){return{parameters:[],hasParameterErrors:!1,isSingleParam:!1}},created:function(){var e;e=this.jobId?"".concat(Object(i.getAppRoot)(),"api/jobs/").concat(this.jobId,"/parameters_display"):"".concat(Object(i.getAppRoot)(),"api/datasets/").concat(this.datasetId,"/parameters_display?hda_ldda=").concat(this.datasetType),this.ajaxCall(e),this.isSingleParam=void 0!==this.param&&"undefined"!==this.param},computed:{anyNotes:function(){var e=!1;return this.parameters.forEach((function(t){e=e||t.notes})),e},singleParam:function(){var e=this;if(this.isSingleParam){var t=this.parameters.find((function(t){return t.text===e.param}));return t?t.value:'Parameter "'.concat(this.param,'" is not found!')}}},methods:{appRoot:function(){return Object(i.getAppRoot)()},ajaxCall:function(e){var t=this;r.a.get(e).then((function(e){return e.data})).then((function(e){t.hasParameterErrors=e.has_parameter_errors,t.parameters=e.parameters})).catch((function(e){console.error(e)}))}}},h=Object(c.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isSingleParam?e._e():n("div",{staticClass:"tool-parameters"},[e.includeTitle?n("h3",[e._v("Tool Parameters")]):e._e(),e._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"tool-parameters"}},[n("thead",[n("tr",[n("th",[e._v("Input Parameter")]),e._v(" "),n("th",[e._v("Value")]),e._v(" "),e.anyNotes?n("th",[e._v("Note for rerun")]):e._e()])]),e._v(" "),n("tbody",e._l(e.parameters,(function(t,i){return n("tr",{key:i},[n("td",{style:{"padding-left":10*(t.depth-1)+"px"}},[e._v("\n                        "+e._s(t.text)+"\n                    ")]),e._v(" "),Array.isArray(t.value)?n("td",[n("JobParametersArrayValue",{attrs:{parameter_value:t.value}})],1):n("td",[e._v("\n                        "+e._s(t.value)+"\n                    ")]),e._v(" "),e.anyNotes?n("td",[t.notes?n("em",[e._v(e._s(t.notes))]):e._e()]):e._e()])})),0)]),e._v(" "),n("b-alert",{attrs:{show:e.hasParameterErrors,variant:"danger"}},[e._v("\n            One or more of your original parameters may no longer be valid or displayed properly.\n        ")])],1),e._v(" "),e.isSingleParam?n("div",{attrs:{id:"single-param"}},[Array.isArray(e.singleParam)?n("div",[n("JobParametersArrayValue",{attrs:{parameter_value:e.singleParam}})],1):n("td",[e._v("\n            "+e._s(e.singleParam)+"\n        ")])]):e._e()])}),[],!1,null,null,null);t.a=h.exports},function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return S})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return P}));var i=n(668),a=n(778),r=n(2184),o=n(904),s=n(2187),l=n(631),c=n(221),d=n(152),u=n(2174),h=n(2180),f=n(780),p=n(798),m=n(2185),_=n(2186),g=n(58),v=n(2211),y=n(41),b=function(){return Object(i.a)(Object(d.a)((function(e){return Object(y.b)("/api/datasets/".concat(e))})),Object(f.a)((function(e){return v.a.getJSON(e)})))},w=function(){return Object(i.a)(Object(d.a)((function(e){return Object(y.b)("/api/dataset_collections/".concat(e,"?instance_type=history"))})),Object(f.a)((function(e){return v.a.getJSON(e)})))},k=function(){return Object(i.a)(Object(d.a)((function(e){return Object(y.b)("/api/invocations/any/steps/".concat(e))})),Object(f.a)((function(e){return v.a.getJSON(e)})))},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spinUpDelay;return Object(i.a)(Object(l.a)((function(e){return C(e,"dataset",t)})))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spinUpDelay;return Object(i.a)(Object(l.a)((function(e){return C(e,"dataset_collection",t)})))},C=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;switch(t){case"dataset":n=b;break;case"dataset_collection":n=w;break;default:console.error("Can't create monitor for ".concat(t,"-").concat(e))}return T(e,t,n,i)},M=function(e,t){return{selector:{id:{$eq:e},history_content_type:t}}},T=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250,s=M(e,t),l=Object(a.a)(s).pipe(Object(g.g)(),Object(c.a)((function(e){return e.match&&e.doc})),Object(d.a)((function(e){return e.doc})),Object(u.a)()),m=l.pipe(Object(c.a)(Boolean)),_=Object(a.a)(e).pipe(Object(h.a)(i),n(),Object(f.a)((function(e){return Object(g.b)(e,!0)}))),v=Object(r.a)(_,m).pipe(Object(p.a)(1));return Object(o.a)(v,l)},j=["ok","error","deleted","paused"],O=function(e){return["scheduled","cancelled","failed"].includes(e.state)&&e.jobs.every((function(e){return j.includes(e.state)}))},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=Object(a.a)(e).pipe(k()),i=Object(a.a)(e).pipe(Object(h.a)(t),k(),Object(m.a)(),Object(_.a)((function(e){return!O(e)}),!0));return n.pipe(Object(f.a)((function(e){return Object(s.a)((function(){return O(e)}),Object(a.a)(e),Object(o.a)(Object(a.a)(e),i))})))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return Object(i.a)(Object(l.a)((function(t){return D(t,e)})))},E=new Map,A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return E.has(e)||E.set(e,I(e,t)),E.get(e)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=1e5;return Object(a.a)([e,{showHidden:!0,showVisible:!0},1]).pipe(Object(g.e)({windowSize:n,noInitial:!0}),Object(h.a)(t),Object(m.a)(),Object(u.a)())},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,i=A(t,n),a=i.pipe(Object(_.a)((function(){return!e()})),Object(u.a)());return Object(o.a)(a,i.pipe(Object(p.a)(1)))}},function(e,t,n){"use strict";var i=n(1),a=n(3),r=n(199),o=n(91),s=n(2),l=n.n(s),c=r.a.ModelListPanel,d=c.extend({_logNamespace:"collections",className:"".concat(c.prototype.className," dataset-collection-panel"),DatasetDCEViewClass:o.a.DatasetDCEListItemView,modelCollectionKey:"elements",initialize:function(e){c.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank",this.dragItems=!0,this.hasUser=e.hasUser,this.panelStack=[],this.parentName=e.parentName,this.foldoutStyle=e.foldoutStyle||"foldout",this.downloadUrl="".concat(Object(a.getAppRoot)(),"api/dataset_collections/").concat(this.model.attributes.id,"/download")},getNestedDCDCEViewClass:function(){return o.a.NestedDCDCEListItemView.extend({foldoutPanelClass:d})},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;this.handleWarning(e),this.log("_queueNewRender:",e,t),this._swapNewRender(e),this.trigger("rendered",this)},handleWarning:function(e){var t=this.views.length,n=this.model.get("element_count");if(n&&n!==t){var i=l()("displaying only ".concat(t," of ").concat(n," items"));e.find(".elements-warning").html('<div class="warningmessagesmall">'.concat(i,"</div>"))}},_filterCollection:function(){return this.model.getVisibleContents()},_getItemViewClass:function(e){switch(e.get("element_type")){case"hda":return this.DatasetDCEViewClass;case"dataset_collection":return this.getNestedDCDCEViewClass()}throw new TypeError("Unknown element type:",e.get("element_type"))},_getItemViewOptions:function(e){var t=c.prototype._getItemViewOptions.call(this,e);return i.default.extend(t,{linkTarget:this.linkTarget,hasUser:this.hasUser,foldoutStyle:this.foldoutStyle})},_setUpItemViewListeners:function(e){return c.prototype._setUpItemViewListeners.call(this,e),this.listenTo(e,{"expanded:drilldown":function(e,t){this._expandDrilldownPanel(t)},"collapsed:drilldown":function(e,t){this._collapseDrilldownPanel(t)}}),this},_expandDrilldownPanel:function(e){this.panelStack.push(e),this.$("> .controls").add(this.$list()).hide(),e.parentName=this.model.get("name"),this.$el.append(e.render().$el)},_collapseDrilldownPanel:function(e){this.panelStack.pop(),this.render()},events:{"click .navigation .back":"close"},close:function(e){this.remove(),this.trigger("close")},toString:function(){return"CollectionView(".concat(this.model?this.model.get("name"):"",")")}});function u(e){var t=e.get("collection_type");return"list"==t?l()("list"):"paired"==t?l()("dataset pair"):"list:paired"==t?l()("list of pairs"):l()("nested list")}function h(e){var t,n=e.get("element_count"),i="a ".concat(u(e));n&&(1==n?t="with 1 item":n&&(t="with ".concat(n," items")),i="".concat(i," ").concat(l()(t)));return i}d.prototype.templates=i.default.extend(i.default.clone(c.prototype.templates),{controls:function(e,t){var n=h(t.model);return'\n        <div class="controls">\n            <div class="navigation">\n            <a class="back" href="javascript:void(0)">\n                <span class="fa fa-icon fa-angle-left"></span>\n                '.concat(l()("Back to "),"\n                ").concat(i.default.escape(t.parentName),'\n            </a>\n            </div>\n            <div class="title">\n                <div class="name">').concat(i.default.escape(e.name)||i.default.escape(e.element_identifier),'</div>\n                <div class="subtitle">\n                    ').concat(n,'\n                </div>\n            </div>\n            <div class="elements-warning">\n            </div>\n            <div class="tags-display"></div>\n            <div class="actions">\n                <a class="download-btn icon-btn" href="').concat(t.downloadUrl,'"\n                   title="" download="" data-original-title="Download Collection">\n                   <span class="fa fa-floppy-o"></span>\n                </a>\n            </div>\n        </div>')}}),t.a={collectionTypeDescription:u,collectionDescription:h,CollectionView:d}},function(e,t,n){"use strict";var i=n(1),a=n(2),r=n.n(a),o=n(287),s=n.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t){if(0==e.length)return"no columns";if(1==e.length)return"column ".concat(t[e[0]]);var n=e.map((function(e){return t[e]}));return"columns ".concat([n.slice(0,-1).join(", "),n.slice(-1)[0]].join(" and "))},d=function(e,t){var n=[];for(var i in e)-1===t.indexOf(i)&&n.push(e[i]);return n},u=function(e,t,n,i,a){var r;try{r=s()(String(e))}catch(e){return{error:"Invalid regular expression specified."}}var o=0;return n=n.map((function(e){var n=e[t],s=r.exec(n);return s?i?e.concat([r.pyreReplace(s[0],i)]):(a=a&&parseInt(a,10))?s.length!=a+1?(o++,null):e.concat(s.splice(1,s.length)):e.concat([s[0]]):(o++,null)})),o>0?{error:"".concat(o," row(s) failed to match specified regular expression.")}:{data:n}},h=function(e,t){return t.reduce((function(t,n){return t.concat(e(n))}),[])},f={add_column_basename:{title:r()("Basename of Path of URL"),display:function(e,t){return"Add column using basename of column ".concat(t[e.target_column])},init:function(e,t){e.addColumnBasenameTarget=t?t.target_column:0},save:function(e,t){t.target_column=e.addColumnBasenameTarget},apply:function(e,t,n,i){var a=e.target_column,r=u("[^/]*$",a,t);return i.push("new"),r.columns=i,r}},add_column_rownum:{title:r()("Row Number"),display:function(e,t){return"Add column for the current row number."},init:function(e,t){e.addColumnRownumStart=t?t.start:1},save:function(e,t){t.start=parseInt(e.addColumnRownumStart,10)},apply:function(e,t,n,i){var a=e.start;return t=t.map((function(e){var t=e.slice();return t.push(String(a)),a+=1,t})),i.push("new"),{data:t,columns:i}}},add_column_value:{title:r()("Fixed Value"),display:function(e,t){return"Add column for the constant value of ".concat(e.value,".")},init:function(e,t){e.addColumnValue=t?t.value:""},save:function(e,t){t.value=e.addColumnValue},apply:function(e,t,n,i){var a=e.value;return t=t.map((function(e){var t=e.slice();return t.push(a),t})),i.push("new"),{data:t,columns:i}}},add_column_metadata:{title:r()("Add Column from Metadata"),display:function(e,t){return"Add column for ".concat(e.value,".")},init:function(e,t){e.addColumnMetadataValue=t?t.value:null},save:function(e,t){t.value=e.addColumnMetadataValue},apply:function(e,t,n,i){var a,r=e.value;if(0==r.indexOf("identifier")){var o=parseInt(r.substring("identifier".length),10);a=function(e,t){var i=e.slice();return i.push(n[t].identifiers[o]),i}}else if("tags"==r)a=function(e,t){var i=e.slice(),a=n[t].tags;return a.sort(),i.push(a.join(",")),i};else{if("hid"!=r&&"name"!=r&&"path"!=r&&"uri"!=r)return{error:"Unknown metadata type [".concat(r,"]")};a=function(e,t){var i=e.slice();return i.push(n[t][r]),i}}return t=t.map(a),i.push("new"),{data:t,columns:i}}},add_column_group_tag_value:{title:r()("Add Column from Group Tag Value"),display:function(e,t){return"Add column for value of group tag ".concat(e.value,".")},init:function(e,t){t?(e.addColumnGroupTagValueValue=t.value,e.addColumnGroupTagValueDefault=t.default_value):(e.addColumnGroupTagValueValue=null,e.addColumnGroupTagValueDefault="")},save:function(e,t){t.value=e.addColumnGroupTagValueValue,t.default_value=e.addColumnGroupTagValueDefault},apply:function(e,t,n,i){var a=e.value,r="group:".concat(a,":");return t=t.map((function(t,i){var a=t.slice(),o=n[i].tags;o.sort();var s=e.default_value;for(var l in o){var c=o[l];if(0==c.indexOf(r)){s=c.substr(r.length);break}}return a.push(s),a})),i.push("new"),{data:t,columns:i}}},add_column_regex:{title:r()("Using a Regular Expression"),display:function(e,t){return"Add new column using ".concat(e.expression," applied to column ").concat(t[e.target_column])},init:function(e,t){t?(e.addColumnRegexTarget=t.target_column,e.addColumnRegexExpression=t.expression,e.addColumnRegexReplacement=t.replacement,e.addColumnRegexGroupCount=parseInt(t.group_count)):(e.addColumnRegexTarget=0,e.addColumnRegexExpression="",e.addColumnRegexReplacement=null,e.addColumnRegexGroupCount=null);var n="global";e.addColumnRegexGroupCount?n="groups":e.addColumnRegexReplacement&&(n="replacement"),e.addColumnRegexType=n},save:function(e,t){t.target_column=e.addColumnRegexTarget,t.expression=e.addColumnRegexExpression,e.addColumnRegexReplacement&&(t.replacement=e.addColumnRegexReplacement),e.addColumnRegexGroupCount&&(t.group_count=parseInt(e.addColumnRegexGroupCount))},apply:function(e,t,n,i){var a=e.target_column,r=u(e.expression,a,t,e.replacement,e.group_count);if(e.group_count)for(var o=0;o<e.group_count;o++)i.push("new");else i.push("new");return r.columns=i,r}},add_column_concatenate:{title:r()("Concatenate Columns"),display:function(e,t){return"Concatenate column ".concat(t[e.target_column_0]," and column ").concat(t[e.target_column_1])},init:function(e,t){t?(e.addColumnConcatenateTarget0=t.target_column_0,e.addColumnConcatenateTarget1=t.target_column_1):(e.addColumnConcatenateTarget0=0,e.addColumnConcatenateTarget1=0)},save:function(e,t){t.target_column_0=e.addColumnConcatenateTarget0,t.target_column_1=e.addColumnConcatenateTarget1},apply:function(e,t,n,i){var a=e.target_column_0,r=e.target_column_1;return t=t.map((function(e){var t=e.slice();return t.push(e[a]+e[r]),t})),i.push("new"),{data:t,columns:i}}},add_column_substr:{title:r()("Keep or Trim Prefix or Suffix"),display:function(e,t){var n,i=e.substr_type;return n="keep_prefix"==i?"Keep only ".concat(e.length," characters from the start of column ").concat(t[e.target_column]):"drop_prefix"==i?"Remove ".concat(e.length," characters from the start of column ").concat(t[e.target_column]):"keep_suffix"==i?"Keep only ".concat(e.length," characters from the end of column ").concat(t[e.target_column]):"Remove ".concat(e.length," characters from the end of column ").concat(t[e.target_column]),n},init:function(e,t){t?(e.addColumnSubstrTarget=t.target_column,e.addColumnSubstrLength=t.length,e.addColumnSubstrType=t.substr_type):(e.addColumnSubstrTarget=0,e.addColumnSubstrType="keep_prefix",e.addColumnSubstrLength=1)},save:function(e,t){t.target_column=e.addColumnSubstrTarget,t.length=parseInt(e.addColumnSubstrLength,10),t.substr_type=e.addColumnSubstrType},apply:function(e,t,n,i){var a=e.target_column,r=e.length,o=e.substr_type;return t=t.map((function(e){var t=e.slice(),n=e[a],i=0,s=n.length;return"keep_prefix"==o?s=r:"drop_prefix"==o?i=r:"keep_suffix"==o?(i=s-r)<0&&(i=0):(s-=r)<0&&(s=0),t.push(n.substr(i,s)),t})),i.push("new"),{data:t}}},remove_columns:{title:r()("Remove Column(s)"),display:function(e,t){var n=e.target_columns;return"Remove ".concat(c(n,t))},init:function(e,t){e.removeColumnTargets=t?t.target_columns:[]},save:function(e,t){t.target_columns=e.removeColumnTargets},apply:function(e,t,n,i){var a=e.target_columns;return{data:t=t.map((function(e){var t=[];for(var n in e)-1==a.indexOf(parseInt(n,10))&&t.push(e[n]);return t})),columns:i=d(i,a)}}},add_filter_regex:{title:r()("Using a Regular Expression"),display:function(e,t){return"Filter rows using regular expression ".concat(e.expression," on column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterRegexTarget=t.target_column,e.addFilterRegexExpression=t.expression,e.addFilterRegexInvert=t.invert):(e.addFilterRegexTarget=0,e.addFilterRegexExpression="",e.addFilterRegexInvert=!1)},save:function(e,t){t.target_column=e.addFilterRegexTarget,t.expression=e.addFilterRegexExpression,t.invert=e.addFilterRegexInvert},apply:function(e,t,n,i){var a,r=String(e.expression);try{a=s()(r)}catch(e){return{error:"Invalid regular expression specified."}}var o=e.target_column,l=e.invert,c=function(e,n){var i=t[parseInt(n,10)];return a.exec(i[o])?!l:l};return n=n.filter(c),{data:t=t.filter(c),sources:n}}},add_filter_count:{title:r()("First or Last N Rows"),display:function(e,t){var n=e.which,i=e.invert;return"first"!=n||i?"first"==n&&i?"Keep only first ".concat(e.count," row(s)."):"last"!=n||i?"Keep only last ".concat(e.count," row(s)."):"Filter out last ".concat(e.count," row(s)."):"Filter out first ".concat(e.count," row(s).")},init:function(e,t){t?(e.addFilterCountN=parseInt(t.count,10),e.addFilterCountWhich=t.which,e.addFilterCountInvert=t.inverse):(e.addFilterCountN=0,e.addFilterCountWhich="first",e.addFilterCountInvert=!1)},save:function(e,t){t.count=parseInt(e.addFilterCountN,10),t.which=e.addFilterCountWhich,t.invert=e.addFilterCountInvert},apply:function(e,t,n,i){var a=e.count,r=e.invert,o=e.which,s=t.length,l=function(e,t){return("first"==o?t>=a:t<s-a)?!r:r};return n=n.filter(l),{data:t=t.filter(l),sources:n}}},add_filter_empty:{title:r()("On Emptiness"),display:function(e,t){return"Filter rows if no value for column ".concat(t[e.target_column])},init:function(e,t){t?(e.addFilterEmptyTarget=t.target_column,e.addFilterEmptyInvert=t.invert):(e.addFilterEmptyTarget=0,e.addFilterEmptyInvert=!1)},save:function(e,t){t.target_column=e.addFilterEmptyTarget,t.invert=e.addFilterEmptyInvert},apply:function(e,t,n,i){var a=e.target_column,r=e.invert,o=function(e,n){return t[parseInt(n,10)][a].length?!r:r};return n=n.filter(o),{data:t=t.filter(o),sources:n}}},add_filter_matches:{title:r()("Matching a Supplied Value"),display:function(e,t){return"Filter rows with value ".concat(e.value," for column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterMatchesTarget=t.target_column,e.addFilterMatchesValue=t.value,e.addFilterMatchesInvert=t.invert):(e.addFilterMatchesTarget=0,e.addFilterMatchesValue="",e.addFilterMatchesInvert=!1)},save:function(e,t){t.target_column=e.addFilterMatchesTarget,t.value=e.addFilterMatchesValue,t.invert=e.addFilterMatchesInvert},apply:function(e,t,n,i){var a=e.target_column,r=e.invert,o=e.value,s=function(e,n){return t[parseInt(n,10)][a]==o?!r:r};return n=n.filter(s),{data:t=t.filter(s),sources:n}}},add_filter_compare:{title:r()("By Comparing to a Numeric Value"),display:function(e,t){return"Filter rows with value ".concat(e.compare_type," ").concat(e.value," for column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterCompareTarget=t.target_column,e.addFilterCompareValue=t.value,e.addFilterCompareType=t.compare_type):(e.addFilterCompareTarget=0,e.addFilterCompareValue=0,e.addFilterCompareType="less_than")},save:function(e,t){t.target_column=e.addFilterCompareTarget,t.value=e.addFilterCompareValue,t.compare_type=e.addFilterCompareType},apply:function(e,t,n,i){var a=e.target_column,r=e.compare_type,o=e.value,s=function(e,n){var i,s=t[parseInt(n,10)],l=parseFloat(s[a]);return"less_than"==r?i=l<o:"less_than_equal"==r?i=l<=o:"greater_than"==r?i=l>o:"greater_than_equal"==r&&(i=l>=o),i};return n=n.filter(s),{data:t=t.filter(s),sources:n}}},sort:{title:r()("Sort"),display:function(e,t){return"Sort on column ".concat(t[e.target_column])},init:function(e,t){t?(e.addSortingTarget=t.target_column,e.addSortingNumeric=t.numeric):(e.addSortingTarget=0,e.addSortingNumeric=!1)},save:function(e,t){t.target_column=e.addSortingTarget,t.numeric=e.addSortingNumeric},apply:function(e,t,n,a){var r=e.target_column,o=e.numeric,s=i.default.zip(t,n);s.sort((function(e,t){var n=e[0][r],i=t[0][r];return o&&(n=parseFloat(n),i=parseFloat(i)),n<i?-1:i<n?1:0}));var l=[],c=[];return s.map((function(e){l.push(e[0]),c.push(e[1])})),{data:l,sources:c}}},swap_columns:{title:r()("Swap Column(s)"),display:function(e,t){return"Swap ".concat(c([e.target_column_0,e.target_column_1],t))},init:function(e,t){t?(e.swapColumnsTarget0=t.target_column_0,e.swapColumnsTarget1=t.target_column_1):(e.swapColumnsTarget0=0,e.swapColumnsTarget1=0)},save:function(e,t){t.target_column_0=e.swapColumnsTarget0,t.target_column_1=e.swapColumnsTarget1},apply:function(e,t,n,i){var a=e.target_column_0,r=e.target_column_1;t=t.map((function(e){var t=e.slice();return t[a]=e[r],t[r]=e[a],t}));var o=i[a];return i[a]=i[r],i[r]=o,{data:t,columns:i}}},split_columns:{title:r()("Split Column(s)"),display:function(e,t){return"Duplicate each row and split up columns"},init:function(e,t){t?(e.splitColumnsTargets0=t.target_columns_0,e.splitColumnsTargets1=t.target_columns_1):(e.splitColumnsTargets0=[],e.splitColumnsTargets1=[])},save:function(e,t){t.target_columns_0=e.splitColumnsTargets0,t.target_columns_1=e.splitColumnsTargets1},apply:function(e,t,n,i){var a=e.target_columns_0,r=e.target_columns_1;return{data:t=h((function(e){var t=[],n=[];for(var i in e)i=parseInt(i,10),a.indexOf(i)>-1?t.push(e[i]):r.indexOf(i)>-1?n.push(e[i]):(t.push(e[i]),n.push(e[i]));return[t,n]}),t),sources:n=h((function(e){return[e,e]}),n),columns:i=d(i,a)}}}},p={list_identifiers:{multiple:!0,label:r()("List Identifier(s)"),columnHeader:r()("List Identifier"),help:r()("This should be a short description of the replicate, sample name, condition, etc... that describes each level of the list structure."),importType:"collections"},paired_identifier:{label:r()("Paired-end Indicator"),columnHeader:r()("Paired Indicator"),help:r()("This should be set to '1', 'R1', 'forward', 'f', or 'F' to indicate forward reads, and '2', 'r', 'reverse', 'R2', 'R', or 'R2' to indicate reverse reads."),importType:"collections"},collection_name:{label:r()("Collection Name"),help:r()("If this is set, all rows with the same collection name will be joined into a collection and it is possible to create multiple collections at once."),modes:["raw","ftp","datasets","library_datasets"],importType:"collections"},name_tag:{label:r()("Name Tag"),help:r()("Add a name tag or hash tag based on the specified column value for imported datasets."),importType:"datasets",modes:["raw","ftp"]},tags:{multiple:!0,label:r()("General Purpose Tag(s)"),help:r()("Add a general purpose tag based on the specified column value, use : to separate key-value pairs if desired. These tags are not propagated to derived datasets the way name and group tags are."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},group_tags:{multiple:!0,label:r()("Group Tag(s)"),help:r()("Add a group tag based on the specified column value, use : to separate key-value pairs. These tags are propagated to derived datasets and may be useful for factorial experiments."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},name:{label:r()("Name"),importType:"datasets"},dbkey:{label:r()("Genome"),modes:["raw","ftp"]},file_type:{label:r()("Type"),modes:["raw","ftp"],help:r()("This should be the Galaxy file type corresponding to this file.")},url:{label:r()("URL"),modes:["raw"],help:r()("This should be a URL the file can be downloaded from.")},info:{label:r()("Info"),help:r()("Unstructured text associated with the dataset that shows up in the history panel, this is optional and can be whatever you would like."),modes:["raw","ftp"]},ftp_path:{label:r()("FTP Path"),modes:["raw","ftp"],help:r()("This should be the path to the target file to include relative to your FTP directory on the Galaxy server"),requiresFtp:!0}},m=function(e,t){return 0==e.length?t?t.map((function(e,t){return String.fromCharCode(65+t)})):[]:e[0].map((function(e,t){return String.fromCharCode(65+t)}))};t.a={applyRules:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=Array.from(a),s=!1;for(var l in i){o[l]=m(e,n);var c=i[l];if(c.error=null,c.warn=null,s)c.warn=r()("Skipped due to previous errors.");else{var d=c.type,u=f[d],h=u.apply(c,e,t,n);h.error?(s=!0,c.error=h.error):(h.warn&&(c.warn=h.warn),e=h.data||e,t=h.sources||t,n=h.columns||n)}}return{data:e,sources:t,columns:n,colHeadersPerRule:o}},columnDisplay:function(e,t){var n;return 2==(n="object"==l(e)?e.map((function(e){return t[e]})):[t[e]]).length?"columns "+n[0]+" and "+n[1]:n.length>2?"columns "+n.slice(0,-1).join(", ")+", and "+n[n.length-1]:"column "+n[0]},colHeadersFor:m,RULES:f,MAPPING_TARGETS:p}},function(e,t,n){"use strict";(function(e,i){var a=n(10);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}t.a={grid:function(e){var t="";return t=e.embedded?this.grid_header(e)+this.grid_table(e):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'.concat(this.grid_header(e),'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>').concat(this.grid_table(e)),e.info_text&&(t+='<br><div class="toolParamHelp" style="clear: both;">'.concat(e.info_text,"</div>")),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(e.embedded||(t+="<h2>".concat(e.title,"</h2>")),e.global_actions){t+='<ul class="manage-table-actions">';var n=e.global_actions.length>=3;n&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var i,a=r(e.global_actions);try{for(a.s();!(i=a.n()).done;){var o=i.value;t+='<li><a class="action-button use-target" target="'.concat(o.target,'" href="').concat(o.url_args,'" onclick="return false;" >').concat(o.label,"</a></li>")}}catch(e){a.e(e)}finally{a.f()}n&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");var n,i=r(e.columns);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.visible&&(t+='<th id="'.concat(a.key,'-header">'),a.href?t+='<a href="'.concat(a.href,'" class="sort-link" sort_key="').concat(a.key,'">').concat(a.label,"</a>"):t+=a.label,t+='<span class="sort-arrow">'.concat(a.extra,"</span></th>"))}}catch(e){i.e(e)}finally{i.f()}return t+="</tr>"},body:function(t){var n="";0===t.items.length&&(n+='<tr><td colspan="100"><em>No items</em></td></tr>');var i,a=r(t.items);try{for(a.s();!(i=a.n()).done;){var o=i.value;n+="<tr ",t.current_item_id==o.id&&(n+='class="current"'),n+=">",t.show_item_checkboxes&&(n+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(o.encode_id,'" id="').concat(o.encode_id,'" class="grid-row-select-checkbox" /></td>'));var s,l=r(t.columns);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.visible){var d="";c.nowrap&&(d='style="white-space:nowrap;"');var u=o.column_config[c.label],h=u.link,f=u.value,p=u.target;"string"===e.type(f)&&(f=f.replace(/\/\//g,"/"));var m="",_="";c.attach_popup&&(m="grid-".concat(o.encode_id,"-popup"),_="menubutton",""!==h&&(_+=" split"),_+=" popup"),n+="<td ".concat(d,">"),h?(0!==t.operations.length&&(n+='<div id="'.concat(m,'" class="').concat(_,'" style="float: left;">')),n+='<a class="menubutton-label use-target" target="'.concat(p,'" href="').concat(h,'" onclick="return false;">').concat(f,"</a>"),0!==t.operations.length&&(n+="</div>")):n+='<div id="'.concat(m,'" class="').concat(_,'"><label id="').concat(c.label_id_prefix).concat(o.encode_id,'" for="').concat(o.encode_id,'">').concat(f||"","</label></div>"),n+="</td>"}}}catch(e){l.e(e)}finally{l.f()}n+="</tr>"}}catch(e){a.e(e)}finally{a.f()}return n},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,i=e.cur_page_num,a=e.num_pages,o=e.allow_fetching_all_results,s=n/2,l=i-s,c=0;l<=0&&(c=s-(i-(l=1)));var d,u=s+c,h=i+u;0!==(d=h<=a?0:u-((h=a)+1-i))&&(l-=d)<1&&(l=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',l>1&&(t+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var f=l;f<h+1;f++)f==e.cur_page_num?t+='<span class="page-link inactive-link" id="page-link-'.concat(f,'">').concat(f,"</span>"):t+='<span class="page-link" id="page-link-'.concat(f,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(f,'">').concat(f,"</a></span>");h<a&&(t+='...<span class="page-link" id="page-link-'.concat(a,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(a,'">').concat(a,"</a></span>")),t+="</span>",o&&(t+='\n                        <span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                        </td>\n                    </tr>')}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var p,m=r(e.operations);try{for(m.s();!(p=m.n()).done;){var _=p.value;_.allow_multiple&&(t+='<input type="button" value="'.concat(_.label,'" class="operation-button action-button">&nbsp;'))}}catch(e){m.e(e)}finally{m.f()}t+="</td></tr>"}var g,v=!1,y=r(e.operations);try{for(y.s();!(g=y.n()).done;){if(g.value.global_operation){v=!0;break}}}catch(e){y.e(e)}finally{y.f()}if(v){t+='<tr><td colspan="100">';var b,w=r(e.operations);try{for(w.s();!(b=w.n()).done;){var k=b.value;k.global_operation&&(t+='<a class="action-button" href="'.concat(k.global_operation,'">').concat(k.label,"</a>"))}}catch(e){w.e(e)}finally{w.f()}t+="</td></tr>"}return e.legend&&(t+='<tr><td colspan="100">'.concat(e.legend,"</td></tr>")),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),'<p><div class="'.concat(t,'message transient-message">').concat(i.escape(e.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,i="none";e.advanced_search&&(i="block");var a,o=!1,s=r(e.columns);try{for(s.s();!(a=s.n()).done;){var l=a.value;if("advanced"==l.filterable){var c=l.key,d=n[c],u=t[c];d&&u&&d!=u&&(i="block"),o=!0}}}catch(e){s.e(e)}finally{s.f()}var h="block";"block"==i&&(h="none");var f,p='<div id="standard-search" style="display: '.concat(h,';"><table><tr><td style="padding: 0;"><table>'),m=r(e.columns);try{for(m.s();!(f=m.n()).done;){var _=f.value;"standard"==_.filterable&&(p+=this.grid_column_filter(e,_))}}catch(e){m.e(e)}finally{m.f()}p+="</table></td></tr><tr><td>",o&&(p+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),p+="</td></tr></table></div>",p+='<div id="advanced-search" style="display: '.concat(i,'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var g,v=r(e.columns);try{for(v.s();!(g=v.n()).done;){var y=g.value;"advanced"==y.filterable&&(p+=this.grid_column_filter(e,y))}}catch(e){v.e(e)}finally{v.f()}return p+="</table></div>"},grid_column_filter:function(t,n){var i=t.filters,a=n.label,o=n.key;"advanced"==n.filterable&&(a=a.toLowerCase());var s="<tr>";if("advanced"==n.filterable&&(s+='<td align="left" style="padding-left: 10px">'.concat(a,":</td>")),s+='<td style="padding-bottom: 1px;">',n.is_text){s+='<form class="text-filter-form" column_key="'.concat(o,'" action="').concat(t.url,'" method="get" >');var l,c=r(t.columns);try{for(c.s();!(l=c.n()).done;){var d=l.value,u=i[d.key];u&&"All"!=u&&(d.is_text&&(u=JSON.stringify(u)),s+='<input type="hidden" id="'.concat(d.key,'" name="f-').concat(d.key,'" value="').concat(u,'"/>'))}}catch(e){c.e(e)}finally{c.f()}s+='<span id="'.concat(o,'-filtering-criteria">');var h=i[o];if(h){var f=e.type(h);if("string"==f&&"All"!=h&&(s+=this.filter_element(o,h)),"array"==f)for(var p in h){h.slice(p),s+=this.filter_element(o,h[p])}}s+="</span>";var m="",_=20;"standard"==n.filterable&&((m=n.label.toLowerCase()).length<20&&(_=m.length),_+=4),s+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(o,'-filter" name="f-').concat(o,'" type="text" placeholder="').concat(m,'" size="').concat(_,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{s+='<span id="'.concat(o,'-filtering-criteria">');var g=!1;for(var v in t.categorical_filters[o]){var y=t.categorical_filters[o][v],b="",w="";for(var k in y)b=k,w=y[k];g&&(s+=" | "),g=!0;var x=i[o];x&&y[o]&&x==w?s+='<span class="categorical-filter '.concat(o,'-filter current-filter">').concat(v,"</span>"):s+='<span class="categorical-filter '.concat(o,'-filter"><a href="javascript:void(0);" filter_key="').concat(b,'" filter_val="').concat(w,'">').concat(v,"</a></span>")}s+="</span>"}return s+="</td></tr>"},filter_element:function(e,t){return t=a.a.sanitize(t),'<span class="text-filter-val">'.concat(t,'<a href="javascript:void(0);" filter_key="').concat(e,'" filter_val="').concat(t,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}}}).call(this,n(0),n(1))},,,,,,function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=s.a.Model.extend({initialize:function(e){this.app=e},checksum:function(){var e="",t=this;return this.app.section.$el.find(".section-row").each((function(){var n=r()(this).attr("id"),i=t.app.field_list[n];i&&(e+="".concat(n,":").concat(JSON.stringify(i.value&&i.value()),":").concat(i.collapsed,":").concat(i.connected,";"))})),e},create:function(){var e=this,t={};this._iterate(this.app.section.$el,t);var n={};function i(t,i,a){e.flat_dict[t]=i,n[t]=a,e.app.element_list[i]&&e.app.element_list[i].$el.attr("tour_id",t)}return this.flat_dict={},function t(n,a){for(var r in a){var o=a[r];if(o.input){var s=o.input,l=n;switch(""!==n&&(l+="|"),l+=s.name,s.type){case"repeat":var c=[],u=null;for(var h in o){var f=h.indexOf("section-");-1!=f&&(f+="section-".length,c.push(parseInt(h.substr(f))),u||(u=h.substr(0,f)))}for(var p in c.sort((function(e,t){return e-t})),r=0,c)t("".concat(l,"_").concat(r++),o[u+c[p]]);break;case"conditional":var m=e.app.field_list[s.id].value();i("".concat(l,"|").concat(s.test_param.name),s.id,m);var _=d(s,m);-1!=_&&t(l,a["".concat(s.id,"-section-").concat(_)]);break;case"section":t(!s.flat&&l||"",o);break;default:var g=e.app.field_list[s.id];if(g&&g.value&&(m=g.value(),(void 0===s.ignore||s.ignore!=m)&&(g.connected?m={__class__:"ConnectedValue"}:g.collapsed&&s.collapsible_value&&(m=s.collapsible_value),i(l,s.id,m),s.payload)))for(var v in s.payload)i(v,s.id,s.payload[v])}}}}("",t),n},match:function(e){return this.flat_dict&&this.flat_dict[e]},matchCase:function(e,t){return d(e,t)},matchModel:function(e,t){var n=this;u(e.inputs,(function(e,i){n.flat_dict[i]&&t(e,n.flat_dict[i])}))},matchResponse:function(e){var t={},n=this;return function e(i,a){if("string"==typeof a){var r=n.flat_dict[i];r&&(t[r]=a)}else for(var o in a){var s=o;if(""!==i){var l="|";a instanceof Array&&(l="_"),s=i+l+s}e(s,a[o])}}("",e),t},_iterate:function(e,t){var n=this;r()(e).children().each((function(){var e=r()(this).attr("id");if(r()(this).hasClass("section-row")){var i=n.app.input_list[e];t[e]=i&&{input:i}||{},n._iterate(this,t[e])}else n._iterate(this,t)}))}}),d=function(e,t){for(var n in"boolean"==e.test_param.type&&(t="true"==t?e.test_param.truevalue||"true":e.test_param.falsevalue||"false"),e.cases)if(e.cases[n].value==t)return n;return-1},u=function e(t,n,a,o){for(var s in o=r.a.extend({},o),i.default.each(t,(function(e){e&&e.type&&e.name&&(o[e.name]=e)})),t){var c=Object(l.a)(),u=t[s];u.name=u.name||s;var h=a?"".concat(a,"|").concat(u.name):u.name;switch(u.type){case"repeat":i.default.each(u.cache,(function(t,i){e(t,n,"".concat(h,"_").concat(i),o)}));break;case"conditional":if(u.test_param){n(u.test_param,"".concat(h,"|").concat(u.test_param.name),o);var f=d(u,u.test_param.value);-1!=f?e(u.cases[f].inputs,n,h,o):c.emit.debug("form-data::visitInputs() - Invalid case for ".concat(h,"."))}else c.emit.debug("form-data::visitInputs() - Conditional test parameter missing for ".concat(h,"."));break;case"section":e(u.inputs,n,h,o);break;default:n(u,h,o)}}};t.a={Manager:c,visitInputs:u}},function(e,t,n){"use strict";var i=n(50),a=n(3),r=n(206),o=n(274),s=n(97),l=n(107),c=n(210),d=n(20),u=n(23);d.c.add(c.b);var h={components:{FontAwesomeIcon:u.a},props:{text:{type:String,required:!0},message:{type:String,required:!0},title:{type:String,default:"copy to clipboard",required:!1}},methods:{copy:function(e,t){Object(l.a)(e,t)}}},f=n(5),p=Object(f.a)(h,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("font-awesome-icon",{attrs:{title:e.title,icon:["far","copy"]},on:{click:function(t){return e.copy(e.text,e.message)}}})}),[],!1,null,null,null).exports,m=n(104),_=n(2206),g=n(2205);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={components:{CodeRow:o.a,DecodedId:r.a,UtcDate:s.a,CopyToClipboard:p},props:{job_id:{type:String,required:!0},includeTimes:{type:Boolean,default:!1}},created:function(){this.fetchJob(this.job_id)},computed:{job:function(){return this.$store.getters.job(this.job_id)},runTime:function(){return Object(_.a)(Object(g.a)({start:new Date(this.job.create_time),end:new Date(this.job.update_time)}))},jobIsTerminal:function(){return!m.a.NON_TERMINAL_STATES.includes(this.job.state)}},methods:y(y({},Object(i.b)(["fetchJob"])),{},{getAppRoot:function(){return Object(a.getAppRoot)()}})},k=Object(f.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Job Information")]),e._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"job-information"}},[n("tbody",[e.job&&e.job.tool_id?n("tr",[n("td",[e._v("Galaxy Tool ID:")]),e._v(" "),n("td",{attrs:{id:"galaxy-tool-id"}},[e._v("\n                    "+e._s(e.job.tool_id)+"\n                    "),n("copy-to-clipboard",{attrs:{message:"Tool ID was copied to your clipboard",text:e.job.tool_id,title:"Copy Tool ID"}})],1)]):e._e(),e._v(" "),e.job&&e.job.tool_version?n("tr",[n("td",[e._v("Galaxy Tool Version:")]),e._v(" "),n("td",{attrs:{id:"galaxy-tool-version"}},[e._v(e._s(e.job.tool_version))])]):e._e(),e._v(" "),e.job&&e.includeTimes?n("tr",[n("td",[e._v("Created")]),e._v(" "),e.job.create_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:e.job.create_time,mode:"pretty"}})],1):e._e()]):e._e(),e._v(" "),e.job&&e.includeTimes?n("tr",[n("td",[e._v("Updated")]),e._v(" "),e.job.update_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:e.job.update_time,mode:"pretty"}})],1):e._e()]):e._e(),e._v(" "),e.job&&e.includeTimes&&e.jobIsTerminal?n("tr",[n("td",[e._v("Time To Finish")]),e._v(" "),n("td",{attrs:{id:"runtime"}},[e._v("\n                    "+e._s(e.runTime)+"\n                ")])]):e._e(),e._v(" "),e.job?n("code-row",{attrs:{id:"command-line","code-label":"Command Line","code-item":e.job.command_line}}):e._e(),e._v(" "),e.job?n("code-row",{attrs:{id:"stdout","code-label":"Tool Standard Output","code-item":e.job.tool_stdout}}):e._e(),e._v(" "),e.job?n("code-row",{attrs:{id:"stderr","code-label":"Tool Standard Error","code-item":e.job.tool_stderr}}):e._e(),e._v(" "),e.job?n("tr",[n("td",[e._v("Tool Exit Code:")]),e._v(" "),n("td",{attrs:{id:"exist-code"}},[e._v(e._s(e.job.exit_code))])]):e._e(),e._v(" "),e.job&&e.job.job_messages&&e.job.job_messages.length>0?n("tr",{attrs:{id:"job-messages"}},[n("td",[e._v("Job Messages")]),e._v(" "),n("td",[n("ul",{staticStyle:{"padding-left":"15px","margin-bottom":"0px"}},e._l(e.job.job_messages,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)])]):e._e(),e._v(" "),e._t("default"),e._v(" "),e.job&&e.job.id?n("tr",[n("td",[e._v("Job API ID:")]),e._v(" "),n("td",{attrs:{id:"encoded-job-id"}},[e._v(e._s(e.job.id)+" "),n("decoded-id",{attrs:{id:e.job.id}})],1)]):e._e(),e._v(" "),e.job&&e.job.copied_from_job_id?n("tr",[n("td",[e._v("Copied from Job API ID:")]),e._v(" "),n("td",{attrs:{id:"encoded-copied-from-job-id"}},[e._v("\n                    "+e._s(e.job.copied_from_job_id)+" "),n("decoded-id",{attrs:{id:e.job.copied_from_job_id}})],1)]):e._e()],2)])])}),[],!1,null,null,null);t.a=k.exports},function(e,t,n){"use strict";n.d(t,"b",(function(){return M}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(6),l=n(2),c=n.n(l),d=n(199),u=n(87),h=n(136),f=n(200),p=n(204),m=n(83),_=n(52),g=n(11),v=n(147),y=n(118),b=(n(232),r.a);function w(e,t){return this.currModeIndex=0,this._init(e,t)}w.prototype.DATA_KEY="mode-button",w.prototype.defaults={switchModesOnClick:!0},w.prototype._init=function(e,t){if(t=t||{},this.$element=b(e),this.options=b.extend(!0,{},this.defaults,t),!t.modes)throw new Error('ModeButton requires a "modes" array');var n=this;return this.$element.click((function(e){n.callModeFn(),n.options.switchModesOnClick&&n._incModeIndex(),b(this).html(n.options.modes[n.currModeIndex].html)})),this.reset()},w.prototype._incModeIndex=function(){return this.currModeIndex+=1,this.currModeIndex>=this.options.modes.length&&(this.currModeIndex=0),this},w.prototype._getModeIndex=function(e){for(var t=0;t<this.options.modes.length;t+=1)if(this.options.modes[t].mode===e)return t;throw new Error("mode not found: ".concat(e))},w.prototype._setModeByIndex=function(e){var t=this.options.modes[e];if(!t)throw new Error("mode index not found: ".concat(e));return this.currModeIndex=e,t.html&&this.$element.html(t.html),this},w.prototype.currentMode=function(){return this.options.modes[this.currModeIndex]},w.prototype.current=function(){return this.currentMode().mode},w.prototype.getMode=function(e){return e?this.options.modes[this._getModeIndex(e)]:this.currentMode()},w.prototype.hasMode=function(e){try{return!!this.getMode(e)}catch(e){console.debug(e)}return!1},w.prototype.setMode=function(e){return this._setModeByIndex(this._getModeIndex(e))},w.prototype.reset=function(){return this.currModeIndex=0,this.options.initialMode&&(this.currModeIndex=this._getModeIndex(this.options.initialMode)),this._setModeByIndex(this.currModeIndex)},w.prototype.callModeFn=function(e){var t=this.getMode(e).onclick;if(t&&b.type("function"===t))return t.call(this.$element.get(0))},b.fn.modeButton=function(e){if(!this.length)return this;if("object"===b.type(e))return this.map((function(){var t=b(this);return t.data("mode-button",new w(t,e)),this}));var t=b(this[0]),n=t.data("mode-button");if(!n)throw new Error("modeButton needs an options object or string name of a function");if(n&&"string"===b.type(e)){var i=e;if(n&&"function"===b.type(n[i]))return n[i].apply(n,b.makeArray(arguments).slice(1))}return n};var k,x,S=d.a.ModelListPanel,C=S.extend({_logNamespace:"history",HDAViewClass:f.a.HDAListItemView,HDCAViewClass:p.a.HDCAListItemView,collectionClass:h.a,modelCollectionKey:"contents",tagName:"div",className:"".concat(S.prototype.className," history-panel"),emptyMsg:c()("This history is empty"),noneFoundMsg:c()("No matching datasets found"),searchPlaceholder:c()("search datasets"),initialize:function(e){S.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank"},_createDefaultCollection:function(){return new this.collectionClass([],{history:this.model})},freeModel:function(){return S.prototype.freeModel.call(this),this.model&&this.model.stopPolling(),this},_setUpListeners:function(){S.prototype._setUpListeners.call(this),this.on({error:function(e,t,n,i,a){this.errorHandler(e,t,n,i,a)},"views:ready view:attached view:removed":function(e){this._renderSelectButton()},"view:attached":function(e){this.scrollTo(0)}})},loadHistory:function(e,t,n){var a=this;return n=i.default.extend(n||{silent:!0}),this.info("loadHistory:",e,t,n),this.setModel(new u.a({id:e})),n.silent=!0,this.trigger("loading"),this.model.fetchWithContents(t,n).always((function(){a.render(),a.trigger("loading-done")}))},refreshContents:function(e){return this.model?this.model.refresh(e):r.a.when()},_setUpCollectionListeners:function(){return S.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"fetching-more":function(){this._toggleContentsLoadingIndicator(!0),this.$emptyMessage().hide()},"fetching-more-done":function(){this._toggleContentsLoadingIndicator(!1)}})},_showLoadingIndicator:function(e,t,n){var a=r()('<div class="loading-indicator"/>');this.$el.html(a.text(e).slideDown(i.default.isUndefined(t)?this.fxSpeed:t))},_hideLoadingIndicator:function(e){this.$(".loading-indicator").slideUp(i.default.isUndefined(e)?this.fxSpeed+200:e,(function(){r()(this).remove()}))},_buildNewRender:function(){var e=S.prototype._buildNewRender.call(this);return this._renderSelectButton(e),e},_renderSelectButton:function(e){if(e=e||this.$el,!this.multiselectActions().length)return null;if(!this.views.length)return this.hideSelectors(),e.find(".controls .actions .show-selectors-btn").remove(),null;var t=e.find(".controls .actions .show-selectors-btn");return t.length?t:Object(_.a)({title:c()("Operations on multiple datasets"),classes:"show-selectors-btn",faIcon:"fa-check-square-o",tooltipConfig:{placement:"top"}}).prependTo(e.find(".controls .actions"))},_renderEmptyMessage:function(e){var t=this.$emptyMessage(e);return this.model.get("contents_active").active<=0?t.empty().append(this.emptyMsg).show():this.searchFor&&this.model.contents.haveSearchDetails()&&!this.views.length?t.empty().append(this.noneFoundMsg).show():(t.hide(),r()())},$scrollContainer:function(e){return this.$list(e)},_toggleContentsLoadingIndicator:function(e){e?this.$list().html('<div class="contents-loading-indicator"><span class="fa fa-2x fa-spinner fa-spin"/></div>'):this.$list().find(".contents-loading-indicator").remove()},renderItems:function(e){e=e||this.$el;var t=this.$list(e);r()(".tooltip").remove(),t.empty(),this.views=[];var n=this._filterCollection();return n.length?(this._renderPagination(e),this.views=this._renderSomeItems(n,t)):e.find("> .controls .list-pagination").empty(),this._renderEmptyMessage(e).toggle(!n.length),this.trigger("views:ready",this.views),this.views},_renderPagination:function(e){var t=e.find("> .controls .list-pagination");return this.searchFor||!this.model.contents.shouldPaginate()?t.empty():(t.html(this.templates.pagination({current:this.model.contents.currentPage+1,last:this.model.contents.getLastPage()+1},this)),t.find("select.pages").tooltip(),t)},_renderSomeItems:function(e,t){var n=this,i=[];return t.append(e.map((function(e){var t=n._createItemView(e);return i.push(t),n._renderItemView$el(t)}))),i},_filterItem:function(e){var t=this.model.contents;return(t.includeHidden||!e.hidden())&&(t.includeDeleted||!e.isDeletedOrPurged())&&S.prototype._filterItem.call(this,e)},_getItemViewClass:function(e){var t=e.get("history_content_type");switch(t){case"dataset":return this.HDAViewClass;case"dataset_collection":return this.HDCAViewClass}throw new TypeError("Unknown history_content_type: ".concat(t))},_getItemViewOptions:function(e){var t=S.prototype._getItemViewOptions.call(this,e);return i.default.extend(t,{linkTarget:this.linkTarget,expanded:this.model.contents.storage.isExpanded(e.id),hasUser:this.model.ownedByCurrUser()})},_setUpItemViewListeners:function(e){var t=this;return S.prototype._setUpItemViewListeners.call(t,e),t.listenTo(e,{expanded:function(e){t.model.contents.storage.addExpanded(e.model)},collapsed:function(e){t.model.contents.storage.removeExpanded(e.model)}})},collapseAll:function(){this.model.contents.storage.clearExpanded(),S.prototype.collapseAll.call(this)},getSelectedModels:function(){var e=S.prototype.getSelectedModels.call(this);return e.historyId=this.collection.historyId,e},events:i.default.extend(i.default.clone(S.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click > .controls .prev":"_clickPrevPage","click > .controls .next":"_clickNextPage","change > .controls .pages":"_changePageSelect","click .messages [class$=message]":"clearMessages"}),_clickPrevPage:function(e){this.model.stopPolling(),this.model.contents.fetchPrevPage()},_clickNextPage:function(e){this.model.stopPolling(),this.model.contents.fetchNextPage()},_changePageSelect:function(e){this.model.stopPolling();var t=r()(e.currentTarget).val();this.model.contents.fetchPage(t)},toggleShowDeleted:function(e,t){e=void 0!==e?e:!this.model.contents.includeDeleted;var n=this.model.contents;return n.setIncludeDeleted(e,t),this.trigger("show-deleted",e),n.fetchCurrentPage({renderAll:!0}),e},toggleShowHidden:function(e,t,n){e=void 0!==e?e:!this.model.contents.includeHidden;var i=this.model.contents;return i.setIncludeHidden(e,n),this.trigger("show-hidden",e),i.fetchCurrentPage({renderAll:!0}),e},_firstSearch:function(e){var t=this;this.log("onFirstSearch",e),this.model.contents.haveSearchDetails()?this.searchItems(e):(this.$("> .controls .search-input").searchInput("toggle-loading"),this.searchFor=e,this.model.contents.progressivelyFetchDetails({silent:!0}).progress((function(e,n,i){t.renderItems(),t.trigger("search:loading-progress",n,i)})).always((function(){t.$el.find("> .controls .search-input").searchInput("toggle-loading")})).done((function(){t.searchItems(e,"force")})))},clearSearch:function(e){var t=this;return this.searchFor?(this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.model.contents.fetchCurrentPage({silent:!0}).done((function(){t.renderItems()})),this):this},errorHandler:function(e,t,n){if(!t||0!==t.status||0!==t.readyState){if(this.error(e,t,n),i.default.isString(e)&&i.default.isString(t)){var a=e;return m.a.errorModal(a,t,n)}return t&&502===t.status?m.a.badGatewayErrorModal():m.a.ajaxErrorModal(e,t,n)}},clearMessages:function(e){return(i.default.isUndefined(e)?this.$messages().children('[class$="message"]'):r()(e.currentTarget)).fadeOut(this.fxSpeed,(function(){r()(this).remove()})),this},scrollToHid:function(e){return this.scrollToItem(i.default.first(this.viewsWhereModel({hid:e})))},ordinalIndicator:function(e){var t="".concat(e);switch(t.charAt(t.length-1)){case"1":return"".concat(t,"st");case"2":return"".concat(t,"nd");case"3":return"".concat(t,"rd");default:return"".concat(t,"th")}},toString:function(){return"HistoryView(".concat(this.model?this.model.get("name"):"",")")}});function M(e){r()("#toggle-deleted").modeButton({initialMode:e.initialModeDeleted,modes:[{mode:"showing_deleted",html:c()("Exclude deleted")},{mode:"not_showing_deleted",html:c()("Include deleted")}]}),r()("#toggle-hidden").modeButton({initialMode:e.initialModeHidden,modes:[{mode:"showing_hidden",html:c()("Exclude hidden")},{mode:"not_showing_hidden",html:c()("Include hidden")}]}),r()("#switch").click((function(){var e=Object(s.a)(),t=e.currHistoryPanel?e.currHistoryPanel:null;t?t.switchToHistory("${ history[ 'id' ] }"):window.location="${ switch_to_url }"})),e.hasMasthead&&r()("#center").addClass("flex-vertical-container");var t=e.userIsOwner?v.a.HistoryViewEdit:C.HistoryView,n=new u.a(e.historyJSON);r()("#import").click((function(){var e=Object(s.a)();Object(y.a)(n,{useImport:!0,allDatasets:"showing_deleted"===r()("#toggle-deleted").modeButton("getMode").mode}).done((function(){window===window.parent?window.location=Object(o.getAppRoot)():e.currHistoryPanel&&e.currHistoryPanel.loadCurrentHistory()}))}));var i=new t({el:r()("#history-"+e.historyJSON.id),className:t.prototype.className+" wide",$scrollContainer:e.hasMasthead?function(){return this.$el.parent()}:void 0,model:n,show_deleted:e.showDeletedJson,show_hidden:e.showHiddenJson,purgeAllowed:e.allow_user_dataset_purge});i.trigger("loading"),n.fetchContents({silent:!0}).fail((function(){alert("Galaxy history failed to load")})).done((function(){i.trigger("loading-done"),i.render()})),r()("#toggle-deleted").on("click",(function(){i.toggleShowDeleted()})),r()("#toggle-hidden").on("click",(function(){i.toggleShowHidden()}))}C.prototype.templates=(k=g.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- history.name %></div>',"</div>",'<div class="subtitle"></div>','<div class="history-size"><%- history.nice_size %></div>','<div class="actions"></div>','<div class="messages">',"<% if( history.deleted && history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been purged and deleted"),"</div>","<% } else if( history.deleted ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been deleted"),"</div>","<% } else if( history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been purged"),"</div>","<% } %>","<% if( history.message ){ %>",'<div class="<%= history.message.level || "info" %>messagesmall">',"<%= history.message.text %>","</div>","<% } %>","</div>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',c()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',c()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>",'<div class="list-pagination form-inline"></div>',"</div>"],"history"),x=g.a.wrapTemplate(['<button class="prev" <%- pages.current === 1 ? "disabled" : "" %>>previous</button>','<select class="pages form-control" ','title="',c()("Click to open and select a page. Begin typing a page number to select it"),'">',"<% _.range( 1, pages.last + 1 ).forEach( function( i ){ %>",'<option value="<%- i - 1 %>" <%- i === pages.current ? "selected" : "" %>>',"<%- view.ordinalIndicator( i ) %> of <%- pages.last %> pages","</option>","<% }); %>","</select>",'<button class="next" <%- pages.current === pages.last ? "disabled" : "" %>>next</button>'],"pages"),i.default.extend(i.default.clone(S.prototype.templates),{el:function(){return'<div>\n            <div class="controls"></div>\n            <ul class="list-items"></ul>\n            <div class="empty-message infomessagesmall"></div>\',\n        </div>'},controls:k,pagination:x}));t.a={HistoryView:C,historyEntry:M}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(7),a=n.n(i),r=n(60),o=n(143),s=n(152),l=n(221),c=n(633),d=n(634),u=n(631);function h(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){h(r,i,a,o,s,"next",e)}function s(e){h(r,i,a,o,s,"throw",e)}o(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(t){var n=t.id,i=t.itemClass,a=t.context,r=t.debounceInterval,s=void 0===r?150:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.itemClass=i,this.context=a,this.debounceInterval=s,this._searchText=new o.a}var t,n,i,h,m,_;return t=e,(n=[{key:"save",value:(_=f(regeneratorRuntime.mark((function e(t){var n,i,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.id,i=this.itemClass,o=this.context,(s=Object(r.a)(t)).valid){e.next=4;break}throw new Error("Invalid tag");case 4:return l="/tag/add_tag_async?item_id=".concat(n,"&item_class=").concat(i,"&context=").concat(o,"&new_tag=").concat(s.text),e.next=7,a.a.get(l);case 7:if(200===e.sent.status){e.next=10;break}throw new Error("Unable to save tag: ".concat(s));case 10:return e.abrupt("return",Object(r.a)(s));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"delete",value:(m=f(regeneratorRuntime.mark((function e(t){var n,i,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.id,i=this.itemClass,o=this.context,s=Object(r.a)(t),l="/tag/remove_tag_async?item_id=".concat(n,"&item_class=").concat(i,"&context=").concat(o,"&tag_name=").concat(s.text),e.next=5,a.a.get(l);case 5:if(200===e.sent.status){e.next=8;break}throw new Error("Unable to delete tag: ".concat(s));case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"autocomplete",value:(h=f(regeneratorRuntime.mark((function e(t){var n,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.id,i=this.itemClass,o="/tag/tag_autocomplete_data?item_id=".concat(n,"&item_class=").concat(i,"&q=").concat(t),e.next=4,a.a.get(o);case 4:if(200===(s=e.sent).status){e.next=7;break}throw new Error("Unable to retrieve autocomplete tags for search string: ".concat(t));case 7:return e.abrupt("return",(l=s.data,l.split("\n").filter((function(e){return e.includes("|")})).map((function(e){return e.split("|")[0]})).filter((function(e){return e.length})).filter((function(e){return"#Header"!==e}))).map(r.a));case 8:case"end":return e.stop()}var l}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"autocompleteOptions",get:function(){var e=this;return this._searchText.pipe(Object(s.a)((function(e){return e.replace("name:","")})),Object(l.a)((function(e){return e.length})),Object(c.a)(this.debounceInterval),Object(d.a)(),Object(u.a)((function(t){return e.autocomplete(t)})))}},{key:"autocompleteSearchText",set:function(e){this._searchText.next(e)}}])&&p(t.prototype,n),i&&p(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return T}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=n(100),f=n(32),p=n(65),m=n(68),_=n(85);n(545),n(546),n(703),n(547),n(548),n(421),n(549),n(550),n(153);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=C(e);if(t){var a=C(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){w(n,e);var t=x(n);function n(e){return v(this,n),t.call(this,e)}return b(n,[{key:"initialize",value:function(e){this.baseURL=e}},{key:"save_viz",value:function(){var e=this,t=Object(c.a)();t.modal.show({title:"Saving...",body:"progress"});var n=[];r()(".bookmark").each((function(){n.push({position:r()(e).children(".position").text(),annotation:r()(e).children(".annotation").text()})}));var i=this.view.overview_drawable?this.view.overview_drawable.config.get_value("name"):null,a={view:this.view.to_dict(),viewport:{chrom:this.view.chrom,start:this.view.low,end:this.view.high,overview:i},bookmarks:n};return r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:this.view.vis_id,title:this.view.config.get_value("name"),dbkey:this.view.dbkey,type:"trackster",vis_json:JSON.stringify(a)}}).success((function(n){t.modal.hide(),e.view.vis_id=n.vis_id,e.view.has_changes=!1,window.history.pushState({},"",n.url+window.top.location.hash)})).error((function(){t.modal.show({title:u()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){t.modal.hide()}}})}))}},{key:"createButtonMenu",value:function(){var e=this,t=p.a.create_icon_buttons_menu([{icon_class:"plus-button",title:u()("Add tracks"),on_click:function(){f.a.select_datasets({dbkey:e.view.dbkey},(function(t){i.default.each(t,(function(t){e.view.add_drawable(h.a.object_from_template(t,e.view,e.view))}))}))}},{icon_class:"block--plus",title:u()("Add group"),on_click:function(){e.view.add_drawable(new h.a.DrawableGroup(e.view,e.view,{name:"New Group"}))}},{icon_class:"bookmarks",title:u()("Bookmarks"),on_click:function(){window.force_right_panel("0px"==r()("div#right").css("right")?"hide":"show")}},{icon_class:"globe",title:u()("Circster"),on_click:function(){var t=e.view.vis_id,n="id="+t;null==t&&(n="dataset_id=".concat(e.view.drawables[0].dataset.id,"&hda_ldda=").concat(e.view.drawables[0].dataset.attributes.hda_ldda)),window.top.location="".concat(e.baseURL,"visualization/circster?").concat(n)}},{icon_class:"disk--arrow",title:u()("Save"),on_click:function(){e.save_viz()}},{icon_class:"cross-circle",title:u()("Close"),on_click:function(){e.handle_unsaved_changes(e.view)}}],{tooltip_config:{placement:"bottom"}});return this.buttonMenu=t,t}},{key:"add_bookmark",value:function(e,t,n){var i=this,a=r()("#right .unified-panel-body"),o=r()("<div/>").addClass("bookmark").appendTo(a),s=r()("<div/>").addClass("position").appendTo(o);r()("<a href='javascript:void(0)'/>").text(e).appendTo(s).click((function(){return i.view.go_to(e),!1}));var l=r()("<div/>").text(t).appendTo(o);if(n){var c=r()("<div/>").addClass("delete-icon-container").prependTo(o).click((function(){return o.slideUp("fast"),o.remove(),i.view.has_changes=!0,!1}));r()("<a href='javascript:void(0)'/>").addClass("icon-button delete").appendTo(c),l.make_text_editable({num_rows:3,use_textarea:!0,help_text:"Edit bookmark note"}).addClass("annotation")}return this.view.has_changes=!0,o}},{key:"create_visualization",value:function(e,t,n,a,o){var s=this;return this.view=new h.a.TracksterView(i.default.extend(e,{header:!1})),this.view.editor=!0,r.a.when(this.view.load_chroms_deferred).then((function(e){var i=null;if(t){var r=t.chrom,l=t.start,c=t.end;i=t.overview,r&&void 0!==l&&c?s.view.change_chrom(r,l,c):s.view.change_chrom(e[0].chrom)}else s.view.change_chrom(e[0].chrom);if(n)for(var d=0;d<n.length;d++)s.view.add_drawable(h.a.object_from_template(n[d],s.view,s.view));for(var u=0;u<s.view.drawables.length;u++)if(s.view.drawables[u].config.get_value("name")===i){s.view.set_overview(s.view.drawables[u]);break}if(a)for(var f,p=0;p<a.length;p++)f=a[p],s.add_bookmark(f.position,f.annotation,o);s.view.has_changes=!1})),this.set_up_router({view:this.view}),this.view}},{key:"set_up_router",value:function(e){new f.a.TrackBrowserRouter(e),s.a.history.start()}},{key:"init_keyboard_nav",value:function(e){r()(document).keyup((function(t){if(!r()(t.srcElement).is(":input"))switch(t.which){case 37:e.move_fraction(.25);break;case 38:e.viewport_container.scrollTop(e.viewport_container.scrollTop()-20);break;case 39:e.move_fraction(-.25);break;case 40:e.viewport_container.scrollTop(e.viewport_container.scrollTop()+20)}}))}},{key:"handle_unsaved_changes",value:function(e){var t=this,n=Object(c.a)();e.has_changes?n.modal.show({title:u()("Close visualization"),body:"There are unsaved changes to your visualization which will be lost if you do not save them.",buttons:{Cancel:function(){n.modal.hide()},"Leave without Saving":function(){r()(window).off("beforeunload"),window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},Save:function(){r.a.when(t.save_viz()).then((function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")}))}}}):window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")}}]),n}(s.a.Model),T=function(e){w(n,e);var t=x(n);function n(e){return v(this,n),t.call(this,e)}return b(n,[{key:"initialize",value:function(){var e=this;this.ui=new M(Object(l.getAppRoot)()),this.ui.createButtonMenu(),this.ui.buttonMenu.$el.attr("style","float: right"),r()("#center .unified-panel-header-inner").append(this.ui.buttonMenu.$el),r()("#right .unified-panel-title").append("Bookmarks"),r()("#right .unified-panel-icons").append("<a id='add-bookmark-button' class='icon-button menu-button plus-button' href='javascript:void(0);' title='Add bookmark'></a>"),r()("#right-border").click((function(){e.ui.view.resize_window()})),window.force_right_panel("hide"),window.galaxy_config.app.id?this.view_existing():m.a.get("dataset_id")?this.choose_existing_or_new():this.view_new()}},{key:"choose_existing_or_new",value:function(){var e=this,t=Object(c.a)(),n=m.a.get("dbkey"),i={dbkey:n,dataset_id:m.a.get("dataset_id"),hda_ldda:m.a.get("hda_ldda"),gene_region:m.a.get("gene_region")};t.modal.show({title:"View Data in a New or Saved Visualization?",body:"<p><ul style='list-style: disc inside none'>You can add this dataset as:<li>a new track to one of your existing, saved Trackster sessions if they share the genome build: <b>".concat(n||"Not available.","</b></li><li>or create a new session with this dataset as the only track</li></ul></p>"),buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},"View in saved visualization":function(){e.view_in_saved(i)},"View in new visualization":function(){e.view_new()}}})}},{key:"view_in_saved",value:function(e){var t=this,n=Object(c.a)(),i=new _.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_tracks"),embedded:!0});n.modal.show({title:u()("Add Data to Saved Visualization"),body:i.$el,buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},"Add to visualization":function(){r()(window.parent.document).find("input[name=id]:checked").each((function(){e.id=r()(t).val(),window.top.location="".concat(Object(l.getAppRoot)(),"visualization/trackster?").concat(r.a.param(e))}))}}})}},{key:"view_existing",value:function(){var e=window.galaxy_config.app.viz_config;this.ui.create_visualization({container:r()("#center .unified-panel-body"),name:e.title,vis_id:e.vis_id,dbkey:e.dbkey},e.viewport,e.tracks,e.bookmarks,!0),this.init_editor()}},{key:"view_new",value:function(){var e=this,t=Object(c.a)();r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/genomes?chrom_info=True"),data:{},error:function(){alert("Couldn't create new browser.")},success:function(n){t.modal.show({title:u()("New Visualization"),body:e.template_view_new(n),buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},Create:function(){e.create_browser(r()("#new-title").val(),r()("#new-dbkey").val()),t.modal.hide()}}});var a=n.map((function(e){return e[1]}));window.galaxy_config.app.default_dbkey&&i.default.contains(a,window.galaxy_config.app.default_dbkey)&&r()("#new-dbkey").val(window.galaxy_config.app.default_dbkey),r()("#new-title").focus(),r()("select[name='dbkey']").select2(),r()("#overlay").css("overflow","auto")}})}},{key:"template_view_new",value:function(e){for(var t='<form id="new-browser-form" action="javascript:void(0);" method="post" onsubmit="return false;"><div class="form-row"><label for="new-title">Browser name:</label><div class="form-row-input"><input type="text" name="title" id="new-title" value="Unnamed"></input></div><div style="clear: both;"></div></div><div class="form-row"><label for="new-dbkey">Reference genome build (dbkey): </label><div class="form-row-input"><select name="dbkey" id="new-dbkey">',n=0;n<e.length;n++)t+='<option value="'.concat(e[n][1],'">').concat(e[n][0],"</option>");return t+='</select></div><div style="clear: both;"></div></div><div class="form-row">Is the build not listed here? <a href="'.concat(Object(l.getAppRoot)(),'custom_builds" target="_top">Add a Custom Build</a></div></form>')}},{key:"init_editor",value:function(){var e=this;r()("#center .unified-panel-title").text("".concat(this.ui.view.config.get_value("name")," (").concat(this.ui.view.dbkey,")")),window.galaxy_config.app.add_dataset&&r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/datasets/").concat(window.galaxy_config.app.add_dataset),data:{hda_ldda:"hda",data_type:"track_config"},dataType:"json",success:function(t){e.ui.view.add_drawable(h.a.object_from_template(t,e.ui.view,e.ui.view))}}),r()("#add-bookmark-button").click((function(){var t="".concat(e.ui.view.chrom,":").concat(e.ui.view.low,"-").concat(e.ui.view.high);return e.ui.add_bookmark(t,"Bookmark description",!0)})),this.ui.init_keyboard_nav(this.ui.view),r()(window).on("beforeunload",(function(){if(e.ui.view.has_changes)return"There are unsaved changes to your visualization that will be lost if you leave this page."}))}},{key:"create_browser",value:function(e,t){r()(document).trigger("convert_to_values"),this.ui.create_visualization({container:r()("#center .unified-panel-body"),name:e,dbkey:t},window.galaxy_config.app.gene_region),this.init_editor(),this.ui.view.editor=!0}}]),n}(s.a.View)},function(e,t,n){"use strict";var i=n(497),a=n.n(i),r=n(60),o={components:{VueTagsInput:a.a},props:{value:{type:Array,required:!1,default:function(){return[]}},autocompleteItems:{type:Array,required:!1,default:function(){return[]}},maxVisibleTags:{type:Number,required:!1,default:5},useToggleLink:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{tagText:"",tagToggle:!(this.useToggleLink&&this.value.length>this.maxVisibleTags),triggerKeys:[13," "]}},computed:{tagContainerClasses:function(){return{disabled:this.disabled}},tagModels:function(){return this.value.map(r.a)},autocompleteTags:function(){return this.autocompleteItems.map(r.a)},linkText:function(){return"".concat(this.tagModels.length," Tags")},linkVisible:function(){return this.useToggleLink&&this.tagModels.length>this.maxVisibleTags},tagsVisible:function(){return!this.useToggleLink||this.tagToggle}},watch:{tagText:function(e){this.$emit("tag-input-changed",e)}},methods:{tagsChanged:function(e){this.$emit("input",this.pluckLabels(e))},pluckLabels:function(e){return e.map((function(e){return Object(r.a)(e).toString()}))},toggleTagDisplay:function(){this.tagToggle=!this.tagToggle,this.$emit("show",this.tagToggle)},beforeAddingTag:function(e){if(!this.emitHookEvent("before-adding-tag",e)){var t=e.tag;(0,e.addTag)(t)}},beforeDeletingTag:function(e){if(!this.emitHookEvent("before-deleting-tag",e)){var t=e.tag;(0,e.deleteTag)(t)}},emitHookEvent:function(e,t){return!!this.hasHandler(e)&&(this.$emit(e,t),!0)},hasHandler:function(e){return Object.keys(this.$listeners).includes(e)}}},s=(n(554),n(5)),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tags-display",class:e.tagContainerClasses},[e.linkVisible?n("a",{staticClass:"toggle-link",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleTagDisplay(t)}}},[e._v("\n        "+e._s(e.linkText)+"\n    ")]):e._e(),e._v(" "),e.tagsVisible?n("vue-tags-input",{staticClass:"tags-input tag-area",attrs:{tags:e.tagModels,"autocomplete-items":e.autocompleteTags,disabled:e.disabled,placeholder:"Add Tags","add-on-key":e.triggerKeys},on:{"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag,"tags-changed":e.tagsChanged},scopedSlots:e._u([{key:"tag-center",fn:function(t){return[n("div",{staticClass:"tag-name",on:{click:function(n){return e.$emit("tag-click",t.tag)}}},[e._v(e._s(t.tag.label))])]}}],null,!1,4090180873),model:{value:e.tagText,callback:function(t){e.tagText=t},expression:"tagText"}}):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},function(e,t,n){"use strict";var i=n(50),a=n(33),r=n(428);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={props:{jobId:{type:String},datasetId:{type:String},aws_estimate:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.jobId?this.fetchJobMetricsForJobId(this.jobId):this.fetchJobMetricsForDatasetId({datasetId:this.datasetId,datasetType:this.datasetType})},computed:s(s({},Object(a.c)(["getJobMetricsByDatasetId","getJobMetricsByJobId"])),{},{isAwsEstimate:function(){return this.aws_estimate&&this.aws_estimate.toUpperCase()==="true".toUpperCase()},awsEstimate:function(){if(this.isAwsEstimate){var e={};if(this.jobMetrics.forEach((function(t){switch(t.name){case"galaxy_memory_mb":e.memory=parseInt(t.raw_value);break;case"galaxy_slots":e.vcpus=parseInt(t.raw_value);break;case"runtime_seconds":e.seconds=parseInt(t.raw_value)}})),e.memory?e.memory/=1024:e.memory=.5,e.instance=r.find((function(t){return t.mem>=e.memory&&t.vcpus>=e.vcpus})),void 0!==e.instance)return e.price=(e.seconds*e.instance.price/3600).toFixed(2),e}},jobMetrics:function(){return this.jobId?this.getJobMetricsByJobId(this.jobId):this.getJobMetricsByDatasetId(this.datasetId,this.datasetType)},metricsByPlugins:function(){var e={};return this.jobMetrics.forEach((function(t){t.plugin in e||(e[t.plugin]={}),e[t.plugin][t.title]=t.value})),e},orderedPlugins:function(){return Object.keys(this.metricsByPlugins).sort()}}),methods:s({},Object(i.b)(["fetchJobMetricsForDatasetId","fetchJobMetricsForJobId"]))},d=n(5),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.orderedPlugins.length>0?n("div",[e.includeTitle?n("h3",[e._v("Job Metrics")]):e._e(),e._v(" "),e._l(e.orderedPlugins,(function(t){return n("div",{key:t,staticClass:"metrics_plugin"},[n("h4",{staticClass:"metrics_plugin_title"},[e._v(e._s(t))]),e._v(" "),n("table",{staticClass:"tabletip info_data_table"},[n("tbody",e._l(e.metricsByPlugins[t],(function(t,i){return n("tr",{key:i},[n("td",[e._v(e._s(i))]),e._v(" "),n("td",[e._v(e._s(t))])])})),0)])])})),e._v(" "),e.isAwsEstimate&&e.awsEstimate?n("div",{attrs:{id:"aws-estimate"}},[n("h3",[e._v("AWS estimate")]),e._v(" "),n("b",[e._v(e._s(e.awsEstimate.price)+" USD")]),n("br"),e._v("\n        This job requested "+e._s(e.awsEstimate.vcpus)+" cores and "+e._s(e.awsEstimate.memory)+" Gb. Given this, the smallest\n        EC2 machine we could find is "),n("span",{attrs:{id:"aws_name"}},[e._v(e._s(e.awsEstimate.instance.name))]),e._v(" ("),n("span",{attrs:{id:"aws_mem"}},[e._v(e._s(e.awsEstimate.instance.mem))]),e._v("\n        GB / "),n("span",{attrs:{id:"aws_vcpus"}},[e._v(e._s(e.awsEstimate.instance.vcpus))]),e._v(" vCPUs /\n        "),n("span",{attrs:{id:"aws_cpu"}},[e._v(e._s(e.awsEstimate.instance.cpu))]),e._v("). That instance is priced at "+e._s(e.awsEstimate.instance.price)+" USD/hour."),n("br"),e._v("\n        Please note, that those numbers are only estimates, all jobs are always free of charge for all users.\n    ")]):e._e()],2):e._e()}),[],!1,null,null,null);t.a=u.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(197),d=n(112),u=n(275),h=n(11),f=h.a.SessionStorageModel.extend({defaults:{expandedIds:{},show_deleted:!1,show_hidden:!1},addExpanded:function(e){var t=this.get("expandedIds");t[e.id]=e.get("id"),this.save("expandedIds",t)},removeExpanded:function(e){var t=this.get("expandedIds");delete t[e.id],this.save("expandedIds",t)},isExpanded:function(e){return i.default.result(this.get("expandedIds"),e,!1)},allExpanded:function(){return i.default.values(this.get("expandedIds"))},clearExpanded:function(){this.set("expandedIds",{})},includeDeleted:function(e){return i.default.isUndefined(e)||this.set("show_deleted",e),this.get("show_deleted")},includeHidden:function(e){return i.default.isUndefined(e)||this.set("show_hidden",e),this.get("show_hidden")},toString:function(){return"HistoryPrefs(".concat(this.id,")")}},{storageKeyPrefix:"history:",historyStorageKey:function(e){if(!e)throw new Error("HistoryPrefs.historyStorageKey needs valid id: ".concat(e));return f.storageKeyPrefix+e},get:function(e){return new f({id:f.historyStorageKey(e)})},clearAll:function(e){for(var t in sessionStorage)0===t.indexOf(f.storageKeyPrefix)&&sessionStorage.removeItem(t)}}),p={HistoryPrefs:f},m=n(104),_=n(114),g=window.localStorage.getItem("historyContentsLimitPerPageDefault")||500,v=c.a.PaginatedCollection,y=v.extend(h.a.LoggableMixin).extend({_logNamespace:"history",limitPerPage:g,limitPerProgressiveFetch:g,order:"hid",url:function(){return"".concat(this.urlRoot,"/").concat(this.historyId,"/contents")},initialize:function(e,t){this.on({"sync add":this.trackJobStates}),t=t||{},this.urlRoot="".concat(Object(l.getAppRoot)(),"api/histories"),v.prototype.initialize.call(this,e,t),this.history=t.history||null,this.setHistoryId(t.historyId||null),this.includeDeleted=t.includeDeleted||this.includeDeleted,this.includeHidden=t.includeHidden||this.includeHidden,this.model.prototype.idAttribute="type_id"},trackJobStates:function(){var e=this;this.each((function(t){e.jobStateSummariesCollection&&e.jobStateSummariesCollection.trackModel(t)}))},model:function(e,t){return"dataset"===e.history_content_type?new d.a.HistoryDatasetAssociation(e,t):"dataset_collection"===e.history_content_type?new u.a.HistoryDatasetCollection(e,t):{validationError:"Unknown history_content_type: ".concat(e.history_content_type)}},stopPolling:function(){this.jobStateSummariesCollection&&(this.jobStateSummariesCollection.active=!1,this.jobStateSummariesCollection.clearUpdateTimeout())},setHistoryId:function(e){this.stopPolling(),this.historyId=e,e&&(this._setUpWebStorage(),this.jobStateSummariesCollection=new m.a.JobStatesSummaryCollection,this.jobStateSummariesCollection.historyId=e,this.jobStateSummariesCollection.monitor())},_setUpWebStorage:function(e){return this.storage=new p.HistoryPrefs({id:p.HistoryPrefs.historyStorageKey(this.historyId)}),this.trigger("new-storage",this.storage,this),this.on({"include-deleted":function(e){this.storage.includeDeleted(e)},"include-hidden":function(e){this.storage.includeHidden(e)}}),this.includeDeleted=this.storage.includeDeleted()||!1,this.includeHidden=this.storage.includeHidden()||!1,this},comparators:i.default.extend(i.default.clone(v.prototype.comparators),{name:h.a.buildComparator("name",{ascending:!0}),"name-dsc":h.a.buildComparator("name",{ascending:!1}),hid:h.a.buildComparator("hid",{ascending:!1}),"hid-asc":h.a.buildComparator("hid",{ascending:!0})}),running:function(){return this.filter((function(e){return!e.inReadyState()}))},runningAndActive:function(){return this.filter((function(e){return!e.inReadyState()&&e.get("visible")&&!e.get("deleted")}))},getByHid:function(e){return this.findWhere({hid:e})},haveDetails:function(){return this.all((function(e){return e.hasDetails()}))},hidden:function(){return this.filter((function(e){return e.hidden()}))},deleted:function(){return this.filter((function(e){return e.get("deleted")}))},visibleAndUndeleted:function(){return this.filter((function(e){return e.get("visible")&&!e.get("deleted")}))},setIncludeDeleted:function(e,t){if(i.default.isBoolean(e)&&e!==this.includeDeleted){if(this.includeDeleted=e,i.default.result(t,"silent"))return;this.trigger("include-deleted",e,this)}},setIncludeHidden:function(e,t){if(i.default.isBoolean(e)&&e!==this.includeHidden){if(this.includeHidden=e,t=t||{},i.default.result(t,"silent"))return;this.trigger("include-hidden",e,this)}},fetch:function(e){if(e=e||{},this.historyId&&!e.details){var t=p.HistoryPrefs.get(this.historyId).toJSON();i.default.isEmpty(t.expandedIds)||(e.details=i.default.values(t.expandedIds).join(","))}return v.prototype.fetch.call(this,e)},_buildFetchData:function(e){return i.default.extend(v.prototype._buildFetchData.call(this,e),{v:"dev"})},_fetchParams:v.prototype._fetchParams.concat(["v","details"]),_buildFetchFilters:function(e){var t=v.prototype._buildFetchFilters.call(this,e)||{},n={};return this.includeDeleted||(n.deleted=!1,n.purged=!1),this.includeHidden||(n.visible=!0),i.default.defaults(t,n)},getTotalItemCount:function(){return this.history.contentsShown()},fetchUpdated:function(e,t){return e&&((t=t||{filters:{}}).remove=!1,t.filters={"update_time-ge":e.toISOString(),visible:""}),this.fetch(t)},fetchDeleted:function(e){var t=this;return(e=e||{}).filters=i.default.extend(e.filters,{deleted:!0,purged:void 0}),e.remove=!1,this.trigger("fetching-deleted",this),this.fetch(e).always((function(){t.trigger("fetching-deleted-done",t)}))},fetchHidden:function(e){var t=this;return(e=e||{}).filters=i.default.extend(e.filters,{visible:!1}),e.remove=!1,this.trigger("fetching-hidden",this),this.fetch(e).always((function(){t.trigger("fetching-hidden-done",t)}))},fetchAllDetails:function(e){return(e=e||{}).data=i.default.extend(e.data||{},{details:"all"}),this.fetch(e)},_filterAndUpdate:function(e,t){var n=this,i=this.model.prototype.idAttribute,a=[t];return this.fetch({filters:e,remove:!1}).then((function(e){return e=e.reduce((function(e,t,a){var r=n.get(t[i]);return r?e.concat(r):e}),[]),n.ajaxQueue("save",a,e)}))},ajaxQueue:function(e,t,n){return n=n||this.models,new _.a.AjaxQueue(n.slice().reverse().map((function(n,a){var r=i.default.isString(e)?n[e]:e;return function(){return r.apply(n,t)}}))).deferred},_recursivelyFetch:function(e,t,n,a,r){var o=this;r=r||0;var s=i.default.extend(i.default.clone(e),{view:"summary",keys:t,limit:a,offset:r,reset:0===r,remove:!1});i.default.defer((function(){o.fetch.call(o,s).fail(n.reject).done((function(i){n.notify(i,a,r),i.length!==a?(o.allFetched=!0,n.resolve(i,a,r)):o._recursivelyFetch(e,t,n,a,r+a)}))}))},progressivelyFetchDetails:function(e){e=e||{};var t=r.a.Deferred();return this._recursivelyFetch(e,d.a.HistoryDatasetAssociation.prototype.searchAttributes.join(","),t,e.limitPerCall||this.limitPerProgressiveFetch),t},isCopyable:function(e){return i.default.isObject(e)&&e.id&&i.default.contains(["HistoryDatasetAssociation","HistoryDatasetCollectionAssociation"],e.model_class)},copy:function(e){var t,n,a;i.default.isString(e)?(t=e,a="hda",n="dataset"):(t=e.id,a={HistoryDatasetAssociation:"hda",LibraryDatasetDatasetAssociation:"ldda",HistoryDatasetCollectionAssociation:"hdca"}[e.model_class]||"hda",n="hdca"===a?"dataset_collection":"dataset");var o=this,s=r.a.ajax(this.url(),{method:"POST",contentType:"application/json",data:JSON.stringify({content:t,source:a,type:n,copy_elements:!0})}).done((function(e){o.add([e],{parse:!0})})).fail((function(e,i,r){o.trigger("error",o,s,{},"Error copying contents",{type:n,id:t,source:a})}));return s},createHDCA:function(e,t,n,i,a,r){return void 0===a&&(a=!0),this.model({history_content_type:"dataset_collection",collection_type:t,history_id:this.historyId,name:n,hide_source_items:i||!1,copy_elements:a,element_identifiers:e}).save(r)},haveSearchDetails:function(){return this.allFetched&&this.all((function(e){return i.default.has(e.attributes,"annotation")}))},matches:function(e){return this.filter((function(t){return t.matches(e)}))},clone:function(){var e=s.a.Collection.prototype.clone.call(this);return e.historyId=this.historyId,e},toString:function(){return["HistoryContents(",[this.historyId,this.length].join(),")"].join("")}})},function(e,t,n){"use strict";var i=["log","debug","info","warn","error","metric"];t.a=function(e,t){var n=void 0!==e.prototype?e.prototype:e;return void 0!==t&&(n._logNamespace=t),i.forEach((function(e){n[e]=function(){if(this.logger)return this.logger.emit?this.logger.emit(e,this._logNamespace,arguments):this.logger[e]?this.logger[e].apply(this.logger,arguments):void 0}})),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(10);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e){var t=Object(i.b)(e),n=Math.abs((t>>4)%360),r=75+(15&t),o="hsl(".concat(n,", 100%, ").concat(r,"%)"),s="hsl(".concat(n,", 100%, ").concat(r-40,"%)"),l=a(function(e,t,n){var i,a,r;if(0==t)i=a=r=n;else{var o=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),a=o(l,s,e),r=o(l,s,e-1/3)}return[i,a,r]}(n,1,r/100),3);return{primary:o,darker:s,contrasting:function(e,t,n){return(255*e*299+255*t*587+255*n*114)/1e3>125?"black":"white"}(l[0],l[1],l[2])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(0),a=n.n(i);function r(){console.log("init_refresh_on_change"),a()("select[refresh_on_change='true']").off("change").change((function(){var e=a()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var i=e.attr("last_selected_value");if(-1===a.a.inArray(t,n)&&-1===a.a.inArray(i,n))return}a()(window).trigger("refresh_on_change"),a()(document).trigger("convert_to_values"),e.get(0).form.submit()})),a()(":checkbox[refresh_on_change='true']").off("click").click((function(){var e=a()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var i=e.attr("last_selected_value");if(-1===a.a.inArray(t,n)&&-1===a.a.inArray(i,n))return}a()(window).trigger("refresh_on_change"),e.get(0).form.submit()})),a()("a[confirm]").off("click").click((function(){return confirm(a()(this).attr("confirm"))}))}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(10),l=n(18),c=o.a.View.extend({visible:!1,initialize:function(e){var t=this;this.model=e&&e.model||new o.a.Model({id:s.a.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,operations:null,collapsible:!1,collapsible_button:!0,collapsed:!1,onchange_title:null}).set(e),this.setElement(this._template()),this.section=e.section,this.$body=this.$(".portlet-body"),this.$title=this.$(".portlet-title"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new l.a.Button({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){t[t.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var e=this,t=this.model.attributes;return this.$el.removeClass().addClass(t.cls).attr("id",t.id),this.$header[t.title?"show":"hide"](),this.$title_text.html(t.title),t.title_id&&this.$title.attr("id",t.title_id),t.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa mr-1").addClass(t.icon).show():this.$title_icon.hide(),this.$title_text[t.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),t.collapsible&&(this.$title_text.on("click",(function(){e[e.collapsed?"expand":"collapse"]()})),t.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!t.onchange_title),t.onchange_title&&this.$title_text.make_text_editable({on_finish:function(e){t.onchange_title(e)}}),t.buttons?(this.$buttons.empty().show(),a.a.each(this.model.get("buttons"),(function(t,n){n&&(n.$el.prop("id",t),e.$buttons.append(n.$el))}))):this.$buttons.hide(),this.$operations.empty,t.collapsible&&t.collapsible_button&&this.$operations.append(this.collapsible_button.$el),t.operations&&a.a.each(t.operations,(function(t,n){n.$el.prop("id",t),e.$operations.append(n.$el)})),this},append:function(e){this.$body.append(e)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(e){this.$buttons.find("#".concat(e)).prop("disabled",!1)},disableButton:function(e){this.$buttons.find("#".concat(e)).prop("disabled",!0)},hideOperation:function(e){this.$operations.find("#".concat(e)).hide()},showOperation:function(e){this.$operations.find("#".concat(e)).show()},setOperation:function(e,t){this.$operations.find("#".concat(e)).off("click").on("click",t)},title:function(e){return e&&this.$title_text.html(e),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.section&&this.section.renderOnce(),this.$content.show(),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return a()("<div/>").append(a()("<div/>").addClass("portlet-header").append(a()("<div/>").addClass("portlet-operations")).append(a()("<div/>").addClass("portlet-title").append(a()("<i/>").addClass("portlet-title-icon")).append(a()("<span/>").addClass("portlet-title-text")))).append(a()("<div/>").addClass("portlet-content").append(a()("<div/>").addClass("portlet-body")).append(a()("<div/>").addClass("portlet-buttons mt-3 mb-3"))).append(a()("<div/>").addClass("portlet-backdrop"))}});t.a={View:c}},function(e,t,n){"use strict";var i=n(8),a=n(14),r=n(106),o=n(196);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.values={},this.multiple=t.multiple||!1,this.format=t.format||null}var t,n,i;return t=e,(n=[{key:"add",value:function(e){this.multiple||(this.values={});var t=e&&e.id;if(!t)throw"Invalid record with no <id>.";this.values[t]?delete this.values[t]:this.values[t]=e}},{key:"count",value:function(){return Object.keys(this.values).length}},{key:"exists",value:function(e){return!!this.values[e]}},{key:"finalize",value:function(){var e=this,t=[];return Object.values(this.values).forEach((function(n){var i=null;i=e.format?n[e.format]:n,t.push(i)})),t.length>0&&!this.multiple&&(t=t[0]),t}}])&&s(t.prototype,n),i&&s(t,i),e}(),c=n(7),d=n.n(c),u=n(3);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"get",value:function(e){var t=this;return new Promise((function(n,i){d.a.get(e).then((function(e){var i=t.getItems(e.data);n(i)})).catch((function(e){var t="Request failed.";e.response&&(t=e.response.data.err_msg||"".concat(e.response.statusText," (").concat(e.response.status,")")),i(t)}))}))}},{key:"getItems",value:function(e){for(var t=[],n=[e];n.length>0;){var i=n.pop();if(Array.isArray(i))i.forEach((function(e){n.push(e)}));else if(i.elements)n.push(i.elements);else if(i.object)n.push(i.object);else{var a=this.getRecord(i);a&&t.push(a)}}return t}},{key:"getRecord",value:function(e){var t="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port);return e.details=e.extension||e.description,e.time=e.update_time||e.create_time,e.isLeaf=this.isDataset(e),e.time&&(e.time=e.time.substring(0,16).replace("T"," ")),"Library"==e.model_class?(e.label=e.name,e.url="".concat(Object(u.getAppRoot)(),"api/libraries/").concat(e.id,"/contents"),e):e.hid?(e.label="".concat(e.hid,": ").concat(e.name),e.download="".concat(t).concat(Object(u.getAppRoot)(),"api/histories/").concat(e.history_id,"/contents/").concat(e.id,"/display"),e):"file"==e.type?(e.src="ldda",e.label=e.name,e.download="".concat(t).concat(Object(u.getAppRoot)(),"api/libraries/datasets/download/uncompressed?ld_ids=").concat(e.id),e):void 0}},{key:"isDataset",value:function(e){return"dataset"==e.history_content_type||"file"==e.type}}])&&h(t.prototype,n),i&&h(t,i),e}(),p=n(145);function m(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}i.default.use(a.a);var g={mixins:[r.a],props:{multiple:{type:Boolean,default:!1},format:{type:String,default:"download"},library:{type:Boolean,default:!0},history:{type:String,required:!0},modalStatic:{type:Boolean,default:!1},allowUpload:{type:Boolean,default:!0}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1}},created:function(){this.services=new f,this.urlTracker=new o.a(this.getHistoryUrl()),this.model=new l({multiple:this.multiple,format:this.format}),this.load()},methods:{getHistoryUrl:function(){return"".concat(Object(u.getAppRoot)(),"api/histories/").concat(this.history,"/contents?deleted=false")},formatRows:function(){var e,t=m(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value,a="active";n.isLeaf&&(a=this.model.exists(n.id)?"success":"default"),i.default.set(n,"_rowVariant",a)}}catch(e){t.e(e)}finally{t.f()}},onClick:function(e){e.isLeaf?(this.model.add(e),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.onOk()):this.load(e.url)},onUpload:function(){var e={multiple:this.multiple,format:this.format,callback:this.callback,modalShow:!0,selectable:!0};Object(p.b)(e),this.modalShow=!1},onOk:function(){var e=this.model.finalize();this.modalShow=!1,this.callback(e),this.$emit("onOk",e)},onCancel:function(){this.modalShow=!1,this.$emit("onCancel")},load:function(e){var t=this;e=this.urlTracker.getUrl(e),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.services.get(e).then((function(e){t.library&&t.urlTracker.atRoot()&&e.unshift({label:"Data Libraries",url:"".concat(Object(u.getAppRoot)(),"api/libraries")}),t.items=e,t.formatRows(),t.optionsShow=!0})).catch((function(e){t.errorMessage=e}))}}},v=n(5),y=Object(v.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:e.multiple,filter:e.filter},on:{clicked:e.onClick,load:e.load}}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[e.undoShow?n("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(t){return e.load()}}},[n("div",{staticClass:"fa fa-caret-left mr-1"}),e._v("\n            Back\n        ")]):e._e(),e._v(" "),e.allowUpload?n("b-btn",{staticClass:"float-left mr-1",attrs:{size:"sm"},on:{click:e.onUpload}},[n("div",{staticClass:"fa fa-upload ml-1"}),e._v("\n            Upload\n        ")]):e._e(),e._v(" "),e.multiple?n("b-btn",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary",disabled:!e.hasValue},on:{click:e.onOk}},[e._v("\n            Ok\n        ")]):e._e()]},proxy:!0}])})}),[],!1,null,null,null);t.a=y.exports},function(e,t,n){"use strict";var i,a=n(1),r=n(0),o=n.n(r),s=n(3),l=n(6),c=n(24),d=n(99),u=n(89),h=n(201),f=n(52),p=n(11),m=n(2),_=n.n(m),g=d.b.DatasetListItemView,v=g.extend({initialize:function(e){g.prototype.initialize.call(this,e),this.hasUser=e.hasUser,this.purgeAllowed=e.purgeAllowed||!1,this.tagsEditorShown=e.tagsEditorShown||!1,this.annotationEditorShown=e.annotationEditorShown||!1},_renderPrimaryActions:function(){var e=g.prototype._renderPrimaryActions.call(this);return this.model.get("state")===c.a.NOT_VIEWABLE?e:g.prototype._renderPrimaryActions.call(this).concat([this._renderEditButton(),this._renderDeleteButton()])},_renderEditButton:function(){var e=this;if(this.model.get("state")===c.a.DISCARDED||!this.model.get("accessible"))return null;var t=this.model.get("purged"),n=this.model.get("deleted"),i={title:_()("Edit attributes"),href:"".concat(Object(s.getAppRoot)(),"datasets/edit?dataset_id=").concat(this.model.attributes.id),faIcon:"fa-pencil",classes:"edit-btn",onclick:function(i){if(!n&&!t){var a=Object(l.a)();if(a.router){i.preventDefault();var r=e.model.get("element_id")||e.model.get("id");a.router.push("datasets/edit",{dataset_id:r})}}}};return n||t?(i.disabled=!0,t?i.title=_()("Cannot edit attributes of datasets removed from disk"):n&&(i.title=_()("Undelete dataset to edit attributes"))):[c.a.UPLOAD,c.a.NEW].includes(this.model.get("state"))&&(i.disabled=!0,i.title=_()("This dataset is not yet editable")),Object(f.a)(i)},_renderDeleteButton:function(){if(!this.model.get("accessible"))return null;var e=this,t=this.model.isDeletedOrPurged();return Object(f.a)({title:t?_()("Dataset is already deleted"):_()("Delete"),disabled:t,faIcon:"fa-times",classes:"delete-btn",onclick:function(){e.$el.find(".icon-btn.delete-btn").tooltip("dispose"),e.model.delete()}})},_renderDetails:function(){var e=g.prototype._renderDetails.call(this),t=this.model.get("state");return this.model.isDeletedOrPurged()||(this._renderTags(e),this._renderAnnotation(e),[c.a.OK,c.a.FAILED_METADATA].includes(t)&&this._makeDbkeyEditLink(e)),this._setUpBehaviors(e),e},_renderToolHelpButton:function(){var e=this.model.attributes.dataset_id,t=this.model.attributes.creating_job,n=this,i=function(t){var i='<div id="thdiv-'.concat(e,'" class="toolhelp">');t.name&&t.help?(i+="<strong>Tool help for ".concat(t.name,"</strong><hr/>"),i+=t.help):i+="<strong>Tool help is unavailable for this dataset.</strong><hr/>",i+="</div>",n.$el.find(".details").append(o.a.parseHTML(i))};return null===Object(l.a)().user.id?null:Object(f.a)({title:_()("Tool Help"),classes:"icon-btn",href:"#",faIcon:"fa-question",onclick:function(){n.$el.find(".toolhelp").length>0?n.$el.find(".toolhelp").toggle():o.a.ajax({url:"".concat(Object(s.getAppRoot)(),"api/jobs/").concat(t)}).done((function(e){!function(e){o.a.ajax({url:"".concat(Object(s.getAppRoot)(),"api/tools/").concat(e.tool_id,"/build")}).done((function(e){i(e)})).fail((function(){i({})}))}(e)})).fail((function(){console.log('Failed at recovering job information from the  Galaxy API for job id "'.concat(t,'".'))}))}})},_renderSecondaryActions:function(){var e=g.prototype._renderSecondaryActions.call(this);switch(this.model.get("state")){case c.a.UPLOAD:case c.a.NOT_VIEWABLE:return e;case c.a.ERROR:return e.unshift(this._renderErrButton()),e.concat([this._renderRerunButton(),this._renderToolHelpButton()]);case c.a.OK:case c.a.FAILED_METADATA:return e.concat([this._renderRerunButton(),this._renderVisualizationsButton(),this._renderToolHelpButton()])}return e.concat([this._renderRerunButton(),this._renderToolHelpButton()])},_renderErrButton:function(){var e=this;return Object(f.a)({title:_()("View or report this error"),href:"".concat(Object(s.getAppRoot)(),"datasets/error?dataset_id=").concat(this.model.attributes.id),classes:"report-error-btn",faIcon:"fa-bug",onclick:function(t){var n=Object(l.a)();n.router&&(t.preventDefault(),n.router.push("datasets/error",{dataset_id:e.model.attributes.id}))}})},_renderRerunButton:function(){var e=this.model.get("creating_job");if(this.model.get("rerunnable"))return Object(f.a)({title:_()("Run this job again"),href:this.model.urls.rerun,classes:"rerun-btn",target:this.linkTarget,faIcon:"fa-refresh",onclick:function(t){var n=Object(l.a)();n.router&&(t.preventDefault(),n.router.push("/",{job_id:e}))}})},_renderVisualizationsButton:function(){var e=Object(l.a)(),t=this.model.get("visualizations");if(!e.config.visualizations_visible||this.model.isDeletedOrPurged()||!this.hasUser||!this.model.hasData()||a.default.isEmpty(t))return null;if(!a.default.isObject(t[0]))return this.warn("Visualizations have been switched off"),null;if(t.length>=1){var n=this.model.get("id"),i=Object(s.getAppRoot)()+"visualizations?dataset_id="+n;return Object(f.a)({title:_()("Visualize this data"),href:i,classes:"visualization-link",faIcon:"fa-bar-chart-o",onclick:function(t){e.frame&&e.frame.active?(t.preventDefault(),e.frame.add({url:i,title:"Visualization"})):e.router&&(t.preventDefault(),e.router.push("visualizations",{dataset_id:n}),e.trigger("activate-hda",n))}})}},_renderTags:function(e){var t=this;if(this.hasUser){var n=e.find(".tags-display")[0],i={model:this.model,disabled:!1,context:"dataset-li-edit"},a=Object(u.d)(i,n),r=function(){o()(a.$el).toggleClass("active"),t.tagsEditorShown=o()(a.$el).hasClass("active")};if(Object(f.a)({title:_()("Edit dataset tags"),classes:"tag-btn",faIcon:"fa-tags"}).appendTo(e.find(".actions .right")).on("click",r),this.tagsEditorShown)o()(a.$el).hasClass("active")||r();return a}},_renderAnnotation:function(e){if(this.hasUser){var t=this;this.annotationEditor=new h.a.AnnotationEditor({model:this.model,el:e.find(".annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){t.annotationEditorShown=!0},onhide:function(){t.annotationEditorShown=!1},$activator:Object(f.a)({title:_()("Edit dataset annotation"),classes:"annotate-btn",faIcon:"fa-comment"}).appendTo(e.find(".actions .right"))}),this.annotationEditorShown&&this.annotationEditor.toggle(!0)}},_makeDbkeyEditLink:function(e){if("?"===this.model.get("metadata_dbkey")&&!this.model.isDeletedOrPurged()){var t=o()('<a class="value">?</a>').attr("href",this.model.urls.edit).attr("target","_top");e.find(".dbkey .value").replaceWith(t)}},events:a.default.extend(a.default.clone(g.prototype.events),{"click .undelete-link":"_clickUndeleteLink","click .purge-link":"_clickPurgeLink","click .edit-btn":function(e){this.trigger("edit",this,e)},"click .delete-btn":function(e){this.trigger("delete",this,e)},"click .rerun-btn":function(e){this.trigger("rerun",this,e)},"click .report-err-btn":function(e){this.trigger("report-err",this,e)},"click .visualization-btn":function(e){this.trigger("visualize",this,e)},"click .dbkey a":function(e){this.trigger("edit",this,e)}}),_clickUndeleteLink:function(e){return this.model.undelete(),!1},_clickPurgeLink:function(e){return window.confirm(_()("This will permanently remove the data in your dataset. Are you sure?"))&&this.model.purge(),!1},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAEditView(".concat(e,")")}});v.prototype.templates=(i=a.default.extend({},g.prototype.templates.warnings,{failed_metadata:p.a.wrapTemplate(['<% if( dataset.state === "failed_metadata" ){ %>','<div class="failed_metadata-warning warningmessagesmall">',_()("An error occurred setting the metadata for this dataset"),'<br /><a href="<%- dataset.urls.edit %>" target="_top">',_()("Set it manually or retry auto-detection"),"</a>","</div>","<% } %>"],"dataset"),deleted:p.a.wrapTemplate(["<% if( dataset.deleted && !dataset.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',_()("This dataset has been deleted"),'<br /><a class="undelete-link" href="javascript:void(0);">',_()("Undelete it"),"</a>","<% if( view.purgeAllowed ){ %>",'<br /><a class="purge-link" href="javascript:void(0);">',_()("Permanently remove it from disk"),"</a>","<% } %>","</div>","<% } %>"],"dataset")}),a.default.extend({},g.prototype.templates,{warnings:i})),t.a={DatasetListItemEdit:v}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return ge})),n.d(t,"b",(function(){return me})),n.d(t,"a",(function(){return be}));var i=n(268),a=n(234),r=n(4),o=n.n(r),s=n(77),l=n(170),c=n(2),d=n.n(c),u=n(1),h=n(0),f=n.n(h),p=n(6),m=n(10),_=o.a.View.extend({options:{class_check:"fa-check-square-o",class_uncheck:"fa-square-o",parameters:[{id:"space_to_tab",title:"Convert spaces to tabs"},{id:"to_posix_lines",title:"Use POSIX standard"}]},initialize:function(e){this.model=e.model,this.setElement(f()("<div/>").addClass("upload-settings")),this.$el.append(f()("<div/>").addClass("upload-settings-cover")),this.$el.append(f()("<table/>").addClass("upload-settings-table grid").append("<tbody/>")),this.$cover=this.$(".upload-settings-cover"),this.$table=this.$(".upload-settings-table > tbody"),this.listenTo(this.model,"change",this.render,this),this.model.trigger("change")},render:function(){var e=this;this.$table.empty(),u.default.each(this.options.parameters,(function(t){var n=f()("<div/>").addClass("upload-".concat(t.id," fa")).addClass(e.model.get(t.id)&&e.options.class_check||e.options.class_uncheck),i=f()("<tr/>").append(f()("<td/>").append(n)).append(f()("<td/>").append(t.title)).on("click",(function(){e.model.get("enabled")&&e.model.set(t.id,!e.model.get(t.id))}));e.$table.append(i)})),this.$cover[this.model.get("enabled")?"hide":"show"]()}}),g=o.a.View.extend({initialize:function(e){this.model=new o.a.Model({cls:"upload-ftp",class_add:"upload-icon-button fa fa-square-o",class_remove:"upload-icon-button fa fa-check-square-o",class_partial:"upload-icon-button fa fa-minus-square-o",help_enabled:!0,oidc_text:"<br/>If you are signed-in to Galaxy using a third-party identity and you <strong>do not have a Galaxy password</strong> please use the reset password option in the login form with your email to create a password for your account.",help_text:"This Galaxy server allows you to upload files via FTP. To upload some files, log in to the FTP server at <strong>".concat(e.ftp_upload_site,'</strong> using your Galaxy credentials.\n            For help visit the <a href="https://galaxyproject.org/ftp-upload/" target="_blank">tutorial</a>.'),collection:null,onchange:function(){},onadd:function(){},onremove:function(){}}).set(e),this.collection=this.model.get("collection"),Object(p.a)().config.enable_oidc&&this.model.set("help_text",this.model.get("help_text")+this.model.get("oidc_text")),this.setElement(this._template()),this.$content=this.$(".upload-ftp-content"),this.$wait=this.$(".upload-ftp-wait"),this.$help=this.$(".upload-ftp-help"),this.$number=this.$(".upload-ftp-number"),this.$disk=this.$(".upload-ftp-disk"),this.$body=this.$(".upload-ftp-body"),this.$warning=this.$(".upload-ftp-warning"),this.$select=this.$(".upload-ftp-select-all"),this.render()},render:function(){var e=this;this.$wait.show(),this.$content.hide(),this.$warning.hide(),this.$help.hide(),s.a.getRemoteFiles((function(t){e.model.set("ftp_files",t),e._index(),e._renderTable()}),(function(){e._renderTable()}))},_renderTable:function(){var e=this,t=this.model.get("ftp_files");if(this.rows=[],t&&t.length>0){this.$body.empty();var n=0;u.default.each(t,(function(t){e.rows.push(e._renderRow(t)),n+=t.size})),this.$number.html("".concat(t.length," files")),this.$disk.html(m.a.bytesToString(n,!0)),this.collection&&(this.$("._has_collection").show(),this.$select.addClass(this.model.get("class_add")).off().on("click",(function(){e._all()})),this._refresh()),this.$content.show()}else this.$warning.show();this.model.get("help_enabled")&&this.$help.show(),this.$wait.hide()},_renderRow:function(e){var t=this,n=this.model.attributes,i=f()(this._templateRow(e)),a=i.find(".icon");if(this.$body.append(i),this.collection){var r=this.ftp_index[e.path];a.addClass(void 0===r?n.class_add:n.class_remove),i.on("click",(function(){t._switch(a,e),t._refresh()}))}else i.on("click",(function(){n.onchange(e)}));return a},_index:function(){var e=this;this.ftp_index={},this.collection&&this.collection.each((function(t){"ftp"==t.get("file_mode")&&(e.ftp_index[t.get("file_path")]=t.id)}))},_all:function(){var e=this.model.attributes,t=this.model.get("ftp_files"),n=this.$select.hasClass(e.class_add);for(var i in t){var a=t[i],r=this.ftp_index[a.path];(void 0===r&&n||void 0!==r&&!n)&&this._switch(this.rows[i],a)}this._refresh()},_switch:function(e,t){e.removeClass();var n=this.model.attributes,i=this.ftp_index[t.path];if(void 0===i){var a=n.onadd(t);e.addClass(n.class_remove),this.ftp_index[t.path]=a}else n.onremove(i),e.addClass(n.class_add),this.ftp_index[t.path]=void 0},_refresh:function(){var e=u.default.reduce(this.ftp_index,(function(e,t){return void 0!==t&&e++,e}),0);this.$select.removeClass(),0==e?this.$select.addClass(this.model.get("class_add")):this.$select.addClass(e==this.rows.length?this.model.get("class_remove"):this.model.get("class_partial"))},_templateRow:function(e){return'<tr class="upload-ftp-row">\n                    <td class="_has_collection" style="display: none;">\n                        <div class="icon"/>\n                    </td>\n                    <td class="ftp-name">'.concat(u.default.escape(e.path),'</td>\n                    <td class="ftp-size">').concat(m.a.bytesToString(e.size),'</td>\n                    <td class="ftp-time">').concat(e.ctime,"</td>\n                </tr>")},_template:function(){return'<div class="'.concat(this.model.get("cls"),'">\n                    <div class="upload-ftp-wait fa fa-spinner fa-spin"/>\n                    <div class="upload-ftp-help">').concat(this.model.get("help_text"),'</div>\n                    <div class="upload-ftp-content">\n                        <span style="whitespace: nowrap; float: left;">Available files: </span>\n                        <span style="whitespace: nowrap; float: right;">\n                            <span class="upload-icon fa fa-file-text-o"/>\n                            <span class="upload-ftp-number"/>\n                            <span class="upload-icon fa fa-hdd-o"/>\n                            <span class="upload-ftp-disk"/>\n                        </span>\n                        <table class="grid" style="float: left;">\n                            <thead>\n                                <tr>\n                                    <th class="_has_collection" style="display: none;">\n                                        <div class="upload-ftp-select-all">\n                                    </th>\n                                    <th>Name</th>\n                                    <th>Size</th>\n                                    <th>Created</th>\n                                </tr>\n                            </thead>\n                            <tbody class="upload-ftp-body"/>\n                        </table>\n                    </div>\n                    <div class="upload-ftp-warning warningmessage">Your FTP directory does not contain any files.</div>\n                </div>')}}),v=o.a.View.extend({initialize:function(e){this.options=u.default.defaults(e||{},{title:null,placement:"top",container:"body"}),this.uid=m.a.uid(),this.$target=this.options.container},show:function(e){var t=this;f()(this.$target).popover({title:"".concat(this.options.title," ").concat("<i class='popover-close fa fa-times-circle'/>"),placement:this.options.placement,content:e,html:!0,trigger:"manual"}),this.options.class&&f()(this.$target).addClass(this.options.class),f()(this.$target).popover("show");var n=this,i=f()(this.$target.data("bs.popover").tip);i.find(".popover-header > i").on("click",(function(){return t.hide()})),f()("body").on("mousedown.".concat(this.uid),(function(e){f()(i).is(e.target)||0!==f()(i).has(e.target).length||n.hide()}))},hide:function(){f()(this.$target).popover("dispose"),f()("body").off("mousedown.".concat(this.uid))}}),y=n(18),b=n(3);!function(e){f.a.event.props.push("dataTransfer");var t=function(t){var n=e.extend({error_default:"Please make sure the file is available.",error_server:"Upload request failed.",error_login:"Uploads require you to log in.",error_retry:"Waiting for server to resume..."},t);console.debug(n);var i=new XMLHttpRequest;i.open("POST",n.url,!0),i.setRequestHeader("Cache-Control","no-cache"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Accept","application/json"),i.onreadystatechange=function(){if(i.readyState==i.DONE)if(-1!==[502,0].indexOf(i.status)&&n.warning)n.warning(n.error_retry);else if(i.status<200||i.status>299){var e=i.statusText;403==i.status?e=n.error_login:0==i.status?e=n.error_server:e||(e=n.error_default),n.error("".concat(e," (").concat(i.status,")"))}else{var t=null;if(i.responseText)try{t=f.a.parseJSON(i.responseText)}catch(e){t=i.responseText}n.success(t)}},i.upload.addEventListener("progress",n.progress,!1),i.send(n.data)};e.uploadchunk=function(n){var i=e.extend({},{data:{},success:function(){},error:function(){},warning:function(){},progress:function(){},attempts:7e4,timeout:5e3,url:null,error_file:"File not provided.",error_attempt:"Maximum number of attempts reached.",error_tool:"Tool submission failed."},n),a=i.data;if(a.error_message)i.error(a.error_message);else{var r=a.files&&a.files[0];if(r){var o=r.file,s=i.attempts,l="".concat(i.session.id,"-").concat((new Date).valueOf(),"-").concat(o.size),c=i.session.chunk_upload_size;console.debug("Starting chunked uploads [size=".concat(c,"].")),function n(r){r=r||0;var d=o.mozSlice||o.webkitSlice||o.slice;if(d){var u=Math.min(r+c,o.size),h=o.size;console.debug("Submitting chunk at ".concat(r," bytes..."));var f=new FormData;f.append("session_id",l),f.append("session_start",r),f.append("session_chunk",d.bind(o)(r,u)),t({url:"".concat(Object(b.getAppRoot)(),"api/uploads"),data:f,success:function(t){var d=r+c;d<h?(s=i.attempts,n(d)):(console.debug("Upload completed."),a.payload.inputs=JSON.parse(a.payload.inputs),a.payload.inputs["files_0|file_data"]={session_id:l,name:o.name},a.payload.inputs=JSON.stringify(a.payload.inputs),e.ajax({url:"".concat(Object(b.getAppRoot)(),"api/tools"),method:"POST",data:a.payload,success:function(e){i.success(e)},error:function(e){var t=e&&e.responseJSON&&e.responseJSON.err_msg;i.error(t||i.error_tool)}}))},warning:function(e){--s>0?(console.debug("Retrying last chunk..."),i.warning(e),setTimeout((function(){return n(r)}),i.timeout)):(console.debug(i.error_attempt),i.error(i.error_attempt))},error:function(e){console.debug(e),i.error(e)},progress:function(e){e.lengthComputable&&i.progress(Math.min(Math.round(100*(r+e.loaded)/o.size),100))}})}else i.error("Browser does not support chunked uploads.")}()}else i.error(i.error_file)}},e.uploadpost=function(n){var i=e.extend({},{data:{},success:function(){},error:function(){},progress:function(){},url:null,maxfilesize:2147483648,error_filesize:"File exceeds 2GB. Please use a FTP client."},n),a=i.data;if(a.error_message)i.error(a.error_message);else{var r=new FormData;for(var o in a.payload)r.append(o,a.payload[o]);var s=0;for(var l in a.files){var c=a.files[l];r.append(c.name,c.file,c.file.name),s+=c.file.size}s>i.maxfilesize?i.error(i.error_filesize):t({url:i.url,data:r,success:i.success,error:i.error,progress:function(e){e.lengthComputable&&i.progress(Math.round(100*e.loaded/e.total))}})}},e.datafetchpost=function(n){var i=e.extend({},{data:{},success:function(){},error:function(){},progress:function(){},url:null},n),a=i.data;a.error_message?i.error(a.error_message):t({url:i.url,data:JSON.stringify(i.data),success:i.success,error:i.error,progress:function(e){e.lengthComputable&&i.progress(Math.round(100*e.loaded/e.total))}})},e.fn.uploadinput=function(t){var n=e.extend({},{ondragover:function(){},ondragleave:function(){},onchange:function(){},multiple:!1},t),i=e('<input type="file" style="display: none" '.concat(n.multiple?"multiple":"","/>"));this.append(i.change((function(e){n.onchange(e.target.files),e.target.value=null})));var a=this.get(0);return a.addEventListener("drop",(function(e){n.ondragleave(e),e.dataTransfer&&(n.onchange(e.dataTransfer.files),e.preventDefault())})),a.addEventListener("dragover",(function(e){e.preventDefault(),n.ondragover(e)})),a.addEventListener("dragleave",(function(e){e.stopPropagation(),n.ondragleave(e)})),{dialog:function(){i.trigger("click")}}},e.fn.uploadbox=function(t){var n=e.extend({},{dragover:function(){},dragleave:function(){},announce:function(e){},initialize:function(e){},progress:function(e,t){},success:function(e,t){},warning:function(e,t){},error:function(e,t){alert(t)},complete:function(){},multiple:!0},t),i={},a=null,r=0,o=0,s=!1,l=!1,c=e(this).uploadinput({multiple:n.multiple,onchange:function(e){u.default.each(e,(function(e){e.chunk_mode=!0})),d(e)},ondragover:t.ondragover,ondragleave:t.ondragleave});function d(e){if(e&&e.length&&!s){var t=void 0;return u.default.each(e,(function(e,t){"new"!==e.mode&&u.default.filter(i,(function(t){return t.name===e.name&&t.size===e.size})).length&&(e.duplicate=!0)})),u.default.each(e,(function(e){e.duplicate||(t=String(r++),i[t]=e,n.announce(t,i[t]),o++)})),t}}function h(e){i[e]&&(delete i[e],o--)}return{select:function(){c.dialog()},add:d,remove:h,start:function(t){a=t,s||(s=!0,function t(){if(0==o||l)return l=!1,s=!1,void n.complete();s=!0;var r=-1;for(var c in i){r=c;break}var d=i[r];h(r);var u=e.uploadpost,f=n.initialize(r);d.chunk_mode&&a&&a.id&&a.chunk_upload_size&&a.chunk_upload_size>0?u=e.uploadchunk:f.fetchRequest&&(u=e.datafetchpost),u({url:n.initUrl(r),data:f.fetchRequest?f.fetchRequest:f.uploadRequest,session:a,success:function(e){n.success(r,e),t()},warning:function(e){n.warning(r,e)},error:function(e){n.error(r,e),t()},progress:function(e){n.progress(r,e)}})}())},stop:function(){l=!0},reset:function(e){for(e in i)h(e)},configure:function(t){return n=e.extend({},n,t)},compatible:function(){return window.File&&window.FormData&&window.XMLHttpRequest&&window.FileList}}}}(f.a);var w=o.a.View.extend({status_classes:{init:"upload-mode fa fa-exclamation text-primary",ready:"upload-mode fa fa-check text-success",running:"upload-mode fa fa-spinner fa-spin",success:"upload-mode fa fa-check",error:"upload-mode fa fa-exclamation-triangle"},initialize:function(e,t){var n=this;this.app=e,this.model=t.model,this.setElement(this._template()),this.$source=this.$(".upload-source"),this.$settings=this.$(".upload-settings"),this.$status=this.$(".upload-status"),this.$text=this.$(".upload-text"),this.$text_content=this.$(".upload-text-content"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$file_name=this.$(".upload-file-name"),this.$file_desc=this.$(".upload-file-desc"),this.$file_size=this.$(".upload-file-size"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this.uploadinput=this.$el.uploadinput({ondragover:function(){n.model.get("enabled")&&n.$el.addClass("alert-success")},ondragleave:function(){n.$el.removeClass("alert-success")},onchange:function(e){"running"!=n.model.get("status")&&e&&e.length>0&&(n.model.reset({file_data:e[0],file_name:e[0].name,file_size:e[0].size,file_mode:e[0].mode||"local"}),n._refreshReady())}}),this.button_menu=new y.a.ButtonMenu({icon:"fa-caret-down",title:d()("Select"),pull:"left"}),this.$source.append(this.button_menu.$el),this.button_menu.addMenu({icon:"fa-laptop",title:d()("Choose local file"),onclick:function(){n.uploadinput.dialog()}}),this.app.ftpUploadSite&&this.button_menu.addMenu({icon:"fa-folder-open-o",title:d()("Choose FTP file"),onclick:function(){n._showFtp()}}),this.button_menu.addMenu({icon:"fa-edit",title:"Paste/Fetch data",onclick:function(){n.model.reset({file_mode:"new",file_name:"New File"})}}),this.ftp=new v({title:"Select a file",container:this.$source.find(".dropdown"),placement:"right"}),this.settings=new v({title:d()("Upload configuration"),container:this.$settings,placement:"bottom"}),this.$text_content.on("change input",(function(e){n.model.set({url_paste:f()(e.target).val(),file_size:f()(e.target).val().length}),n._refreshReady()})),this.$settings.on("click",(function(e){n._showSettings()})).on("mousedown",(function(e){e.preventDefault()})),this.listenTo(this.model,"change:percentage",(function(){n._refreshPercentage()})),this.listenTo(this.model,"change:status",(function(){n._refreshStatus()})),this.listenTo(this.model,"change:info",(function(){n._refreshInfo()})),this.listenTo(this.model,"change:file_name",(function(){n._refreshFileName()})),this.listenTo(this.model,"change:file_mode",(function(){n._refreshMode()})),this.listenTo(this.model,"change:file_size",(function(){n._refreshFileSize()})),this.listenTo(this.model,"remove",(function(){n.remove()})),this.app.collection.on("reset",(function(){n.remove()}))},render:function(){this.$el.attr("id","upload-row-".concat(this.model.id)),this.$file_name.html(u.default.escape(this.model.get("file_name")||"-")),this.$file_desc.html(this.model.get("file_desc")||"Unavailable"),this.$file_size.html(m.a.bytesToString(this.model.get("file_size"))),this.$status.removeClass().addClass(this.status_classes.init)},remove:function(){o.a.View.prototype.remove.apply(this)},_refreshReady:function(){this.app.collection.each((function(e){e.set("status",e.get("file_size")>0?"ready":"init")}))},_refreshMode:function(){"new"==this.model.get("file_mode")?(this.height=this.$el.height(),this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$text_content.val("").trigger("keyup")):(this.$el.height(this.height),this.$text.hide())},_refreshInfo:function(){var e=this.model.get("info");e?this.$info_text.html("<strong>Failed: </strong>".concat(e)).show():this.$info_text.hide()},_refreshPercentage:function(){var e=parseInt(this.model.get("percentage"));0!=e?this.$progress_bar.css({width:"".concat(e,"%")}):(this.$progress_bar.addClass("no-transition"),this.$progress_bar.css({width:"0%"}),this.$progress_bar[0].offsetHeight,this.$progress_bar.removeClass("no-transition")),this.$percentage.html(100!=e?"".concat(e,"%"):"Adding to history...")},_refreshStatus:function(){var e=this.model.get("status");this.$status.removeClass().addClass(this.status_classes[e]),this.model.set("enabled","running"!=e),this.$text_content.attr("disabled",!this.model.get("enabled")),this.$el.removeClass("table-success table-danger table-warning"),"running"!=e&&"ready"!=e||this.model.set("percentage",0),this.$source.find(".button")["running"==e?"addClass":"removeClass"]("disabled"),"success"==e&&(this.$el.addClass("table-success"),this.model.set("percentage",100),this.$percentage.html("100%")),"error"==e?(this.$el.addClass("table-danger"),this.model.set("percentage",0),this.$info_progress.hide(),this.$info_text.show()):(this.$info_progress.show(),this.$info_text.hide())},_refreshFileName:function(){this.$file_name.html(this.model.get("file_name")||"-")},_refreshFileSize:function(){this.$file_size.html(m.a.bytesToString(this.model.get("file_size")))},_showFtp:function(){var e=this;this.ftp.show(new g({ftp_upload_site:this.app.ftpUploadSite,onchange:function(t){e.ftp.hide(),"running"!=e.model.get("status")&&t&&(e.model.reset({file_mode:"ftp",file_name:t.path,file_size:t.size,file_path:t.path}),e._refreshReady())}}).$el)},_showSettings:function(){this.settings.show(new _(this).$el)},_template:function(){return'<tr class="upload-row">\n                <td>\n                    <div class="upload-source"/>\n                    <div class="upload-text-column">\n                        <div class="upload-text">\n                            <div class="upload-text-info">Download data from the web by entering a URL (one per line) or directly paste content.</div>\n                            <textarea class="upload-text-content form-control"/>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <div class="upload-status"/>\n                </td>\n                <td>\n                    <div class="upload-file-desc upload-title"/>\n                </td>\n                <td>\n                    <div class="upload-file-name upload-title"/>\n                </td>\n                <td>\n                    <div class="upload-file-size upload-size"/>\n                </td>\n                <td>\n                    <div class="upload-settings upload-icon-button fa fa-gear"/>\n                </td>\n                <td>\n                    <div class="upload-info">\n                        <div class="upload-info-text"/>\n                        <div class="upload-info-progress progress">\n                            <div class="upload-progress-bar progress-bar progress-bar-success"/>\n                            <div class="upload-percentage">0%</div>\n                        </div>\n                    </div>\n                </td>\n            </tr>'}}),k=n(425),x=o.a.View.extend({initialize:function(e){this.model=new o.a.Model(e),this.setElement("<div/>"),this.render()},render:function(){var e=this.model.attributes,t=u.default.findWhere(e.list,{id:e.extension});this.extension_popup&&this.extension_popup.remove(),this.extension_popup=new v({title:e.title,placement:e.placement||"bottom",container:e.$el}),this.extension_popup.show(this._templateDescription(t))},_templateDescription:function(e){if(e.description){var t=e.description;return e.description_url&&(t+='&nbsp;(<a href="'.concat(e.description_url,'" target="_blank">read more</a>)')),t}return"There is no description available for this file extension."}}),S=o.a.Model.extend({defaults:{extension:"auto",genome:"?",url_paste:"",status:"init",optional:!1,info:null,file_name:"",file_mode:"",file_size:0,file_type:null,file_path:"",file_uri:null,file_data:null,percentage:0,space_to_tab:!1,to_posix_lines:!0,enabled:!0},reset:function(e){this.clear().set(this.defaults).set(e)}}),C={Model:S,Collection:o.a.Collection.extend({model:S})},M={props:{topInfo:{type:String,default:"&nbsp;"},wrapperClass:{type:String,default:"upload-view-default"},highlightBox:{type:Boolean,default:!1}},computed:{hasFooter:function(){return!!this.$slots.footer||!!this.$scopedSlots.footer},boxStyle:function(){return{height:this.hasFooter?"300px":"335px"}}}},T=n(5),j=Object(T.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.wrapperClass},[n("div",{staticClass:"upload-top"},[n("div",{staticClass:"upload-top-info",domProps:{innerHTML:e._s(e.topInfo)}})]),e._v(" "),n("div",{ref:"uploadBox",staticClass:"upload-box",class:{highlight:e.highlightBox},style:e.boxStyle},[e._t("default")],2),e._v(" "),e.hasFooter?n("div",{staticClass:"upload-footer"},[e._t("footer")],2):n("div",{staticClass:"clear"}),e._v(" "),n("div",{staticClass:"upload-buttons"},[e._t("buttons")],2)])}),[],!1,null,null,null).exports,O=o.a.View.extend({initialize:function(e){this.$container=e.$container,this.collection=e.collection,this.new_content=e.new_content,this.max=e.max||50,this.content_list={},this.$message=f()("<div/>").addClass("ui-limitloader").append("...only the first ".concat(this.max," entries are visible.")).hide(),this.$container.append(this.$message),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add",this._refresh,this),this.listenTo(this.collection,"remove",this._remove,this)},_done:function(){var e=u.default.size(this.content_list)>=this.max;return this.$message[e?"show":"hide"](),e},_reset:function(){u.default.each(this.content_list,(function(e){e.remove()})),this.content_list={},this.$message.hide()},_remove:function(e){var t=e.id,n=this.content_list[t];n&&(n.remove(),delete this.content_list[t]),this._refresh()},_refresh:function(){if(!this._done())for(var e in this.collection.models){var t=this.collection.models[e];if(!this.content_list[t.id]&&(this.content_list[t.id]=this.new_content(t),this._done()))break}}});var D=n(63),L=n(47),E=n(7),A=n.n(E),I=d.a,P={components:{UploadWrapper:j,Select2:k.a},props:{app:{type:Object,required:!0},lazyLoadMax:{type:Number,default:null},selectable:{type:Boolean,default:!1},hasCallback:{type:Boolean,default:!1}},computed:{btnFilesTitle:function(){return this.fileSourcesConfigured?I("Choose remote files"):I("Choose FTP files")},remoteFiles:function(){return!!this.fileSourcesConfigured||!!this.ftpUploadSite},btnCloseTitle:function(){return this.hasCallback?"Cancel":"Close"}},methods:{$uploadBox:function(){return f()(this.$refs.wrapper.$refs.uploadBox)},initUploadbox:function(e){var t=this,n=this.$uploadBox();if(this.uploadbox=n.uploadbox(e),null!==this.lazyLoadMax){var i=this.$uploadBox();this.loader=new O({$container:i,collection:this.collection,max:this.lazyLoadMax,new_content:function(e){return t.renderNewModel(e)}})}},uploadSelect:function(){this.uploadbox.select()},_uploadFtp:function(){var e=this,t=[];if(this.collection.each((function(n){"queued"==n.get("status")&&"ftp"==n.get("file_mode")&&(e.uploadbox.remove(n.id),t.push(n))})),t.length>0){var n=this.app.toFetchData(t,this.history_id);A.a.post("".concat(Object(L.b)(),"api/tools/fetch"),n).then((function(n){t.forEach((function(t){e._eventSuccess(t.id,n)}))})).catch((function(n){t.forEach((function(t){e._eventError(t.id,n)}))}))}},renderNewModel:function(e){var t=new this.rowUploadModel(this,{model:e});return this.$uploadTable().find("tbody:first").append(t.$el),this._updateStateForCounters(),this.$nextTick((function(){t.render()})),t},_updateStateForCounters:function(){this.setTopInfoBasedOnCounters();var e=this.counterAnnounce+this.counterSuccess+this.counterError;this.enableReset=0==this.counterRunning&&e>0,this.enableStart=0==this.counterRunning&&this.counterAnnounce>0,this.enableBuild=0==this.counterRunning&&0==this.counterAnnounce&&this.counterSuccess>0&&0==this.counterError,this.enableSources=0==this.counterRunning&&(this.multiple||0==e);var t=this.counterAnnounce+this.counterSuccess+this.counterError>0;this.showHelper=!t},setTopInfoBasedOnCounters:function(){var e="";e=0==this.counterAnnounce?this.uploadbox.compatible()?"&nbsp;":"Browser does not support Drag & Drop. Try Firefox 4+, Chrome 7+, IE 10+, Opera 12+ or Safari 6+.":0==this.counterRunning?"You added ".concat(this.counterAnnounce," file(s) to the queue. Add more files or click 'Start' to proceed."):"Please wait...".concat(this.counterAnnounce," out of ").concat(this.counterRunning," remaining."),this.topInfo=e},_eventProgress:function(e,t){var n=this.collection.get(e);n.set("percentage",t),this.appModel.set("percentage",this._uploadPercentage(t,n.get("file_size")))},_uploadPercentage:function(e,t){return(this.uploadCompleted+e*t)/this.uploadSize},_updateStateForSuccess:function(e){this.appModel.set("percentage",this._uploadPercentage(100,e.get("file_size"))),this.uploadCompleted+=100*e.get("file_size"),this.counterAnnounce--,this.counterSuccess++,this._updateStateForCounters(),Object(p.a)().currHistoryPanel.refreshContents()},_eventAnnounce:function(e,t){this.counterAnnounce++;var n=this._newUploadModelProps(e,t),i=new C.Model(n);this.collection.add(i),this.loader?this._updateStateForCounters():this.renderNewModel(i)},_eventError:function(e,t){var n=this.collection.get(e);n.set({percentage:100,status:"error",info:t}),this.appModel.set({percentage:this._uploadPercentage(100,n.get("file_size")),status:"danger"}),this.uploadCompleted+=100*n.get("file_size"),this.counterAnnounce--,this.counterError++,this._updateStateForCounters()},_eventComplete:function(){this.collection.each((function(e){"queued"==e.get("status")&&e.set("status","init")})),this.counterRunning=0,this._updateStateForCounters()},_eventRemove:function(e){var t=e.get("status");"success"==t?this.counterSuccess--:"error"==t?this.counterError--:this.counterAnnounce--,this.uploadbox.remove(e.id),this._updateStateForCounters()},_eventRemoteFiles:function(){var e=this;this.fileSourcesConfigured?Object(D.c)((function(t){e.uploadbox.add(t.map((function(e){return{mode:"ftp",name:e.label,size:e.size,path:e.url}})))}),{multiple:!0}):this.ftp.show(new g({collection:this.collection,ftp_upload_site:this.ftpUploadSite,onadd:function(t){return e.uploadbox.add([{mode:"ftp",name:t.path,size:t.size,path:t.path,uri:t.uri}])},onremove:function(e){this.collection.remove(e)}}).$el)},_eventCreate:function(){this.uploadbox.add([{name:"New File",size:0,mode:"new"}])},_eventStop:function(){this.counterRunning>0&&(this.appModel.set("status","info"),this.topInfo="Queue will pause after completing the current file...",this.uploadbox.stop())},_eventWarning:function(e,t){this.collection.get(e).set({status:"warning",info:t})},$uploadTable:function(){return f()(this.$refs.uploadTable)},extensionDetails:function(e){return t=this.app.effectiveExtensions,n=e,t.find((function(e){return e.id==n}));var t,n},initExtensionInfo:function(){var e=this;f()(this.$refs.footerExtensionInfo).on("click",(function(t){var n=e.extensionDetails(e.extension);n&&new x({$el:f()(t.target),title:n&&n.text,extension:n&&n.id,list:e.listExtensions,placement:"top"})})).on("mousedown",(function(e){e.preventDefault()}))},initCollection:function(){this.collection=new C.Collection},initAppProperties:function(){this.listExtensions=this.app.effectiveExtensions,this.listGenomes=this.app.listGenomes,this.ftpUploadSite=this.app.currentFtp(),this.fileSourcesConfigured=this.app.fileSourcesConfigured},initFtpPopover:function(){this.ftp=new v({title:d()("FTP files"),class:"ftp-upload",container:f()(this.$refs.btnFtp)})},updateExtension:function(e,t){var n=this;this.collection.each((function(i){"init"!=i.get("status")||i.get("extension")!=n.app.defaultExtension&&t||i.set("extension",e)}))},updateGenome:function(e,t){var n=this;this.collection.each((function(i){"init"!=i.get("status")||i.get("genome")!=n.app.defaultGenome&&t||i.set("genome",e)}))},getUploadedModels:function(){var e=Object(p.a)(),t=[];return this.collection.models.forEach((function(e){t.push.apply(t,e.get("hids"))})),t.map((function(t){return e.currHistoryPanel.collection.getByHid(t)}))},getRequestUrl:function(e,t){var n=this.app.toData(e,t),i=Object(L.b)();return n.fetchRequest?"".concat(i,"api/tools/fetch"):this.app.uploadPath}}},Y={mixins:[P],data:function(){return{extension:"_select_",genome:this.app.defaultGenome,listExtensions:[],listGenomes:[],running:!1,showHelper:!0,btnResetTitle:d()("Reset"),btnStartTitle:d()("Start"),readyStart:!1}},created:function(){this.initCollection(),this.initAppProperties()},computed:{extensions:function(){var e=u.default.filter(this.listExtensions,(function(e){return e.composite_files}));return e.unshift({id:"_select_",text:"Select"}),e}},mounted:function(){var e=this;this.initExtensionInfo(),this.collection.on("add",(function(t){e._eventAnnounce(t)})),this.collection.on("change add",(function(){e.renderNonReactiveComponents()})),this.renderNonReactiveComponents()},methods:{renderNonReactiveComponents:function(){var e=this.collection.first();e&&"running"==e.get("status")?this.running=!0:this.running=!1,this.collection.where({status:"ready"}).length+this.collection.where({optional:!0}).length==this.collection.length&&this.collection.length>0?this.readyStart=!0:this.readyStart=!1,this.showHelper=0==this.collection.length},_eventAnnounce:function(e){var t=new w(this,{model:e});this.$uploadTable().find("tbody:first").append(t.$el),this.showHelper=0==this.collection.length,t.render()},_eventStart:function(){var e=this;this.collection.each((function(t){t.set({genome:e.genome,extension:e.extension})})),f.a.uploadpost({url:this.app.uploadPath,data:this.app.toFileUploadData(this.collection.filter()),success:function(t){e._eventSuccess(t)},error:function(t){e._eventError(t)},progress:function(t){e._eventProgress(t)}})},_eventReset:function(){0==this.collection.where({status:"running"}).length&&(this.collection.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.renderNonReactiveComponents())},_eventProgress:function(e){this.collection.each((function(t){t.set("percentage",e)}))},_eventSuccess:function(e){var t=Object(p.a)();this.collection.each((function(e){e.set("status","success")})),t.currHistoryPanel.refreshContents()},_eventError:function(e){this.collection.each((function(t){t.set({status:"error",info:e})}))}},watch:{extension:function(e){var t=this;this.collection.reset();var n=this.extensionDetails(e);n&&n.composite_files&&u.default.each(n.composite_files,(function(e){t.collection.add({id:t.collection.size(),file_desc:e.description||e.name,optional:e.optional})}))}}},R=Object(T.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("upload-wrapper",{attrs:{"wrapper-class":"upload-view-composite"},scopedSlots:e._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[e._v("Composite Type:")]),e._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!e.running},model:{value:e.extension,callback:function(t){e.extension=t},expression:"extension"}},e._l(e.extensions,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v(e._s(t.text))])})),0),e._v(" "),n("span",{ref:"footerExtensionInfo",staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),e._v(" "),n("span",{staticClass:"upload-footer-title"},[e._v("Genome/Build:")]),e._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!e.running},model:{value:e.genome,callback:function(t){e.genome=t},expression:"genome"}},e._l(e.listGenomes,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v("\n                "+e._s(t.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",on:{click:function(t){return e.$emit("dismiss")}}},[e._v("\n            "+e._s(e._f("localize")(e.btnCloseTitle))+"\n        ")]),e._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!e.readyStart,variant:e.readyStart?"primary":""},on:{click:e._eventStart}},[e._v("\n            "+e._s(e.btnStartTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset"},on:{click:e._eventReset}},[e._v("\n            "+e._s(e.btnResetTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[e._v("Select Composite Type to show files required to upload")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!e.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th"),e._v(" "),n("th"),e._v(" "),n("th",[e._v("Description")]),e._v(" "),n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Size")]),e._v(" "),n("th",[e._v("Settings")]),e._v(" "),n("th",[e._v("Status")])])]),e._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,H=o.a.View.extend({status_classes:{init:"upload-icon-button fa fa-trash-o",queued:"upload-icon fa fa-spinner fa-spin",running:"upload-icon fa fa-spinner fa-spin",success:"upload-icon-button fa fa-check",error:"upload-icon-button fa fa-exclamation-triangle"},_setupSettings:function(){this.settings=new v({title:d()("Upload configuration"),container:this.$(".upload-settings"),placement:"bottom"})},_renderStatusType:function(e){"success"==e?(this.$el.addClass("table-success"),this.$percentage.html("100%")):"error"==e?(this.$el.addClass("table-danger"),this.$info_progress.hide()):"warning"==e&&(this.$el.addClass("table-warning"),this.$info_progress.hide())},_setupUploadBoxListeners:function(){var e=this;this.listenTo(this.model,"change:percentage",(function(){e._refreshPercentage()})),this.listenTo(this.model,"change:status",(function(){e._refreshStatus()})),this.listenTo(this.model,"change:info",(function(){e._refreshInfo()})),this.listenTo(this.model,"change:file_size",(function(){e._refreshFileSize()}))},_refreshInfo:function(){var e=this.model.get("info");e?this.$info_text.html("<strong>Warning: </strong>".concat(e)).show():this.$info_text.hide()},_refreshPercentage:function(){var e=parseInt(this.model.get("percentage"));this.$progress_bar.css({width:"".concat(e,"%")}),this.$percentage.html(100!=e?"".concat(e,"%"):"Adding to history...")},_refreshFileSize:function(){this.$size.html(m.a.bytesToString(this.model.get("file_size")))},_removeRow:function(){-1!==["init","success","error"].indexOf(this.model.get("status"))&&this.app.collection.remove(this.model)},_showSettings:function(){this.settings.show(new _(this).$el)}}),N=H.extend({initialize:function(e,t){var n=this;this.app=e,this.model=t.model,this.setElement(this._template(t.model)),this.$mode=this.$(".upload-mode"),this.$title=this.$(".upload-title-extended"),this.$text=this.$(".upload-text"),this.$size=this.$(".upload-size"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$text_content=this.$(".upload-text-content"),this.$symbol=this.$(".upload-symbol"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this._setupSettings(),this.$symbol.on("click",(function(){n._removeRow()})),this.$text_content.on("change input",(function(e){n.model.set({url_paste:f()(e.target).val(),file_size:f()(e.target).val().length})})),this._setupUploadBoxListeners(),this.listenTo(this.model,"remove",(function(){n.remove()})),this.app.collection.on("reset",(function(){n.remove()}))},render:function(){var e=this.model.attributes;this.$title.html(u.default.escape(e.file_name)),this.$size.html(m.a.bytesToString(e.file_size)),this.$mode.removeClass().addClass("upload-mode").addClass("text-primary"),"new"==e.file_mode?(this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$mode.addClass("fa fa-edit")):"local"==e.file_mode?this.$mode.addClass("fa fa-laptop"):"ftp"==e.file_mode&&this.$mode.addClass("fa fa-folder-open-o")},_refreshStatus:function(){var e=this.model.get("status");this.$symbol.removeClass().addClass("upload-symbol").addClass(this.status_classes[e]),this.model.set("enabled","init"==e);var t=this.model.get("enabled");this.$text_content.attr("disabled",!t),this._renderStatusType(e)},_template:function(e){return'<tr id="upload-row-'.concat(e.id,'" class="upload-row"><td><div class="upload-text-column"><div class="upload-mode"/><div class="upload-title-extended"/><div class="upload-text"><div class="upload-text-info">Download data from the web by entering URLs (one per line) or directly paste content.</div><textarea class="upload-text-content form-control"/></div></div></td><td><div class="upload-size"/></td><td><div class="upload-info"><div class="upload-info-text"/><div class="upload-info-progress progress"><div class="upload-progress-bar progress-bar progress-bar-success"/><div class="upload-percentage">0%</div></div></div></td><td><div class="upload-symbol ').concat(this.status_classes.init,'"/></td></tr>')}}),$=n(150),F={mixins:[P],components:{BButton:$.a},data:function(){return{uploadUrl:null,topInfo:"",showHelper:!0,extension:this.app.defaultExtension,genome:this.app.defaultGenome,collectionType:"list",listExtensions:[],listGenomes:[],running:!1,multiple:!0,counterAnnounce:0,counterSuccess:0,counterError:0,counterRunning:0,uploadSize:0,uploadCompleted:0,enableReset:!1,enableStart:!1,enableSources:!1,enableBuild:!1,highlightBox:!1,rowUploadModel:N,btnLocalTitle:d()("Choose local files"),btnCreateTitle:d()("Paste/Fetch data"),btnFtpTitle:d()("Choose FTP files"),btnStartTitle:d()("Start"),btnBuildTitle:d()("Build"),btnStopTitle:d()("Pause"),btnResetTitle:d()("Reset")}},created:function(){this.initCollection(),this.initAppProperties()},mounted:function(){var e=this;this.initExtensionInfo(),this.initFtpPopover(),this.initUploadbox({initUrl:function(t){return e.uploadUrl||(e.uploadUrl=e.getRequestUrl([e.collection.get(t)],e.history_id)),e.uploadUrl},announce:function(t,n){e._eventAnnounce(t,n)},initialize:function(t){return e.app.toData([e.collection.get(t)],e.history_id)},progress:function(t,n){e._eventProgress(t,n)},success:function(t,n){e._eventSuccess(t,n)},warning:function(t,n){e._eventWarning(t,n)},error:function(t,n){e._eventError(t,n)},complete:function(){e._eventComplete()},ondragover:function(){e.highlightBox=!0},ondragleave:function(){e.highlightBox=!1}}),this.collection.on("remove",(function(t){e._eventRemove(t)})),this._updateStateForCounters()},computed:{extensions:function(){return u.default.filter(this.listExtensions,(function(e){return!e.composite_files}))},appModel:function(){return this.app.model},history_id:function(){var e,t=null===(e=this.$store)||void 0===e?void 0:e.getters["betaHistory/currentHistoryId"];return t||this.app.currentHistory()}},watch:{extension:function(e){this.updateExtension(e)},genome:function(e){this.updateGenome(e)}},methods:{_newUploadModelProps:function(e,t){return{id:e,file_name:t.name,file_size:t.size,file_mode:t.mode||"local",file_path:t.path,file_data:t,file_uri:t.uri,extension:this.extension,genome:this.genome}},_eventSuccess:function(e,t){var n=u.default.pluck(t.outputs,"hid"),i=this.collection.get(e);i.set({percentage:100,status:"success",hids:n}),this._updateStateForSuccess(i),Object(p.a)().currHistoryPanel.refreshContents()},_eventBuild:function(){var e=Object(p.a)(),t=this.getUploadedModels(),n=new e.currHistoryPanel.collection.constructor(t);n.historyId=e.currHistoryPanel.collection.historyId,e.currHistoryPanel.buildCollection(this.collectionType,n,!0),this.counterRunning=0,this._updateStateForCounters(),this._eventReset(),this.$emit("dismiss")},_eventStart:function(){var e=this;0==this.counterAnnounce||this.counterRunning>0||(this.uploadSize=0,this.uploadCompleted=0,this.collection.each((function(t){"init"==t.get("status")&&(t.set("status","queued"),e.uploadSize+=t.get("file_size"))})),this.appModel.set({percentage:0,status:"success"}),this.counterRunning=this.counterAnnounce,this._uploadFtp(),this.uploadbox.start(),this._updateStateForCounters())},_eventReset:function(){0==this.counterRunning&&(this.collection.reset(),this.counterAnnounce=0,this.counterSuccess=0,this.counterError=0,this.counterRunning=0,this.uploadbox.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.appModel.set("percentage",0),this._updateStateForCounters())}}},W=Object(T.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":e.topInfo,"highlight-box":e.highlightBox},scopedSlots:e._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[e._v("Collection Type:")]),e._v(" "),n("select2",{ref:"footerCollectionType",attrs:{"container-class":"upload-footer-collection-type",enabled:!e.running},model:{value:e.collectionType,callback:function(t){e.collectionType=t},expression:"collectionType"}},[n("option",{attrs:{value:"list"}},[e._v("List")]),e._v(" "),n("option",{attrs:{value:"paired"}},[e._v("Pair")]),e._v(" "),n("option",{attrs:{value:"list:paired"}},[e._v("List of Pairs")])]),e._v(" "),n("span",{staticClass:"upload-footer-title"},[e._v("File Type:")]),e._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!e.running},model:{value:e.extension,callback:function(t){e.extension=t},expression:"extension"}},e._l(e.extensions,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v(e._s(t.text))])})),0),e._v(" "),n("span",{staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),e._v(" "),n("span",{staticClass:"upload-footer-title"},[e._v("Genome (set all):")]),e._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!e.running},model:{value:e.genome,callback:function(t){e.genome=t},expression:"genome"}},e._l(e.listGenomes,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v("\n                "+e._s(t.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(t){return e.$emit("dismiss")}}},[e._v("\n            "+e._s(e._f("localize")(e.btnCloseTitle))+"\n        ")]),e._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!e.enableReset},on:{click:e._eventReset}},[e._v("\n            "+e._s(e.btnResetTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnStop",staticClass:"ui-button-default",attrs:{id:"btn-stop",disabled:0==e.counterRunning},on:{click:e._eventStop}},[e._v("\n            "+e._s(e.btnStopTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!e.enableBuild,variant:e.enableBuild?"primary":""},on:{click:e._eventBuild}},[e._v("\n            "+e._s(e.btnBuildTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!e.enableStart,variant:e.enableStart?"primary":""},on:{click:e._eventStart}},[e._v("\n            "+e._s(e.btnStartTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnCreate",staticClass:"ui-button-default",attrs:{id:"btn-new",disabled:!e.enableSources},on:{click:e._eventCreate}},[n("span",{staticClass:"fa fa-edit"}),e._v(e._s(e.btnCreateTitle)+"\n        ")]),e._v(" "),e.remoteFiles?n("b-button",{ref:"btnFtp",staticClass:"ui-button-default",attrs:{id:"btn-ftp",disabled:!e.enableSources},on:{click:e._eventRemoteFiles}},[n("span",{staticClass:"fa fa-folder-open-o"}),e._v(e._s(e.btnFilesTitle)+"\n        ")]):e._e(),e._v(" "),n("b-button",{ref:"btnLocal",staticClass:"ui-button-default",attrs:{id:"btn-local",title:e.btnLocalTitle,disabled:!e.enableSources},on:{click:e.uploadSelect}},[n("span",{staticClass:"fa fa-laptop"}),e._v(e._s(e.btnLocalTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[n("i",{staticClass:"fa fa-files-o"}),e._v("Drop files here")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!e.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Size")]),e._v(" "),n("th",[e._v("Status")]),e._v(" "),n("th")])]),e._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,z=n(80),U=H.extend({initialize:function(e,t){var n=this,i=this;this.app=e,this.list_extensions=e.listExtensions,this.model=t.model,this.setElement(this._template(t.model)),this.$mode=this.$(".upload-mode"),this.$title=this.$(".upload-title"),this.$text=this.$(".upload-text"),this.$size=this.$(".upload-size"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$text_content=this.$(".upload-text-content"),this.$settings=this.$(".upload-settings"),this.$symbol=this.$(".upload-symbol"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this._setupSettings();var a=this.app.genome,r=this.app.extension;this.select_genome=new z.a.View({css:"upload-genome",data:i.app.listGenomes,container:this.$(".upload-genome"),value:a,onchange:function(e){i.model.set("genome",e)}}),this.select_extension=new z.a.View({css:"upload-extension",data:i.app.extensions,container:this.$(".upload-extension"),value:r,onchange:function(e){i.model.set("extension",e)}}),this.model.set({genome:a,extension:r}),this.$symbol.on("click",(function(){i._removeRow()})),this.$(".upload-extension-info").on("click",(function(e){var t=n.upload_extension;t?t.extension_popup.visible?t.extension_popup.hide():(t.extension_popup.remove(),n._makeUploadExtensionsPopover(e)):n._makeUploadExtensionsPopover(e)})).on("mousedown",(function(e){e.preventDefault()})),this.$settings.on("click",(function(e){i._showSettings()})).on("mousedown",(function(e){e.preventDefault()})),this.$text_content.on("change input",(function(e){i.model.set({url_paste:f()(e.target).val(),file_size:f()(e.target).val().length})})),this.$title.on("change input",(function(e){i.model.set({file_name:f()(e.target).val()})})),this._setupUploadBoxListeners(),this.listenTo(this.model,"change:genome",(function(){i._refreshGenome()})),this.listenTo(this.model,"change:extension",(function(){i._refreshExtension()}))},render:function(){this._refreshType(),this._refreshPercentage(),this._refreshStatus(),this._refreshInfo(),this._refreshGenome(),this._refreshExtension(),this._refreshFileSize()},remove:function(){this.select_genome.remove(),this.select_extension.remove(),o.a.View.prototype.remove.apply(this)},_refreshType:function(){var e=this.model.attributes;this.$title.val(u.default.escape(e.file_name)),this.$title.select(),this.$size.html(m.a.bytesToString(e.file_size)),this.$mode.removeClass().addClass("upload-mode").addClass("text-primary"),"new"==e.file_mode?(this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$mode.addClass("fa fa-edit")):"local"==e.file_mode?this.$mode.addClass("fa fa-laptop"):"ftp"==e.file_mode&&this.$mode.addClass("fa fa-folder-open-o")},_refreshExtension:function(){this.select_extension.value(this.model.get("extension"))},_refreshGenome:function(){this.select_genome.value(this.model.get("genome"))},_refreshStatus:function(){var e=this.model.get("status");this.$symbol.removeClass().addClass("upload-symbol").addClass(this.status_classes[e]),this.model.set("enabled","init"==e);var t=this.model.get("enabled");this.$text_content.attr("disabled",!t),this.$title.attr("disabled",!t),t?(this.select_genome.enable(),this.select_extension.enable()):(this.select_genome.disable(),this.select_extension.disable()),this.$info_progress.show(),this.$el.removeClass().addClass("upload-row"),this._renderStatusType(e)},_makeUploadExtensionsPopover:function(e){this.upload_extension=new x({$el:f()(e.target),title:this.select_extension.text(),extension:this.select_extension.value(),list:this.list_extensions})},_template:function(e){return'<tr id="upload-row-'.concat(e.id,'" class="upload-row">\n                    <td>\n                        <div class="upload-text-column">\n                            <div class="upload-mode"/>\n                            <input class="upload-title ml-2 border rounded"/>\n                            <div class="upload-text">\n                                <div class="upload-text-info">\n                                    Download data from the web by entering URLs (one per line) or directly paste content.\n                                </div>\n                                <textarea class="upload-text-content form-control"/>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="upload-size"/>\n                    </td>\n                    <td>\n                        <div class="upload-extension float-left mr-1"/>\n                        <div class="upload-extension-info upload-icon-button fa fa-search"/>\n                    </td>\n                    <td>\n                        <div class="upload-genome"/>\n                    </td>\n                    <td>\n                        <div class="upload-settings upload-icon-button fa fa-gear"/>\n                    </td>\n                    <td>\n                        <div class="upload-info">\n                            <div class="upload-info-text"/>\n                            <div class="upload-info-progress progress">\n                                <div class="upload-progress-bar progress-bar progress-bar-success"/>\n                                <div class="upload-percentage">0%</div>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="upload-symbol ').concat(this.status_classes.init,'"/>\n                    </td>\n                </tr>')}}),V={mixins:[P],components:{BButton:$.a},props:{multiple:{type:Boolean,default:!0}},data:function(){return{uploadUrl:null,topInfo:"",highlightBox:!1,showHelper:!0,extension:this.app.defaultExtension,genome:this.app.defaultGenome,listExtensions:[],listGenomes:[],running:!1,rowUploadModel:U,counterAnnounce:0,counterSuccess:0,counterError:0,counterRunning:0,uploadSize:0,uploadCompleted:0,enableReset:!1,enableBuild:!1,enableStart:!1,enableSources:!1,btnLocalTitle:d()("Choose local files"),btnCreateTitle:d()("Paste/Fetch data"),btnStartTitle:d()("Start"),btnStopTitle:d()("Pause"),btnResetTitle:d()("Reset"),btnSelectTitle:d()("Select")}},created:function(){this.initCollection(),this.initAppProperties()},mounted:function(){var e=this;this.initExtensionInfo(),this.initFtpPopover(),this.initUploadbox({initUrl:function(t){return e.uploadUrl||(e.uploadUrl=e.getRequestUrl([e.collection.get(t)],e.history_id)),e.uploadUrl},multiple:this.multiple,announce:function(t,n){e._eventAnnounce(t,n)},initialize:function(t){return e.app.toData([e.collection.get(t)],e.history_id)},progress:function(t,n){e._eventProgress(t,n)},success:function(t,n){e._eventSuccess(t,n)},error:function(t,n){e._eventError(t,n)},warning:function(t,n){e._eventWarning(t,n)},complete:function(){e._eventComplete()},ondragover:function(){e.highlightBox=!0},ondragleave:function(){e.highlightBox=!1}}),this.collection.on("remove",(function(t){e._eventRemove(t)})),this._updateStateForCounters()},computed:{extensions:function(){return u.default.filter(this.listExtensions,(function(e){return!e.composite_files}))},appModel:function(){return this.app.model},history_id:function(){var e,t=null===(e=this.$store)||void 0===e?void 0:e.getters["betaHistory/currentHistoryId"];return t||this.app.currentHistoryId}},watch:{extension:function(e){this.updateExtension(e)},genome:function(e){this.updateGenome(e)}},methods:{_eventSelect:function(){var e=this.getUploadedModels().map((function(e){return{id:e.attributes.id,src:e.src,hid:e.attributes.hid,name:e.attributes.name}}));this.$emit("dismiss",e)},_newUploadModelProps:function(e,t){return{id:e,file_name:t.name,file_size:t.size,file_mode:t.mode||"local",file_path:t.path,file_uri:t.uri,file_data:t}},_eventSuccess:function(e,t){var n=u.default.pluck(t.outputs,"hid"),i=this.collection.get(e);i.set({percentage:100,status:"success",hids:n}),this._updateStateForSuccess(i)},_eventStart:function(){var e=this;if(0!==this.counterAnnounce&&0===this.counterRunning){this.uploadSize=0,this.uploadCompleted=0,this.collection.each((function(t){"init"==t.get("status")&&(t.set("status","queued"),e.uploadSize+=t.get("file_size"))})),this.appModel.set({percentage:0,status:"success"}),this.counterRunning=this.counterAnnounce,this._uploadFtp();var t=Object(p.a)();this.uploadbox.start({id:t.user.id,chunk_upload_size:this.app.chunkUploadSize}),this._updateStateForCounters()}},_eventReset:function(){0===this.counterRunning&&(this.collection.reset(),this.counterAnnounce=0,this.counterSuccess=0,this.counterError=0,this.counterRunning=0,this.uploadbox.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.appModel.set("percentage",0),this._updateStateForCounters())}}},B=Object(T.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":e.topInfo,"highlight-box":e.highlightBox},scopedSlots:e._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[e._v("Type (set all):")]),e._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!e.running},model:{value:e.extension,callback:function(t){e.extension=t},expression:"extension"}},e._l(e.extensions,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v(e._s(t.text))])})),0),e._v(" "),n("span",{staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),e._v(" "),n("span",{staticClass:"upload-footer-title"},[e._v("Genome (set all):")]),e._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!e.running},model:{value:e.genome,callback:function(t){e.genome=t},expression:"genome"}},e._l(e.listGenomes,(function(t,i){return n("option",{key:i,domProps:{value:t.id}},[e._v("\n                "+e._s(t.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(t){return e.$emit("dismiss")}}},[e._v("\n            "+e._s(e.btnCloseTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!e.enableReset},on:{click:e._eventReset}},[e._v("\n            "+e._s(e.btnResetTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnStop",staticClass:"ui-button-default",attrs:{id:"btn-stop",disabled:0==e.counterRunning},on:{click:e._eventStop}},[e._v("\n            "+e._s(e.btnStopTitle)+"\n        ")]),e._v(" "),e.selectable?n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!e.enableBuild,variant:e.enableBuild?"primary":""},on:{click:e._eventSelect}},[e._v("\n            "+e._s(e.btnSelectTitle)+"\n        ")]):e._e(),e._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!e.enableStart,variant:e.enableStart?"primary":""},on:{click:e._eventStart}},[e._v("\n            "+e._s(e.btnStartTitle)+"\n        ")]),e._v(" "),n("b-button",{ref:"btnCreate",staticClass:"ui-button-default",attrs:{id:"btn-new",disabled:!e.enableSources},on:{click:e._eventCreate}},[n("span",{staticClass:"fa fa-edit"}),e._v(e._s(e.btnCreateTitle)+"\n        ")]),e._v(" "),e.remoteFiles?n("b-button",{ref:"btnFtp",staticClass:"ui-button-default",attrs:{id:"btn-ftp",disabled:!e.enableSources},on:{click:e._eventRemoteFiles}},[n("span",{staticClass:"fa fa-folder-open-o"}),e._v(e._s(e.btnFilesTitle)+"\n        ")]):e._e(),e._v(" "),n("b-button",{ref:"btnLocal",staticClass:"ui-button-default",attrs:{id:"btn-local",title:e.btnLocalTitle,disabled:!e.enableSources},on:{click:e.uploadSelect}},[n("span",{staticClass:"fa fa-laptop"}),e._v(e._s(e.btnLocalTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[n("i",{staticClass:"fa fa-files-o"}),e._v("Drop files here")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!e.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Size")]),e._v(" "),n("th",[e._v("Type")]),e._v(" "),n("th",[e._v("Genome")]),e._v(" "),n("th",[e._v("Settings")]),e._v(" "),n("th",[e._v("Status")]),e._v(" "),n("th")])]),e._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,q=n(23),G=n(20),J=n(17),K=n(93);G.c.add(J.l);var X={mixins:[P],components:{BLink:K.a,BButton:$.a,FontAwesomeIcon:q.a},data:function(){return{datasets:[],ftpFiles:[],uris:[],topInfo:"Tabular source data to extract collection files and metadata from",enableReset:!1,enableBuild:!1,dataType:"datasets",selectedDatasetId:null,selectedDatasetName:null,sourceContent:"",selectionType:"paste",btnBuildTitle:"Build",btnResetTitle:"Reset"}},created:function(){this.initCollection(),this.initAppProperties()},watch:{selectionType:function(e){var t=this;"dataset"!=e||this.datasetsSet?"ftp"==e?s.a.getRemoteFiles((function(e){t.sourceContent=e.map((function(e){return e.path})).join("\n"),t.ftpFiles=e})):"remote_files"==e&&Object(D.c)(this._handleRemoteFilesUri,{mode:"directory"}):this.onSelectDataset()},selectedDatasetId:function(e){var t=this;if(e){var n=Object(p.a)();A.a.get("".concat(Object(b.getAppRoot)(),"api/histories/").concat(n.currHistoryPanel.model.id,"/contents/").concat(e,"/display")).then((function(e){t.sourceContent=e.data})).catch((function(e){return console.log(e)}))}else this.sourceContent=""}},methods:{_eventReset:function(){this.selectedDatasetId=null,this.sourceContent=""},_handleRemoteFilesUri:function(e){var t=this;s.a.getRemoteFilesAt(e.url).then((function(e){e=e.filter((function(e){return"File"==e.class})),t.sourceContent=e.map((function(e){return e.uri})).join("\n"),t.uris=e}))},_eventBuild:function(){this._buildSelection(this.sourceContent)},onSelectDataset:function(){var e=this;Object(p.a)().data.dialog((function(t){e.selectedDatasetId=t.id,e.selectedDatasetName=t.name}),{multiple:!1,library:!1,format:null,allowUpload:!1})},_buildSelection:function(e){var t=this.selectionType,n={},i=Object(p.a)();"dataset"==t||"paste"==t?(n.selectionType="raw",n.content=e):"ftp"==t?(n.selectionType="ftp",n.elements=this.ftpFiles,n.ftpUploadSite=this.ftpUploadSite):"remote_files"==t&&(n.selectionType="remote_files",n.elements=this.uris),n.dataType=this.dataType,i.currHistoryPanel.buildCollection("rules",n,!0),this.$emit("dismiss")}}},Q=Object(T.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":e._f("l")(e.topInfo)},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(t){return e.$emit("dismiss")}}},[e._v("\n            "+e._s(e._f("l")(e.btnCloseTitle))+"\n        ")]),e._v(" "),n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!e.sourceContent,variant:e.sourceContent?"primary":""},on:{click:e._eventBuild}},[e._v("\n            "+e._s(e._f("l")(e.btnBuildTitle))+"\n        ")]),e._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!e.enableReset},on:{click:e._eventReset}},[e._v("\n            "+e._s(e._f("l")(e.btnResetTitle))+"\n        ")])]},proxy:!0}])},[n("span",{staticClass:"float-left",staticStyle:{width:"25%",display:"inline",height:"100%"}},[n("div",{staticClass:"upload-rule-option"},[n("div",{staticClass:"upload-rule-option-title"},[e._v(e._s(e._f("l")("Upload data as")))]),e._v(" "),n("div",{staticClass:"rule-data-type"},[n("select2",{attrs:{"container-class":"upload-footer-selection"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},[n("option",{attrs:{value:"datasets"}},[e._v("Datasets")]),e._v(" "),n("option",{attrs:{value:"collections"}},[e._v("Collection(s)")])])],1)]),e._v(" "),n("div",{staticClass:"upload-rule-option"},[n("div",{staticClass:"upload-rule-option-title"},[e._v(e._s(e._f("l")("Load tabular data from")))]),e._v(" "),n("div",{staticClass:"rule-select-type"},[n("select2",{attrs:{"container-class":"upload-footer-selection"},model:{value:e.selectionType,callback:function(t){e.selectionType=t},expression:"selectionType"}},[n("option",{attrs:{value:"paste"}},[e._v(e._s(e._f("l")("Pasted Table")))]),e._v(" "),n("option",{attrs:{value:"dataset"}},[e._v(e._s(e._f("l")("History Dataset")))]),e._v(" "),e.ftpUploadSite?n("option",{attrs:{value:"ftp"}},[e._v(e._s(e._f("l")("FTP Directory")))]):e._e(),e._v(" "),n("option",{attrs:{value:"remote_files"}},[e._v(e._s(e._f("l")("Remote Files Directory")))])])],1)]),e._v(" "),"dataset"==e.selectionType?n("div",{staticClass:"upload-rule-option",attrs:{id:"upload-rule-dataset-option"}},[n("div",{staticClass:"upload-rule-option-title"},[e._v("History dataset")]),e._v(" "),n("div",[null==e.selectedDatasetName?n("b-link",{on:{click:e.onSelectDataset}},[e._v("\n                    "+e._s(e._f("l")("Select"))+"\n                ")]):n("span",[e._v("\n                    "+e._s(e.selectedDatasetName)+" "),n("font-awesome-icon",{attrs:{icon:"edit"},on:{click:e.onSelectDataset}})],1)],1)]):e._e()]),e._v(" "),n("span",{staticStyle:{display:"inline",float:"right",width:"75%",height:"300px"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sourceContent,expression:"sourceContent"}],staticClass:"upload-rule-source-content form-control",staticStyle:{height:"100%"},attrs:{disabled:"paste"!=e.selectionType},domProps:{value:e.sourceContent},on:{input:function(t){t.target.composing||(e.sourceContent=t.target.value)}}})])])}),[],!1,null,null,null).exports,Z=n(29),ee=n(656),te=n(657),ne={uploadPath:{type:String,required:!0},chunkUploadSize:{type:Number,required:!0},fileSourcesConfigured:{type:Boolean,required:!0},ftpUploadSite:{type:String,default:""},defaultGenome:{type:String,default:s.a.DEFAULT_GENOME},defaultExtension:{type:String,default:s.a.DEFAULT_EXTENSION},datatypesDisableAuto:{type:Boolean,default:!1},formats:{type:Array,default:null},multiple:{type:Boolean,default:!0},hasCallback:{type:Boolean,default:!1},selectable:{type:Boolean,required:!1,default:!1},auto:{type:Object,default:function(){return s.a.AUTO_EXTENSION}}};function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se={components:{Collection:W,Composite:R,Default:B,RulesInput:Q,LoadingSpan:Z.a,BTabs:ee.a,BTab:te.a},props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentHistoryId:{type:String,required:!0},currentUserId:{type:String,default:""}},ne),data:function(){return{listGenomes:[],listExtensions:[],genomesSet:!1,extensionsSet:!1,datatypesMapper:null,datatypesMapperReady:!0,URI_PREFIXES:["http","https","ftp","file","gxfiles","gximport","gxuserimport","gxftp"]}},created:function(){var e=this;this.model=new o.a.Model({label:"Load Data",percentage:0,status:"",onunload:function(){},onclick:function(){}}),this.model.on("change",(function(t){for(var n=t.changed,i=0,a=Object.entries(n);i<a.length;i++){var r=ie(a[i],2),o=r[0],s=r[1];e.eventHub.$emit("upload:".concat(o),s)}})),s.a.getUploadDatatypes(this.datatypesDisableAuto,this.auto).then((function(t){e.extensionsSet=!0,e.listExtensions=t})).catch((function(e){console.log("Error in UploadModalContent, unable to load datatypes",e)})),s.a.getUploadGenomes(this.defaultGenome).then((function(t){e.genomesSet=!0,e.listGenomes=t})).catch((function(e){console.log("Error in uploadModalContent, unable to load genomes",e)})),null!==this.formats?(this.datatypesMapperReady=!1,Object(l.a)().then((function(t){e.datatypesMapper=t,e.datatypesMapperReady=!0}))):this.datatypesMapperReady=!0},beforeDestroy:function(){this.model.get("onunload")()},computed:{historyAvailable:function(){return Boolean(this.currentHistoryId)},ready:function(){return this.genomesSet&&this.extensionsSet&&this.historyAvailable&&this.datatypesMapperReady},unrestricted:function(){return null===this.formats&&this.multiple},effectiveExtensions:function(){var e=this;if(null===this.formats||!this.datatypesMapperReady)return this.listExtensions;var t=[];return this.listExtensions.forEach((function(n){n&&"auto"==n.id?t.push(n):e.datatypesMapper.isSubTypeOfAny(n.id,e.formats)&&t.push(n)})),t},formatRestricted:function(){return null!==this.formats},showComposite:function(){return!this.formatRestricted||this.effectiveExtensions.some((function(e){return!!e.composite_files}))},showRegular:function(){return!this.formatRestricted||this.effectiveExtensions.some((function(e){return!e.composite_files}))},showCollection:function(){return!!this.unrestricted},showRules:function(){return!!this.unrestricted||this.multiple}},mounted:function(){this.id=String(this._uid)},methods:{currentFtp:function(){return this.currentUserId&&this.ftpUploadSite},toData:function(e,t){var n={fetchRequest:null,uploadRequest:null};if(e&&e.length>0){var i=this.preprocess(e);i.urls.length>0?n.fetchRequest=this.toFetchData(i.urls,t):n.uploadRequest=this.toFileUploadData(i.files,t)}return n},preprocess:function(e){var t={urls:[],files:[]};for(var n in e){var i=e[n];"new"==i.get("file_mode")&&this.itemIsURL(i)?t.urls.push(i):t.files.push(i)}return t},itemIsURL:function(e){return this.URI_PREFIXES.some((function(t){return e.get("url_paste").startsWith(t)}))},toFileUploadData:function(e,t){var n={payload:{tool_id:"upload1",history_id:t||this.currentHistoryId,inputs:{}},files:[],error_message:null};if(e&&e.length>0){var i={file_count:e.length,dbkey:e[0].get("genome","?"),file_type:e[0].get("extension")||"auto"};for(var a in e){var r=e[a];if(r.set("status","running"),!(r.get("file_size")>0)){if(r.get("optional"))continue;n.error_message="Upload content incomplete.",r.set("status","error"),r.set("info",n.error_message);break}var o="files_".concat(a,"|");i["".concat(o,"type")]="upload_dataset","New File"!=r.get("file_name")&&(i["".concat(o,"NAME")]=r.get("file_name")),i["".concat(o,"space_to_tab")]=r.get("space_to_tab")?"Yes":null,i["".concat(o,"to_posix_lines")]=r.get("to_posix_lines")?"Yes":null,i["".concat(o,"dbkey")]=r.get("genome",null),i["".concat(o,"file_type")]=r.get("extension",null);var s=void 0,l=void 0;switch(r.get("file_mode")){case"new":i["".concat(o,"url_paste")]=r.get("url_paste");break;case"ftp":l="ftp_files",(s=r.get("file_path")).indexOf("://")>=0&&(l="url_paste"),i["".concat(o).concat(l)]=s;break;case"local":n.files.push({name:"".concat(o,"file_data"),file:r.get("file_data")})}}n.payload.inputs=JSON.stringify(i)}return n},toFetchData:function(e,t){var n={history_id:t,space_to_tab:e[0].get("space_to_tab"),to_posix_lines:e[0].get("to_posix_lines"),targets:[{destination:{type:"hdas"},elements:[],name:""}],auto_decompress:!0};return e.forEach((function(e){("ftp"==e.get("file_mode")?[e.get("file_uri")||e.get("file_path")]:e.get("url_paste").split("\n")).forEach((function(t){""!=t&&n.targets[0].elements.push({url:t.trim(),src:"url",dbkey:e.get("genome","?"),ext:e.get("extension","auto")})}))})),n}}},le=Object(T.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready?n("b-tabs",[e.showRegular?n("b-tab",{attrs:{title:"Regular",id:"regular","button-id":"tab-title-link-regular"}},[n("default",e._g({attrs:{app:this,"lazy-load-max":50,multiple:e.multiple,"has-callback":e.hasCallback,selectable:e.selectable}},e.$listeners))],1):e._e(),e._v(" "),e.showComposite?n("b-tab",{attrs:{title:"Composite",id:"composite","button-id":"tab-title-link-composite"}},[n("composite",e._g({attrs:{app:this,"has-callback":e.hasCallback,selectable:e.selectable}},e.$listeners))],1):e._e(),e._v(" "),e.showCollection?n("b-tab",{attrs:{title:"Collection",id:"collection","button-id":"tab-title-link-collection"}},[n("collection",e._g({attrs:{app:this,"has-callback":e.hasCallback,selectable:e.selectable}},e.$listeners))],1):e._e(),e._v(" "),e.showRules?n("b-tab",{attrs:{title:"Rule-based",id:"rule-based","button-id":"tab-title-link-rule-based"}},[n("rules-input",e._g({attrs:{app:this,"has-callback":e.hasCallback,selectable:e.selectable}},e.$listeners))],1):e._e()],1):n("div",[n("loading-span",{attrs:{message:"Loading required information from Galaxy server."}})],1)}),[],!1,null,null,null).exports;function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue={components:{CurrentUser:i.a,UserHistories:a.a,UploadModalContent:le},props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:{type:String,default:"Download from web or upload from disk"},modalStatic:{type:Boolean,default:!0}},ne),data:function(){return{modalShow:!1}},methods:{show:function(){this.modalShow=!0},hide:function(){this.modalShow=!1},dismiss:function(e){void 0!==e&&this.$root.$emit("uploadResult",e),this.hide()}},mounted:function(){this.show(),this.$root.$on("openUpload",this.show)}},he=Object(T.a)(ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CurrentUser",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.user;return[i?n("UserHistories",{attrs:{user:i},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.currentHistoryId;return[n("b-modal",{attrs:{static:e.modalStatic,"header-class":"no-separator","modal-class":"ui-modal","dialog-class":"upload-dialog","body-class":"upload-dialog-body","no-enforce-focus":"","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[n("h4",{staticClass:"title",attrs:{tabindex:"0"}},[e._v(e._s(e._f("localize")(e.title)))])]},proxy:!0}],null,!0),model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e._v(" "),a?n("UploadModalContent",e._b({attrs:{"current-user-id":i.id,"current-history-id":a},on:{dismiss:e.dismiss}},"UploadModalContent",Object.assign({},e.$props,e.$attrs),!1)):e._e()],1)]}}],null,!0)}):e._e()]}}])})}),[],!1,null,null,null).exports;var fe=n(38);function pe(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function me(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(p.a)(),n=Object(L.b)(),i={multiple:!0,uploadPath:t.config.nginx_upload_path||"".concat(n,"api/tools"),chunkUploadSize:t.config.chunk_upload_size,fileSourcesConfigured:t.config.file_sources_configured,ftpUploadSite:t.config.ftp_upload_site,defaultGenome:t.config.default_genome,defaultExtension:t.config.default_extension,selectable:!1};return Object.assign({},i,e)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.callback,n=pe(e,["callback"]);t&&(n.hasCallback=!0);var i=Object(fe.a)(he),a=document.createElement("div");document.body.appendChild(a);var r=i(n,a);return t&&r.$once("uploadResult",t),r}var _e=null;function ge(e){return _e||(_e=me(e)),_e.$emit("openUpload",_e),_e}var ve=n(658);G.c.add(J.M);var ye={components:{FontAwesomeIcon:q.a},directives:{"v-b-tooltip":ve.a},props:{title:{type:String,default:"Download from URL or upload files from disk"}},data:function(){return{status:"",percentage:0}},methods:{showUploadDialog:function(e){ge()},setStatus:function(e){this.status=e},setPercentage:function(e){this.percentage=Math.round(e)}},created:function(){this.eventHub.$on("upload:status",this.setStatus),this.eventHub.$on("upload:percentage",this.setPercentage)},beforeDestroy:function(){this.eventHub.$off("upload:status",this.setStatus),this.eventHub.$off("upload:percentage",this.setPercentage)}},be=Object(T.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"upload-button",attrs:{id:"tool-panel-upload-button","aria-label":e._f("localize")(e.title),title:e._f("localize")(e.title),size:"sm"},on:{click:e.showUploadDialog}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-notransition",class:"progress-bar-"+e.status,style:{width:e.percentage+"%"}})]),e._v(" "),n("span",{staticClass:"position-relative"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"upload"}}),e._v(" "),n("b",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Upload Data")])],1)])}),[],!1,null,null,null).exports},,function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(6),s=n(131),l=n(112),c=n(163),d=n(204),u=n(121),h=n(91),f=n(142),p=h.a.DCListItemView,m=p.extend({initialize:function(e){p.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCListItemEdit(".concat(e,")")}}),_=h.a.DCEListItemView,g=_.extend({initialize:function(e){_.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCEListItemEdit(".concat(e,")")}}),v=f.a.DatasetListItemEdit.extend({initialize:function(e){f.a.DatasetListItemEdit.prototype.initialize.call(this,e)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):r.a.when()},_renderDeleteButton:function(){return null},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemEdit(".concat(e,")")}});v.prototype.templates=i.default.extend({},f.a.DatasetListItemEdit.prototype.templates,{titleBar:h.a.DatasetDCEListItemView.prototype.templates.titleBar});var y={DCListItemEdit:m,DCEListItemEdit:g,DatasetDCEListItemEdit:v,NestedDCDCEListItemEdit:h.a.NestedDCDCEListItemView.extend({toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemEdit(".concat(e,")")}})},b=n(89),w=n(2),k=n.n(w),x=(n(153),u.a.CollectionView),S=x.extend({DatasetDCEViewClass:y.DatasetDCEListItemEdit,NestedDCDCEViewClass:y.NestedDCDCEListItemEdit,getNestedDCDCEViewClass:function(){return y.NestedDCDCEListItemEdit.extend({foldoutPanelClass:S})},initialize:function(e){x.prototype.initialize.call(this,e)},_setUpBehaviors:function(e){var t=this;if(e=e||this.$el,x.prototype._setUpBehaviors.call(this,e),this.model){var n=Object(o.a)();if(n.user&&!n.user.isAnonymous()){this.tagsEditorShown=!0;var i=this;e.find("> .controls .name").attr("title",k()("Click to rename collection")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(e){var t=i.model.get("name");e&&e!==t?(i.$el.find("> .controls .name").text(e),i.model.save({name:e}).fail((function(){i.$el.find("> .controls .name").text(i.model.previous("name"))}))):i.$el.find("> .controls .name").text(t)}});var a=e.find(".tags-display")[0],s={model:this.model,disabled:!1,context:"collection-view-edit"},l=Object(b.d)(s,a);if(this.tagsEditorShown)r()(l.$el).hasClass("active")||(r()(l.$el).toggleClass("active"),t.tagsEditorShown=r()(l.$el).hasClass("active"))}}},toString:function(){return"CollectionViewEdit(".concat(this.model?this.model.get("name"):"",")")}}),C={CollectionViewEdit:S},M=d.a.HDCAListItemView,T={HDCAListItemEdit:M.extend({initialize:function(e){M.prototype.initialize.call(this,e),this.purgeAllowed=e.purgeAllowed||!1},_getFoldoutPanelClass:function(){return C.CollectionViewEdit},_renderPrimaryActions:function(){return this.log("".concat(this,"._renderPrimaryActions")),M.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()])},_renderDeleteButton:function(){return r()('\n                <div class="dropdown">\n                    <a class="delete-btn icon-btn" title="'.concat(k()("Delete"),'" data-toggle="dropdown">\n                        <span class="fa fa-times"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection">\n                                ').concat(k()("Collection Only"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection-and-datasets">\n                                ').concat(k()("Delete Datasets"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" style="display: ').concat(this.purgeAllowed?"inherit":"none",'" class="dropdown-item delete-collection-and-purge-datasets">\n                                ').concat(k()("Permanently Delete Datasets"),"\n                            </a>\n                    </div>\n                </div>"))},events:i.default.extend(i.default.clone(M.prototype.events),{"click .delete-collection":function(e){this.model.delete()},"click .delete-collection-and-datasets":function(e){this.model.delete(!0)},"click .delete-collection-and-purge-datasets":function(e){this.model.delete(!0,!0)}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDCAListItemEdit(".concat(e,")")}})},j=n(201),O=n(237),D=n(157),L=n(238),E=n(239),A=n(52),I=n(11);function P(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var R,H,N=r.a,$=s.a.HistoryView,F=$.extend({HDAViewClass:c.a.HDAListItemEdit,HDCAViewClass:T.HDCAListItemEdit,initialize:function(e){e=e||{},$.prototype.initialize.call(this,e),this.tagsEditor=null,this.dragItems=!0,this.annotationEditor=null,this.purgeAllowed=e.purgeAllowed||!1,this.annotationEditorShown=e.annotationEditorShown||!1,this.tagsEditorShown=e.tagsEditorShown||!1},_setUpListeners:function(){return $.prototype._setUpListeners.call(this),this.on({"droptarget:drop":function(e,t){this.dataDropped(t),this.dropTargetOff()},"view:attached view:removed":function(){this._renderCounts()},"search:loading-progress":this._renderSearchProgress,"search:searching":this._renderSearchFindings})},_setUpModelListeners:function(){return $.prototype._setUpModelListeners.call(this),this.listenTo(this.model,"change:size",this.updateHistoryDiskSize),this},_setUpCollectionListeners:function(){return $.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"change:deleted":this._handleItemDeletedChange,"change:visible":this._handleItemVisibleChange,"change:purged":function(e){this.model.fetch()},"fetching-deleted":function(e){this.$("> .controls .deleted-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-hidden":function(e){this.$("> .controls .hidden-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-deleted-done fetching-hidden-done":this._renderCounts}),this},_buildNewRender:function(){var e=Object(o.a)(),t=$.prototype._buildNewRender.call(this);return this.model?(e&&e.user&&e.user.id&&e.user.id===this.model.get("user_id")&&(this._renderTags(t),this._renderAnnotation(t)),t):t},updateHistoryDiskSize:function(){this.$(".history-size").text(this.model.get("nice_size"))},renderItems:function(e){var t=$.prototype.renderItems.call(this,e);return this.searchFor?this._renderSearchFindings(e):this._renderCounts(e),t},_renderCounts:function(e){e=e instanceof r.a?e:this.$el;var t=this.templates.counts(this.model.toJSON(),this);return e.find("> .controls .subtitle").html(t)},_renderTags:function(e){var t=e.find(".controls .tags-display")[0],n={model:this.model,disabled:!1,context:"history-view-edit"},i=Object(b.d)(n,t);return Object(A.a)({title:k()("Edit history tags"),classes:"history-tag-btn",faIcon:"fa-tags",tooltipConfig:{placement:"top"}}).appendTo(e.find(".controls .actions")).on("click",(function(){N(i.$el).toggleClass("active")})),i},_renderAnnotation:function(e){var t=this;this.annotationEditor=new j.a.AnnotationEditor({model:this.model,el:e.find(".controls .annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){t.toggleHDAAnnotationEditors(!0,t.fxSpeed)},onhide:function(){t.toggleHDAAnnotationEditors(!1,t.fxSpeed)},$activator:Object(A.a)({title:k()("Edit history annotation"),classes:"history-annotate-btn",faIcon:"fa-comment",tooltipConfig:{placement:"top"}}).appendTo(e.find(".controls .actions"))})},_setUpBehaviors:function(e){var t=Object(o.a)();if(e=e||this.$el,$.prototype._setUpBehaviors.call(this,e),this.model&&t.user&&!t.user.isAnonymous()&&t.user.id===this.model.get("user_id")){var n=this;e.find("> .controls .name").attr("title",k()("Click to rename history")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(e){var t=n.model.get("name");e&&e!==t?(n.$el.find("> .controls .name").text(e),n.model.save({name:e}).fail((function(){n.$el.find("> .controls .name").text(n.model.previous("name"))}))):n.$el.find("> .controls .name").text(t)}})}},multiselectActions:function(){var e=this,t=Object(o.a)(),n=this,i=function(i,a){var o={},s=n.getSelectedModels().filter((function(e){return console.log(e.attributes[i]),e.attributes[i]!=a})).map((function(e){var t={history_content_type:e.attributes.history_content_type,id:e.attributes.id};return o[e.id]=e,t}));if(0!=s.length){var l={};l.url="".concat(t.root,"api/histories/").concat(e.model.id,"/contents"),l.type="PUT";var c={items:s};c[i]=a,l.data=JSON.stringify(c),l.contentType="application/json";var d=r.a.ajax(l);return d.done((function(e,t,n){var i,a=P(e);try{for(a.s();!(i=a.n()).done;){var r=i.value,s=r.history_content_type+"-"+r.id;o[s].set(r)}}catch(e){a.e(e)}finally{a.f()}})),d.fail((function(e,t,n){console.error(n)})),d}},a=[{html:k()("Hide datasets"),func:function(){i("visible",!1)}},{html:k()("Unhide datasets"),func:function(){i("visible",!0)}},{html:k()("Delete datasets"),func:function(){i("deleted",!0)}},{html:k()("Undelete datasets"),func:function(){i("deleted",!1)}}];return n.purgeAllowed&&a.push({html:k()("Permanently delete datasets"),func:function(){if(window.confirm(k()("This will permanently remove the data in your datasets. Are you sure?"))){var e=l.a.HistoryDatasetAssociation.prototype.purge,t=n.getSelectedModels(),i=t.filter((function(e){return"dataset"==e.get("history_content_type")}));t.ajaxQueue(e,{},i)}}}),a=a.concat(n._collectionActions())},_collectionActions:function(){var e=this;return[{html:k()("Build Dataset List"),func:function(){return e.buildCollection("list")}},{html:k()("Build Dataset Pair"),func:function(){return e.buildCollection("paired")}},{html:k()("Build List of Dataset Pairs"),func:function(){return e.buildCollection("list:paired")}},{html:k()("Build Collection from Rules"),func:function(){return e.buildCollection("rules")}}]},buildCollection:function(e,t,n){var i=this;t=t||i.getSelectedModels();var a,r=n||!0;"list"==e?a=O.a.createListCollection:"paired"==e?a=L.a.createPairCollection:"list:paired"==e?a=E.a.createPairedListCollection:e.startsWith("rules")?a=D.a.createCollectionViaRules:console.warn("Unknown collectionType encountered ".concat(e)),a(t,r).then((function(){i.model.refresh()})).catch((function(){}))},_getItemViewOptions:function(e){var t=$.prototype._getItemViewOptions.call(this,e);return i.default.extend(t,{purgeAllowed:this.purgeAllowed,tagsEditorShown:this.tagsEditor&&!this.tagsEditor.hidden,annotationEditorShown:this.annotationEditor&&!this.annotationEditor.hidden}),t},_handleItemDeletedChange:function(e){e.get("deleted")?this._handleItemDeletion(e):this._handleItemUndeletion(e),this._renderCounts()},_handleItemDeletion:function(e){var t=this.model.get("contents_active");t.deleted+=1,t.active-=1,this.model.contents.includeDeleted||this.removeItemView(e),this.model.set("contents_active",t)},_handleItemUndeletion:function(e){var t=this.model.get("contents_active");t.deleted-=1,this.model.contents.includeDeleted||(t.active-=1),this.model.set("contents_active",t)},_handleItemVisibleChange:function(e){e.hidden()?this._handleItemHidden(e):this._handleItemUnhidden(e),this._renderCounts()},_handleItemHidden:function(e){var t=this.model.get("contents_active");t.hidden+=1,t.active-=1,this.model.contents.includeHidden||this.removeItemView(e),this.model.set("contents_active",t)},_handleItemUnhidden:function(e){var t=this.model.get("contents_active");t.hidden-=1,this.model.contents.includeHidden||(t.active-=1),this.model.set("contents_active",t)},toggleHDAAnnotationEditors:function(e,t){i.default.each(this.views,(function(n){n.annotationEditor&&n.annotationEditor.toggle(e,t)}))},events:i.default.extend(i.default.clone($.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click .toggle-deleted-link":function(e){this.toggleShowDeleted()},"click .toggle-hidden-link":function(e){this.toggleShowHidden()}}),_renderSearchProgress:function(e,t){var n=e+t;return this.$("> .controls .subtitle").html(["<i>",k()("Searching "),n,"/",this.model.contentsShown(),"</i>"].join(""))},_renderSearchFindings:function(e){e=e instanceof r.a?e:this.$el;var t=this.templates.found(this.model.toJSON(),this);return e.find("> .controls .subtitle").html(t),this},dropTargetOn:function(){if(this.dropTarget)return this;this.dropTarget=!0;var e={dragenter:i.default.bind(this.dragenter,this),dragover:i.default.bind(this.dragover,this),dragleave:i.default.bind(this.dragleave,this),drop:i.default.bind(this.drop,this)},t=this._renderDropTarget();for(var n in this.$list().before([this._renderDropTargetHelp(),t]),e)Object.prototype.hasOwnProperty.call(e,n)&&t.get(0).addEventListener(n,e[n]);return this},_renderDropTarget:function(){return this.$(".history-drop-target").remove(),N("<div/>").addClass("history-drop-target")},_renderDropTargetHelp:function(){return this.$(".history-drop-target-help").remove(),N("<div/>").addClass("history-drop-target-help").text(k()("Drag datasets here to copy them to the current history"))},dropTargetOff:function(){if(!this.dropTarget)return this;this.dropTarget=!1;var e=this.$(".history-drop-target").get(0);for(var t in this._dropHandlers)Object.prototype.hasOwnProperty.call(this._dropHandlers,t)&&e.off(t,this._dropHandlers[t]);return this.$(".history-drop-target").remove(),this.$(".history-drop-target-help").remove(),this},dropTargetToggle:function(){return this.dropTarget?this.dropTargetOff():this.dropTargetOn(),this},dragenter:function(e){e.preventDefault(),e.stopPropagation(),this.$(".history-drop-target").css("border","2px solid black")},dragover:function(e){e.preventDefault(),e.stopPropagation()},dragleave:function(e){e.preventDefault(),e.stopPropagation(),this.$(".history-drop-target").css("border","1px dashed black")},drop:function(e){e.preventDefault();var t=e.dataTransfer,n=t.getData("text");t.dropEffect="move";try{n=JSON.parse(n)}catch(e){this.warn("error parsing JSON from drop:",n)}return this.trigger("droptarget:drop",e,n,this),!1},dataDropped:function(e){var t=this;return i.default.isObject(e)&&"HistoryDatasetAssociation"===e.model_class&&e.id?0!==this.contents.currentPage?this.contents.fetchPage(0).then((function(){return t.model.contents.copy(e.id)})):this.model.contents.copy(e.id):r.a.when()},toString:function(){return"HistoryViewEdit(".concat(this.model?this.model.get("name"):"",")")}});F.prototype.templates=(R=I.a.wrapTemplate(["<% var shown = Math.max( view.views.length, history.contents_active.active ) %>","<% if( shown ){ %>",'<span class="shown-count">',"<%- shown %> ",k()("shown"),"</span>","<% } %>","<% if( history.contents_active.deleted ){ %>",'<span class="deleted-count">',"<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>","<% } else { %>","<%- history.contents_active.deleted %> ",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("deleted"),"</a>","<% } %>","</span>","<% } %>","<% if( history.contents_active.hidden ){ %>",'<span class="hidden-count">',"<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>","<%- history.contents_active.hidden %> ",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hidden"),"</a>","<% } %>","</span>","<% } %>"],"history"),H=I.a.wrapTemplate([k()("Found")," <%- view.views.length %>","<% if( history.contents_active.deleted ){ %>",", ","<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>","<% } else { %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("show deleted"),"</a>","<% } %>","<% } %>","<% if( history.contents_active.hidden ){ %>",", ","<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("show hidden"),"</a>","<% } %>","<% } %>"],"history"),i.default.extend(i.default.clone($.prototype.templates),{counts:R,found:H}));t.a={HistoryViewEdit:F}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n.d(t,"b",(function(){return z}));var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model(e),this.setElement(a()("<div/>").addClass("corner frame")),this.$el.append(a()("<div/>").addClass("f-header corner").append(a()("<div/>").addClass("f-title")).append(a()("<div/>").addClass("f-icon f-close fa fa-close").tooltip({title:u()("Close"),placement:"bottom"}))).append(a()("<div/>").addClass("f-content")).append(a()("<div/>").addClass("f-resize f-icon corner fa fa-expand").tooltip({title:"Resize"})).append(a()("<div/>").addClass("f-cover")),this.$header=this.$(".f-header"),this.$title=this.$(".f-title"),this.$content=this.$(".f-content"),this.render(),this.listenTo(this.model,"change",this.render,this)},render:function(){var e=this,t=this.model.attributes;this.$title.html(r.default.escape(t.title)||""),this.$header.find(".f-icon-left").remove(),r.default.each(t.menu,(function(t){var n=a()("<div/>").addClass("f-icon-left").addClass(t.icon);r.default.isFunction(t.disabled)&&t.disabled()?n.attr("disabled",!0):n.on("click",(function(){t.onclick(e)})).tooltip({title:t.tooltip||"",placement:"bottom"}),e.$header.append(n)})),t.url?this.$content.html(a()("<iframe/>").addClass("f-iframe").attr("scrolling","auto").attr("src","".concat(t.url+(-1===t.url.indexOf("?")?"?":"&"),"widget=True"))):t.content&&(r.default.isFunction(t.content)?t.content(e.$content):e.$content.html(t.content))}}),f={View:s.a.View.extend({defaultOptions:{frame:{cols:6,rows:3},rows:1e3,cell:130,margin:5,scroll:5,top_min:40,frame_max:9,visible:!0},cols:0,top:0,top_max:0,frame_z:0,frame_counter:0,frame_uid:0,frame_list:{},frame_shadow:null,visible:!1,event:{},initialize:function(e){var t=this;this.options=r.default.defaults(e||{},this.defaultOptions),this.visible=this.options.visible,this.top=this.top_max=this.options.top_min,this.setElement(a()("<div/>").addClass("galaxy-frame").append(a()("<div/>").addClass("frame-background")).append(a()("<div/>").addClass("frame-menu frame-scroll-up fa fa-chevron-up fa-2x")).append(a()("<div/>").addClass("frame-menu frame-scroll-down fa fa-chevron-down fa-2x"))),this.frame_shadow=new s.a.View({el:a()("<div/>").addClass("corner frame-shadow")}),this.$el.append(this.frame_shadow.$el),this._frameInit(this.frame_shadow,"#frame-shadow"),this._frameResize(this.frame_shadow,{width:0,height:0}),this.frame_list["#frame-shadow"]=this.frame_shadow,this.visible?this.show():this.hide(),this._panelRefresh(),a()(window).resize((function(){t.visible&&t._panelRefresh()}))},render:function(){this.$(".frame-scroll-up")[this.top!=this.options.top_min?"show":"hide"](),this.$(".frame-scroll-down")[this.top!=this.top_max?"show":"hide"]()},add:function(e){var t=Object(c.a)();if(this.frame_counter>=this.options.frame_max)t.modal.show({title:u()("Warning"),body:"You have reached the maximum number of allowed frames (".concat(this.options.frame_max,")."),buttons:{Close:function(){t.modal.hide()}}});else{var n="#frame-".concat(this.frame_uid++);if(0!==a()(n).length)t.modal.show({title:u()("Error"),body:"This frame already exists. This page might contain multiple frame managers.",buttons:{Close:function(){t.modal.hide()}}});else{this.top=this.options.top_min;var i=new h(e);this.$el.append(i.$el),e.width=this._toPixelCoord("width",this.options.frame.cols),e.height=this._toPixelCoord("height",this.options.frame.rows),this.frame_z=parseInt(i.$el.css("z-index")),this.frame_list[n]=i,this.frame_counter++,this._frameInit(i,n),this._frameResize(i,{width:e.width,height:e.height}),this._frameInsert(i,{top:0,left:0},!0),this.visible||this.show(),this.trigger("add")}}},del:function(e){var t=this,n=this,i=e.$el;i.fadeOut("fast",(function(){i.remove(),delete n.frame_list[e.id],n.frame_counter--,n._panelRefresh(!0),n._panelAnimationComplete(),0==t.frame_counter&&t._eventHide(),n.trigger("remove")}))},show:function(){this.visible=!0,this.$el.fadeIn("fast"),this.trigger("show")},hide:function(){this.event.type||(this.visible=!1,this.$el.fadeOut("fast",(function(){a()(this).hide()})),this.trigger("hide"))},length:function(){return this.frame_counter},events:{mousemove:"_eventFrameMouseMove",mouseup:"_eventFrameMouseUp",mouseleave:"_eventFrameMouseUp",mousewheel:"_eventPanelScroll",DOMMouseScroll:"_eventPanelScroll","mousedown .frame":"_eventFrameMouseDown","mousedown .frame-background":"_eventHide","mousedown .frame-scroll-up":"_eventPanelScroll_up","mousedown .frame-scroll-down":"_eventPanelScroll_down","mousedown .f-close":"_eventFrameClose"},_eventFrameMouseDown:function(e){a()(".tooltip").hide(),this.event.type||((a()(e.target).hasClass("f-header")||a()(e.target).hasClass("f-title"))&&(this.event.type="drag"),a()(e.target).hasClass("f-resize")&&(this.event.type="resize"),this.event.type&&(e.preventDefault(),this.event.target=this._frameIdentify(e.target),this.event.xy={x:e.originalEvent.pageX,y:e.originalEvent.pageY},this._frameDragStart(this.event.target)))},_eventFrameMouseMove:function(e){if(this.event.type){var t={x:e.originalEvent.pageX,y:e.originalEvent.pageY},n={x:t.x-this.event.xy.x,y:t.y-this.event.xy.y};this.event.xy=t;var i=this._frameScreen(this.event.target);if("resize"==this.event.type){i.width+=n.x,i.height+=n.y;var a=this.options.cell-this.options.margin-1;i.width=Math.max(i.width,a),i.height=Math.max(i.height,a),this._frameResize(this.event.target,i),i.width=this._toGridCoord("width",i.width)+1,i.height=this._toGridCoord("height",i.height)+1,i.width=this._toPixelCoord("width",i.width),i.height=this._toPixelCoord("height",i.height),this._frameResize(this.frame_shadow,i),this._frameInsert(this.frame_shadow,{top:this._toGridCoord("top",i.top),left:this._toGridCoord("left",i.left)})}else if("drag"==this.event.type){i.left+=n.x,i.top+=n.y,this._frameOffset(this.event.target,i);var r={top:this._toGridCoord("top",i.top),left:this._toGridCoord("left",i.left)};0!==r.left&&r.left++,this._frameInsert(this.frame_shadow,r)}}},_eventFrameMouseUp:function(e){this.event.type&&(this._frameDragStop(this.event.target),this.event.type=null)},_eventFrameClose:function(e){this.event.type||(e.preventDefault(),this.del(this._frameIdentify(e.target)))},_eventHide:function(e){this.event.type||this.hide()},_eventPanelScroll:function(e){!this.event.type&&this.visible&&(0!==a()(e.srcElement).parents(".frame").length?e.stopPropagation():(e.preventDefault(),this._panelScroll(e.originalEvent.detail?e.originalEvent.detail:e.originalEvent.wheelDelta/-3)))},_eventPanelScroll_up:function(e){this.event.type||(e.preventDefault(),this._panelScroll(-this.options.scroll))},_eventPanelScroll_down:function(e){this.event.type||(e.preventDefault(),this._panelScroll(this.options.scroll))},_frameIdentify:function(e){return this.frame_list["#".concat(a()(e).closest(".frame").attr("id"))]},_frameDragStart:function(e){this._frameFocus(e,!0);var t=this._frameScreen(e);this._frameResize(this.frame_shadow,t),this._frameGrid(this.frame_shadow,e.grid_location),e.grid_location=null,this.frame_shadow.$el.show(),a()(".f-cover").show()},_frameDragStop:function(e){this._frameFocus(e,!1);var t=this._frameScreen(this.frame_shadow);this._frameResize(e,t),this._frameGrid(e,this.frame_shadow.grid_location,!0),this.frame_shadow.grid_location=null,this.frame_shadow.$el.hide(),a()(".f-cover").hide(),this._panelAnimationComplete()},_toGridCoord:function(e,t){var n="width"==e||"height"==e?1:-1;return"top"==e&&(t-=this.top),parseInt((t+n*this.options.margin)/this.options.cell,10)},_toPixelCoord:function(e,t){var n="width"==e||"height"==e?1:-1,i=t*this.options.cell-n*this.options.margin;return"top"==e&&(i+=this.top),i},_toGrid:function(e){return{top:this._toGridCoord("top",e.top),left:this._toGridCoord("left",e.left),width:this._toGridCoord("width",e.width),height:this._toGridCoord("height",e.height)}},_toPixel:function(e){return{top:this._toPixelCoord("top",e.top),left:this._toPixelCoord("left",e.left),width:this._toPixelCoord("width",e.width),height:this._toPixelCoord("height",e.height)}},_isCollision:function(e){for(var t in this.frame_list){var n=this.frame_list[t];if(null!==n.grid_location&&(i=e,a=n.grid_location,!(i.left>a.left+a.width-1||i.left+i.width-1<a.left||i.top>a.top+a.height-1||i.top+i.height-1<a.top)))return!0}var i,a;return!1},_locationRank:function(e){return e.top*this.cols+e.left},_panelRefresh:function(e){this.cols=parseInt(a()(window).width()/this.options.cell,10)+1,this._frameInsert(null,null,e)},_panelAnimationComplete:function(){var e=this;a()(".frame").promise().done((function(){e._panelScroll(0,!0)}))},_panelScroll:function(e,t){var n=this.top-this.options.scroll*e;if(n=Math.max(n,this.top_max),n=Math.min(n,this.options.top_min),this.top!=n){for(var i in this.frame_list){var a=this.frame_list[i];if(null!==a.grid_location){var r={top:a.screen_location.top-(this.top-n),left:a.screen_location.left};this._frameOffset(a,r,t)}}this.top=n}this.render()},_frameInit:function(e,t){e.id=t,e.screen_location={},e.grid_location={},e.grid_rank=null,e.$el.attr("id",t.substring(1))},_frameInsert:function(e,t,n){var i=this,o=[];e&&(e.grid_location=null,o.push([e,this._locationRank(t)])),r.default.each(this.frame_list,(function(e){null!==e.grid_location&&(e.grid_location=null,o.push([e,e.grid_rank]))})),o.sort((function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0})),r.default.each(o,(function(e){i._framePlace(e[0],n)})),this.top_max=0,r.default.each(this.frame_list,(function(e){null!==e.grid_location&&(i.top_max=Math.max(i.top_max,e.grid_location.top+e.grid_location.height))})),this.top_max=a()(window).height()-this.top_max*this.options.cell-2*this.options.margin,this.top_max=Math.min(this.top_max,this.options.top_min),this.render()},_framePlace:function(e,t){e.grid_location=null;for(var n=this._toGrid(this._frameScreen(e)),i=!1,a=0;a<this.options.rows;a++){for(var r=0;r<Math.max(1,this.cols-n.width);r++)if(n.top=a,n.left=r,!this._isCollision(n)){i=!0;break}if(i)break}i?this._frameGrid(e,n,t):console.log("Grid dimensions exceeded.")},_frameFocus:function(e,t){e.$el.css("z-index",this.frame_z+(t?1:0))},_frameOffset:function(e,t,n){if(e.screen_location.left=t.left,e.screen_location.top=t.top,n){this._frameFocus(e,!0);var i=this;e.$el.animate({top:t.top,left:t.left},"fast",(function(){i._frameFocus(e,!1)}))}else e.$el.css({top:t.top,left:t.left})},_frameResize:function(e,t){e.$el.css({width:t.width,height:t.height}),e.screen_location.width=t.width,e.screen_location.height=t.height},_frameGrid:function(e,t,n){e.grid_location=t,this._frameOffset(e,this._toPixel(t),n),e.grid_rank=this._locationRank(t)},_frameScreen:function(e){var t=e.screen_location;return{top:t.top,left:t.left,width:t.width,height:t.height}}})},p=n(55),m=n(32),_=n(133),g=s.a.View.extend({initialize:function(e){var t=this;e=e||{},this.frames=new f.View({visible:!1}),this.setElement(this.frames.$el),this.active=!1,this.buttonActive={id:"enable-scratchbook",icon:"fa-th",tooltip:u()("Enable/Disable Scratchbook"),toggle:!1,onclick:function(){t.active=!t.active,t.buttonActive.toggle=t.active,t.buttonActive.show_note=t.active,t.buttonActive.note_cls=t.active&&"fa fa-check",t.active||t.frames.hide()}},this.buttonLoad={id:"show-scratchbook",icon:"fa-eye",tooltip:u()("Show/Hide Scratchbook"),show_note:!0,visible:!1,note:"",onclick:function(e){t.frames.visible?t.frames.hide():t.frames.show()}},this.history_cache={}},getFrames:function(){return this.frames},beforeUnload:function(){var e="";return this.frames.length()>0&&(e="You opened ".concat(this.frames.length()," frame(s) which will be lost.")),e},addDataset:function(e){var t=this,n=null,i=Object(c.a)();if(i&&i.currHistoryPanel){var a=i.currHistoryPanel.collection.historyId;this.history_cache[a]={name:i.currHistoryPanel.model.get("name"),dataset_ids:[]},i.currHistoryPanel.collection.each((function(e){!e.get("deleted")&&e.get("visible")&&t.history_cache[a].dataset_ids.push(e.get("id"))}))}var o=function(e,n){if(e){var i=t.history_cache[e.get("history_id")];if(i&&i.dataset_ids){var a=i.dataset_ids,r=a.indexOf(e.get("id"));if(-1!==r&&r+n>=0&&r+n<a.length)return a[r+n]}}},s=function(e,i,a){var r=o(e,i);r?t._loadDataset(r,(function(e,t){n=e,a.model.set(t)})):a.model.trigger("change")};this._loadDataset(e,(function(e,i){n=e,t.add(r.default.extend({menu:[{icon:"fa fa-chevron-circle-left",tooltip:u()("Previous in History"),onclick:function(e){s(n,-1,e)},disabled:function(){return!o(n,-1)}},{icon:"fa fa-chevron-circle-right",tooltip:u()("Next in History"),onclick:function(e){s(n,1,e)},disabled:function(){return!o(n,1)}}]},i))}))},_loadDataset:function(e,t){var n=this,i=new p.a({id:e});a.a.when(i.fetch()).then((function(){var a=r.default.find(["tabular","interval"],(function(e){return-1!==i.get("data_type").indexOf(e)})),o=i.get("name"),s=n.history_cache[i.get("history_id")];s&&(o="".concat(s.name,": ").concat(o)),t(i,a?{title:o,url:null,content:Object(p.d)({model:new p.c(i.toJSON()),embedded:!0,height:"100%"}).$el}:{title:o,url:"".concat(Object(l.getAppRoot)(),"datasets/").concat(e,"/display/?preview=True"),content:null})}))},addTrackster:function(e){var t=this,n=new m.a.Visualization({id:e});a.a.when(n.fetch()).then((function(){var e=new _.a(Object(l.getAppRoot)()),i={title:n.get("name"),type:"other",content:function(t){var i={container:t,name:n.get("title"),id:n.id,dbkey:n.get("dbkey"),stand_alone:!1},a=n.get("latest_revision"),o=a.config.view.drawables;r.default.each(o,(function(e){e.dataset={hda_ldda:e.hda_ldda,id:e.dataset_id}})),e.create_visualization(i,a.config.viewport,a.config.view.drawables,a.config.bookmarks,!1)}};t.add(i)}))},add:function(e){if("_blank"==e.target)window.open(e.url);else if("_top"==e.target||"_parent"==e.target||"_self"==e.target)window.location=e.url;else if(!this.active||e.noscratchbook){var t=a()(window.parent.document).find("#galaxy_main");"galaxy_main"==e.target||"center"==e.target?0===t.length?window.location=this._build_url(e.url,{use_panels:!0}):t.attr("src",e.url):window.location=e.url}else e.url=this._build_url(e.url,{hide_panels:!0,hide_masthead:!0}),this.frames.add(e)},_build_url:function(e,t){if(e)return e+=-1==e.indexOf("?")?"?":"&",e+=a.a.param(t,!0)}}),v=n(11),y={UserQuotaMeter:s.a.View.extend(v.a.LoggableMixin).extend({_logNamespace:"user",options:{warnAtPercent:85,errorAtPercent:100,quotaUrl:"https://galaxyproject.org/support/account-quotas/"},initialize:function(e){this.log("".concat(this,".initialize:"),e),r.default.extend(this.options,e),this.listenTo(this.model,"change:quota_percent change:total_disk_usage",this.render)},update:function(e){return this.log("".concat(this," updating user data..."),e),this.model.loadFromApi(this.model.get("id"),e),this},isOverQuota:function(){return null!==this.model.get("quota_percent")&&this.model.get("quota_percent")>=this.options.errorAtPercent},_render_quota:function(){var e=this.model.toJSON(),t=e.quota_percent,n=a()(this._templateQuotaMeter(e)),i=n.find(".progress-bar");return this.isOverQuota()?(i.attr("class","progress-bar bg-danger"),n.find(".quota-meter-text").css("color","white"),this.trigger("quota:over",e)):t>=this.options.warnAtPercent?(i.attr("class","progress-bar bg-warning"),this.trigger("quota:under quota:under:approaching",e)):(i.attr("class","progress-bar bg-success"),this.trigger("quota:under quota:under:ok",e)),n},_render_usage:function(){var e=a()(this._templateUsage(this.model.toJSON()));return this.log("".concat(this,".rendering usage:"),e),e},render:function(){var e=null;return this.log("".concat(this,".model.quota_percent:"),this.model.get("quota_percent")),e=null===this.model.get("quota_percent")||void 0===this.model.get("quota_percent")?this._render_usage():this._render_quota(),this.$el.html(e),this.$el.find(".quota-meter-text").tooltip(),this},_templateQuotaMeter:function(e){var t=e.nice_total_disk_usage?'title="Using '.concat(e.nice_total_disk_usage,'. Click for details."'):"",n="".concat(u()("Using")," ").concat(e.quota_percent,"%"),i=this.options.quotaUrl;return'<div id="quota-meter" class="quota-meter progress">\n    <div class="progress-bar" style="width: '.concat(e.quota_percent,'%"></div>\n    <div class="quota-meter-text" data-placement="left" ').concat(t,'>\n        <a href="').concat(i,'" target="_blank">').concat(n,"</a>\n    </div>\n</div>")},_templateUsage:function(e){return['<div id="quota-meter" class="quota-meter" style="background-color: transparent">','<div class="quota-meter-text" data-placement="left" data-original-title="This value is recalculated when you log out." style="color: white">',e.nice_total_disk_usage?u()("Using ")+e.nice_total_disk_usage:"","</div>","</div>"].join("")},toString:function(){return"UserQuotaMeter(".concat(this.model,")")}})},b=n(652),w=n(654),k=n(653),x=n(8),S=n(613),C=n(614),M=n(651),T=n(493),j=n(611);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}x.default.use(S.a),x.default.use(C.a);var E={name:"MastheadItem",components:{BNavItem:M.a,BNavItemDropdown:T.a,BDropdownItem:j.a},props:{tab:{type:Object},activeTab:{type:String}},computed:{menu:function(){return this.tab.menu},popoverNote:function(){return'Please <a href="'.concat(Object(l.getAppRoot)(),'login">login or register</a> to use this feature.')},classes:function(){var e=this.tab.id==this.activeTab;return Object.fromEntries([["active",e],[this.tab.cls,!0]])},linkClasses:function(){return{"nav-icon":this.tab.icon,toggle:this.tab.toggle}},iconClasses:function(){return Object.fromEntries([["fa fa-fw",!0],[this.tab.icon,this.tab.icon]])},styles:function(){return{visibility:this.tab.visible?"visible":"hidden"}},galaxyIframe:function(){return document.getElementById("galaxy_main")}},mounted:function(){window.addEventListener("blur",this.hideDropdown)},destroyed:function(){window.removeEventListener("blur",this.hideDropdown)},methods:{hideDropdown:function(){this.$refs.dropdown&&this.$refs.dropdown.hide()},open:function(e,t){var n=this;if(e.onclick)return this.propogateClick(e,t);if(e.disabled)t.preventDefault(),this.$root.$emit("bv::hide::tooltip"),this.$root.$emit("bv::show::popover",e.id),setTimeout((function(){n.$root.$emit("bv::hide::popover",e.id)}),3e3);else if(!e.menu){t.preventDefault();var i=Object(c.a)();if("__use_router__"===e.target&&void 0!==i.page)i.page.router.executeUseRouter(this.formatUrl(e.url));else try{i.frame.add(D(D({},e),{},{url:this.formatUrl(e.url)}))}catch(e){console.warn("Missing frame element on galaxy instance",e)}}},propogateClick:function(e,t){t.preventDefault(),e.onclick(),"enable-scratchbook"===e.id&&this.$emit("updateScratchbookTab",e)},formatUrl:function(e){return"string"==typeof e&&-1===e.indexOf("//")&&"/"!=e.charAt(0)?Object(l.getAppRoot)()+e:e}}},A=n(5),I=Object(A.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.menu?n("b-nav-item-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:e.tab.id,content:e.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],ref:"dropdown",class:e.classes,style:e.styles,attrs:{text:e.tab.title,id:e.tab.id,href:"#",title:e.tab.tooltip},on:{show:function(t){return e.open(e.tab,t)}}},[e._l(e.tab.menu,(function(t,i){return[t.divider?n("div",{key:"divider-"+i,staticClass:"dropdown-divider"}):!0!==t.hidden?n("b-dropdown-item",{key:"item-"+i,attrs:{href:e.formatUrl(t.url),target:t.target||"_parent",role:"menuitem",disabled:!0===t.disabled},on:{click:function(n){return e.open(t,n)}}},[e._v("\n            "+e._s(t.title)+"\n        ")]):e._e()]}))],2):n("b-nav-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:e.tab.id,content:e.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],class:e.classes,style:e.styles,attrs:{id:e.tab.id,href:e.formatUrl(e.tab.url),target:e.tab.target||"_parent",role:"menuitem","link-classes":e.linkClasses,title:e.tab.tooltip},on:{click:function(t){return e.open(e.tab,t)}}},[e.tab.icon?[n("span",{class:e.iconClasses}),e._v(" "),e.tab.show_note?n("span",{class:["nav-note",e.tab.note_cls]},[e._v(e._s(e.tab.note))]):e._e()]:[e._v("\n        "+e._s(e.tab.title)+"\n    ")]],2)}),[],!1,null,null,null).exports,P=n(226),Y=n(113),R=n(10);var H={name:"Masthead",props:{displayGalaxyBrand:{type:Boolean,default:!0},brand:{type:String,default:null},brandLink:{type:String,default:null},brandImage:{type:String,default:null},brandImageSecondary:{type:String,default:null},initialActiveTab:{type:String,default:null},mastheadState:{type:Object,default:null},menuOptions:{type:Object,default:null}},components:{BNavbar:b.a,BNavbarBrand:w.a,BNavbarNav:k.a,MastheadItem:I},methods:{addItem:function(e){this.tabs.push(e)},highlight:function(e){this.activeTab=e},_tabToJson:function(e){var t;return t=e.toJSON instanceof Function?e.toJSON():e,Object.assign({},{visible:!0,target:"_parent"},t)},_reflectScratchbookFrames:function(){var e=this.mastheadState.frame.getFrames(),t=this.mastheadState.frame.buttonLoad;t.toggle=e.visible,t.icon=e.visible?"fa-eye":"fa-eye-slash"}},data:function(){return{activeTab:null,baseTabs:[],extensionTabs:[]}},computed:{brandTitle:function(){var e=this.displayGalaxyBrand?"Galaxy ":"";return this.brand&&(e+=this.brand),e},tabs:function(){var e=[this.mastheadState.frame.buttonActive,this.mastheadState.frame.buttonLoad],t=[].concat(this.baseTabs,this.extensionTabs,e);return t.map(this._tabToJson)}},created:function(){var e;this.activeTab=this.initialActiveTab,this.baseTabs=Object(P.a)(this.menuOptions),e=this.extensionTabs,Y.a.load({type:"masthead",callback:function(t){t.each((function(t){var n=t.toJSON();if(n.activate){var i={id:n.id,icon:n.config.icon,url:n.config.url,tooltip:n.config.tooltip,onclick:n.config.function&&new Function(n.config.function),visible:!0,target:"_parent"};e.push(i),R.a.appendScriptStyle(n)}}))}})},mounted:function(){var e=this;this.mastheadState.quotaMeter.setElement(this.$refs["quota-meter-container"]),this.mastheadState.quotaMeter.render();var t=this.mastheadState.frame.getFrames();t.on("add remove",(function(){var n=e.mastheadState.frame.buttonLoad;n.note=String(t.length()),n.visible=t.length()>0,n.show_note=t.length()>0})).on("show hide",(function(){e._reflectScratchbookFrames()}))}},N=Object(A.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{staticClass:"justify-content-center",attrs:{id:"masthead",type:"dark",role:"navigation","aria-label":"Main"}},[n("b-navbar-brand",{attrs:{href:e.brandLink,"aria-label":"homepage"}},[n("img",{staticClass:"navbar-brand-image",attrs:{alt:"logo",src:e.brandImage}}),e._v(" "),e.brandImageSecondary?n("img",{staticClass:"navbar-brand-image",attrs:{alt:"logo",src:e.brandImageSecondary}}):e._e(),e._v(" "),n("span",{staticClass:"navbar-brand-title"},[e._v(e._s(e.brandTitle))])]),e._v(" "),n("b-navbar-nav",e._l(e.tabs,(function(t,i){return n("masthead-item",{directives:[{name:"show",rawName:"v-show",value:!(void 0!==t.hidden&&t.hidden),expression:"!(tab.hidden === undefined ? false : tab.hidden)"}],key:"tab-"+i,attrs:{tab:t,"active-tab":e.activeTab}})})),1),e._v(" "),n("div",{ref:"quota-meter-container",staticClass:"quota-meter-container"})],1)}),[],!1,null,null,null).exports,$=n(38);function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var W=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;F(this,e),(n=n||Object(c.a)()).frame=this.frame=new g,n.quotaMeter=this.quotaMeter=new y.UserQuotaMeter({model:n.user,quotaUrl:n.config.quota_url}),a()(window).on("click",(function(e){var t=a()(e.target).closest("a[download]");1==t.length&&(0===a()("iframe[id=download]").length&&a()("body").append(a()("<iframe/>").attr("id","download").hide()),a()("iframe[id=download]").attr("src",t.attr("href")),e.preventDefault())})).on("beforeunload",(function(){var e=t.frame.beforeUnload();if(e)return e}))};function z(e,t,n){return Object($.a)(N)({el:e,mastheadState:n,displayGalaxyBrand:t.display_galaxy_brand,brand:t.brand,brandLink:t.logo_url,brandImage:t.logo_src,brandImageSecondary:t.logo_src_secondary,menuOptions:t},e)}},,function(e,t,n){"use strict";var i=n(0),a=n.n(i).a;a.fn.make_text_editable=function(e){var t="num_cols"in e?e.num_cols:30,n="num_rows"in e?e.num_rows:4,i="use_textarea"in e&&e.use_textarea,r="on_finish"in e?e.on_finish:null,o="help_text"in e?e.help_text:null,s=a(this);return s.addClass("editable-text").click((function(o){if(!(a(this).children(":input").length>0)){s.removeClass("editable-text");var l,c,d=function(e){s.find(":input").remove(),""!==e?s.text(e):s.html("<br>"),s.addClass("editable-text"),r&&r(e)},u="cur_text"in e?e.cur_text:s.text();i?(l=a("<textarea/>").attr({rows:n,cols:t}).text(a.trim(u)).keyup((function(e){27===e.keyCode&&d(u)})),c=a("<button/>").addClass("btn-sm float-right").text("Done").click((function(){return d(l.val()),!1}))):l=a("<input type='text'/>").attr({value:a.trim(u),size:t}).blur((function(e){var t=a(e.currentTarget).val();d(t)})).keyup((function(e){27===e.keyCode?d(u):13===e.keyCode&&a(e.currentTarget).trigger("blur"),e.stopPropagation()})),s.text(""),s.append(l),c&&s.append(c),l.focus(),l.select(),o.stopPropagation()}})),o&&s.attr("title",o).tooltip(),s}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(10),c=n(138),d=n(66),u=s.a.View.extend({initialize:function(e){var t=this;this.data=[],this.data2=[],this.model=e&&e.model||new s.a.Model({id:l.a.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,readonly:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(e),this.on("change",(function(){t.model.get("onchange")&&t.model.get("onchange")(t.value())})),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var e=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id","".concat(this.model.get("id"),"_select")).prop("multiple",this.model.get("multiple")).on("change",(function(){e.value(e._getValue()),e.trigger("change")})),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var e=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=a()("<select/>")).append(this.$dropdown=a()("<div/>")).append(this.$resize=a()("<div/>").append(this.$resize_icon=a()("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",(function(t){var n=t.pageY,i=e.$select.height();e.minHeight=e.minHeight||i,a()("#dd-helper").show().on("mousemove",(function(t){e.$select.height(Math.max(i+(t.pageY-n),e.minHeight))})).on("mouseup mouseleave",(function(){a()("#dd-helper").hide().off()}))}))):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var e=this;this.$el.append(this.$select=a()("<div/>")).append(this.$dropdown=a()("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",(function(){e.$select.select2&&e.$select.select2("open")})),this.all_button=null,!this.model.get("multiple")||this.model.get("individual")||this.model.get("readonly")||(this.all_button=new d.a.ButtonCheck({onclick:function(){var t=[];0!==e.all_button.value()&&r.default.each(e.model.get("data"),(function(e){t.push(e.value)})),e.value(t),e.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(e,t){return!e||""===e||String(t).toUpperCase().indexOf(e.toUpperCase())>=0},_changeData:function(){var e=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:this.model.get("empty_text")}),r.default.each(this.model.get("data"),(function(t){e.data.push(t)})),0===this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],this.data2index={},r.default.each(this.data,(function(t,n){var i={order:n,id:t.value,text:t.label,tags:t.tags};e.data2.push(i),e.data2index[i.id]=i})),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:this.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(t){e.matched_tags={};var n=e.model.get("pagesize"),i=r.default.filter(e.data2,(function(n){var i=!1;return r.default.each(n.tags,(function(n){e._match(t.term,n)&&(i=e.matched_tags[n]=!0)})),i||e._match(t.term,n.text)}));t.callback({results:i.slice((t.page-1)*n,t.page*n),more:i.length>=t.page*n})},formatResult:function(t){var n="",i=r.default.filter(t.tags,(function(t){return Object.prototype.hasOwnProperty.call(e.matched_tags,t)}));return i.length>5&&(n='&nbsp;<div class="label label-warning">'.concat(i.length-5," more tags</div>")),"\n                    ".concat(r.default.escape(t.text),"\n                    <div>\n                        ").concat(i.slice(0,5).reduce((function(e,t){var n=Object(c.a)(t),i=0===t.indexOf("name:"),a=i?"#".concat(t.slice(5)):t,o=i?'style="background-color: '.concat(n.primary,"; color: ").concat(n.contrasting,"; border: 1px solid ").concat(n.darker,'"'):"";return"".concat(e,"&nbsp;<div ").concat(o,' class="badge badge-primary badge-tags">').concat(r.default.escape(a),"</div>")}),""),"\n                        ").concat(n,"\n                   </div>")}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),r.default.each(this.data,(function(t){e.$select.append(a()("<option/>").attr("value",t.value).html(r.default.escape(t.label)))}))),this.model.set("disabled",this.model.get("readonly")||0===this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var e=this._getValue();this.all_button.value(Array.isArray(e)?e.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(e){return void 0!==e&&this.model.set("value",e),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(e){return r.default.findWhere(this.data,{value:e})},text:function(){var e=this._getValue(),t=this.exists(Array.isArray(e)?e[0]:e);return t?t.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(e,t){r.default.each(this.model.get("data"),(function(t){t.keep&&!r.default.findWhere(e,{value:t.value})&&e.push(t)})),t&&e&&e.sort(t),this.model.set("data",e)},update:function(e){this.model.set("data",e.data)},setOnChange:function(e){this.model.set("onchange",e)},length:function(){return Array.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(e){var t=this;if(null==e&&(e="__null__"),this.model.get("multiple")?e=Array.isArray(e)?e:[e]:Array.isArray(e)&&(e=e.length>0?e[0]:"__null__"),this.model.get("searchable")){if(Array.isArray(e)){var n=[];r.default.each(e,(function(e){var i=t.data2index[e];i&&n.push(i)})),e=n}else e=this.data2index[e];this.$select.select2("data",e)}else this.$select.val(e)},_getValue:function(){var e=null;if(this.model.get("searchable")){var t=this.$select.select2("data");t&&(Array.isArray(t)?(e=[],t.sort((function(e,t){return e.order-t.order})),r.default.each(t,(function(t){e.push(t.id)}))):e=t.id)}else e=this.$select.val();return l.a.isEmpty(e)?null:e}});t.a={View:u}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(171);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,i,a=s(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"active",get:function(){return!this.deleted&&!this.purged}},{key:"hidItems",get:function(){return parseInt(this.hid_counter)-1}},{key:"totalItems",get:function(){var e=this;return Object.keys(this.contents_active).reduce((function(t,n){var i=e.contents_active[n];return t+parseInt(i)}),0)}},{key:"statusDescription",get:function(){var e=[];return this.shared&&e.push("Shared"),this.importable&&e.push("Accessible"),this.published&&e.push("Published"),this.isDeleted&&e.push("Deleted"),this.purged&&e.push("Purged"),e.join(", ")}}])&&r(t.prototype,n),i&&r(t,i),l}(Object(i.b)(i.a));d.equals=function(e,t){return JSON.stringify(e)==JSON.stringify(t)}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=a.a;function o(e,t){var n=this;return t=a.a.extend({cover:!1},t||{}),n.show=function(i,a,o){var s,l;return i=i||"loading...",a=a||"fast",e.parent().find(".loading-indicator").remove(),n.$indicator=(s=['<div class="loading-indicator">','<div class="loading-indicator-text">','<span class="fa fa-spinner fa-spin fa-lg"></span>','<span class="loading-indicator-message">loading...</span>',"</div>","</div>"].join("\n"),l=r(s).hide().css(t.css||{position:"fixed"}),l.children(".loading-indicator-text"),t.cover?(l.css({"z-index":2,top:e.css("top"),bottom:e.css("bottom"),left:e.css("left"),right:e.css("right"),opacity:.5,"background-color":"white","text-align":"center"}),l.children(".loading-indicator-text").css({"margin-top":"20px"})):l.children(".loading-indicator-text").css({margin:"12px 0px 0px 10px",opacity:"0.85",color:"grey"}).children(".loading-indicator-message").css({margin:"0px 8px 0px 0px","font-style":"italic"}),l).insertBefore(e),n.message(i),n.$indicator.fadeIn(a,o),n},n.message=function(e){n.$indicator.find("i").text(e)},n.hide=function(e,t){return e=e||"fast",n.$indicator&&n.$indicator.length?n.$indicator.fadeOut(e,(function(){n.$indicator.remove(),t&&t()})):t&&t(),n},n}t.a={LoadingIndicator:o,markViewAsLoading:function(e){e.setElement(r('<div><div class="loading"></div></div>')),new o(e.$(".loading")).show()}}},function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(105);function s(e,t,i,s){var l;l="datasets"==i?a()("Build Rules for Uploading Datasets"):"collection_contents"==t?a()("Build Rules for Applying to Existing Collection"):"datasets"==t||"library_datasets"==t?a()("Build Rules for Creating Collection(s)"):a()("Build Rules for Uploading Collections"),s.title=l;var c=Object(o.a)(s),d=c.promise,u=c.showEl;return Promise.all([n.e(0),n.e(1),n.e(10),n.e(9)]).then(n.bind(null,802)).then((function(n){var a=r.default.extend(n.default),o=document.createElement("div");return u(o),new a({propsData:{initialElements:e,elementsType:t,importType:i,ftpUploadSite:s.ftpUploadSite,creationFn:s.creationFn,oncancel:s.oncancel,oncreate:s.oncreate,defaultHideSourceItems:s.defaultHideSourceItems,saveRulesFn:s.saveRulesFn,initialRules:s.initialRules}}).$mount(o),d}))}t.a={ruleBasedCollectionCreatorModal:s,createCollectionViaRules:function(e,t){var n,i,a,r=e.selectionType,o=!t;if(r)if(e.elements)i=e.selectionType,a=e.dataType||"collections",n=e.elements;else{var l=RegExp(/[^\s]/),c=e.content.split(/[\n\r]/).filter((function(e){return e.length>0&&l.exec(e)})),d=!1;if(c.length>0)c[0].indexOf("\t")>=0&&(d=!0);var u=d?/\t/:/\s+/;n=c.map((function(e){return e.split(u)})),i=e.selectionType,a=e.dataType||"collections"}else n=e.toJSON(),i="datasets",a="collections";return s(n,i,a,{ftpUploadSite:e.ftpUploadSite,defaultHideSourceItems:t,creationFn:function(t,n,i,a){return e.createHDCA(t,n,i,a,o)}})}}},function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(24),d=n(11),u=n(2),h=n.n(u);function f(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}function p(){var e=f();return!!e&&document[e]}var m={change_favicon:function(e){var t=document.createElement("link");t.id="tabicon",t.setAttribute("rel","shortcut icon"),document.querySelector("head").appendChild(t),t.setAttribute("type","image/png"),t.setAttribute("href",e)},hidden_permit:f,is_hidden:p,hidden_count:function(e){p()&&(document.title=1===e?"Galaxy (1 job completed)":"Galaxy ("+e+" jobs completed)")}},_=1,g=d.a.SearchableModelMixin,v=s.a.Model.extend(d.a.LoggableMixin).extend(d.a.mixin(g,{_logNamespace:"dataset",defaults:{state:c.a.NEW,deleted:!1,purged:!1,name:"(unnamed dataset)",accessible:!0,data_type:"",file_ext:"",file_size:0,meta_files:[],misc_blurb:"",misc_info:"",tags:[]},initialize:function(e,t){this.debug("".concat(this,"(Dataset).initialize"),e,t),//!! this state is not in trans.app.model.Dataset.states - set it here -
this.get("accessible")||this.set("state",c.a.NOT_VIEWABLE),this.urls=this._generateUrls(),this._setUpListeners()},_getDatasetId:function(){return this.get("id")},_generateUrls:function(){var e=this._getDatasetId();if(!e)return{};var t={purge:"datasets/".concat(e,"/purge_async"),display:"datasets/".concat(e,"/display/?preview=True"),edit:"datasets/edit?dataset_id=".concat(e),download:"datasets/".concat(e,"/display").concat(this._downloadQueryParameters()),report_error:"dataset/errors?id=".concat(e),rerun:"tool_runner/rerun?id=".concat(e),show_params:"datasets/".concat(e,"/show_params"),visualization:"visualization",meta_download:"dataset/get_metadata_file?hda_id=".concat(e,"&metadata_name=")};return i.default.each(t,(function(e,n){t[n]=Object(l.getAppRoot)()+e})),this.urls=t,t},_downloadQueryParameters:function(){return"?to_ext=".concat(this.get("file_ext"))},_setUpListeners:function(){this.on("change:state",(function(e,t){this.log("".concat(this," has changed state:"),e,t),this.inReadyState()&&(this.trigger("state:ready",e,t,this.previous("state")),"discarded"!=t&&("ok"===t?(new Notification("Job complete: ".concat(this.get("name")),{icon:"static/favicon.ico"}),m.is_hidden()&&(m.hidden_count(_),_++)):"error"==t&&(new Notification("Job failure: ".concat(this.get("name")),{icon:"static/erricon.ico"}),m.is_hidden()&&"granted"==Notification.permission&&m.change_favicon("static/erricon.ico"))))})),this.on("change:id change:file_ext",(function(e){this._generateUrls()}))},toJSON:function(){var e=s.a.Model.prototype.toJSON.call(this);return i.default.extend(e,{urls:this.urls})},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},inReadyState:function(){var e=i.default.contains(c.a.READY_STATES,this.get("state"));return this.isDeletedOrPurged()||e},hasDetails:function(){return!this.get("accessible")||this.has("annotation")},hasData:function(){return this.get("file_size")>0},fetch:function(e){var t=this;return s.a.Model.prototype.fetch.call(this,e).always((function(){t._generateUrls()}))},parse:function(e,t){var n=s.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},save:function(e,t){return(t=t||{}).wait=!!i.default.isUndefined(t.wait)||t.wait,s.a.Model.prototype.save.call(this,e,t)},delete:function(e){return this.get("deleted")?r.a.when():this.save({deleted:!0},e)},undelete:function(e){return!this.get("deleted")||this.get("purged")?r.a.when():this.save({deleted:!1},e)},purge:function(e){if(this.get("purged"))return r.a.when();(e=e||{}).url=this.urls.purge;var t=this,n=r.a.ajax(e);return n.done((function(e,n,i){t.set({deleted:!0,purged:!0})})),n.fail((function(n,i,a){var r=h()("Unable to purge dataset");n.responseJSON&&n.responseJSON.error?r=n.responseJSON.error:-1!==n.responseText.indexOf("Removal of datasets by users is not allowed in this Galaxy instance")&&(r="Removal of datasets by users is not allowed in this Galaxy instance"),n.responseText=r,t.trigger("error",t,n,e,h()(r),{error:r})})),n},searchAttributes:["name","file_ext","genome_build","misc_blurb","misc_info","annotation","tags"],searchAliases:{title:"name",format:"file_ext",database:"genome_build",blurb:"misc_blurb",description:"misc_blurb",info:"misc_info",tag:"tags"},toString:function(){var e=this.get("id")||"";return this.get("name")&&(e='"'.concat(this.get("name"),'",').concat(e)),"Dataset(".concat(e,")")}})),y=s.a.Collection.extend(d.a.LoggableMixin).extend({_logNamespace:"dataset",model:v,urlRoot:"".concat(Object(l.getAppRoot)(),"api/datasets"),url:function(){return this.urlRoot},ids:function(){return this.map((function(e){return e.get("id")}))},notReady:function(){return this.filter((function(e){return!e.inReadyState()}))},haveDetails:function(){return this.all((function(e){return e.hasDetails()}))},ajaxQueue:function(e,t){var n=r.a.Deferred(),i=this.length,a=[];if(!i)return n.resolve([]),n;var o=this.chain().reverse().map((function(r,s){return function(){var l=e.call(r,t);l.done((function(e){n.notify({curr:s,total:i,response:e,model:r})})),l.always((function(e){a.push(e),o.length?o.shift()():n.resolve(a)}))}})).value();return o.shift()(),n},matches:function(e){return this.filter((function(t){return t.matches(e)}))},toString:function(){return["DatasetAssociationCollection(",this.length,")"].join("")}});window.addEventListener("focus",(function(){var e=document.getElementById("tabicon");e&&-1!=e.href.search("erricon")&&m.change_favicon("static/favicon.ico"),document.title="Galaxy",_=1}));t.a={DatasetAssociation:v,DatasetAssociationCollection:y}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return M}));var i=n(7),a=n.n(i),r=n(6),o=n(21),s=n(3),l=n(143),c=n(71),d=n(633),u=n(152);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,e);var t,n,i,r=_(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,e)).cancel=null,n.completed=!1,a.a.get(t,{cancelToken:new a.a.CancelToken((function(e){n.cancel=e}))}).then((function(t){e.next(t.data),n.completed=!0,e.complete()})).catch((function(t){n.completed=!0,e.error(t)})),n}return t=o,(n=[{key:"unsubscribe",value:function(){p(v(o.prototype),"unsubscribe",this).call(this),!1===this.completed&&null!==this.cancel&&(this.cancel(),this.completed=!0)}}])&&f(t.prototype,n),i&&f(t,i),o}(n(62).a);function b(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){b(r,i,a,o,s,"next",e)}function s(e){b(r,i,a,o,s,"throw",e)}o(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function S(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,e),this.root=t.root||Object(s.getAppRoot)()}var t,n,i,l,c,d,u;return S(e,[{key:"copyWorkflow",value:(u=w(regeneratorRuntime.mark((function e(t){var n,i,s,l,c,d,u,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(r.a)(),i="".concat(this.root,"api/workflows/").concat(t.id,"/download"),e.prev=2,e.next=5,a.a.get(i);case 5:return s=e.sent,l=s.data,c=t.owner,d="Copy of ".concat(t.name),c!=n.user.attributes.username&&(d+=" shared by user ".concat(c)),l.name=d,u="".concat(this.root,"api/workflows"),e.next=14,a.a.post(u,{workflow:l});case 14:return h=e.sent,f=h.data,this._addAttributes(f),e.abrupt("return",f);case 20:e.prev=20,e.t0=e.catch(2),Object(o.b)(e.t0);case 23:case"end":return e.stop()}}),e,this,[[2,20]])}))),function(e){return u.apply(this,arguments)})},{key:"deleteWorkflow",value:(d=w(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/workflows/").concat(t),e.prev=1,e.next=4,a.a.delete(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(o.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return d.apply(this,arguments)})},{key:"getWorkflows",value:(c=w(regeneratorRuntime.mark((function e(){var t,n,i,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.root,"api/workflows"),e.prev=1,e.next=4,a.a.get(t);case 4:return n=e.sent,(i=n.data).forEach((function(e){r._addAttributes(e)})),e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(1),Object(o.b)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return c.apply(this,arguments)})},{key:"updateWorkflow",value:(l=w(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(this.root,"api/workflows/").concat(t),e.prev=1,e.next=4,a.a.put(i,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),Object(o.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e,t){return l.apply(this,arguments)})},{key:"_addAttributes",value:function(e){var t=Object(r.a)();if(e.shared=e.owner!==t.user.attributes.username,e.description="",e.annotations&&e.annotations.length>0){var n=e.annotations[0].trim();n&&(e.description=n)}}},{key:"getTrsServers",value:(i=w(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.root,"api/trs_consume/servers"),e.prev=1,e.next=4,a.a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),Object(o.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return i.apply(this,arguments)})},{key:"getTrsTool",value:(n=w(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=btoa(n),i="".concat(this.root,"api/trs_consume/").concat(t,"/tools/").concat(n,"?tool_id_b64_encoded=true"),e.prev=2,e.next=5,a.a.get(i);case 5:return r=e.sent,e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e.catch(2),Object(o.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t){return n.apply(this,arguments)})},{key:"importTrsTool",value:(t=w(regeneratorRuntime.mark((function e(t,n,i){var r,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={archive_source:"trs_tool",trs_server:t,trs_tool_id:n,trs_version_id:i},s="".concat(this.root,"api/workflows"),e.prev=2,e.next=5,a.a.post(s,r);case 5:return l=e.sent,e.abrupt("return",l.data);case 9:e.prev=9,e.t0=e.catch(2),Object(o.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,n,i){return t.apply(this,arguments)})}]),e}(),M=function(){function e(t){var n=t.debounceInterval,i=void 0===n?1e3:n;k(this,e),this.debounceInterval=i,this._searchText=new l.a,this._trsServer=null}return S(e,[{key:"searchResults",get:function(){var e=this;return this._searchText.pipe(Object(d.a)(this.debounceInterval),Object(u.a)((function(t){return[t,new c.a((function(n){return new y(n,"".concat(Object(s.getAppRoot)(),"api/trs_search?query=").concat(t,"&trs_server=").concat(e._trsServer))}))]})))}},{key:"searchQuery",set:function(e){this._searchText.next(e)}},{key:"trsServer",set:function(e){this._trsServer=e}}]),e}()},,,function(e,t,n){"use strict";var i,a=n(0),r=n.n(a),o=n(1),s=n(142),l=n(200),c=n(11),d=n(2),u=n.n(d),h=s.a.DatasetListItemEdit,f=h.extend({className:"".concat(h.prototype.className," history-content"),_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):this.model.has("rerunnable")?r.a.when():this.model.fetch({silent:!0,data:{keys:["rerunnable","creating_job"].join(",")}})},events:o.default.extend(o.default.clone(h.prototype.events),{"click .unhide-link":function(e){return this.model.unhide(),!1}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAListItemEdit(".concat(e,")")}});f.prototype.templates=(i=o.default.extend({},h.prototype.templates.warnings,{hidden:c.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',u()("This dataset has been hidden"),'<br /><a class="unhide-link" a href="javascript:void(0);">',u()("Unhide it"),"</a>","</div>","<% } %>"],"dataset")}),o.default.extend({},h.prototype.templates,{titleBar:l.a.HDAListItemView.prototype.templates.titleBar,warnings:i})),t.a={HDAListItemEdit:f}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(7),a=n.n(i),r=n(21);function o(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function s(e){o(r,i,a,s,l,"next",e)}function l(e){o(r,i,a,s,l,"throw",e)}s(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root}var t,n,i,o,c,d,u,h,f;return t=e,(n=[{key:"getDatasets",value:(f=s(regeneratorRuntime.mark((function e(){var t,n,i,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n="",t.sortBy&&(i=t.sortDesc?"-dsc":"-asc",n+="order=".concat(t.sortBy).concat(i,"&")),t.limit&&(n+="limit=".concat(t.limit,"&")),t.offset&&(n+="offset=".concat(t.offset,"&")),t.query&&(n+="q=name-contains&qv=".concat(t.query,"&")),r="".concat(this.root,"api/datasets?").concat(n),e.prev=7,e.next=10,a.a.get(r);case 10:return o=e.sent,s=o.data,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(7),this._errorMessage(e.t0);case 18:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(){return f.apply(this,arguments)})},{key:"copyDataset",value:(h=s(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(this.root,"api/histories/").concat(n,"/contents"),e.prev=1,e.next=4,a.a.post(i,{type:"dataset",source:"hda",content:t});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),this._errorMessage(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e,t){return h.apply(this,arguments)})},{key:"setHistory",value:(u=s(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"history/set_as_current?id=").concat(t),e.prev=1,e.next=4,a.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),this._errorMessage(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return u.apply(this,arguments)})},{key:"updateTags",value:(d=s(regeneratorRuntime.mark((function e(t,n,i){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(this.root,"api/tags"),e.prev=1,e.next=4,a.a.put(r,{item_id:t,item_class:n,item_tags:i});case 4:return o=e.sent,e.abrupt("return",o.data);case 8:e.prev=8,e.t0=e.catch(1),this._errorMessage(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e,t,n){return d.apply(this,arguments)})},{key:"getCompositeDatasetContentFiles",value:(c=s(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/histories/").concat(t,"/contents/").concat(t,"/extra_files"),e.prev=1,e.next=4,a.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(r.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return c.apply(this,arguments)})},{key:"getCompositeDatasetLink",value:function(e,t){return"".concat(this.root,"api/histories/").concat(e,"/contents/").concat(e,"/display?filename=").concat(t)}},{key:"getCompositeDatasetInfo",value:(o=s(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/histories/").concat(t,"/contents/").concat(t),e.prev=1,e.next=4,a.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(r.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return o.apply(this,arguments)})},{key:"_errorMessage",value:function(e){var t="Request failed.";throw e.response&&(t=e.response.data.err_msg||"".concat(e.response.statusText," (").concat(e.response.status,")")),t}}])&&l(t.prototype,n),i&&l(t,i),e}()},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o).a.View.extend({initialize:function(e,t){var n=this;this.$button=e,this.$button.length||(this.$button=a()("<div/>")),this.options=t||[],this.$button.data("popupmenu",this),this.$button.click((function(e){return a()(".popmenu-wrapper").remove(),n._renderAndShow(e),!1}))},_renderAndShow:function(e){this.render(),this.$el.appendTo("body").css(this._getShownPosition(e)).show(),this._setUpCloseBehavior()},render:function(){var e=this;return this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length&&this.$(".popupmenu-option").each((function(t,n){var i=e.options[t];i.func&&a()(n).click((function(t){i.func.call(e,t,i),t.preventDefault()}))})),this},template:function(e,t){return'<div id="'.concat(e,'-menu" class="dropdown-menu">\n                    ').concat(this._templateOptions(t),"\n                </div>")},_templateOptions:function(e){return e.length?r.default.map(e,(function(e){if(e.divider)return'<div class="popupmenu-option dropdown-divider"/>';if(e.header)return'<div class="popupmenu-option dropdown-header">'.concat(e.html,"</div>");var t=e.href||"javascript:void(0);",n=e.target?'target="'.concat(e.target,'"'):"",i=e.checked?'<span class="fa fa-check mr-1"/>':"";return'<a class="popupmenu-option dropdown-item" href="'.concat(t,'" ').concat(n,">").concat(i).concat(e.html,"</a>")})).join(""):'<div class="dropdown-header">(no options)</div>'},_getShownPosition:function(e){var t=this.$el.width(),n=e.pageX-t/2;return n=Math.min(n,a()(document).scrollLeft()+a()(window).width()-t-5),n=Math.max(n,a()(document).scrollLeft()+5),{top:e.pageY,left:n}},_setUpCloseBehavior:function(){var e=this,t=function(t){if(!t.target.classList.contains("dropdown-header")){a()(document).off("click.close_popup");try{window&&window.parent!==window?a()(window.parent.document).off("click.close_popup"):a()("iframe#galaxy_main").contents().off("click.close_popup")}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}e.remove()}};a()("html").on("click.close_popup",t);try{window&&window.parent!==window?a()(window.parent.document).find("html").on("click.close_popup",t):a()("iframe#galaxy_main").contents().on("click.close_popup",t)}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}},addItem:function(e,t){return t=t>=0?t:this.options.length,this.options.splice(t,0,e),this},removeItem:function(e){return e>=0&&this.options.splice(e,1),this},findIndexByHtml:function(e){for(var t=0;t<this.options.length;t++)if(r.default.has(this.options[t],"html")&&this.options[t].html===e)return t;return null},findItemByHtml:function(e){return this.options[this.findIndexByHtml(e)]},toString:function(){return"PopupMenu"}});s.create=function(e,t){return new s(e,t)},t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=o.a.View.extend({initialize:function(e){this.collection=new o.a.Collection,this.model=e&&e.model||new o.a.Model({onchange:null,visible:!0}).set(e),this.setElement(a()(this._template())),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$el.on("click",(function(){a()(".tooltip").hide()})),this.render(),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"add",this._add,this),this.listenTo(this.collection,"remove",this._remove,this),this.listenTo(this.collection,"change",this._change,this),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add remove reset",this.render,this)},render:function(){var e=this.model.get("current");(e=this.$("#".concat(e)).length>0?e:this.first())&&(this.$nav.find(".nav-link.active").removeClass("active"),this.$content.children().removeClass("active"),this.$("#tab-".concat(e," .nav-link")).addClass("active"),this.$("#".concat(e)).addClass("active")),this.$el[this.model.get("visible")?"fadeIn":"fadeOut"]("fast"),this.$nav[this.size()>1?"show":"hide"]()},current:function(){return this.model.get("current")},show:function(e){e&&(this.model.set({current:e,visible:!0}),this.model.get("onchange")&&this.model.get("onchange")(e))},hide:function(){this.model.set("visible",!1)},first:function(){var e=this.collection.first();return e&&e.id},size:function(){return this.collection.length},add:function(e){this.collection.add(e)},del:function(e){this.collection.remove(e)},delAll:function(){this.collection.reset()},showTab:function(e){this.collection.get(e).set("hidden",!1)},hideTab:function(e){this.collection.get(e).set("hidden",!0)},_add:function(e){var t=this,n=e.attributes;this.$content.append(a()("<div/>").attr("id",n.id).addClass("tab-pane").append(n.$el)),this.$nav.append(a()(this._template_tab(n)).show().tooltip({title:n.tooltip||"",placement:"bottom",container:t.$el}).on("click",(function(e){e.preventDefault(),t.show(n.id)}))),1==this.size()&&this.show(n.id)},_remove:function(e){this.$("#tab-".concat(e.id)).remove(),this.$("#".concat(e.id)).remove()},_reset:function(){this.$nav.empty(),this.$content.empty()},_change:function(e){this.$("#tab-".concat(e.id))[e.get("hidden")?"hide":"show"]()},_template:function(){return a()("<div/>").addClass("tabbable tabs-left").append(a()("<ul/>").attr("style","display: flex").addClass("tab-navigation nav nav-tabs")).append(a()("<div/>").addClass("tab-content"))},_template_tab:function(e){var t=a()("<li/>").addClass("nav-item").attr("id","tab-".concat(e.id)).append(a()("<a/>").addClass("nav-link").attr("id","tab-title-link-".concat(e.id)).attr("href","javascript:void(0);")),n=t.find("a");return e.icon&&n.append(a()("<i/>").addClass("fa").addClass(e.icon)),e.title&&n.append(a()("<span/>").attr("id","tab-title-text-".concat(e.id)).addClass("tab-title-text ml-1").append(e.title)),t}});t.a={View:s}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(10),l=n(6);t.a=o.a.Model.extend({initialize:function(){this.active={},this.last=null},execute:function(e){var t=this,n=s.a.uid(),i=e.length>0,r=Object(l.a)();this.active[n]=!0;var o=a.a.Deferred();o.promise().always((function(){delete t.active[n],i&&r.emit.debug("deferred::execute()","".concat(this.state().charAt(0).toUpperCase()+this.state().slice(1)," ").concat(n))})),a.a.when(this.last).always((function(){t.active[n]?(i&&r.emit.debug("deferred::execute()","Running ".concat(n)),e(o),!i&&o.resolve()):o.reject()})),this.last=o.promise()},reset:function(){var e=Object(l.a)();for(var t in e.emit.debug("deferred::execute()","Reset"),this.active)this.active[t]=!1},ready:function(){return a.a.isEmptyObject(this.active)}})},function(e,t,n){"use strict";var i=n(8),a=n(14),r=n(72);i.default.use(a.a);var o={name:"Tool",props:{tool:{type:Object,required:!0},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},hideName:{type:Boolean,default:!1},toolKey:{type:String,default:""}},computed:{targetClass:function(){return this.toolKey?"tool-menu-item-".concat(this.tool[this.toolKey]):null}},methods:{onClick:function(e){Object(r.a)("".concat(this.tool.name," selected from panel")),this.$emit("onClick",this.tool,e)},onOperation:function(e){Object(r.a)("".concat(this.tool.name," operation selected from panel")),this.$emit("onOperation",this.tool,e)}}},s=(n(557),n(5)),l={name:"ToolSection",components:{Tool:Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolTitle"},[e.tool.disabled?n("a",{staticClass:"name text-muted"},[e.hideName?e._e():n("span",[e._v(e._s(e.tool.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v(e._s(e.tool.description))])]):n("a",{class:e.targetClass,attrs:{href:e.tool.link,target:e.tool.target},on:{click:e.onClick}},[e.tool.logo?n("img",{staticClass:"logo",attrs:{src:e.tool.logo}}):e._e(),e._v(" "),n("span",{staticClass:"labels"},e._l(e.tool.labels,(function(t,i){return n("span",{key:i,class:["badge","badge-primary","badge-"+t]},[e._v("\n                "+e._s(t)+"\n            ")])})),0),e._v(" "),e.hideName?e._e():n("span",{staticClass:"name font-weight-bold"},[e._v(e._s(e.tool.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v(e._s(e.tool.description))]),e._v(" "),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["operation","float-right",e.operationIcon],attrs:{title:e.operationTitle},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onOperation(t)}}})])])}),[],!1,null,"370041ce",null).exports},props:{category:{type:Object,required:!0},queryFilter:{type:String,default:""},disableFilter:{type:Boolean},hideName:{type:Boolean},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},toolKey:{type:String,default:""},sectionName:{type:String,default:"default"},expanded:{type:Boolean,default:!1}},data:function(){return{opened:this.expanded||this.checkFilter()}},watch:{queryFilter:function(){this.opened=this.checkFilter()},opened:function(e,t){if(e!==t){var n=e?"opened":"closed";Object(r.a)("".concat(this.name," tools menu ").concat(n))}}},computed:{name:function(){return this.category.title||this.category.name},isSection:function(){return void 0!==this.category.elems},hasElements:function(){return this.category.elems&&this.category.elems.length>0}},methods:{checkFilter:function(){return!this.disableFilter&&!!this.queryFilter},onClick:function(e,t){this.$emit("onClick",e,t)},onOperation:function(e,t){this.$emit("onOperation",e,t)},toggleMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened;this.opened=e}},created:function(){var e=this;this.eventHub.$on("openToolSection",(function(t){var n;e.isSection&&t==(null===(n=e.category)||void 0===n?void 0:n.id)&&e.toggleMenu(!0)}))}},c=(n(558),Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isSection&&e.hasElements?n("div",{staticClass:"tool-panel-section"},[n("div",{class:["toolSectionTitle","tool-menu-section-"+e.sectionName]},[n("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.toggleMenu()}}},[n("span",{staticClass:"name"},[e._v("\n                "+e._s(this.name)+"\n            ")])])]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.opened?n("div",[e._l(e.category.elems.entries(),(function(t){var i=t[0],a=t[1];return[a.text?n("div",{key:i,staticClass:"tool-panel-label"},[e._v("\n                    "+e._s(a.text)+"\n                ")]):n("tool",{key:i,staticClass:"ml-2",attrs:{tool:a,"tool-key":e.toolKey,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:e.onOperation,onClick:e.onClick}})]}))],2):e._e()])],1):n("div",[e.category.text?n("div",{staticClass:"tool-panel-label"},[e._v("\n        "+e._s(e.category.text)+"\n    ")]):n("tool",{attrs:{tool:e.category,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:e.onOperation,onClick:e.onClick}})],1)}),[],!1,null,"7241228d",null));t.a=c.exports},function(e,t,n){"use strict";var i=160,a=800,r={name:"SidePanel",props:["currentPanel","currentPanelProperties","side"],data:function(){return{show:!0,width:288}},computed:{styles:function(){var e={};return e[this.side]=this.show?"0":"-".concat(this.width,"px"),e.width=this.width+"px",e}},methods:{dragHandler:function(e){var t=this,n="left"===this.side,r=e.pageX,o=this.width;function s(e){var s=e.pageX-r,l=n?o+s:o-s;l=Math.min(a,Math.max(i,l)),t.resize(l)}document.getElementById("dd-helper").style.display="block",document.getElementById("dd-helper").addEventListener("mousemove",s),document.getElementById("dd-helper").addEventListener("mouseup",(function e(){document.getElementById("dd-helper").style.display="none",document.getElementById("dd-helper").removeEventListener("mousemove",s),document.getElementById("dd-helper").removeEventListener("mouseup",e)}))},resize:function(e){this.width=e,document.getElementById("center").style[this.side]=e+"px"},toggle:function(){this.show=!this.show,this.show?(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]=this.width+"px",setTimeout((function(){document.getElementById("center").style.transition=""}),250)):(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),250))},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.show=!1,document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),e)}}},o=(n(560),n(5)),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel-outer-wrap",style:e.styles,attrs:{id:e.side}},[e._t("panel",[n(e.currentPanel,e._b({tag:"component"},"component",e.currentPanelProperties,!1))]),e._v(" "),n("div",{staticClass:"unified-panel-footer"},[n("div",{staticClass:"panel-collapse",class:{left:"left"===e.side,right:"right"===e.side,hidden:!e.show},on:{click:e.toggle}}),e._v(" "),n("div",{staticClass:"drag",on:{mousedown:e.dragHandler}})])],2)}),[],!1,null,"d6274ba6",null);t.a=s.exports},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return f}));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datatypes=t.datatypes,this.datatypesMapping=t.datatypes_mapping}var t,n,a;return t=e,(n=[{key:"isSubType",value:function(e,t){var n=this.datatypesMapping;return e=n.ext_to_class_name[e],t=n.ext_to_class_name[t],n.class_to_classes[e]&&t in n.class_to_classes[e]}},{key:"isSubTypeOfAny",value:function(e,t){var n=this;return t.some((function(t){return n.isSubType(e,t)}))}}])&&i(t.prototype,n),a&&i(t,a),e}(),r=n(7),o=n.n(r),s=n(21),l=n(3);function c(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function d(){return u.apply(this,arguments)}function u(){var e;return e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("".concat(Object(l.getAppRoot)(),"api/datatypes/types_and_mapping"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),Object(s.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),(u=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){c(r,i,a,o,s,"next",e)}function s(e){c(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}function h(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function f(){return p.apply(this,arguments)}function p(){var e;return e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.abrupt("return",new a(t));case 4:case"end":return e.stop()}}),e)})),(p=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){h(r,i,a,o,s,"next",e)}function s(e){h(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var i=n(9),a=n.n(i);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e);try{this.loadProps(t)}catch(e){throw console.log("unable to instantate model",t),e}}return h(e,[{key:"loadProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}}]),e}(),p=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=s(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"updateDate",get:function(){return a.a.utc(this.update_time)}},{key:"createDate",get:function(){return a.a.utc(this.create_time)}}]),n}(e)}},,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(6),c=160,d=800,u=s.a.View.extend({initialize:function(e){this.view=e.view,this.hidden=!1,this.saved_size=null,this.hiddenByTool=!1},$center:function(){return this.$el.siblings("#center")},$toggleButton:function(){return this.$(".unified-panel-footer > .panel-collapse")},render:function(){var e=this,t=this.view,n=this.view.model.attributes||{};if("left"===this.id&&this.view&&this.view.isVueWrapper){var i=document.createElement("div");this.$el.replaceWith(i),this.view.mountVueComponent(i)}else this.$el.html(this._templatePanel(this.id)),r.default.each(n.buttons,(function(t){e.$(".panel-header-buttons").append(t.$el)})),this.$el.addClass(n.cls),this.$(".panel-header-text").html(r.default.escape(n.title)),this.$(".unified-panel-body").append(t.$el),t.render()},_templatePanel:function(){return[this._templateHeader(),this._templateBody(),this._templateFooter()].join("")},_templateHeader:function(e){return'<div class="unified-panel-header" unselectable="on">\n                    <div class="unified-panel-header-inner">\n                        <div class="panel-header-buttons"/>\n                        <div class="panel-header-text"/>\n                    </div>\n                </div>\n                <div class="unified-panel-controls"/>'},_templateBody:function(e){return'<div class="unified-panel-body"/>'},_templateFooter:function(e){return['<div class="unified-panel-footer">','<div class="panel-collapse ',r.default.escape(this.id),'"/>','<div class="drag"/>',"</div>"].join("")},events:{"mousedown .unified-panel-footer > .drag":"_mousedownDragHandler","click .unified-panel-footer > .panel-collapse":"toggle"},_mousedownDragHandler:function(e){var t=this,n="left"===this.id,i=e.pageX,r=t.$el.width();function o(e){var a=e.pageX-i,o=n?r+a:r-a;o=Math.min(d,Math.max(c,o)),t.resize(o)}a()("#dd-helper").show().on("mousemove",o).one("mouseup",(function(e){a()(this).hide().off("mousemove",o)}))},resize:function(e){return this.$el.css("width",e),this.$center().css(this.id,e),this},show:function(){var e=this;if(this.hidden&&!this.motionQueue){this.motionQueue=2;var t={},n=this.id;t[n]=0,this.$el.css(n,-this.saved_size).css("width",this.saved_size).animate(t,"fast",(function(){return e.motionQueue--})),t[n]=this.saved_size,this.$center().animate(t,"fast",(function(){return e.motionQueue--})),this.hidden=!1,this.$toggleButton().removeClass("hidden")}return this},hide:function(){var e=this;if(!this.hidden&&!this.motionQueue){this.motionQueue=2;var t={},n=this.id;this.saved_size=this.$el.width(),t[n]=-this.saved_size,this.resize(0),this.$el.animate(t,"fast",(function(){return e.motionQueue--})),t[n]=0,this.$center().animate(t,"fast",(function(){return e.motionQueue--})),this.hidden=!0,this.$toggleButton().addClass("hidden")}return this},toggle:function(e){return this.hidden?this.show():this.hide(),this.hiddenByTool=!1,this},handle_minwidth_hint:function(e){return this.$center().width()-(this.hidden?this.saved_size:0)<e?this.hidden||(this.toggle(),this.hiddenByTool=!0):this.hiddenByTool&&(this.toggle(),this.hiddenByTool=!1),self},force_panel:function(e){return"show"==e?this.show():"hide"==e?this.hide():self},toString:function(){return"SidePanel(".concat(this.id,")")}}),h=u.extend({id:"left"}),f=u.extend({id:"right"}),p=s.a.View.extend({initialize:function(e){this.setElement(a()(this.template())),this.$frame=this.$(".center-frame"),this.$panel=this.$(".center-panel"),this.$frame.on("load",this._iframeChangeHandler.bind(this))},_iframeChangeHandler:function(e){var t=e.currentTarget,n=t.contentWindow&&t.contentWindow.location,i=Object(l.a)();try{n&&n.host&&(a()(t).show(),this.$panel.empty().hide(),i.trigger("center-frame:load",{fullpath:n.pathname+n.search+n.hash,pathname:n.pathname,search:n.search,hash:n.hash}))}catch(t){console.warn("_iframeChangeHandler error",e,n,i)}},display:function(e,t){var n,i=Object(l.a)(),a=this.$frame[0].contentWindow||{};try{n=a.onbeforeunload&&a.onbeforeunload()}catch(e){a={},console.warn("Iframe unload exception.  This can happen when external content is displayed in the page iframe and causes a CORS violation -- likely harmless.")}if(!n||confirm(n)){a.onbeforeunload=void 0,this.$frame.attr("src","about:blank").hide(),this.$panel.empty().scrollTop(0).append(e.$el||e).show();var r=t?"addClass":"removeClass";this.$panel[r]("p-0"),i.trigger("center-panel:load",e)}},template:function(){return'<div class="center-container"><iframe id="galaxy_main" name="galaxy_main" frameborder="0" class="center-frame" title="galaxy main frame"/><div class="center-panel" /></div>'},toString:function(){return"CenterPanel"}});t.a={SidePanel:u,LeftPanel:h,RightPanel:f,CenterPanel:p}},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return a}));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.navigation=[]}var t,n,a;return t=e,(n=[{key:"getUrl",value:function(e){if(e)this.navigation.push(e);else{this.navigation.pop();var t=this.navigation.length;e=t>0?this.navigation[t-1]:this.root}return e}},{key:"atRoot",value:function(){return 0==this.navigation.length}}])&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(11),c=s.a.Collection.extend({initialize:function(e,t){s.a.Collection.prototype.initialize.call(this,e,t),this.setOrder(t.order||this.order,{silent:!0})},_setUpListeners:function(){return this.on({"changed-order":this.sort})},fetch:function(e){return e=this._buildFetchOptions(e),this.trigger("fetch:started"),s.a.Collection.prototype.fetch.call(this,e)},_buildFetchOptions:function(e){(e=r.default.clone(e)||{}).traditional=!0,e.data=e.data||this._buildFetchData(e);var t=this._buildFetchFilters(e);return r.default.isEmpty(t)||r.default.extend(e.data,this._fetchFiltersToAjaxData(t)),e},_buildFetchData:function(e){var t={};return this.order&&(t.order=this.order),r.default.defaults(r.default.pick(e,this._fetchParams),t)},_fetchParams:["order","limit","offset","view","keys"],_buildFetchFilters:function(e){return r.default.clone(e.filters||{})},_fetchFiltersToAjaxData:function(e){var t={q:[],qv:[]};return r.default.each(e,(function(e,n){void 0!==e&&""!==e&&(!0===e&&(e="True"),!1===e&&(e="False"),null===e&&(e="None"),t.q.push(n),t.qv.push(e))})),t},reset:function(e,t){return this.allFetched=!1,s.a.Collection.prototype.reset.call(this,e,t)},order:null,comparators:{update_time:l.a.buildComparator("update_time",{ascending:!1}),"update_time-asc":l.a.buildComparator("update_time",{ascending:!0}),create_time:l.a.buildComparator("create_time",{ascending:!1}),"create_time-asc":l.a.buildComparator("create_time",{ascending:!0})},setOrder:function(e,t){t=t||{};var n=this.comparators[e];if(r.default.isUndefined(n))throw new Error("unknown order: ".concat(e));if(n!==this.comparator)return this.order=e,this.comparator=n,t.silent||this.trigger("changed-order",t),this}}),d=c.extend({limitPerPage:500,initialize:function(e,t){c.prototype.initialize.call(this,e,t),this.currentPage=t.currentPage||0},getTotalItemCount:function(){return this.length},shouldPaginate:function(){return this.getTotalItemCount()>=this.limitPerPage},getLastPage:function(){return Math.floor(this.getTotalItemCount()/this.limitPerPage)},getPageCount:function(){return this.getLastPage()+1},getPageLimitOffset:function(e){return e=this.constrainPageNum(e),{limit:this.limitPerPage,offset:e*this.limitPerPage}},constrainPageNum:function(e){return Math.max(0,Math.min(e,this.getLastPage()))},fetchPage:function(e,t){var n=this;return e=n.constrainPageNum(e),n.currentPage=e,t=r.default.defaults(t||{},n.getPageLimitOffset(e)),n.trigger("fetching-more"),n.fetch(t).always((function(){n.trigger("fetching-more-done")}))},fetchCurrentPage:function(e){return this.fetchPage(this.currentPage,e)},fetchPrevPage:function(e){return this.fetchPage(this.currentPage-1,e)},fetchNextPage:function(e){return this.fetchPage(this.currentPage+1,e)}}),u=c.extend({limitOnFirstFetch:null,limitPerFetch:100,initialize:function(e,t){c.prototype.initialize.call(this,e,t),this.limitOnFirstFetch=t.limitOnFirstFetch||this.limitOnFirstFetch,this.limitPerFetch=t.limitPerFetch||this.limitPerFetch,this.allFetched=!1,this.lastFetched=t.lastFetched||0},_buildFetchOptions:function(e){return e.remove=e.remove||!1,c.prototype._buildFetchOptions.call(this,e)},fetchFirst:function(e){return e=e?r.default.clone(e):{},this.allFetched=!1,this.lastFetched=0,this.fetchMore(r.default.defaults(e,{reset:!0,limit:this.limitOnFirstFetch}))},fetchMore:function(e){e=r.default.clone(e||{});var t=this;if(!e.reset&&t.allFetched)return a.a.when();e.reset?e.offset=0:void 0===e.offset&&(e.offset=t.lastFetched);var n=e.limit=e.limit||t.limitPerFetch||null;return t.trigger("fetching-more"),t.fetch(e).always((function(){t.trigger("fetching-more-done")})).done((function(e){var i=r.default.isArray(e)?e.length:0;t.lastFetched+=i,(!n||i<n)&&(t.allFetched=!0,t.trigger("all-fetched",this))}))},fetchAll:function(e){e=e||{};var t=this;return(e=r.default.pick(e,"silent")).filters={},t.fetch(e).done((function(){t.allFetched=!0,t.trigger("all-fetched",t)}))}});t.a={ControlledFetchCollection:c,PaginatedCollection:d,InfinitelyScrollingCollection:u}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=1e3;try{o=localStorage.getItem("collectionFuzzyCountDefault")||o}catch(e){console.debug(e)}var s={defaults:{history_id:null,history_content_type:null,hid:null,visible:!0},idAttribute:"type_id",hidden:function(){return!this.get("visible")},isVisible:function(e,t){var n=!0;return e||!this.get("deleted")&&!this.get("purged")||(n=!1),t||this.get("visible")||(n=!1),n},urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/"),url:function(){var e=this.get("history_content_type"),t=this.get("history_id"),n=this.get("id"),i="".concat(this.urlRoot).concat(t,"/contents/").concat(e,"s/").concat(n);return"dataset_collection"==e&&(i="".concat(i,"?view=element-reference&fuzzy_count=").concat(o)),i},hide:function(e){return this.get("visible")?this.save({visible:!1},e):a.a.when()},unhide:function(e){return this.get("visible")?a.a.when():this.save({visible:!0},e)},toString:function(){return[this.get("type_id"),this.get("hid"),this.get("name")].join(":")}};t.a={HistoryContentMixin:s}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(1),l=n(61),c=n(156),d=n(11),u=n(2),h=n.n(u),f=(n(232),o.a.View.extend(d.a.LoggableMixin).extend({_logNamespace:"list",viewClass:l.c.ListItemView,collectionClass:o.a.Collection,tagName:"div",className:"list-panel",fxSpeed:"fast",emptyMsg:h()("This list is empty"),noneFoundMsg:h()("No matching items found"),searchPlaceholder:h()("search"),initialize:function(e,t){(e=e||{}).logger&&(this.logger=e.logger),this.log("".concat(this,".initialize:"),e),this.fxSpeed=s.default.has(e,"fxSpeed")?e.fxSpeed:this.fxSpeed,this.filters=[],this.searchFor=e.searchFor||"",this.selecting=void 0===e.selecting||e.selecting,this.selected=e.selected||[],this.lastSelected=null,this.dragItems=e.dragItems||!1,this.viewClass=e.viewClass||this.viewClass,this.views=[],this.collection=e.collection||this._createDefaultCollection(),this.filters=e.filters||[],this.$scrollContainer=e.$scrollContainer||this.$scrollContainer,this.title=e.title||"",this.subtitle=e.subtitle||"",this._setUpListeners()},_setUpListeners:function(){return this.off(),this.on({error:function(e,t,n,i,a){console.error(e,t,n,i,a)},loading:function(){this._showLoadingIndicator("loading...",40)},"loading-done":function(){this._hideLoadingIndicator(40)}}),this.once("rendered",(function(){this.trigger("rendered:initial",this)})),this._setUpCollectionListeners(),this._setUpViewListeners(),this},_createDefaultCollection:function(){return new this.collectionClass([])},_setUpCollectionListeners:function(){return this.log("".concat(this,"._setUpCollectionListeners"),this.collection),this.stopListening(this.collection),this.listenTo(this.collection,{error:function(e,t,n,i,a){this.trigger("error",e,t,n,i,a)},update:function(e,t){var n=t.changes;return t.renderAll||n.added.length+n.removed.length>1?this.renderItems():1===n.added.length?this.addItemView(s.default.first(n.added),e,t):1===n.removed.length?this.removeItemView(s.default.first(n.removed),e,t):void 0}}),this},_setUpViewListeners:function(){this.log("".concat(this,"._setUpViewListeners")),this.on({"view:selected":function(e,t){if(t&&t.shiftKey&&this.lastSelected){var n=this.viewFromModelId(this.lastSelected);n&&this.selectRange(e,n)}else t&&t.altKey&&!this.selecting&&this.showSelectors();this.selected.push(e.model.id),this.lastSelected=e.model.id},"view:de-selected":function(e,t){this.selected=s.default.without(this.selected,e.model.id)}})},render:function(e){this.log("".concat(this,".render"),e);var t=this._buildNewRender();return this._setUpBehaviors(t),this._queueNewRender(t,e),this},_buildNewRender:function(){this.debug("".concat(this,"(ListPanel)._buildNewRender"));var e=a()(this.templates.el({},this));return this._renderControls(e),this._renderTitle(e),this._renderSubtitle(e),this._renderSearch(e),this.renderItems(e),e},_renderControls:function(e){this.debug("".concat(this,"(ListPanel)._renderControls"));var t=a()(this.templates.controls({},this));return e.find(".controls").replaceWith(t),t},_renderTitle:function(e){},_renderSubtitle:function(e){},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;var n=this;n.log("_queueNewRender:",e,t),a()(n).queue("fx",[function(e){n.$el.fadeOut(t,e)},function(t){n._swapNewRender(e),t()},function(e){n.$el.fadeIn(t,e)},function(e){n.trigger("rendered",n),e()}])},_swapNewRender:function(e){return this.$el.empty().attr("class",this.className).append(e.children()),this.selecting&&this.showSelectors(0),this},_setUpBehaviors:function(e){return e=e||this.$el,this.$controls(e).find("[title]").tooltip(),this._renderMultiselectActionMenu(e),this},_renderMultiselectActionMenu:function(e){var t=(e=e||this.$el).find(".list-action-menu"),n=this.multiselectActions();if(!n.length)return t.empty();var i=a()('<div class="list-action-menu btn-group">\n                    <button class="list-action-menu-btn btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                        '.concat(h()("For all selected"),'...\n                    </button>\n                    <div class="dropdown-menu float-right" role="menu"/>\n                </div>')),r=n.map((function(e){var t='<a class="dropdown-item" href="javascript:void(0);">'.concat(e.html,"</a>");return a()(t).click((function(t){return t.preventDefault(),e.func(t)}))}));return i.find(".dropdown-menu").append(r),t.replaceWith(i),i},multiselectActions:function(){return[]},$scrollContainer:function(e){return(e||this.$el).parent().parent()},$controls:function(e){return(e||this.$el).find("> .controls")},$list:function(e){return(e||this.$el).find("> .list-items")},$messages:function(e){return(e||this.$el).find("> .controls .messages")},$emptyMessage:function(e){return(e||this.$el).find("> .empty-message")},renderItems:function(e){e=e||this.$el;var t=this;t.log("".concat(this,".renderItems"),e);var n=t.$list(e);t.freeViews();var i=t._filterCollection();return t.views=i.map((function(e){return t._createItemView(e)})),n.empty(),t.views.length&&t._attachItems(e),t._renderEmptyMessage(e).toggle(!t.views.length),t.trigger("views:ready",t.views),t.views},_filterCollection:function(){return this.collection.filter(s.default.bind(this._filterItem,this))},_filterItem:function(e){return s.default.every(this.filters.map((function(t){return t.call(e)})))&&(!this.searchFor||e.matchesAll(this.searchFor))},_createItemView:function(e){var t=new(this._getItemViewClass(e))(s.default.extend(this._getItemViewOptions(e),{model:e}));return this._setUpItemViewListeners(t),t},_destroyItemView:function(e){this.stopListening(e),this.views=s.default.without(this.views,e)},_destroyItemViews:function(e){var t=this;return t.views.forEach((function(e){t.stopListening(e)})),t.views=[],t},freeViews:function(){return this._destroyItemViews()},_getItemViewClass:function(e){return this.viewClass},_getItemViewOptions:function(e){return{fxSpeed:this.fxSpeed,expanded:!1,selectable:this.selecting,selected:s.default.contains(this.selected,e.id),draggable:this.dragItems}},_setUpItemViewListeners:function(e){var t=this;return this.listenTo(e,"all",(function(){var e=Array.prototype.slice.call(arguments,0);e[0]="view:".concat(e[0]),t.trigger.apply(t,e)})),this.listenTo(e,"draggable:dragstart",(function(e,t){var n={},i=this.getSelectedModels();n=i.length?i.toJSON():[t.model.toJSON()],e.dataTransfer.setData("text",JSON.stringify(n))}),this),t},_attachItems:function(e){var t=this;return this.$list(e).append(this.views.map((function(e){return t._renderItemView$el(e)}))),this},_renderItemView$el:function(e){return e.render(0).$el},_renderEmptyMessage:function(e){this.debug("_renderEmptyMessage",e,this.searchFor);var t=this.searchFor?this.noneFoundMsg:this.emptyMsg;return this.$emptyMessage(e).text(t)},expandAll:function(){s.default.each(this.views,(function(e){e.expand()}))},collapseAll:function(){s.default.each(this.views,(function(e){e.collapse()}))},addItemView:function(e,t,n){var i=this,r=i._filterCollection().indexOf(e);if(-1!==r){var o=i._createItemView(e);return a()(o).queue("fx",[function(e){i.$emptyMessage().is(":visible")?i.$emptyMessage().fadeOut(i.fxSpeed,e):e()},function(e){i._attachView(o,r),e()}]),o}},_attachView:function(e,t,n){n=!!s.default.isUndefined(n)||n,t=t||0;var i=this;return i.views.splice(t,0,e),i._insertIntoListAt(t,i._renderItemView$el(e).hide()),i.trigger("view:attached",e),n?e.$el.slideDown(i.fxSpeed,(function(){i.trigger("view:attached:rendered")})):(e.$el.show(),i.trigger("view:attached:rendered")),e},_insertIntoListAt:function(e,t){var n=this.$list();return 0===e?n.prepend(t):n.children().eq(e-1).after(t),t},removeItemView:function(e,t,n){var i=this,r=s.default.find(i.views,(function(t){return t.model===e}));if(r)return i.views=s.default.without(i.views,r),i.trigger("view:removed",r),a()({}).queue("fx",[function(e){r.$el.fadeOut(i.fxSpeed,e)},function(e){r.remove(),i.trigger("view:removed:rendered"),i.views.length?e():i._renderEmptyMessage().fadeIn(i.fxSpeed,e)}]),r},viewFromModelId:function(e){return s.default.find(this.views,(function(t){return t.model.id===e}))},viewFromModel:function(e){return e?this.viewFromModelId(e.id):void 0},viewsWhereModel:function(e){return this.views.filter((function(t){return s.default.isMatch(t.model.attributes,e)}))},viewRange:function(e,t){if(e===t)return e?[e]:[];var n=this.views.indexOf(e),i=this.views.indexOf(t);return-1===n||-1===i?n===i?[]:-1===n?[t]:[e]:n<i?this.views.slice(n,i+1):this.views.slice(i,n+1)},_renderSearch:function(e){return e.find(".controls .search-input").searchInput({placeholder:this.searchPlaceholder,initialVal:this.searchFor,onfirstsearch:s.default.bind(this._firstSearch,this),onsearch:s.default.bind(this.searchItems,this),onclear:s.default.bind(this.clearSearch,this),advsearchlink:!0}),e},_firstSearch:function(e){return this.log("onFirstSearch",e),this.searchItems(e)},searchItems:function(e,t){if(this.log("searchItems",e,this.searchFor,t),!t&&this.searchFor===e)return this;this.searchFor=e,this.renderItems(),this.trigger("search:searching",e,this);var n=this.$("> .controls .search-query");return n.val()!==e&&n.val(e),this},clearSearch:function(e){return this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.renderItems(),this},THROTTLE_SELECTOR_FX_AT:20,showSelectors:function(e){e=void 0!==e?e:this.fxSpeed,this.selecting=!0,this.$(".list-actions").slideDown(e),e=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:e,s.default.each(this.views,(function(t){t.showSelector(e)}))},hideSelectors:function(e){e=void 0!==e?e:this.fxSpeed,this.selecting=!1,this.$(".list-actions").slideUp(e),e=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:e,s.default.each(this.views,(function(t){t.hideSelector(e)})),this.selected=[],this.lastSelected=null},toggleSelectors:function(){this.selecting?this.hideSelectors():this.showSelectors()},selectAll:function(e){s.default.each(this.views,(function(t){t.select(e)}))},deselectAll:function(e){this.lastSelected=null,s.default.each(this.views,(function(t){t.deselect(e)}))},selectRange:function(e,t){var n=this.viewRange(e,t);return s.default.each(n,(function(e){e.select()})),n},getSelectedViews:function(){return s.default.filter(this.views,(function(e){return e.selected}))},getSelectedModels:function(){return new this.collection.constructor(s.default.map(this.getSelectedViews(),(function(e){return e.model})))},_showLoadingIndicator:function(e,t,n){this.debug("_showLoadingIndicator",this.indicator,e,t,n),t=void 0!==t?t:this.fxSpeed,this.indicator||(this.indicator=new c.a.LoadingIndicator(this.$el),this.debug("\t created",this.indicator)),this.$el.is(":visible")?(this.$el.fadeOut(t),this.indicator.show(e,t,n)):this.indicator.show(0,n)},_hideLoadingIndicator:function(e,t){this.debug("_hideLoadingIndicator",this.indicator,e,t),e=void 0!==e?e:this.fxSpeed,this.indicator&&this.indicator.hide(e,t)},scrollPosition:function(){return this.$scrollContainer().scrollTop()},scrollTo:function(e,t){return t=t||0,this.$scrollContainer().animate({scrollTop:e},t),this},scrollToTop:function(e){return this.scrollTo(0,e)},scrollToItem:function(e,t){return this},scrollToId:function(e,t){return this.scrollToItem(this.viewFromModelId(e),t)},events:{"click .select-all":"selectAll","click .deselect-all":"deselectAll"},toString:function(){return"ListPanel(".concat(this.collection,")")}}));f.prototype.templates={el:d.a.wrapTemplate(["<div>",'<div class="controls"></div>','<div class="list-items"></div>','<div class="empty-message infomessagesmall"></div>',"</div>"]),controls:d.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- view.title %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',h()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',h()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"])};var p,m=f.extend({modelCollectionKey:"contents",initialize:function(e){f.prototype.initialize.call(this,e),this.selecting=void 0!==e.selecting&&e.selecting,this.setModel(this.model,e)},setModel:function(e,t){if(t=t||{},this.debug("".concat(this,".setModel:"),e,t),this.freeModel(),this.freeViews(),e){var n=this.model?this.model.get("id"):null;this.model=e,this.logger&&(this.model.logger=this.logger),this._setUpModelListeners(),this.stopListening(this.collection),this.collection=this.model[this.modelCollectionKey]||t.collection||this._createDefaultCollection(),this._setUpCollectionListeners(),n&&e.get("id")!==n&&this.trigger("new-model",this)}return this},freeModel:function(){return this.model&&this.stopListening(this.model),this},_setUpModelListeners:function(){return this.log("".concat(this,"._setUpModelListeners"),this.model),this.listenTo(this.model,"error",(function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("error"),this.trigger.apply(this,e)}),this),this.logger&&this.listenTo(this.model,"all",(function(e){this.info("".concat(this,"(model)"),e,arguments)})),this},_renderControls:function(e){this.debug("".concat(this,"(ModelListPanel)._renderControls"));var t=this.model?this.model.toJSON():{},n=a()(this.templates.controls(t,this));return e.find(".controls").replaceWith(n),n},toString:function(){return"ModelListPanel(".concat(this.model,")")}});m.prototype.templates=(p=d.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- model.name %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',h()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',h()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"]),s.default.extend(s.default.clone(f.prototype.templates),{controls:p})),t.a={ListPanel:f,ModelListPanel:m}},function(e,t,n){"use strict";var i,a=n(1),r=n(99),o=n(11),s=n(2),l=n.n(s),c=r.b.DatasetListItemView,d=c.extend({className:"".concat(c.prototype.className," history-content"),initialize:function(e,t){c.prototype.initialize.call(this,e,t)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAListItemView(".concat(e,")")}});d.prototype.templates=(i=a.default.extend({},c.prototype.templates.warnings,{hidden:o.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',l()("This dataset has been hidden"),"</div>","<% } %>"],"dataset")}),a.default.extend({},c.prototype.templates,{titleBar:function(e){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(e.hid,'</span>\n                <span class="name">').concat(a.default.escape(e.name),'</span>\n            </div>\n            </br>\n            <div class="nametags"></div>\n        </div>\n    ')},warnings:i})),t.a={HDAListItemView:d}},function(e,t,n){"use strict";var i=n(1),a=n(4),r=n.n(a),o=n(11),s=n(2),l=n.n(s),c=(n(153),r.a.View.extend(o.a.LoggableMixin).extend(o.a.HiddenUntilActivatedViewMixin).extend({tagName:"div",className:"annotation-display",initialize:function(e){e=e||{},this.tooltipConfig=e.tooltipConfig||{placement:"bottom"},this.listenTo(this.model,"change:annotation",(function(){this.render()})),this.hiddenUntilActivated(e.$activator,e)},render:function(){var e=this;return this.$el.html(this._template()),this.$annotation().make_text_editable({use_textarea:!0,on_finish:function(t){e.$annotation().text(t),e.model.save({annotation:t},{silent:!0}).fail((function(){e.$annotation().text(e.model.previous("annotation"))}))}}),this},_template:function(){var e=this.model.get("annotation");return['<label class="prompt">',l()("Annotation"),"</label>",'<div class="annotation">',i.default.escape(e),"</div>"].join("")},$annotation:function(){return this.$el.find(".annotation")},remove:function(){this.$annotation.off(),this.stopListening(this.model),r.a.View.prototype.remove.call(this)},toString:function(){return["AnnotationEditor(","".concat(this.model),")"].join("")}}));t.a={AnnotationEditor:c}},function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(4),c=n.n(l),d=n(6),u=n(10),h=n(140),f=n(18),p=c.a.View.extend({initialize:function(e){this.list={},this.options=u.a.merge(e,{title:a()("Repeat"),empty_text:"Not available.",max:null,min:null}),this.button_new=new f.a.Button({icon:"fa-plus",title:"Insert ".concat(this.options.title),tooltip:"Add new ".concat(this.options.title," block"),cls:"btn btn-secondary float-none form-repeat-add",onclick:function(){e.onnew&&e.onnew()}}),this.setElement(s()("<div/>").append(this.$list=s()("<div/>")).append(s()("<div/>").append(this.button_new.$el)))},size:function(){return r.default.size(this.list)},add:function(e){var t=Object(d.a)();if(e.id&&!this.list[e.id]){var n=new f.a.Button({icon:"fa-trash-o",tooltip:a()("Delete this repeat block"),cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){e.ondel&&e.ondel()}}),i=new h.a.View({id:e.id,title:a()("placeholder"),cls:e.cls||"ui-portlet-section",operations:{button_delete:n}});i.append(e.$el),i.$el.addClass("section-row").hide(),this.list[e.id]=i,this.$list.append(i.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()}else t.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.")},del:function(e){var t=Object(d.a)();this.list[e]?(this.$list.find("#".concat(e)).remove(),delete this.list[e],this.button_new.enable(),this._refresh()):t.emit.debug("form-repeat::del()","Invalid repeat block id.")},delAll:function(){for(var e in this.list)this.del(e)},hideOptions:function(){this.button_new.$el.hide(),r.default.each(this.list,(function(e){e.hideOperation("button_delete")})),r.default.isEmpty(this.list)&&this.$el.append(s()("<div/>").addClass("form-text text-muted").html(this.options.empty_text))},_refresh:function(){var e=0;for(var t in this.list){var n=this.list[t];n.title("".concat(++e,": ").concat(this.options.title)),n[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}});t.a={View:p}},function(e,t,n){"use strict";var i={computed:{explicitMetaAttributes:function(){var e=this;return this.items.filter((function(t){return-1==e.implicitMicrodataProperties.indexOf(t.attribute)}))},items:function(){var e=[];for(var t in this.thing)"class"!=t&&e.push({attribute:t,value:this.thing[t]});return e},email:function(){var e=this.thing.email;return e&&0==e.indexOf("mailto:")&&(e=e.slice("mailto:".length)),e},url:function(){return this.thing.url}}},a=n(23),r=n(20),o=n(17),s=n(499);r.c.add(s.a,o.N,o.o);var l={mixins:[i],components:{FontAwesomeIcon:a.a},props:{person:{type:Object},hoverPlacement:{type:String,default:"left"}},data:function(){return{implicitMicrodataProperties:["name","givenName","email","familyName","url","identifier"],thing:this.person}},computed:{name:function(){var e=this.person.name,t=this.person.familyName,n=this.person.givenName;if(null==e&&(t||n)){var i=this.person.honorificPrefix,a=this.person.honorificSuffix;e=n&&t?n+" "+t:n||t,i&&(e=i+" "+e),a&&(e=e+" "+a)}return e},orcidLink:function(){var e=this.person.identifier;return e&&e.indexOf("orcid.org/")>=0?e:null}}},c=n(5),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Person"}},[n("font-awesome-icon",{ref:"button",attrs:{icon:"user"}}),e._v(" "),n("b-popover",{attrs:{triggers:"click blur",placement:e.hoverPlacement,target:this.$refs.button||"works-lazily",title:"Person"}},[n("b-table",{attrs:{striped:"",items:e.items}})],1),e._v(" "),e.name?n("span",[e.person.name?n("meta",{attrs:{itemprop:"name",content:e.person.name}}):e._e(),e._v(" "),e.person.givenName?n("meta",{attrs:{itemprop:"givenName",content:e.person.givenName}}):e._e(),e._v(" "),e.person.familyName?n("meta",{attrs:{itemprop:"familyName",content:e.person.familyName}}):e._e(),e._v("\n        "+e._s(e.name)+"\n        "),e.email?n("span",[e._v("\n            ("),n("span",{attrs:{itemprop:"email",content:e.person.email}},[e._v(e._s(e.email))]),e._v(")\n        ")]):e._e()]):n("span",{attrs:{itemprop:"email",content:e.person.email}},[e._v("\n        "+e._s(e.email)+"\n    ")]),e._v(" "),e.orcidLink?n("a",{attrs:{href:e.orcidLink,target:"_blank"}},[n("link",{attrs:{itemprop:"identifier",href:e.orcidLink}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View orcid.org profile",icon:["fab","orcid"]}})],1):e._e(),e._v(" "),e.url?n("a",{attrs:{href:e.url,target:"_blank"}},[n("link",{attrs:{itemprop:"url",href:e.url}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"URL",icon:"external-link-alt"}})],1):e._e(),e._v(" "),e._l(e.explicitMetaAttributes,(function(e){return n("meta",{key:e.attribute,attrs:{itemprop:e.attribute,content:e.value}})})),e._v(" "),e._t("buttons")],2)}),[],!1,null,null,null).exports;r.c.add(o.o,o.f);var u={mixins:[i],components:{FontAwesomeIcon:a.a},props:{organization:{type:Object},hoverPlacement:{type:String,default:"left"}},data:function(){return{implicitMicrodataProperties:["name","email","url","identifier"],thing:this.organization}},computed:{name:function(){return this.organization.name}}},h={components:{OrganizationViewer:Object(c.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Organization"}},[n("font-awesome-icon",{ref:"button",attrs:{icon:"building"}}),e._v(" "),n("b-popover",{attrs:{triggers:"click blur",placement:e.hoverPlacement,target:this.$refs.button||"works-lazily",title:"Organization"}},[n("b-table",{attrs:{striped:"",items:e.items}})],1),e._v(" "),e.name?n("span",[n("span",{attrs:{itemprop:"name"}},[e._v(e._s(e.name))]),e._v(" "),e.email?n("span",[e._v("\n            ("),n("span",{attrs:{itemprop:"email",content:e.organization.email}},[e._v(e._s(e.email))]),e._v(")\n        ")]):e._e()]):e.email?n("span",{attrs:{itemprop:"email",content:e.organization.email}},[e._v("\n        "+e._s(e.email)+"\n    ")]):e._e(),e._v(" "),e.url?n("a",{attrs:{href:e.url,target:"_blank"}},[n("link",{attrs:{itemprop:"url",href:e.url}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Organization URL",icon:"external-link-alt"}})],1):e._e(),e._v(" "),e._l(e.explicitMetaAttributes,(function(e){return n("meta",{key:e.attribute,attrs:{itemprop:e.attribute,content:e.value}})})),e._v(" "),e._t("buttons")],2)}),[],!1,null,null,null).exports,PersonViewer:d},props:{creator:{type:Object}}},f=Object(c.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"creative-work-creator"},["Organization"==e.creator.class?n("OrganizationViewer",{attrs:{organization:e.creator},scopedSlots:e._u([{key:"buttons",fn:function(){return[e._t("buttons")]},proxy:!0}],null,!0)}):n("PersonViewer",{attrs:{person:e.creator},scopedSlots:e._u([{key:"buttons",fn:function(){return[e._t("buttons")]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null);t.a=f.exports},function(e,t,n){"use strict";var i,a=n(1),r=n(24),o=n(91),s=n(121),l=n(2),c=n.n(l),d=n(102),u=n(236),h=n(242),f={props:{collection:{type:Object,required:!0},jobStatesSummary:{required:!0}},components:{ProgressBar:h.a},mixins:[u.a],computed:{loadingNote:function(){return"Loading job data for ".concat(this.collectionTypeDescription)},generatingNote:function(){return"".concat(this.jobsStr," generating a ").concat(this.collectionTypeDescription)},jobSourceType:function(){return this.collection.get("job_source_type")},collectionTypeDescription:function(){return s.a.collectionTypeDescription(this.collection)},simpleDescription:function(){return s.a.collectionDescription(this.collection)},errorDescription:function(){var e=this.jobCount,t=this.jobStatesSummary.numInError();return"a ".concat(this.collectionTypeDescription," with ").concat(t," / ").concat(e," jobs in error")}}},p=n(5),m=Object(p.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.jobSourceType||"Job"==e.jobSourceType||e.isTerminal?n("div",[e._v("\n    "+e._s(e.simpleDescription)+"\n")]):e.jobStatesSummary&&e.jobStatesSummary.hasDetails()?e.isNew?n("div",[n("progress-bar",{attrs:{note:"Creating jobs",loading:!0,"info-progress":1}})],1):e.isErrored?n("div",[e._v("\n    "+e._s(e.errorDescription)+"\n")]):n("div",[n("progress-bar",{attrs:{note:e.generatingNote,"ok-count":e.okCount,"error-count":e.errorCount,"running-count":e.runningCount,"new-count":e.newCount}})],1):n("div",[n("progress-bar",{attrs:{note:e.loadingNote,loading:!0,"info-progress":1}})],1)}),[],!1,null,null,null).exports,_=n(38),g=Object(_.a)(m),v=o.a.DCListItemView,y=v.extend({className:"".concat(v.prototype.className," history-content"),render:function(){var e=v.prototype.render.apply(this,arguments);return this._mountNametags("initialize"),e},_setUpListeners:function(){var e=this;v.prototype._setUpListeners.call(this);var t=function(t,n){e.render(0),e._mountNametags("listener")};this.model.jobStatesSummary&&this.listenTo(this.model.jobStatesSummary,"change",t),this.listenTo(this.model,{"change:tags change:visible change:state":t})},_mountNametags:function(e){var t=this.$el.find(".nametags")[0];if(t){var n=this.model.attributes,i=n.id,a=n.model_class,r=n.tags,o="".concat(a,"-").concat(i);Object(d.b)({storeKey:o,tags:r},t)}},_getFoldoutPanelClass:function(){return s.a.CollectionView},_swapNewRender:function(e){var t;v.prototype._swapNewRender.call(this,e);var n=this.model.jobStatesSummary;t=n?n.new()?"loading":n.errored()?"error":n.terminal()?"ok":n.running()?"running":"queued":this.model.get("job_source_id")?"loading":this.model.get("populated_state")?r.a.OK:r.a.RUNNING,this.$el.addClass("state-".concat(t));var i=this.model,a=this.$el.find(".state-description")[0];return g({jobStatesSummary:n,collection:i},a),this.$el},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDCAListItemView(".concat(e,")")}});y.prototype.templates=(i=a.default.extend({},v.prototype.templates.warnings,{hidden:function(e){!e.visible&&'<div class="hidden-msg warningmessagesmall">'.concat(c()("This collection has been hidden"),"</div>")}}),a.default.extend({},v.prototype.templates,{warnings:i,titleBar:function(e){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(e.hid,'</span>\n                <span class="name">').concat(a.default.escape(e.name),'</span>\n            </div>\n            <div class="state-description">\n            </div>\n            <div class="nametags">\x3c!-- Nametags mount here (hdca-li) --\x3e</div>\n        </div>\n    ')}}));t.a={HDCAListItemView:y}},function(e,t,n){"use strict";var i=n(7),a=n.n(i),r=n(106),o=n(6),s=n(21),l={mixins:[r.a],props:{history:{type:String,required:!0}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.load()},methods:{formatRows:function(){},clicked:function(e){this.modalShow=!1,this.callback(e),this.$emit("onOk",e)},onCancel:function(){this.modalShow=!1,this.$emit("onCancel")},load:function(){var e=this;this.filter=null,this.optionsShow=!1;var t=Object(o.a)(),n="".concat(t.root,"api/histories/").concat(this.history,"/contents?type=dataset_collection");a.a.get(n).then((function(t){e.items=t.data.map((function(e){return{id:e.id,label:e.name,time:e.created_time,isLeaf:!0}})),e.formatRows(),e.optionsShow=!0})).catch((function(t){e.errorMessage=Object(s.a)(t)}))}}},c=n(5),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:!1,filter:e.filter,"leaf-icon":"fa fa-folder"},on:{clicked:e.clicked,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null);t.a=d.exports},function(e,t,n){"use strict";var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(6);function l(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var c,d,u={props:{id:{type:String,required:!0}},data:function(){return{decoded_id:null}},created:function(){this.decodeId(this.id)},computed:{isAdmin:function(){var e,t=Object(s.a)()||window.parent.Galaxy;return(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.isAdmin())||!1}},methods:{decodeId:(c=regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAdmin){e.next=12;break}return n="".concat(Object(o.getAppRoot)(),"api/configuration/decode/").concat(t),e.prev=2,e.next=5,a.a.get(n);case 5:i=e.sent,this.decoded_id=i.data.decoded_id,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(r.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,i){var a=c.apply(e,t);function r(e){l(a,n,i,r,o,"next",e)}function o(e){l(a,n,i,r,o,"throw",e)}r(void 0)}))},function(e){return d.apply(this,arguments)})}},h=n(5),f=Object(h.a)(u,(function(){var e=this.$createElement,t=this._self._c||e;return this.decoded_id?t("span",[this._v("("+this._s(this.decoded_id)+")")]):this._e()}),[],!1,null,null,null);t.a=f.exports},function(e,t,n){"use strict";var i=n(3),a=n(7),r=n.n(a),o=n(29),s=n(23),l=n(20),c=n(17);l.c.add(c.o);var d={components:{LoadingSpan:o.a,FontAwesomeIcon:s.a},props:{licenseId:{type:String},inputLicenseInfo:{type:Object,required:!1},title:{type:String,default:null}},data:function(){return{license:this.inputLicenseInfo}},created:function(){null==this.license&&this.fetchLicense()},methods:{fetchLicense:function(){var e=this;this.license=null;var t="".concat(Object(i.getAppRoot)(),"api/licenses/").concat(this.licenseId);r.a.get(t).then((function(e){return e.data})).then((function(t){e.license=t}))}},watch:{licenseId:function(e,t){e!=t&&this.fetchLicense()}}},u=n(5),h=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return null==e.license?n("loading-span",{attrs:{message:"Loading license information"}}):e.license.name?n("div",{staticClass:"text-muted"},[n("link",{attrs:{itemprop:"license",href:e.license.licenseId}}),e._v(" "),e.title?n("span",[e._v("\n        "+e._s(e.title)+"\n    ")]):e._e(),e._v("\n    "+e._s(e.license.name)+"\n    "),n("a",{attrs:{target:"_blank",href:e.license.url}},[n("font-awesome-icon",{attrs:{icon:"external-link-alt"}})],1),e._v(" "),e._t("buttons")],2):n("div",[e._v("\n    Unknown License ("),n("i",[e._v(e._s(e.license.url))]),e._v(")\n    "),e._t("buttons")],2)}),[],!1,null,null,null);t.a=h.exports},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var r={components:{WrapChildren:{props:{tag:{type:String,required:!1,default:"ul"},childTag:{type:String,required:!1,default:"li"}},render:function(e){var t=this,n=(this.$slots.default||[]).map((function(n){return e(t.childTag,[n])}));return e(this.tag,n)}},Intersect:{props:{threshold:{type:[Array,Number],required:!1,default:function(){return[.5]}},root:{type:HTMLElement,required:!1,default:function(){return null}},rootMargin:{type:String,required:!1,default:function(){return"0px 0px 0px 0px"}}},methods:{handler:function(e){var t=this;e.forEach((function(e){var n=e.isIntersecting,i=e.target,a=t.elemToKey.get(i),r=n?"enter":"leave";t.$emit(r,a,e)}))},getCurrentVnodes:function(){var e=[];try{e=this.$slots.default[0].componentOptions.children.filter((function(e){return e.tag}))}catch(e){throw console.warn("Nothing in slots?",e),e}return e},registerObservers:function(e){var t=this;e.forEach((function(e){var n=e.key,i=e.elm;t.observer.observe(i),t.elemToKey.set(i,n)}))},cleanupObservers:function(e){var t=this,n=e.reduce((function(e,t){return e.add(t.elm)}),new Set);Array.from(this.elemToKey.entries()).forEach((function(e){var a=i(e,2),r=a[0],o=a[1];n.has(r)||(t.observer.unobserve(r),t.$emit("destroy",o),t.elemToKey.delete(r))}))}},mounted:function(){this.elemToKey=new Map;var e=this.threshold,t=this.root,n=this.rootMargin;this.observer=new IntersectionObserver(this.handler,{threshold:e,root:t,rootMargin:n});var i=this.getCurrentVnodes();this.registerObservers(i)},updated:function(){var e=this.getCurrentVnodes();this.cleanupObservers(e),this.registerObservers(e)},beforeDestroy:function(){this.observer.disconnect()},render:function(){return this.$slots.default}}},props:{startingHeight:{type:Number,required:!1,default:50}},data:function(){return{height:this.startingHeight,overflowKeys:new Set}},computed:{overflow:function(){var e=this;return this.getVnodes().filter((function(t){return e.overflowKeys.has(t.key)})).map((function(t){return e.getMenuDataFromNode(t)}))},requiresFixedHeight:function(){return{height:"".concat(this.height,"px")}}},methods:{onShowItem:function(e,t){this.setHeight(t),this.removeFromOverflow(e)},onHideItem:function(e){this.addToOverflow(e)},onItemDestroy:function(e){this.removeFromOverflow(e)},setHeight:function(e){if(e){var t=e.boundingClientRect.height;this.height=Math.max(this.height,t)}},addToOverflow:function(e){if(!this.overflowKeys.has(e)){var t=new Set(this.overflowKeys);t.add(e),this.overflowKeys=t}},removeFromOverflow:function(e){if(this.overflowKeys.has(e)){var t=new Set(this.overflowKeys);t.delete(e),this.overflowKeys=t}},getVnodes:function(){return(this.$slots.default||[]).filter((function(e){return e.tag}))},getMenuDataFromNode:function(e){var t=e.componentOptions||{};return{attrs:Object.assign({},e.data&&e.data.attrs||{},t.propsData||{}),on:Object.assign({},e.data&&e.data.on||{},t.listeners||{}),key:e.key}}}},o=(n(864),n(5)),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"priority-menu"},[n("Intersect",{on:{enter:e.onShowItem,leave:e.onHideItem,destroy:e.onItemDestroy}},[n("WrapChildren",{staticClass:"primary",style:e.requiresFixedHeight},[e._t("default")],2)],1),e._v(" "),e._t("overflow",[e.overflow.length?n("div",{staticClass:"overflow"},[n("b-dropdown",{attrs:{"no-caret":"",right:"",variant:"link",size:"sm",boundary:"window","toggle-class":"p-1"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("i",{staticClass:"fas fa-ellipsis-v"}),e._v(" "),n("span",{staticClass:"sr-only"},[e._v("...")])]},proxy:!0}],null,!1,1504307886)},[e._v(" "),e._l(e.overflow,(function(t){return n("b-dropdown-item",e._g(e._b({key:t.key},"b-dropdown-item",t.attrs,!1),t.on),[e._v("\n                    "+e._s(e._f("localize")(t.attrs.title))+"\n                ")])}))],2)],1):e._e()],{overflow:e.overflow})],2)}),[],!1,null,null,null).exports,l={props:{icon:{type:String,required:!1,default:""},title:{type:String,required:!0}}},c=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",e._g(e._b({staticClass:"p-1",attrs:{title:e._f("localize")(e.title),variant:"link",size:"sm"}},"b-button",e.$attrs,!1),e.$listeners),[e.icon?n("i",{class:e.icon}):e._e(),e._v(" "),n("span",{staticClass:"sr-only"},[e._v(e._s(e._f("localize")(e.title)))])])}),[],!1,null,null,null).exports},,,,function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(4),c=n.n(l),d=n(3),u=(n(485),window.Tour);s.a.fn.tooltip.Constructor.Default.whiteList.button=["data-role"];var h=Object(d.getAppRoot)(),f={storage:window.sessionStorage,onEnd:function(){window.sessionStorage.removeItem("activeGalaxyTour")},delay:150,orphan:!0},p=function(e){return r.default.each(e.steps,(function(e){e.preclick&&(e.onShow=function(){r.default.each(e.preclick,(function(e){s()(e).click()}))}),e.postclick&&(e.onHide=function(){r.default.each(e.postclick,(function(e){s()(e).click()}))}),e.textinsert&&(e.onShown=function(){s()(e.element).val(e.textinsert).trigger("change")}),e.path&&(console.warn("This Galaxy Tour is attempting to use path navigation.  This is known to be unstable and can possibly get the Galaxy client 'stuck' in a tour, and at this time is not allowed."),delete e.path)})),e},m=c.a.Model.extend({urlRoot:"".concat(h,"api/tours")}),_=c.a.Collection.extend({url:"".concat(h,"api/tours"),model:m}),g=c.a.View.extend({title:a()("Tours"),initialize:function(){var e=this;this.setElement("<div/>"),this.model=new _,this.model.fetch({success:function(){e.render()},error:function(){console.error("Failed to fetch tours.")}})},render:function(){var e=r.default.template('\n    <h2>Galaxy Tours</h2>\n    <p>This page presents a list of interactive tours available on this Galaxy server.\n    Select any tour to get started (and remember, you can click \'End Tour\' at any time).</p>\n\n<div class="row mb-3">\n    <div class="col-12 btn-group" role="group" aria-label="Tag selector">\n        <% _.each(tourtagorder, function(tag) { %>\n        <button class="btn btn-primary tag-selector-button" tag-selector-button="<%- tag.key %>">\n            <%- tag.name %>\n        </button>\n        <% }); %>\n    </div>\n</div>\n\n<div class="row mb-3">\n    <div class="col-12">\n    <h4>Tours</h4>\n    <ul class="list-group">\n    <% _.each(tours, function(tour) { %>\n        <li class="list-group-item" tags="<%- tour.attributes.tags_lc %>">\n            <a href="/tours/<%- tour.id %>" class="tourItem" data-tour.id=<%- tour.id %>>\n                <%- tour.attributes.name || tour.id %>\n            </a>\n             - <%- tour.attributes.description || "No description given." %>\n             <% _.each(tour.attributes.tags, function(tag) { %>\n                <span class="badge badge-primary">\n                    <%- tag.charAt(0).toUpperCase() + tag.slice(1) %>\n                </span>\n             <% }); %>\n        </li>\n    <% }); %>\n    </ul>\n    </div>\n</div>'),t={};r.default.each(this.model.models,(function(e){e.attributes.tags_lc=[],null===e.attributes.tags?(void 0===t.Untagged&&(t.Untagged={name:"Untagged",tours:[]}),t.Untagged.tours.push(e)):r.default.each(e.attributes.tags,(function(n){var i=n.charAt(0).toUpperCase()+n.slice(1);void 0===t[i]&&(t[i]={name:i,tours:[]}),e.attributes.tags_lc.push(n.toLowerCase()),t[i].tours.push(e)}))}));var n=[];Object.keys(t).forEach((function(e,t){n.push({name:e,key:e.toLowerCase()})})),this.$el.html(e({tours:this.model.models,tourtags:t,tourtagorder:n})).on("click",".tourItem",(function(e){e.preventDefault(),y(s()(this).data("tour.id"))})).on("click",".tag-selector-button",(function(e){var t=s()(e.target),n=[];t.toggleClass("btn-primary"),t.toggleClass("btn-secondary"),s()(".tag-selector-button.btn-primary").each((function(){n.push(s()(this).attr("tag-selector-button"))})),s()("li.list-group-item").each((function(){if(s()(this).attr("tags")){var e=s()(this).attr("tags").split(",").filter((function(e){return n.indexOf(e.toLowerCase())>-1}));s()(this).css("display",e.length>0?"block":"none")}}))}))}});function v(e){var t=p(e);window.sessionStorage.setItem("activeGalaxyTour",JSON.stringify(e));var n=new u(r.default.extend({steps:t.steps},f));return n.init(),n.goTo(0),n.restart(),n}function y(e){var t="".concat(h,"api/tours/").concat(e);s.a.getJSON(t,(function(e){v(e)}))}t.a={ToursView:g,giveTourWithData:v,giveTourById:y,activeGalaxyTourRunner:function(){var e=JSON.parse(window.sessionStorage.getItem("activeGalaxyTour"));if(e&&(e=p(e))&&e.steps&&window&&window.self===window.top){var t=new u(r.default.extend({steps:e.steps},f));t.init(),t.restart()}}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=new(n(8).default),a={created:function(){this.eventHub=i}},r={install:function(e){e.mixin(a)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(212),a=n(801),r=n(796),o=function(e){return function(t){e&&console.log("[".concat(e,"] next"),t)}},s=function(e){return function(t){e&&console.warn("[".concat(e,"] error"),t)}},l=function(e){return function(){e&&console.log("[".concat(e,"] complete"))}},c={methods:{watch$:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={immediate:t};return this.$watchAsObservable(e,n).pipe(Object(r.a)("newValue"))},listenTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t instanceof Function?{next:t}:t,i=n.label,r=void 0===i?null:i,c=n.next,d=void 0===c?o(r):c,u=n.error,h=void 0===u?s(r):u,f=n.complete,p=void 0===f?l(r):f;Object(a.a)(e)?this.$subscribeTo(e,d,h,p):console.warn("Object provided to listenTo was not an observable")}}},d={install:function(e){e.use(i.a),e.mixin(c)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(267),a=n(459);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,i,r=c(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),r.apply(this,arguments)}return t=d,(n=[{key:"loadProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.contents_url)throw new Error("missing contents_url",e);s(u(d.prototype),"loadProps",this).call(this,e)}},{key:"totalElements",get:function(){return"element_count"in this?this.element_count:"paired"==this.collection_type?2:void 0}},{key:"collectionCountDescription",get:function(){var e=this.totalElements;return 1==e?"with 1 item":"with ".concat(e," items")}},{key:"collectionType",get:function(){if(this.collection_type)switch(this.collection_type){case"list":return"list";case"paired":return"dataset pair";case"list:paired":return"list of pairs";default:return"nested list"}return null}},{key:"state",get:function(){return this.jobSummary.state||this.populated_state}},{key:"jobSummary",get:function(){return new a.a(this)}}])&&o(t.prototype,n),i&&o(t,i),d}(i.a);h.equals=function(e,t){return JSON.stringify(e)==JSON.stringify(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r}));var i=function(){return sessionStorage.getItem("useBetaHistory")},a=function(){sessionStorage.removeItem("useBetaHistory"),location.reload()},r=function(){sessionStorage.setItem("useBetaHistory",1),location.reload(!1)}},,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return h}));var i=n(7),a=n.n(i),r=n(6),o=n(2),s=n.n(o),l="root/login?is_logout_redirect=true";function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.a)(),n=t.session_csrf_token,i="".concat(t.root,"user/logout?session_csrf_token=").concat(n,"&logout_all=").concat(e);a.a.get(i).then((function(e){if(t.user&&t.user.clearSessionStorage(),t.config.enable_oidc){var n=localStorage.getItem("galaxy-provider");return n?(localStorage.removeItem("galaxy-provider"),a.a.get("".concat(t.root,"authnz/logout?provider=").concat(n))):a.a.get("".concat(t.root,"authnz/logout"))}return e})).then((function(e){var n;(null===(n=e.data)||void 0===n?void 0:n.redirect_uri)?window.top.location.href=e.data.redirect_uri:window.top.location.href="".concat(t.root).concat(l)}))}function d(){return c(!0)}function u(){var e,t=Object(r.a)();null===(e=t.user)||void 0===e||e.clearSessionStorage(),window.top.location.href="".concat(t.root).concat(l)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.a)(),n=t.config,i=n.version_minor,a=n.version_major,o=e.release_doc_base_url,l="dev"==i?"https://docs.galaxyproject.org/en/latest/releases/index.html":"".concat(o).concat(a,"/releases/").concat(a,"_announce_user.html"),d=[];d.push({id:"analysis",url:"",tooltip:s()("Tools and Current History"),icon:"fa-home"}),d.push({id:"workflow",title:s()("Workflow"),tooltip:s()("Chain tools into workflows"),disabled:!t.user.id,url:"workflows/list",target:"__use_router__"}),t.config.visualizations_visible&&d.push({id:"visualization",title:s()("Visualize"),url:"javascript:void(0)",tooltip:s()("Visualize datasets"),disabled:!t.user.id,menu:[{title:s()("Create Visualization"),url:"visualizations",target:"__use_router__"},{title:s()("Interactive Environments"),url:"visualization/gie_list",target:"galaxy_main"}]}),t.config.single_user?d.push({title:s()("Data Libraries"),url:"libraries",id:"libraries"}):d.push({id:"shared",title:s()("Shared Data"),url:"javascript:void(0)",tooltip:s()("Access published resources"),menu:[{title:s()("Data Libraries"),url:"libraries"},{title:s()("Histories"),url:"histories/list_published",target:"__use_router__"},{title:s()("Workflows"),url:"workflows/list_published",target:"__use_router__"},{title:s()("Visualizations"),url:"visualizations/list_published",target:"__use_router__"},{title:s()("Pages"),url:"pages/list_published",target:"__use_router__"}]}),t.user.get("is_admin")&&d.push({id:"admin",title:s()("Admin"),url:"admin",tooltip:s()("Administer this Galaxy"),cls:"admin-only"});var u={id:"help",title:s()("Help"),url:"javascript:void(0)",tooltip:s()("Support, contact, and community"),menu:[{title:s()("Support"),url:e.support_url,target:"_blank"},{title:s()("Search"),url:e.search_url,target:"_blank"},{title:s()("Mailing Lists"),url:e.mailing_lists,target:"_blank"},{title:s()("Videos"),url:e.screencasts_url,target:"_blank"},{title:s()("Wiki"),url:e.wiki_url,target:"_blank"},{title:s()("How to Cite Galaxy"),url:e.citation_url,target:"_blank"},{title:s()("Interactive Tours"),url:"tours"},{title:s()("Galaxy Version: "+t.config.version_major),url:l,target:"_blank"}]};e.terms_url&&u.menu.push({title:s()("Terms and Conditions"),url:e.terms_url,target:"_blank"}),e.helpsite_url&&u.menu.unshift({title:s()("Galaxy Help"),url:e.helpsite_url,target:"_blank"}),d.push(u);var h={};return t.user.id?(h={id:"user",title:s()("User"),cls:"loggedin-only",url:"javascript:void(0)",tooltip:s()("Account and saved data"),menu:[{title:"".concat(s()("Logged in as")," ").concat(t.user.get("email")),disabled:!0},{title:s()("Preferences"),url:"user",target:"__use_router__"},{title:s()("Custom Builds"),url:"custom_builds",target:"__use_router__"},{divider:!0},{title:s()("Logout"),onclick:c,hidden:t.config.single_user},{title:s()("Datasets"),url:"datasets/list",target:"__use_router__"},{title:s()("Histories"),url:"histories/list",target:"__use_router__"},{title:s()("Histories shared with me"),url:"histories/list_shared",target:"__use_router__",hidden:t.config.single_user},{title:s()("Pages"),url:"pages/list",target:"__use_router__"},{title:s()("Workflow Invocations"),url:"workflows/invocations",target:"__use_router__"}]},t.config.visualizations_visible&&h.menu.push({title:s()("Visualizations"),url:"visualizations/list",target:"__use_router__"}),t.config.interactivetools_enable&&(h.menu.push({divider:!0}),h.menu.push({title:s()("Active InteractiveTools"),url:"interactivetool_entry_points/list",target:"__use_router__"}))):h=e.allow_user_creation?{id:"user",title:s()("Login or Register"),cls:"loggedout-only",url:"login",tooltip:s()("Log in or register a new account")}:{id:"user",title:s()("Login"),cls:"loggedout-only",tooltip:s()("Login"),url:"login",noscratchbook:!0},d.push(h),d}},,,,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=a.a,o=window._l||function(e){return e};function s(e,t){var n=27,i=13,s=r(e),l=!0;function c(e){r(this).closest(".search-control").children("input").val("").trigger("searchInput.clear").blur(),t.onclear()}function d(e,n){if(!n)return c();r(this).trigger("search.search",n),"function"==typeof t.onfirstsearch&&l?(l=!1,t.onfirstsearch(n)):t.onsearch(n)}if("string"===a.a.type(t))return"toggle-loading"===t&&(s.find(".search-loading").toggle(),s.find(".search-clear").toggle()),s;"object"===a.a.type(t)&&(t=a.a.extend(!0,{},{initialVal:"",name:"search",placeholder:"search",classes:"",onclear:function(){},onfirstsearch:null,onsearch:function(e){},minSearchLen:0,escWillClear:!0,advsearchlink:!1,oninit:function(){}},t));var u=[r(['<span class="search-clear fa fa-times-circle" ','title="',o("clear search (esc)"),'"></span>'].join("")).tooltip({placement:"bottom"}).click((function(e){c.call(this,e)})),r(['<span class="search-loading fa fa-spinner fa-spin" ','title="',o("loading..."),'"></span>'].join("")).hide().tooltip({placement:"bottom"})];t.advsearchlink&&u.push(r(['<a tabindex="0" ','class="search-advanced fa fa-question-circle" ','data-toggle="advSearchPopover" ','data-trigger="focus" ','data-placement="bottom" ','data-content="',o("<p>You can use advanced searches here using keywords and syntax like <em>name=mydataset</em> or <em>state=error</em>."),"<br/>",o("Supported keywords are <em>name, format, database, annotation, description, info, tag, hid, and state</em>."),"<br/>",o("To learn more visit "),"<a href='https://galaxyproject.org/tutorials/histories/#advanced-searching' target='_blank'>",o("the Hub"),'.</a></p>" title="',o("Search tips"),'"></a>'].join("")).tooltip({placement:"top",trigger:"hover"}).click((function(){r(this).popover({trigger:"focus",html:!0,container:"body"}).popover("show")})));var h=r('<div class "search-button-panel"></div>');return r(h).prepend(u),s.addClass("search-input").prepend([r(['<input type="text" name="',t.name,'" placeholder="',t.placeholder,'" ','class="search-query ',t.classes,'" ',"/>"].join("")).focus((function(e){r(this).select()})).keyup((function(e){if(e.preventDefault(),e.stopPropagation(),e.which===n&&t.escWillClear)c.call(this,e);else{var a=r(this).val();(e.which===i||t.minSearchLen&&a.length>=t.minSearchLen)&&d.call(this,e,a)}})).val(t.initialVal),r(h)])}a.a.fn.extend({searchInput:function(e){return this.each((function(){return s(this,e)}))}})},,function(e,t,n){"use strict";var i=n(33),a=n(155);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={props:{user:{type:Object,required:!0}},computed:o(o({},Object(i.c)("betaHistory",["currentHistoryId","currentHistory","histories"])),{},{currentHistoryModel:function(){return null!==this.currentHistory?new a.a(this.currentHistory):null},historyModels:function(){return this.histories.map((function(e){return new a.a(e)}))}}),methods:o({},Object(i.b)("betaHistory",["loadHistoryById","createNewHistory","updateHistory","deleteHistory","setCurrentHistoryId","setHistory","loadUserHistories","secureHistory"])),watch:{user:{immediate:!0,handler:function(){this.loadUserHistories()}},currentHistoryId:function(e){this.loadHistoryById(e)}},render:function(){var e,t=this;return this.$scopedSlots.default({histories:this.historyModels,currentHistory:this.currentHistoryModel,currentHistoryId:(null===(e=this.currentHistoryModel)||void 0===e?void 0:e.id)||null,handlers:{setHistory:this.setHistory,setCurrentHistory:function(e){return t.setCurrentHistoryId(e.id)},createNewHistory:this.createNewHistory,updateHistory:this.updateHistory,updateCurrentHistory:function(){return t.updateHistory(t.currentHistory)},deleteHistory:function(e){return t.deleteHistory({history:e})},deleteCurrentHistory:function(){return t.deleteHistory({history:t.currentHistory})},purgeHistory:function(e){return t.deleteHistory({history:e,purge:!0})},purgeCurrentHistory:function(){return t.deleteHistory({history:t.currentHistory,purge:!0})},secureHistory:this.secureHistory}})}};t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(7),a=n.n(i),r=n(21),o=n(3);function s(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){s(r,i,a,o,l,"next",e)}function l(e){s(r,i,a,o,l,"throw",e)}o(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(o.getAppRoot)()}var t,n,i,s,d;return t=e,(n=[{key:"getFileSources",value:(d=l(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.root,"api/remote_files/plugins"),e.prev=1,e.next=4,a.a.get(t);case 4:return n=e.sent,i=n.data,e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(1),Object(r.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"list",value:(s=l(regeneratorRuntime.mark((function e(t){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/remote_files?target=").concat(t),e.prev=1,e.next=4,a.a.get(n);case 4:return i=e.sent,o=i.data,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(1),Object(r.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return s.apply(this,arguments)})}])&&c(t.prototype,n),i&&c(t,i),e}()},function(e,t,n){"use strict";function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}t.a={computed:{isNew:function(){return!this.jobStatesSummary||this.jobStatesSummary.new()},isErrored:function(){return this.jobStatesSummary&&this.jobStatesSummary.errored()},isTerminal:function(){return this.jobStatesSummary&&this.jobStatesSummary.terminal()},jobCount:function(){return this.jobStatesSummary?this.jobStatesSummary.jobCount():null},jobsStr:function(){var e=this.jobCount;return e&&e>1?"".concat(e," jobs"):"a job"},runningCount:function(){return this.countStates(["running"])},okCount:function(){return this.countStates(["ok"])},errorCount:function(){return this.countStates(["error"])},newCount:function(){return this.jobCount-this.okCount-this.runningCount-this.errorCount}},methods:{countStates:function(e){var t=0;if(this.jobStatesSummary&&this.jobStatesSummary.hasDetails()){var n,a=i(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;t+=this.jobStatesSummary.states()[r]||0}}catch(e){a.e(e)}finally{a.f()}}return t}}}},function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(105);function s(e,t){(t=t||{}).title=a()("Create a collection from a list of datasets");var i=Object(o.a)(t),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,608)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(a),s}))}t.a={listCollectionCreatorModal:s,createListCollection:function(e,t){var n;return s(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,i,a){return t=t.map((function(e){return{id:e.id,name:e.name,src:"dataset"===e.history_content_type?"hda":"hdca"}})),n=!a,e.createHDCA(t,"list",i,a,n)}})}}},function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(105);function s(e,t){(t=t||{}).title=a()("Create a collection from a pair of datasets");var i=Object(o.a)(t),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,609)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(a),s}))}t.a={pairCollectionCreatorModal:s,createPairCollection:function(e,t){var n;return s(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,i,a){return t=[{name:"forward",src:"hda",id:t[0].id},{name:"reverse",src:"hda",id:t[1].id}],n=!a,e.createHDCA(t,"paired",i,a,n)}})}}},function(e,t,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(105);function s(e,t){(t=t||{}).title=a()("Create a collection of paired datasets");var i=Object(o.a)(t),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,607)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:e,creationFn:t.creationFn,oncancel:t.oncancel,oncreate:t.oncreate,defaultHideSourceItems:t.defaultHideSourceItems}}).$mount(a),s}))}t.a={pairedListCollectionCreatorModal:s,createPairedListCollection:function(e,t){var n;return s(e.toJSON(),{defaultHideSourceItems:t,creationFn:function(t,i,a){return t=t.map((function(e){return{collection_type:"paired",src:"new_collection",name:e.name,element_identifiers:[{name:"forward",id:e.forward.id,src:e.forward.src||"hda"},{name:"reverse",id:e.reverse.id,src:e.reverse.src||"hda"}]}})),n=!a,e.createHDCA(t,"list:paired",i,a,n)}})}}},function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=n(6),s=n(2),l=n.n(s),c=n(72),d=n(167),u=n(18),h=n(56),f=n(113),p=n(23),m=n(20),_=n(17),g=n(269),v=n(271),y=n(207),b={components:{CreatorViewer:n(203).a},props:{title:{type:String,default:""},creators:{type:Array}}},w=n(5),k=Object(w.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",[this._v("\n    "+this._s(this.title)+"\n    "),this._l(this.creators,(function(e,n){return t("div",{key:n},[t("CreatorViewer",{attrs:{creator:e}})],1)}))],2)}),[],!1,null,null,null).exports,x=n(107);m.c.add(_.B,_.j,_.a,_.c);var S={components:{Citation:v.a,License:y.a,Creators:k,FontAwesomeIcon:p.a},props:{id:{type:String},hasCitations:{type:Boolean,default:!0},xrefs:{type:Array},license:{type:String},creators:{type:Array},requirements:{type:Array}},computed:{hasRequirements:function(){return this.requirements&&this.requirements.length>0},hasReferences:function(){return this.xrefs&&this.xrefs.length>0},hasCreators:function(){return this.creators&&this.creators.length>0},hasLicense:function(){return!!this.license},hasContent:function(){return this.hasRequirements||this.hasReferences||this.hasCreators||this.hasCitations||this.hasLicense}},data:function(){return{citations:[]}},created:function(){var e=this;this.hasCitations&&Object(g.a)("tools",this.id).then((function(t){e.citations=t})).catch((function(e){console.error(e)}))},methods:{copyBibtex:function(){var e="";this.citations.forEach((function(t){var n=t.cite.format("bibtex",{});e+=n})),Object(x.a)(e,"Citations copied to your clipboard as BibTeX")}}},C=Object(w.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasContent?n("b-card",{staticClass:"tool-footer"},[e.hasCitations?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[e._v("Citations:")]),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{cursor:"pointer"},attrs:{title:"Copy all citations as BibTeX",icon:"copy"},on:{click:e.copyBibtex}}),e._v(" "),e._l(e.citations,(function(e,t){return n("Citation",{key:t,staticClass:"formatted-reference",attrs:{citation:e,"output-format":"bibliography",prefix:"-"}})}))],2):e._e(),e._v(" "),e.hasRequirements?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[e._v("Requirements:\n            "),n("a",{attrs:{href:"https://galaxyproject.org/tools/requirements/",target:"_blank"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Learn more about Galaxy Requirements",icon:"question"}})],1)]),e._v(" "),e._l(e.requirements,(function(t,i){return n("div",{key:i},[e._v("\n            - "+e._s(t.name)+"\n            "),t.version?n("span",[e._v(" (Version "+e._s(t.version)+") ")]):e._e()])}))],2):e._e(),e._v(" "),e.hasLicense?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[e._v("License:")]),e._v(" "),n("License",{attrs:{"license-id":e.license}})],1):e._e(),e._v(" "),e.hasReferences?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[e._v("References:")]),e._v(" "),e._l(e.xrefs,(function(t,i){return n("div",{key:i},[e._v("\n            - "+e._s(t.reftype)+":\n            "),"bio.tools"==t.reftype?[e._v("\n                "+e._s(t.value)+"\n                ("),n("a",{attrs:{href:"https://bio.tools/"+t.value,target:"_blank"}},[e._v("\n                    bio.tools\n                    "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit bio.tools reference",icon:"external-link-alt"}})],1),e._v(") ("),n("a",{attrs:{href:"https://openebench.bsc.es/tool/"+t.value,target:"_blank"}},[e._v("OpenEBench\n                    "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit OpenEBench reference",icon:"external-link-alt"}})],1),e._v(")\n            ")]:[e._v("\n                "+e._s(t.value)+"\n            ")]],2)}))],2):e._e(),e._v(" "),e.hasCreators?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[e._v("Creators:")]),e._v(" "),n("Creators",{attrs:{creators:e.creators}})],1):e._e()]):e._e()}),[],!1,null,null,null).exports,M=n(8),T=n(7),j=n.n(T);t.a=h.a.extend({initialize:function(e){var t=Object(o.a)(),n=this;this.deferred=new d.a,h.a.prototype.initialize.call(this,e),this._update(),this.model.get("listen_to_history")&&t.currHistoryPanel&&this.listenTo(t.currHistoryPanel.collection,"change",(function(){n.model.get("onchange")()})),this.$el.on("remove",(function(){n._destroy()}))},_update:function(){var e=this,t=this.model.get("buildmodel");t?(this.deferred.reset(),this.deferred.execute((function(n){t(n,e),n.then((function(){e._render()}))}))):this._render()},_destroy:function(){var e=this;this.$el.off().hide(),this.deferred.execute((function(){h.a.prototype.remove.call(e),Object(o.a)().emit.debug("tool-form-base::_destroy()","Destroy view.")}))},_render:function(){var e=this,t=this.model.attributes;t.setupToolMicrodata&&(this.$el.attr("itemscope","itemscope"),this.$el.attr("itemtype","https://schema.org/CreativeWork")),this.model.set({title:t.fixed_title||'<b itemprop="name">'.concat(t.name,'</b> <span itemprop="description">').concat(t.description,"</span> (Galaxy Version ").concat(t.version,")"),operations:!t.hide_operations&&this._operations(),onchange:function(){e.deferred.reset(),e.deferred.execute((function(t){e.model.get("postchange")(t,e)}))}}),this.render(),this.model.get("collapsible")||this.$el.append(a()("<div/>").addClass("mt-2").append(this._footer())),t.tool_errors&&this.message.update({status:"danger",message:t.tool_errors,persistent:!0}),this.show_message&&this.message.update({status:"success",message:"Now you are using '".concat(t.name,"' version ").concat(t.version,", id '").concat(t.id,"'."),persistent:!1}),this.show_message=!0},_operations:function(){var e=this,t=this.model.attributes,n=Object(o.a)(),i=n.user.getFavorites().tools.indexOf(t.id)>=0,a=new u.a.Button({icon:"fa-star-o",title:t.narrow?null:"Favorite",tooltip:"Add to favorites",visible:!n.user.isAnonymous()&&!i,onclick:function(){j.a.put("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools"),{object_id:t.id}).then((function(e){a.hide(),s.show(),n.user.updateFavorites("tools",e.data),Object(c.a)("added to favorites")}))}}),s=new u.a.Button({icon:"fa-star",title:t.narrow?null:"Added",tooltip:"Remove from favorites",visible:!n.user.isAnonymous()&&i,onclick:function(){j.a.delete("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools/").concat(encodeURIComponent(t.id))).then((function(e){s.hide(),a.show(),n.user.updateFavorites("tools",e.data),Object(c.a)("removed from favorites")}))}}),d=new u.a.ButtonMenu({icon:"fa-cubes",cls:"btn btn-secondary float-right tool-versions",title:t.narrow?null:"Versions",tooltip:"Select another tool version"});if(!t.sustain_version&&t.versions&&t.versions.length>1)for(var h in t.versions.reverse()){var p=t.versions[h];p!=t.version&&d.addMenu({title:"Switch to ".concat(p),version:p,icon:"fa-cube",onclick:function(){e.model.set("id",t.id.replace(t.version,this.version)),e.model.set("version",this.version),e.model.get("onchange")(),e._update()}})}else d.$el.hide();var m=new u.a.ButtonMenu({id:"options",icon:"fa-caret-down",title:t.narrow?null:"Options",tooltip:"View available options"});return m.addMenu({icon:"fa-chain",title:l()("Copy link"),onclick:function(){Object(x.a)("".concat(window.location.origin+Object(r.getAppRoot)(),"root?tool_id=").concat(t.id),"Link was copied to your clipboard")}}),m.addMenu({icon:"fa-files-o",title:l()("Copy Tool ID"),onclick:function(){Object(x.a)("".concat(t.id),"Tool ID was copied to your clipboard")}}),n.user&&n.user.get("is_admin")&&m.addMenu({icon:"fa-download",title:l()("Download"),onclick:function(){window.location.href="".concat(Object(r.getAppRoot)(),"api/tools/").concat(t.id,"/download")}}),t.sharable_url&&m.addMenu({icon:"fa-external-link",title:l()("See in Tool Shed"),onclick:function(){window.open(t.sharable_url)}}),f.a.load({type:"tool-menu",callback:function(e){e.each((function(e){var n=e.toJSON();n.activate&&n.config.function&&m.addMenu({icon:n.config.icon,title:n.config.title,onclick:function(){new Function("options",n.config.function)(t)}})}))}}),{menu:m,versions:d,favorite:a,remove_favorite:s}},_footer:function(){var e=this.model.attributes,t=a()("<div/>").append(this._templateHelp(e)),n=M.default.extend(C),i=document.createElement("div");return t.append(i),new n({propsData:{id:e.id,hasCitations:e.citations,xrefs:e.xrefs,license:e.license,creators:e.creator,requirements:e.requirements}}).$mount(i),t},_templateHelp:function(e){var t=a()("<div/>").addClass("form-help form-text mt-4").append(e.help);return t.find("a").attr("target","_blank"),t.find("img").each((function(){var e=a()(this).attr("src");-1!==e.indexOf("admin_toolshed")&&a()(this).attr("src",Object(r.getAppRoot)()+e)})),t}})},function(e,t,n){"use strict";var i={components:{StatelessTags:n(134).a},props:{index:{type:Number},tags:{type:Array}},methods:{onInput:function(e){this.$emit("input",e,this.index)}}},a=n(5),r=Object(a.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("StatelessTags",{attrs:{value:this.tags},on:{input:this.onInput}})}),[],!1,null,null,null);t.a=r.exports},function(e,t,n){"use strict";var i={props:{total:{type:Number,default:1},note:{type:String,default:null},loading:{type:Boolean,default:!1},okCount:{type:Number,default:0},runningCount:{type:Number,default:0},newCount:{type:Number,default:0},errorCount:{type:Number,default:0}}},a=(n(553),n(5)),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-1 progressContainer"},[e.note?n("small",{staticClass:"progressNote"},[e._v("\n        "+e._s(e.note)),e.loading?n("span",[e._v("."),n("span",{staticClass:"blinking"},[e._v("..")])]):e._e()]):e._e(),e._v(" "),n("b-progress",{attrs:{max:e.total}},[n("b-progress-bar",{attrs:{variant:"success",value:e.okCount}}),e._v(" "),n("b-progress-bar",{attrs:{variant:"danger",value:e.errorCount}}),e._v(" "),n("b-progress-bar",{attrs:{variant:"warning",value:e.runningCount}}),e._v(" "),n("b-progress-bar",{attrs:{variant:"warning",value:e.newCount}})],1)],1)}),[],!1,null,"0f277a9c",null);t.a=r.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(6),a=n(41),r=n(2),o=n.n(r),s={methods:{redirect:function(e){console.log("legacyNavigation: go",e),Object(a.c)(Object(a.b)(e))},iframeAdd:function(e){var t=e.path,n=e.title,r=void 0===n?"Galaxy":n,s=e.tryIframe,l=void 0===s||s,c=Object(i.a)();return c.frame&&c.frame.active?(c.frame.add({url:Object(a.b)(t),title:o()(r)}),!0):!!l&&this.iframeRedirect(t)},iframeRedirect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"galaxy_main";try{var n=window.frames[t];if(!n)throw new Error("Requested frame ".concat(t," doesn't exist"));return n.location=Object(a.b)(e),!0}catch(e){var i;throw(i=console).warn.apply(i,["Failed iframe redirect",e].concat(Array.prototype.slice.call(arguments))),e}},backboneRoute:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{var o;(o=Object(i.a)().router).push.apply(o,[Object(a.b)(e)].concat(n))}catch(e){var s;throw(s=console).warn.apply(s,["Failed galaxy route change",e].concat(Array.prototype.slice.call(arguments))),e}},useGalaxy:function(e){return e(Object(i.a)())},prependPath:a.b}}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(589),a=n.n(i),r=n(1);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=/(\w+=\w+)|(\w+="(\w|\s)+")/g,d=/[^\w]/g,u=/'|"/g,h=new Set(["name","history_content_type","type","format","extension","misc_info","state","hid","database","annotation","description","tag","tags"]),f={format:"file_ext",database:"genome_build",description:"annotation",tag:"tags",deleted:"isDeleted",type:"history_content_type"},p={tags:"tag",file_ext:null,genome_build:null},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.filterText="",this.showDeleted=!1,this.showHidden=!1,Object.assign(this,t)}var t,n,i;return t=e,(n=[{key:"clone",value:function(){return new e(this)}},{key:"export",value:function(){return{filterText:this.filterText,showDeleted:this.showDeleted,showHidden:this.showHidden}}},{key:"getPouchFieldName",value:function(e){var t=e.replace(d,"");return t in f?f[t]:t}},{key:"getServerFieldName",value:function(e){var t=e.replace(d,"");return t in p?p[t]:t}},{key:"report",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"params",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.showDeleted,i=this.showHidden,a=this.filterText,r=t?console.groupCollapsed:console.group;r.call(console,e),console.log("showDeleted",n),console.log("showHidden",i),console.log("filterText",a),console.groupEnd()}},{key:"pageSize",get:function(){return e.pageSize}},{key:"textCriteria",get:function(){var e=this.filterText,t=new Map;if(!e.length)return t;var n=e.match(c);return null===n&&e.length&&(n=["name=".concat(e)]),n.reduce((function(e,t){var n=o(t.split("="),2),i=n[0],a=n[1];if(h.has(i)){var r=a.replace(u,"");e.has(i)&&(r=[e.get(i),r].flat()),e.set(i,r)}return e}),t)}},{key:"criteria",get:function(){var e=new Map(this.textCriteria);return e.set("visible",!this.showHidden),e.set("deleted",this.showDeleted),e}},{key:"pouchFilters",get:function(){var e=this;return Array.from(this.criteria).map((function(t){var n=o(t,2),i=n[0],a=n[1];return[e.getPouchFieldName(i),a]})).map((function(e){var t=o(e,2),n=t[0],i=t[1];return(Array.isArray(i)?i:[i]).map((function(e){return[n,e]}))})).flat().map((function(e){var t,n,i,a=o(e,2),s=a[0],l=a[1],c=Object(r.isString)(l)?{$regex:new RegExp(l)}:{$eq:l};return i=c,(n=s)in(t={})?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}))}},{key:"historyContentQueryFields",get:function(){var e=this;return Array.from(this.criteria).map((function(t){var n=o(t,2),i=n[0],a=n[1],r=e.getServerFieldName(i),s=a;switch(r){case null:return[];case"annotation":case"description":return[];case"deleted":case"visible":s=function(e){return e?"True":"False"}(a);break;case"hid":case"state":case"history_content_type":case"type":break;default:r+="-contains",s=encodeURIComponent(a)}return[r,s]})).filter((function(e){return 2==e.length})).reduce((function(e,t){var n=o(t,2),i=n[0],a=n[1];return e[i]=a,e}),{})}},{key:"legacyContentQueryString",get:function(){return Object.entries(this.historyContentQueryFields).map((function(e){var t=o(e,2),n=t[0],i=t[1];return"q=".concat(n,"&qv=").concat(i)})).join("&")}},{key:"historyContentQueryString",get:function(){return Object.entries(this.historyContentQueryFields).map((function(e){var t=o(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)})).join("&")}}])&&l(t.prototype,n),i&&l(t,i),e}();m.pageSize=30,m.equals=function(e,t){return void 0!==e&&void 0!==t&&a()(e.export(),t.export())}},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t?(t=l(t),e.map((function(e){var n=[];return e.elems&&e.elems.forEach((function(e){(!e.text&&t.includes(e.id)||e.tool_shed_repository&&t.includes(e.tool_shed_repository.name))&&n.push(e)})),n.sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)})),a(a({},e),{},{elems:n})})).filter((function(e){var n=e.elems&&e.elems.length>0,i=!e.text&&t.includes(e.id);return n||i})).sort((function(e,n){return 0==e.elems.length||0==n.elems.length?0:t.indexOf(e.elems[0].id)-t.indexOf(n.elems[0].id)}))):e}function s(e,t){if(e=e.filter((function(e){return"Expression Tools"!==e.name})),t){t=l(t);var n=[];return t.length<1?n:(e.map((function(e){e.elems?e.elems.forEach((function(e){(!e.text&&t.includes(e.id)||e.tool_shed_repository&&t.includes(e.tool_shed_repository.name))&&n.push(e)})):!e.text&&t.includes(e.id)&&n.push(e)})),n.sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)})))}return e}function l(e){var t=[];return e.forEach((function(e){t.push(e),e.includes("/repos/")&&t.push(e.split("/repos/")[1].split("/")[2])})),t}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}))},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(2),a=n.n(i),r=/\r?\n|\r/g,o=/\s\s+/g,s={bind:function(e,t,n){e.childNodes.forEach((function(e){var t=e.textContent.replace(r," ").replace(o," ");e.textContent=a()(t)}))}},l={methods:{l:a.a,localize:a.a}},c={install:function(e){e.filter("localize",a.a),e.filter("l",a.a),e.directive("localize",s),e.mixin(l)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return r}));var i=n(135),a=n(38),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelectorAll(".job-metrics");Array.prototype.forEach.call(t,(function(t,n){var r=t.getAttribute("job_id"),o=t.getAttribute("aws_estimate"),s=t.getAttribute("dataset_id"),l=t.getAttribute("dataset_type")||"hda";e.jobId=r,e.datasetId=s,e.datasetType=l,e.aws_estimate=o,Object(a.a)(i.a)(e,t)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return r}));var i=n(119),a=n(38),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelectorAll(".job-parameters");Array.prototype.forEach.call(t,(function(t,n){var r=t.getAttribute("job_id"),o=t.getAttribute("dataset_id"),s=t.getAttribute("param")||void 0,l=t.getAttribute("dataset_type")||"hda";e.jobId=r,e.datasetId=o,e.param=s,e.datasetType=l,Object(a.a)(i.a)(e,t)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(675),a=n(152);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change";return Object(i.a)(e,t).pipe(Object(a.a)((function(e){return r(e,1)[0].toJSON()})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(797),a=n(800),r=n(152),o=n(221),s=n(798),l=n(799);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.spamTime,c=void 0===n?100:n,d=t.timeout,u=void 0===d?1e4:d,h=t.isValid,f=void 0===h?function(e){return void 0!==e}:h;return Object(i.a)(c).pipe(Object(r.a)((function(){return e()})),Object(o.a)(f),Object(s.a)(1),Object(l.a)(Object(a.a)(u)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(171);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u={accessible:!1,update_time:0},h="dataset",f="dataset_collection",p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,i,a=l(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"loadProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},u,e);o(d(c.prototype),"loadProps",this).call(this,t)}},{key:"title",get:function(){var e=this.name,t=this.element_identifier,n=this.visible,i=this.purged,a=t||e,r=[];return 0!=n||t||r.push("Hidden"),i&&r.push("Purged"),r.length&&(a+=" (".concat(r.join(", "),")")),a}},{key:"deleted",get:function(){return this.isDeleted},set:function(e){this.isDeleted=e}},{key:"isDataset",get:function(){return this.history_content_type==h}},{key:"isCollection",get:function(){return this.history_content_type==f}},{key:"hda_id",get:function(){return this.isDataset?this.id:null}},{key:"hdca_id",get:function(){return this.isCollection?this.id:null}},{key:"nameTags",get:function(){return(this.tags||[]).filter((function(e){return e.includes("name:")}))}}])&&r(t.prototype,n),i&&r(t,i),c}(Object(i.b)(i.a))},function(e,t,n){"use strict";var i=n(33);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a={computed:r({},Object(i.c)("user",["currentUser"])),methods:r({},Object(i.b)("user",["loadUser"])),created:function(){this.loadUser()},render:function(){return this.$scopedSlots.default({user:this.currentUser})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(498),l=n.n(s);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e,t){return f.apply(this,arguments)}function f(){var e;return e=regeneratorRuntime.mark((function e(t,n){var i,s,d,u,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.get("".concat(Object(o.getAppRoot)(),"api/").concat(t,"/").concat(n,"/citations"));case 3:i=e.sent,s=i.data,d=[],u=c(s);try{for(u.s();!(h=u.n()).done;){f=h.value;try{p=new l.a(f.content),d.push({raw:f.content,cite:p})}catch(e){console.warn("Error parsing bibtex: ".concat(e))}}}catch(e){u.e(e)}finally{u.f()}return e.abrupt("return",d);case 11:e.prev=11,e.t0=e.catch(0),Object(r.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),(f=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){u(r,i,a,o,s,"next",e)}function s(e){u(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}},function(e,t,n){"use strict";var i=n(8),a=n(14),r=n(94),o=n(6),s=n(229),l=n.n(s),c=n(501),d=n.n(c),u=n(23),h=n(20),f=n(17),p=n(29),m=n(3),_=n(50);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={props:{history_dataset_id:{type:String,required:!0},path:{type:String,default:null}},created:function(){var e=this;this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){var t=e.$store.getters.pathDestination(e.history_dataset_id,e.path);e.imageUrl=t.fileLink})):this.imageUrl="".concat(Object(m.getAppRoot)(),"dataset/display?dataset_id=").concat(this.history_dataset_id)},data:function(){return{imageUrl:void 0}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(_.b)(["fetchPathDestination"]))},b=n(5),w=Object(b.a)(y,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.imageUrl?t("div",{staticClass:"w-50 p-2 float-left"},[t("b-card",{attrs:{nobody:"","body-class":"p-1"}},[t("b-img",{attrs:{src:this.imageUrl,fluid:""}})],1)],1):t("div",[t("b",[this._v("Image is not found")])])])}),[],!1,null,null,null).exports;i.default.use(a.a);var k={components:{DatasetAsImage:w},props:{args:{type:Object,default:null}},computed:{imageUrl:function(){return"".concat(Object(m.getAppRoot)(),"dataset/display?dataset_id=").concat(this.args.history_dataset_id)}}},x=Object(b.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("DatasetAsImage",{attrs:{path:this.args.path,history_dataset_id:this.args.history_dataset_id}})],1)}),[],!1,null,null,null).exports,S=n(7),C=n.n(S);function M(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var T={components:{LoadingSpan:p.a},props:{args:{type:Object,required:!0},datasets:{type:Object,required:!0},embedded:{type:Boolean,default:!1}},data:function(){return{itemContent:null,loading:!0}},created:function(){var e=this;this.getContent().then((function(t){e.itemContent=t,e.loading=!1}))},computed:{datasetName:function(){var e=this.datasets[this.args.history_dataset_id];return e&&e.name},downloadUrl:function(){return"".concat(Object(m.getAppRoot)(),"dataset/display?dataset_id=").concat(this.args.history_dataset_id)},importUrl:function(){return"".concat(Object(m.getAppRoot)(),"dataset/imp?dataset_id=").concat(this.args.history_dataset_id)},itemUrl:function(){return"".concat(Object(m.getAppRoot)(),"api/datasets/").concat(this.args.history_dataset_id,"/get_content_as_text")}},methods:{getContent:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get(t.itemUrl);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","Failed to retrieve content. ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){M(r,i,a,o,s,"next",e)}function s(e){M(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},j=(n(565),Object(b.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[e.embedded?e._e():n("b-card-header",[n("span",{staticClass:"float-right"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Dataset",type:"button"}},[n("span",{staticClass:"fa fa-download"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.importUrl,role:"button",variant:"link",title:"Import Dataset",type:"button"}},[n("span",{staticClass:"fa fa-file-import"})])],1),e._v(" "),n("span",[n("span",[e._v("Dataset:")]),e._v(" "),n("span",{staticClass:"font-weight-light"},[e._v(e._s(e.datasetName))])])]),e._v(" "),n("b-card-body",[e.loading?n("LoadingSpan",{attrs:{message:"Loading Dataset"}}):n("div",{staticClass:"embedded-dataset content-height"},[e.itemContent.item_data?n("pre",[e._v("                    "),n("code",{staticClass:"text-normalwrap"},[e._v(e._s(e.itemContent.item_data))]),e._v("\n                ")]):n("div",[e._v("No content found.")]),e._v(" "),e.itemContent.truncated?n("b-link",{attrs:{href:e.itemContent.item_url}},[e._v(" Show More... ")]):e._e()],1)],1)],1)],1)}),[],!1,null,"c702c28c",null).exports),O=n(164);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={props:{history_dataset_id:{type:String,required:!0},path:{type:String},label:{type:String}},created:function(){var e=this;this.services=new O.a({root:Object(m.getAppRoot)()}),this.pathDestination={},this.path&&"undefined"!==this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){e.pathDestination=e.$store.getters.pathDestination(e.history_dataset_id,e.path)})):this.services.getCompositeDatasetInfo(this.history_dataset_id).then((function(t){e.pathDestination={fileLink:"".concat(t.download_url,"?to_ext=").concat(t.file_ext)}}))},data:function(){return{pathDestination:void 0}},computed:{linkLabel:function(){return this.pathDestination.isDirectory?"Path: ".concat(this.path," is a directory!"):this.pathDestination.fileLink?void 0!==this.label&&"undefined"!==this.label?this.label:"".concat(this.pathDestination.datasetRootDir&&this.path?"DATASET: ".concat(this.pathDestination.datasetRootDir," FILEPATH: ").concat(this.path):"".concat(this.history_dataset_id)," "):"Path: ".concat(this.path," was not found!")}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(_.b)(["fetchPathDestination"]))},A={components:{DatasetLink:Object(b.a)(E,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("a",{attrs:{href:this.pathDestination.fileLink,title:"test",target:"_blank"}},[this._v(this._s(this.linkLabel))])])}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}},I=Object(b.a)(A,(function(){var e=this.$createElement;return(this._self._c||e)("DatasetLink",{staticClass:"dataset-link",attrs:{history_dataset_id:this.args.history_dataset_id,path:this.args.path,label:this.args.label}})}),[],!1,null,null,null).exports;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H={props:{history_dataset_id:{type:String,required:!0},path:{type:String}},created:function(){var e=this;this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){var t=e.$store.getters.pathDestination(e.history_dataset_id,e.path);t?t.fileLink?e.errorMessage="is not a directory!":t.isDirectory?e.directoryContent=e.removeParentDirectory(t.datasetContent,t.filepath):void 0===e.path||"undefined"===e.path?e.directoryContent=t.datasetContent:e.errorMessage="is not found!":e.errorMessage="Dataset is not composite!"}))},data:function(){return{directoryContent:!1,fields:[{key:"path",sortable:!0},{key:"class",label:"Type",sortable:!0}],errorMessage:void 0}},methods:Y(Y({},Object(_.b)(["fetchPathDestination"])),{},{removeParentDirectory:function(e,t){return e.filter((function(e){if(e.path.startsWith("".concat(t,"/")))return e.path=e.path.replace("".concat(t,"/"),""),e}))}})},N={components:{DatasetIndex:Object(b.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.directoryContent&&!e.errorMessage?n("b-table",{attrs:{"thead-class":"hidden_header",striped:"",hover:"",fields:e.fields,items:e.directoryContent}}):e._e(),e._v(" "),e.errorMessage?n("div",[e.path?n("b",[e._v(e._s(e.path))]):e._e(),e._v(" "+e._s(e.errorMessage)+"\n    ")]):e._e()],1)}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}},$=Object(b.a)(N,(function(){var e=this.$createElement;return(this._self._c||e)("DatasetIndex",{staticClass:"dataset-index",attrs:{history_dataset_id:this.args.history_dataset_id,path:this.args.path}})}),[],!1,null,null,null).exports,F={name:"CollectionNode",props:{node:{type:Object,default:null},skipHead:{type:Boolean,default:!1}},computed:{name:function(){return this.node&&(this.node.name||this.node.element_identifier||"n/a")},miscInfo:function(){return this.node&&this.node.object&&this.node.object.misc_info},peek:function(){return this.node&&this.node.object&&this.node.object.peek},url:function(){return this.node&&this.node.object&&this.node.object.url},error:function(){return this.node&&this.node.object&&"error"===this.node.object.status}}};function W(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var z={components:{CollectionTree:Object(b.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.skipHead?e._e():n("span",{staticClass:"label"},[n("b",[e._v(e._s(e.name))])]),e._v(" "),e.error?n("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Error: "+e._s(e.error))]):e._e(),e._v(" "),e.miscInfo?n("pre",[n("code",{domProps:{innerHTML:e._s(e.miscInfo)}})]):e._e(),e._v(" "),e.peek?n("pre",[n("code",{domProps:{innerHTML:e._s(e.peek)}})]):e._e(),e._v(" "),e.node&&e.node.elements&&e.node.elements.length?n("div",{class:{"ml-3":!e.skipHead}},e._l(e.node.elements,(function(e){return n("CollectionNode",{key:e.id,attrs:{node:e}})})),1):e._e()],1)}),[],!1,null,null,null).exports,LoadingSpan:p.a},props:{args:{type:Object,default:null},collections:{type:Object,default:null}},data:function(){return{itemContent:null,loading:!0}},created:function(){var e=this;this.getContent().then((function(t){e.itemContent=t,e.loading=!1}))},computed:{collectionName:function(){var e=this.collections[this.args.history_dataset_collection_id];return e&&e.name},itemUrl:function(){var e=this.args.history_dataset_collection_id;return this.collections[e].url},downloadUrl:function(){return"".concat(Object(m.getAppRoot)(),"api/dataset_collections/").concat(this.args.history_dataset_collection_id,"/download")}},methods:{getContent:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get(t.itemUrl);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","Failed to retrieve content. ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){W(r,i,a,o,s,"next",e)}function s(e){W(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},U=(n(566),Object(b.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[n("b-card-header",[n("span",{staticClass:"float-right"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Collection",type:"button"}},[n("span",{staticClass:"fa fa-download"})])],1),e._v(" "),n("span",[n("span",[e._v("Dataset Collection:")]),e._v(" "),n("span",{staticClass:"font-weight-light"},[e._v(e._s(e.collectionName))])])]),e._v(" "),n("b-card-body",[e.loading?n("LoadingSpan",{attrs:{message:"Loading Collection"}}):n("div",{staticClass:"content-height"},[n("CollectionTree",{attrs:{node:e.itemContent,"skip-head":!0}})],1)],1)],1)],1)}),[],!1,null,"0e20b8a6",null).exports),V={history_dataset_name:"name",history_dataset_info:"info",history_dataset_peek:"peek",history_dataset_type:"ext"},B={props:{args:{type:Object,required:!0},datasets:{type:Object,default:null},name:{type:String,default:null}},computed:{getClass:function(){return"dataset-".concat(V[this.name])},content:function(){var e=this.datasets[this.args.history_dataset_id];return e&&e[V[this.name]]}}},q=Object(b.a)(B,(function(){var e=this.$createElement,t=this._self._c||e;return t("pre",[t("code",{staticClass:"text-normalwrap"},[this._v(this._s(this.content))])])}),[],!1,null,null,null).exports,G=n(21);i.default.use(a.a);var J={components:{FontAwesomeIcon:u.a},props:{args:{type:Object,default:null},histories:{type:Object,required:!0}},data:function(){return{imported:!1,error:!1}},computed:{name:function(){return this.histories[this.args.history_id].name},showLink:function(){return!this.imported&&!this.error}},methods:{onClick:function(){var e=this;C.a.post("".concat(Object(m.getAppRoot)(),"api/histories"),{history_id:this.args.history_id}).then((function(){e.imported=!0})).catch((function(t){e.error=Object(G.a)(t)}))}}},K=Object(b.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showLink?n("b-link",{on:{click:e.onClick}},[e._v("Click to Import History: "+e._s(e.name)+".")]):e._e(),e._v(" "),e.imported?n("div",{staticClass:"text-success"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"check"}}),e._v(" "),n("span",[e._v("Successfully Imported History: "+e._s(e.name)+"!")])],1):e._e(),e._v(" "),e.error?n("div",{staticClass:"text-danger"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"exclamation-triangle"}}),e._v(" "),n("span",[e._v("Failed to Import History: "+e._s(e.name)+"!")]),e._v(" "),n("span",[e._v(e._s(e.error))])],1):e._e()],1)}),[],!1,null,null,null).exports,X={props:{args:{type:Object,required:!0},invocations:{type:Object,required:!0}},computed:{content:function(){var e=this.invocations[this.args.invocation_id];return e&&e.create_time}}},Q=Object(b.a)(X,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"invocation-time",attrs:{invocation_id:this.args.invocation_id}},[t("pre",[t("code",[this._v(this._s(this.content))])])])}),[],!1,null,null,null).exports,Z={components:{JobMetrics:n(135).a},props:{args:{type:Object,default:null}}},ee=Object(b.a)(Z,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-50 p-2 float-left"},[t("b-card",{attrs:{nobody:""}},[t("JobMetrics",{staticClass:"job-metrics",attrs:{"job-id":this.args.job_id}})],1)],1)}),[],!1,null,null,null).exports,te={components:{JobParameters:n(119).a},props:{args:{type:Object,default:null}}},ne=Object(b.a)(te,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-50 p-2 float-left"},[t("b-card",{attrs:{nobody:""}},[t("JobParameters",{staticClass:"job-parameters",attrs:{"job-id":this.args.job_id,param:this.args.param,"include-title":!1}})],1)],1)}),[],!1,null,null,null).exports,ie={props:{args:{type:Object,required:!0},name:{type:String,required:!0},jobs:{type:Object,default:null}},computed:{jobContent:function(){var e=this.jobs[this.args.job_id];return e&&e[this.name]}}},ae=(n(567),Object(b.a)(ie,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-50 p-2 float-left"},[t("b-card",{staticClass:"content-height",attrs:{nobody:""}},[t("div",{class:this.name,attrs:{job_id:this.args.job_id}},[t("pre",[t("code",{staticClass:"text-normalwrap"},[this._v(this._s(this.jobContent))])])])])],1)}),[],!1,null,"336208e4",null).exports),re={name:"WorkflowInput",props:{input:{type:Object,default:null},skipHead:{type:Boolean,default:!1}}},oe=Object(b.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.skipHead?e._e():n("span",[e.input.title?n("span",{staticClass:"font-weight-light"},[e._v(e._s(e.input.title)+":")]):e._e(),e._v(" "),e.input.label?n("span",{staticClass:"font-weight-light"},[e._v(e._s(e.input.label))]):e._e(),e._v(" "),e.input.value?n("span",{staticClass:"font-weight-light font-italic"},[e._v("= "+e._s(e.input.value))]):e._e()]),e._v(" "),e.input&&e.input.inputs&&e.input.inputs.length?n("div",{class:{"ml-3":!e.skipHead}},e._l(e.input.inputs,(function(e){return n("WorkflowInput",{key:e.id,attrs:{input:e}})})),1):e._e()])}),[],!1,null,null,null).exports;function se(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var le={components:{LoadingSpan:p.a,WorkflowTree:oe},props:{args:{type:Object,required:!0},workflows:{type:Object,required:!0},embedded:{type:Boolean,default:!1}},data:function(){return{itemContent:null,loading:!0}},created:function(){var e=this;this.getContent().then((function(t){e.itemContent=t,e.loading=!1}))},computed:{workflowName:function(){var e=this.workflows[this.args.workflow_id];return e&&e.name},downloadUrl:function(){return"".concat(Object(m.getAppRoot)(),"api/workflows/").concat(this.args.workflow_id,"/download?format=json-download")},importUrl:function(){return"".concat(Object(m.getAppRoot)(),"workflow/imp?id=").concat(this.args.workflow_id)},itemUrl:function(){return"".concat(Object(m.getAppRoot)(),"api/workflows/").concat(this.args.workflow_id,"/download?style=preview")}},methods:{getContent:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get(t.itemUrl);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","Failed to retrieve content. ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){se(r,i,a,o,s,"next",e)}function s(e){se(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},ce=(n(568),Object(b.a)(le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[e.embedded?e._e():n("b-card-header",[n("span",{staticClass:"float-right"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Workflow",type:"button"}},[n("span",{staticClass:"fa fa-download"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:e.importUrl,role:"button",variant:"link",title:"Import Workflow",type:"button"}},[n("span",{staticClass:"fa fa-file-import"})])],1),e._v(" "),n("span",[n("span",[e._v("Workflow:")]),e._v(" "),n("span",{staticClass:"font-weight-light"},[e._v(e._s(e.workflowName))])])]),e._v(" "),n("b-card-body",[e.loading?n("LoadingSpan",{attrs:{message:"Loading Workflow"}}):n("div",{staticClass:"content-height"},e._l(e.itemContent.steps,(function(t){return n("div",{key:t.order_index,staticClass:"mb-2"},[n("div",[e._v("Step "+e._s(t.order_index+1)+": "+e._s(t.label))]),e._v(" "),n("WorkflowTree",{attrs:{input:t,"skip-head":!0}})],1)})),0)],1)],1)],1)}),[],!1,null,"f1f857ca",null).exports);function de(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}i.default.use(a.a);var ue={components:{LoadingSpan:p.a},props:{args:{type:Object,default:null}},data:function(){return{visualizationUrl:null,error:null,loading:!0}},created:function(){this.getVisualization()},methods:{getVisualization:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.a.get("".concat(Object(m.getAppRoot)(),"api/plugins/").concat(t.args.visualization_id)).then((function(e){var n=e.data,i=Object.entries(t.args).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&");t.visualizationUrl="".concat(n.href,"?dataset_id=").concat(t.args.history_dataset_id,"&").concat(i),t.loading=!1})).catch((function(e){t.error="Failed to load Visualization '".concat(t.args.visualization_id,"'."),t.loading=!1}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){de(r,i,a,o,s,"next",e)}function s(e){de(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},he=Object(b.a)(ue,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-50 p-2 float-left"},[t("b-card",{attrs:{"body-class":"embed-responsive embed-responsive-4by3"}},[this.loading?t("LoadingSpan",{staticClass:"m-2",attrs:{message:"Loading Visualization"}}):this.error?t("div",{staticClass:"m-2"},[this._v(this._s(this.error))]):t("iframe",{staticClass:"embed-responsive-item",attrs:{src:this.visualizationUrl}})],1)],1)}),[],!1,null,null,null).exports;function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ge="\\s*[\\w\\|]+\\s*=\\s*(?:[\\w_\\-]+|\\\"[^\\\"]+\\\"|\\'[^\\']+\\')\\s*",ve="\\s*(\\w+)\\s*\\(\\s*(?:(".concat(ge,")(,").concat(ge,")*)?\\s*\\)\\s*"),ye=new RegExp(ve,"m"),be=d()(/<br>/,(function(){return"<div style='clear:both;'/><br>"})),we=l()();we.use(be),i.default.use(a.a),h.c.add(f.l);var ke={store:r.a,components:{HistoryDatasetDetails:q,HistoryDatasetAsImage:x,HistoryDatasetCollectionDisplay:U,HistoryDatasetDisplay:j,HistoryDatasetIndex:$,HistoryDatasetLink:I,HistoryLink:K,JobMetrics:ee,JobParameters:ne,LoadingSpan:p.a,ToolStd:ae,WorkflowDisplay:ce,Visualization:he,InvocationTime:Q,FontAwesomeIcon:u.a},props:{markdownConfig:{type:Object,default:null},readOnly:{type:Boolean,default:!1},exportLink:{type:String,default:null}},data:function(){return{markdownObjects:[],markdownErrors:[],historyDatasets:{},histories:{},historyDatasetCollections:{},workflows:{},jobs:{},invocations:{},loading:!0}},computed:{getVersion:function(){return this.markdownConfig.generate_version||"Unknown Galaxy Version"},getTime:function(){var e=this.markdownConfig.generate_time;return e?new Date(e).toLocaleString("default",{day:"numeric",month:"long",year:"numeric",minute:"numeric",hour:"numeric"}):"unavailable"},effectiveExportLink:function(){return Object(o.a)().config.enable_beta_markdown_export?this.exportLink:null}},watch:{markdownConfig:function(e){var t=e.markdown;this.markdownErrors=e.errors||[],this.markdownObjects=this.splitMarkdown(t),this.historyDatasets=e.history_datasets||{},this.histories=e.histories||{},this.historyDatasetCollections=e.history_dataset_collections||{},this.workflows=e.workflows||{},this.jobs=e.jobs||{},this.invocations=e.invocations||{},this.loading=!1}},methods:{splitMarkdown:function(e){for(var t=[],n=e;n.length>0;){var i=n.indexOf("```galaxy");if(-1==i){t.push({name:"default",content:we.render(n)});break}var a=n.substr(i+1).indexOf("```");if(-1!=a){if(i>0){var r=n.substr(0,i).trim();r&&t.push({name:"default",content:we.render(r)})}var o=a+4,s=n.substr(i,o),l=null;try{l=this.getArgs(s),t.push(l)}catch(e){this.markdownErrors.push({error:"Found an unresolved tag.",line:s})}n=n.substr(i+o)}else n=n.substr(i+1)}return t},getArgs:function(e){for(var t={},n=ye.exec(e)[1],i=pe(e.matchAll(new RegExp(ge,"g"))),a=0;a<i.length;a++)if(void 0!==i[a]){var r=i[a].toString().replace(/,/g,"").trim();if(r){var o=fe(r.split("="),2),s=o[0],l=o[1];t[s.trim()]=l.replace(/['"]+/g,"").trim()}}return{name:n,args:t,content:e}}}},xe=(n(569),Object(b.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"markdown-wrapper"},[e.loading?n("LoadingSpan"):n("div",[e.effectiveExportLink?n("a",{staticClass:"markdown-export position-absolute p-3",attrs:{href:e.exportLink}},[n("i",{staticClass:"fa fa-3x fa-download"})]):e._e(),e._v(" "),n("div",[e.readOnly?e._e():n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"float-right",attrs:{title:"Edit Markdown",variant:"link",role:"button"},on:{click:function(t){return e.$emit("onEdit")}}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),e._v(" "),n("h3",{staticClass:"float-right align-middle mr-1 mt-2"},[e._v("Galaxy "+e._s(e.markdownConfig.model_class))]),e._v(" "),n("span",{staticClass:"float-left font-weight-light mb-3"},[n("small",[e._v("Title: "+e._s(e.markdownConfig.title||e.markdownConfig.model_class))]),n("br"),e._v(" "),n("small",[e._v("Username: "+e._s(e.markdownConfig.username))])])],1),e._v(" "),n("b-badge",{staticClass:"w-100 rounded mb-3",attrs:{variant:"info"}},[n("div",{staticClass:"float-left m-1"},[e._v("Created with Galaxy "+e._s(e.getVersion)+" on "+e._s(e.getTime))]),e._v(" "),n("div",{staticClass:"float-right m-1"},[e._v("Identifier "+e._s(e.markdownConfig.id))])]),e._v(" "),n("div",[e.markdownErrors.length>0?n("b-alert",{attrs:{variant:"warning",show:""}},e._l(e.markdownErrors,(function(t,i){return n("div",{key:i,staticClass:"mb-1"},[n("h5",[e._v(e._s(t.error||"Error"))]),e._v("\n                    "+e._s(t.line)+"\n                ")])})),0):e._e()],1),e._v(" "),e._l(e.markdownObjects,(function(t,i){return n("div",{key:i},["default"==t.name?n("p",{staticClass:"text-justify m-2",domProps:{innerHTML:e._s(t.content)}}):"generate_galaxy_version"==t.name?n("div",{staticClass:"galaxy-version"},[n("pre",[n("code",[e._v(e._s(e.getVersion))])])]):"generate_time"==t.name?n("div",{staticClass:"galaxy-time"},[n("pre",[n("code",[e._v(e._s(e.getTime))])])]):"history_link"==t.name?n("HistoryLink",{attrs:{args:t.args,histories:e.histories}}):"history_dataset_as_image"==t.name?n("HistoryDatasetAsImage",{attrs:{args:t.args}}):"history_dataset_link"==t.name?n("HistoryDatasetLink",{attrs:{args:t.args}}):"history_dataset_index"==t.name?n("HistoryDatasetIndex",{attrs:{args:t.args}}):"invocation_time"==t.name?n("InvocationTime",{attrs:{args:t.args,invocations:e.invocations}}):"job_metrics"==t.name?n("JobMetrics",{attrs:{args:t.args}}):"job_parameters"==t.name?n("JobParameters",{attrs:{args:t.args}}):"workflow_display"==t.name?n("WorkflowDisplay",{attrs:{args:t.args,workflows:e.workflows}}):"visualization"==t.name?n("Visualization",{attrs:{args:t.args}}):"history_dataset_collection_display"==t.name?n("HistoryDatasetCollectionDisplay",{attrs:{args:t.args,collections:e.historyDatasetCollections}}):["tool_stdout","tool_stderr"].includes(t.name)?n("ToolStd",{attrs:{args:t.args,name:t.name,jobs:e.jobs}}):["history_dataset_embedded","history_dataset_display"].includes(t.name)?n("HistoryDatasetDisplay",{attrs:{args:t.args,datasets:e.historyDatasets,embedded:"history_dataset_embedded"==t.name}}):["history_dataset_name","history_dataset_info","history_dataset_peek","history_dataset_type"].includes(t.name)?n("HistoryDatasetDetails",{attrs:{name:t.name,args:t.args,datasets:e.historyDatasets}}):e._e()],1)}))],2)],1)}),[],!1,null,"6157f667",null));t.a=xe.exports},function(e,t,n){"use strict";var i=n(23),a=n(20),r=n(17);a.c.add(r.o);var o={components:{FontAwesomeIcon:i.a},props:{citation:{type:Object},outputFormat:{type:String},prefix:{type:String}},computed:{link:function(){var e=this.citation.cite;return e.data&&e.data[0]&&e.data[0].URL},citationHtml:function(){return this.citation.cite.format(this.outputFormat,{format:"html",template:"apa",lang:"en-US"})}}},s=(n(556),n(5)),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    "+e._s(e.prefix)+"\n    "),n("span",{domProps:{innerHTML:e._s(e.citationHtml)}}),e._v(" "),e.link?n("a",{attrs:{href:e.link,target:"_blank"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View Citation",icon:"external-link-alt"}})],1):e._e()])}),[],!1,null,null,null);t.a=l.exports},function(e,t,n){"use strict";var i=n(7),a=n.n(i),r=n(3),o=n(6),s={name:"ToolSearch",components:{DelayedInput:n(273).a},props:{query:{type:String,default:""},placeholder:{type:String,default:"search tools"}},data:function(){return{favorites:["#favs","#favorites","#favourites"],minQueryLength:3,loading:!1}},computed:{favoritesResults:function(){return Object(o.a)().user.getFavorites().tools}},methods:{checkQuery:function(e){var t=this;this.$emit("onQuery",e),e&&e.length>=this.minQueryLength?this.favorites.includes(e)?this.$emit("onResults",this.favoritesResults):(this.loading=!0,a.a.get("".concat(Object(r.getAppRoot)(),"api/tools"),{params:{q:e}}).then((function(e){t.loading=!1,t.$emit("onResults",e.data)})).catch((function(e){t.loading=!1,t.$emit("onError",e)}))):this.$emit("onResults",null)}}},l=n(5),c=Object(l.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("delayed-input",{attrs:{query:this.query,loading:this.loading,placeholder:this.placeholder},on:{onChange:this.checkQuery}})}),[],!1,null,null,null);t.a=c.exports},function(e,t,n){"use strict";var i=n(23),a=n(20),r=n(17);a.c.add(r.G),a.c.add(r.J);var o={components:{FontAwesomeIcon:i.a},props:{query:{type:String},loading:{type:Boolean},placeholder:{type:String,default:"Enter your search term here."},delay:{type:Number,default:1e3}},data:function(){return{queryInput:null,queryTimer:null,queryCurrent:null}},watch:{query:function(e){this.setQuery(e)}},methods:{clearTimer:function(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery:function(e){var t=this;this.clearTimer(),e?this.queryTimer=setTimeout((function(){t.setQuery(e)}),this.delay):this.setQuery(e)},setQuery:function(e){this.clearTimer(),this.queryCurrent===this.queryInput&&this.queryCurrent===e||(this.queryCurrent=this.queryInput=e,this.$emit("onChange",this.queryCurrent))}}},s=n(5),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-input"},[n("b-input",{staticClass:"search-query",attrs:{placeholder:e.placeholder},on:{input:e.delayQuery,change:e.setQuery,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.setQuery()}},model:{value:e.queryInput,callback:function(t){e.queryInput=t},expression:"queryInput"}}),e._v(" "),e.loading?n("font-awesome-icon",{staticClass:"search-clear",attrs:{icon:"spinner",spin:""}}):n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"search-clear",attrs:{title:"clear search (esc)",icon:"times-circle"},on:{click:function(t){return e.setQuery()}}})],1)}),[],!1,null,null,null);t.a=l.exports},function(e,t,n){"use strict";var i=n(17),a=n(20),r=n(23);a.c.add(i.i,i.n);var o={components:{FontAwesomeIcon:r.a},props:{codeLabel:String,codeItem:String},data:function(){return{mouseIsDown:!1,mouseMoved:!1,expanded:!1}},computed:{action:function(){return this.expanded?"collapse":"expand"},codeClass:function(){return this.expanded?"code":"code preview"},iconClass:function(){return this.expanded?["fas","compress-alt"]:["fas","expand-alt"]}},methods:{toggleExpanded:function(){this.mouseIsDown=!1,this.codeItem&&!this.mouseMoved&&(this.expanded=!this.expanded)}}},s=(n(570),n(5)),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"click to "+e.action},on:{mousedown:function(t){e.mouseIsDown=!0},mousemove:function(t){e.mouseIsDown?e.mouseMoved=!0:e.mouseMoved=!1},mouseup:function(t){return e.toggleExpanded()}}},[n("td",[e._v("\n        "+e._s(e.codeLabel)+"\n    ")]),e._v(" "),e.codeItem?n("td",[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"11"}},[n("pre",{class:e.codeClass},[e._v(e._s(e.codeItem))])]),e._v(" "),n("b-col",{staticClass:"nopadding pointer"},[n("font-awesome-icon",{attrs:{icon:e.iconClass}})],1)],1)],1):n("td",[n("i",[e._v("empty")])])])}),[],!1,null,"93f9174e",null);t.a=l.exports},function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(158),d=n(11),u=n(10),h={defaults:{model_class:"DatasetCollectionElement",element_identifier:null,element_index:null,element_type:null},_mergeObject:function(e){var t=e.object,n=this.elementId;return t&&(n=e.object.id,delete e.object.id),i.default.extend(e,e.object,{element_id:n}),delete e.object,e},constructor:function(e,t){e=this._mergeObject(e),this.idAttribute="element_id",s.a.Model.apply(this,arguments)},parse:function(e,t){var n=e;return n=this._mergeObject(n)}},f=s.a.Model.extend(d.a.LoggableMixin).extend(h).extend({_logNamespace:"collections"}),p=s.a.Collection.extend(d.a.LoggableMixin).extend({_logNamespace:"collections",model:f,toString:function(){return["DatasetCollectionElementCollection(",this.length,")"].join("")}}),m=c.a.DatasetAssociation.extend(d.a.mixin(h,{url:function(){if(!this.has("history_id"))return console.warn("no endpoint for non-hdas within a collection yet"),"".concat(Object(l.getAppRoot)(),"api/datasets");var e=this._getDatasetId();return"".concat(Object(l.getAppRoot)(),"api/histories/").concat(this.get("history_id"),"/contents/").concat(e)},_getDatasetId:function(){return this.get("element_id")},defaults:i.default.extend({},c.a.DatasetAssociation.prototype.defaults,h.defaults),_downloadQueryParameters:function(){var e=this.get("file_ext")||"data",t=this.get("element_identifier"),n=this.get("parent_hdca_id");return"?to_ext=".concat(e,"&hdca_id=").concat(n,"&element_identifier=").concat(t)},constructor:function(e,t){this.debug("\t DatasetDCE.constructor:",e,t),h.constructor.call(this,e,t)},hasDetails:function(){return this.elements&&this.elements.length},toString:function(){var e=this.get("element_identifier");return"DatasetDCE(".concat(e,")")}})),_=p.extend({model:m,toString:function(){return["DatasetDCECollection(",this.length,")"].join("")}}),g=s.a.Model.extend(d.a.LoggableMixin).extend(d.a.SearchableModelMixin).extend({_logNamespace:"collections",defaults:{collection_type:null,deleted:!1},collectionClass:function(){return this.attributes.collection_type.indexOf(":")>0?y:_},initialize:function(e,t){this.debug("".concat(this,"(DatasetCollection).initialize:"),e,t,this),this.elements=this._createElementsModel(),this.on("change:elements",(function(){this.log("change:elements"),this.elements=this._createElementsModel()}))},_createElementsModel:function(){var e=this.collectionClass();this.debug("".concat(this,"._createElementsModel"),e,this.get("elements"),this.elements);var t=this.get("elements")||[];this.unset("elements",{silent:!0});var n=this.get("parent_hdca_id")||this.get("id");return i.default.each(t,(function(e,t){i.default.extend(e,{parent_hdca_id:n})})),this.elements=new e(t),this.elements},toJSON:function(){var e=s.a.Model.prototype.toJSON.call(this);return this.elements&&(e.elements=this.elements.toJSON()),e},inReadyState:function(){var e=this.get("populated");return this.isDeletedOrPurged()||e},hasDetails:function(){return 0!==this.elements.length},getVisibleContents:function(e){return this.elements},parse:function(e,t){var n=s.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},delete:function(e,t,n){return e=e||!1,t=t||!1,this.get("deleted")?r.a.when():(n=u.a.merge(n,{method:"delete"}),this.save({deleted:!0,recursive:e,purge:t},n))},undelete:function(e){return this.get("deleted")?this.save({deleted:!1},e):r.a.when()},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},searchAttributes:["name","tags"],toString:function(){var e=[this.get("id"),this.get("name")||this.get("element_identifier")];return"DatasetCollection(".concat(e.join(","),")")}}),v=g.extend(d.a.mixin(h,{constructor:function(e,t){this.debug("\t NestedDCDCE.constructor:",e,t),h.constructor.call(this,e,t)},toString:function(){return["NestedDCDCE(",this.object?"".concat(this.object):this.get("element_identifier"),")"].join("")}})),y=p.extend({model:v,toString:function(){return["NestedDCDCECollection(",this.length,")"].join("")}}),b={DatasetCollection:g},w=n(198).a.HistoryContentMixin,k=b.DatasetCollection,x=k.extend(w).extend({defaults:i.default.extend(i.default.clone(k.prototype.defaults),{history_content_type:"dataset_collection",model_class:"HistoryDatasetCollectionAssociation"}),save:function(e,t){return this.isNew()&&((t=t||{}).url="".concat(this.urlRoot+this.get("history_id"),"/contents"),(e=e||{}).type="dataset_collection"),k.prototype.save.call(this,e,t)},toString:function(){return"History".concat(k.prototype.toString.call(this))}});t.a={HistoryDatasetCollection:x}},function(e,t,n){"use strict";var i={components:{DebouncedInput:n(429).a},props:{value:{type:String,required:!0},tagName:{type:String,required:!1,default:"h2"},placeholder:{type:String,required:!1,default:""},stateValidator:{type:Function,required:!1,default:function(e,t){return e===t?null:e.length>0}},debounceDelay:{type:Number,required:!1,default:1e3}},data:function(){return{editing:!1}},computed:{displayValue:function(){return this.localValue||this.placeholder},localValue:{get:function(){return this.value},set:function(e,t){e!==t&&(this.$emit("input",e),this.$refs.clickToEditInput.blur())}}},methods:{toggleEdit:function(e){this.editing=void 0!==e?e:!this.editing}}},a=(n(862),n(5)),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clickToEdit",class:{empty:!e.value.length}},[e.editing?e._e():n(e.tagName,{tag:"component",staticClass:"m-0",on:{click:function(t){return e.toggleEdit(!0)}}},[n("span",{staticClass:"editable"}),e._v(" "),n("span",[e._v(e._s(e.displayValue))]),e._v(" "),e._t("tooltip",null,{editing:e.editing,localValue:e.localValue})],2),e._v(" "),e.editing?n(e.tagName,{tag:"component"},[e._t("default",[n("debounced-input",{attrs:{delay:e.debounceDelay},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.value,a=t.input;return[n("b-form-input",{ref:"clickToEditInput",attrs:{value:i,autofocus:!0,placeholder:e.placeholder,state:e.stateValidator(i,e.localValue)},on:{input:a,blur:function(t){return e.toggleEdit(!1)}}})]}}],null,!1,1866262230),model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})],{toggleEdit:e.toggleEdit,editing:e.editing,placeholder:e.placeholder,stateValidator:e.stateValidator})],2):e._e()],1)}),[],!1,null,"1a82b022",null);t.a=r.exports},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n(579),a=n.n(i),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",e._g(e._b({directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"state-button",attrs:{title:e._f("localize")(e.theTitle),size:"sm",variant:"link"}},"b-button",e.$attrs,!1),e.$listeners),[n("i",{class:e.icon}),e._v(" "),n("span",{staticClass:"sr-only"},[e._v(e._s(e._f("localize")(e.theTitle)))])])},staticRenderFns:[],props:{state:{type:String,required:!0},icon:{type:String,required:!0},title:{type:String,required:!1,default:""}},inject:["STATES"],computed:{theTitle:function(){return this.title||a()(this.state)}}},o={components:{StateBtn:r},props:{state:{type:String,required:!0}},inject:["STATES"],methods:{inState:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.state)}}},s=o,l=(n(844),n(5));Object(l.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.inState(e.STATES.RUNNING)?n("StateBtn",e._g({attrs:{state:e.state,icon:"upload-symbol upload-icon fa fa-spinner fa-spin"}},e.$listeners)):e.inState(e.STATES.QUEUED,e.STATES.NEW)?n("StateBtn",e._g({attrs:{state:e.state,icon:"fas fa-clock"}},e.$listeners)):e.inState(e.STATES.PAUSED)?n("StateBtn",e._g({attrs:{state:e.state,icon:"fas fa-pause"}},e.$listeners)):e.inState(e.STATES.ERROR)?n("StateBtn",e._g({attrs:{state:e.state,icon:"fas fa-exclamation-triangle"}},e.$listeners)):e.inState(e.STATES.MIXED)?n("StateBtn",e._g({attrs:{state:e.state,icon:"fas fa-exclamation-circle"}},e.$listeners)):n("span",{staticClass:"sr-only"},[e._v("\n    "+e._s(e._f("localize")(e.state))+"\n")])}),[],!1,null,null,null).exports},,,,,,,,,function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},a={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(e){return function(t,n,r,o){var s=i(t),l=a[e][i(t)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,t)}},o=["","","","","","","","","","","",""];e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(e){return function(i,a,r,o){var s=t(i),l=n[e][t(i)];return 2===s&&(l=l[a?0:1]),l.replace(/%d/i,i)}},a=["","","","","","","","","","","",""];e.defineLocale("ar-dz",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:0,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},a=function(e){return function(t,a,r,o){var s=n(t),l=i[e][n(t)];return 2===s&&(l=l[a?0:1]),l.replace(/%d/i,t)}},r=["","","","","","","","","","","",""];e.defineLocale("ar-ly",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i,a;return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(i=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:t,mm:t,h:t,hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}var n=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],i=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,a=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:a,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:a,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(function e(t){return t>9?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),i=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],a=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function r(e){return e>1&&e<5&&1!=~~(e/10)}function o(e,t,n,i){var a=e+" ";switch(n){case"s":return t||i?"pr sekund":"pr sekundami";case"ss":return t||i?a+(r(e)?"sekundy":"sekund"):a+"sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?a+(r(e)?"minuty":"minut"):a+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?a+(r(e)?"hodiny":"hodin"):a+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?a+(r(e)?"dny":"dn"):a+"dny";case"M":return t||i?"msc":"mscem";case"MM":return t||i?a+(r(e)?"msce":"msc"):a+"msci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?a+(r(e)?"roky":"let"):a+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[n][0]:a[n][1]}e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[n][0]:a[n][1]}e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[n][0]:a[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n,i=this._calendarEl[e],a=t&&t.hours();return n=i,("undefined"!=typeof Function&&n instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(t)),i.replace("{}",a%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invalida"})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?a[n][2]?a[n][2]:a[n][1]:i?a[n][0]:a[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function i(e,i,a,r){var o="";switch(a){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"ss":return r?"sekunnin":"sekuntia";case"m":return r?"minuutin":"minuutti";case"mm":o=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":o=r?"tunnin":"tuntia";break;case"d":return r?"pivn":"piv";case"dd":o=r?"pivn":"piv";break;case"M":return r?"kuukauden":"kuukausi";case"MM":o=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":o=r?"vuoden":"vuotta"}return o=function(e,i){return e<10?i?n[e]:t[e]:e}(e,r)+" "+o}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],weekdaysShort:["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],weekdaysMin:["Do","Lu","M","C","D","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={s:[" "," "],ss:[e+" ",e+" "],m:[" "," "],mm:[e+" ",e+" "],h:[" "," "],hh:[e+" ",e+" "],d:[" "," "],dd:[e+" ",e+" "],M:[" "," "],MM:[e+" ",e+" "],y:[" "," "],yy:[e+" ",e+" "]};return i?a[n][0]:a[n][1]}e.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e,t){switch(t){case"D":return e+"";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>12?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<12?"":e<16?"":e<20?"":""}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return i?a[n][0]:a[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){return e<5?" ":e<10?"":e<12?n?'"':" ":e<18?n?'"':" ":""}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,i){var a=e;switch(n){case"s":return i||t?"nhny msodperc":"nhny msodperce";case"ss":return a+(i||t)?" msodperc":" msodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return a+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" ra":" rja");case"hh":return a+(i||t?" ra":" rja");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return a+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hnap":" hnapja");case"MM":return a+(i||t?" hnap":" hnapja");case"y":return"egy"+(i||t?" v":" ve");case"yy":return a+(i||t?" v":" ve")}return""}function i(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e){return e%100==11||e%10!=1}function n(e,n,i,a){var r=e+" ";switch(i){case"s":return n||a?"nokkrar sekndur":"nokkrum sekndum";case"ss":return t(e)?r+(n||a?"sekndur":"sekndum"):r+"seknda";case"m":return n?"mnta":"mntu";case"mm":return t(e)?r+(n||a?"mntur":"mntum"):n?r+"mnta":r+"mntu";case"hh":return t(e)?r+(n||a?"klukkustundir":"klukkustundum"):r+"klukkustund";case"d":return n?"dagur":a?"dag":"degi";case"dd":return t(e)?n?r+"dagar":r+(a?"daga":"dgum"):n?r+"dagur":r+(a?"dag":"degi");case"M":return n?"mnuur":a?"mnu":"mnui";case"MM":return t(e)?n?r+"mnuir":r+(a?"mnui":"mnuum"):n?r+"mnuur":r+(a?"mnu":"mnui");case"y":return n||a?"r":"ri";case"yy":return t(e)?r+(n||a?"r":"rum"):r+(n||a?"r":"ri")}}e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(e,t){return""===t[1]?1:parseInt(t[1]||e,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"y":return 1===e?"":e+"";case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(|||||)(|)/,(function(e,t,n){return""===n?t+"":t+n+""}))},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):e},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[" ","","","","","","","",""," "," "," "];e.defineLocale("ku",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return//.test(e)},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?a[n][0]:a[n][1]}function n(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return n(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return n(e)}return n(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return n(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return n(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,i){return t?a(n)[0]:i?a(n)[1]:a(n)[2]}function i(e){return e%10==0||e>10&&e<20}function a(e){return t[e].split("_")}function r(e,t,r,o){var s=e+" ";return 1===e?s+n(0,t,r[0],o):t?s+(i(e)?a(r)[1]:a(r)[0]):o?s+a(r)[1]:s+(i(e)?a(r)[1]:a(r)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,t,n,i){return t?"kelios sekunds":i?"keli sekundi":"kelias sekundes"},ss:r,m:n,mm:r,h:n,hh:r,d:n,dd:r,M:n,MM:r,y:n,yy:r},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function i(e,i,a){return e+" "+n(t[a],e,i)}function a(e,i,a){return n(t[a],e,i)}e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,t){return t?"daas sekundes":"dam sekundm"},ss:i,m:a,mm:i,h:a,hh:i,d:a,dd:i,M:a,MM:i,y:a,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var a=t.words[i];return 1===i.length?n?a[0]:a[1]:e+" "+t.correctGrammaticalCase(e,a)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){switch(n){case"s":return t?" ":" ";case"ss":return e+(t?" ":" ");case"m":case"mm":return e+(t?" ":" ");case"h":case"hh":return e+(t?" ":" ");case"d":case"dd":return e+(t?" ":" ");case"M":case"MM":return e+(t?" ":" ");case"y":case"yy":return e+(t?" ":" ");default:return e}}e.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" ";default:return e}}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function i(e,t,n,i){var a="";if(t)switch(n){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d "}else switch(n){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d "}return a.replace(/%d/i,e)}e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t?e:""===t||""===t||""===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"":e<12?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function i(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function a(e,t,n){var a=e+" ";switch(n){case"ss":return a+(i(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut";case"mm":return a+(i(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return a+(i(e)?"godziny":"godzin");case"MM":return a+(i(e)?"miesice":"miesicy");case"yy":return a+(i(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,i){return e?""===i?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(i)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzie",dd:"%d dni",M:"miesic",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d"})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:t,m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i,a;return"m"===n?t?"":"":e+" "+(i=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,n){return e>11?n?"..":" ":n?"..":" "}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function a(e,t,n,a){var r=e+" ";switch(n){case"s":return t||a?"pr seknd":"pr sekundami";case"ss":return t||a?r+(i(e)?"sekundy":"seknd"):r+"sekundami";case"m":return t?"minta":a?"mintu":"mintou";case"mm":return t||a?r+(i(e)?"minty":"mint"):r+"mintami";case"h":return t?"hodina":a?"hodinu":"hodinou";case"hh":return t||a?r+(i(e)?"hodiny":"hodn"):r+"hodinami";case"d":return t||a?"de":"dom";case"dd":return t||a?r+(i(e)?"dni":"dn"):r+"dami";case"M":return t||a?"mesiac":"mesiacom";case"MM":return t||a?r+(i(e)?"mesiace":"mesiacov"):r+"mesiacmi";case"y":return t||a?"rok":"rokom";case"yy":return t||a?r+(i(e)?"roky":"rokov"):r+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"ss":return a+=1===e?t?"sekundo":"sekundi":2===e?t||i?"sekundi":"sekundah":e<5?t||i?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return a+=1===e?t?"minuta":"minuto":2===e?t||i?"minuti":"minutama":e<5?t||i?"minute":"minutami":t||i?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return a+=1===e?t?"ura":"uro":2===e?t||i?"uri":"urama":e<5?t||i?"ure":"urami":t||i?"ur":"urami";case"d":return t||i?"en dan":"enim dnem";case"dd":return a+=1===e?t||i?"dan":"dnem":2===e?t||i?"dni":"dnevoma":t||i?"dni":"dnevi";case"M":return t||i?"en mesec":"enim mesecem";case"MM":return a+=1===e?t||i?"mesec":"mesecem":2===e?t||i?"meseca":"mesecema":e<5?t||i?"mesece":"meseci":t||i?"mesecev":"meseci";case"y":return t||i?"eno leto":"enim letom";case"yy":return a+=1===e?t||i?"leto":"letom":2===e?t||i?"leti":"letoma":e<5?t||i?"leta":"leti":t||i?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var a=t.words[i];return 1===i.length?n?a[0]:a[1]:e+" "+t.correctGrammaticalCase(e,a)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var a=t.words[i];return 1===i.length?n?a[0]:a[1]:e+" "+t.correctGrammaticalCase(e,a)}};e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t?":a":2===t?":a":":e")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t?e:""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("tg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=11?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,i,a){var r=function(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),a=e%10,r="";return n>0&&(r+=t[n]+"vatlh"),i>0&&(r+=(""!==r?" ":"")+t[i]+"maH"),a>0&&(r+=(""!==r?" ":"")+t[a]),""===r?"pagh":r}(e);switch(i){case"ss":return r+" lup";case"mm":return r+" tup";case"hh":return r+" rep";case"dd":return r+" jaj";case"MM":return r+" jar";case"yy":return r+" DIS"}}e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa tup",mm:n,h:"wa rep",hh:n,d:"wa jaj",dd:n,M:"wa jar",MM:n,y:"wa DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"":"":n?"s":"S"},meridiemParse:/||s|S/,isPM:function(e){return"s"===e||"S"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var i=e%10;return e+(t[i]||t[e%100-i]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n,i){var a={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return i?a[n][0]:t?a[n][0]:a[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js language configuration
e.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(e,t){return 12===e&&(e=0)," "===t||""===t||" "===t?e:" "===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?" ":i<900?"":i<1130?" ":i<1230?"":i<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
function t(e,t,n){var i,a;return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(i=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}function n(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:n("[ "),nextDay:n("[ "),lastDay:n("[ "),nextWeek:n("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[] dddd [").call(this);case 1:case 2:case 4:return n("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1200?"":1200===i?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(9))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(9))},function(e,t,n){(function(e){var t;(t=e).fn.farbtastic=function(e){return t.farbtastic(this,e),this},t.farbtastic=function(e,n){return(e=t(e)[0]).farbtastic||(e.farbtastic=new t._farbtastic(e,n))},t._farbtastic=function(e,n){var i=this;i.linkTo=function(e){return"object"==typeof i.callback&&t(i.callback).unbind("keyup",i.updateValue),i.color=null,"function"==typeof e?i.callback=e:"object"!=typeof e&&"string"!=typeof e||(i.callback=t(e),i.callback.bind("keyup",i.updateValue),i.callback[0].value&&i.setColor(i.callback[0].value)),this},i.updateValue=function(e){this.value&&this.value!=i.color&&i.setColor(this.value)},i.setColor=function(e){var t=i.unpack(e);return i.color!=e&&t&&(i.color=e,i.rgb=t,i.hsl=i.RGBToHSL(i.rgb),i.updateDisplay()),this},i.setHSL=function(e){return i.hsl=e,i.rgb=i.HSLToRGB(e),i.color=i.pack(i.rgb),i.updateDisplay(),this},i.initWidget=function(){var a={width:n.width,height:n.width};t(e).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(a).css(a).end().find("div>*").css("position","absolute"),t.browser.msie,i.radius=(n.width-n.wheelWidth)/2-1,i.square=Math.floor(.7*(i.radius-n.wheelWidth/2))-1,i.mid=Math.floor(n.width/2),i.markerSize=.3*n.wheelWidth,i.solidFill=t(".farbtastic-solid",e).css({width:2*i.square-1,height:2*i.square-1,left:i.mid-i.square,top:i.mid-i.square}),i.cnvMask=t(".farbtastic-mask",e),i.ctxMask=i.cnvMask[0].getContext("2d"),i.cnvOverlay=t(".farbtastic-overlay",e),i.ctxOverlay=i.cnvOverlay[0].getContext("2d"),i.ctxMask.translate(i.mid,i.mid),i.ctxOverlay.translate(i.mid,i.mid),i.drawCircle(),i.drawMask()},i.drawCircle=function(){new Date;var e,a,r=i.radius,o=n.wheelWidth,s=8/r/24*Math.PI,l=i.ctxMask,c=0;l.save(),l.lineWidth=o/r,l.scale(r,r);for(var d=0;d<=24;++d){var u=d/24,h=u*Math.PI*2,f=Math.sin(c),p=-Math.cos(c);if(x2=Math.sin(h),y2=-Math.cos(h),am=(c+h)/2,tan=1/Math.cos((h-c)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=i.pack(i.HSLToRGB([u,1,.5])),d>0)if(t.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(c)),Math.abs(Math.tan(Math.PI/2-c))))/24;e=i.pack(i.HSLToRGB([a-.15*m,1,.5])),color2=i.pack(i.HSLToRGB([u+.15*m,1,.5])),(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,e),v.addColorStop(1,color2),l.fillStyle=v;var _=(r+o/2)/r,g=(r-o/2)/r;l.beginPath(),l.moveTo(f*_,p*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*g,y2*g),l.quadraticCurveTo(xm*g,ym*g,f*g,p*g),l.fill()}else{var v;(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,e),v.addColorStop(1,color2),l.strokeStyle=v,l.beginPath(),l.moveTo(f,p),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}c=h-s,e=color2,a=u}l.restore()},i.drawMask=function(){new Date;var e=2*i.square,n=i.square;function a(e,t,n){for(var i=1/e,a=1/t,r=0;r<=t;++r)for(var o=1-r*a,s=0;s<=e;++s){var l=1-s*i,c=1-2*Math.min(o*l,(1-o)*l);n(s,r,c>0?.5*(2*o-1+c)/c:0,c)}}if(i.ctxMask.getImageData){var r=Math.floor(e/2),o=document.createElement("canvas");o.width=o.height=r+1;var s=o.getContext("2d"),l=s.getImageData(0,0,r+1,r+1),c=0;a(r,r,(function(e,t,n,i){l.data[c++]=l.data[c++]=l.data[c++]=255*n,l.data[c++]=255*i})),s.putImageData(l,0,0),i.ctxMask.drawImage(o,0,0,r+1,r+1,-n,-n,2*n,2*n)}else if(t.browser.msie){var d,u,h=Math.floor(e/6);a(h,6,(function(e,a,r,o){if(0==e&&(d=u,u=[]),r=Math.round(255*r),o=Math.round(255*o),a>0){var s=d[e][0],l=d[e][1],c=i.packDX(s,l),f=i.packDX(r,o),p=Math.round(i.mid+(.333*(a-1)-1)*n),m=Math.round(i.mid+(.333*a-1)*n);t("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+c+", EndColorStr="+f+", GradientType=0)",top:p,height:m-p,left:i.mid+(6*e-n-1),width:6-(e==h?Math.round(3):0)}).appendTo(i.cnvMask)}u.push([r,o])}))}else a(r=Math.floor(e/2),r,(function(e,t,a,r){a=Math.round(255*a),i.ctxMask.fillStyle="rgba("+a+", "+a+", "+a+", "+r+")",i.ctxMask.fillRect(2*e-n-1,2*t-n-1,2,2)}))},i.drawMarkers=function(){var e=n.width,t=Math.ceil(i.markerSize/4),a=i.markerSize-t+1,r=6.28*i.hsl[0],o=Math.sin(r)*i.radius,s=-Math.cos(r)*i.radius,l=2*i.square*(.5-i.hsl[1]),c=2*i.square*(.5-i.hsl[2]),d=i.invert?"#fff":"#000",u=i.invert?"#000":"#fff",h=[{x:o,y:s,r:a,c:"#000",lw:t+1},{x:o,y:s,r:i.markerSize,c:"#fff",lw:t},{x:l,y:c,r:a,c:u,lw:t+1},{x:l,y:c,r:i.markerSize,c:d,lw:t}];i.ctxOverlay.clearRect(-i.mid,-i.mid,e,e);for(var f=0;f<h.length;f++){var p=h[f];i.ctxOverlay.lineWidth=p.lw,i.ctxOverlay.strokeStyle=p.c,i.ctxOverlay.beginPath(),i.ctxOverlay.arc(p.x,p.y,p.r,0,2*Math.PI,!0),i.ctxOverlay.stroke()}},i.updateDisplay=function(){i.invert=.3*i.rgb[0]+.59*i.rgb[1]+.11*i.rgb[2]<=.6,i.solidFill.css("backgroundColor",i.pack(i.HSLToRGB([i.hsl[0],1,.5]))),i.drawMarkers(),"object"==typeof i.callback?(t(i.callback).css({backgroundColor:i.color,color:i.invert?"#fff":"#000"}),t(i.callback).each((function(){"string"==typeof this.value&&this.value!=i.color&&(this.value=i.color)})).change()):"function"==typeof i.callback&&i.callback.call(i,i.color)},i.widgetCoords=function(e){return{x:e.pageX-i.offset.left-i.mid,y:e.pageY-i.offset.top-i.mid}},i.mousedown=function(n){t._farbtastic.dragging||(t(document).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),t._farbtastic.dragging=!0),i.offset=t(e).offset();var a=i.widgetCoords(n);return i.circleDrag=Math.max(Math.abs(a.x),Math.abs(a.y))>i.square+2,i.mousemove(n),!1},i.mousemove=function(e){var t=i.widgetCoords(e);if(i.circleDrag){var n=Math.atan2(t.x,-t.y)/6.28;i.setHSL([(n+1)%1,i.hsl[1],i.hsl[2]])}else{var a=Math.max(0,Math.min(1,-t.x/i.square/2+.5)),r=Math.max(0,Math.min(1,-t.y/i.square/2+.5));i.setHSL([i.hsl[0],a,r])}return!1},i.mouseup=function(){t(document).unbind("mousemove",i.mousemove),t(document).unbind("mouseup",i.mouseup),t._farbtastic.dragging=!1},i.dec2hex=function(e){return(e<16?"0":"")+e.toString(16)},i.packDX=function(e,t){return"#"+i.dec2hex(t)+i.dec2hex(e)+i.dec2hex(e)+i.dec2hex(e)},i.pack=function(e){var t=Math.round(255*e[0]),n=Math.round(255*e[1]),a=Math.round(255*e[2]);return"#"+i.dec2hex(t)+i.dec2hex(n)+i.dec2hex(a)},i.unpack=function(e){if(7==e.length){function t(t){return parseInt(e.substring(t,t+2),16)/255}return[t(1),t(3),t(5)]}if(4==e.length){function t(t){return parseInt(e.substring(t,t+1),16)/15}return[t(1),t(2),t(3)]}},i.HSLToRGB=function(e){var t,n,i=e[0],a=e[1],r=e[2];return t=2*r-(n=r<=.5?r*(a+1):r+a-r*a),[this.hueToRGB(t,n,i+.33333),this.hueToRGB(t,n,i),this.hueToRGB(t,n,i-.33333)]},i.hueToRGB=function(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(.66666-n)*6:e},i.RGBToHSL=function(e){var t=e[0],n=e[1],i=e[2],a=Math.min(t,n,i),r=Math.max(t,n,i),o=r-a,s=0,l=0,c=(a+r)/2;return c>0&&c<1&&(l=o/(c<.5?2*c:2-2*c)),o>0&&(r==t&&r!=n&&(s+=(n-i)/o),r==n&&r!=i&&(s+=2+(i-t)/o),r==i&&r!=t&&(s+=4+(t-n)/o),s/=6),[s,l,c]},n.callback||(n={callback:n}),n=t.extend({width:300,wheelWidth:(n.width||300)/10,callback:null},n),i.initWidget(),t("canvas.farbtastic-overlay",e).mousedown(i.mousedown),n.callback&&i.linkTo(n.callback),i.color||i.setColor("#808080")}}).call(this,n(0))},,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i);t.a={props:["options","value","placeholder","containerClass","enabled"],render:function(){var e=this.$createElement;return(this._self._c||e)("select",[this._t("default")],2)},staticRenderFns:[],mounted:function(){var e=this,t=this.enabled;void 0===t&&(t=!0);var n={data:this.options,placeholder:this.placeholder,allowClear:!!this.placeholder,enable:t,dropdownAutoWidth:!0};this.containerClass&&(n.containerCssClass=this.containerClass),a()(this.$el).select2(n).val(this.value).trigger("change").on("change",(function(t){e.$emit("input",t.val)}))},watch:{value:function(e){a()(this.$el).val(e)},options:function(e){a()(this.$el).empty().select2({data:e})},enabled:function(e){a()(this.$el).select2("enable",e)}},destroyed:function(){a()(this.$el).off().select2("destroy")}}},function(e,t,n){(function(i){var a,r;a=[n(542),n(543),n(544)],void 0===(r=function(e,t){"use strict";function n(){}function a(e){e&&(this.id=e)}function r(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}var o=e.Range,s=e.union,l=e.intersection,c=t.inflateBuffer,d=t.arrayCopy,u=2291137574,h=654086024,f=2273964779,p=3958540679,m=256,_=65536,g=16777216,v=4294967296,y=new RegExp("^[0-9]+,[0-9]+,[0-9]+");function b(e,t,n){Math.pow(10,6);return i.ajax({type:"GET",dataType:"native",url:e,timeout:5e3,beforeSend:function(e){e.setRequestHeader("Range","bytes="+t+"-"+(t+(n-1)))},xhrFields:{responseType:"arraybuffer"}})}function w(e,t){return e[t]+e[t+1]*m+e[t+2]*_+e[t+3]*g+e[t+4]*v}function k(){}function x(e,t,n,i){this.bwg=e,this.cirTreeOffset=t,this.cirTreeLength=n,this.isSummary=i}function S(e,t,n,i,a){this.bbi=e,this.type=t,this.fieldCount=n,this.offset=i,this.field=a}return k.prototype.readChromTree=function(){var e=this;this.chromsToIDs={},this.idsToChroms={},this.maxID=0;var t=this.unzoomedDataOffset;return t=t+4-(t-this.chromTreeOffset&3),i.when(b(this.url,this.chromTreeOffset,t-this.chromTreeOffset)).then((function(t){var n=new Uint8Array(t),i=new Int16Array(t),a=new Int32Array(t),r=(a[0],a[1],a[2]),o=(a[3],w(n,16),function(t){var a=n[t],s=i[t/2+1];t+=4;for(var l=0;l<s;++l)if(0===a){var c=w(n,t+=r);t+=8,c-=e.chromTreeOffset,o(c)}else{for(var d="",u=0;u<r;++u){var h=n[t++];0!==h&&(d+=String.fromCharCode(h))}var f=n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t+0];n[t+7],n[t+6],n[t+5],n[t+4];t+=8,e.chromsToIDs[d]=f,0===d.indexOf("chr")&&(e.chromsToIDs[d.substr(3)]=f),e.idsToChroms[f]=d,e.maxID=Math.max(e.maxID,f)}});o(32)}))},x.prototype.readWigData=function(e,t,n){var i=this.bwg.chromsToIDs[e];return void 0===i?[]:this.readWigDataById(i,t,n)},x.prototype.readWigDataById=function(e,t,n){var a=this,r=i.Deferred();if(!this.cirHeader)return i.when(b(a.bwg.url,this.cirTreeOffset,48)).then((function(o){a.cirHeader=o;var s=new Int32Array(a.cirHeader);a.cirBlockSize=s[1],i.when(a.readWigDataById(e,t,n)).then((function(e){r.resolve(e)}))})),r;var l=[],c=0,d=(Date.now(),function(i,a,r,o){return(e<0||i==e)&&a<=n&&r>=t}),u=function(e,t){if(a.bwg.instrument&&console.log("level="+t+"; offset="+e+"; time="+(0|Date.now())),c+=e.length,1==e.length&&e[0]-a.cirTreeOffset==48&&a.cachedCirRoot)return f(a.cachedCirRoot,0,t),void(0===--c&&i.when(a.fetchFeatures(d,l)).then((function(e){r.resolve(e)})));for(var n,u=4+32*a.cirBlockSize,p=0;p<e.length;++p){var m=new o(e[p],e[p]+u);n=n?s(n,m):m}for(var _=n.ranges(),g=0;g<_.length;++g){var v=_[g];h(e,v,t)}},h=function(e,t,n,o){t.max(),t.min();i.when(b(a.bwg.url,t.min(),t.max()-t.min())).then((function(o){for(var s=0;s<e.length;++s)t.contains(e[s])&&(f(o,e[s]-t.min(),n),e[s]-a.cirTreeOffset==48&&e[s]-t.min()==0&&(a.cachedCirRoot=o),0===--c&&i.when(a.fetchFeatures(d,l)).then((function(e){r.resolve(e)})))}))},f=function(i,a,r){var o=new Uint8Array(i),s=new Int16Array(i),c=new Int32Array(i),d=o[a],h=s[a/2+1];if(a+=4,0!==d)for(var f=0;f<h;++f){var p=c[k=a/4],m=c[k+1],_=c[k+2],g=c[k+3],v=w(o,a+16),y=w(o,a+24);(e<0||p<e||p==e&&m<=n)&&(e<0||_>e||_==e&&g>=t)&&l.push({offset:v,size:y}),a+=32}else{var b=[];for(f=0;f<h;++f){var k;p=c[k=a/4],m=c[k+1],_=c[k+2],g=c[k+3],v=w(o,a+16);(e<0||p<e||p==e&&m<=n)&&(e<0||_>e||_==e&&g>=t)&&b.push(v),a+=24}b.length>0&&u(b,r+1)}};return u([a.cirTreeOffset+48],1),r},x.prototype.fetchFeatures=function(e,t){var a=this,r=i.Deferred();if(t.sort((function(e,t){return(0|e.offset)-(0|t.offset)})),0===t.length)return[];var o=[],s=function(e,t,i,r){r||(r={});var s=new n;for(var l in s._chromId=e,s.segment=a.bwg.idsToChroms[e],s.min=t,s.max=i,s.type=a.bwg.type,r)s[l]=r[l];o.push(s)},l=function(){if(0===t.length){Date.now();return r.resolve(o)}var n=t[0];if(n.data)a.parseFeatures(n.data,s,e),t.splice(0,1),l();else{for(var u=n.offset,h=n.size,f=1;f<t.length&&t[f].offset==u+h;)h+=t[f].size,++f;i.when(b(a.bwg.url,u,h)).then((function(e){for(var n=0,i=0;n<h;){var r,o=t[i];if(a.bwg.uncompressBufSize>0)r=c(e,n+2,o.size-2);else{var s=new Uint8Array(o.size);d(new Uint8Array(e,n,o.size),0,s,0,o.size),r=s.buffer}o.data=r,n+=o.size,++i}l()}))}};return l(),r},x.prototype.parseFeatures=function(e,t,n){var r=new Uint8Array(e);if(this.isSummary)for(var c=new Int16Array(e),d=new Int32Array(e),u=new Float32Array(e),h=e.byteLength/32,f=0;f<h;++f){var p=d[8*f],m=d[8*f+1],_=d[8*f+2],g=d[8*f+3],v=(u[8*f+4],u[8*f+5]),b=u[8*f+6];u[8*f+7];if(n(p,m+1,_)){var w={type:"bigwig",score:b/g,maxScore:v};"bigbed"==this.bwg.type&&(w.type="density"),t(p,m+1,_,w)}}else if("bigwig"==this.bwg.type){c=new Int16Array(e),d=new Int32Array(e),u=new Float32Array(e),p=d[0];var k=d[1],x=(d[2],d[3]),S=d[4],C=r[20];h=c[11];if(3==C)for(f=0;f<h;++f){var M=u[f+6],T=k+f*x+1,j=k+f*x+S;n(p,T,j)&&t(p,T,j,{score:M})}else if(2==C)for(f=0;f<h;++f){_=(m=d[2*f+6]+1)+S-1,M=u[2*f+7];n(p,m,_)&&t(p,m,_,{score:M})}else if(1==C)for(f=0;f<h;++f){m=d[3*f+6]+1,_=d[3*f+7],M=u[3*f+8];m>_&&(m=_),n(p,m,_)&&t(p,m,_,{score:M})}else console.log("Currently not handling bwgType="+C)}else{if("bigbed"!=this.bwg.type)throw Error("Don't know what to do with "+this.bwg.type);for(var O=0,D=this.bwg.definedFieldCount,L=this.bwg.schema;O<r.length;){p=r[O+3]<<24|r[O+2]<<16|r[O+1]<<8|r[O+0],m=r[O+7]<<24|r[O+6]<<16|r[O+5]<<8|r[O+4],_=r[O+11]<<24|r[O+10]<<16|r[O+9]<<8|r[O+8];O+=12;for(var E="";;){var A=r[O++];if(0==A)break;E+=String.fromCharCode(A)}var I,P={};if((I=E.length>0?E.split("\t"):[]).length>0&&D>3&&(P.label=I[0]),I.length>1&&D>4){M=parseInt(I[1]);isNaN(M)||(P.score=M)}if(I.length>2&&D>5&&(P.orientation=I[2]),I.length>5&&D>8){var Y=I[5];y.test(Y)&&(P.itemRgb="rgb("+Y+")")}if(I.length>D-3&&L)for(var R=D-3;R<I.length;++R)P[L.fields[R+3].name]=I[R];if(n(p,m+1,_,I))if(D<12)t(p,m+1,_,P);else{var H=0|I[3],N=0|I[4],$=0|I[6],F=I[7].split(","),W=I[8].split(",");if(P.exonFrames){var z=P.exonFrames.split(",");P.exonFrames=void 0}P.type="transcript";var U=new a;for(var V in P)U[V]=P[V];if(U.id=I[0],U.segment=this.bwg.idsToChroms[p],U.min=m+1,U.max=_,U.notes=[],P.groups=[U],I.length>9){var B=P.geneName||I[9],q=B;I.length>10&&(q=I[10]),P.geneName2&&(q=P.geneName2);var G=i.extend({},U);G.id=B,G.label=q,G.type="gene",P.groups.push(G)}for(var J=[],K=0;K<$;++K){var X=(0|W[K])+m,Q=X+(0|F[K]),Z=new o(X,Q);J.push(Z)}for(var ee=s(J),te=ee.ranges(),ne=0;ne<te.length;++ne){t(p,(ce=te[ne]).min()+1,ce.max(),P)}if(N>H){var ie="+"==P.orientation?new o(H,N+3):new o(H-3,N),ae=l(ee,ie);if(ae){P.type="translation";for(var re=ae.ranges(),oe=0,se=0;re[0].min()>te[se].max();)se++;for(ne=0;ne<re.length;++ne){var le=ne;"-"==P.orientation&&(le=re.length-ne-1);var ce=re[le];if(P.readframe=oe,z){var de=parseInt(z[le+se]);"number"==typeof de&&de>=0&&de<=2&&(P.readframe=de,P.readframeExplicit=!0)}oe=(oe+(ce.max()-ce.min()))%3,t(p,ce.min()+1,ce.max(),P)}}}}}}},x.prototype.getFirstAdjacent=function(e,t,n,i){var a=this.bwg.chromsToIDs[e];if(void 0===a)return i([]);this.getFirstAdjacentById(a,t,n,i)},x.prototype.getFirstAdjacentById=function(e,t,n,i){var a=this;if(this.cirHeader){var r=null,l=-1,c=-1,d=0,u=(Date.now(),function(e,t){d+=e.length;for(var n,i=4+32*a.cirBlockSize,r=0;r<e.length;++r){var l=new o(e[r],e[r]+i);n=n?s(n,l):l}for(var c=n.ranges(),u=0;u<c.length;++u){var f=c[u];h(e,f,t)}}),h=function(o,s,l,c){s.max(),s.min();a.bwg.data.slice(s.min(),s.max()-s.min()).fetch((function(c){for(var u=0;u<o.length;++u)if(s.contains(o[u])&&(f(c,o[u]-s.min(),l),0==--d)){if(!r)return n>0&&(0!=e||t>0)?a.getFirstAdjacentById(0,0,n,i):n<0&&(e!=a.bwg.maxID||t<1e9)?a.getFirstAdjacentById(a.bwg.maxID,1e9,n,i):i([]);a.fetchFeatures((function(i,a,r,o){return n<0&&(i<e||r<t)||n>0&&(i>e||a>t)}),[r],(function(e){for(var t=null,a=-1,r=-1,o=0;o<e.length;++o){var s=e[o],l=s._chromId,c=s.min,d=s.max;(null==t||n<0&&(l>a||d>r)||n>0&&(l<a||c<r))&&(t=s,r=n<0?d:c,a=l)}return i(null!=t?[t]:[])}))}}))},f=function(i,o,s){var d=new Uint8Array(i),h=new Int16Array(i),f=new Int32Array(i),p=d[o],m=h[o/2+1];if(o+=4,0!=p)for(var _=0;_<m;++_){var g=f[M=o/4],v=f[M+1],y=f[M+2],b=f[M+3],k=w(d,o+16),x=w(d,o+24);(n<0&&(g<e||g==e&&v<=t)||n>0&&(y>e||y==e&&b>=t))&&(/_random/.exec(a.bwg.idsToChroms[g])||(null==r||n<0&&(y>l||y==l&&b>c)||n>0&&(g<l||g==l&&v<c))&&(r={offset:k,size:x},c=n<0?b:v,l=n<0?y:g)),o+=32}else{var S=-1,C=-1;for(_=0;_<m;++_){var M;g=f[M=o/4],v=f[M+1],y=f[M+2],b=f[M+3],k=f[M+4]<<32|f[M+5];(n<0&&(g<e||g==e&&v<=t)&&y>=e||n>0&&(y>e||y==e&&b>=t)&&g<=e)&&(S<0||b>C)&&(S=k,C=n<0?b:v,n<0?y:g),o+=24}S>=0&&u([S],s+1)}};u([a.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch((function(r){a.cirHeader=r;var o=new Int32Array(a.cirHeader);a.cirBlockSize=o[1],a.getFirstAdjacentById(e,t,n,i)}))},k.prototype.readWigData=function(e,t,n){var i,a=n-t;if(a<=25e3||0===this.zoomLevels.length)i=this.getUnzoomedView();else for(var r=0;r<this.zoomLevels.length;r++)if(a/this.zoomLevels[r].reduction<25e3){i=this.getZoomedView(r);break}return i.readWigData(e,t,n)},k.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var e=4e3;this.zoomLevels[0]&&(e=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset),this.unzoomedView=new x(this,this.unzoomedIndexOffset,e,!1)}return this.unzoomedView},k.prototype.getZoomedView=function(e){var t=this.zoomLevels[e];return t.view||(t.view=new x(this,t.indexOffset,4e3,!0)),t.view},k.prototype._tsFetch=function(e,t,n,i,a){var r=this;if(!(e>=this.zoomLevels.length-1))return(e<0?this.getUnzoomedView():this.getZoomedView(e)).readWigDataById(t,n,i,a);if(this.topLevelReductionCache){for(var o=[],s=this.topLevelReductionCache,l=0;l<s.length;++l)s[l]._chromId==t&&o.push(s[l]);return a(o)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3e8,(function(o){return r.topLevelReductionCache=o,r._tsFetch(e,t,n,i,a)}))},k.prototype.thresholdSearch=function(e,t,n,i,a){n=n<0?-1:1;for(var r=this,o=this.chromsToIDs[e],s=[{chrOrd:0,chr:o,zoom:r.zoomLevels.length-4,min:0,max:3e8,fromRef:!0}],l=1;l<=this.maxID+1;++l){var c=(o+n*l)%(this.maxID+1);c<0&&(c+=this.maxID+1),s.push({chrOrd:l,chr:c,zoom:r.zoomLevels.length-1,min:0,max:3e8})}!function e(){if(0==s.length)return a(null);s.sort((function(e,t){var i=e.zoom-t.zoom;return 0!=i?i:0!=(i=e.chrOrd-t.chrOrd)?i:e.min-t.min*n}));var o=s.splice(0,1)[0];r._tsFetch(o.zoom,o.chr,o.min,o.max,(function(r){var l=n>0?0:3e8;o.fromRef&&(l=t);for(var c=0;c<r.length;++c){var d,u=r[c];if(d=null!=u.maxScore?u.maxScore:u.score,n>0){if(d>i)if(o.zoom<0){if(u.min>l)return a(u)}else u.max>l&&s.push({chr:o.chr,chrOrd:o.chrOrd,zoom:o.zoom-2,min:u.min,max:u.max,fromRef:o.fromRef})}else if(d>i)if(o.zoom<0){if(u.max<l)return a(u)}else u.min<l&&s.push({chr:o.chr,chrOrd:o.chrOrd,zoom:o.zoom-2,min:u.min,max:u.max,fromRef:o.fromRef})}e()}))}()},k.prototype.getAutoSQL=function(e){if(!this.asOffset)return e(null);i.when(b(this.url,this.asOffset,2048)).then((function(t){for(var n=new Uint8Array(t),i="",a=0;a<n.length&&0!=n[a];++a)i+=String.fromCharCode(n[a]);var r=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,o=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(i);if(o){var s={declType:o[1],name:o[2],comment:o[4],fields:[]};i=i.substring(o[0]);for(var l=r.exec(i);null!=l;l=r.exec(i))s.fields.push({type:l[1],name:l[2],comment:l[4]});return e(s)}}))},k.prototype.getExtraIndices=function(e){var t=this;if(this.version<4||0==this.extHeaderOffset||"bigbed"!=this.type)return e(null);this.data.slice(this.extHeaderOffset,64).fetch((function(n){if(!n)return e(null,"Couldn't fetch extension header");var i=new Uint8Array(n),a=new Int16Array(n),r=(new Int32Array(n),a[0],a[1]),o=w(i,4);if(0==r)return e(null);t.data.slice(o,20*r).fetch((function(n){if(!n)return e(null,"Couldn't fetch index info");for(var i=new Uint8Array(n),a=new Int16Array(n),o=(new Int32Array(n),[]),s=0;s<r;++s){var l=a[10*s],c=a[10*s+1],d=w(i,20*s+4),u=a[10*s+8],h=new S(t,l,c,d,u);o.push(h)}e(o)}))}))},S.prototype.lookup=function(e,t){var n=this;this.bbi.data.slice(this.offset,32).fetch((function(i){var a=new Uint8Array(i),o=(new Int16Array(i),new Int32Array(i)),s=(o[0],o[1]),l=o[2],c=o[3];w(a,16);!function i(a){n.bbi.data.slice(a,4+s*(l+c)).fetch((function(a){var o=new Uint8Array(a),s=new Uint16Array(a),d=(new Uint32Array(a),o[0]),u=s[1],h=4;if(0!=d){for(_=0;_<u;++_){for(g="",v=0;v<l;++v){0!=(y=o[h++])&&(g+=String.fromCharCode(y))}if(g==e){var f=w(o,h),p=r(o,h+8);return n.bbi.getUnzoomedView().fetchFeatures((function(t,i,a,r){if(r&&r.length>n.field-3)return r[n.field-3]==e}),[{offset:f,size:p}],t)}h+=c}return t([])}for(var m=null,_=0;_<u;++_){for(var g="",v=0;v<l;++v){var y;0!=(y=o[h++])&&(g+=String.fromCharCode(y))}var b=w(o,h);if(h+=8,e.localeCompare(g)<0&&m)return void i(m);m=b}i(m)}))}(n.offset+32)}))},{makeBwg:function(e){var t=i.Deferred(),n=new k;return n.url=e,i.when(b(n.url,0,512)).then((function(e){if(!e)return t.resolve(null,"Couldn't fetch file");var a=e,r=new Uint8Array(a),o=new Int16Array(a),s=new Int32Array(a),l=r[0]+m*r[1]+_*r[2]+g*r[3];if(l==u)n.type="bigwig";else{if(l!=f)return l==h||l==p?t.resolve(null,"Currently don't support big-endian BBI files"):t.resolve(null,"Not a supported format, magic=0x"+l.toString(16));n.type="bigbed"}n.version=o[2],n.numZoomLevels=o[3],n.chromTreeOffset=w(r,8),n.unzoomedDataOffset=w(r,16),n.unzoomedIndexOffset=w(r,24),n.fieldCount=o[16],n.definedFieldCount=o[17],n.asOffset=w(r,36),n.totalSummaryOffset=w(r,44),n.uncompressBufSize=s[13],n.extHeaderOffset=w(r,56),n.zoomLevels=[];for(var c=0;c<n.numZoomLevels;++c){var d=s[6*c+16],v=w(r,24*c+72),y=w(r,24*c+80);n.zoomLevels.push({reduction:d,dataOffset:v,indexOffset:y})}i.when(n.readChromTree()).then((function(){n.getAutoSQL((function(e){return n.schema=e,t.resolve(n)}))}))})),t}}}.apply(t,a))||(e.exports=r)}).call(this,n(0))},function(e,t,n){"use strict";(function(e,n,i){t.a=e.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(e){return-1!==n.indexOf(this.attributes.async_ops,e)},add_filter:function(e,t,n){if(n){var i,a=this.attributes.filters[e];if(null==a)i=t;else if("string"==typeof a)if("All"==a||a==t)i=t;else{var r=[];r[0]=a,r[1]=t,i=r}else-1===(i=a).indexOf(t)&&i.push(t);this.attributes.filters[e]=i}else this.attributes.filters[e]=t},remove_filter:function(e,t){var i=this.attributes.filters[e];if(null==i)return!1;if("string"==typeof i)this.attributes.filters[e]="";else{var a=n.indexOf(i,t);-1!==a&&(i[a]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return n.each(n.pairs(this.attributes.filters),(function(t){e["f-".concat(t[0])]=t[1]})),e},get_url:function(e){return"".concat(this.get("url_base"),"?").concat(i.param(this.get_url_data()),"&").concat(i.param(e))}})}).call(this,n(4),n(1),n(0))},function(e){e.exports=JSON.parse('[{"name":"t2.nano","mem":0.5,"price":0.0067,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.nano","mem":0.5,"price":0.006,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.micro","mem":1,"price":0.0134,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.micro","mem":1,"price":0.012,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.small","mem":2,"price":0.0268,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.small","mem":2,"price":0.024,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.medium","mem":3.75,"price":0.079,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.medium","mem":4,"price":0.0536,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.medium","mem":4,"price":0.048,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.large","mem":7.5,"price":0.158,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.large","mem":8,"price":0.1072,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.large","mem":8,"price":0.096,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m5.large","mem":8,"price":0.115,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.large","mem":8,"price":0.136,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.large","mem":8,"price":0.12,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m3.xlarge","mem":15,"price":0.315,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5.xlarge","mem":16,"price":0.23,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.xlarge","mem":16,"price":0.24,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.xlarge","mem":16,"price":0.192,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.xlarge","mem":16,"price":0.2144,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Family"},{"name":"m5d.xlarge","mem":16,"price":0.272,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m3.2xlarge","mem":30,"price":0.632,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5d.2xlarge","mem":32,"price":0.544,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.2xlarge","mem":32,"price":0.46,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.2xlarge","mem":32,"price":0.48,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.2xlarge","mem":32,"price":0.384,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.2xlarge","mem":32,"price":0.4288,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Family"},{"name":"m5d.4xlarge","mem":64,"price":1.088,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.4xlarge","mem":64,"price":0.96,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5.4xlarge","mem":64,"price":0.92,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.10xlarge","mem":160,"price":2.4,"priceunit":"Hrs","vcpus":40,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5d.12xlarge","mem":192,"price":3.264,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.12xlarge","mem":192,"price":2.76,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.16xlarge","mem":256,"price":3.84,"priceunit":"Hrs","vcpus":64,"cpu":"Intel Xeon E5-2686 v4 (Broadwell)"},{"name":"m5d.metal","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.metal","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.24xlarge","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.24xlarge","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"}]')},function(e,t,n){"use strict";var i=n(633),a=n(634),r=n(221),o=n(1092);t.a={props:{value:{required:!0},delay:{type:Number,required:!1,default:500}},data:function(){return{previousEmit:null,incomingValue:null}},methods:{sendUpdate:function(e){e!==this.previousEmit&&(this.$emit("input",e),this.previousEmit=e)}},beforeMount:function(){var e=this,t=this.watch$("incomingValue").pipe(Object(i.a)(this.delay),Object(a.a)(),Object(r.a)((function(t){return null!==t&&t!==e.value})),Object(o.a)((function(){return e.sendUpdate(e.incomingValue)})));this.$subscribeTo(t,(function(t){return e.sendUpdate(t)}))},render:function(){var e=this;return this.$scopedSlots.default({value:this.value,input:function(t){e.incomingValue=t&&t.target?t.target.value:t}})}}},,,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(3),l=n(56),c=n(18),d=o.a.View.extend({initialize:function(e){this.model=new o.a.Model(e),this.url=this.model.get("url"),this.redirect=this.model.get("redirect"),e&&e.active_tab&&(this.active_tab=e.active_tab),this.setElement("<div/>"),this.render()},render:function(){var e=this;a.a.ajax({url:Object(s.getAppRoot)()+this.url,type:"GET"}).done((function(t){var n=a.a.extend({},e.model.attributes,t),i=new l.a({title:n.title,title_id:n.title_id,message:n.message,status:n.status||"warning",icon:n.icon,initial_errors:!0,errors:n.errors,inputs:n.inputs,buttons:{cancel:n.cancel_redirect&&new c.a.Button({tooltip:n.cancel_tooltip,title:n.cancel_title||"Cancel",icon:n.cancel_icon||"fa-times",onclick:function(){window.location="".concat(Object(s.getAppRoot)()).concat(n.cancel_redirect)}}),submit:new c.a.Button({tooltip:n.submit_tooltip,title:n.submit_title||"Save",icon:n.submit_icon||"fa-save",cls:"btn btn-primary",onclick:function(){e._submit(i)}})}});e.$el.empty().append(i.$el)})).fail((function(t){e.$el.empty().append(new c.a.Message({message:"Failed to load resource ".concat(e.url,"."),status:"danger",persistent:!0}).$el)}))},_submit:function(e){var t=this;a.a.ajax({url:Object(s.getAppRoot)()+t.url,data:JSON.stringify(e.data.create()),type:"PUT",contentType:"application/json"}).done((function(n){var i={};n.id?i.id=n.id:i={message:n.message,status:"success",persistent:!1},t.redirect?window.location="".concat(Object(s.getAppRoot)()).concat(t.redirect,"?").concat(a.a.param(i)):(e.data.matchModel(n,(function(t,n){e.field_list[n].value(t.value)})),t._showMessage(e,n.message))})).fail((function(n){t._showMessage(e,{message:n.responseJSON.err_msg,status:"danger",persistent:!1})}))},_showMessage:function(e,t){e.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(a()(this).css("overflow"))})).first().animate({scrollTop:0},500),e.message.update(t)}});t.a={View:d}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(103);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return l(e,arguments,u(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,e)})(e)}function l(e,t,n){return(l=c()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&d(a,n.prototype),a}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=[i.a.NEW,i.a.WAITING,i.a.QUEUED,i.a.RUNNING],f=[i.a.ERROR,i.a.DELETED],p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,n,a,s,l,p=(t=m,n=c(),function(){var e,i=u(t);if(n){var a=u(this).constructor;e=Reflect.construct(i,arguments,a)}else e=i.apply(this,arguments);return o(this,e)});function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var n=t.job_state_summary,i=void 0===n?{}:n,a=t.populated_state,r=void 0===a?null:a;return(e=p.call(this,Object.entries(i))).populated_state=r,e}return a=m,(s=[{key:"hasJobs",value:function(e){return!!this.has(e)&&this.get(e)>0}},{key:"anyHasJobs",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some((function(t){return e.hasJobs(t)}))}},{key:"state",get:function(){return this.jobCount?this.isErrored?i.a.ERROR:this.isNew?i.a.NEW:this.isRunning?i.a.RUNNING:this.isTerminal?i.a.OK:i.a.QUEUED:null}},{key:"isNew",get:function(){return!this.populated_state||this.populated_state==i.a.NEW}},{key:"isErrored",get:function(){return this.anyHasJobs.apply(this,f)}},{key:"isRunning",get:function(){return this.hasJobs(i.a.RUNNING)}},{key:"isTerminal",get:function(){return!this.isNew&&!this.anyHasJobs.apply(this,h)}},{key:"jobCount",get:function(){return this.get("all_jobs")}},{key:"errorCount",get:function(){return this.get(i.a.ERROR)}},{key:"runningCount",get:function(){return this.get(i.a.ERRUNNINGROR)}}])&&r(a.prototype,s),l&&r(a,l),m}(s(Map))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(47),a=n(7),r=n.n(a),o=function(e){return Object(i.c)()+e};var s=n(8),l=n(14);s.default.use(l.a);var c={props:{parameters:{type:Array,required:!0}}},d=n(5),u=Object(d.a)(c,(function(){var e=this.$createElement;return(this._self._c||e)("b-table",{attrs:{small:"","caption-top":"",fields:["label","parameter_value"],items:this.parameters}})}),[],!1,null,null,null).exports,h=n(115),f=n(663),p=n(474),m=n(36),_=n(29),g={components:{DatasetProvider:h.c,DatasetCollectionProvider:h.b,DatasetUIWrapper:p.a,DatasetCollectionUIWrapper:f.default,LoadingSpan:_.a},props:{data_item:{required:!0}},computed:{renderComponent:function(){return{hda:"DatasetUIWrapper",hdca:"DatasetCollectionUIWrapper"}[this.data_item.src]},providerComponent:function(){return{hda:"DatasetProvider",hdca:"DatasetCollectionProvider"}[this.data_item.src]}},provide:{STATES:m.g}},v=Object(d.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.providerComponent,{tag:"component",attrs:{id:e.data_item.id},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.loading;return[n("div",[a?n("loading-span",{attrs:{message:"Loading dataset"}}):e._e(),e._v(" "),i?n(e.renderComponent,{tag:"component",attrs:{item:i}}):e._e()],1)]}}])})}),[],!1,null,null,null).exports,y=n(50),b=n(33),w=n(130),k=n(119),x=n(97);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s.default.use(l.a);var T={components:{UtcDate:x.a,JobProvider:h.e,JobParameters:k.a,JobInformation:w.a},props:{jobs:{type:Array,required:!0}},methods:{jobsProvider:function(e,t){return this.$watch("jobs",(function(){var e=this,n=this.jobs.map((function(t){return C(C({},t),{},{_showDetails:!!e.toggledItems[t.id]})}));t(n)}),{immediate:!0}),null},toggleDetails:function(e){e._showDetails=!e._showDetails,this.toggledItems[e.id]=e._showDetails}},data:function(){return{fields:[{key:"state",sortable:!0},{key:"update_time",label:"Updated",sortable:!0},{key:"create_time",label:"Created",sortable:!0}],toggledItems:{}}}},j=Object(d.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.jobs?n("b-card",[n("b-table",{attrs:{small:"","caption-top":"",items:e.jobsProvider,fields:e.fields,"primary-key":"id"},on:{"row-clicked":e.toggleDetails},scopedSlots:e._u([{key:"row-details",fn:function(t){return[n("job-provider",{attrs:{id:t.item.id},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.loading;return[n("div",a?[n("b-spinner",{attrs:{label:"Loading Job..."}})]:[i?n("job-information",{attrs:{job_id:i.id}}):e._e(),e._v(" "),n("p"),e._v(" "),i?n("job-parameters",{attrs:{"job-id":i.id,"include-title":!1}}):e._e()],1)]}}],null,!0)})]}},{key:"cell(create_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}],null,!1,452151836)})],1):e._e()}),[],!1,null,null,null).exports;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={components:{LoadingSpan:_.a,JobStep:j,ParameterStep:u,InvocationStepProvider:h.d,WorkflowInvocationDataContents:v,WorkflowInvocationState:function(){return Promise.resolve().then(n.bind(null,465))}},props:{invocation:Object,orderedSteps:Array,workflowStep:Object,workflow:Object},data:function(){return{expanded:!1,polling:null}},created:function(){this.fetchTool(),this.fetchSubworkflow()},computed:D(D({},Object(b.c)(["getToolForId","getToolNameById","getWorkflowByInstanceId","getInvocationStepById"])),{},{isReady:function(){return this.invocationSteps.length>0},invocationSteps:function(){return this.orderedSteps},invocationStepId:function(){var e;return null===(e=this.step)||void 0===e?void 0:e.id},workflowStepType:function(){return this.workflowStep.type},step:function(){return this.invocationSteps[this.workflowStep.id]},isDataStep:function(){return["data_input","data_collection_input"].includes(this.workflowStepType)},stepIcon:function(){switch(this.workflowStepType){case"data_input":return"fa-file";case"data_collection_input":return"fa-folder-o";case"parameter_input":return"fa-pencil";case"subworkflow":return"fa-tasks";default:return"fa-wrench"}},stepLabel:function(){return this.labelForWorkflowStep(this.workflowStep.id)}}),methods:D(D(D({},Object(y.b)(["fetchToolForId","fetchWorkflowForInstanceId"])),Object(b.b)(["fetchInvocationStepById"])),{},{fetchTool:function(){this.workflowStep.tool_id&&!this.getToolForId(this.workflowStep.tool_id)&&this.fetchToolForId(this.workflowStep.tool_id)},fetchSubworkflow:function(){this.workflowStep.workflow_id&&this.fetchWorkflowForInstanceId(this.workflowStep.workflow_id)},toggleStep:function(){this.expanded=!this.expanded},labelForWorkflowStep:function(e){var t=this.invocationSteps[e],n=this.workflow.steps[e],i=e+1;if(t&&t.workflow_step_label)return"Step ".concat(i,": ").concat(t.workflow_step_label);var a=n.type;switch(a){case"tool":return"Step ".concat(i,": ").concat(this.getToolNameById(n.tool_id));case"subworkflow":var r=this.getWorkflowByInstanceId(n.workflow_id),o=r?r.name:"Subworkflow";return"Step ".concat(i,": ").concat(o);case"parameter_input":return"Step ".concat(i,": Parameter input");case"data_input":return"Step ".concat(i,": Data input");case"data_collection_input":return"Step ".concat(i,": Data collection input");default:return"Step ".concat(i,": Unknown step type '").concat(a,"'")}}})},A=Object(d.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex",attrs:{"data-step":e.workflowStep.id}},[n("div",{staticClass:"ui-portlet-section",staticStyle:{width:"100%"}},[n("div",{staticClass:"portlet-header portlet-title portlet-operations",on:{click:e.toggleStep}},[n("i",{class:"portlet-title-icon fa mr-1 "+e.stepIcon}),e._v(" "),n("span",{staticClass:"portlet-title-text"},[n("u",{staticClass:"step-title"},[e._v(e._s(e.stepLabel))])])]),e._v(" "),e.expanded?n("div",{staticClass:"portlet-content"},[e.isReady&&void 0!==e.invocationStepId?n("InvocationStepProvider",{attrs:{id:e.invocationStepId},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.loading;return[n("div",{staticStyle:{"min-width":"1"}},[a?n("loading-span",{attrs:{message:"Loading invocation step details"}}):n("div",[Object.values(i.outputs).length>0?n("details",{staticClass:"invocation-step-output-details"},[n("summary",[n("b",[e._v("Output Datasets")])]),e._v(" "),e._l(i.outputs,(function(t,i){return n("div",{key:t.id},[n("b",[e._v(e._s(i))]),e._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:t}})],1)}))],2):e._e(),e._v(" "),Object.values(i.output_collections).length>0?n("details",{staticClass:"invocation-step-output-collection-details"},[n("summary",[n("b",[e._v("Output Dataset Collections")])]),e._v(" "),e._l(i.output_collections,(function(t,i){return n("div",{key:t.id},[n("b",[e._v(e._s(i))]),e._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:t}})],1)}))],2):e._e(),e._v(" "),n("div",{staticClass:"portlet-body",staticStyle:{width:"100%","overflow-x":"auto"}},["tool"==e.workflowStepType?n("details",{staticClass:"invocation-step-job-details"},[n("summary",[n("b",[e._v("Jobs")])]),e._v(" "),n("job-step",{attrs:{jobs:i.jobs}})],1):"parameter_input"==e.workflowStepType?n("parameter-step",{attrs:{parameters:[e.invocation.input_step_parameters[i.workflow_step_label]]}}):e.isDataStep&&e.invocation.inputs[e.workflowStep.id]?n("workflow-invocation-data-contents",{attrs:{data_item:e.invocation.inputs[e.workflowStep.id]}}):"subworkflow"==e.workflowStepType?n("div",[i.subworkflow_invocation_id?n("workflow-invocation-state",{attrs:{"invocation-id":i.subworkflow_invocation_id}}):n("div",[e._v("\n                                    Workflow invocation for this step is not yet scheduled.\n                                    "),n("p"),e._v("\n                                    This step consumes outputs from these steps:\n                                    "),e.workflowStep?n("ul",e._l(Object.values(e.workflowStep.input_steps),(function(t){return n("li",{key:t.source_step},[e._v("\n                                            "+e._s(e.labelForWorkflowStep(t.source_step))+"\n                                        ")])})),0):e._e()])],1):e._e()],1)])],1)]}}],null,!1,4156339022)}):n("loading-span",{attrs:{message:"This invocation has not been scheduled yet, step information is unavailable"}})],1):e._e()])])}),[],!1,null,null,null).exports,I=n(120);function P(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={components:{WorkflowInvocationDataContents:v,WorkflowInvocationStep:A,ParameterStep:u},props:{invocation:{required:!0},invocationAndJobTerminal:{required:!0,type:Boolean}},created:function(){this.fetchWorkflowForInstanceId(this.invocation.workflow_id),this.monitorHistory()},computed:H(H({},Object(b.c)(["getWorkflowByInstanceId"])),{},{orderedSteps:function(){return P(this.invocation.steps).sort((function(e,t){return e.order_index-t.order_index}))},workflow:function(){return this.getWorkflowByInstanceId(this.invocation.workflow_id)}}),methods:H(H({},Object(y.b)(["fetchWorkflowForInstanceId"])),{},{dataInputStepLabel:function(e,t){var n=this.orderedSteps[e],i=n&&n.workflow_step_label;return i||("hda"===t.src||"ldda"===t.src?i="Input dataset":"hdca"===t.src&&(i="Input dataset collection")),i},monitorHistory:function(){var e=this;if(!this.invocationAndJobTerminal){var t=Object(I.d)((function(){return 1==e.invocationAndJobTerminal}),this.invocation.history_id);this.listenTo(t,{error:function(e){return console.error("An error occured while monitoring history for datasets",e)},complete:function(){return console.log("Invocation finished, stopping history dataset monitor")}})}}})},F=Object(d.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.invocation?n("div",[Object.keys(e.invocation.input_step_parameters).length?n("div",[n("details",{staticClass:"invocation-parameters-details"},[e._m(0),e._v(" "),n("parameter-step",{attrs:{parameters:Object.values(e.invocation.input_step_parameters)}})],1)]):e._e(),e._v(" "),Object.keys(e.invocation.inputs).length?n("div",[n("details",{staticClass:"invocation-inputs-details"},[e._m(1),e._v(" "),e._l(e.invocation.inputs,(function(t,i){return n("div",{key:t.id,attrs:{"data-label":e.dataInputStepLabel(i,t)}},[n("b",[e._v(e._s(e.dataInputStepLabel(i,t)))]),e._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:t}})],1)}))],2)]):e._e(),e._v(" "),Object.keys(e.invocation.outputs).length?n("div",[n("details",{staticClass:"invocation-outputs-details"},[e._m(2),e._v(" "),e._l(e.invocation.outputs,(function(t,i){return n("div",{key:t.id},[n("b",[e._v(e._s(i)+":")]),e._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:t}})],1)}))],2)]):e._e(),e._v(" "),Object.keys(e.invocation.output_collections).length?n("div",[n("details",{staticClass:"invocation-output-collections-details"},[e._m(3),e._v(" "),e._l(e.invocation.output_collections,(function(t,i){return n("div",{key:t.id},[n("b",[e._v(e._s(i)+":")]),e._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:t}})],1)}))],2)]):e._e(),e._v(" "),e.workflow?n("div",[e.workflow?n("details",{staticClass:"invocation-steps-details"},[e._m(4),e._v(" "),e._l(Object.values(e.workflow.steps),(function(t){return n("workflow-invocation-step",{key:t.id,attrs:{invocation:e.invocation,"ordered-steps":e.orderedSteps,workflow:e.workflow,"workflow-step":t}})}))],2):e._e()]):e._e()]):e._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("summary",[t("b",[this._v("Parameters")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("summary",[t("b",[this._v("Inputs")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("summary",[t("b",[this._v("Outputs")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("summary",[t("b",[this._v("Output Collections")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("summary",[t("b",[this._v("Steps")])])}],!1,null,null,null).exports,W=n(104),z=n(236),U=n(242);function V(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){return Object(i.c)()+e},X={components:{ProgressBar:U.a,WorkflowInvocationDetails:F},mixins:[z.a],props:{invocationId:{type:String,required:!0},index:{type:Number,optional:!0}},data:function(){return{stepStatesInterval:null,jobStatesInterval:null}},created:function(){this.pollStepStatesUntilTerminal(),this.pollJobStatesUntilTerminal()},computed:G(G({},Object(b.c)(["getInvocationById","getInvocationJobsSummaryById"])),{},{indexStr:function(){return null==this.index?"":"".concat(this.index+1)},invocation:function(){return this.getInvocationById(this.invocationId)},invocationState:function(){var e;return(null===(e=this.invocation)||void 0===e?void 0:e.state)||"new"},createdTime:function(){var e;return(null===(e=this.invocation)||void 0===e?void 0:e.create_time)||null},stepCount:function(){var e;return null===(e=this.invocation)||void 0===e?void 0:e.steps.length},stepStates:function(){var e={};if(!this.invocation)return{};var t,n=V(this.invocation.steps);try{for(n.s();!(t=n.n()).done;){var i=t.value;e[i.state]?e[i.state]+=1:e[i.state]=1}}catch(e){n.e(e)}finally{n.f()}return e},invocationAndJobTerminal:function(){return this.invocationSchedulingTerminal&&this.jobStatesTerminal},invocationLink:function(){return K("workflows/invocations/report?id=".concat(this.invocationId))},bcoJSON:function(){return K("api/invocations/".concat(this.invocationId,"/biocompute/download"))},invocationPdfLink:function(){return K("api/invocations/".concat(this.invocationId,"/report.pdf"))},invocationSchedulingTerminal:function(){return"scheduled"==this.invocationState||"cancelled"==this.invocationState||"failed"==this.invocationState},jobStatesTerminal:function(){var e;return!(!this.invocationSchedulingTerminal||0!==(null===(e=this.JobStatesSummary)||void 0===e?void 0:e.jobCount))||this.jobStatesSummary&&this.jobStatesSummary.terminal()},stepStatesStr:function(){return"".concat(this.stepStates.scheduled||0," of ").concat(this.stepCount," steps successfully scheduled.")},jobStatesStr:function(){var e,t="".concat((null===(e=this.jobStatesSummary)||void 0===e?void 0:e.numTerminal())||0," of ").concat(this.jobCount," jobs complete");return this.invocationSchedulingTerminal||(t+=" (total number of jobs will change until all steps fully scheduled)"),"".concat(t,".")},jobStatesSummary:function(){var e=this.getInvocationJobsSummaryById(this.invocationId);return e?new W.a.JobStatesSummary(e):null}}),methods:G(G({},Object(b.b)(["fetchInvocationForId","fetchInvocationJobsSummaryForId"])),{},{pollStepStatesUntilTerminal:function(){var e=this;this.invocation&&this.invocationSchedulingTerminal||this.fetchInvocationForId(this.invocationId).then((function(t){e.stepStatesInterval=setTimeout(e.pollStepStatesUntilTerminal,3e3)}))},pollJobStatesUntilTerminal:function(){var e=this;this.jobStatesTerminal||this.fetchInvocationJobsSummaryForId(this.invocationId).then((function(t){e.jobStatesInterval=setTimeout(e.pollJobStatesUntilTerminal,3e3)}))},onError:function(e){console.error(e)},onCancel:function(){this.$emit("invocation-cancelled")},cancelWorkflowScheduling:function(){var e,t;(e=this.invocationId,t=o("api/invocations/".concat(e)),r.a.delete(t)).then(this.onCancel).catch(this.onError)}}),beforeDestroy:function(){clearTimeout(this.jobStatesInterval),clearTimeout(this.stepStatesInterval)}},Q=Object(d.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-3 workflow-invocation-state-component"},[e.invocationAndJobTerminal?n("div",[n("span",[n("a",{staticClass:"invocation-report-link",attrs:{href:e.invocationLink}},[n("b",[e._v("View Report "+e._s(e.indexStr))])]),e._v(" "),n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"fa fa-print ml-1 invocation-pdf-link",attrs:{href:e.invocationPdfLink,title:"Download PDF"}})])]):n("div",[n("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),n("span",[e._v("Invocation "+e._s(e.indexStr)+"...")]),e._v(" "),e.invocationSchedulingTerminal?e._e():n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times cancel-workflow-scheduling",attrs:{title:"Cancel scheduling of workflow invocation"},on:{click:e.cancelWorkflowScheduling}})]),e._v(" "),e.stepCount?"cancelled"==e.invocationState?n("progress-bar",{staticClass:"steps-progress",attrs:{note:"Invocation scheduling cancelled - expected jobs and outputs may not be generated.","error-count":1}}):"failed"==e.invocationState?n("progress-bar",{staticClass:"steps-progress",attrs:{note:"Invocation scheduling failed - Galaxy administrator may have additional details in logs.","error-count":1}}):n("progress-bar",{staticClass:"steps-progress",attrs:{note:e.stepStatesStr,total:e.stepCount,"ok-count":e.stepStates.scheduled,loading:!e.invocationSchedulingTerminal}}):n("progress-bar",{staticClass:"steps-progress",attrs:{note:"Loading step state summary...",loading:!0}}),e._v(" "),n("progress-bar",{staticClass:"jobs-progress",attrs:{note:e.jobStatesStr,total:e.jobCount,"ok-count":e.okCount,"running-count":e.runningCount,"new-count":e.newCount,"error-count":e.errorCount,loading:!e.invocationAndJobTerminal}}),e._v(" "),e.invocationAndJobTerminal?n("span",[n("a",{staticClass:"bco-json",attrs:{href:e.bcoJSON}},[n("b",[e._v("Download BioCompute Object")])])]):e._e(),e._v(" "),e.invocation?n("workflow-invocation-details",{attrs:{invocation:e.invocation,"invocation-and-job-terminal":e.invocationAndJobTerminal}}):e._e()],1)}),[],!1,null,null,null);t.default=Q.exports},function(e,t,n){"use strict";var i=n(36),a=n(276),r=n(584),o=n(102),s=n(280),l=n(581),c=n(628),d=n(5),u={inject:["STATES"],components:{Discarded:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("The job creating this dataset was cancelled before completion.")])])}),[],!0,null,null,null).exports,Empty:Object(d.a)({},(function(e,t){var n=t._c;return t.props.dataset?n("div",[n("span",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("No data")]),t._v(": "),n("i",[t._v(t._s(t.props.dataset.misc_blurb))])]):t._e()}),[],!0,null,null,null).exports,Error:Object(d.a)({},(function(e,t){var n=t._c;return t.props.dataset?n("div",[!t.props.dataset.purged&&t.props.dataset.misc_info?n("div",[n("span",[t._v(t._s(t.props.dataset.misc_info))])]):t._e(),t._v(" "),n("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"help-text"},[t._v("An error occurred with this props.dataset")]),t._v(" "),t.props.dataset.misc_info?n("div",{staticClass:"job-error-text"},[n("span",[t._v(t._s(t.props.dataset.misc_info))])]):t._e()]):t._e()}),[],!0,null,null,null).exports,New:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("This is a new dataset and not all of its data are available yet.")])])}),[],!0,null,null,null).exports,NotViewable:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("You do not have permission to view this dataset.")])])}),[],!0,null,null,null).exports,Ok:Object(d.a)({},(function(e,t){var n=t._c;return t.props.dataset?n("div",[t.props.dataset.misc_blurb?n("div",{staticClass:"blurb"},[n("span",{staticClass:"value"},[t._v(t._s(t.props.dataset.misc_blurb))])]):t._e(),t._v(" "),t.props.dataset.file_ext?n("div",{staticClass:"datatype"},[n("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[t._v("format")]),t._v(" "),n("span",{staticClass:"value"},[t._v(t._s(t.props.dataset.file_ext))])]):t._e(),t._v(" "),t.props.dataset.metadata_dbkey?n("div",{staticClass:"dbkey"},[n("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[t._v("database")]),t._v(" "),n("span",{staticClass:"value"},[t._v(t._s(t.props.dataset.metadata_dbkey))])]):t._e(),t._v(" "),t.props.dataset.misc_info?n("div",[n("span",[t._v(t._s(t.props.dataset.misc_info))])]):t._e()]):t._e()}),[],!0,null,null,null).exports,Paused:Object(d.a)({},(function(e,t){var n=t._c;return t.dataset?n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v('This job is paused. Use the "Resume Paused Jobs" in the history menu to resume.')]),t._v(" "),t.dataset.misc_info?n("div",[n("span",[t._v(t._s(t.props.dataset.misc_info))])]):t._e()]):t._e()}),[],!0,null,null,null).exports,Queued:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("This job is waiting to run.")])])}),[],!0,null,null,null).exports,Running:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("This job is currently running.")])])}),[],!0,null,null,null).exports,SettingMetadata:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("Metadata is being auto-detected.")])])}),[],!0,null,null,null).exports,Upload:Object(d.a)({},(function(e,t){var n=t._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("This dataset is currently uploading.")])])}),[],!0,null,null,null).exports},props:{dataset:{type:Object,required:!0}},computed:{summaryComponent:function(){var e=this.dataset.state;return e==this.STATES.FAILED_METADATA&&(e=this.STATES.OK),Object(c.capitalize)(Object(c.camelize)(e))}}},h=Object(d.a)(u,(function(){var e=this.$createElement;return(this._self._c||e)(this.summaryComponent,{tag:"component",staticClass:"summary",attrs:{dataset:this.dataset}})}),[],!1,null,null,null).exports,f=n(585),p={mixins:[n(243).a],components:{ClickToEdit:a.a,Annotation:r.a,StatusIcon:s.b,StateBtn:s.a,DatasetMenu:l.a,DatasetSummary:h,ContentTags:f.a,Nametag:o.a},props:{dataset:{type:i.c,required:!0},expanded:{type:Boolean,required:!0},selected:{type:Boolean,required:!1,default:!1},showSelection:{type:Boolean,required:!1,default:!1}},data:function(){return{showTags:!1}},computed:{collapsed:function(){return!this.expanded},typeId:function(){return this.dataset.type_id},ok:function(){return"ok"==this.dataset.state}},methods:{onStatusClick:function(e){switch(this.dataset.state){case i.g.ERROR:this.backboneRoute("datasets/error",{dataset_id:this.dataset.id});break;default:console.log("unhandled status icon click",this.dataset.state)}}}},m=Object(d.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dataset",class:{expanded:e.expanded,collapsed:e.collapsed,selected:e.selected},attrs:{"data-state":e.dataset.state},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-left",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),e.$emit("update:expanded",!1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-right",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),e.$emit("update:expanded",!0))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.target!==t.currentTarget?null:(t.stopPropagation(),t.preventDefault(),e.$emit("update:selected",!e.selected))}]}},[n("nav",{staticClass:"content-top-menu",on:{click:function(t){return t.stopPropagation(),e.$emit("update:expanded",!e.expanded)}}},[n("div",{staticClass:"content-status-indicators",on:{click:function(e){e.stopPropagation()}}},[e.showSelection?n("b-check",{attrs:{checked:e.selected},on:{change:function(t){return e.$emit("update:selected",t)}}}):e._e(),e._v(" "),e.ok?e._e():n("StatusIcon",{staticClass:"status-icon px-1",attrs:{state:e.dataset.state},on:{click:function(t){return t.stopPropagation(),e.onStatusClick(t)}}}),e._v(" "),e.dataset.visible?e._e():n("StateBtn",{staticClass:"px-1",attrs:{state:"hidden",title:"Unhide",icon:"fa fa-eye-slash"},on:{click:function(t){return t.stopPropagation(),e.$emit("unhide")}}}),e._v(" "),e.dataset.isDeleted&&!e.dataset.purged?n("StateBtn",{staticClass:"px-1",attrs:{state:"deleted",title:"Undelete",icon:"fas fa-trash-restore"},on:{click:function(t){return t.stopPropagation(),e.$emit("undelete")}}}):e._e()],1),e._v(" "),n("div",{staticClass:"content-title"},[n("h5",{staticClass:"text-truncate"},[n("span",{staticClass:"hid"},[e._v(e._s(e.dataset.hid))]),e._v(" "),e.collapsed||!e.dataset.canEditName?n("span",{staticClass:"name"},[e._v(e._s(e.dataset.title))]):e._e()])]),e._v(" "),n("div",{staticClass:"content-item-menu"},[e._t("menu",[n("DatasetMenu",e._g({attrs:{dataset:e.dataset,expanded:e.expanded,"show-tags":e.showTags},on:{"update:showTags":function(t){e.showTags=t},"update:show-tags":function(t){e.showTags=t}}},e.$listeners))])],2)]),e._v(" "),e.collapsed&&e.dataset.nameTags.length?n("div",{staticClass:"nametags p-1"},e._l(e.dataset.nameTags,(function(e){return n("Nametag",{key:e,attrs:{tag:e}})})),1):e._e(),e._v(" "),e.expanded?n("header",{staticClass:"p-2"},[e.dataset.canEditName?n("ClickToEdit",{attrs:{"tag-name":"h4",value:e.dataset.name,"display-label":e.dataset.title,"tooltip-title":e._f("localize")("Edit dataset name..."),"tooltip-placement":"left"},on:{input:function(t){return e.$emit("update:dataset",{name:t})}}}):e._e(),e._v(" "),n("Annotation",{staticClass:"mt-1",attrs:{value:e.dataset.annotation},on:{input:function(t){return e.$emit("update:dataset",{annotation:t})}}}),e._v(" "),e.showTags?n("ContentTags",{staticClass:"mt-2",attrs:{content:e.dataset}}):e.dataset.nameTags.length?n("div",{staticClass:"nametags mt-2"},e._l(e.dataset.nameTags,(function(e){return n("Nametag",{key:e,attrs:{tag:e}})})),1):e._e(),e._v(" "),n("div",{staticClass:"details"},[n("DatasetSummary",{attrs:{dataset:e.dataset}}),e._v(" "),e.dataset.displayLinks.length?n("div",{staticClass:"display-applications"},e._l(e.dataset.displayLinks,(function(t){return n("div",{key:t.label,staticClass:"display-application"},[n("span",{staticClass:"display-application-location"},[e._v("\n                        "+e._s(t.label)+"\n                    ")]),e._v(" "),n("span",{staticClass:"display-application-links"},e._l(t.links,(function(t){return n("a",{key:t.href,attrs:{href:t.href,target:t.target}},[e._v("\n                            "+e._s(t.text)+"\n                        ")])})),0)])})),0):e._e(),e._v(" "),e.dataset.peek?n("pre",{staticClass:"dataset-peek p-1",domProps:{innerHTML:e._s(e.dataset.peek)}}):e._e()],1)],1):e._e()])}),[],!1,null,null,null);t.a=m.exports},function(e,t,n){"use strict";var i=n(218),a=n(280),r=n(580),o=n(582),s=n(102),l={components:{StatusIcon:a.b,StateBtn:a.a,JobStateProgress:r.a,DscMenu:o.a,Nametag:s.a},props:{dsc:{type:i.a,required:!0},selected:{type:Boolean,required:!1,default:!1},showSelection:{type:Boolean,required:!1,default:!1}},methods:{onStatusClick:function(){var e;(e=console).log.apply(e,["onStatusClick"].concat(Array.prototype.slice.call(arguments)))}}},c=(n(861),n(5)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dataset dataset-collection collapsed",class:{selected:e.selected},attrs:{"data-state":e.dsc.state},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-right",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),e.$emit("viewCollection"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.target!==t.currentTarget?null:(t.stopPropagation(),t.preventDefault(),e.$emit("update:selected",!e.selected))}],click:function(t){return t.stopPropagation(),e.$emit("viewCollection")}}},[n("nav",{staticClass:"content-top-menu"},[n("div",{staticClass:"content-status-indicators mr-1",on:{click:function(e){e.stopPropagation()}}},[e.showSelection?n("b-check",{attrs:{checked:e.selected},on:{change:function(t){return e.$emit("update:selected",t)}}}):e._e(),e._v(" "),"ok"!=e.dsc.state?n("StatusIcon",{staticClass:"status-icon px-1",attrs:{state:e.dsc.state},on:{click:function(t){return t.stopPropagation(),e.onStatusClick(t)}}}):e._e(),e._v(" "),e.dsc.visible?e._e():n("StateBtn",{staticClass:"px-1",attrs:{state:"hidden",title:"Unhide",icon:"fa fa-eye-slash"},on:{click:function(t){return t.stopPropagation(),e.$emit("unhide")}}}),e._v(" "),e.dsc.deleted?n("StateBtn",{staticClass:"px-1",attrs:{state:"deleted",title:"Undelete",icon:"fas fa-trash-restore"},on:{click:function(t){return t.stopPropagation(),e.$emit("undelete")}}}):e._e(),e._v(" "),n("StateBtn",{staticClass:"px-1",attrs:{state:"ok",title:"Collection",icon:"fas fa-folder"},on:{click:function(t){return t.stopPropagation(),e.$emit("viewCollection")}}})],1),e._v(" "),n("div",{staticClass:"content-title mr-1"},[n("h5",{staticClass:"text-truncate"},[n("span",{staticClass:"hid"},[e._v(e._s(e.dsc.hid))]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(e.dsc.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v("\n                    ("+e._s(e._f("localize")(e.dsc.collectionType))+" "+e._s(e._f("localize")(e.dsc.collectionCountDescription))+")\n                ")])])]),e._v(" "),n("div",{staticClass:"content-item-menu"},[e._t("menu",[e.dsc.deleted?e._e():n("DscMenu",e._g({},e.$listeners))])],2)]),e._v(" "),e.dsc.nameTags.length?n("div",{staticClass:"nametags p-1"},e._l(e.dsc.nameTags,(function(e){return n("Nametag",{key:e,attrs:{tag:e}})})),1):e._e(),e._v(" "),e.dsc.jobSummary?n("JobStateProgress",{staticClass:"m-2",attrs:{summary:e.dsc.jobSummary}}):e._e()],1)}),[],!1,null,"38171974",null);t.a=d.exports},,,,,,,function(e,t,n){"use strict";var i=n(466),a=n(36),r=n(45),o=n(58);function s(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){s(r,i,a,o,l,"next",e)}function l(e){s(r,i,a,o,l,"throw",e)}o(void 0)}))}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={components:{DatasetUI:i.a},props:{item:{type:Object,required:!0},element_identifier:{type:String,required:!1,default:""}},computed:{dataset:function(){var e=d(d({},this.item),{},{element_identifier:this.element_identifier});return new a.c(e)}},data:function(){return{expanded:!1}},methods:{expand:function(e){this.expanded=!this.expanded},onDelete:function(){var e=arguments,t=this;return l(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,Object(r.e)(t.dataset,i);case 3:return a=n.sent,n.next=6,Object(o.b)(a);case 6:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var e=this;return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({visible:!0});case 2:case"end":return t.stop()}}),t)})))()},onUndelete:function(){var e=this;return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({deleted:!1});case 2:case"end":return t.stop()}}),t)})))()},onUpdate:function(){var e=arguments,t=this;return l(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,Object(r.o)(t.dataset,i);case 3:return a=n.sent,n.next=6,Object(o.b)(a);case 6:case"end":return n.stop()}}),n)})))()}}},f=n(5),p=Object(f.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.dataset?n("DatasetUI",e._g(e._b({attrs:{expanded:e.expanded,dataset:e.dataset,"show-tags":!0},on:{"update:expanded":e.expand,delete:e.onDelete,undelete:e.onUndelete,unhide:e.onUnhide,update:e.onUpdate}},"DatasetUI",e.$attrs,!1),e.$listeners)):e._e()}),[],!1,null,null,null);t.a=p.exports},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(151),u=n(174),h=n(73),f=n(10),p=s.a.View.extend({el:"body",className:"full-content",_panelids:["left","right"],initialize:function(e){var t=this;this.config=i.default.defaults(e.config||{},{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:"",hide_panels:!1,hide_masthead:!1});var n=Object(c.a)();n.modal=this.modal=new h.a.View,n.router=this.router=e.Router&&new e.Router(this,e);var a=new d.a;this.center=new u.a.CenterPanel,n.display=this.display=function(e,n){e.title?(f.a.setWindowTitle(e.title),e.allow_title_display=!1):(f.a.setWindowTitle(),e.allow_title_display=!0),e.active_tab&&t.masthead.highlight(e.active_tab),t.center.display(e,n)},this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$masthead=this.$("#masthead"),this.$center=this.$("#center"),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox"),this.config.hide_masthead?(this.$masthead.remove(),this.$center.css("top",0)):this.masthead=Object(d.b)(this.$masthead[0],this.config,a),this.$center.append(this.center.$el),this.$el.append(a.frame.$el),this.$el.append(this.modal.$el),this.panels={},this.config.hide_panels||i.default.each(this._panelids,(function(n){var i=n.charAt(0).toUpperCase()+n.slice(1),a=e[i];if(a){var r=new a(t,e),o=t.$("#".concat(n));t[r.toString()]=r,t.panels[n]=new u.a.SidePanel({id:n,el:o,view:r}),t.config.hide_masthead&&o.css("top",0)}})),this.render(),this.router&&s.a.history.start({root:Object(l.getAppRoot)(),pushState:!0})},render:function(){return r()(".select2-hidden-accessible").remove(),this.config.hide_masthead||(this.renderMessageBox(),this.renderInactivityBox()),this.renderPanels(),this},renderMessageBox:function(){if(this.config.message_box_visible){var e=this.config.message_box_content||"",t=this.config.message_box_class||"info";this.$messagebox.attr("class","alert alert-".concat(t," rounded-0 m-0 p-2")).append(r()("<div/>").attr("class","fa fa-fw mr-1 fa-exclamation")).append(e).toggle(!!e).show()}else this.$messagebox.hide();return this},renderInactivityBox:function(){if(this.config.show_inactivity_warning){var e=this.config.inactivity_box_content||"",t=r()("<a/>").attr("class","ml-1").attr("href","".concat(Object(l.getAppRoot)(),"user/resend_verification")).text("Resend verification");this.$inactivebox.append(r()("<div/>").attr("class","fa fa-fw mr-1 fa-exclamation-triangle")).append(e).append(t).toggle(!!e).show()}else this.$inactivebox.hide();return this},renderPanels:function(){var e=this;return i.default.each(this._panelids,(function(t){var n=e.panels[t];n?n.render():(e.$center.css(t,0),e.$("#".concat(t)).hide())})),this},_template:function(){return['<div id="everything">\n                <div id="background"/>\n                <div id="masthead"/>\n                <small id="messagebox"/>\n                <small id="inactivebox" class="alert rounded-0 m-0 p-2 alert-warning" />\n                <div id="columns">\n                    <div id="left" class="unified-panel"/>\n                    <div id="center" />\n                    <div id="right" class="unified-panel" />\n                </div>\n            </div>\n            <div id="dd-helper" />'].join("")},toString:function(){return"PageLayoutView"}});t.a={View:p}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(684);var i=n(1);!function(){window.console=window.console||{log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}},console.debug("Polyfills are running"),Object.assign=Object.assign||i.default.extend;for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window["".concat(t[n],"RequestAnimationFrame")],window.cancelRequestAnimationFrame=window["".concat(t[n],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),r=window.setTimeout((function(){t(i+a)}),a);return e=i+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)});var a=[{name:"canvas",compatible:function(){return window.CanvasRenderingContext2D}},{name:"sessionStorage",compatible:function(){try{return window.sessionStorage.length>=0}catch(e){console.debug(e)}return!1}}].filter((function(e){return!e.compatible()})).map((function(e){return e.name}));if(a.length){var r=document.querySelectorAll('link[rel="index"]').item(0);r&&(window.location="".concat(r.href,"static/incompatible-browser.html")),console.log("incompatible browser:\n".concat(a.join("\n")))}}()},,,,,,,,,,,,,function(e,t,n){var i=n(576),a=n(260);void 0===a.bundleEntries&&(a.bundleEntries=i),e.exports=i},function(e,t,n){var i=n(70);n(527),n(528),n(529),n(530),n(697),n(531),n(532),n(533),n(534),n(535),n(698),n(536),n(537),n(699),n(700),e.exports=i},function(e,t,n){
/**
 * @fileOverview jquery-autocomplete, the jQuery Autocompleter
 * @author <a href="mailto:dylan@dyve.net">Dylan Verheul</a>
 * @version 2.4.4
 * @requires jQuery 1.6+
 * @license MIT | GPL | Apache 2.0, see LICENSE.txt
 * @see https://github.com/dyve/jquery-autocomplete
 */
!function(e){"use strict";e.fn.autocomplete_verheul=function(t){var n;arguments.length>1?(n=t,(t=arguments[1]).url=n):"string"==typeof t&&(t={url:n=t});var i=e.extend({},e.fn.autocomplete_verheul.defaults,t);return this.each((function(){var t=e(this);t.data("autocompleter",new e.Autocompleter(t,e.meta?e.extend({},i,t.data()):i))}))},e.fn.autocomplete_verheul.defaults={inputClass:"acInput",loadingClass:"acLoading",resultsClass:"acResults",selectClass:"acSelect",queryParamName:"q",extraParams:{},remoteDataType:!1,lineSeparator:"\n",cellSeparator:"|",minChars:2,maxItemsToShow:10,delay:400,useCache:!0,maxCacheLength:10,matchSubset:!0,matchCase:!1,matchInside:!0,mustMatch:!1,selectFirst:!1,selectOnly:!1,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:!1,filterResults:!0,filter:!0,sortResults:!0,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:"min-width",useDelimiter:!1,delimiterChar:",",delimiterKeyCode:188,processData:null,onError:null,enabled:!0};var t=function(t){var n,i,a=typeof t;return"string"===a?(n=t,i={}):e.isArray(t)?(n=t[0],i=t.slice(1)):"object"===a&&(n=t.value,i=t.data),"object"!=typeof i&&(i={}),{value:n=String(n),data:i}},n=function(e,t,n){var i=parseInt(e,10);return n=n||{},(isNaN(i)||n.min&&i<n.min)&&(i=t),i},i=function(t,n){var i=[];return e.each(n,(function(e,t){i.push(function(e,t){return[e,encodeURIComponent(t)].join("=")}(e,t))})),i.length&&(t+=-1===t.indexOf("?")?"?":"&",t+=i.join("&")),t};e.Autocompleter=function(t,i){if(!t||!(t instanceof e)||1!==t.length||"INPUT"!==t.get(0).tagName.toUpperCase()&&"TEXTAREA"!==t.get(0).tagName.toUpperCase())throw new Error("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT or TEXTAREA tag expected.");var a=this;this.options=i,this.cacheData_={},this.cacheLength_=0,this.selectClass_="jquery-autocomplete-selected-item",this.keyTimeout_=null,this.finishTimeout_=null,this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1,this.finishOnBlur_=!0,this.options.minChars=n(this.options.minChars,e.fn.autocomplete_verheul.defaults.minChars,{min:0}),this.options.maxItemsToShow=n(this.options.maxItemsToShow,e.fn.autocomplete_verheul.defaults.maxItemsToShow,{min:0}),this.options.maxCacheLength=n(this.options.maxCacheLength,e.fn.autocomplete_verheul.defaults.maxCacheLength,{min:1}),this.options.delay=n(this.options.delay,e.fn.autocomplete_verheul.defaults.delay,{min:0}),2!=this.options.preventDefaultReturn&&(this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0),2!=this.options.preventDefaultTab&&(this.options.preventDefaultTab=this.options.preventDefaultTab?1:0),this.dom={},this.dom.$elem=t,this.dom.$elem.attr("autocomplete","off").addClass(this.options.inputClass),this.dom.$results=e("<div></div>").hide().addClass(this.options.resultsClass).css({position:"absolute"}),e("body").append(this.dom.$results),t.keydown((function(e){switch(a.lastKeyPressed_=e.keyCode,a.lastKeyPressed_){case a.options.delimiterKeyCode:a.options.useDelimiter&&a.active_&&a.selectCurrent();break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:return e.preventDefault(),a.active_?a.focusPrev():a.activate(),!1;case 40:return e.preventDefault(),a.active_?a.focusNext():a.activate(),!1;case 9:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultTab))return e.preventDefault(),!1;if(2===a.options.preventDefaultTab)return e.preventDefault(),!1;break;case 13:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultReturn))return e.preventDefault(),!1;if(2===a.options.preventDefaultReturn)return e.preventDefault(),!1;break;case 27:if(a.active_)return e.preventDefault(),a.deactivate(!0),!1;break;default:a.activate()}})),t.on("paste",(function(){a.activate()}));var r=function(){a.deactivate(!0)};t.blur((function(){a.finishOnBlur_&&(a.finishTimeout_=setTimeout(r,200))})),t.parents("form").on("submit",r)},e.Autocompleter.prototype.position=function(){var t=this.dom.$elem.offset(),n=this.dom.$results.outerHeight(),i=e(window).outerHeight(),a=t.top+this.dom.$elem.outerHeight(),r=a+n,o={top:a,left:t.left};if(r>i){var s=t.top-n;s>=0&&(o.top=s)}this.dom.$results.css(o)},e.Autocompleter.prototype.cacheRead=function(e){var t,n,i,a,r;if(this.options.useCache)for(t=(e=String(e)).length,n=this.options.matchSubset?1:t;n<=t;){for(a=this.options.matchInside?t-n:0,r=0;r<=a;){if(i=e.substr(0,n),void 0!==this.cacheData_[i])return this.cacheData_[i];r++}n++}return!1},e.Autocompleter.prototype.cacheWrite=function(e,t){return!!this.options.useCache&&(this.cacheLength_>=this.options.maxCacheLength&&this.cacheFlush(),e=String(e),void 0!==this.cacheData_[e]&&this.cacheLength_++,this.cacheData_[e]=t,this.cacheData_[e])},e.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={},this.cacheLength_=0},e.Autocompleter.prototype.callHook=function(t,n){var i=this.options[t];return!(!i||!e.isFunction(i))&&i(n,this)},e.Autocompleter.prototype.activate=function(){if(this.options.enabled){var e=this;this.keyTimeout_&&clearTimeout(this.keyTimeout_),this.keyTimeout_=setTimeout((function(){e.activateNow()}),this.options.delay)}},e.Autocompleter.prototype.activateNow=function(){var e=this.beforeUseConverter(this.dom.$elem.val());e!==this.lastProcessedValue_&&e!==this.lastSelectedValue_&&this.fetchData(e)},e.Autocompleter.prototype.fetchData=function(e){var t=this,n=function(e,n){t.options.processData&&(e=t.options.processData(e)),t.showResults(t.filterResults(e,n),n)};this.lastProcessedValue_=e,e.length<this.options.minChars?n([],e):this.options.data?n(this.options.data,e):this.fetchRemoteData(e,(function(t){n(t,e)}))},e.Autocompleter.prototype.fetchRemoteData=function(t,n){var i=this.cacheRead(t);if(i)n(i);else{var a=this,r="json"===a.options.remoteDataType?"json":"text",o=function(e){var i=!1;!1!==e&&(i=a.parseRemoteData(e),a.cacheWrite(t,i)),a.dom.$elem.removeClass(a.options.loadingClass),n(i)};this.dom.$elem.addClass(this.options.loadingClass),e.ajax({url:this.makeUrl(t),success:o,error:function(t,n,i){e.isFunction(a.options.onError)?a.options.onError(t,n,i):o(!1)},dataType:r})}},e.Autocompleter.prototype.setExtraParam=function(t,n){var i=e.trim(String(t));return i&&(this.options.extraParams||(this.options.extraParams={}),this.options.extraParams[i]!==n&&(this.options.extraParams[i]=n,this.cacheFlush())),this},e.Autocompleter.prototype.makeUrl=function(t){var n=this.options.url,a=e.extend({},this.options.extraParams);return!1===this.options.queryParamName?n+=encodeURIComponent(t):a[this.options.queryParamName]=t,i(n,a)},e.Autocompleter.prototype.parseRemoteData=function(t){var n,i=t;if("json"===this.options.remoteDataType){switch(n=typeof t){case"object":i=t;break;case"string":i=e.parseJSON(t);break;default:throw new Error("Unexpected remote data type: "+n)}return i}return function(e,t,n){var i,a,r,o,s,l,c=[];for(l=String(e).replace("\r\n","\n").split(t),i=0;i<l.length;i++){for(o=l[i].split(n),r=[],a=0;a<o.length;a++)r.push(decodeURIComponent(o[a]));s=r.shift(),c.push({value:s,data:r})}return c}(i,this.options.lineSeparator,this.options.cellSeparator)},e.Autocompleter.prototype.defaultFilter=function(e,t){if(!e.value)return!1;if(this.options.filterResults){var n=this.matchStringConverter(t),i=this.matchStringConverter(e.value);this.options.matchCase||(n=n.toLowerCase(),i=i.toLowerCase());var a=i.indexOf(n);return this.options.matchInside?a>-1:0===a}return!0},e.Autocompleter.prototype.filterResult=function(t,n){return!1===this.options.filter||(e.isFunction(this.options.filter)?this.options.filter(t,n):this.defaultFilter(t,n))},e.Autocompleter.prototype.filterResults=function(e,n){var i,a,r=[];for(i=0;i<e.length;i++)a=t(e[i]),this.filterResult(a,n)&&r.push(a);return this.options.sortResults&&(r=this.sortResults(r,n)),this.options.maxItemsToShow>0&&this.options.maxItemsToShow<r.length&&(r.length=this.options.maxItemsToShow),r},e.Autocompleter.prototype.sortResults=function(t,n){var i=this,a=this.options.sortFunction;return e.isFunction(a)||(a=function(e,t,n){return function(e,t,n){return e=String(e.value),t=String(t.value),n||(e=e.toLowerCase(),t=t.toLowerCase()),e>t?1:e<t?-1:0}(e,t,i.options.matchCase)}),t.sort((function(e,t){return a(e,t,n,i.options)})),t},e.Autocompleter.prototype.matchStringConverter=function(t,n,i){var a=this.options.matchStringConverter;return e.isFunction(a)&&(t=a(t,n,i)),t},e.Autocompleter.prototype.beforeUseConverter=function(t){t=this.getValue(t);var n=this.options.beforeUseConverter;return e.isFunction(n)&&(t=n(t)),t},e.Autocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=!0},e.Autocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=!1},e.Autocompleter.prototype.createItemFromResult=function(t){var n=this,i=e("<li/>");return i.html(this.showResult(t.value,t.data)),i.data({value:t.value,data:t.data}).click((function(){n.selectItem(i)})).mousedown(n.disableFinishOnBlur).mouseup(n.enableFinishOnBlur),i},e.Autocompleter.prototype.getItems=function(){return e(">ul>li",this.dom.$results)},e.Autocompleter.prototype.showResults=function(t,n){var i,a,r,o,s=t.length,l=this,c=e("<ul></ul>"),d=!1,u=!1;if(s){for(i=0;i<s;i++)a=t[i],r=this.createItemFromResult(a),c.append(r),!1===d&&(d=String(a.value),u=r,r.addClass(this.options.firstItemClass)),i===s-1&&r.addClass(this.options.lastItemClass);this.dom.$results.html(c).show(),this.position(),this.options.autoWidth&&(o=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+this.dom.$results.width(),this.dom.$results.css(this.options.autoWidth,o)),this.getItems().hover((function(){l.focusItem(this)}),(function(){})),(this.autoFill(d,n)||this.options.selectFirst||this.options.selectOnly&&1===s)&&this.focusItem(u),this.active_=!0}else this.hideResults(),this.active_=!1},e.Autocompleter.prototype.showResult=function(t,n){return e.isFunction(this.options.showResult)?this.options.showResult(t,n):e("<p></p>").text(t).html()},e.Autocompleter.prototype.autoFill=function(e,t){var n,i,a,r;if(this.options.autoFill&&8!==this.lastKeyPressed_&&(n=String(e).toLowerCase(),i=String(t).toLowerCase(),a=e.length,r=t.length,n.substr(0,r)===i)){var o=this.getDelimiterOffsets(),s=o.start?" ":"";this.setValue(s+e);var l=r+o.start+s.length,c=a+o.start+s.length;return this.selectRange(l,c),!0}return!1},e.Autocompleter.prototype.focusNext=function(){this.focusMove(1)},e.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1)},e.Autocompleter.prototype.focusMove=function(t){var i=this.getItems();if(t=n(t,0))for(var a=0;a<i.length;a++)if(e(i[a]).hasClass(this.selectClass_))return void this.focusItem(a+t);this.focusItem(0)},e.Autocompleter.prototype.focusItem=function(t){var n,i=this.getItems();i.length&&(i.removeClass(this.selectClass_).removeClass(this.options.selectClass),"number"==typeof t?(t<0?t=0:t>=i.length&&(t=i.length-1),n=e(i[t])):n=e(t),n&&n.addClass(this.selectClass_).addClass(this.options.selectClass))},e.Autocompleter.prototype.selectCurrent=function(){var t=e("li."+this.selectClass_,this.dom.$results);1===t.length?this.selectItem(t):this.deactivate(!1)},e.Autocompleter.prototype.selectItem=function(e){var t=e.data("value"),n=e.data("data"),i=this.displayValue(t,n),a=this.beforeUseConverter(i);this.lastProcessedValue_=a,this.lastSelectedValue_=a;var r=this.getDelimiterOffsets(),o=this.options.delimiterChar,s=this.dom.$elem,l=0;this.options.useDelimiter&&(s.val().substring(r.start-1,r.start)==o&&" "!=o&&(i=" "+i),s.val().substring(r.end,r.end+1)!=o&&this.lastKeyPressed_!=this.options.delimiterKeyCode?i+=o:l=1),this.setValue(i),this.setCaret(r.start+i.length+l),this.callHook("onItemSelect",{value:t,data:n}),this.deactivate(!0),s.focus()},e.Autocompleter.prototype.displayValue=function(t,n){return e.isFunction(this.options.displayValue)?this.options.displayValue(t,n):t},e.Autocompleter.prototype.hideResults=function(){this.dom.$results.hide()},e.Autocompleter.prototype.deactivate=function(e){this.finishTimeout_&&clearTimeout(this.finishTimeout_),this.keyTimeout_&&clearTimeout(this.keyTimeout_),e&&(this.lastProcessedValue_!==this.lastSelectedValue_&&(this.options.mustMatch&&this.setValue(""),this.callHook("onNoMatch")),this.active_&&this.callHook("onFinish"),this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1),this.hideResults()},e.Autocompleter.prototype.selectRange=function(e,t){var n=this.dom.$elem.get(0);if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}},e.Autocompleter.prototype.setCaret=function(e){this.selectRange(e,e)},e.Autocompleter.prototype.getCaret=function(){var e,t,n,i,a,r,o=this.dom.$elem,s=o[0];return s.createTextRange?(t=document.selection,"textarea"!=s.tagName.toLowerCase()?(e=o.val(),(n=t.createRange().duplicate()).moveEnd("character",e.length),i=""===n.text?e.length:e.lastIndexOf(n.text),(n=t.createRange().duplicate()).moveStart("character",-e.length),a=n.text.length):((r=(n=t.createRange()).duplicate()).moveToElementText(s),r.setEndPoint("EndToEnd",n),a=(i=r.text.length-n.text.length)+n.text.length)):(i=o[0].selectionStart,a=o[0].selectionEnd),{start:i,end:a}},e.Autocompleter.prototype.setValue=function(e){if(this.options.useDelimiter){var t=this.dom.$elem.val(),n=this.getDelimiterOffsets();e=t.substring(0,n.start)+e+t.substring(n.end)}this.dom.$elem.val(e)},e.Autocompleter.prototype.getValue=function(e){if(this.options.useDelimiter){var t=this.getDelimiterOffsets();return e.substring(t.start,t.end).trim()}return e},e.Autocompleter.prototype.getDelimiterOffsets=function(){var e=this.dom.$elem.val();if(this.options.useDelimiter){var t=e.substring(0,this.getCaret().start).lastIndexOf(this.options.delimiterChar)+1,n=e.substring(this.getCaret().start).indexOf(this.options.delimiterChar);-1==n&&(n=e.length),n+=this.getCaret().start}else t=0,n=e.length;return{start:t,end:n}}}(n(70))},function(e,t,n){!function(e){e.fn._hover=e.fn.hover,e.fn.hover=function(e,t,n){return n&&this.bind("hoverstart",e),t&&this.bind("hoverend",n||t),e?this.bind("hover",n?t:e):this.trigger("hover")};var t=e.event.special.hover={delay:100,speed:100,setup:function(i){i=e.extend({speed:t.speed,delay:t.delay,hovered:0},i||{}),e.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){e.event.remove(this,"mouseenter mouseleave",n)}};function n(t){var i=t.data||t;switch(t.type){case"mouseenter":i.dist2=0,i.event=t,t.type="hoverstart",!1!==e.event.dispatch.call(this,t)&&(i.elem=this,e.event.add(this,"mousemove",n,i),i.timer=setTimeout(a,i.delay));break;case"mousemove":i.dist2+=Math.pow(t.pageX-i.event.pageX,2)+Math.pow(t.pageY-i.event.pageY,2),i.event=t;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(t.type="hoverend",e.event.dispatch.call(this,t),i.hovered--):e.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(e.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==e.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(a,i.delay),i.dist2=0}function a(){n(i)}}}(n(70))},function(e,t,n){!function(e){e.fn.drag=function(t,n,i){var a="string"==typeof t?t:"",r=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==a.indexOf("drag")&&(a="drag"+a),i=(t==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),a=t.data||{};n.related+=1,e.each(i.defaults,(function(e,t){void 0!==a[e]&&(n[e]=a[e])}))},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(a){if(!i.touched){var r,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!e(a.target).is(o.not)&&(!o.handle||e(a.target).closest(o.handle,a.currentTarget).length)&&(i.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[i.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,r=i.hijack(a,"draginit",o),o.propagates))return(r=i.flatten(r))&&r.length&&(o.interactions=[],e.each(r,(function(){o.interactions.push(i.interaction(this,o))}))),o.propagates=o.interactions.length,!1!==o.drop&&n.drop&&n.drop.handler(a,o),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,o):t.add(document,"mousemove mouseup",i.handler,o),!(!i.touched||o.live)&&void 0}},interaction:function(t,n){var a=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:a}},handler:function(a){var r=a.data;switch(a.type){case!r.dragging&&"touchmove":a.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(a.pageX-r.pageX,2)+Math.pow(a.pageY-r.pageY,2)<Math.pow(r.distance,2))break;a.target=r.target,i.hijack(a,"dragstart",r),r.propagates&&(r.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(r.dragging){if(i.hijack(a,"drag",r),r.propagates){!1!==r.drop&&n.drop&&n.drop.handler(a,r);break}a.type="mouseup"}case"touchend":case"mouseup":default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),r.dragging?(!1!==r.drop&&n.drop&&n.drop.handler(a,r),i.hijack(a,"dragend",r)):i.hijack(a,"dragclickonly",r),i.textselect(!0),!1===r.click&&r.dragging&&e.data(r.mousedown,"suppress.click",(new Date).getTime()+5),r.dragging=i.touched=!1}},hijack:function(n,a,r,o,s){if(r){var l,c,d,u={event:n.originalEvent,type:n.type},h=a.indexOf("drop")?"drag":"drop",f=o||0,p=isNaN(o)?r.interactions.length:o;n.type=a,n.originalEvent=null,r.results=[];do{if(c=r.interactions[f]){if("dragend"!==a&&c.cancelled)continue;d=i.properties(n,r,c),c.results=[],e(s||c[h]||r.droppable).each((function(o,s){if(d.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?t.dispatch.call(s,n,d):null)?("drag"==h&&(c.cancelled=!0,r.propagates-=1),"drop"==a&&(c[h][o]=null)):"dropinit"==a&&c.droppable.push(i.element(l)||s),"dragstart"==a&&(c.proxy=e(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==a)return l})),r.results[f]=i.flatten(c.results),"dropinit"==a&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=a||c.cancelled||d.update()}}while(++f<p);return n.type=u.type,n.originalEvent=u.event,i.flatten(r.results)}},properties:function(e,t,n){var a=n.callback;return a.drag=n.drag,a.proxy=n.proxy||n.drag,a.startX=t.pageX,a.startY=t.pageY,a.deltaX=e.pageX-t.pageX,a.deltaY=e.pageY-t.pageY,a.originalX=n.offset.left,a.originalY=n.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=i.flatten((n.drop||[]).slice()),a.available=i.flatten((n.droppable||[]).slice()),a},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,(function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t}))},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,(function(e){n.drop.locate(this,e)}))}};var a=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return a.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var r=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(r.props,(function(e,n){t[n]=i[n]}))}return t}};n.draginit=n.dragstart=n.dragend=i}(n(70))},function(e,t,n){!function(e){e.fn.drop=function(t,n,i){var a="string"==typeof t?t:"",r=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==a.indexOf("drop")&&(a="drop"+a),i=(t==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)},e.drop=function(t){t=t||{},n.multi=!0===t.multi?1/0:!1===t.multi?1:isNaN(t.multi)?n.multi:t.multi,n.delay=t.delay||n.delay,n.tolerance=e.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:n.tolerance,n.mode=t.mode||n.mode||"intersect"};var t=e.event.special,n=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){e.data(this,n.datakey).related+=1},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(!e.data(this,n.datakey)){e.data(this,n.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),n.targets.push(this)}},teardown:function(){if(!(e.data(this,n.datakey)||{}).related){e.removeData(this,n.datakey);var t=this;n.targets=e.grep(n.targets,(function(e){return e!==t}))}},handler:function(i,a){var r;if(a)switch(i.type){case"mousedown":case"touchstart":r=e(n.targets),"string"==typeof a.drop&&(r=r.filter(a.drop)),r.each((function(){var t=e.data(this,n.datakey);t.active=[],t.anyactive=0,t.winner=0})),a.droppable=r,t.drag.hijack(i,"dropinit",a);break;case"mousemove":case"touchmove":n.event=i,n.timer||n.tolerate(a);break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer),a.propagates&&(t.drag.hijack(i,"drop",a),t.drag.hijack(i,"dropend",a))}},locate:function(t,i){var a=e.data(t,n.datakey),r=e(t),o=r.offset()||{},s=r.outerHeight(),l=r.outerWidth(),c={elem:t,width:l,height:s,top:o.top,left:o.left,right:o.left+l,bottom:o.top+s};return a&&(a.location=c,a.index=i,a.elem=t),c},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,n){return this.contains(n,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,n){return Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top))*Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left))},fit:function(e,t,n){return this.contains(n,t)?1:0},middle:function(e,t,n){return this.contains(n,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(i){var a,r,o,s,l,c,d,u,h=0,f=i.interactions.length,p=[n.event.pageX,n.event.pageY],m=n.tolerance||n.modes[n.mode];do{if(u=i.interactions[h]){if(!u)return;u.drop=[],l=[],c=u.droppable.length,m&&(o=n.locate(u.proxy)),a=0;do{if(d=u.droppable[a]){if(!(r=(s=e.data(d,n.datakey)).location))continue;s.winner=m?m.call(n,n.event,o,r):n.contains(r,p)?1:0,l.push(s)}}while(++a<c);l.sort(n.sort),a=0;do{(s=l[a])&&(s.winner&&u.drop.length<n.multi?(s.active[h]||s.anyactive||(!1!==t.drag.hijack(n.event,"dropstart",i,h,s.elem)[0]?(s.active[h]=1,s.anyactive+=1):s.winner=0),s.winner&&u.drop.push(s.elem)):s.active[h]&&1==s.anyactive&&(t.drag.hijack(n.event,"dropend",i,h,s.elem),s.active[h]=0,s.anyactive-=1))}while(++a<c)}}while(++h<f);n.last&&p[0]==n.last.pageX&&p[1]==n.last.pageY?delete n.timer:n.timer=setTimeout((function(){n.tolerate(i)}),n.delay),n.last=n.event}};t.dropinit=t.dropstart=t.dropend=n}(n(70))},function(e,t,n){var i=n(70);
/*!
 * jQuery Form Plugin
 * version: 3.45.0-2013.10.17
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */!function(e){"use strict";var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var n=!!e.fn.prop;function i(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function a(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;n=a[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!==t.offsetX)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=i.offset();r.clk_x=t.pageX-o.left,r.clk_y=t.pageY-o.top}else r.clk_x=t.pageX-n.offsetLeft,r.clk_y=t.pageY-n.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function r(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(i){if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var a,o,s,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),a=i.type||this.attr2("method"),(s=(s="string"==typeof(o=i.url||this.attr2("action"))?e.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:a||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=i.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var u,h=[],f=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=e.param(i.data,d)),i.beforeSubmit&&!1===i.beforeSubmit(f,this,i))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(f,d);u&&(p=p?p+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+p,i.data=null):i.data=p;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(e,t,n){for(var a=i.context||this,r=0,o=m.length;r<o;r++)m[r].apply(a,[e,t,n||l,l])},i.error){var g=i.error;i.error=function(e,t,n){var a=i.context||this;g.apply(a,[e,t,n,l])}}if(i.complete){var v=i.complete;i.complete=function(e,t){var n=i.context||this;v.apply(n,[e,t,l])}}var y=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=t.fileapi&&t.formdata;r("fileAPI :"+k);var x,S=(y||w)&&!k;!1!==i.iframe&&(i.iframe||S)?i.closeKeepAlive?e.get(i.closeKeepAlive,(function(){x=M(f)})):x=M(f):x=(y||w)&&k?function(t){for(var n=new FormData,r=0;r<t.length;r++)n.append(t[r].name,t[r].value);if(i.extraData){var o=function(t){var n,a,r=e.param(t,i.traditional).split("&"),o=r.length,s=[];for(n=0;n<o;n++)r[n]=r[n].replace(/\+/g," "),a=r[n].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}(i.extraData);for(r=0;r<o.length;r++)o[r]&&n.append(o[r][0],o[r][1])}i.data=null;var s=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:a||"POST"});i.uploadProgress&&(s.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,n=e.loaded||e.position,a=e.total;e.lengthComputable&&(t=Math.ceil(n/a*100)),i.uploadProgress(e,n,a,t)}),!1),t});s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){i.formData?t.data=i.formData:t.data=n,l&&l.call(this,e,t)},e.ajax(s)}(f):e.ajax(i),l.removeData("jqxhr").data("jqxhr",x);for(var C=0;C<h.length;C++)h[C]=null;return this.trigger("form-submit-notify",[this,i]),this;function M(t){var o,s,c,d,u,f,p,m,_,g,v,y,b=l[0],w=e.Deferred();if(w.abort=function(e){m.abort(e)},t)for(s=0;s<h.length;s++)o=e(h[s]),n?o.prop("disabled",!1):o.removeAttr("disabled");if((c=e.extend(!0,{},e.ajaxSettings,i)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(g=(f=e(c.iframeTarget)).attr2("name"))?u=g:f.attr2("name",u):(f=e('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(e){}f.attr("src",c.iframeSrc),m.error=n,c.error&&c.error.call(c.context,m,n,t),d&&e.event.trigger("ajaxError",[m,c,n]),c.complete&&c.complete.call(c.context,m,n)}},(d=c.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&e.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(g=_.name)&&!_.disabled&&(c.extraData=c.extraData||{},c.extraData[g]=_.value,"image"==_.type&&(c.extraData[g+".x"]=b.clk_x,c.extraData[g+".y"]=b.clk_y));var k=1,x=2;function S(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){r("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){r("cannot get iframe.contentDocument: "+n),t=e.document}return t}var C=e("meta[name=csrf-token]").attr("content"),M=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),a&&!/post/i.test(a)||b.setAttribute("method","POST"),n!=c.url&&b.setAttribute("action",c.url),c.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout((function(){v=!0,E(k)}),c.timeout));var i=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(e.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+c.extraData[o].name+'">').val(c.extraData[o].value).appendTo(b)[0]):i.push(e('<input type="hidden" name="'+o+'">').val(c.extraData[o]).appendTo(b)[0]));c.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",E):p.addEventListener("load",E,!1),setTimeout((function e(){try{var t=S(p).readyState;r("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){r("Server abort: ",e," (",e.name,")"),E(x),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(e){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),t?b.setAttribute("target",t):l.removeAttr("target"),e(i).remove()}}M&&C&&(c.extraData=c.extraData||{},c.extraData[M]=C),c.forceSync?T():setTimeout(T,10);var j,O,D,L=50;function E(t){if(!m.aborted&&!D){if((O=S(p))||(r("cannot access response document"),t=x),t===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(t==x&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(O&&O.location.href!=c.iframeSrc||v){p.detachEvent?p.detachEvent("onload",E):p.removeEventListener("load",E,!1);var n,i="success";try{if(v)throw"timeout";var a="xml"==c.dataType||O.XMLDocument||e.isXMLDoc(O);if(r("isXml="+a),!a&&window.opera&&(null===O.body||!O.body.innerHTML)&&--L)return r("requeing onLoad callback, DOM not available"),void setTimeout(E,250);var o=O.body?O.body:O.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=O.XMLDocument?O.XMLDocument:O,a&&(c.dataType="xml"),m.getResponseHeader=function(e){return{"content-type":c.dataType}[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=O.getElementsByTagName("pre")[0],_=O.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==s&&!m.responseXML&&m.responseText&&(m.responseXML=A(m.responseText));try{j=P(m,s,c)}catch(e){i="parsererror",m.error=n=e||i}}catch(e){r("error caught: ",e),i="error",m.error=n=e||i}m.aborted&&(r("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,j,"success",m),w.resolve(m.responseText,"success",m),d&&e.event.trigger("ajaxSuccess",[m,c])):i&&(void 0===n&&(n=m.statusText),c.error&&c.error.call(c.context,m,i,n),w.reject(m,"error",n),d&&e.event.trigger("ajaxError",[m,c,n])),d&&e.event.trigger("ajaxComplete",[m,c]),d&&!--e.active&&e.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,i),D=!0,c.timeout&&clearTimeout(y),setTimeout((function(){c.iframeTarget?f.attr("src",c.iframeSrc):f.remove(),m.responseXML=null}),100)}}}var A=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},I=e.parseJSON||function(e){return window.eval("("+e+")")},P=function(t,n,i){var a=t.getResponseHeader("content-type")||"",r="xml"===n||!n&&a.indexOf("xml")>=0,o=r?t.responseXML:t.responseText;return r&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,n)),"string"==typeof o&&("json"===n||!n&&a.indexOf("json")>=0?o=I(o):("script"===n||!n&&a.indexOf("javascript")>=0)&&e.globalEval(o)),o};return w}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(r("DOM not ready, queuing ajaxForm"),e((function(){e(n.s,n.c).ajaxForm(t)})),this):(r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,a)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var a=[];if(0===this.length)return a;var r,o,s,l,c,d,u,h=this[0],f=n?h.getElementsByTagName("*"):h.elements;if(!f)return a;for(r=0,d=f.length;r<d;r++)if((s=(c=f[r]).name)&&!c.disabled)if(n&&h.clk&&"image"==c.type)h.clk==c&&(a.push({name:s,value:e(c).val(),type:c.type}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}));else if((l=e.fieldValue(c,!0))&&l.constructor==Array)for(i&&i.push(c),o=0,u=l.length;o<u;o++)a.push({name:s,value:l[o]});else if(t.fileapi&&"file"==c.type){i&&i.push(c);var p=c.files;if(p.length)for(o=0;o<p.length;o++)a.push({name:s,value:p[o],type:c.type});else a.push({name:s,value:"",type:c.type})}else null!=l&&(i&&i.push(c),a.push({name:s,value:l,type:c.type,required:c.required}));if(!n&&h.clk){var m=e(h.clk),_=m[0];(s=_.name)&&!_.disabled&&"image"==_.type&&(a.push({name:s,value:m.val()}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var a=e.fieldValue(this,t);if(a&&a.constructor==Array)for(var r=0,o=a.length;r<o;r++)n.push({name:i,value:a[r]});else null!=a&&n.push({name:this.name,value:a})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,a=this.length;i<a;i++){var r=this[i],o=e.fieldValue(r,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(n,o):n.push(o))}return n},e.fieldValue=function(t,n){var i=t.name,a=t.type,r=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!t.checked||("submit"==a||"image"==a)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var o=t.selectedIndex;if(o<0)return null;for(var s=[],l=t.options,c="select-one"==a,d=c?o+1:l.length,u=c?o:0;u<d;u++){var h=l[u];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,a=this.tagName.toLowerCase();n.test(i)||"textarea"==a?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}(void 0!==i?i:window.Zepto)},function(e,t,n){var i=n(70);window.jQuery&&function(e){if(!e.support.opacity&&!e.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}e.fn.rating=function(t){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){e.fn.rating.apply(e(this),n)}))}return e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]),this}t=e.extend({},e.fn.rating.options,t||{});return e.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=e(this),a=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=e(this.form||document.body),o=r.data("rating");o&&o.call==e.fn.rating.calls||(o={count:0,call:e.fn.rating.calls});var s=o[a]||r.data("rating"+a);s&&(n=s.data("rating")),s&&n?n.count++:((n=e.extend({},t||{},(e.metadata?i.metadata():e.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=o.count++,s=e('<span class="star-rating-control"/>'),i.before(s),s.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),s.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){e(this).rating("drain"),e(this).addClass("star-rating-hover")})).on("mouseout",(function(){e(this).rating("draw"),e(this).removeClass("star-rating-hover")})).on("click",(function(){e(this).rating("select")})).data("rating",n)));var l=e('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var c=(e.fn.width?l.width():0)||n.starWidth,d=n.count%n.split,u=Math.floor(c/n.split);l.width(u).find("a").css({"margin-left":"-"+d*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){e(this).rating("fill"),e(this).rating("focus")})).on("mouseout",(function(){e(this).rating("draw"),e(this).rating("blur")})).on("click",(function(){e(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&e(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(t){if(t.selfTriggered)return!1;e(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=o[a]=s,n.context=r,i.data("rating",n),s.data("rating",n),l.data("rating",n),r.data("rating",o),r.data("rating"+a,s)})),e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;e.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+e.serial).addClass("star-rating-hover"))},drain:function(){var e=this.data("rating");if(!e)return this;e.readOnly||e.rater.children().filter(".rater-"+e.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var n=e(t.current),i=n.length?n.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==t||this.length>1){if("number"==typeof t)return e(i.stars[t]).rating("select",void 0,n);if("string"==typeof t)return e.each(i.stars,(function(){e(this).data("rating.input").val()==t&&e(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var a=e(i.current?i.current.data("rating.input"):null),r=e(i.inputs).filter(":checked");return e(i.inputs).not(a).prop("checked",!1),a.prop("checked",!0),e(a.length?a:r).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(a[0],[a.val(),e("a",i.current)[0]]),this}},readOnly:function(t,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!t&&null!=t),n?e(i.inputs).attr("disabled","disabled"):e(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},e((function(){e("input[type=radio].star").rating()}))}(i)},function(e,t,n){var i,a=n(70);void 0===(i=a).fn.each2&&i.extend(i.fn,{each2:function(e){for(var t=i([0]),n=-1,a=this.length;++n<a&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(e,t){"use strict";if(window.Select2===t){var n,i,a,r,o,s,l,c,d={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},h="<div class='select2-measure-scrollbar'></div>",f={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};s=e(document),c=1,r=function(){return c++},n=E(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,a;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(D(n.containerCss,this.opts.element)),this.container.addClass(D(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",k),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",k),this.results=i=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",k),this.results.on("mousemove",(function(n){var i=d;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var n=w(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){_(e.target,t.get())>=0&&n(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,n,a){var r=i.scrollTop();a>0&&r-a<=0?(i.scrollTop(0),k(e)):a<0&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),k(e))})),b(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var s=n.element.prop("readonly");s===t&&(s=!1),this.readonly(s),l=l||function(){var t=e(h);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),L.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,a,o,s,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(i,a,o){var s,c=this.opts.id,d=this.liveRegion;(s=function(i,a,u){var h,f,p,m,_,g,v,y,b,w,k=[];for(h=0,f=(i=n.sortResults(i,a,o)).length;h<f;h+=1)m=!(_=!0===(p=i[h]).disabled)&&c(p)!==t,g=p.children&&p.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+r()),y.attr("role","option"),(w=n.formatResult(p,y,o,l.opts.escapeMarkup))!==t&&(y.html(w),v.append(y)),g&&((b=e("<ul></ul>")).addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),k.push(v[0]);a.append(k),d.text(n.formatMatches(i.length))})(a,i,0)}},e.fn.select2.defaults,n)).id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(a?(n.query=this.bind((function(e){var n,a,r,o={results:[],more:!1},s=e.term;r=function(t,n){var i;t.is("option")?e.matcher(s,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2((function(e,t){r(t,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(a=this.getPlaceholderOption())&&(n=n.not(a)),n.each2((function(e,t){r(t,o.results)})),e.callback(o)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=M.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=j(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var a=[];e(v(t.val(),n.separator)).each((function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each((function(){if(g(this.id,t.id))return t=this,!1})),a.push(t)})),i(a)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,a=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",a._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,a._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,a,r,o=this.dropdown,s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),h=e(window),f=h.width(),p=h.height(),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,v=s.left,y=g+u<=_,b=s.top-u>=h.scrollTop(),w=o.outerWidth(!1),k=v+w<=m;o.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(o.hide(),s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,k=(v=s.left)+(w=o.outerWidth(!1))<=m,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=w:w=d,u=o.outerHeight(!1),k=v+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(t=this.body.offset()).top,v-=t.left),k||(v=s.left+this.container.outerWidth(!1)-w),a={left:v,width:d},n?(a.top=s.top-u,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=e.extend(a,D(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",(function(e){d.x=e.pageX,d.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,i="scroll."+n,a="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){p(t);var i,a=e("#select2-drop");a.length>0&&((i=a.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){e(this).on(a+" "+i+" "+r,(function(e){o.opened()&&o.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,a="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(i).off(a)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,a,r,o,s,l,c=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results")).length>0&&(a=s.offset().top+s.outerHeight(!0)),a>(r=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(a-r)),(o=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var a=e(n[i+=t]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,a=this.findHighlightableChoices();if(0===arguments.length)return _(a.filter(".select2-highlighted")[0],a.get());t>=a.length&&(t=a.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(a[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,a=this.search.val(),r=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:r,matcher:this.opts.matcher,callback:this.bind((function(o){i.opened()&&(i.opts.populateResults.call(this,e,o.results,{term:a,page:n,context:r}),i.postprocessResults(o,!1,!1),!0===o.more?(t.detach().appendTo(e).text(D(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))}))},tokenize:function(){},updateResults:function(n){var i,a,r,o=this.search,s=this.results,l=this.opts,c=this,d=o.val(),u=e.data(this.container,"select2-last-term");if((!0===n||!u||!g(d,u))&&(e.data(this.container,"select2-last-term",d),!0===n||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),e.isArray(i)&&i.length>=h&&O(l.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<l.minimumInputLength?(O(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+D(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&o.val().length>l.maximumInputLength?O(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+D(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+D(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=t&&null!=a&&o.val(a),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var a;r==this.queryCount&&(this.opened()?i.hasError!==t&&O(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+D(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==o.val()&&(a=this.opts.createSearchChoice.call(c,o.val(),i.results))!==t&&null!==a&&c.id(a)!==t&&null!==c.id(a)&&0===e(i.results).filter((function(){return g(c.id(this),c.id(a))})).length&&this.opts.createSearchChoicePosition(i.results,a),0===i.results.length&&O(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+D(l.formatNoMatches,l.element,o.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,i.results,{term:o.val(),page:this.resultsPage,context:null}),!0===i.more&&O(l.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+l.escapeMarkup(D(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),f(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+D(l.formatSelectionTooBig,l.element,h)+"</li>")}function f(){o.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find(".select2-result-selectable").length))}function p(e){s.html(e),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,a,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(r=0,o=(i=n.split(";")).length;r<o;r+=1)if(null!==(a=i[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=E(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(a=this.search.val().length,n.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),L.call(this,"selection","focusser")},initContainer:function(){var t,n,i=this.container,a=this.dropdown,o=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==u.PAGE_UP&&e.which!==u.PAGE_DOWN)switch(e.which){case u.UP:case u.DOWN:return this.moveHighlight(e.which===u.UP?-1:1),void k(e);case u.ENTER:return this.selectHighlighted(),void k(e);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(e),void k(e)}else k(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==u.TAB&&!u.isControl(e)&&!u.isFunctionKey(e)&&e.which!==u.ESC){if(!1!==this.opts.openOnEnter||e.which!==u.ENTER){if(e.which==u.DOWN||e.which==u.UP||e.which==u.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void k(e)}return e.which==u.DELETE||e.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void k(e)):void 0}k(e)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),k(n)}))),a.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){k(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=n.val(),r=null;t.query({matcher:function(e,n,i){var o=g(a,t.id(i));return o&&(r=i),o},callback:e.isFunction(i)?function(){i(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,n,i){var a=0,r=this;if(this.findHighlightableChoices().each2((function(e,t){if(g(r.id(t.data("select2-data")),r.opts.element.val()))return a=e,!1})),!1!==i&&(!0===n&&a>=0?this.highlight(a):this.highlight(0)),!0===n){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(function t(n){var i=0;return e.each(n,(function(e,n){n.children?i+=t(n.children):i++})),i}(t.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),a.empty(),null!==e&&(n=this.opts.formatSelection(e,a,this.opts.escapeMarkup)),n!==t&&a.append(n),(i=this.opts.formatSelectionCssClass(e,a))!==t&&a.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,a=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=a.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){a.opts.element.val(e?a.id(e):""),a.updateSelection(e),a.setPlaceholder(),n&&a.triggerChange({added:e,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),a=E(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){i.push(n.optionToData(t))})),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=v(n.val(),t.separator),r=[];t.query({matcher:function(n,i,o){var s=e.grep(a,(function(e){return g(e,t.id(o))})).length;return s&&r.push(o),s},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<a.length;n++)for(var o=a[n],s=0;s<r.length;s++){var l=r[s];if(g(o,t.id(l))){e.push(l),r.splice(s,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),L.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(t){i.search[0].focus(),i.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),a=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=function(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var a=document.selection.createRange();i=document.selection.createRange().text.length,a.moveStart("character",-t.value.length),n=a.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var s=i;return n.which==u.LEFT&&a.length?s=a:n.which==u.RIGHT?s=r.length?r:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=a.length?a:r):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),s=r.length?r:null):n.which==u.ENTER&&(s=null),this.selectChoice(s),k(n),void(s&&s.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void k(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void k(n);case u.ENTER:return this.selectHighlighted(),void k(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void k(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||k(n),n.which===u.ENTER&&k(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],a=this;e(t).each((function(){_(a.id(this),n)<0&&(n.push(a.id(this)),i.push(this))})),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,a,r=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?o:s,c=this.id(n),d=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(a=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(a),r&&l.find(".select2-search-choice-close").on("mousedown",k).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),k(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var n,i,a=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=_(this.id(n),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),o=this;a.each2((function(e,t){_(o.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),r.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&O(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var t,n,i,a,r=y(this.search);t=function(t){if(!o){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(o=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(o)}return o.text(t.val()),o.width()}(this.search)+10,n=this.search.offset().left,(a=(i=this.selection.width())-(n-this.selection.offset().left)-r)<t&&(a=i-r),a<40&&(a=i-r),a<=0&&(a=t),this.search.width(Math.floor(a))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){_(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)g(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var a,r=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,r.id);r.setVal(n),r.updateSelection(t),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(a,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var i,a,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();a=this.data(),t||(t=[]),i=e.map(t,(function(e){return r.opts.id(e)})),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),e.fn.select2=function(){var n,i,a,r,o,s=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:e.extend({},s[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),(i=o?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(_(s[0],l)<0)throw"Unknown method: "+s[0];if(r=t,(i=e(this).data("select2"))===t)return;if("container"===(a=s[0])?r=i.container:"dropdown"===a?r=i.dropdown:(u[a]&&(a=u[a]),r=i[a].apply(i,s.slice(1))),_(s[0],c)>=0||_(s[0],d)>=0&&1==s.length)return!1}})),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var a=[];return S(e.text,n.term,a,i),a.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return m(""+t).toUpperCase().indexOf(m(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,a){var r,o,s,l,c,d=e,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(o=-1,s=0,l=a.tokenSeparators.length;s<l&&(c=a.tokenSeparators[s],!((o=e.indexOf(c))>=0));s++);if(o<0)break;if(r=e.substring(0,o),e=e.substring(o+c.length),r.length>0&&(r=a.createSearchChoice.call(this,r,n))!==t&&null!==r&&a.id(r)!==t&&null!==a.id(r)){for(u=!1,s=0,l=n.length;s<l;s++)if(g(a.id(r),a.id(n[s]))){u=!0;break}u||i(r)}}return d!==e?e:void 0},escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:M,local:T,tags:j},util:{debounce:w,markMatch:S,escapeMarkup:C,stripDiacritics:m},class:{abstract:n,single:i,multi:a}}}function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function m(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return f[e]||e}))}function _(e,t){for(var n=0,i=t.length;n<i;n+=1)if(g(e,t[n]))return n;return-1}function g(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function v(t,n){var i,a,r;if(null===t||t.length<1)return[];for(a=0,r=(i=t.split(n)).length;a<r;a+=1)i[a]=e.trim(i[a]);return i}function y(e){return e.outerWidth(!1)-e.width()}function b(n){var i="keyup-change-value";n.on("keydown",(function(){e.data(n,i)===t&&e.data(n,i,n.val())})),n.on("keyup",(function(){var a=e.data(n,i);a!==t&&n.val()!==a&&(e.removeData(n,i),n.trigger("keyup-change"))}))}function w(e,n,i){var a;return i=i||t,function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout((function(){n.apply(i,t)}),e)}}function k(e){e.preventDefault(),e.stopPropagation()}function x(t,n,i){var a,r,o=[];(a=e.trim(t.attr("class")))&&e((a=""+a).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(a=e.trim(n.attr("class")))&&e((a=""+a).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(r=i(this))&&o.push(r)})),t.attr("class",o.join(" "))}function S(e,t,n,i){var a=m(e.toUpperCase()).indexOf(m(t.toUpperCase())),r=t.length;a<0?n.push(i(e)):(n.push(i(e.substring(0,a))),n.push("<span class='select2-match'>"),n.push(i(e.substring(a,a+r))),n.push("</span>"),n.push(i(e.substring(a+r,e.length))))}function C(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function M(n){var i,a=null,r=n.quietMillis||100,o=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,r=o,c=n.transport||e.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);i=i?i.call(s,l.term,l.page,l.context):null,r="function"==typeof r?r.call(s,l.term,l.page,l.context):r,a&&"function"==typeof a.abort&&a.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(s)):e.extend(u,n.params)),e.extend(u,{url:r,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),a=c.call(s,u)}),r)}}function T(t){var n,i,a=t,r=function(e){return""+e.text};e.isArray(a)&&(a={results:i=a}),!1===e.isFunction(a)&&(i=a,a=function(){return i});var o=a();return o.text&&(r=o.text,e.isFunction(r)||(n=o.text,r=function(e){return e[n]})),function(t){var n,i=t.term,o={results:[]};""!==i?(n=function(a,o){var s,l;if((a=a[0]).children){for(l in s={},a)a.hasOwnProperty(l)&&(s[l]=a[l]);s.children=[],e(a.children).each2((function(e,t){n(t,s.children)})),(s.children.length||t.matcher(i,r(s),a))&&o.push(s)}else t.matcher(i,r(a),a)&&o.push(a)},e(a().results).each2((function(e,t){n(t,o.results)})),t.callback(o)):t.callback(a())}}function j(n){var i=e.isFunction(n);return function(a){var r=a.term,o={results:[]},s=i?n(a):n;e.isArray(s)&&(e(s).each((function(){var e=this.text!==t,n=e?this.text:this;(""===r||a.matcher(r,n))&&o.results.push(e?this:{id:this,text:this})})),a.callback(o))}}function O(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function D(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function L(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function E(t,n){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}}(a)},function(e,t,n){var i,a,r,o,s,l=n(70);
/*! jQuery UI - v1.9.1 - 2012-10-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */!function(e,t){function n(t,n){var a,r,o,s=t.nodeName.toLowerCase();return"area"===s?(r=(a=t.parentNode).name,!(!t.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+r+"]")[0])&&i(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var a=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each((function(){var i=this;setTimeout((function(){e(i).focus(),n&&n.call(i)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,a,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&e(this).removeAttr("id")}))}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function a(t,n,i,a){return e.each(r,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each((function(){e(this).css(o,a(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each((function(){e(this).css(o,a(this,t,!0,n)+"px")}))}})),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(t,!a)}}),e((function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"})),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var a,r=e.ui[t].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n){var i,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return t[i]>0||(t[i]=1,a=t[i]>0,t[i]=0,a)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,i,a,r,o){return e.ui.isOverAxis(t,i,r)&&e.ui.isOverAxis(n,a,o)}}))}(l),i=l,r=0,o=Array.prototype.slice,s=i.cleanData,i.cleanData=function(e){for(var t,n=0;null!=(t=e[n]);n++)try{i(t).triggerHandler("remove")}catch(e){}s(e)},i.widget=function(e,t,n){var a,r,o,s,l=e.split(".")[0];e=e.split(".")[1],a=l+"-"+e,n||(n=t,t=i.Widget),i.expr[":"][a.toLowerCase()]=function(e){return!!i.data(e,a)},i[l]=i[l]||{},r=i[l][e],o=i[l][e]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},i.extend(o,r,{version:n.version,_proto:i.extend({},n),_childConstructors:[]}),(s=new t).options=i.widget.extend({},s.options),i.each(n,(function(e,a){i.isFunction(a)&&(n[e]=function(){var n=function(){return t.prototype[e].apply(this,arguments)},i=function(n){return t.prototype[e].apply(this,n)};return function(){var e,t=this._super,r=this._superApply;return this._super=n,this._superApply=i,e=a.apply(this,arguments),this._super=t,this._superApply=r,e}}())})),o.prototype=i.widget.extend(s,{widgetEventPrefix:s.widgetEventPrefix||e},n,{constructor:o,namespace:l,widgetName:e,widgetBaseClass:a,widgetFullName:a}),r?(i.each(r._childConstructors,(function(e,t){var n=t.prototype;i.widget(n.namespace+"."+n.widgetName,o,t._proto)})),delete r._childConstructors):t._childConstructors.push(o),i.widget.bridge(e,o)},i.widget.extend=function(e){for(var t,n,r=o.call(arguments,1),s=0,l=r.length;s<l;s++)for(t in r[s])n=r[s][t],r[s].hasOwnProperty(t)&&n!==a&&(i.isPlainObject(n)?e[t]=i.isPlainObject(e[t])?i.widget.extend({},e[t],n):i.widget.extend({},n):e[t]=n);return e},i.widget.bridge=function(e,t){var n=t.prototype.widgetFullName;i.fn[e]=function(r){var s="string"==typeof r,l=o.call(arguments,1),c=this;return r=!s&&l.length?i.widget.extend.apply(null,[r].concat(l)):r,s?this.each((function(){var t,o=i.data(this,n);return o?i.isFunction(o[r])&&"_"!==r.charAt(0)?(t=o[r].apply(o,l))!==o&&t!==a?(c=t&&t.jquery?c.pushStack(t.get()):t,!1):void 0:i.error("no such method '"+r+"' for "+e+" widget instance"):i.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")})):this.each((function(){var e=i.data(this,n);e?e.option(r||{})._init():new t(r,this)})),c}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=i(t||this.defaultElement||this)[0],this.element=i(t),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=i(),this.hoverable=i(),this.focusable=i(),t!==this&&(i.data(t,this.widgetName,this),i.data(t,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=i(t.style?t.ownerDocument:t.document||t),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(e,t){var n,r,o,s=e;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(r=s[e]=i.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)r[n[o]]=r[n[o]]||{},r=r[n[o]];if(e=n.pop(),t===a)return r[e]===a?null:r[e];r[e]=t}else{if(t===a)return this.options[e]===a?null:this.options[e];s[e]=t}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,t){var n,a=this;t?(e=n=i(e),this.bindings=this.bindings.add(e)):(t=e,e=this.element,n=this.widget()),i.each(t,(function(t,r){function o(){if(!0!==a.options.disabled&&!i(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||i.guid++);var s=t.match(/^(\w+)\s*(.*)$/),l=s[1]+a.eventNamespace,c=s[2];c?n.delegate(c,l,o):e.bind(l,o)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){i(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){i(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){i(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){i(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var a,r,o=this.options[e];if(n=n||{},(t=i.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],r=t.originalEvent)for(a in r)a in t||(t[a]=r[a]);return this.element.trigger(t,n),!(i.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},(function(e,t){i.Widget.prototype["_"+e]=function(n,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?t:a.effect||t:e;"number"==typeof(a=a||{})&&(a={duration:a}),o=!i.isEmptyObject(a),a.complete=r,a.delay&&n.delay(a.delay),o&&i.effects&&(i.effects.effect[s]||!1!==i.uiBackCompat&&i.effects[s])?n[e](a):s!==e&&n[s]?n[s](a.duration,a.easing,r):n.queue((function(t){i(this)[e](),r&&r.call(n[0]),t()}))}})),!1!==i.uiBackCompat&&(i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}),function(e,t){var n=!1;e(document).mouseup((function(e){n=!1})),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(l),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(f.test(e[0])?t/100:1),parseInt(e[1],10)*(f.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var a,r=Math.max,o=Math.abs,s=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var n,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),n===(i=o.offsetWidth)&&(i=r[0].clientWidth),r.remove(),a=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),a="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var a,l,f,m,_,g=e(t.of),v=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(v),b=g[0],w=(t.collision||"flip").split(" "),k={};return 9===b.nodeType?(l=g.width(),f=g.height(),m={top:0,left:0}):e.isWindow(b)?(l=g.width(),f=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):b.preventDefault?(t.at="left top",l=f=0,m={top:b.pageY,left:b.pageX}):(l=g.outerWidth(),f=g.outerHeight(),m=g.offset()),_=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),k[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?_.left+=l:"center"===t.at[0]&&(_.left+=l/2),"bottom"===t.at[1]?_.top+=f:"center"===t.at[1]&&(_.top+=f/2),a=n(k.at,l,f),_.left+=a[0],_.top+=a[1],this.each((function(){var c,d,u=e(this),h=u.outerWidth(),p=u.outerHeight(),b=i(this,"marginLeft"),x=i(this,"marginTop"),S=h+b+i(this,"marginRight")+y.width,C=p+x+i(this,"marginBottom")+y.height,M=e.extend({},_),T=n(k.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=h:"center"===t.my[0]&&(M.left-=h/2),"bottom"===t.my[1]?M.top-=p:"center"===t.my[1]&&(M.top-=p/2),M.left+=T[0],M.top+=T[1],e.support.offsetFractions||(M.left=s(M.left),M.top=s(M.top)),c={marginLeft:b,marginTop:x},e.each(["left","top"],(function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](M,{targetWidth:l,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:c,collisionWidth:S,collisionHeight:C,offset:[a[0]+T[0],a[1]+T[1]],my:t.my,at:t.at,within:v,elem:u})})),e.fn.bgiframe&&u.bgiframe(),t.using&&(d=function(e){var n=m.left-M.left,i=n+l-h,a=m.top-M.top,s=a+f-p,c={target:{element:g,left:m.left,top:m.top,width:l,height:f},element:{element:u,left:M.left,top:M.top,width:h,height:p},horizontal:i<0?"left":n>0?"right":"center",vertical:s<0?"top":a>0?"bottom":"middle"};l<h&&o(n+i)<l&&(c.horizontal="center"),f<p&&o(a+s)<f&&(c.vertical="middle"),r(o(n),o(i))>r(o(a),o(s))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),u.offset(e.extend(M,{using:d}))}))},e.ui.position={fit:{left:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=e.left-t.collisionPosition.marginLeft,l=a-s,c=s+t.collisionWidth-o-a;t.collisionWidth>o?l>0&&c<=0?(n=e.left+l+t.collisionWidth-o-a,e.left+=l-n):e.left=c>0&&l<=0?a:l>c?a+o-t.collisionWidth:a:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-s,e.left)},top:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=a-s,c=s+t.collisionHeight-o-a;t.collisionHeight>o?l>0&&c<=0?(n=e.top+l+t.collisionHeight-o-a,e.top+=l-n):e.top=c>0&&l<=0?a:l>c?a+o-t.collisionHeight:a:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,a=t.within,r=a.offset.left+a.scrollLeft,s=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];d<0?((n=e.left+h+f+p+t.collisionWidth-s-r)<0||n<o(d))&&(e.left+=h+f+p):u>0&&((i=e.left-t.collisionPosition.marginLeft+h+f+p-l)>0||o(i)<u)&&(e.left+=h+f+p)},top:function(e,t){var n,i,a=t.within,r=a.offset.top+a.scrollTop,s=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-s-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];d<0?(i=e.top+h+f+p+t.collisionHeight-s-r,e.top+h+f+p>d&&(i<0||i<o(d))&&(e.top+=h+f+p)):u>0&&(n=e.top-t.collisionPosition.marginTop+h+f+p-l,e.top+h+f+p>u&&(n>0||o(n)<u)&&(e.top+=h+f+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,a,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[r]=i[r];t.appendChild(s),(n=o||document.documentElement).insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=e(s).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",n.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var a=i.offset.split(" "),r=i.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),n.call(this,e.extend(i,{at:r[0]+a[0]+" "+r[1]+a[1],offset:t}))}}(l)}(l),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case r.UP:t=!0,this._keyEvent("previous",a);break;case r.DOWN:t=!0,this._keyEvent("next",a);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(t)return t=!1,void i.preventDefault();if(!n){var a=e.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target!==t.element[0]&&i.target!==n&&!e.contains(n,i.target)&&t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,a){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(l),function(e,t){var n,i,a,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},c=function(t){var n=t.name,i=t.form,a=e([]);return n&&(a=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter((function(){return!this.form}))),a};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||(e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||e(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(h)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){r||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){s.disabled||(r=!1,i=e.pageX,a=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){s.disabled||i===e.pageX&&a===e.pageY||(r=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];c(n).not(n).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(s.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,a=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(l),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,a,r,o,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,a=this.previousFilter||"",r=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),r===a?o=!0:r=a+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())})),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())}))),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var t=e(this),i=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",i.attr("id"))})),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),a<0?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,a;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-a<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,a;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+a>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(l),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,n,i=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,t=a.length;t<n;t++)r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){i.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var n,i,a,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,r)))return}switch(a=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-a)}this._slide(t,r,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,a,r,o,s,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),a=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-c.values(t));a>n&&(a=n,r=e(this),o=t)})),!0===d.range&&this.values(1)===d.min&&(o+=1,r=e(this.handles[o])),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),s=r.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,a,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),a=this._valueMax()-this._valueMin(),r=this._valueMin()+i*a,this._trimAlignValue(r)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,a,r;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&((a=this.values())[t]=n,r=this._trigger("slide",e,{handle:this.handles[t],value:n,values:a}),i=this.values(t?0:1),!1!==r&&this.values(t,n,!0))):n!==this.value()&&(!1!==(r=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,a,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,a=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(a[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,a=0;switch(e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<a;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,a,r,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,d={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n})):(i=this.value(),a=this._valueMin(),r=this._valueMax(),n=r!==a?(i-a)/(r-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))}})}(l)},function(e,t,n){var i,a=n(70);(i=a).fn.farbtastic=function(e){return i.farbtastic(this,e),this},i.farbtastic=function(e,t){return(e=i(e)[0]).farbtastic||(e.farbtastic=new i._farbtastic(e,t))},i._farbtastic=function(e,t){var n=this;n.linkTo=function(e){return"object"==typeof n.callback&&i(n.callback).unbind("keyup",n.updateValue),n.color=null,"function"==typeof e?n.callback=e:"object"!=typeof e&&"string"!=typeof e||(n.callback=i(e),n.callback.bind("keyup",n.updateValue),n.callback[0].value&&n.setColor(n.callback[0].value)),this},n.updateValue=function(e){this.value&&this.value!=n.color&&n.setColor(this.value)},n.setColor=function(e){var t=n.unpack(e);return n.color!=e&&t&&(n.color=e,n.rgb=t,n.hsl=n.RGBToHSL(n.rgb),n.updateDisplay()),this},n.setHSL=function(e){return n.hsl=e,n.rgb=n.HSLToRGB(e),n.color=n.pack(n.rgb),n.updateDisplay(),this},n.initWidget=function(){var a={width:t.width,height:t.width};i(e).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(a).css(a).end().find("div>*").css("position","absolute"),i.browser.msie,n.radius=(t.width-t.wheelWidth)/2-1,n.square=Math.floor(.7*(n.radius-t.wheelWidth/2))-1,n.mid=Math.floor(t.width/2),n.markerSize=.3*t.wheelWidth,n.solidFill=i(".farbtastic-solid",e).css({width:2*n.square-1,height:2*n.square-1,left:n.mid-n.square,top:n.mid-n.square}),n.cnvMask=i(".farbtastic-mask",e),n.ctxMask=n.cnvMask[0].getContext("2d"),n.cnvOverlay=i(".farbtastic-overlay",e),n.ctxOverlay=n.cnvOverlay[0].getContext("2d"),n.ctxMask.translate(n.mid,n.mid),n.ctxOverlay.translate(n.mid,n.mid),n.drawCircle(),n.drawMask()},n.drawCircle=function(){new Date;var e,a,r=n.radius,o=t.wheelWidth,s=8/r/24*Math.PI,l=n.ctxMask,c=0;l.save(),l.lineWidth=o/r,l.scale(r,r);for(var d=0;d<=24;++d){var u=d/24,h=u*Math.PI*2,f=Math.sin(c),p=-Math.cos(c);if(x2=Math.sin(h),y2=-Math.cos(h),am=(c+h)/2,tan=1/Math.cos((h-c)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=n.pack(n.HSLToRGB([u,1,.5])),d>0)if(i.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(c)),Math.abs(Math.tan(Math.PI/2-c))))/24;e=n.pack(n.HSLToRGB([a-.15*m,1,.5])),color2=n.pack(n.HSLToRGB([u+.15*m,1,.5])),(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,e),v.addColorStop(1,color2),l.fillStyle=v;var _=(r+o/2)/r,g=(r-o/2)/r;l.beginPath(),l.moveTo(f*_,p*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*g,y2*g),l.quadraticCurveTo(xm*g,ym*g,f*g,p*g),l.fill()}else{var v;(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,e),v.addColorStop(1,color2),l.strokeStyle=v,l.beginPath(),l.moveTo(f,p),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}c=h-s,e=color2,a=u}l.restore()},n.drawMask=function(){new Date;var e=2*n.square,t=n.square;function a(e,t,n){for(var i=1/e,a=1/t,r=0;r<=t;++r)for(var o=1-r*a,s=0;s<=e;++s){var l=1-s*i,c=1-2*Math.min(o*l,(1-o)*l);n(s,r,c>0?.5*(2*o-1+c)/c:0,c)}}if(n.ctxMask.getImageData){var r=Math.floor(e/2),o=document.createElement("canvas");o.width=o.height=r+1;var s=o.getContext("2d"),l=s.getImageData(0,0,r+1,r+1),c=0;a(r,r,(function(e,t,n,i){l.data[c++]=l.data[c++]=l.data[c++]=255*n,l.data[c++]=255*i})),s.putImageData(l,0,0),n.ctxMask.drawImage(o,0,0,r+1,r+1,-t,-t,2*t,2*t)}else if(i.browser.msie){var d,u,h=Math.floor(e/6);a(h,6,(function(e,a,r,o){if(0==e&&(d=u,u=[]),r=Math.round(255*r),o=Math.round(255*o),a>0){var s=d[e][0],l=d[e][1],c=n.packDX(s,l),f=n.packDX(r,o),p=Math.round(n.mid+(.333*(a-1)-1)*t),m=Math.round(n.mid+(.333*a-1)*t);i("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+c+", EndColorStr="+f+", GradientType=0)",top:p,height:m-p,left:n.mid+(6*e-t-1),width:6-(e==h?Math.round(3):0)}).appendTo(n.cnvMask)}u.push([r,o])}))}else a(r=Math.floor(e/2),r,(function(e,i,a,r){a=Math.round(255*a),n.ctxMask.fillStyle="rgba("+a+", "+a+", "+a+", "+r+")",n.ctxMask.fillRect(2*e-t-1,2*i-t-1,2,2)}))},n.drawMarkers=function(){var e=t.width,i=Math.ceil(n.markerSize/4),a=n.markerSize-i+1,r=6.28*n.hsl[0],o=Math.sin(r)*n.radius,s=-Math.cos(r)*n.radius,l=2*n.square*(.5-n.hsl[1]),c=2*n.square*(.5-n.hsl[2]),d=n.invert?"#fff":"#000",u=n.invert?"#000":"#fff",h=[{x:o,y:s,r:a,c:"#000",lw:i+1},{x:o,y:s,r:n.markerSize,c:"#fff",lw:i},{x:l,y:c,r:a,c:u,lw:i+1},{x:l,y:c,r:n.markerSize,c:d,lw:i}];n.ctxOverlay.clearRect(-n.mid,-n.mid,e,e);for(var f=0;f<h.length;f++){var p=h[f];n.ctxOverlay.lineWidth=p.lw,n.ctxOverlay.strokeStyle=p.c,n.ctxOverlay.beginPath(),n.ctxOverlay.arc(p.x,p.y,p.r,0,2*Math.PI,!0),n.ctxOverlay.stroke()}},n.updateDisplay=function(){n.invert=.3*n.rgb[0]+.59*n.rgb[1]+.11*n.rgb[2]<=.6,n.solidFill.css("backgroundColor",n.pack(n.HSLToRGB([n.hsl[0],1,.5]))),n.drawMarkers(),"object"==typeof n.callback?(i(n.callback).css({backgroundColor:n.color,color:n.invert?"#fff":"#000"}),i(n.callback).each((function(){"string"==typeof this.value&&this.value!=n.color&&(this.value=n.color)})).change()):"function"==typeof n.callback&&n.callback.call(n,n.color)},n.widgetCoords=function(e){return{x:e.pageX-n.offset.left-n.mid,y:e.pageY-n.offset.top-n.mid}},n.mousedown=function(t){i._farbtastic.dragging||(i(document).bind("mousemove",n.mousemove).bind("mouseup",n.mouseup),i._farbtastic.dragging=!0),n.offset=i(e).offset();var a=n.widgetCoords(t);return n.circleDrag=Math.max(Math.abs(a.x),Math.abs(a.y))>n.square+2,n.mousemove(t),!1},n.mousemove=function(e){var t=n.widgetCoords(e);if(n.circleDrag){var i=Math.atan2(t.x,-t.y)/6.28;n.setHSL([(i+1)%1,n.hsl[1],n.hsl[2]])}else{var a=Math.max(0,Math.min(1,-t.x/n.square/2+.5)),r=Math.max(0,Math.min(1,-t.y/n.square/2+.5));n.setHSL([n.hsl[0],a,r])}return!1},n.mouseup=function(){i(document).unbind("mousemove",n.mousemove),i(document).unbind("mouseup",n.mouseup),i._farbtastic.dragging=!1},n.dec2hex=function(e){return(e<16?"0":"")+e.toString(16)},n.packDX=function(e,t){return"#"+n.dec2hex(t)+n.dec2hex(e)+n.dec2hex(e)+n.dec2hex(e)},n.pack=function(e){var t=Math.round(255*e[0]),i=Math.round(255*e[1]),a=Math.round(255*e[2]);return"#"+n.dec2hex(t)+n.dec2hex(i)+n.dec2hex(a)},n.unpack=function(e){if(7==e.length){function t(t){return parseInt(e.substring(t,t+2),16)/255}return[t(1),t(3),t(5)]}if(4==e.length){function t(t){return parseInt(e.substring(t,t+1),16)/15}return[t(1),t(2),t(3)]}},n.HSLToRGB=function(e){var t,n,i=e[0],a=e[1],r=e[2];return t=2*r-(n=r<=.5?r*(a+1):r+a-r*a),[this.hueToRGB(t,n,i+.33333),this.hueToRGB(t,n,i),this.hueToRGB(t,n,i-.33333)]},n.hueToRGB=function(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(.66666-n)*6:e},n.RGBToHSL=function(e){var t=e[0],n=e[1],i=e[2],a=Math.min(t,n,i),r=Math.max(t,n,i),o=r-a,s=0,l=0,c=(a+r)/2;return c>0&&c<1&&(l=o/(c<.5?2*c:2-2*c)),o>0&&(r==t&&r!=n&&(s+=(n-i)/o),r==n&&r!=i&&(s+=2+(i-t)/o),r==i&&r!=t&&(s+=4+(t-n)/o),s/=6),[s,l,c]},t.callback||(t={callback:t}),t=i.extend({width:300,wheelWidth:(t.width||300)/10,callback:null},t),n.initWidget(),i("canvas.farbtastic-overlay",e).mousedown(n.mousedown),t.callback&&n.linkTo(t.callback),n.color||n.setColor("#808080")}},function(module,exports,__webpack_require__){var jQuery=__webpack_require__(70),_canLog=!0;
/*! ****************************************************************************
	jquery.dynatree.js
	Dynamic tree view control, with support for lazy loading of branches.

	Copyright (c) 2006-2014, Martin Wendt (http://wwWendt.de)
	Dual licensed under the MIT or GPL Version 2 licenses.
	http://code.google.com/p/dynatree/wiki/LicenseInfo

	A current version and some documentation is available at
		http://dynatree.googlecode.com/

	@version: 1.2.8
	@date:    2015-07-04T16:44

	@depends: jquery.js
	@depends: jquery.ui.core.js
	@depends: jquery.cookie.js
*******************************************************************************/function _log(e,t){if(_canLog){var n=Array.prototype.slice.apply(arguments,[1]),i=new Date,a=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();n[0]=a+" - "+n[0];try{switch(e){case"info":window.console.info.apply(window.console,n);break;case"warn":window.console.warn.apply(window.console,n);break;default:window.console.log.apply(window.console,n)}}catch(e){window.console?-2146827850===e.number&&window.console.log(n.join(", ")):_canLog=!1}}}function logMsg(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function offsetString(e){return 0===e?"":e>0?"+"+e:""+e}function _checkBrowser(){var e,t;return t={},(e=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),t}function versionCompare(e,t){var n,i,a,r=(""+e).split("."),o=(""+t).split("."),s=Math.min(r.length,o.length);for(a=0;a<s;a++)if(n=parseInt(r[a],10),i=parseInt(o[a],10),isNaN(n)&&(n=r[a]),isNaN(i)&&(i=o[a]),n!=i)return n>i?1:n<i?-1:NaN;return r.length===o.length?0:r.length<o.length?-1:1}var BROWSER=_checkBrowser(),jquerySupports={positionMyOfs:versionCompare($.ui.version,"1.9")>=0},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,n){this.parent=e,this.tree=t,"string"==typeof n&&(n={title:n}),null==n.key?n.key="_"+t._nodeCount++:n.key=""+n.key,this.data=$.extend({},$.ui.dynatree.nodedatadefaults,n),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var n,i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,t&&t(i),e&&this.childList){i.children=[];for(var a=0,r=this.childList.length;a<r;a++)(n=this.childList[a]).isStatusNode()||i.children.push(n.toDict(!0,t))}else delete i.children;return i},fromDict:function(e){var t=e.children;if(void 0===t)return this.data=$.extend(this.data,e),void this.render();(e=$.extend({},e)).children=void 0,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t)},_getInnerHtml:function(){var e=this.tree,t=e.options,n=e.cache,i=this.getLevel(),a=this.data,r="";i<t.minExpandLevel?i>1&&(r+=n.tagConnector):!1!==this.hasChildren()?r+=n.tagExpander:r+=n.tagConnector,t.checkbox&&!0!==a.hideCheckbox&&!a.isStatusNode&&(r+=n.tagCheckbox),a.icon?r+="<img src='"+("/"===a.icon.charAt(0)?a.icon:t.imagePath+a.icon)+"' alt='' />":!1===a.icon||(a.iconClass?r+="<span class=' "+a.iconClass+"'></span>":r+=n.tagNodeIcon);var o="";if(t.onCustomRender&&(o=t.onCustomRender.call(e,this)||""),!o){var s=a.tooltip?' title="'+a.tooltip.replace(/\"/g,"&quot;")+'"':"",l=a.href||"#";o=t.noLink||a.noLink?'<span style="display:inline-block;" class="'+t.classNames.title+'"'+s+">"+a.title+"</span>":'<a href="'+l+'" class="'+t.classNames.title+'"'+s+">"+a.title+"</a>"}return r+=o},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,n=0,i=e.length-1;n<i;n++){var a=e[n],r=t.dtnode;a!==r?(this.tree.logDebug("_fixOrder: mismatch at index "+n+": "+a+" != "+r),this.ul.insertBefore(a.li,r.li)):t=t.nextSibling}},render:function(e,t){var n=this.tree,i=this.parent,a=this.data,r=n.options,o=r.classNames,s=this.isLastSibling(),l=!1;if(i||this.ul){if(i){this.li||(l=!0,this.li=document.createElement("li"),this.li.dtnode=this,a.key&&r.generateIds&&(this.li.id=r.idPrefix+a.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),i.ul||(i.ul=document.createElement("ul"),i.ul.style.display="none",i.li.appendChild(i.ul)),i.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var c=[];c.push(o.node),a.isFolder&&c.push(o.folder),this.bExpanded&&c.push(o.expanded),!1!==this.hasChildren()&&c.push(o.hasChildren),a.isLazy&&null===this.childList&&c.push(o.lazy),s&&c.push(o.lastsib),this.bSelected&&c.push(o.selected),this.hasSubSel&&c.push(o.partsel),n.activeNode===this&&c.push(o.active),a.addClass&&c.push(a.addClass),c.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(a.isLazy&&null===this.childList?"d":"")+(s?"l":"")),c.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(a.isFolder?"f":"")),this.span.className=c.join(" "),this.li.className=s?o.lastsib:"",l&&r.onCreate&&r.onCreate.call(n,this,this.span),r.onRender&&r.onRender.call(n,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),r.minExpandLevel>1?this.ul.className=o.container+" "+o.noConnector:this.ul.className=o.container;if((this.bExpanded||!0===t)&&this.childList){for(var d=0,u=this.childList.length;d<u;d++)this.childList[d].render(!1,t);this._fixOrder()}if(this.ul){var h="none"===this.ul.style.display,f=!!this.bExpanded;if(e&&r.fx&&h===f){var p=r.fx.duration||200;$(this.ul).animate(r.fx,p)}else this.ul.style.display=this.bExpanded||!i?"":"none"}},getKeyPath:function(e){var t=[],n=this.tree.options.keyPathSeparator;return this.visitParents((function(e){e.parent&&t.unshift(e.data.key)}),!e),n+t.join(n)},getParent:function(){return this.parent},getChildren:function(){if(void 0!==this.hasChildren())return this.childList},hasChildren:function(){if(this.data.isLazy){if(null===this.childList||void 0===this.childList)return;if(0===this.childList.length)return!1;if(1===this.childList.length&&this.childList[0].isStatusNode())return;return!0}return!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,n=e.length;t<n;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,n=e.length-1;t<n;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,n=0,i=t;n<i;n++){t+=e[n].countChildren()}return t},sortChildren:function(e,t){var n=this.childList;if(n){if(e=e||function(e,t){var n=e.data.title.toLowerCase(),i=t.data.title.toLowerCase();return n===i?0:n>i?1:-1},n.sort(e),t)for(var i=0,a=n.length;i<a;i++)n[i].childList&&n[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(e){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var n=t&&t.tooltip?t.tooltip:null,i=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+i,tooltip:n,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+i,tooltip:n,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var n=[],i=t?this:this.parent;i;)(e||i.parent)&&n.unshift(i),i=i.parent;return n},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,n=e.target;if(n.className.indexOf(t.node)<0)return null;for(var i=e.pageX-n.offsetLeft,a=e.pageY-n.offsetTop,r=0,o=n.childNodes.length;r<o;r++){var s=n.childNodes[r],l=s.offsetLeft-n.offsetLeft,c=s.offsetTop-n.offsetTop,d=s.clientWidth,u=s.clientHeight;if(i>=l&&i<=l+d&&a>=c&&a<=c+u){if(s.className==t.title)return"title";if(s.className==t.expander)return"expander";if(s.className==t.checkbox||s.className==t.radio)return"checkbox";if(s.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",n=this.tree.options.classNames;return t.indexOf(n.title)>=0?"title":t.indexOf(n.expander)>=0?"expander":t.indexOf(n.checkbox)>=0||t.indexOf(n.radio)>=0?"checkbox":t.indexOf(n.nodeIcon)>=0?"icon":t.indexOf(n.empty)>=0||t.indexOf(n.vline)>=0||t.indexOf(n.connector)>=0?"prefix":t.indexOf(n.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;t<n;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;t<n;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var n=this.tree.options;if(!this.data.isStatusNode)if(e){if(t&&n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,e,this))return;if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),t&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren())return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e;var t,n,i=this.childList,a=!0,r=!0;for(t=0,n=i.length;t<n;t++){var o=i[t]._updatePartSelectionState();!1!==o&&(r=!1),!0!==o&&(a=!1)}return e=!!a||!r&&void 0,this._setSubSel(void 0===e),this.bSelected=!0===e,e},_fixSelectionState:function(){var e,t,n;if(this.bSelected)for(this.visit((function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)})),e=this.parent;e;){e._setSubSel(!0);var i=!0;for(t=0,n=e.childList.length;t<n;t++){var a=e.childList[t];if(!a.bSelected&&!a.data.isStatusNode&&!a.data.unselectable){i=!1;break}}i&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit((function(e){e._setSubSel(!1),e._select(!1,!1,!1)})),e=this.parent;e;){e._select(!1,!1,!1);var r=!1;for(t=0,n=e.childList.length;t<n;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){r=!0;break}e._setSubSel(r),e=e.parent}},_select:function(e,t,n){var i=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&i.onQuerySelect&&!1===i.onQuerySelect.call(this.tree,e,this)||(1==i.selectMode&&e&&this.tree.visit((function(e){if(e.bSelected)return e._select(!1,!1,!1),!1})),this.bSelected=e,e?(i.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!0,this)):(i.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(!1!==e,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(e,t){if(this.bExpanded!==e){this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var n=this.tree.options;if(!e&&this.getLevel()<n.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);else if(!n.onQueryExpand||!1!==n.onQueryExpand.call(this.tree,e,this)){this.bExpanded=e,n.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var i=!(this.data.isLazy&&null===this.childList||this._isLoading||t);if(this.render(i),this.bExpanded&&this.parent&&n.autoCollapse)for(var a=this._parentList(!1,!0),r=0,o=a.length;r<o;r++)a[r].collapseSiblings();n.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this._isLoading?this._loadContent():n.onExpand&&n.onExpand.call(this.tree,e,this)}}else this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this)},isExpanded:function(){return this.bExpanded},expand:function(e){e=!1!==e,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var n=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger expand"),n.expand(!0)}),t);break;case"activate":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger activate"),n.activate()}),t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,n=e.length;t<n;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var n=this.span.getElementsByTagName("a");if(!n[0])return!0;BROWSER.msie&&parseInt(BROWSER.version,10)<9||n[0].focus()}e.preventDefault()},_onDblClick:function(e){},_onKeydown:function(e){var t,n=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var i=this._parentList(!1,!0),a=i.length-1;a>=0&&!(t=i[a].getNextSibling());a--);t&&t.focus();break;default:n=!1}n&&e.preventDefault()},_onKeypress:function(e){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):"focus"!=e.type&&"focusin"!=e.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var n=!0;if(!0===t&&(!1===(n=e(this))||"skip"===n))return n;if(this.childList)for(var i=0,a=this.childList.length;i<a&&!1!==(n=this.childList[i].visit(e,!0));i++);return n},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var n=this.parent;n;){if(!1===e(n))return!1;n=n.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1===t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul&&e.li&&this.ul.removeChild(e.li);for(var n=0,i=t.length;n<i;n++)if(t[n]===e){this.childList.splice(n,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var n=this.tree,i=this.childList;if(i){for(var a=0,r=i.length;a<r;a++){var o=i[a];o!==n.activeNode||t||o.deactivate(),this.tree.options.persist&&!t&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,t),this.ul&&o.li&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(e){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,n="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(n,(function(i,a,r){if(t.tree.$tree.unbind(n),t.tree.logDebug("loaded %o, %o, %o",i,a,r),a!==t)throw"got invalid load event";e.call(t.tree,a,r)}))}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var n=this.tree;if(n.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var i=e.split(n.options.keyPathSeparator);if(""===i[0])throw"Key path must be relative (don't start with '/')";var a=i.shift();if(this.childList)for(var r=0,o=this.childList.length;r<o;r++){var s=this.childList[r];if(s.data.key===a){if(0===i.length)t.call(n,s,"ok");else if(!s.data.isLazy||null!==s.childList&&void 0!==s.childList)t.call(n,s,"loaded"),s._loadKeyPath(i.join(n.options.keyPathSeparator),t);else{n.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,s);var l=this;s.reloadChildren((function(a,r){r?(n.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",a,e,a),t.call(n,s,"loaded"),a._loadKeyPath(i.join(n.options.keyPathSeparator),t)):(n.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,e),t.call(n,s,"error"))}))}return}}t.call(n,void 0,"notfound",a,0===i.length),n.logWarning("Node not found: "+a)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var n=this.tree,i=n.options,a=n.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(i.classNames.lastsib),t){var r=$.inArray(t,this.childList);if(r<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(r,0,e)}else this.childList.push(e);var o=n.isInitializing();if(i.persist&&a.cookiesFound&&o?(a.activeKey===e.data.key&&(n.activeNode=e),a.focusedKey===e.data.key&&(n.focusNode=e),e.bExpanded=$.inArray(e.data.key,a.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,a.selectedKeyList)>=0):(e.data.activate&&(n.activeNode=e,i.persist&&(a.activeKey=e.data.key)),e.data.focus&&(n.focusNode=e,i.persist&&(a.focusedKey=e.data.key)),e.bExpanded=!0===e.data.expand,e.bExpanded&&i.persist&&a.addExpand(e.data.key),e.bSelected=!0===e.data.select,e.bSelected&&i.persist&&a.addSelect(e.data.key)),i.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==i.selectMode)for(var s=this;s;)s.hasSubSel||s._setSubSel(!0),s=s.parent;return n.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var n=this.tree.enableUpdate(!1),i=null,a=0,r=e.length;a<r;a++){var o=e[a],s=this._addChildNode(new DynaTreeNode(this,this.tree,o),t);i||(i=s),o.children&&s.addChild(o.children,null)}return this.tree.enableUpdate(n),i}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var n=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+n),void setTimeout((function(){t.appendAjax(e)}),n)}var i=e.success,a=e.error,r="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,n,a){var o=t.tree.phase,s=t.tree.options;t.tree.phase="init",s.postProcess?e=s.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e="string"==typeof e.d?$.parseJSON(e.d):e.d),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",i&&i.call(s,t,e,n),t.tree.logDebug("trigger "+r),t.tree.$tree.trigger(r,[t,!0]),t.tree.phase=o,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,n,i){t.tree.logWarning("appendAjax failed:",n,":\n",e,"\n",i),a&&a.call(o,t,e,n,i),t.tree.$tree.trigger(r,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:n,tooltip:""+i})}});$.ajax(o)},move:function(e,t){var n;if(this!==e){if(!this.parent)throw"Cannot move system root";void 0!==t&&"over"!=t||(t="child");var i=this.parent,a="child"===t?e:e.parent;if(a.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if((n=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(n,1)}if(this.parent.ul&&this.li&&this.parent.ul.removeChild(this.li),this.parent=a,a.hasChildren())switch(t){case"child":a.childList.push(this);break;case"before":if((n=$.inArray(e,a.childList))<0)throw"Internal error";a.childList.splice(n,0,this);break;case"after":if((n=$.inArray(e,a.childList))<0)throw"Internal error";a.childList.splice(n+1,0,this);break;default:throw"Invalid mode "+t}else a.childList=[this];if(a.ul||(a.ul=document.createElement("ul"),a.ul.style.display="none",a.li&&a.li.appendChild(a.ul)),this.li&&a.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit((function(t){t.tree=e.tree}),null,!0),"Not yet implemented.";i.isDescendantOf(a)||i.render(),a.isDescendantOf(i)||a.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var n=new DynaTreeStatus(e,t);return n.read(),n.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){void 0===e&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!0===t.revert&&function(e){if(logMsg("draggable.revert(), dropped=",e),"boolean"==typeof e)return!e;var t=$.ui.ddmanager&&$.ui.ddmanager.current&&$.ui.ddmanager.current.helper;return t&&t.hasClass("dynatree-drop-reject")},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){return!!t.helper.data("dtSourceNode")}}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}DynaTree.version="@@Version",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){this.$widget;var t=this.options,n=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==t.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each((function(){if(this.src.search(/.*dynatree[^\/]*\.js$/i)>=0)return this.src.indexOf("/")>=0?t.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":t.imagePath="skin/",n.logDebug("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1})),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:void 0},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var a=this.tnRoot,r=t.persist&&this.persistence.isReloading(),o=!1,s=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?a.addChild(t.children):t.initAjax&&t.initAjax.url?(o=!0,a.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(a,$("#"+t.initId)):(this._createFromTag(a,i),i.remove()),this._checkConsistency(),o||3!=t.selectMode||a._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(s),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),o||(t.onPostInit&&t.onPostInit.call(this,r,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var n=this.persistence,i=$.extend({},t.initAjax);i.addActiveKey&&(i.data.activeKey=n.activeKey),i.addFocusedKey&&(i.data.focusedKey=n.focusedKey),i.addExpandedKeyList&&(i.data.expandedKeyList=n.expandedKeyList.join(",")),i.addSelectedKeyList&&(i.data.selectedKeyList=n.selectedKeyList.join(",")),i.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),i.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var a=n.isReloading();i.success=function(n,i,r){3==t.selectMode&&n.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(n.tree,a,!1),e&&e.call(n.tree,"ok")},i.error=function(n,i,r,o){t.onPostInit&&t.onPostInit.call(n.tree,a,!0,i,r,o),e&&e.call(n.tree,"error",i,r,o)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(i)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(e){var t=this.tnRoot.toDict(!0);return e?t:t.children},serializeArray:function(e){for(var t=this.getSelectedNodes(e),n=this.$tree.attr("name")||this.$tree.attr("id"),i=[],a=0,r=t.length;a<r;a++)i.push({name:n,value:t[a].data.key});return i},getPersistData:function(){return this.persistence.toDict()},logDebug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(e){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var n=null;return this.visit((function(t){if(t.data.key===e)return n=t,!1}),!0),n},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit((function(n){if(n.bSelected&&(t.push(n),!0===e))return"skip"})),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var n=e.split(this.options.keyPathSeparator);return""===n[0]&&n.shift(),n[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),n.shift()),e=n.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var n=this.getNodeByKey(e);return n?(n.select(t),n):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each((function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=""+$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)}))},_checkConsistency:function(){},_setDndStatus:function(e,t,n,i,a){var r,o=e?$(e.span):null,s=$(t.span),l=0,c="center";if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===i||"before"===i||"over"===i){switch(i){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),c="top";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),c="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),s.addClass("dynatree-drop-target"),l=8}r=jquerySupports.positionMyOfs?{my:"left"+offsetString(l)+" center",at:"left "+c,of:s}:{my:"left center",at:"left "+c,of:s,offset:l+" 0"},this.$dndMarker.show().position(r)}else s.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===i?s.addClass("dynatree-drop-after"):s.removeClass("dynatree-drop-after"),"before"===i?s.addClass("dynatree-drop-before"):s.removeClass("dynatree-drop-before"),!0===a?(o&&o.addClass("dynatree-drop-accept"),s.addClass("dynatree-drop-accept"),n.addClass("dynatree-drop-accept")):(o&&o.removeClass("dynatree-drop-accept"),s.removeClass("dynatree-drop-accept"),n.removeClass("dynatree-drop-accept")),!1===a?(o&&o.addClass("dynatree-drop-reject"),s.addClass("dynatree-drop-reject"),n.addClass("dynatree-drop-reject")):(o&&o.removeClass("dynatree-drop-reject"),s.removeClass("dynatree-drop-reject"),n.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,n,i,a,r){var o,s,l,c=this.options.dnd,d=null,u=$(t.span);switch(e){case"helper":var h=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(u.find(".dynatree-title").clone());$("ul.dynatree-container",t.tree.divTree).append(h),h.data("dtSourceNode",t),d=h;break;case"start":t.isStatusNode()?d=!1:c.onDragStart&&(d=c.onDragStart(t)),!1===d?(this.logDebug("tree.onDragStart() cancelled"),a.helper.trigger("mouseup"),a.helper.hide()):u.addClass("dynatree-drag-source");break;case"enter":d=!!(l=c.onDragEnter?c.onDragEnter(t,n,a,r):null)&&($.isArray(l)?{over:$.inArray("over",l)>=0,before:$.inArray("before",l)>=0,after:$.inArray("after",l)>=0}:{over:!0===l||"over"===l,before:!0===l||"before"===l,after:!0===l||"after"===l}),a.helper.data("enterResponse",d);break;case"over":if(o=null,!1===(s=a.helper.data("enterResponse")));else if("string"==typeof s)o=s;else{var f=u.offset(),p={x:i.pageX-f.left,y:i.pageY-f.top},m={x:p.x/u.width(),y:p.y/u.height()};s.after&&m.y>.75?o="after":!s.over&&s.after&&m.y>.5?o="after":s.before&&m.y<=.25?o="before":!s.over&&s.before&&m.y<=.5?o="before":s.over&&(o="over"),c.preventVoidMoves&&(t===n?o=null:"before"===o&&n&&t===n.getNextSibling()?o=null:"after"===o&&n&&t===n.getPrevSibling()?o=null:"over"===o&&n&&n.parent===t&&n.isLastSibling()&&(o=null)),a.helper.data("hitMode",o)}"over"===o&&c.autoExpandMS&&!1!==t.hasChildren()&&!t.bExpanded&&t.scheduleAction("expand",c.autoExpandMS),o&&c.onDragOver&&("over"!==(d=c.onDragOver(t,n,o,a,r))&&"before"!==d&&"after"!==d||(o=d)),this._setDndStatus(n,t,a.helper,o,!1!==d&&null!==o);break;case"drop":var _=a.helper.hasClass("dynatree-drop-reject");(o=a.helper.data("hitMode"))&&c.onDrop&&!_&&c.onDrop(t,n,o,a,r);break;case"leave":t.scheduleAction("cancel"),a.helper.data("enterResponse",null),a.helper.data("hitMode",null),this._setDndStatus(n,t,a.helper,"out",void 0),c.onDragLeave&&c.onDragLeave(t,n,a,r);break;case"stop":u.removeClass("dynatree-drag-source"),c.onDragStop&&c.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return d},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){if(versionCompare($.ui.version,"1.8")<0)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){this.options.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var e="click.dynatree dblclick.dynatree";function t(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return!!t&&t._onFocus(e)}this.options.keyboard&&(e+=" keypress.dynatree keydown.dynatree"),this.element.bind(e,(function(e){var t=$.ui.dynatree.getNode(e.target);if(!t)return!0;var n=t.tree,i=n.options;n.logDebug("event(%s): dtnode: %s",e.type,t);var a=n.phase;n.phase="userEvent";try{switch(e.type){case"click":return(!i.onClick||!1!==i.onClick.call(n,t,e))&&t._onClick(e);case"dblclick":return(!i.onDblClick||!1!==i.onDblClick.call(n,t,e))&&t._onDblClick(e);case"keydown":return(!i.onKeydown||!1!==i.onKeydown.call(n,t,e))&&t._onKeydown(e);case"keypress":return(!i.onKeypress||!1!==i.onKeypress.call(n,t,e))&&t._onKeypress(e)}}catch(i){n.logWarning("bind(%o): dtnode: %o, error: %o",e,t,i)}finally{n.phase=a}}));var n=this.tree.divTree;n.addEventListener?(n.addEventListener("focus",t,!0),n.addEventListener("blur",t,!0)):n.onfocusin=n.onfocusout=t},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.extend($.ui.dynatree,{version:"1.2.8",buildType:"release",_DynaTreeClass:DynaTree,_DynaTreeNodeClass:DynaTreeNode,getNode:function(e){if(e instanceof DynaTreeNode)return e;for(void 0!==e.selector&&(e=e[0]);e;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null},getPersistData:DynaTreeStatus._getTreePersistData}),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",radio:"dynatree-radio",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null;if(i)return n.offset.click.top=-2,n.offset.click.left=16,i.tree._onDragEvent("start",i,null,e,t,n)},drag:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,a=t.helper.data("dtTargetNode")||null,r=$.ui.dynatree.getNode(e.target);if(e.target&&!r&&$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return;t.helper.data("dtTargetNode",r),a&&a!==r&&a.tree._onDragEvent("leave",a,i,e,t,n),r&&r.tree.options.dnd.onDrop&&(r===a?r.tree._onDragEvent("over",r,i,e,t,n):r.tree._onDragEvent("enter",r,i,e,t,n))},stop:function(e,t){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,a=t.helper.data("dtTargetNode")||null,r="mouseup"==e.type&&1==e.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",a,t.helper.data("dtTargetNode")),r||logMsg("Drag was cancelled"),a&&(r&&a.tree._onDragEvent("drop",a,i,e,t,n),a.tree._onDragEvent("leave",a,i,e,t,n)),i&&i.tree._onDragEvent("stop",i,null,e,t,n)}}),didRegisterDnd=!0)}}(jQuery)},function(module,exports,__webpack_require__){(function($){var jQuery=__webpack_require__(70);if(!WYMeditor)var WYMeditor={};!function(){if(window.console&&console.firebug)WYMeditor.console=window.console;else{var e=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];WYMeditor.console={};for(var t=0;t<e.length;++t)WYMeditor.console[e[t]]=function(){}}}(),jQuery.extend(WYMeditor,{VERSION:"0.5-rc1",INSTANCES:[],STRINGS:[],SKINS:[],NAME:"name",INDEX:"{Wym_Index}",WYM_INDEX:"wym_index",BASE_PATH:"{Wym_Base_Path}",CSS_PATH:"{Wym_Css_Path}",WYM_PATH:"{Wym_Wym_Path}",SKINS_DEFAULT_PATH:"skins/",SKINS_DEFAULT_CSS:"skin.css",SKINS_DEFAULT_JS:"skin.js",LANG_DEFAULT_PATH:"lang/",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",JQUERY_PATH:"{Wym_Jquery_Path}",DIRECTION:"{Wym_Direction}",LOGO:"{Wym_Logo}",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TOOL_CLASS:"{Wym_Tool_Class}",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",CONTAINER_CLASS:"{Wym_Container_Class}",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",STATUS:"{Wym_Status}",DIALOG_TITLE:"{Wym_Dialog_Title}",DIALOG_BODY:"{Wym_Dialog_Body}",STRING:"string",BODY:"body",DIV:"div",P:"p",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",PRE:"pre",BLOCKQUOTE:"blockquote",A:"a",BR:"br",IMG:"img",TABLE:"table",TD:"td",TH:"th",UL:"ul",OL:"ol",LI:"li",CLASS:"class",HREF:"href",SRC:"src",TITLE:"title",ALT:"alt",DIALOG_LINK:"Link",DIALOG_IMAGE:"Image",DIALOG_TABLE:"Table",DIALOG_PASTE:"Paste_From_Word",BOLD:"Bold",ITALIC:"Italic",CREATE_LINK:"CreateLink",INSERT_IMAGE:"InsertImage",INSERT_TABLE:"InsertTable",INSERT_HTML:"InsertHTML",PASTE:"Paste",INDENT:"Indent",OUTDENT:"Outdent",TOGGLE_HTML:"ToggleHtml",FORMAT_BLOCK:"FormatBlock",PREVIEW:"Preview",UNLINK:"Unlink",INSERT_UNORDEREDLIST:"InsertUnorderedList",INSERT_ORDEREDLIST:"InsertOrderedList",MAIN_CONTAINERS:new Array("p","h1","h2","h3","h4","h5","h6","pre","blockquote"),BLOCKS:new Array("address","blockquote","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","noscript","ol","p","pre","table","ul","dd","dt","li","tbody","td","tfoot","th","thead","tr"),KEY:{BACKSPACE:8,ENTER:13,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,CURSOR:new Array(37,38,39,40),DELETE:46},NODE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(e,t){this._index=WYMeditor.INSTANCES.push(this)-1,this._element=e,this._options=t,this._html=jQuery(e).val(),this._options.html&&(this._html=this._options.html),this._options.basePath=this._options.basePath||this.computeBasePath(),this._options.skinPath=this._options.skinPath||this._options.basePath+WYMeditor.SKINS_DEFAULT_PATH+this._options.skin+"/",this._options.wymPath=this._options.wymPath||this.computeWymPath(),this._options.langPath=this._options.langPath||this._options.basePath+WYMeditor.LANG_DEFAULT_PATH,this._options.iframeBasePath=this._options.iframeBasePath||this._options.basePath+WYMeditor.IFRAME_DEFAULT,this._options.jQueryPath=this._options.jQueryPath||this.computeJqueryPath(),this.init()}}),jQuery.fn.wymeditor=function(e){return e=jQuery.extend({html:"",basePath:!1,skinPath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,styles:!1,stylesheet:!1,skin:"default",initSkin:!0,loadSkin:!0,lang:"en",direction:"ltr",boxHtml:"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+WYMeditor.CONTAINERS+WYMeditor.CLASSES+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div><div class='wym_area_bottom'>"+WYMeditor.LOGO+"</div></div>",logoHtml:"<a class='wym_wymeditor_link' href='http://www.wymeditor.org/'>WYMeditor</a>",iframeHtml:"<div class='wym_iframe wym_section'><iframe src='/page/get_editor_iframe' onload='this.contentWindow.parent.WYMeditor.INSTANCES["+WYMeditor.INDEX+"].initIframe(this)'></iframe></div>",editorStyles:[],toolsHtml:"<div class='wym_tools wym_section'><h2>{Tools}</h2><ul>"+WYMeditor.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:"<li class='"+WYMeditor.TOOL_CLASS+"'><a href='#' name='"+WYMeditor.TOOL_NAME+"' title='"+WYMeditor.TOOL_TITLE+"'>"+WYMeditor.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview"}],containersHtml:"<div class='wym_containers wym_section'><h2>{Containers}</h2><ul>"+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:"<li class='"+WYMeditor.CONTAINER_CLASS+"'><a href='#' name='"+WYMeditor.CONTAINER_NAME+"'>"+WYMeditor.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:"<div class='wym_classes wym_section'><h2>{Classes}</h2><ul>"+WYMeditor.CLASSES_ITEMS+"</ul></div>",classesItemHtml:"<li><a href='#' name='"+WYMeditor.CLASS_NAME+"'>"+WYMeditor.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:"<div class='wym_status wym_section'><h2>{Status}</h2></div>",htmlHtml:"<div class='wym_html wym_section'><h2>{Source_Code}</h2><textarea class='wym_html_val'></textarea></div>",boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:".wym_submit",cancelSelector:".wym_cancel",previewSelector:"",dialogTypeSelector:".wym_dialog_type",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview",updateSelector:".wymupdate",updateEvent:"click",dialogFeatures:"menubar=no,titlebar=no,toolbar=no,resizable=no,width=560,height=300,top=0,left=0",dialogFeaturesPreview:"menubar=no,titlebar=no,toolbar=no,resizable=no,scrollbars=yes,width=560,height=300,top=0,left=0",dialogHtml:"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'><html dir='"+WYMeditor.DIRECTION+"'><head><link rel='stylesheet' type='text/css' media='screen' href='"+WYMeditor.CSS_PATH+"' /><title>"+WYMeditor.DIALOG_TITLE+"</title><script type='text/javascript' src='"+WYMeditor.JQUERY_PATH+"'><\/script><script type='text/javascript' src='"+WYMeditor.WYM_PATH+"'><\/script></head>"+WYMeditor.DIALOG_BODY+"</html>",dialogLinkHtml:"<body class='wym_dialog wym_dialog_link' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_LINK+"' /><legend>{Link}</legend><div class='row'><label>{URL}</label><input type='text' class='wym_href' value='' size='40' /></div><div class='row'><label>{Title}</label><input type='text' class='wym_title' value='' size='40' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogImageHtml:"<body class='wym_dialog wym_dialog_image' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_IMAGE+"' /><legend>{Image}</legend><div class='row'><label>{URL}</label><input type='text' class='wym_src' value='' size='40' /></div><div class='row'><label>{Alternative_Text}</label><input type='text' class='wym_alt' value='' size='40' /></div><div class='row'><label>{Title}</label><input type='text' class='wym_title' value='' size='40' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogTableHtml:"<body class='wym_dialog wym_dialog_table' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_TABLE+"' /><legend>{Table}</legend><div class='row'><label>{Caption}</label><input type='text' class='wym_caption' value='' size='40' /></div><div class='row'><label>{Summary}</label><input type='text' class='wym_summary' value='' size='40' /></div><div class='row'><label>{Number_Of_Rows}</label><input type='text' class='wym_rows' value='3' size='3' /></div><div class='row'><label>{Number_Of_Cols}</label><input type='text' class='wym_cols' value='2' size='3' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogPasteHtml:"<body class='wym_dialog wym_dialog_paste' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_PASTE+"' /><fieldset><legend>{Paste_From_Word}</legend><div class='row'><textarea class='wym_text' rows='10' cols='50'></textarea></div><div class='row'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogPreviewHtml:"<body class='wym_dialog wym_dialog_preview' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'></body>",dialogStyles:[],stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null,preInitDialog:null,postInitDialog:null},e),this.each((function(){new WYMeditor.editor(jQuery(this),e)}))},jQuery.extend({wymeditors:function(e){return WYMeditor.INSTANCES[e]}}),WYMeditor.editor.prototype.init=function(){if(jQuery.browser.msie)var WymClass=new WYMeditor.WymClassExplorer(this);else if(jQuery.browser.mozilla)var WymClass=new WYMeditor.WymClassMozilla(this);else if(jQuery.browser.opera)var WymClass=new WYMeditor.WymClassOpera(this);else if(jQuery.browser.safari||jQuery.browser.chrome)var WymClass=new WYMeditor.WymClassSafari(this);if(WymClass){jQuery.isFunction(this._options.preInit)&&this._options.preInit(this);var SaxListener=new WYMeditor.XhtmlSaxListener;for(var prop in jQuery.extend(SaxListener,WymClass),this.parser=new WYMeditor.XhtmlParser(SaxListener),(this._options.styles||this._options.stylesheet)&&this.configureEditorUsingRawCss(),this.helper=new WYMeditor.XmlHelper,WymClass)this[prop]=WymClass[prop];this._box=jQuery(this._element).hide().after(this._options.boxHtml).next().addClass("wym_box_"+this._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(this._box.get(0),WYMeditor.WYM_INDEX,this._index),jQuery.data(this._element.get(0),WYMeditor.WYM_INDEX,this._index));var h=WYMeditor.Helper,iframeHtml=this._options.iframeHtml;iframeHtml=h.replaceAll(iframeHtml,WYMeditor.INDEX,this._index),iframeHtml=h.replaceAll(iframeHtml,WYMeditor.IFRAME_BASE_PATH,this._options.iframeBasePath);var boxHtml=jQuery(this._box).html();boxHtml=h.replaceAll(boxHtml,WYMeditor.LOGO,this._options.logoHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS,this._options.toolsHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS,this._options.containersHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES,this._options.classesHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.HTML,this._options.htmlHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.STATUS,this._options.statusHtml);for(var aTools=eval(this._options.toolsItems),sTools="",i=0;i<aTools.length;i++){var oTool=aTools[i];if(oTool.name&&oTool.title)var sTool=this._options.toolsItemHtml;var sTool=h.replaceAll(sTool,WYMeditor.TOOL_NAME,oTool.name);sTool=h.replaceAll(sTool,WYMeditor.TOOL_TITLE,this._options.stringDelimiterLeft+oTool.title+this._options.stringDelimiterRight),sTool=h.replaceAll(sTool,WYMeditor.TOOL_CLASS,oTool.css),sTools+=sTool}boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS_ITEMS,sTools);for(var aClasses=eval(this._options.classesItems),sClasses="",i=0;i<aClasses.length;i++){var oClass=aClasses[i];if(oClass.name&&oClass.title)var sClass=this._options.classesItemHtml;sClass=h.replaceAll(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAll(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass}boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses);for(var aContainers=eval(this._options.containersItems),sContainers="",i=0;i<aContainers.length;i++){var oContainer=aContainers[i];if(oContainer.name&&oContainer.title)var sContainer=this._options.containersItemHtml;sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_TITLE,this._options.stringDelimiterLeft+oContainer.title+this._options.stringDelimiterRight),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer}boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=this.replaceStrings(boxHtml),jQuery(this._box).html(boxHtml),jQuery(this._box).find(this._options.htmlSelector).hide(),this.loadSkin()}},WYMeditor.editor.prototype.bindEvents=function(){var wym=this;jQuery(this._box).find(this._options.toolSelector).click((function(){return wym._iframe.contentWindow.focus(),wym.exec(jQuery(this).attr(WYMeditor.NAME)),!1})),jQuery(this._box).find(this._options.containerSelector).click((function(){return wym.container(jQuery(this).attr(WYMeditor.NAME)),!1})),jQuery(this._box).find(this._options.htmlValSelector).keyup((function(){jQuery(wym._doc.body).html(jQuery(this).val())})).focus((function(){jQuery(this).toggleClass("hasfocus")})).blur((function(){jQuery(this).toggleClass("hasfocus")})),jQuery(this._box).find(this._options.classSelector).click((function(){var aClasses=eval(wym._options.classesItems),sName=jQuery(this).attr(WYMeditor.NAME),oClass=WYMeditor.Helper.findByName(aClasses,sName);if(oClass){var jqexpr=oClass.expr;wym.toggleClass(sName,jqexpr)}return wym._iframe.contentWindow.focus(),!1})),jQuery(this._options.updateSelector).bind(this._options.updateEvent,(function(){wym.update()}))},WYMeditor.editor.prototype.ready=function(){return null!=this._doc},WYMeditor.editor.prototype.box=function(){return this._box},WYMeditor.editor.prototype.html=function(e){if("string"!=typeof e)return jQuery(this._doc.body).html();jQuery(this._doc.body).html(e)},WYMeditor.editor.prototype.xhtml=function(){return this.parser.parse(this.html())},WYMeditor.editor.prototype.exec=function(e){switch(e){case WYMeditor.CREATE_LINK:(this.container()||this._selected_image)&&this.dialog(WYMeditor.DIALOG_LINK);break;case WYMeditor.INSERT_IMAGE:this.dialog(WYMeditor.DIALOG_IMAGE);break;case WYMeditor.INSERT_TABLE:this.dialog(WYMeditor.DIALOG_TABLE);break;case WYMeditor.PASTE:this.dialog(WYMeditor.DIALOG_PASTE);break;case WYMeditor.TOGGLE_HTML:this.update(),this.toggleHtml(),jQuery(this._box).find(this._options.htmlSelector).is(":visible")||this.listen();break;case WYMeditor.PREVIEW:this.dialog(WYMeditor.PREVIEW,this._options.dialogFeaturesPreview);break;default:this._exec(e)}},WYMeditor.editor.prototype.container=function(e){if(!e)return this.selected();var t=null;if(e.toLowerCase()==WYMeditor.TH){switch((t=this.container()).tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:var n=new Array(WYMeditor.TD,WYMeditor.TH);t=this.findUp(this.container(),n)}null!=t&&(e=t.tagName.toLowerCase()==WYMeditor.TD?WYMeditor.TH:WYMeditor.TD,this.switchTo(t,e),this.update())}else{n=new Array(WYMeditor.P,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE);if(t=this.findUp(this.container(),n)){var i=null;if(e.toLowerCase()==WYMeditor.BLOCKQUOTE){var a=this.findUp(this.container(),WYMeditor.BLOCKQUOTE);if(null==a)i=this._doc.createElement(e),t.parentNode.insertBefore(i,t),i.appendChild(t),this.setFocusToNode(i.firstChild);else{var r=a.childNodes,o=r.length,s=null;o>0&&(s=r.item(0));for(var l=0;l<o;l++)a.parentNode.insertBefore(r.item(0),a);a.parentNode.removeChild(a),s&&this.setFocusToNode(s)}}else this.switchTo(t,e);this.update()}}},WYMeditor.editor.prototype.toggleClass=function(e,t){var n=this._selected_image?this._selected_image:jQuery(this.selected());n=jQuery(n).parentsOrSelf(t),jQuery(n).toggleClass(e),jQuery(n).attr(WYMeditor.CLASS)||jQuery(n).removeAttr(this._class)},WYMeditor.editor.prototype.findUp=function(e,t){if(e){var n=e.tagName.toLowerCase();if(typeof t==WYMeditor.STRING)for(;n!=t&&n!=WYMeditor.BODY;)n=(e=e.parentNode).tagName.toLowerCase();else for(var i=!1;!i&&n!=WYMeditor.BODY;){for(var a=0;a<t.length;a++)if(n==t[a]){i=!0;break}i||(n=(e=e.parentNode).tagName.toLowerCase())}return n!=WYMeditor.BODY?e:null}return null},WYMeditor.editor.prototype.switchTo=function(e,t){var n=this._doc.createElement(t),i=jQuery(e).html();e.parentNode.replaceChild(n,e),jQuery(n).html(i),this.setFocusToNode(n)},WYMeditor.editor.prototype.replaceStrings=function(sVal){if(!WYMeditor.STRINGS[this._options.lang])try{eval(jQuery.ajax({url:this._options.langPath+this._options.lang+".js",async:!1}).responseText)}catch(e){return WYMeditor.console.error("WYMeditor: error while parsing language file."),sVal}for(var key in WYMeditor.STRINGS[this._options.lang])sVal=WYMeditor.Helper.replaceAll(sVal,this._options.stringDelimiterLeft+key+this._options.stringDelimiterRight,WYMeditor.STRINGS[this._options.lang][key]);return sVal},WYMeditor.editor.prototype.encloseString=function(e){return this._options.stringDelimiterLeft+e+this._options.stringDelimiterRight},WYMeditor.editor.prototype.status=function(e){jQuery(this._box).find(this._options.statusSelector).html(e)},WYMeditor.editor.prototype.update=function(){var e=this.xhtml();jQuery(this._element).val(e),jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(e)},WYMeditor.editor.prototype.dialog=function(e,t,n){var i=t||this._wym._options.dialogFeatures,a=window.open("","dialog",i);if(a){var r="";switch(e){case WYMeditor.DIALOG_LINK:r=this._options.dialogLinkHtml;break;case WYMeditor.DIALOG_IMAGE:r=this._options.dialogImageHtml;break;case WYMeditor.DIALOG_TABLE:r=this._options.dialogTableHtml;break;case WYMeditor.DIALOG_PASTE:r=this._options.dialogPasteHtml;break;case WYMeditor.PREVIEW:r=this._options.dialogPreviewHtml;break;default:r=n}var o=WYMeditor.Helper,s=this._options.dialogHtml;s=o.replaceAll(s,WYMeditor.BASE_PATH,this._options.basePath),s=o.replaceAll(s,WYMeditor.DIRECTION,this._options.direction),s=o.replaceAll(s,WYMeditor.CSS_PATH,this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS),s=o.replaceAll(s,WYMeditor.WYM_PATH,this._options.wymPath),s=o.replaceAll(s,WYMeditor.JQUERY_PATH,this._options.jQueryPath),s=o.replaceAll(s,WYMeditor.DIALOG_TITLE,this.encloseString(e)),s=o.replaceAll(s,WYMeditor.DIALOG_BODY,r),s=o.replaceAll(s,WYMeditor.INDEX,this._index),s=this.replaceStrings(s);var l=a.document;l.write(s),l.close()}},WYMeditor.editor.prototype.toggleHtml=function(){jQuery(this._box).find(this._options.htmlSelector).toggle()},WYMeditor.editor.prototype.uniqueStamp=function(){return"wym-"+(new Date).getTime()},WYMeditor.editor.prototype.paste=function(e){var t,n=this.selected(),i=e.split(this._newLine+this._newLine),a=new RegExp(this._newLine,"g");if(n&&n.tagName.toLowerCase()!=WYMeditor.BODY)for(x=i.length-1;x>=0;x--)t=(t=i[x]).replace(a,"<br />"),jQuery(n).after("<p>"+t+"</p>");else for(x=0;x<i.length;x++)t=(t=i[x]).replace(a,"<br />"),jQuery(this._doc.body).append("<p>"+t+"</p>")},WYMeditor.editor.prototype.insert=function(e){null!=this._iframe.contentWindow.getSelection().focusNode?this._exec(WYMeditor.INSERT_HTML,e):this.paste(e)},WYMeditor.editor.prototype.wrap=function(e,t){null!=this._iframe.contentWindow.getSelection().focusNode&&this._exec(WYMeditor.INSERT_HTML,e+this._iframe.contentWindow.getSelection().toString()+t)},WYMeditor.editor.prototype.unwrap=function(){null!=this._iframe.contentWindow.getSelection().focusNode&&this._exec(WYMeditor.INSERT_HTML,this._iframe.contentWindow.getSelection().toString())},WYMeditor.editor.prototype.addCssRules=function(e,t){var n=e.styleSheets[0];if(n)for(var i=0;i<t.length;i++){var a=t[i];a.name&&a.css&&this.addCssRule(n,a)}},WYMeditor.editor.prototype.computeBasePath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(e){return e.src&&e.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src").replace(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/,"")},WYMeditor.editor.prototype.computeWymPath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(e){return e.src&&e.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src")},WYMeditor.editor.prototype.computeJqueryPath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(e){return e.src&&e.src.match(/jquery(-(.*)){0,1}(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src")},WYMeditor.editor.prototype.computeCssPath=function(){return jQuery(jQuery.grep(jQuery("link"),(function(e){return e.href&&e.href.match(/wymeditor\/skins\/(.*)screen\.css(\?.*)?$/)}))).attr("href")},WYMeditor.editor.prototype.configureEditorUsingRawCss=function(){var e=new WYMeditor.WymCssParser;this._options.stylesheet?e.parse(jQuery.ajax({url:this._options.stylesheet,async:!1}).responseText):e.parse(this._options.styles,!1),0==this._options.classesItems.length&&(this._options.classesItems=e.css_settings.classesItems),0==this._options.editorStyles.length&&(this._options.editorStyles=e.css_settings.editorStyles),0==this._options.dialogStyles.length&&(this._options.dialogStyles=e.css_settings.dialogStyles)},WYMeditor.editor.prototype.listen=function(){jQuery(this._doc.body).bind("mousedown",this.mousedown);for(var e=this._doc.body.getElementsByTagName("img"),t=0;t<e.length;t++)jQuery(e[t]).bind("mousedown",this.mousedown)},WYMeditor.editor.prototype.mousedown=function(e){WYMeditor.INSTANCES[this.ownerDocument.title]._selected_image=this.tagName.toLowerCase()==WYMeditor.IMG?this:null,e.stopPropagation()},WYMeditor.loadCss=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,jQuery("head").get(0).appendChild(t)},WYMeditor.editor.prototype.loadSkin=function(){if(this._options.loadSkin&&!WYMeditor.SKINS[this._options.skin]){var found=!1,rExp=new RegExp(this._options.skin+"/"+WYMeditor.SKINS_DEFAULT_CSS+"$");jQuery("link").each((function(){this.href.match(rExp)&&(found=!0)})),found||WYMeditor.loadCss(this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS)}jQuery(this._box).addClass("wym_skin_"+this._options.skin),this._options.initSkin&&!WYMeditor.SKINS[this._options.skin]&&eval(jQuery.ajax({url:this._options.skinPath+WYMeditor.SKINS_DEFAULT_JS,async:!1}).responseText),WYMeditor.SKINS[this._options.skin]&&WYMeditor.SKINS[this._options.skin].init&&WYMeditor.SKINS[this._options.skin].init(this)},WYMeditor.INIT_DIALOG=function(index){var wym=window.opener.WYMeditor.INSTANCES[index],doc=window.document,selected=wym.selected(),dialogType=jQuery(wym._options.dialogTypeSelector).val(),sStamp=wym.uniqueStamp();switch(dialogType){case WYMeditor.DIALOG_LINK:selected&&selected.tagName&&selected.tagName.toLowerCase!=WYMeditor.A&&(selected=jQuery(selected).parentsOrSelf(WYMeditor.A)),!selected&&wym._selected_image&&(selected=jQuery(wym._selected_image).parentsOrSelf(WYMeditor.A))}jQuery.isFunction(wym._options.preInitDialog)&&wym._options.preInitDialog(wym,window);var styles=doc.styleSheets[0],aCss=eval(wym._options.dialogStyles);wym.addCssRules(doc,aCss),selected&&(jQuery(wym._options.hrefSelector).val(jQuery(selected).attr(WYMeditor.HREF)),jQuery(wym._options.srcSelector).val(jQuery(selected).attr(WYMeditor.SRC)),jQuery(wym._options.titleSelector).val(jQuery(selected).attr(WYMeditor.TITLE)),jQuery(wym._options.altSelector).val(jQuery(selected).attr(WYMeditor.ALT))),wym._selected_image&&(jQuery(wym._options.dialogImageSelector+" "+wym._options.srcSelector).val(jQuery(wym._selected_image).attr(WYMeditor.SRC)),jQuery(wym._options.dialogImageSelector+" "+wym._options.titleSelector).val(jQuery(wym._selected_image).attr(WYMeditor.TITLE)),jQuery(wym._options.dialogImageSelector+" "+wym._options.altSelector).val(jQuery(wym._selected_image).attr(WYMeditor.ALT))),jQuery(wym._options.dialogLinkSelector+" "+wym._options.submitSelector).click((function(){var e=jQuery(wym._options.hrefSelector).val();e.length>0&&(wym._exec(WYMeditor.CREATE_LINK,sStamp),jQuery("a[href="+sStamp+"]",wym._doc.body).attr(WYMeditor.HREF,e).attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val())),window.close()})),jQuery(wym._options.dialogImageSelector+" "+wym._options.submitSelector).click((function(){var e=jQuery(wym._options.srcSelector).val();e.length>0&&(wym._exec(WYMeditor.INSERT_IMAGE,sStamp),jQuery("img[src$="+sStamp+"]",wym._doc.body).attr(WYMeditor.SRC,e).attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val()).attr(WYMeditor.ALT,jQuery(wym._options.altSelector).val())),window.close()})),jQuery(wym._options.dialogTableSelector+" "+wym._options.submitSelector).click((function(){var e=jQuery(wym._options.rowsSelector).val(),t=jQuery(wym._options.colsSelector).val();if(e>0&&t>0){var n=wym._doc.createElement(WYMeditor.TABLE),i=null,a=jQuery(wym._options.captionSelector).val();for(n.createCaption().innerHTML=a,x=0;x<e;x++)for(i=n.insertRow(x),y=0;y<t;y++)i.insertCell(y);jQuery(n).attr("summary",jQuery(wym._options.summarySelector).val());var r=jQuery(wym.findUp(wym.container(),WYMeditor.MAIN_CONTAINERS)).get(0);r&&r.parentNode?jQuery(r).after(n):jQuery(wym._doc.body).append(n)}window.close()})),jQuery(wym._options.dialogPasteSelector+" "+wym._options.submitSelector).click((function(){var e=jQuery(wym._options.textSelector).val();wym.paste(e),window.close()})),jQuery(wym._options.dialogPreviewSelector+" "+wym._options.previewSelector).html(wym.xhtml()),jQuery(wym._options.cancelSelector).mousedown((function(){window.close()})),jQuery.isFunction(wym._options.postInitDialog)&&wym._options.postInitDialog(wym,window)},WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(e,t,n){return n=n||!1,"<"+e+((t=t||!1)?this.tagOptions(t):"")+(n?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(e,t,n){return"<"+e+((n=n||!1)?this.tagOptions(n):"")+">"+t+"</"+e+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(e){return"<![CDATA["+e+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(e){return this._fixDoubleEscape(this.escapeEntities(e))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(e){return e.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(e){for(var t in this._formated_options="",e){var n=e[t];"function"!=typeof n&&n.length>0&&(parseInt(t)==t&&"object"==typeof n&&(t=n.shift(),n=n.pop()),""!=t&&""!=n&&(this._formated_options+=" "+t+'="'+this.escapeOnce(n)+'"'))}return this._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(e,t){this._entitiesDiv.innerHTML=e,this._entitiesDiv.textContent=e;var n=this._entitiesDiv.innerHTML;return void 0===t&&(0!=t&&(n=n.replace('"',"&quot;")),1==t&&(n=n.replace('"',"&#039;"))),n},WYMeditor.XmlHelper.prototype.parseAttributes=function(e){var t=[],n=e.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(n.toString()!=e)for(var i in n){var a=n[i];if("function"!=typeof a&&0!=a.length){var r=new RegExp("(\\w+)\\s*"+a);if(match=e.match(r)){var o=a.replace(/^[\s=]+/,""),s=o.charAt(0);""!=(s='"'==s?'"':"'"==s?"'":"")&&(o='"'==s?o.replace(/^"|"+$/g,""):o.replace(/^'|'+$/g,"")),e=e.replace(match[0],""),t.push([match[1],o])}}}return t},WYMeditor.XhtmlValidator={_attributes:{core:{except:["base","head","html","meta","param","script","style","title"],attributes:["class","id","style","title","accesskey","tabindex"]},language:{except:["base","br","hr","iframe","param","script"],attributes:{dir:["ltr","rtl"],0:"lang",1:"xml:lang"}},keyboard:{attributes:{accesskey:/^(\w){1}$/,tabindex:/^(\d)+$/}}},_events:{window:{only:["body"],attributes:["onload","onunload"]},form:{only:["form","input","textarea","select","a","label","button"],attributes:["onchange","onsubmit","onreset","onselect","onblur","onfocus"]},keyboard:{except:["base","bdo","br","frame","frameset","head","html","iframe","meta","param","script","style","title"],attributes:["onkeydown","onkeypress","onkeyup"]},mouse:{except:["base","bdo","br","head","html","meta","param","script","style","title"],attributes:["onclick","ondblclick","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup"]}},_tags:{a:{attributes:{0:"charset",1:"coords",2:"href",3:"hreflang",4:"name",rel:/^(alternate|designates|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark| |shortcut|icon)+$/,rev:/^(alternate|designates|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark| |shortcut|icon)+$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/,5:"type"}},0:"abbr",1:"acronym",2:"address",area:{attributes:{0:"alt",1:"coords",2:"href",nohref:/^(true|false)$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/},required:["alt"]},3:"b",base:{attributes:["href"],required:["href"]},bdo:{attributes:{dir:/^(ltr|rtl)$/},required:["dir"]},4:"big",blockquote:{attributes:["cite"]},5:"body",6:"br",button:{attributes:{disabled:/^(disabled)$/,type:/^(button|reset|submit)$/,0:"value"},inside:"form"},7:"caption",8:"cite",9:"code",col:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"},inside:"colgroup"},colgroup:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"}},10:"dd",del:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},11:"div",12:"dfn",13:"dl",14:"dt",15:"em",fieldset:{inside:"form"},form:{attributes:{0:"action",1:"accept",2:"accept-charset",3:"enctype",method:/^(get|post)$/},required:["action"]},head:{attributes:["profile"]},16:"h1",17:"h2",18:"h3",19:"h4",20:"h5",21:"h6",22:"hr",html:{attributes:["xmlns"]},23:"i",img:{attributes:["alt","src","height","ismap","longdesc","usemap","width"],required:["alt","src"]},input:{attributes:{0:"accept",1:"alt",checked:/^(checked)$/,disabled:/^(disabled)$/,maxlength:/^(\d)+$/,2:"name",readonly:/^(readonly)$/,size:/^(\d)+$/,3:"src",type:/^(button|checkbox|file|hidden|image|password|radio|reset|submit|text)$/,4:"value"},inside:"form"},ins:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},24:"kbd",label:{attributes:["for"],inside:"form"},25:"legend",26:"li",link:{attributes:{0:"charset",1:"href",2:"hreflang",media:/^(all|braille|print|projection|screen|speech|,|;| )+$/i,rel:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,rev:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,3:"type"},inside:"head"},map:{attributes:["id","name"],required:["id"]},meta:{attributes:{0:"content","http-equiv":/^(content\-type|expires|refresh|set\-cookie)$/i,1:"name",2:"scheme"},required:["content"]},27:"noscript",object:{attributes:["archive","classid","codebase","codetype","data","declare","height","name","standby","type","usemap","width"]},28:"ol",optgroup:{attributes:{0:"label",disabled:/^(disabled)$/},required:["label"]},option:{attributes:{0:"label",disabled:/^(disabled)$/,selected:/^(selected)$/,1:"value"},inside:"select"},29:"p",param:{attributes:{0:"type",valuetype:/^(data|ref|object)$/,1:"valuetype",2:"value"},required:["name"]},30:"pre",q:{attributes:["cite"]},31:"samp",script:{attributes:{type:/^(text\/ecmascript|text\/javascript|text\/jscript|text\/vbscript|text\/vbs|text\/xml)$/,0:"charset",defer:/^(defer)$/,1:"src"},required:["type"]},select:{attributes:{disabled:/^(disabled)$/,multiple:/^(multiple)$/,0:"name",1:"size"},inside:"form"},32:"small",33:"span",34:"strong",style:{attributes:{0:"type",media:/^(screen|tty|tv|projection|handheld|print|braille|aural|all)$/},required:["type"]},35:"sub",36:"sup",table:{attributes:{0:"border",1:"cellpadding",2:"cellspacing",frame:/^(void|above|below|hsides|lhs|rhs|vsides|box|border)$/,rules:/^(none|groups|rows|cols|all)$/,3:"summary",4:"width"}},tbody:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},td:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},textarea:{attributes:["cols","rows","disabled","name","readonly"],required:["cols","rows"],inside:"form"},tfoot:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom)$/,2:"baseline"}},th:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},thead:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},37:"title",tr:{attributes:{align:/^(right|left|center|justify|char)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},38:"tt",39:"ul",40:"var"},skiped_attributes:[],skiped_attribute_values:[],getValidTagAttributes:function(e,t){var n={},i=this.getPossibleTagAttributes(e);for(var a in t){var r=t[a],o=WYMeditor.Helper;o.contains(this.skiped_attributes,a)||o.contains(this.skiped_attribute_values,r)||"function"!=typeof r&&o.contains(i,a)&&(this.doesAttributeNeedsValidation(e,a)?this.validateAttribute(e,a,r)&&(n[a]=r):n[a]=r)}return n},getUniqueAttributesAndEventsForTag:function(e){var t=[];if(this._tags[e]&&this._tags[e].attributes)for(k in this._tags[e].attributes)t.push(parseInt(k)==k?this._tags[e].attributes[k]:k);return t},getDefaultAttributesAndEventsForTags:function(){var e=[];for(var t in this._events)e.push(this._events[t]);for(var t in this._attributes)e.push(this._attributes[t]);return e},isValidTag:function(e){if(this._tags[e])return!0;for(var t in this._tags)if(this._tags[t]==e)return!0;return!1},getDefaultAttributesAndEventsForTag:function(e){var t=[];if(this.isValidTag(e)){var n=this.getDefaultAttributesAndEventsForTags();for(var i in n){var a=n[i];if("object"==typeof a){var r=WYMeditor.Helper;if(a.except&&r.contains(a.except,e)||a.only&&!r.contains(a.only,e))continue;var o=a.attributes?a.attributes:a.events;for(var s in o)t.push("string"!=typeof o[s]?s:o[s])}}}return t},doesAttributeNeedsValidation:function(e,t){return this._tags[e]&&(this._tags[e].attributes&&this._tags[e].attributes[t]||this._tags[e].required&&WYMeditor.Helper.contains(this._tags[e].required,t))},validateAttribute:function(e,t,n){return!(this._tags[e]&&this._tags[e].attributes&&this._tags[e].attributes[t]&&n.length>0&&!n.match(this._tags[e].attributes[t])||this._tags[e]&&this._tags[e].required&&WYMeditor.Helper.contains(this._tags[e].required,t)&&0==n.length)&&void 0!==this._tags[e]},getPossibleTagAttributes:function(e){return this._possible_tag_attributes||(this._possible_tag_attributes={}),this._possible_tag_attributes[e]||(this._possible_tag_attributes[e]=this.getUniqueAttributesAndEventsForTag(e).concat(this.getDefaultAttributesAndEventsForTag(e))),this._possible_tag_attributes[e]}},WYMeditor.ParallelRegex=function(e){return this._case=e,this._patterns=[],this._labels=[],this._regex=null,this},WYMeditor.ParallelRegex.prototype.addPattern=function(e,t){t=t||!0;var n=this._patterns.length;this._patterns[n]=e,this._labels[n]=t,this._regex=null},WYMeditor.ParallelRegex.prototype.match=function(e){if(0==this._patterns.length)return[!1,""];var t=e.match(this._getCompoundedRegex());if(!t)return[!1,""];for(var n=t[0],i=1;i<t.length;i++)if(t[i])return[this._labels[i-1],n];return[!0,t[0]]},WYMeditor.ParallelRegex.prototype._getCompoundedRegex=function(){if(null==this._regex){for(var e=0,t=this._patterns.length;e<t;e++)this._patterns[e]="("+this._untokenizeRegex(this._tokenizeRegex(this._patterns[e]).replace(/([\/\(\)])/g,"\\$1"))+")";this._regex=new RegExp(this._patterns.join("|"),this._getPerlMatchingFlags())}return this._regex},WYMeditor.ParallelRegex.prototype._tokenizeRegex=function(e){return e.replace(/\(\?(i|m|s|x|U)\)/,"~~~~~~Tk1$1~~~~~~").replace(/\(\?(\-[i|m|s|x|U])\)/,"~~~~~~Tk2$1~~~~~~").replace(/\(\?\=(.*)\)/,"~~~~~~Tk3$1~~~~~~").replace(/\(\?\!(.*)\)/,"~~~~~~Tk4$1~~~~~~").replace(/\(\?\<\=(.*)\)/,"~~~~~~Tk5$1~~~~~~").replace(/\(\?\<\!(.*)\)/,"~~~~~~Tk6$1~~~~~~").replace(/\(\?\:(.*)\)/,"~~~~~~Tk7$1~~~~~~")},WYMeditor.ParallelRegex.prototype._untokenizeRegex=function(e){return e.replace(/~~~~~~Tk1(.{1})~~~~~~/,"(?$1)").replace(/~~~~~~Tk2(.{2})~~~~~~/,"(?$1)").replace(/~~~~~~Tk3(.*)~~~~~~/,"(?=$1)").replace(/~~~~~~Tk4(.*)~~~~~~/,"(?!$1)").replace(/~~~~~~Tk5(.*)~~~~~~/,"(?<=$1)").replace(/~~~~~~Tk6(.*)~~~~~~/,"(?<!$1)").replace(/~~~~~~Tk7(.*)~~~~~~/,"(?:$1)")},WYMeditor.ParallelRegex.prototype._getPerlMatchingFlags=function(){return this._case?"m":"mi"},WYMeditor.StateStack=function(e){return this._stack=[e],this},WYMeditor.StateStack.prototype.getCurrent=function(){return this._stack[this._stack.length-1]},WYMeditor.StateStack.prototype.enter=function(e){this._stack.push(e)},WYMeditor.StateStack.prototype.leave=function(){return 1!=this._stack.length&&(this._stack.pop(),!0)},WYMeditor.LEXER_ENTER=1,WYMeditor.LEXER_MATCHED=2,WYMeditor.LEXER_UNMATCHED=3,WYMeditor.LEXER_EXIT=4,WYMeditor.LEXER_SPECIAL=5,WYMeditor.Lexer=function(e,t,n){return t=t||"accept",this._case=n||!1,this._regexes={},this._parser=e,this._mode=new WYMeditor.StateStack(t),this._mode_handlers={},this._mode_handlers[t]=t,this},WYMeditor.Lexer.prototype.addPattern=function(e,t){t=t||"accept";void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e),void 0===this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addEntryPattern=function(e,t,n){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.addExitPattern=function(e,t){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"__exit"),void 0===this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addSpecialPattern=function(e,t,n){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"_"+n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.mapHandler=function(e,t){this._mode_handlers[e]=t},WYMeditor.Lexer.prototype.parse=function(e){if(void 0===this._parser)return!1;for(var t,n=e.length;"object"==typeof(t=this._reduce(e));){e=t[0];var i=t[1],a=t[2],r=t[3];if(!this._dispatchTokens(i,a,r))return!1;if(""==e)return!0;if(e.length==n)return!1;n=e.length}return!!t&&this._invokeParser(e,WYMeditor.LEXER_UNMATCHED)},WYMeditor.Lexer.prototype._dispatchTokens=function(e,t,n){return n=n||!1,!!this._invokeParser(e,WYMeditor.LEXER_UNMATCHED)&&("boolean"==typeof n?this._invokeParser(t,WYMeditor.LEXER_MATCHED):this._isModeEnd(n)?!!this._invokeParser(t,WYMeditor.LEXER_EXIT)&&this._mode.leave():this._isSpecialMode(n)?(this._mode.enter(this._decodeSpecial(n)),!!this._invokeParser(t,WYMeditor.LEXER_SPECIAL)&&this._mode.leave()):(this._mode.enter(n),this._invokeParser(t,WYMeditor.LEXER_ENTER)))},WYMeditor.Lexer.prototype._isModeEnd=function(e){return"__exit"===e},WYMeditor.Lexer.prototype._isSpecialMode=function(e){return"_"==e.substring(0,1)},WYMeditor.Lexer.prototype._decodeSpecial=function(e){return e.substring(1)},WYMeditor.Lexer.prototype._invokeParser=function(content,is_match){if(!/ +/.test(content)&&(""===content||0==content))return!0;var current=this._mode.getCurrent(),handler=this._mode_handlers[current],result;return eval("result = this._parser."+handler+"(content, is_match);"),result},WYMeditor.Lexer.prototype._reduce=function(e){var t=this._regexes[this._mode.getCurrent()].match(e),n=t[1],i=t[0];if(i){var a=e.indexOf(n),r=e.substr(0,a);return[e=e.substring(a+n.length),r,n,i]}return!0},WYMeditor.XhtmlLexer=function(e){return jQuery.extend(this,new WYMeditor.Lexer(e,"Text")),this.mapHandler("Text","Text"),this.addTokens(),this.init(),this},WYMeditor.XhtmlLexer.prototype.init=function(){},WYMeditor.XhtmlLexer.prototype.addTokens=function(){this.addCommentTokens("Text"),this.addScriptTokens("Text"),this.addCssTokens("Text"),this.addTagTokens("Text")},WYMeditor.XhtmlLexer.prototype.addCommentTokens=function(e){this.addEntryPattern("\x3c!--",e,"Comment"),this.addExitPattern("--\x3e","Comment")},WYMeditor.XhtmlLexer.prototype.addScriptTokens=function(e){this.addEntryPattern("<script",e,"Script"),this.addExitPattern("<\/script>","Script")},WYMeditor.XhtmlLexer.prototype.addCssTokens=function(e){this.addEntryPattern("<style",e,"Css"),this.addExitPattern("</style>","Css")},WYMeditor.XhtmlLexer.prototype.addTagTokens=function(e){this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*>",e,"OpeningTag"),this.addEntryPattern("<[a-z0-9:-]+[\\/ \\>]+",e,"OpeningTag"),this.addInTagDeclarationTokens("OpeningTag"),this.addSpecialPattern("</\\s*[a-z0-9:-]+\\s*>",e,"ClosingTag")},WYMeditor.XhtmlLexer.prototype.addInTagDeclarationTokens=function(e){this.addSpecialPattern("\\s+",e,"Ignore"),this.addAttributeTokens(e),this.addExitPattern("/>",e),this.addExitPattern(">",e)},WYMeditor.XhtmlLexer.prototype.addAttributeTokens=function(e){this.addSpecialPattern("\\s*[a-z-_0-9]*:?[a-z-_0-9]+\\s*(?==)\\s*",e,"TagAttributes"),this.addEntryPattern('=\\s*"',e,"DoubleQuotedAttribute"),this.addPattern('\\\\"',"DoubleQuotedAttribute"),this.addExitPattern('"',"DoubleQuotedAttribute"),this.addEntryPattern("=\\s*'",e,"SingleQuotedAttribute"),this.addPattern("\\\\'","SingleQuotedAttribute"),this.addExitPattern("'","SingleQuotedAttribute"),this.addSpecialPattern("=\\s*[^>\\s]*",e,"UnquotedAttribute")},WYMeditor.XhtmlParser=function(e,t){t=t||"Text";return this._Lexer=new WYMeditor.XhtmlLexer(this),this._Listener=e,this._mode=t,this._matches=[],this._last_match="",this._current_match="",this},WYMeditor.XhtmlParser.prototype.parse=function(e){return this._Lexer.parse(this.beforeParsing(e)),this.afterParsing(this._Listener.getResult())},WYMeditor.XhtmlParser.prototype.beforeParsing=function(e){return(e.match(/class="MsoNormal"/)||e.match(/ns = "urn:schemas-microsoft-com/))&&this._Listener.avoidStylingTagsAndAttributes(),this._Listener.beforeParsing(e)},WYMeditor.XhtmlParser.prototype.afterParsing=function(e){return this._Listener._avoiding_tags_implicitly&&this._Listener.allowStylingTagsAndAttributes(),this._Listener.afterParsing(e)},WYMeditor.XhtmlParser.prototype.Ignore=function(e,t){return!0},WYMeditor.XhtmlParser.prototype.Text=function(e){return this._Listener.addContent(e),!0},WYMeditor.XhtmlParser.prototype.Comment=function(e,t){return this._addNonTagBlock(e,t,"addComment")},WYMeditor.XhtmlParser.prototype.Script=function(e,t){return this._addNonTagBlock(e,t,"addScript")},WYMeditor.XhtmlParser.prototype.Css=function(e,t){return this._addNonTagBlock(e,t,"addCss")},WYMeditor.XhtmlParser.prototype._addNonTagBlock=function(e,t,n){switch(t){case WYMeditor.LEXER_ENTER:this._non_tag=e;break;case WYMeditor.LEXER_UNMATCHED:this._non_tag+=e;break;case WYMeditor.LEXER_EXIT:switch(n){case"addComment":this._Listener.addComment(this._non_tag+e);break;case"addScript":this._Listener.addScript(this._non_tag+e);break;case"addCss":this._Listener.addCss(this._non_tag+e)}}return!0},WYMeditor.XhtmlParser.prototype.OpeningTag=function(e,t){switch(t){case WYMeditor.LEXER_ENTER:this._tag=this.normalizeTag(e),this._tag_attributes={};break;case WYMeditor.LEXER_SPECIAL:this._callOpenTagListener(this.normalizeTag(e));break;case WYMeditor.LEXER_EXIT:this._callOpenTagListener(this._tag,this._tag_attributes)}return!0},WYMeditor.XhtmlParser.prototype.ClosingTag=function(e,t){return this._callCloseTagListener(this.normalizeTag(e)),!0},WYMeditor.XhtmlParser.prototype._callOpenTagListener=function(e,t){t=t||{};this.autoCloseUnclosedBeforeNewOpening(e),this._Listener.isBlockTag(e)?(this._Listener._tag_stack.push(e),this._Listener.fixNestingBeforeOpeningBlockTag(e,t),this._Listener.openBlockTag(e,t),this._increaseOpenTagCounter(e)):this._Listener.isInlineTag(e)?this._Listener.inlineTag(e,t):(this._Listener.openUnknownTag(e,t),this._increaseOpenTagCounter(e)),this._Listener.last_tag=e,this._Listener.last_tag_opened=!0,this._Listener.last_tag_attributes=t},WYMeditor.XhtmlParser.prototype._callCloseTagListener=function(e){if(this._decreaseOpenTagCounter(e))if(this.autoCloseUnclosedBeforeTagClosing(e),this._Listener.isBlockTag(e)){var t=this._Listener._tag_stack.pop();if(0==t)return;t!=e&&(e=t),this._Listener.closeBlockTag(e)}else this._Listener.closeUnknownTag(e);else this._Listener.closeUnopenedTag(e);this._Listener.last_tag=e,this._Listener.last_tag_opened=!1},WYMeditor.XhtmlParser.prototype._increaseOpenTagCounter=function(e){this._Listener._open_tags[e]=this._Listener._open_tags[e]||0,this._Listener._open_tags[e]++},WYMeditor.XhtmlParser.prototype._decreaseOpenTagCounter=function(e){return!!this._Listener._open_tags[e]&&(this._Listener._open_tags[e]--,0==this._Listener._open_tags[e]&&(this._Listener._open_tags[e]=void 0),!0)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeNewOpening=function(e){this._autoCloseUnclosed(e,!1)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeTagClosing=function(e){this._autoCloseUnclosed(e,!0)},WYMeditor.XhtmlParser.prototype._autoCloseUnclosed=function(e,t){t=t||!1;if(this._Listener._open_tags)for(var n in this._Listener._open_tags){this._Listener._open_tags[n]>0&&this._Listener.shouldCloseTagAutomatically(n,e,t)&&this._callCloseTagListener(n,!0)}},WYMeditor.XhtmlParser.prototype.getTagReplacements=function(){return this._Listener.getTagReplacements()},WYMeditor.XhtmlParser.prototype.normalizeTag=function(e){e=e.replace(/^([\s<\/>]*)|([\s<\/>]*)$/gm,"").toLowerCase();var t=this._Listener.getTagReplacements();return t[e]?t[e]:e},WYMeditor.XhtmlParser.prototype.TagAttributes=function(e,t){return WYMeditor.LEXER_SPECIAL==t&&(this._current_attribute=e),!0},WYMeditor.XhtmlParser.prototype.DoubleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.SingleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.UnquotedAttribute=function(e,t){return this._tag_attributes[this._current_attribute]=e.replace(/^=/,""),!0},WYMeditor.XhtmlSaxListener=function(){return this.output="",this.helper=new WYMeditor.XmlHelper,this._open_tags={},this.validator=WYMeditor.XhtmlValidator,this._tag_stack=[],this.avoided_tags=[],this.entities={"&nbsp;":"&#160;","&iexcl;":"&#161;","&cent;":"&#162;","&pound;":"&#163;","&curren;":"&#164;","&yen;":"&#165;","&brvbar;":"&#166;","&sect;":"&#167;","&uml;":"&#168;","&copy;":"&#169;","&ordf;":"&#170;","&laquo;":"&#171;","&not;":"&#172;","&shy;":"&#173;","&reg;":"&#174;","&macr;":"&#175;","&deg;":"&#176;","&plusmn;":"&#177;","&sup2;":"&#178;","&sup3;":"&#179;","&acute;":"&#180;","&micro;":"&#181;","&para;":"&#182;","&middot;":"&#183;","&cedil;":"&#184;","&sup1;":"&#185;","&ordm;":"&#186;","&raquo;":"&#187;","&frac14;":"&#188;","&frac12;":"&#189;","&frac34;":"&#190;","&iquest;":"&#191;","&Agrave;":"&#192;","&Aacute;":"&#193;","&Acirc;":"&#194;","&Atilde;":"&#195;","&Auml;":"&#196;","&Aring;":"&#197;","&AElig;":"&#198;","&Ccedil;":"&#199;","&Egrave;":"&#200;","&Eacute;":"&#201;","&Ecirc;":"&#202;","&Euml;":"&#203;","&Igrave;":"&#204;","&Iacute;":"&#205;","&Icirc;":"&#206;","&Iuml;":"&#207;","&ETH;":"&#208;","&Ntilde;":"&#209;","&Ograve;":"&#210;","&Oacute;":"&#211;","&Ocirc;":"&#212;","&Otilde;":"&#213;","&Ouml;":"&#214;","&times;":"&#215;","&Oslash;":"&#216;","&Ugrave;":"&#217;","&Uacute;":"&#218;","&Ucirc;":"&#219;","&Uuml;":"&#220;","&Yacute;":"&#221;","&THORN;":"&#222;","&szlig;":"&#223;","&agrave;":"&#224;","&aacute;":"&#225;","&acirc;":"&#226;","&atilde;":"&#227;","&auml;":"&#228;","&aring;":"&#229;","&aelig;":"&#230;","&ccedil;":"&#231;","&egrave;":"&#232;","&eacute;":"&#233;","&ecirc;":"&#234;","&euml;":"&#235;","&igrave;":"&#236;","&iacute;":"&#237;","&icirc;":"&#238;","&iuml;":"&#239;","&eth;":"&#240;","&ntilde;":"&#241;","&ograve;":"&#242;","&oacute;":"&#243;","&ocirc;":"&#244;","&otilde;":"&#245;","&ouml;":"&#246;","&divide;":"&#247;","&oslash;":"&#248;","&ugrave;":"&#249;","&uacute;":"&#250;","&ucirc;":"&#251;","&uuml;":"&#252;","&yacute;":"&#253;","&thorn;":"&#254;","&yuml;":"&#255;","&OElig;":"&#338;","&oelig;":"&#339;","&Scaron;":"&#352;","&scaron;":"&#353;","&Yuml;":"&#376;","&fnof;":"&#402;","&circ;":"&#710;","&tilde;":"&#732;","&Alpha;":"&#913;","&Beta;":"&#914;","&Gamma;":"&#915;","&Delta;":"&#916;","&Epsilon;":"&#917;","&Zeta;":"&#918;","&Eta;":"&#919;","&Theta;":"&#920;","&Iota;":"&#921;","&Kappa;":"&#922;","&Lambda;":"&#923;","&Mu;":"&#924;","&Nu;":"&#925;","&Xi;":"&#926;","&Omicron;":"&#927;","&Pi;":"&#928;","&Rho;":"&#929;","&Sigma;":"&#931;","&Tau;":"&#932;","&Upsilon;":"&#933;","&Phi;":"&#934;","&Chi;":"&#935;","&Psi;":"&#936;","&Omega;":"&#937;","&alpha;":"&#945;","&beta;":"&#946;","&gamma;":"&#947;","&delta;":"&#948;","&epsilon;":"&#949;","&zeta;":"&#950;","&eta;":"&#951;","&theta;":"&#952;","&iota;":"&#953;","&kappa;":"&#954;","&lambda;":"&#955;","&mu;":"&#956;","&nu;":"&#957;","&xi;":"&#958;","&omicron;":"&#959;","&pi;":"&#960;","&rho;":"&#961;","&sigmaf;":"&#962;","&sigma;":"&#963;","&tau;":"&#964;","&upsilon;":"&#965;","&phi;":"&#966;","&chi;":"&#967;","&psi;":"&#968;","&omega;":"&#969;","&thetasym;":"&#977;","&upsih;":"&#978;","&piv;":"&#982;","&ensp;":"&#8194;","&emsp;":"&#8195;","&thinsp;":"&#8201;","&zwnj;":"&#8204;","&zwj;":"&#8205;","&lrm;":"&#8206;","&rlm;":"&#8207;","&ndash;":"&#8211;","&mdash;":"&#8212;","&lsquo;":"&#8216;","&rsquo;":"&#8217;","&sbquo;":"&#8218;","&ldquo;":"&#8220;","&rdquo;":"&#8221;","&bdquo;":"&#8222;","&dagger;":"&#8224;","&Dagger;":"&#8225;","&bull;":"&#8226;","&hellip;":"&#8230;","&permil;":"&#8240;","&prime;":"&#8242;","&Prime;":"&#8243;","&lsaquo;":"&#8249;","&rsaquo;":"&#8250;","&oline;":"&#8254;","&frasl;":"&#8260;","&euro;":"&#8364;","&image;":"&#8465;","&weierp;":"&#8472;","&real;":"&#8476;","&trade;":"&#8482;","&alefsym;":"&#8501;","&larr;":"&#8592;","&uarr;":"&#8593;","&rarr;":"&#8594;","&darr;":"&#8595;","&harr;":"&#8596;","&crarr;":"&#8629;","&lArr;":"&#8656;","&uArr;":"&#8657;","&rArr;":"&#8658;","&dArr;":"&#8659;","&hArr;":"&#8660;","&forall;":"&#8704;","&part;":"&#8706;","&exist;":"&#8707;","&empty;":"&#8709;","&nabla;":"&#8711;","&isin;":"&#8712;","&notin;":"&#8713;","&ni;":"&#8715;","&prod;":"&#8719;","&sum;":"&#8721;","&minus;":"&#8722;","&lowast;":"&#8727;","&radic;":"&#8730;","&prop;":"&#8733;","&infin;":"&#8734;","&ang;":"&#8736;","&and;":"&#8743;","&or;":"&#8744;","&cap;":"&#8745;","&cup;":"&#8746;","&int;":"&#8747;","&there4;":"&#8756;","&sim;":"&#8764;","&cong;":"&#8773;","&asymp;":"&#8776;","&ne;":"&#8800;","&equiv;":"&#8801;","&le;":"&#8804;","&ge;":"&#8805;","&sub;":"&#8834;","&sup;":"&#8835;","&nsub;":"&#8836;","&sube;":"&#8838;","&supe;":"&#8839;","&oplus;":"&#8853;","&otimes;":"&#8855;","&perp;":"&#8869;","&sdot;":"&#8901;","&lceil;":"&#8968;","&rceil;":"&#8969;","&lfloor;":"&#8970;","&rfloor;":"&#8971;","&lang;":"&#9001;","&rang;":"&#9002;","&loz;":"&#9674;","&spades;":"&#9824;","&clubs;":"&#9827;","&hearts;":"&#9829;","&diams;":"&#9830;"},this.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","col","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","param","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"],this.inline_tags=["br","hr","img","input"],this},WYMeditor.XhtmlSaxListener.prototype.shouldCloseTagAutomatically=function(e,t,n){n=n||!1;return!("td"!=e||!(n&&"tr"==t||!n&&"td"==t))||!("option"!=e||!(n&&"select"==t||!n&&"option"==t))},WYMeditor.XhtmlSaxListener.prototype.beforeParsing=function(e){return this.output="",e},WYMeditor.XhtmlSaxListener.prototype.afterParsing=function(e){return e=this.replaceNamedEntities(e),e=this.joinRepeatedEntities(e),e=this.removeEmptyTags(e),e=this.removeBrInPre(e)},WYMeditor.XhtmlSaxListener.prototype.replaceNamedEntities=function(e){for(var t in this.entities)e=e.replace(new RegExp(t,"g"),this.entities[t]);return e},WYMeditor.XhtmlSaxListener.prototype.joinRepeatedEntities=function(e){var t="em|strong|sub|sup|acronym|pre|del|address";return e.replace(new RegExp("</("+t+")><\\1>",""),"").replace(new RegExp("(s*<("+t+")>s*){2}(.*)(s*</\\2>s*){2}",""),"<$2>$3<$2>")},WYMeditor.XhtmlSaxListener.prototype.removeEmptyTags=function(e){return e.replace(new RegExp("<("+this.block_tags.join("|").replace(/\|td/,"").replace(/\|p/,"").replace(/\|th/,"")+")>(<br />|&#160;|&nbsp;|\\s)*</\\1>","g"),"")},WYMeditor.XhtmlSaxListener.prototype.removeBrInPre=function(e){var t=e.match(new RegExp("<pre[^>]*>(.*?)</pre>","gmi"));if(t)for(var n=0;n<t.length;n++)e=e.replace(t[n],t[n].replace(new RegExp("<br />","g"),String.fromCharCode(13,10)));return e},WYMeditor.XhtmlSaxListener.prototype.getResult=function(){return this.output},WYMeditor.XhtmlSaxListener.prototype.getTagReplacements=function(){return{b:"strong",i:"em"}},WYMeditor.XhtmlSaxListener.prototype.addContent=function(e){this.output+=e},WYMeditor.XhtmlSaxListener.prototype.addComment=function(e){this.remove_comments&&(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addScript=function(e){this.remove_scripts||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addCss=function(e){this.remove_embeded_styles||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.openBlockTag=function(e,t){this.output+=this.helper.tag(e,this.validator.getValidTagAttributes(e,t),!0)},WYMeditor.XhtmlSaxListener.prototype.inlineTag=function(e,t){this.output+=this.helper.tag(e,this.validator.getValidTagAttributes(e,t))},WYMeditor.XhtmlSaxListener.prototype.openUnknownTag=function(e,t){},WYMeditor.XhtmlSaxListener.prototype.closeBlockTag=function(e){this.output=this.output.replace(/<br \/>$/,"")+this._getClosingTagContent("before",e)+"</"+e+">"+this._getClosingTagContent("after",e)},WYMeditor.XhtmlSaxListener.prototype.closeUnknownTag=function(e){},WYMeditor.XhtmlSaxListener.prototype.closeUnopenedTag=function(e){this.output+="</"+e+">"},WYMeditor.XhtmlSaxListener.prototype.avoidStylingTagsAndAttributes=function(){this.avoided_tags=["div","span"],this.validator.skiped_attributes=["style"],this.validator.skiped_attribute_values=["MsoNormal","main1"],this._avoiding_tags_implicitly=!0},WYMeditor.XhtmlSaxListener.prototype.allowStylingTagsAndAttributes=function(){this.avoided_tags=[],this.validator.skiped_attributes=[],this.validator.skiped_attribute_values=[],this._avoiding_tags_implicitly=!1},WYMeditor.XhtmlSaxListener.prototype.isBlockTag=function(e){return!WYMeditor.Helper.contains(this.avoided_tags,e)&&WYMeditor.Helper.contains(this.block_tags,e)},WYMeditor.XhtmlSaxListener.prototype.isInlineTag=function(e){return!WYMeditor.Helper.contains(this.avoided_tags,e)&&WYMeditor.Helper.contains(this.inline_tags,e)},WYMeditor.XhtmlSaxListener.prototype.insertContentAfterClosingTag=function(e,t){this._insertContentWhenClosingTag("after",e,t)},WYMeditor.XhtmlSaxListener.prototype.insertContentBeforeClosingTag=function(e,t){this._insertContentWhenClosingTag("before",e,t)},WYMeditor.XhtmlSaxListener.prototype.fixNestingBeforeOpeningBlockTag=function(e,t){"li"==e||"ul"!=e&&"ol"!=e||!this.last_tag||this.last_tag_opened||"li"!=this.last_tag||(this.output=this.output.replace(/<\/li>$/,""),this.insertContentAfterClosingTag(e,"</li>"))},WYMeditor.XhtmlSaxListener.prototype._insertContentWhenClosingTag=function(e,t,n){this["_insert_"+e+"_closing"]||(this["_insert_"+e+"_closing"]=[]),this["_insert_"+e+"_closing"][t]||(this["_insert_"+e+"_closing"][t]=[]),this["_insert_"+e+"_closing"][t].push(n)},WYMeditor.XhtmlSaxListener.prototype._getClosingTagContent=function(e,t){return this["_insert_"+e+"_closing"]&&this["_insert_"+e+"_closing"][t]&&this["_insert_"+e+"_closing"][t].length>0?this["_insert_"+e+"_closing"][t].pop():""},WYMeditor.WymCssLexer=function(e,t){t=void 0===t||t;return jQuery.extend(this,new WYMeditor.Lexer(e,t?"Ignore":"WymCss")),this.mapHandler("WymCss","Ignore"),1==t&&(this.addEntryPattern("/\\*[<\\s]*WYMeditor[>\\s]*\\*/","Ignore","WymCss"),this.addExitPattern("/\\*[</\\s]*WYMeditor[>\\s]*\\*/","WymCss")),this.addSpecialPattern("[\\sa-z1-6]*\\.[a-z-_0-9]+","WymCss","WymCssStyleDeclaration"),this.addEntryPattern("/\\*","WymCss","WymCssComment"),this.addExitPattern("\\*/","WymCssComment"),this.addEntryPattern("{","WymCss","WymCssStyle"),this.addExitPattern("}","WymCssStyle"),this.addEntryPattern("/\\*","WymCssStyle","WymCssFeedbackStyle"),this.addExitPattern("\\*/","WymCssFeedbackStyle"),this},WYMeditor.WymCssParser=function(){return this._in_style=!1,this._has_title=!1,this.only_wym_blocks=!0,this.css_settings={classesItems:[],editorStyles:[],dialogStyles:[]},this},WYMeditor.WymCssParser.prototype.parse=function(e,t){t=void 0===t?this.only_wym_blocks:t;this._Lexer=new WYMeditor.WymCssLexer(this,t),this._Lexer.parse(e)},WYMeditor.WymCssParser.prototype.Ignore=function(e,t){return!0},WYMeditor.WymCssParser.prototype.WymCssComment=function(e,t){return!e.match(/end[a-z0-9\s]*wym[a-z0-9\s]*/im)&&(t==WYMeditor.LEXER_UNMATCHED&&(this._in_style?this._current_item[this._current_element]&&(this._current_item[this._current_element].expressions?this._current_item[this._current_element].expressions.push(e):this._current_item[this._current_element].expressions=[e]):(this._has_title=!0,this._current_item={title:WYMeditor.Helper.trim(e)}),this._in_style=!0),!0)},WYMeditor.WymCssParser.prototype.WymCssStyle=function(e,t){return t==WYMeditor.LEXER_UNMATCHED?""!=(e=WYMeditor.Helper.trim(e))&&(this._current_item[this._current_element].style=e):t==WYMeditor.LEXER_EXIT&&(this._in_style=!1,this._has_title=!1,this.addStyleSetting(this._current_item)),!0},WYMeditor.WymCssParser.prototype.WymCssFeedbackStyle=function(e,t){return t==WYMeditor.LEXER_UNMATCHED&&(this._current_item[this._current_element].feedback_style=e.replace(/^([\s\/\*]*)|([\s\/\*]*)$/gm,"")),!0},WYMeditor.WymCssParser.prototype.WymCssStyleDeclaration=function(e){var t="";if((e=e.replace(/^([\s\.]*)|([\s\.*]*)$/gm,"")).indexOf(".")>0){var n=e.split(".");this._current_element=n[1];t=n[0]}else this._current_element=e;return this._has_title||(this._current_item={title:(t?t.toUpperCase()+": ":"")+this._current_element},this._has_title=!0),this._current_item[this._current_element]||(this._current_item[this._current_element]={name:this._current_element}),t&&(this._current_item[this._current_element].tags?this._current_item[this._current_element].tags.push(t):this._current_item[this._current_element].tags=[t]),!0},WYMeditor.WymCssParser.prototype.addStyleSetting=function(e){for(var t in e){var n=e[t];"object"==typeof n&&"title"!=t&&(this.css_settings.classesItems.push({name:WYMeditor.Helper.trim(n.name),title:e.title,expr:WYMeditor.Helper.trim((n.expressions||n.tags).join(", "))}),n.feedback_style&&this.css_settings.editorStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.feedback_style}),n.style&&this.css_settings.dialogStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.style}))}},jQuery.fn.isPhantomNode=function(){return 3==this[0].nodeType&&!/[^\t\n\r ]/.test(this[0].data)},WYMeditor.isPhantomNode=function(e){return 3==e.nodeType&&!/[^\t\n\r ]/.test(e.data)},WYMeditor.isPhantomString=function(e){return!/[^\t\n\r ]/.test(e)},jQuery.fn.parentsOrSelf=function(e){var t=this;return 3==t[0].nodeType&&(t=t.parents().slice(0,1)),1==t.filter(e).size()?t:t.parents(e).slice(0,1)},WYMeditor.Helper={replaceAll:function(e,t,n){var i=new RegExp(t,"g");return e.replace(i,n)},insertAt:function(e,t,n){return e.substr(0,n)+t+e.substring(n)},trim:function(e){return e.replace(/^(\s*)|(\s*)$/gm,"")},contains:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},indexOf:function(e,t){for(var n=-1,i=0;i<e.length;i++)if(e[i]==t){n=i;break}return n},findByName:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.name==t)return i}return null}},WYMeditor.WymClassExplorer=function(e){this._wym=e,this._class="className",this._newLine="\r\n"},WYMeditor.WymClassExplorer.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),jQuery(this._doc.body).html(this._wym._html);var wym=this;this._doc.body.onfocus=function(){wym._doc.designMode="on",wym._doc=iframe.contentWindow.document},this._doc.onbeforedeactivate=function(){wym.saveCaret()},this._doc.onkeyup=function(){wym.saveCaret(),wym.keyup()},this._doc.onclick=function(){wym.saveCaret()},this._doc.body.onbeforepaste=function(){wym._iframe.contentWindow.event.returnValue=!1},this._doc.body.onpaste=function(){wym._iframe.contentWindow.event.returnValue=!1,wym.paste(window.clipboardData.getData("Text"))},this._initialized&&(jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()),this._initialized=!0,this._doc.designMode="on";try{this._doc=iframe.contentWindow.document}catch(e){}},WYMeditor.WymClassExplorer.prototype._exec=function(e,t){switch(e){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.findUp(this.container(),WYMeditor.LI);if(n){var i=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||i.tagName.toLowerCase()==WYMeditor.OL||i.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(e)}break;default:t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e)}this.listen()},WYMeditor.WymClassExplorer.prototype.selected=function(){var e=this._iframe.contentWindow.document.caretPos;if(null!=e&&null!=e.parentElement)return e.parentElement()},WYMeditor.WymClassExplorer.prototype.saveCaret=function(){this._doc.caretPos=this._doc.selection.createRange()},WYMeditor.WymClassExplorer.prototype.addCssRule=function(e,t){e.addRule(t.name,t.css)},WYMeditor.WymClassExplorer.prototype.insert=function(e){var t=this._doc.selection.createRange();if(jQuery(t.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{t.pasteHTML(e)}catch(e){}else this.paste(e)},WYMeditor.WymClassExplorer.prototype.wrap=function(e,t){var n=this._doc.selection.createRange();if(jQuery(n.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{n.pasteHTML(e+n.text+t)}catch(e){}},WYMeditor.WymClassExplorer.prototype.unwrap=function(){var e=this._doc.selection.createRange();if(jQuery(e.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{var t=e.text;this._exec("Cut"),e.pasteHTML(t)}catch(e){}},WYMeditor.WymClassExplorer.prototype.keyup=function(){this._selected_image=null},WYMeditor.WymClassExplorer.prototype.setFocusToNode=function(e){var t=this._doc.selection.createRange();t.moveToElementText(e),t.collapse(!1),t.move("character",-1),t.select(),e.focus()},WYMeditor.WymClassMozilla=function(e){this._wym=e,this._class="class",this._newLine="\n"},WYMeditor.WymClassMozilla.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentDocument;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this.html(this._wym._html),this.enableDesignMode(),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery(this._doc).bind("focus",this.enableDesignMode),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassMozilla.prototype.html=function(e){if("string"!=typeof e)return jQuery(this._doc.body).html();try{this._doc.designMode="off"}catch(e){}e=e.replace(/<em(\b[^>]*)>/gi,"<i$1>").replace(/<\/em>/gi,"</i>").replace(/<strong(\b[^>]*)>/gi,"<b$1>").replace(/<\/strong>/gi,"</b>"),jQuery(this._doc.body).html(e),this.enableDesignMode()},WYMeditor.WymClassMozilla.prototype._exec=function(e,t){if(!this.selected())return!1;switch(e){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.selected(),i=this._iframe.contentWindow.getSelection().anchorNode;if("#text"==i.nodeName&&(i=i.parentNode),n=this.findUp(n,WYMeditor.BLOCKS),i=this.findUp(i,WYMeditor.BLOCKS),n&&n==i&&n.tagName.toLowerCase()==WYMeditor.LI){var a=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||a.tagName.toLowerCase()==WYMeditor.OL||a.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(e,"",null)}break;default:t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null)}this.selected().tagName.toLowerCase()==WYMeditor.BODY&&this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.listen()},WYMeditor.WymClassMozilla.prototype.selected=function(){var e=this._iframe.contentWindow.getSelection().focusNode;return e?"#text"==e.nodeName?e.parentNode:e:null},WYMeditor.WymClassMozilla.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassMozilla.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title],n=null;if(e.keyCode===WYMeditor.KEY.ENTER&&(n=t.selected())){var i=$(n),a=(i.parent(),i.parents(".embedded-item"));if(a.size()){var r=$("<p/>");return i.hasClass("title")?a.before(r):i.hasClass("content")&&a.after(r),t.setFocusToNode(r.get(0)),!1}}if(e.ctrlKey){if(66==e.keyCode)return t._exec(WYMeditor.BOLD),!1;if(73==e.keyCode)return t._exec(WYMeditor.ITALIC),!1}else 13==e.keyCode&&(e.shiftKey||(n=t.selected())&&n.tagName.toLowerCase()==WYMeditor.PRE&&(e.preventDefault(),t.insert("<p></p>")))},WYMeditor.WymClassMozilla.prototype.keyup=function(e){var t=WYMeditor.INSTANCES[this.title];t._selected_image=null;var n=null;if(13!=e.keyCode||e.shiftKey){if(8!=e.keyCode&&17!=e.keyCode&&46!=e.keyCode&&224!=e.keyCode&&!e.metaKey&&!e.ctrlKey){var i=(n=t.selected()).tagName.toLowerCase();"strong"!=i&&"b"!=i&&"em"!=i&&"i"!=i&&"sub"!=i&&"sup"!=i&&"a"!=i||(i=n.parentNode.tagName.toLowerCase()),i==WYMeditor.BODY&&t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)}}else jQuery(t._doc.body).children(WYMeditor.BR).remove()},WYMeditor.WymClassMozilla.prototype.enableDesignMode=function(){if("off"==this.designMode)try{this.designMode="on",this.execCommand("styleWithCSS","",!1)}catch(e){}},WYMeditor.WymClassMozilla.prototype.setFocusToNode=function(e){var t=document.createRange();t.selectNode(e);var n=this._iframe.contentWindow.getSelection();n.addRange(t),n.collapse(e,e.childNodes.length),this._iframe.contentWindow.focus()},WYMeditor.WymClassMozilla.prototype.openBlockTag=function(e,t){t=this.validator.getValidTagAttributes(e,t);if("span"==e&&t.style){var n=this.getTagForStyle(t.style);if(!n)return;this._tag_stack.pop();e=n;this._tag_stack.push(n),t.style=""}this.output+=this.helper.tag(e,t,!0)},WYMeditor.WymClassMozilla.prototype.getTagForStyle=function(e){return/bold/.test(e)?"strong":/italic/.test(e)?"em":/sub/.test(e)?"sub":!!/sub/.test(e)&&"super"},WYMeditor.WymClassOpera=function(e){this._wym=e,this._class="class",this._newLine="\r\n"},WYMeditor.WymClassOpera.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this.html(this._wym._html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassOpera.prototype._exec=function(e,t){t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e),this.listen()},WYMeditor.WymClassOpera.prototype.selected=function(){var e=this._iframe.contentWindow.getSelection().focusNode;return e?"#text"==e.nodeName?e.parentNode:e:null},WYMeditor.WymClassOpera.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassOpera.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title],n=t._iframe.contentWindow.getSelection();startNode=n.getRangeAt(0).startContainer,jQuery(startNode).parentsOrSelf(WYMeditor.MAIN_CONTAINERS.join(","))[0]||jQuery(startNode).parentsOrSelf("li")||e.keyCode==WYMeditor.KEY.ENTER||e.keyCode==WYMeditor.KEY.LEFT||e.keyCode==WYMeditor.KEY.UP||e.keyCode==WYMeditor.KEY.RIGHT||e.keyCode==WYMeditor.KEY.DOWN||e.keyCode==WYMeditor.KEY.BACKSPACE||e.keyCode==WYMeditor.KEY.DELETE||t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassOpera.prototype.keyup=function(e){WYMeditor.INSTANCES[this.title]._selected_image=null},WYMeditor.WymClassOpera.prototype.setFocusToNode=function(e){},WYMeditor.WymClassSafari=function(e){this._wym=e,this._class="class",this._newLine="\n"},WYMeditor.WymClassSafari.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentDocument;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this.html(this._wym._html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassSafari.prototype._exec=function(e,t){if(!this.selected())return!1;switch(e){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.selected(),i=this._iframe.contentWindow.getSelection().anchorNode;if("#text"==i.nodeName&&(i=i.parentNode),n=this.findUp(n,WYMeditor.BLOCKS),i=this.findUp(i,WYMeditor.BLOCKS),n&&n==i&&n.tagName.toLowerCase()==WYMeditor.LI){var a=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||a.tagName.toLowerCase()==WYMeditor.OL||a.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(e,"",null)}break;case WYMeditor.INSERT_ORDEREDLIST:case WYMeditor.INSERT_UNORDEREDLIST:this._doc.execCommand(e,"",null);n=this.selected();(r=this.findUp(n,WYMeditor.MAIN_CONTAINERS))&&jQuery(r).replaceWith(jQuery(r).html());break;default:t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null)}var r;(r=this.selected())&&r.tagName.toLowerCase()==WYMeditor.BODY&&this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.listen()},WYMeditor.WymClassSafari.prototype.selected=function(){var e=this._iframe.contentWindow.getSelection().focusNode;return e?"#text"==e.nodeName?e.parentNode:e:null},WYMeditor.WymClassSafari.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassSafari.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title];if(e.keyCode===WYMeditor.KEY.ENTER){var n=t.selected();if(n){var i=$(n),a=(i.parent(),i.parents(".embedded-item"));if(a.size()){var r=$("<p/>");return i.hasClass("title")?a.before(r):i.hasClass("content")&&a.after(r),t.setFocusToNode(r.get(0)),!1}}}if(e.ctrlKey){if(66==e.keyCode)return t._exec(WYMeditor.BOLD),!1;if(73==e.keyCode)return t._exec(WYMeditor.ITALIC),!1}},WYMeditor.WymClassSafari.prototype.keyup=function(e){var t=WYMeditor.INSTANCES[this.title];t._selected_image=null;var n=null;if(13!=e.keyCode||e.shiftKey||(jQuery(t._doc.body).children(WYMeditor.BR).remove(),(n=t.selected())&&n.tagName.toLowerCase()==WYMeditor.PRE&&t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)),13==e.keyCode&&e.shiftKey&&t._exec("InsertLineBreak"),8!=e.keyCode&&17!=e.keyCode&&46!=e.keyCode&&224!=e.keyCode&&!e.metaKey&&!e.ctrlKey){var i=(n=t.selected()).tagName.toLowerCase();"strong"!=i&&"b"!=i&&"em"!=i&&"i"!=i&&"sub"!=i&&"sup"!=i&&"a"!=i&&"span"!=i||(i=n.parentNode.tagName.toLowerCase()),i!=WYMeditor.BODY&&i!=WYMeditor.DIV||t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)}},WYMeditor.WymClassSafari.prototype.setFocusToNode=function(e){var t=this._iframe.contentDocument.createRange();t.selectNode(e);var n=this._iframe.contentWindow.getSelection();n.addRange(t),n.collapse(e,e.childNodes.length),this._iframe.contentWindow.focus()},WYMeditor.WymClassSafari.prototype.openBlockTag=function(e,t){t=this.validator.getValidTagAttributes(e,t);if("span"==e&&t.style){var n=this.getTagForStyle(t.style);if(!n)return;this._tag_stack.pop();e=n;this._tag_stack.push(n),t.style="","string"==typeof t.class&&(t.class=t.class.replace(/apple-style-span/gi,""))}this.output+=this.helper.tag(e,t,!0)},WYMeditor.WymClassSafari.prototype.getTagForStyle=function(e){return/bold/.test(e)?"strong":/italic/.test(e)?"em":/sub/.test(e)?"sub":!!/super/.test(e)&&"sup"},window.WYMeditor=WYMeditor}).call(this,__webpack_require__(0))},function(e,t){var n={__root:{"Analyze Data":!1,Workflow:!1,"Shared Data":!1,"Data Libraries":!1,Histories:!1,Workflows:!1,Visualizations:!1,Pages:!1,Visualization:!1,"New Track Browser":!1,"Saved Visualizations":!1,"Interactive Environments":!1,Admin:!1,Help:!1,Support:!1,Search:!1,"Mailing Lists":!1,Videos:!1,Wiki:!1,"How to Cite Galaxy":!1,"Interactive Tours":!1,User:!1,Login:!1,Register:!1,"Login or Register":!1,"Logged in as":!1,Preferences:!1,"Custom Builds":!1,Logout:!1,"Saved Histories":!1,"Saved Datasets":!1,"Saved Pages":!1,"Account and saved data":!1,"Account registration or login":!1,"Support, contact, and community":!1,"Administer this Galaxy":!1,"Visualize datasets":!1,"Access published resources":!1,"Chain tools into workflows":!1,"Analysis home view":!1,"History Lists":!1,"Histories Shared with Me":!1,"Current History":!1,"Create New":!1,"Copy History":!1,"Share or Publish":!1,"Show Structure":!1,"Extract Workflow":!1,"Delete Permanently":!1,"Dataset Actions":!1,"Copy Datasets":!1,"Dataset Security":!1,"Resume Paused Jobs":!1,"Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":!1,"Delete Hidden Datasets":!1,"Purge Deleted Datasets":!1,Downloads:!1,"Export Tool Citations":!1,"Export History to File":!1,"Other Actions":!1,"Import from File":!1,Webhooks:!1,"This history is empty":!1,"No matching datasets found":!1,"An error occurred while getting updates from the server":!1,"Please contact a Galaxy administrator if the problem persists":!1,"search datasets":!1,"You are currently viewing a deleted history!":!1,"You are over your disk quota":!1,"Tool execution is on hold until your disk usage drops below your allocated quota":!1,All:!1,None:!1,"For all selected":!1,"Edit history tags":!1,"Edit history Annotation":!1,"Click to rename history":!1,"Operations on multiple datasets":!1,"Hide datasets":!1,"Unhide datasets":!1,"Delete datasets":!1,"Undelete datasets":!1,"Permanently delete datasets":!1,"This will permanently remove the data in your datasets. Are you sure?":!1,Dataset:!1,Annotation:!1,"This history is empty. Click 'Get Data' on the left tool menu to start":!1,"You must be logged in to create histories":!1,"Unable to purge dataset":!1,"Cannot display datasets removed from disk":!1,"This dataset must finish uploading before it can be viewed":!1,"This dataset is not yet viewable":!1,"View data":!1,Download:!1,"Download dataset":!1,"Additional files":!1,"View details":!1,"This is a new dataset and not all of its data are available yet":!1,"You do not have permission to view this dataset":!1,"The job creating this dataset was cancelled before completion":!1,"This job is waiting to run":!1,"This dataset is currently uploading":!1,"Metadata is being auto-detected":!1,"This job is currently running":!1,'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':!1,"An error occurred with this dataset":!1,"No data":!1,"An error occurred setting the metadata for this dataset":!1,"There was an error getting the data for this dataset":!1,"This dataset has been deleted and removed from disk":!1,"This dataset has been deleted":!1,"This dataset has been hidden":!1,format:!1,database:!1,"Edit attributes":!1,"Cannot edit attributes of datasets removed from disk":!1,"Undelete dataset to edit attributes":!1,"This dataset must finish uploading before it can be edited":!1,"This dataset is not yet editable":!1,Delete:!1,"Dataset is already deleted":!1,"View or report this error":!1,"Run this job again":!1,Visualize:!1,"Visualize in":!1,"Undelete it":!1,"Permanently remove it from disk":!1,"Unhide it":!1,"You may be able to":!1,"set it manually or retry auto-detection":!1,"Edit dataset tags":!1,"Edit dataset annotation":!1,"Tool Help":!1,"Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Allowlist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":!1,"Show/Hide Scratchbook":!1,Tags:!1,"Edit annotation":!1,Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":!1,"Your email address":!1,Report:!1,"Error Report":!1,"Dataset details":!1,"Save permissions.":!1,"Change the datatype to a new type.":!1,"Convert the datatype to a new format.":!1,"Save attributes of the dataset.":!1,"Change data type":!1,"Edit dataset attributes":!1,"Save permissions":!1,"Manage dataset permissions":!1,"Change datatype":!1,"Convert datatype":!1,"Convert to new format":!1,Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":!1,"Location Details":!1,"Deleting selected items":!1,"Please select folders or files":!1,"Please enter paths to import":!1,"Adding datasets from your history":!1,"Create New Folder":!1,"Create New Library":!1,Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__ja:{"Analyze Data":"",Workflow:"","Shared Data":"","Data Libraries":"",Histories:"",Workflows:"",Visualizations:"",Pages:"",Visualization:"","New Track Browser":" Track Browser","Saved Visualizations":"","Interactive Environments":"",Admin:"",Help:"",Support:"",Search:"","Mailing Lists":"",Videos:"","How to Cite Galaxy":"Galaxy ","Interactive Tours":"",User:"",Login:"",Register:"","Login or Register":"/",Preferences:"","Custom Builds":"",Logout:"","Saved Histories":"","Saved Datasets":"","Saved Pages":"","Account and saved data":"","Account registration or login":"","Support, contact, and community":"","Administer this Galaxy":" Galaxy ","Visualize datasets":"","Access published resources":"","Chain tools into workflows":"","Analysis home view":"","History Lists":"","Histories Shared with Me":"","Current History":"","Create New":"","Copy History":"","Share or Publish":"","Show Structure":"","Extract Workflow":"","Delete Permanently":"","Dataset Actions":"","Copy Datasets":"","Dataset Security":"","Resume Paused Jobs":"","Collapse Expanded Datasets":"","Unhide Hidden Datasets":"","Delete Hidden Datasets":"","Purge Deleted Datasets":"",Downloads:"","Export Tool Citations":"","Export History to File":"","Other Actions":"","Import from File":"",Webhooks:"Webhooks","This history is empty":"","No matching datasets found":"","Search datasets":"","You are currently viewing a deleted history!":"","You are over your disk quota":"",All:"",None:"","For all selected":"","Edit history tags":"","Edit history annotation":"","Click to rename history":"","Operations on multiple datasets":"","Permanently delete datasets":"","This will permanently remove the data in your datasets. Are you sure?":"",Dataset:"","This history is empty. Click 'Get Data' on the left tool menu to start":" '' ","You must be logged in to create histories":"","View data":"",Download:"","Download dataset":"","View details":"","This job is waiting to run":"","This job is currently running":"","An error occurred with this dataset":"","No data":"","This dataset has been deleted and removed from disk":"","This dataset has been deleted":"","This dataset has been hidden":"",format:"",database:"","Edit attributes":"",Delete:"","View or report this error":"","Run this job again":"",Visualize:"","Undelete it":"","Permanently remove it from disk":"","Unhide it":"","Search Tool Shed":"Tool Shed ","Search Tool Shed (Beta)":"Tool Shed (Beta) ","Monitor installing repositories":"","Manage installed tools":"","Reset metadata":"","Download local tool":"","Tool lineage":"","Reload a tool's configuration":"","Review tool migration stages":"","View Tool Error Logs":"","Manage Allowlist":"","Manage Tool Dependencies":"",Users:"",Groups:"","API keys":"API ","Impersonate a user":"",Data:"",Quotas:"",Roles:"","Local data":"","Form definitions":"",Administration:"",Server:"","Tools and Tool Shed":" Tool Shed","User Management":"","Form Definitions":"","Your workflows":""},__fr:{"Analyze Data":"Analyse de donnes",Workflow:"Workflow","Shared Data":"Donnes partages","Data Libraries":"Bibliothque de donnes",Histories:!1,Workflows:!1,Visualizations:"Visualisations",Pages:"Pages",Visualization:!1,"New Track Browser":"Nouveau Navigateur de Tracks/Pistes","Saved Visualizations":"Visualisations sauvegardes","Interactive Environments":"Environnements interactifs",Admin:"Admin",Help:"Aide",Support:"Assistance",Search:!1,"Mailing Lists":"Liste de diffusion",Videos:"Vidos",Wiki:"Documentations","How to Cite Galaxy":"Comment citer Galaxy","Interactive Tours":"Guides interactifs",User:"Utilisateur",Login:"Authentification",Register:"Enregistrement","Login or Register":"Authentification et Enregistrement","Logged in as":"Authentifi en tant que",Preferences:"Prfrences","Custom Builds":"Mes gnomes Builds de rfrence",Logout:"Dconnexion","Saved Histories":"Historiques sauvegards","Saved Datasets":"Jeux de donnes sauvegards","Saved Pages":"Pages sauvegardes","Account and saved data":"Compte et donnes sauvegardes","Account registration or login":"Enregistrement ou authentification","Support, contact, and community":"Support,contact et communaut","Administer this Galaxy":"Outils Admin","Visualize datasets":"Visualiser les jeux de donnes","Access published resources":"Accder aux donnes partages","Chain tools into workflows":"Relier outils dans un workflow","Analysis home view":"Accueil analyse de donnes","History Lists":"Tableaux des historiques","Histories Shared with Me":"Historiques partags avec moi","Current History":"Cet Historique","Create New":"Crer un nouveau","Copy History":"Copier l'Historique","Share or Publish":"Partager et publier","Show Structure":"Montrer la structure","Extract Workflow":"Extraire un Workflow","Delete Permanently":"Supprimer dfinitivement","Dataset Actions":"Actions sur les jeux de donnes","Copy Datasets":"Copier des jeux de donnes","Dataset Security":"Permissions/Scurit","Resume Paused Jobs":"Reprendre les processus en pause","Collapse Expanded Datasets":"Rduire les donnes tendues","Unhide Hidden Datasets":"Afficher les donnes caches","Delete Hidden Datasets":"Supprimer les donnes caches","Purge Deleted Datasets":"Purger les donnes supprimes",Downloads:"Tlcharger","Export Tool Citations":"Exporter les citations des outils","Export History to File":"Exporter l'Historique dans un fichier","Other Actions":"Autres actions","Import from File":"Importer depuis un fichier",Webhooks:"Webhooks","This history is empty":"Cet historique est vide","No matching datasets found":"Aucunes donnes correspondantes n'ont t trouves","An error occurred while getting updates from the server":"Une erreur s'est produite lors de la rception des donnes depuis le serveur","Please contact a Galaxy administrator if the problem persists":"Veuillez contacter un administrateur de l'instance Galaxy si ce problme persiste","search datasets":"Rechercher des donnes","You are currently viewing a deleted history!":"Vous consultez actuellement un historique supprim!","You are over your disk quota":"Vous avez dpass votre quota d'espace disque","Tool execution is on hold until your disk usage drops below your allocated quota":"L'excution de l'outil est en attente tant que votre utilisation d'espace disque dpasse le quota attribu",All:"Tout",None:"Aucun","For all selected":"Pour toute la slection","Edit history tags":"Editer les mots-cls de l'historique","Edit history Annotation":"Editer l'annotation de l'historique","Click to rename history":"Cliquer pour renommer l'historique","Operations on multiple datasets":"Oprer sur plusieurs jeux de donnes en mme temps","Hide datasets":"Cacher les jeux de donnes","Unhide datasets":"Afficher les jeux de donnes cachs","Delete datasets":"Supprimer les jeux de donnes","Undelete datasets":"Restaurer les jeux de donnes supprims","Permanently delete datasets":"Supprimer dfinitivement les jeux de donnes","This will permanently remove the data in your datasets. Are you sure?":"Cela supprimera de manire permanente les donnes de votre historique. tes-vous certain?",Dataset:"Jeu de donnes",Annotation:"Annotation","This history is empty. Click 'Get Data' on the left tool menu to start":"Cet historique est vide. Cliquer sur 'Get Data' au niveau du menu d'outils  gauche pour dmarrer","You must be logged in to create histories":"Vous devez tre connect pour crer un historique","load your own data":"Charger vos propres donnes","get data from an external source":"Charger des donnes depuis une source externe","Include Deleted Datasets":"Inclure les jeux de donnes supprims","Include Hidden Datasets":"Inclure les jeux de donnes cachs","Unable to purge dataset":"Impossible de purger le jeu de donnes","Cannot display datasets removed from disk":"Impossible de visualiser les jeux de donnes supprims du disque","This dataset must finish uploading before it can be viewed":"Le jeu de donnes doit tre totalement tlvers avant de pouvoir tre visualiser","This dataset is not yet viewable":"Ce jeu de donnes n'est pas visualisable","View data":"Voir les donnes",Download:!1,"Download dataset":"Tlcharger le jeu de donnes","Additional files":"Fichiers additionnels","View details":"Voir les dtails","This is a new dataset and not all of its data are available yet":"Il s'agit d'un nouveau jeu de donnes et seule une partie des donnes est accessible pour le moment","You do not have permission to view this dataset":"Vous n'avez pas la permission de voir ce jeu de donnes","The job creating this dataset was cancelled before completion":"Le processus  l'origine de ce jeu de donnes a t annul prmaturment","This job is waiting to run":"Ce calcul est en attente de traitement","This dataset is currently uploading":"Ce jeu de donnes est en cours de tlversement","Metadata is being auto-detected":"Les mtadonnes sont auto-dtectes","This job is currently running":"Le traitement est en cours",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Ce traitement est en pause. Utilisez le "Relancer les traitements en pause" dans le menu d\'historique pour le relancer',"An error occurred with this dataset":"Une erreur est survenue avec ce jeu de donnes","No data":"Aucune donne","An error occurred setting the metadata for this dataset":"Une erreur est survenue pendant la rcupration des mtadonnes de ce jeu de donnes","There was an error getting the data for this dataset":"Il est survenu une erreur durant la rcupration du contenu de ce jeu de donnes","This dataset has been deleted and removed from disk":"Ce jeu de donnes a t supprim et effac du disque","This dataset has been deleted":"Ce jeu de donnes a t supprim","This dataset has been hidden":"Ce jeu de donnes a t cach",format:"format",database:"gnome de rfrence","Edit attributes":"Editer les attributs","Cannot edit attributes of datasets removed from disk":"Impossible d'diter les attributs de jeux de donnes effacs du disque","Undelete dataset to edit attributes":"Restaurer le jeu de donnes pour en diter les attributs","This dataset must finish uploading before it can be edited":"Ce jeu de donnes doit tre entirement tlvers avant toute modification","This dataset is not yet editable":"Ce jeu de donnes n'est pas encore ditable",Delete:"Supprimer","Dataset is already deleted":"Le jeu de donnes est dj supprim","View or report this error":"Voir ou remonter cette erreur","Run this job again":"Excuter ce traitement  nouveau",Visualize:!1,"Visualize in":"Visualiser via","Undelete it":"Restaurer","Permanently remove it from disk":"Supprimer dfinitivement du disque","Unhide it":"Rendre visible","You may be able to":"Vous devriez tre en mesure de","set it manually or retry auto-detection":"Traitez le manuellement ou retenter la dtection automatique","Edit dataset tags":"Editer les mots-cls du jeu de donnes","Edit dataset annotation":"Editer les annotations du jeu de donnes","Tool Help":"Aide outil","Reset passwords":"Rinitialiser les mots de passe","Search Tool Shed":"Chercher via un Tool Shed","Monitor installing repositories":"Contrler les dpts installs","Manage installed tools":"Grer les outils installs","Reset metadata":"Rinitialiser les mtadonnes","Download local tool":"Tlcharger un outil en local","Tool lineage":"Affiliation des outils","Reload a tool's configuration":"Recharger une configuration d'outils","Review tool migration stages":"Vrifier les tapes de migration d'outils","View Tool Error Logs":"Voir les logs d'erreur d'outils","Manage Allowlist":"Grer la liste autorise d'outils graphiques","Manage Tool Dependencies":"Grer les dpendances d'outils",Users:!1,Groups:!1,"API keys":"Cl d'API","Impersonate a user":"Prendre la place d'un utilisateur",Data:!1,Quotas:!1,Roles:!1,"Local data":"Donnes locales","Form Definitions":"Dfinitions de formulaires","Enable/Disable Scratchbook":"Activer/Dsactiver la visu Scratchbook","Show/Hide Scratchbook":"Montrer/cacher la visu Scratchbook",Tags:"Mots-cls","Edit annotation":"Editer les annotations",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"N'importe quel commentaire que vous pouvez fournir concernant ce que vous faisiez lorsque le bug est apparu","Your email address":"Votre adresse e-mail",Report:!1,"Error Report":"Rapport d'erreur","Dataset details":"Dtails du jeu de donnes","Save permissions.":"Sauvegarder les permissions","Change the datatype to a new type.":"Changer en un nouveau format de donnes","Convert the datatype to a new format.":"Convertir le format de donnes","Save attributes of the dataset.":"Sauvegarder les attributs du jeu de donnes","Change data type":"Changer le format de donnes","Edit dataset attributes":"Modifier les attributs du jeu de donnes","Save permissions":"Sauvegarder les permissions","Manage dataset permissions":"Grer les permissions sur les jeux de donnes","Change datatype":"Changer le format de donnes","Convert datatype":"Convertir le format de donnes","Convert to new format":"Convertir en un nouveau format de donnes",Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":"Importer dans l'historique","Location Details":"Dtails de localisation","Deleting selected items":"Suppression des objets slectionns","Please select folders or files":"S'il vous plat slectionnez des dossiers ou fichiers","Please enter paths to import":"S'il vous plat entrer des chemins/URLs  importer","Adding datasets from your history":"Ajouts de jeux de donnes  partir de votre historique","Create New Folder":"Crer un nouveau dossier","Create New Library":"Crer une nouvelle bibliothque",Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Enable or disable the communication feature to chat with other users.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change communication settings":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__zh:{"Analyze Data":"",Workflow:"","Shared Data":"","Data Libraries":"","Published Histories":"","Published Workflows":"","Published Visualizations":"","Published Pages":"",Visualization:"","New Track Browser":" Track Browser","Saved Visualizations":"","Create Visualization":"","Interactive Environments":"",Admin:"",Help:"",Support:"",Search:"","Mailing Lists":"",Videos:"",Wiki:!1,"How to Cite Galaxy":"","Interactive Tours":"",User:"",Login:"",Register:"","Login or Register":"","Logged in as":"",Preferences:"","Custom Builds":"",Logout:"","Saved Histories":"","Saved Datasets":"","Saved Pages":"",Datasets:"",Histories:"","Histories shared with me":"",Pages:"",Visualizations:"","Account and saved data":"","Account registration or login":"","Support, contact, and community":"","Administer this Galaxy":" Galaxy","Visualize datasets":"","Access published resources":"","Chain tools into workflows":"","Analysis home view":"",History:"","History Actions":"","History Lists":"","Histories Shared with Me":"","Current History":"","Create New":"",Copy:"","Share or Publish":"","Show Structure":"","Extract Workflow":"","Set Permissions":"","Make Private":"",Delete:"","Delete Permanently":"","Dataset Actions":"","Copy Datasets":"","Dataset Security":"","Resume Paused Jobs":"","Collapse Expanded Datasets":"","Unhide Hidden Datasets":"","Delete Hidden Datasets":"","Purge Deleted Datasets":"",Downloads:"","Export Tool Citations":"","Export History to File":"","Other Actions":"","Import from File":"",Webhooks:!1,"This history is empty":"","No matching datasets found":"","An error occurred while getting updates from the server":"","Please contact a Galaxy administrator if the problem persists":" Galaxy ","An error was encountered while <% where %>":": <% where %>, ","search datasets":"","You are currently viewing a deleted history!":"","You are over your disk quota":"","Tool execution is on hold until your disk usage drops below your allocated quota":"",All:"",None:"","For all selected":"","Edit history tags":"","Edit history Annotation":"","Click to rename history":"","Operations on multiple datasets":"","Hide datasets":"","Unhide datasets":"","Delete datasets":"","Undelete datasets":"","Permanently delete datasets":"","This will permanently remove the data in your datasets. Are you sure?":"",Dataset:"",Annotation:"","This history is empty. Click 'Get Data' on the left tool menu to start":"","You must be logged in to create histories":"","You can <% loadYourOwn %> or <% externalSource %>":" <% loadYourOwn %>  <% externalSource %>","You can ":" "," or ":"  ","load your own data":"","get data from an external source":".","Include Deleted Datasets":"","Include Hidden Datasets":"","Unable to purge dataset":"","Cannot display datasets removed from disk":"","This dataset must finish uploading before it can be viewed":", ","This dataset is not yet viewable":"","View data":"",Download:"","Download dataset":"","Additional files":"","View details":"","This is a new dataset and not all of its data are available yet":"","You do not have permission to view this dataset":"","The job creating this dataset was cancelled before completion":"","This job is waiting to run":"","This dataset is currently uploading":"","Metadata is being auto-detected":"","This job is currently running":"",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':' "" ',"An error occurred with this dataset":"","No data":"","An error occurred setting the metadata for this dataset":"","There was an error getting the data for this dataset":"","This dataset has been deleted and removed from disk":"","This dataset has been deleted":"","This dataset has been hidden":"",format:"",database:"","Edit attributes":"","Cannot edit attributes of datasets removed from disk":"","Undelete dataset to edit attributes":"","This dataset must finish uploading before it can be edited":", ","This dataset is not yet editable":"","Dataset is already deleted":"","View or report this error":"","Run this job again":"",Visualize:"","Visualize in":"","Undelete it":"","Permanently remove it from disk":"","Unhide it":"","You may be able to":"","set it manually or retry auto-detection":"","Edit dataset tags":"","Edit dataset annotation":"","Tool Help":"","Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Display Whitelist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":"/ Scratchbook","Show/Hide Scratchbook":"/ Scratchbook",Tags:"","Edit annotation":"",Subscript:"",Superscript:"",Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":" bug ","Your email address":"",Report:"","Error Report":"","Dataset details":"","Save permissions.":"","Change the datatype to a new type.":"","Convert the datatype to a new format.":"","Save attributes of the dataset.":"","Change data type":"","Edit dataset attributes":"","Save permissions":"","Manage dataset permissions":"","Change datatype":"","Convert datatype":"","Convert to new format":"",Save:"b",Permissions:"",Datatypes:"",Convert:"",Attributes:"","Import into History":"","Location Details":"","Deleting selected items":"","Please select folders or files":"","Please enter paths to import":"","Adding datasets from your history":"","Create New Folder":"","Create New Library":"",Tours:"","Click here to sign out of all sessions.":"","Add or remove custom builds using history datasets.":"","Associate OpenIDs with your account.":" OpenIDs ","Customize your Toolbox by displaying or omitting sets of Tools.":"","Access your current API key or create a new one.":" API","Enable or disable the communication feature to chat with other users.":"","Allows you to change your login credentials.":"","User Preferences":"","Sign out":"","Manage custom builds":"","Manage OpenIDs":" OpenIDs","Manage Toolbox filters":"","Manage API key":" API ","Set dataset permissions for new histories":"","Change communication settings":"","Change password":"","Manage information":"","Configured Galaxy Tool Sheds":" Galaxy Tool Sheds","Repository Installation Queue":"","Repository Status":"","Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:"","Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":"",Execute:"","Tool request failed":"","Email notification":"","Send an email notification when the job completes.":"",Workflows:"","Copy and insert individual steps":!1,Warning:"","An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,"Browse GenomeSpace":!1,Browse:!1,Error:"",Close:"","Download from web or upload from disk":"",Collection:"",Composite:"",Regular:"","Upload configuration":"","FTP files":"FTP ",Reset:"",Pause:"",Start:"","Choose FTP file":" FTP ","Choose local file":"",Build:"","Choose FTP files":" FTP ","Choose local files":"","Paste/Fetch data":"",Select:"","Create a collection of paired datasets":"","View all histories":"","History options":"","Refresh history":"","View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage whitelist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:"","Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":"","Delete custom build.":"","Provide the data source.":"","Next in History":"","Previous in History":"","Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":" URL ","tool tooltip":!1,ja:!0,fr:!0,zh:!0},__es:{"Analyze Data":"Analizar Datos",Workflow:"Flujo de Trabajo","Shared Data":"Datos Compartidos","Data Libraries":"Bibliotecas de Datos",Histories:"Historiales",Workflows:"Flujos de Trabajo",Visualizations:"Visualizaciones",Pages:"Pginas",Visualization:"Visualizacin","New Track Browser":"Nuevo Navegador de Pistas","Saved Visualizations":"Visualizaciones Guardadas","Interactive Environments":"Entornos Interactivos",Admin:"Administracin",Help:"Ayuda",Support:"Soporte",Search:"Buscar","Mailing Lists":"Listas de Correo",Videos:"Videos",Wiki:"Wiki","How to Cite Galaxy":"Cmo citar Galaxy","Interactive Tours":"Tours Interactivos",User:"Usuario",Login:"Iniciar sesin",Register:"Registro","Login or Register":"Iniciar sesin o Registrarse","Logged in as":"Se ha conectado como",Preferences:"Preferencias","Custom Builds":"Construcciones personalizadas",Logout:"Cerrar Sesin","Saved Histories":"Historiales Guardados","Saved Datasets":"Conjuntos de Datos Guardados","Saved Pages":"Pginas Guardadas","Account and saved data":"Cuenta y Datos Guardados","Account registration or login":"Crear Cuenta o Iniciar Sesin","Support, contact, and community":"Apoyo, contacto y comunidad","Administer this Galaxy":"Administrar esta instancia de Galaxy","Visualize datasets":"Visualizar conjuntos de datos","Access published resources":"Acceder a los recursos publicados","Chain tools into workflows":"Encadenar herramientas en flujos de trabajo","Analysis home view":"Vista de inicio del anlisis","History Lists":"Listas de historiales","Histories Shared with Me":"Historiales compartidos conmigo","Current History":"Historial actual","Create New":"Crear nuevo","Copy History":"Copiar Historial","Share or Publish":"Compartir o Publicar","Show Structure":"Mostrar Estructura","Extract Workflow":"Extraer Flujo de Trabajo","Delete Permanently":"Borrar Permanentemente","Dataset Actions":"Acciones de Conjuntos de Datos","Copy Datasets":"Copiar Conjuntos de Datos","Dataset Security":"Seguridad del Conjunto de Datos","Resume Paused Jobs":"Reanudar Trabajos en Pausa","Collapse Expanded Datasets":"Contraer Conjuntos de Datos Expandidos","Unhide Hidden Datasets":"Mostrar Conjuntos de Datos Ocultos","Delete Hidden Datasets":"Eliminar Conjuntos de Datos Ocultos","Purge Deleted Datasets":"Eliminar Definitivamente los Conjuntos de Datos Eliminados",Downloads:"Descargas","Export Tool Citations":"Exportar las Citas de la Herramienta","Export History to File":"Exportar Historial a un Archivo","Other Actions":"Otras Acciones","Import from File":"Importar desde Archivo",Webhooks:"WebHooks","This history is empty":"Este historial est vaco","No matching datasets found":"No se encontraron conjuntos de datos coincidentes","An error occurred while getting updates from the server":"Se ha producido un error al obtener actualizaciones desde el servidor","Please contact a Galaxy administrator if the problem persists":"Por favor, contacte a un administrador de Galaxy si el problema persiste","search datasets":"buscar conjuntos de datos","You are currently viewing a deleted history!":"Ests viendo un historial eliminado!","You are over your disk quota":"Has sobrepasado tu espacio disponible de disco","Tool execution is on hold until your disk usage drops below your allocated quota":"La ejecucin de la herramienta est en espera hasta que el uso del disco caiga por debajo de tu espacio de disco disponible",All:"Todas",None:"Ninguna","For all selected":"Para todos los seleccionados","Edit history tags":"Editar etiquetas de historial","Edit history Annotation":"Editar anotacin del historial","Click to rename history":"Haz clic para cambiar el nombre del historial","Operations on multiple datasets":"Operaciones en conjuntos de datos mltiples","Hide datasets":"Ocultar conjuntos de datos","Unhide datasets":"Mostrar conjuntos de datos","Delete datasets":"Borrar conjuntos de datos","Undelete datasets":"Recuperar conjuntos de datos","Permanently delete datasets":"Eliminar permanentemente conjuntos de datos","This will permanently remove the data in your datasets. Are you sure?":"Esta accin eliminar datos permanentemente. Ests seguro que deseas continuar?",Dataset:"Conjunto de datos",Annotation:"Anotacin","This history is empty. Click 'Get Data' on the left tool menu to start":"Este historial est vaco. Haz clic en 'Obtener datos' en el men de herramientas de la izquierda para iniciar","You must be logged in to create histories":"Debes haber iniciado sesin para crear historiales","Unable to purge dataset":"No se puede eliminar permanentemente el conjunto de datos","Cannot display datasets removed from disk":"No se pueden mostrar conjuntos de datos que han sido eliminados del disco","This dataset must finish uploading before it can be viewed":"Este conjunto de datos debe terminar de cargar antes de visualizarlo","This dataset is not yet viewable":"Este conjunto de datos an no se puede ver","View data":"Ver datos",Download:"Descargar","Download dataset":"Descargar conjunto de datos","Additional files":"Archivos adicionales","View details":"Ver detalles","This is a new dataset and not all of its data are available yet":"Este es un nuevo conjunto de datos y an no est completamente disponible","You do not have permission to view this dataset":"No tienes permiso para ver este conjunto de datos","The job creating this dataset was cancelled before completion":"El trabajo que estaba creando este conjunto de datos se cancel antes de completarse","This job is waiting to run":"Este trabajo est a la espera de ser ejecutado","This dataset is currently uploading":"Este conjunto de datos se est cargando actualmente","Metadata is being auto-detected":"Se han detectado metadatos automticamente","This job is currently running":"Este trabajo se est siendo ejecutando actualmente",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Este trabajo est en pausa. Utilice la opcin "Reanudar trabajos en pausa" en el men de historial para reanudar',"An error occurred with this dataset":"Se ha producido un error con este conjunto de datos","No data":"Sin datos","An error occurred setting the metadata for this dataset":"Se ha producido un error al establecer los metadatos de este conjunto de datos","There was an error getting the data for this dataset":"Hubo un error al extraer el contenido de este conjunto de datos","This dataset has been deleted and removed from disk":"Este conjunto de datos ha sido eliminado permanentemente del disco","This dataset has been deleted":"Este conjunto de datos ha sido eliminado","This dataset has been hidden":"Este conjunto de datos ha sido ocultado",format:"formato",database:"base de datos","Edit attributes":"Editar atributos","Cannot edit attributes of datasets removed from disk":"No se pueden editar los atributos de conjuntos de datos que han sido eliminados del disco","Undelete dataset to edit attributes":"Recuperar el conjunto de datos para editar atributos","This dataset must finish uploading before it can be edited":"Este conjunto de datos debe terminar de cargar antes de que pueda ser editado","This dataset is not yet editable":"Este conjunto de datos an no se puede editar",Delete:"Borrar","Dataset is already deleted":"El conjunto de datos ya ha sido eliminado","View or report this error":"Ver o informar de este error","Run this job again":"Ejecutar este trabajo de nuevo",Visualize:"Visualizar","Visualize in":"Visualizar en","Undelete it":"Recuperar","Permanently remove it from disk":"Eliminar permanentemente del disco","Unhide it":"Mostrar","You may be able to":"Podrs","set it manually or retry auto-detection":"configurar manualmente o volver a intentar la deteccin automtica","Edit dataset tags":"Editar etiquetas del conjunto de datos","Edit dataset annotation":"Editar anotacin del conjunto de datos",Tags:"Etiquetas","Edit annotation":"Editar anotacin","Tool Help":"Ayuda de herramienta","Reset passwords":"Restablecer contrasea","Search Tool Shed":"Buscar en el Tool Shed","Monitor installing repositories":"Monitorear instalacin de repositorios","Manage installed tools":"Administrar herramientas instaladas","Reset metadata":"Reconfigurar metadatos","Download local tool":"Descargar herramienta local","Tool lineage":"Linaje de herramientas","Reload a tool's configuration":"Volver a cargar la configuracin de una herramienta","Review tool migration stages":"Revisar las etapas de migracin de la herramienta","View Tool Error Logs":"Ver registros de error de la herramienta","Manage Allowlist":"Administrar lista de permisos","Manage Tool Dependencies":"Administrar dependencias de herramienta",Users:"Usuarios",Groups:"Grupos","API keys":"Llaves API","Impersonate a user":"Acceder como otro usuario",Data:!1,Quotas:!1,Roles:!1,"Local data":"Datos locales","Form Definitions":"Definiciones de formulario","Enable/Disable Scratchbook":"Habilitar/Deshabilitar Scratchbook","Show/Hide Scratchbook":"Mostrar/Ocultar Scratchbook",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"Cualquier comentario adicional que puedas proporcionar sobre lo que estabas haciendo en el momento que se produjo el error.","Your email address":"Tu direccin de correo electrnico",Report:!1,"Error Report":"Reporte de error","Dataset details":"Detalles del conjunto de datos","Save permissions.":"Guardar permisos","Change the datatype to a new type.":"Cambiar el tipo de datos a uno nuevo","Convert the datatype to a new format.":"Convertir el tipo de datos a un formato nuevo","Save attributes of the dataset.":"Guardar los atributos del conjunto de datos","Change data type":"Cambiar el tipo de datos","Edit dataset attributes":"Editar atributos del conjunto de datos","Save permissions":"Guardar permisos","Manage dataset permissions":"Administrar permisos del conjunto de datos","Change datatype":"Cambiar tipo de datos","Convert datatype":"Convertir tipo de datos","Convert to new format":"Convertir a formato nuevo",Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":"Importar al historial","Location Details":"Detalles de ubicacin","Deleting selected items":"Eliminar elementos seleccionados","Please select folders or files":"Por favor, seleccione directorios o archivos","Please enter paths to import":"Por favor, introduce las rutas a importar","Adding datasets from your history":"Agregar conjuntos de datos desde tu historial","Create New Folder":"Crear Nuevo Directorio","Create New Library":"Crear Nueva Biblioteca",Tours:!1,"Click here to sign out of all sessions.":"Haz clic aqu para salir de todas las sesiones","Add or remove custom builds using history datasets.":"Agregar o eliminar construcciones personalizadas usando conjuntos de datos del historial","Associate OpenIDs with your account.":"Asociar OpenIDs a su cuenta","Customize your Toolbox by displaying or omitting sets of Tools.":"Personalizar Toolbox para mostrar u omitir conjuntos de herramientas","Access your current API key or create a new one.":"Acceder a su clave API actual o crear una nueva","Allows you to change your login credentials.":"Permitir modificar tus credenciales de inicio de sesin ","User Preferences":"Preferencias de usuario","Sign out":"Cerrar sesin","Manage custom builds":"Administrar construcciones personalizadas","Manage OpenIDs":"Administrar OpenIDs","Manage Toolbox filters":"Administrar filtros de Toolbox","Manage API key":"Administrar clave API","Set dataset permissions for new histories":"Establecer permisos de conjuntos de datos para historiales nuevos","Change password":"Cambiar contrasea","Manage information":"Administrar informacin","Configured Tool Sheds":"Tool Sheds configurados","Repository Queue":"Cola de repositorio","Repository Status":"Estado del repositorio","Workflows Missing Tools":"Flujos de trabajo a los que les faltan herramientas","See in Tool Shed":"Ver en Tool Shed",Requirements:!1,Share:!1,"Workflow submission failed":"Error en el envo de flujo de trabajo","Run workflow":"Ejecutar flujo de trabajo","Job submission failed":"Error en envo de trabajo",Execute:!1,"Tool request failed":"Error en solicitud de herramienta","Copy and insert individual steps":"Copiar e insertar pasos individuales",Warning:!1,"An email notification will be sent when the job has completed.":"Se enviar una notificacin por correo electrnico cuando el trabajo haya sido completado","Add a step label.":"Agregar una etiqueta de paso","Assign columns":"Asignar columnas","Delete this repeat block":"Borrar este bloque repetido",placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":"Descargar de la red o cargar desde disco",Collection:!1,Composite:!1,Regular:!1,"Upload configuration":"Cargar configuracin","FTP files":"Archivos FTP",Reset:!1,Pause:!1,Start:!1,"Choose FTP file":"Elegir archivo FTP","Choose local file":"Elegir archivo local",Build:!1,"Choose FTP files":"Elegir archivos FTP","Choose local files":"Elegir archivos locales",Select:!1,"Create a collection of paired datasets":"Crear una coleccin de conjuntos de datos pareados","View all histories":"Ver todos los historiales","History options":"Opciones de historial","Refresh history":"Actualizar historial","View error logs":"Ver registros de error","View migration stages":"Ver etapas de migracin","View lineage":"Ver linaje","Manage dependencies":"Administrar dependencias","Manage allowlist":"Administrar lista de permitidos","Manage metadata":"Administrar metadatos","Manage tools":"Administrar herramientas","Monitor installation":"Monitorear instalacin","Install new tools":"Instalar nuevas herramientas","Tool Management":"Gestin de herramienta",Forms:!1,"User Management":"Gestin de usuario","Manage jobs":"Administrar trabajos","Display applications":"Mostrar aplicaciones","Data tables":"Tablas de datos","Data types":"Tipos de datos",Server:!1,"Could Not Save":"No se pudo guardar","Saving...":"Guardando",Settings:!1,"Add tracks":"Agregar pistas","New Visualization":"Nueva visualizacin","Add Data to Saved Visualization":"Agregar datos a visualizacin guardada","Close visualization":"Cerrar visualizacin",Circster:!1,Bookmarks:!1,"Add group":"Agregar grupo","Remove parameter from tree":"Eliminar parmetro del rbol","Add parameter to tree":"Agregar parmetro al rbol",Remove:!1,"Select datasets for new tracks":"Seleccionar conjuntos de datos para nuevas pistas",Libraries:!1,"Zoom out":"Alejar","Zoom in":"Acercar","Phyloviz Help":"Ayuda de PhyloViz","Save visualization":"Guardar visualizacin","PhyloViz Settings":"Ajustes de PhyloViz",Title:!1,"Filtering Dataset":"Filtrando conjunto de datos","Filter Dataset":"Filtrar conjunto de datos","Show individual tracks":"Mostrar pistas individuales","Trackster Error":"Error de Trackster","Tool parameter space visualization":"Visualizacin del espacio de parmetros de la herramienta",Tool:!1,"Set as overview":"Establecer como descripcin general","Set display mode":"Establecer modo de visualizacin",Filters:!1,"Show composite track":"Mostrar pista compuesta","Edit settings":"Editar configuracin","Test title":!1,"Test Title":"Ttulo de prueba","Test button":"Botn de prueba",title:!1,"Create new Build":"Crear nueva construccin","Delete custom build.":"Eliminar construccin personalizada","Provide the data source.":"Proporcionar la fuente de datos","Next in History":"Siguiente en historial","Previous in History":"Anterior en historial","Chat online":"Conversar en lnea","Multiple collections":"Varias colecciones","Dataset collections":"Colecciones de conjuntos de datos","Dataset collection":"Coleccin de conjunto de datos","Multiple datasets":"Varios conjuntos de datos","Single dataset":"Conjunto de datos nico","Download from URL or upload files from disk":"Descargar desde URL o descargar desde disco","tool tooltip":"Mensaje de informacin sobre herramientas"},init:function(e){e||(e="undefined"!=typeof window&&window._i18n&&window._i18n.locale?window._i18n.locale:"undefined"!=typeof document&&document.documentElement.lang?document.documentElement.lang:"undefined"!=typeof navigator&&(navigator.languages||navigator.language||navigator.userLanguage)?((e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"root").toLowerCase():"root");var t=this["__"+e]||this.__root;if(t)for(var n in t)this[n]=t[n];for(var n in this.__root)void 0===this[n]&&(this[n]=this.__root[n])}};n.init(),e.exports=n},function(e,t,n){"use strict";var i=n(176);n.n(i).a},function(e,t,n){var i={"./af":289,"./af.js":289,"./ar":290,"./ar-dz":291,"./ar-dz.js":291,"./ar-kw":292,"./ar-kw.js":292,"./ar-ly":293,"./ar-ly.js":293,"./ar-ma":294,"./ar-ma.js":294,"./ar-sa":295,"./ar-sa.js":295,"./ar-tn":296,"./ar-tn.js":296,"./ar.js":290,"./az":297,"./az.js":297,"./be":298,"./be.js":298,"./bg":299,"./bg.js":299,"./bm":300,"./bm.js":300,"./bn":301,"./bn.js":301,"./bo":302,"./bo.js":302,"./br":303,"./br.js":303,"./bs":304,"./bs.js":304,"./ca":305,"./ca.js":305,"./cs":306,"./cs.js":306,"./cv":307,"./cv.js":307,"./cy":308,"./cy.js":308,"./da":309,"./da.js":309,"./de":310,"./de-at":311,"./de-at.js":311,"./de-ch":312,"./de-ch.js":312,"./de.js":310,"./dv":313,"./dv.js":313,"./el":314,"./el.js":314,"./en-au":315,"./en-au.js":315,"./en-ca":316,"./en-ca.js":316,"./en-gb":317,"./en-gb.js":317,"./en-ie":318,"./en-ie.js":318,"./en-il":319,"./en-il.js":319,"./en-in":320,"./en-in.js":320,"./en-nz":321,"./en-nz.js":321,"./en-sg":322,"./en-sg.js":322,"./eo":323,"./eo.js":323,"./es":324,"./es-do":325,"./es-do.js":325,"./es-us":326,"./es-us.js":326,"./es.js":324,"./et":327,"./et.js":327,"./eu":328,"./eu.js":328,"./fa":329,"./fa.js":329,"./fi":330,"./fi.js":330,"./fil":331,"./fil.js":331,"./fo":332,"./fo.js":332,"./fr":333,"./fr-ca":334,"./fr-ca.js":334,"./fr-ch":335,"./fr-ch.js":335,"./fr.js":333,"./fy":336,"./fy.js":336,"./ga":337,"./ga.js":337,"./gd":338,"./gd.js":338,"./gl":339,"./gl.js":339,"./gom-deva":340,"./gom-deva.js":340,"./gom-latn":341,"./gom-latn.js":341,"./gu":342,"./gu.js":342,"./he":343,"./he.js":343,"./hi":344,"./hi.js":344,"./hr":345,"./hr.js":345,"./hu":346,"./hu.js":346,"./hy-am":347,"./hy-am.js":347,"./id":348,"./id.js":348,"./is":349,"./is.js":349,"./it":350,"./it-ch":351,"./it-ch.js":351,"./it.js":350,"./ja":352,"./ja.js":352,"./jv":353,"./jv.js":353,"./ka":354,"./ka.js":354,"./kk":355,"./kk.js":355,"./km":356,"./km.js":356,"./kn":357,"./kn.js":357,"./ko":358,"./ko.js":358,"./ku":359,"./ku.js":359,"./ky":360,"./ky.js":360,"./lb":361,"./lb.js":361,"./lo":362,"./lo.js":362,"./lt":363,"./lt.js":363,"./lv":364,"./lv.js":364,"./me":365,"./me.js":365,"./mi":366,"./mi.js":366,"./mk":367,"./mk.js":367,"./ml":368,"./ml.js":368,"./mn":369,"./mn.js":369,"./mr":370,"./mr.js":370,"./ms":371,"./ms-my":372,"./ms-my.js":372,"./ms.js":371,"./mt":373,"./mt.js":373,"./my":374,"./my.js":374,"./nb":375,"./nb.js":375,"./ne":376,"./ne.js":376,"./nl":377,"./nl-be":378,"./nl-be.js":378,"./nl.js":377,"./nn":379,"./nn.js":379,"./oc-lnc":380,"./oc-lnc.js":380,"./pa-in":381,"./pa-in.js":381,"./pl":382,"./pl.js":382,"./pt":383,"./pt-br":384,"./pt-br.js":384,"./pt.js":383,"./ro":385,"./ro.js":385,"./ru":386,"./ru.js":386,"./sd":387,"./sd.js":387,"./se":388,"./se.js":388,"./si":389,"./si.js":389,"./sk":390,"./sk.js":390,"./sl":391,"./sl.js":391,"./sq":392,"./sq.js":392,"./sr":393,"./sr-cyrl":394,"./sr-cyrl.js":394,"./sr.js":393,"./ss":395,"./ss.js":395,"./sv":396,"./sv.js":396,"./sw":397,"./sw.js":397,"./ta":398,"./ta.js":398,"./te":399,"./te.js":399,"./tet":400,"./tet.js":400,"./tg":401,"./tg.js":401,"./th":402,"./th.js":402,"./tl-ph":403,"./tl-ph.js":403,"./tlh":404,"./tlh.js":404,"./tr":405,"./tr.js":405,"./tzl":406,"./tzl.js":406,"./tzm":407,"./tzm-latn":408,"./tzm-latn.js":408,"./tzm.js":407,"./ug-cn":409,"./ug-cn.js":409,"./uk":410,"./uk.js":410,"./ur":411,"./ur.js":411,"./uz":412,"./uz-latn":413,"./uz-latn.js":413,"./uz.js":412,"./vi":414,"./vi.js":414,"./x-pseudo":415,"./x-pseudo.js":415,"./yo":416,"./yo.js":416,"./zh-cn":417,"./zh-cn.js":417,"./zh-hk":418,"./zh-hk.js":418,"./zh-mo":419,"./zh-mo.js":419,"./zh-tw":420,"./zh-tw.js":420};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=540},function(e,t,n){},function(e,t,n){var i;void 0===(i=function(){"use strict";function e(e,t){if("number"!=typeof e||"number"!=typeof t)throw"Bad range "+e+","+t;this._min=e,this._max=t}function t(e){var t=e.sort(n),i=[],a=t.shift();t.forEach((function(e){e._min<=a._max?e._max>a._max&&(a._max=e._max):(i.push(a),a=e)})),i.push(a),this._ranges=i}function n(e,t){return e._min<t._min?-1:e._min>t._min?1:e._max<t._max?-1:t._max>e._max?1:0}return e.prototype.min=function(){return this._min},e.prototype.max=function(){return this._max},e.prototype.contains=function(e){return e>=this._min&&e<=this._max},e.prototype.isContiguous=function(){return!0},e.prototype.ranges=function(){return[this]},e.prototype._pushRanges=function(e){e.push(this)},e.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},t.prototype.min=function(){return this._ranges[0].min()},t.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},t.prototype.lower_bound=function(e){var t=this.ranges();if(e>this.max())return t.length;if(e<this.min())return 0;for(var n=0,i=t.length-1;n<=i;){var a=Math.floor((n+i)/2);if(e>t[a]._max)n=a+1;else{if(!(e<t[a]._min))return a;i=a-1}}return n},t.prototype.contains=function(e){var t=this.lower_bound(e);return!!(t<this._ranges.length&&this._ranges[t].contains(e))},t.prototype.insertRange=function(e){var t=this.lower_bound(e._min);if(t!==this._ranges.length){var n=this.ranges();if(e._max<n[t]._min)this._ranges.splice(t,0,e);else{n[t]._min<e._min&&(e._min=n[t]._min);for(var i=t+1;i<n.length&&n[i]._min<=e._max;)i++;n[--i]._max>e._max&&(e._max=n[i]._max),this._ranges.splice(t,i-t+1,e)}}else this._ranges.push(e)},t.prototype.isContiguous=function(){return this._ranges.length>1},t.prototype.ranges=function(){return this._ranges},t.prototype._pushRanges=function(e){for(var t=0;t<this._ranges.length;++t)e.push(this._ranges[t])},t.prototype.toString=function(){for(var e="",t=0;t<this._ranges.length;++t)t>0&&(e+=","),e+=this._ranges[t].toString();return e},{Range:e,union:function(e,n){return e instanceof t||(e instanceof Array||(e=[e]),e=new t(e)),n&&e.insertRange(n),e},intersection:function(n,i){for(var a=n.ranges(),r=i.ranges(),o=a.length,s=r.length,l=0,c=0,d=[];l<o&&c<s;){n=a[l],i=r[c];var u=Math.max(n.min(),i.min()),h=Math.min(n.max(),i.max());h>=u&&d.push(new e(u,h)),n.max()>i.max()?++c:++l}return 0==d.length?null:1==d.length?d[0]:new t(d)},coverage:function(e){for(var t=0,n=e.ranges(),i=0;i<n.length;++i){var a=n[i];t+=a.max()-a.min()+1}return t},rangeOver:function(e,t){return e.min()<t.min()?-1:e.min()>t.min()?1:e.max()<t.max()?-1:t.max()>e.max()?1:0},_rangeOrder:n}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(){var e=15,t=1440,n=0,i=0,a=1,r=-5,o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],s=0,l=9,c=5,d=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],u=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function _(){}function g(){this.was=[0]}_.prototype.inflateInit=function(t,n){return t||(t=e),n&&(n=!1),this.istate=new g,this.istate.inflateInit(this,n?-t:t)},_.prototype.inflate=function(e){return null==this.istate?-2:this.istate.inflate(this,e)},_.prototype.inflateEnd=function(){if(null==this.istate)return-2;var e=istate.inflateEnd(this);return this.istate=null,e},_.prototype.inflateSync=function(){return istate.inflateSync(this)},_.prototype.inflateSetDictionary=function(e,t){return istate.inflateSetDictionary(this,e,t)},g.prototype.inflateReset=function(e){return null==e||null==e.istate?-2:(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=0!=e.istate.nowrap?7:0,e.istate.blocks.reset(e,null),i)},g.prototype.inflateEnd=function(e){return null!=this.blocks&&this.blocks.free(e),this.blocks=null,i},g.prototype.inflateInit=function(e,t){return e.msg=null,this.blocks=null,nowrap=0,t<0&&(t=-t,nowrap=1),t<8||t>15?(this.inflateEnd(e),-2):(this.wbits=t,e.istate.blocks=new b(e,0!=e.istate.nowrap?null:this,1<<t),this.inflateReset(e),i)},g.prototype.inflate=function(e,t){var n,o;if(null==e||null==e.istate||null==e.next_in)return-2;for(t=4==t?r:i,n=r;;)switch(e.istate.mode){case 0:if(0==e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.next_in[e.next_in_index++]))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0==e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,o=255&e.next_in[e.next_in_index++],((e.istate.method<<8)+o)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&o)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=3;case 3:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=4;case 4:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=5;case 5:return 0==e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.adler=e.istate.need,e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(n==i&&(n=t),n!=a)return n;if(n=t,e.istate.blocks.reset(e,e.istate.was),0!=e.istate.nowrap){e.istate.mode=12;break}e.istate.mode=8;case 8:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=9;case 9:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=10;case 10:if(0==e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=11;case 11:if(0==e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.istate.was[0]!=e.istate.need){e.istate.mode=13,e.msg="incorrect data check",e.istate.marker=5;break}e.istate.mode=12;case 12:return a;case 13:return-3;default:return-2}},g.prototype.inflateSetDictionary=function(e,t,n){var a=0,r=n;return null==e||null==e.istate||6!=e.istate.mode?-2:e._adler.adler32(1,t,0,n)!=e.adler?-3:(e.adler=e._adler.adler32(0,null,0,0),r>=1<<e.istate.wbits&&(a=n-(r=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,a,r),e.istate.mode=7,i)};var v=[0,0,255,255];g.prototype.inflateSync=function(e){var t,n,a,o,s;if(null==e||null==e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0==(t=e.avail_in))return r;for(n=e.next_in_index,a=e.istate.marker;0!=t&&a<4;)e.next_in[n]==v[a]?a++:a=0!=e.next_in[n]?0:4-a,n++,t--;return e.total_in+=n-e.next_in_index,e.next_in_index=n,e.avail_in=t,e.istate.marker=a,4!=a?-3:(o=e.total_in,s=e.total_out,this.inflateReset(e),e.total_in=o,e.total_out=s,e.istate.mode=7,i)},g.prototype.inflateSyncPoint=function(e){return null==e||null==e.istate||null==e.istate.blocks?-2:e.istate.blocks.sync_point()};var y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function b(e,n,i){this.hufts=new Int32Array(3*t),this.window=new Uint8Array(i),this.end=i,this.checkfn=n,this.mode=s,this.reset(e,null),this.left=0,this.table=0,this.index=0,this.blens=null,this.bb=new Int32Array(1),this.tb=new Int32Array(1),this.codes=new w,this.last=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.check=0,this.inftree=new k}b.prototype.reset=function(e,t){t&&(t[0]=this.check),6==this.mode&&this.codes.free(e),this.mode=s,this.bitk=0,this.bitb=0,this.read=this.write=0,this.checkfn&&(e.adler=this.check=e._adler.adler32(0,null,0,0))},b.prototype.proc=function(e,t){var n,r,l,c,d,u,h;for(c=e.next_in_index,d=e.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u;;)switch(this.mode){case s:for(;l<3;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}switch(n=7&r,this.last=1&n,n>>>1){case 0:r>>>=3,r>>>=n=7&(l-=3),l-=n,this.mode=1;break;case 1:x(_=new Int32Array(1),g=new Int32Array(1),v=[],b=[],e),this.codes.init(_[0],g[0],v[0],0,b[0],0,e),r>>>=3,l-=3,this.mode=6;break;case 2:r>>>=3,l-=3,this.mode=3;break;case 3:return r>>>=3,l-=3,this.mode=13,e.msg="invalid block type",t=-3,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t)}break;case 1:for(;l<32;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}if((~r>>>16&65535)!=(65535&r))return this.mode=13,e.msg="invalid stored block lengths",t=-3,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);this.left=65535&r,r=l=0,this.mode=0!=this.left?2:0!=this.last?7:s;break;case 2:if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,write=u,this.inflate_flush(e,t);if(0==h&&(u==end&&0!=read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h&&(this.write=u,t=this.inflate_flush(e,t),h=(u=this.write)<this.read?this.read-u-1:this.end-u,u==this.end&&0!=this.read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h)))return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);if(t=i,(n=this.left)>d&&(n=d),n>h&&(n=h),C(e.next_in,c,this.window,u,n),c+=n,d-=n,u+=n,h-=n,0!=(this.left-=n))break;this.mode=0!=this.last?7:s;break;case 3:for(;l<14;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}if(this.table=n=16383&r,(31&n)>29||(n>>5&31)>29)return this.mode=9,e.msg="too many length or distance symbols",t=-3,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);if(n=258+(31&n)+(n>>5&31),null==this.blens||this.blens.length<n)this.blens=new Int32Array(n);else for(var f=0;f<n;f++)this.blens[f]=0;r>>>=14,l-=14,this.index=0,mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;l<3;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}this.blens[y[this.index++]]=7&r,r>>>=3,l-=3}for(;this.index<19;)this.blens[y[this.index++]]=0;if(this.bb[0]=7,(n=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,e))!=i)return-3==(t=n)&&(this.blens=null,this.mode=9),this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,write=u,this.inflate_flush(e,t);this.index=0,this.mode=5;case 5:for(;n=this.table,this.index<258+(31&n)+(n>>5&31);){var p,m;for(n=this.bb[0];l<n;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}if(n=this.hufts[3*(this.tb[0]+(r&o[n]))+1],(m=this.hufts[3*(this.tb[0]+(r&o[n]))+2])<16)r>>>=n,l-=n,this.blens[this.index++]=m;else{for(f=18==m?7:m-14,p=18==m?11:3;l<n+f;){if(0==d)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);t=i,d--,r|=(255&e.next_in[c++])<<l,l+=8}if(l-=n,p+=(r>>>=n)&o[f],r>>>=f,l-=f,(f=this.index)+p>258+(31&(n=this.table))+(n>>5&31)||16==m&&f<1)return this.blens=null,this.mode=9,e.msg="invalid bit length repeat",t=-3,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);m=16==m?this.blens[f-1]:0;do{this.blens[f++]=m}while(0!=--p);this.index=f}}this.tb[0]=-1;var _=new Int32Array(1),g=new Int32Array(1),v=new Int32Array(1),b=new Int32Array(1);if(_[0]=9,g[0]=6,n=this.table,(n=this.inftree.inflate_trees_dynamic(257+(31&n),1+(n>>5&31),this.blens,_,g,v,b,this.hufts,e))!=i)return-3==n&&(this.blens=null,this.mode=13),t=n,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);this.codes.init(_[0],g[0],this.hufts,v[0],this.hufts,b[0],e),this.mode=6;case 6:if(this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,(t=this.codes.proc(this,e,t))!=a)return this.inflate_flush(e,t);if(t=i,this.codes.free(e),c=e.next_in_index,d=e.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u,0==this.last){this.mode=s;break}this.mode=7;case 7:if(this.write=u,t=this.inflate_flush(e,t),h=(u=this.write)<this.read?this.read-u-1:this.end-u,this.read!=this.write)return this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);mode=12;case 8:return t=a,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);case 9:return t=-3,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t);default:return t=-2,this.bitb=r,this.bitk=l,e.avail_in=d,e.total_in+=c-e.next_in_index,e.next_in_index=c,this.write=u,this.inflate_flush(e,t)}},b.prototype.free=function(e){this.reset(e,null),this.window=null,this.hufts=null},b.prototype.set_dictionary=function(e,t,n){C(e,t,window,0,n),this.read=this.write=n},b.prototype.sync_point=function(){return 1==this.mode},b.prototype.inflate_flush=function(e,t){var n,a,o;return a=e.next_out_index,(n=((o=this.read)<=this.write?this.write:this.end)-o)>e.avail_out&&(n=e.avail_out),0!=n&&t==r&&(t=i),e.avail_out-=n,e.total_out+=n,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,o,n)),C(this.window,o,e.next_out,a,n),a+=n,(o+=n)==this.end&&(o=0,this.write==this.end&&(this.write=0),(n=this.write-o)>e.avail_out&&(n=e.avail_out),0!=n&&t==r&&(t=i),e.avail_out-=n,e.total_out+=n,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,o,n)),C(this.window,o,e.next_out,a,n),a+=n,o+=n),e.next_out_index=a,this.read=o,t};function w(){}function k(){}function x(e,t,n,a,r){return e[0]=l,t[0]=c,n[0]=d,a[0]=u,i}w.prototype.init=function(e,t,n,i,a,r,o){this.mode=0,this.lbits=e,this.dbits=t,this.ltree=n,this.ltree_index=i,this.dtree=a,this.dtree_index=r,this.tree=null},w.prototype.proc=function(e,t,n){var r,s,l,c,d,u,h,f=0,p=0,m=0;for(m=t.next_in_index,c=t.avail_in,f=e.bitb,p=e.bitk,u=(d=e.write)<e.read?e.read-d-1:e.end-d;;)switch(this.mode){case 0:if(u>=258&&c>=10&&(e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,n=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,e,t),m=t.next_in_index,c=t.avail_in,f=e.bitb,p=e.bitk,u=(d=e.write)<e.read?e.read-d-1:e.end-d,n!=i)){this.mode=n==a?7:9;break}this.need=this.lbits,this.tree=this.ltree,this.tree_index=this.ltree_index,this.mode=1;case 1:for(r=this.need;p<r;){if(0==c)return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);n=i,c--,f|=(255&t.next_in[m++])<<p,p+=8}if(s=3*(this.tree_index+(f&o[r])),f>>>=this.tree[s+1],p-=this.tree[s+1],0==(l=this.tree[s])){this.lit=this.tree[s+2],this.mode=6;break}if(0!=(16&l)){this.get=15&l,this.len=this.tree[s+2],this.mode=2;break}if(0==(64&l)){this.need=l,this.tree_index=s/3+this.tree[s+2];break}if(0!=(32&l)){this.mode=7;break}return this.mode=9,t.msg="invalid literal/length code",n=-3,e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);case 2:for(r=this.get;p<r;){if(0==c)return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);n=i,c--,f|=(255&t.next_in[m++])<<p,p+=8}this.len+=f&o[r],f>>=r,p-=r,this.need=this.dbits,this.tree=this.dtree,this.tree_index=this.dtree_index,this.mode=3;case 3:for(r=this.need;p<r;){if(0==c)return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);n=i,c--,f|=(255&t.next_in[m++])<<p,p+=8}if(s=3*(this.tree_index+(f&o[r])),f>>=this.tree[s+1],p-=this.tree[s+1],0!=(16&(l=this.tree[s]))){this.get=15&l,this.dist=this.tree[s+2],this.mode=4;break}if(0==(64&l)){this.need=l,this.tree_index=s/3+this.tree[s+2];break}return this.mode=9,t.msg="invalid distance code",n=-3,e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);case 4:for(r=this.get;p<r;){if(0==c)return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);n=i,c--,f|=(255&t.next_in[m++])<<p,p+=8}this.dist+=f&o[r],f>>=r,p-=r,this.mode=5;case 5:for(h=d-this.dist;h<0;)h+=e.end;for(;0!=this.len;){if(0==u&&(d==e.end&&0!=e.read&&(u=(d=0)<e.read?e.read-d-1:e.end-d),0==u&&(e.write=d,n=e.inflate_flush(t,n),u=(d=e.write)<e.read?e.read-d-1:e.end-d,d==e.end&&0!=e.read&&(u=(d=0)<e.read?e.read-d-1:e.end-d),0==u)))return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);e.window[d++]=e.window[h++],u--,h==e.end&&(h=0),this.len--}this.mode=0;break;case 6:if(0==u&&(d==e.end&&0!=e.read&&(u=(d=0)<e.read?e.read-d-1:e.end-d),0==u&&(e.write=d,n=e.inflate_flush(t,n),u=(d=e.write)<e.read?e.read-d-1:e.end-d,d==e.end&&0!=e.read&&(u=(d=0)<e.read?e.read-d-1:e.end-d),0==u)))return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);n=i,e.window[d++]=this.lit,u--,this.mode=0;break;case 7:if(p>7&&(p-=8,c++,m--),e.write=d,n=e.inflate_flush(t,n),u=(d=e.write)<e.read?e.read-d-1:e.end-d,e.read!=e.write)return e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);this.mode=8;case 8:return n=a,e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);case 9:return n=-3,e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n);default:return n=-2,e.bitb=f,e.bitk=p,t.avail_in=c,t.total_in+=m-t.next_in_index,t.next_in_index=m,e.write=d,e.inflate_flush(t,n)}},w.prototype.free=function(e){},w.prototype.inflate_fast=function(e,t,n,r,s,l,c,d){var u,h,f,p,m,_,g,v,y,b,w,k,x,S,M,T;g=d.next_in_index,v=d.avail_in,m=c.bitb,_=c.bitk,b=(y=c.write)<c.read?c.read-y-1:c.end-y,w=o[e],k=o[t];do{for(;_<20;)v--,m|=(255&d.next_in[g++])<<_,_+=8;if(0!=(p=(h=n)[T=3*((f=r)+(u=m&w))]))for(;;){if(m>>=h[T+1],_-=h[T+1],0!=(16&p)){for(p&=15,x=h[T+2]+(m&o[p]),m>>=p,_-=p;_<15;)v--,m|=(255&d.next_in[g++])<<_,_+=8;for(p=(h=s)[T=3*((f=l)+(u=m&k))];;){if(m>>=h[T+1],_-=h[T+1],0!=(16&p)){for(p&=15;_<p;)v--,m|=(255&d.next_in[g++])<<_,_+=8;if(S=h[T+2]+(m&o[p]),m>>=p,_-=p,b-=x,y>=S)M=y-S,c.window[y++]=c.window[M++],c.window[y++]=c.window[M++],x-=2;else{M=y-S;do{M+=c.end}while(M<0);if(x>(p=c.end-M)){if(x-=p,y-M>0&&p>y-M)do{c.window[y++]=c.window[M++]}while(0!=--p);else C(c.window,M,c.window,y,p),y+=p,M+=p,p=0;M=0}}do{c.window[y++]=c.window[M++]}while(0!=--x);break}if(0!=(64&p))return d.msg="invalid distance code",v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,-3;u+=h[T+2],p=h[T=3*(f+(u+=m&o[p]))]}break}if(0!=(64&p))return 0!=(32&p)?(v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,a):(d.msg="invalid literal/length code",v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,-3);if(u+=h[T+2],0==(p=h[T=3*(f+(u+=m&o[p]))])){m>>=h[T+1],_-=h[T+1],c.window[y++]=h[T+2],b--;break}}else m>>=h[T+1],_-=h[T+1],c.window[y++]=h[T+2],b--}while(b>=258&&v>=10);return v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,i},k.prototype.huft_build=function(e,n,a,o,s,l,c,d,u,h,f){var p,m,_,g,v,y,b,w,k,x,S,M,T,j,O;x=0,v=a;do{this.c[e[n+x]]++,x++,v--}while(0!=v);if(this.c[0]==a)return c[0]=-1,d[0]=0,i;for(w=d[0],y=1;y<=15&&0==this.c[y];y++);for(b=y,w<y&&(w=y),v=15;0!=v&&0==this.c[v];v--);for(_=v,w>v&&(w=v),d[0]=w,j=1<<y;y<v;y++,j<<=1)if((j-=this.c[y])<0)return-3;if((j-=this.c[v])<0)return-3;for(this.c[v]+=j,this.x[1]=y=0,x=1,T=2;0!=--v;)this.x[T]=y+=this.c[x],T++,x++;v=0,x=0;do{0!=(y=e[n+x])&&(this.v[this.x[y]++]=v),x++}while(++v<a);for(a=this.x[_],this.x[0]=v=0,x=0,g=-1,M=-w,this.u[0]=0,S=0,O=0;b<=_;b++)for(p=this.c[b];0!=p--;){for(;b>M+w;){if(g++,O=(O=_-(M+=w))>w?w:O,(m=1<<(y=b-M))>p+1&&(m-=p+1,T=b,y<O))for(;++y<O&&!((m<<=1)<=this.c[++T]);)m-=this.c[T];if(O=1<<y,this.hn[0]+O>t)return-3;this.u[g]=S=this.hn[0],this.hn[0]+=O,0!=g?(this.x[g]=v,this.r[0]=y,this.r[1]=w,y=v>>>M-w,this.r[2]=S-this.u[g-1]-y,C(this.r,0,u,3*(this.u[g-1]+y),3)):c[0]=S}for(this.r[1]=b-M,x>=a?this.r[0]=192:f[x]<o?(this.r[0]=this.v[x]<256?0:96,this.r[2]=this.v[x++]):(this.r[0]=l[this.v[x]-o]+16+64,this.r[2]=s[this.v[x++]-o]),m=1<<b-M,y=v>>>M;y<O;y+=m)C(this.r,0,u,3*(S+y),3);for(y=1<<b-1;0!=(v&y);y>>>=1)v^=y;for(v^=y,k=(1<<M)-1;(v&k)!=this.x[g];)g--,k=(1<<(M-=w))-1}return 0!=j&&1!=_?r:i},k.prototype.inflate_trees_bits=function(e,t,n,i,a){var o;return this.initWorkArea(19),this.hn[0]=0,-3==(o=this.huft_build(e,0,19,19,null,null,n,t,i,this.hn,this.v))?a.msg="oversubscribed dynamic bit lengths tree":o!=r&&0!=t[0]||(a.msg="incomplete dynamic bit lengths tree",o=-3),o},k.prototype.inflate_trees_dynamic=function(e,t,n,a,o,s,l,c,d){var u;return this.initWorkArea(288),this.hn[0]=0,(u=this.huft_build(n,0,e,257,h,f,s,a,c,this.hn,this.v))!=i||0==a[0]?(-3==u?d.msg="oversubscribed literal/length tree":-4!=u&&(d.msg="incomplete literal/length tree",u=-3),u):(this.initWorkArea(288),(u=this.huft_build(n,e,t,0,p,m,l,o,c,this.hn,this.v))!=i||0==o[0]&&e>257?(-3==u?d.msg="oversubscribed distance tree":u==r?(d.msg="incomplete distance tree",u=-3):-4!=u&&(d.msg="empty distance tree with lengths",u=-3),u):i)},k.prototype.initWorkArea=function(e){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(e),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16)),this.v.length<e&&(this.v=new Int32Array(e));for(var t=0;t<e;t++)this.v[t]=0;for(t=0;t<16;t++)this.c[t]=0;for(t=0;t<3;t++)this.r[t]=0;C(this.c,0,this.u,0,15),C(this.c,0,this.x,0,16)};var S="function"==typeof new Uint8Array(1).subarray;function C(e,t,n,i,a){if(0!=a){if(!e)throw"Undef src";if(!n)throw"Undef dest";0==t&&a==e.length?M(e,n,i):S?M(e.subarray(t,t+a),n,i):1==e.BYTES_PER_ELEMENT&&a>100?M(new Uint8Array(e.buffer,e.byteOffset+t,a),n,i):function(e,t,n,i,a){for(var r=0;r<a;++r)n[i+r]=e[t+r]}(e,t,n,i,a)}}function M(e,t,n){t.set(e,n)}return{inflateBuffer:function(t,o,s,l){t=o?s?new Uint8Array(t,o,s):new Uint8Array(t,o,t.byteLength-o):new Uint8Array(t);var c=new _;c.inflateInit(e,!0),c.next_in=t,c.next_in_index=0,c.avail_in=t.length;for(var d=[],u=0;;){var h=new Uint8Array(32e3);c.next_out=h,c.next_out_index=0,c.avail_out=h.length;var f=c.inflate(n);if(f!=i&&f!=a&&f!=r)throw c.msg;if(0!=c.avail_out){var p=new Uint8Array(h.length-c.avail_out);C(h,0,p,0,h.length-c.avail_out),h=p}if(d.push(h),u+=h.length,f==a||f==r)break}if(l&&(l[0]=(o||0)+c.next_in_index),1==d.length)return d[0].buffer;for(var m=new Uint8Array(u),g=0,v=0;v<d.length;++v){var y=d[v];C(y,0,m,g,y.length),g+=y.length}return m.buffer},arrayCopy:C}}.apply(t,[]))||(e.exports=i)},function(e,t,n){(function(i){var a,r,o;r=[n(0)],void 0===(o="function"==typeof(a=function(e){var t=e.ajaxSettings;t.responseFields.native="responseNative",t.converters["* native"]=!0;var n={},a=0,r={0:200,1223:204},o={},s=i.ajaxSettings.xhr();window.ActiveXObject&&e(window).on("unload",(function(){for(var e in o)o[e]()})),n.cors=!!s&&"withCredentials"in s,n.ajax=s=!!s,e.ajaxTransport("native",(function(e){var t;if(n.cors||s&&!e.crossDomain)return{send:function(n,i){var s,l=e.xhr(),c=++a,d={};if(l.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)l[s]=e.xhrFields[s];for(s in e.mimeType&&l.overrideMimeType&&l.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)l.setRequestHeader(s,n[s]);t=function(e){return function(){t&&(delete o[c],t=l.onload=l.onerror=null,"abort"===e?l.abort():"error"===e?i(l.status,l.statusText):(l.response&&(d.native=l.response),i(r[l.status]||l.status,l.statusText,d,l.getAllResponseHeaders())))}},l.onload=t(),l.onerror=t("error"),t=o[c]=t("abort");try{l.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),e.getNative=function(t,n){return e.ajax({dataType:"native",url:t,xhrFields:{responseType:"arraybuffer"},success:n})}})?a.apply(t,r):a)||(e.exports=o)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){e.fn.drag=function(t,n,i){var a="string"==typeof t?t:"",r=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==a.indexOf("drag")&&(a="drag"+a),i=(t==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),a=t.data||{};n.related+=1,e.each(i.defaults,(function(e,t){void 0!==a[e]&&(n[e]=a[e])}))},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(a){if(!i.touched){var r,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!e(a.target).is(o.not)&&(!o.handle||e(a.target).closest(o.handle,a.currentTarget).length)&&(i.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[i.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,r=i.hijack(a,"draginit",o),o.propagates))return(r=i.flatten(r))&&r.length&&(o.interactions=[],e.each(r,(function(){o.interactions.push(i.interaction(this,o))}))),o.propagates=o.interactions.length,!1!==o.drop&&n.drop&&n.drop.handler(a,o),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,o):t.add(document,"mousemove mouseup",i.handler,o),!(!i.touched||o.live)&&void 0}},interaction:function(t,n){var a=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:a}},handler:function(a){var r=a.data;switch(a.type){case!r.dragging&&"touchmove":a.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(a.pageX-r.pageX,2)+Math.pow(a.pageY-r.pageY,2)<Math.pow(r.distance,2))break;a.target=r.target,i.hijack(a,"dragstart",r),r.propagates&&(r.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(r.dragging){if(i.hijack(a,"drag",r),r.propagates){!1!==r.drop&&n.drop&&n.drop.handler(a,r);break}a.type="mouseup"}case"touchend":case"mouseup":default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),r.dragging?(!1!==r.drop&&n.drop&&n.drop.handler(a,r),i.hijack(a,"dragend",r)):i.hijack(a,"dragclickonly",r),i.textselect(!0),!1===r.click&&r.dragging&&e.data(r.mousedown,"suppress.click",(new Date).getTime()+5),r.dragging=i.touched=!1}},hijack:function(n,a,r,o,s){if(r){var l,c,d,u={event:n.originalEvent,type:n.type},h=a.indexOf("drop")?"drag":"drop",f=o||0,p=isNaN(o)?r.interactions.length:o;n.type=a,n.originalEvent=null,r.results=[];do{if(c=r.interactions[f]){if("dragend"!==a&&c.cancelled)continue;d=i.properties(n,r,c),c.results=[],e(s||c[h]||r.droppable).each((function(o,s){if(d.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?t.dispatch.call(s,n,d):null)?("drag"==h&&(c.cancelled=!0,r.propagates-=1),"drop"==a&&(c[h][o]=null)):"dropinit"==a&&c.droppable.push(i.element(l)||s),"dragstart"==a&&(c.proxy=e(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==a)return l})),r.results[f]=i.flatten(c.results),"dropinit"==a&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=a||c.cancelled||d.update()}}while(++f<p);return n.type=u.type,n.originalEvent=u.event,i.flatten(r.results)}},properties:function(e,t,n){var a=n.callback;return a.drag=n.drag,a.proxy=n.proxy||n.drag,a.startX=t.pageX,a.startY=t.pageY,a.deltaX=e.pageX-t.pageX,a.deltaY=e.pageY-t.pageY,a.originalX=n.offset.left,a.originalY=n.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=i.flatten((n.drop||[]).slice()),a.available=i.flatten((n.droppable||[]).slice()),a},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,(function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t}))},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,(function(e){n.drop.locate(this,e)}))}};var a=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return a.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var r=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(r.props,(function(e,n){t[n]=i[n]}))}return t}};n.draginit=n.dragstart=n.dragend=i}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){e.fn._hover=e.fn.hover,e.fn.hover=function(e,t,n){return n&&this.bind("hoverstart",e),t&&this.bind("hoverend",n||t),e?this.bind("hover",n?t:e):this.trigger("hover")};var t=e.event.special.hover={delay:100,speed:100,setup:function(i){i=e.extend({speed:t.speed,delay:t.delay,hovered:0},i||{}),e.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){e.event.remove(this,"mouseenter mouseleave",n)}};function n(t){var i=t.data||t;switch(t.type){case"mouseenter":i.dist2=0,i.event=t,t.type="hoverstart",!1!==e.event.dispatch.call(this,t)&&(i.elem=this,e.event.add(this,"mousemove",n,i),i.timer=setTimeout(a,i.delay));break;case"mousemove":i.dist2+=Math.pow(t.pageX-i.event.pageX,2)+Math.pow(t.pageY-i.event.pageY,2),i.event=t;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(t.type="hoverend",e.event.dispatch.call(this,t),i.hovered--):e.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(e.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==e.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(a,i.delay),i.dist2=0}function a(){n(i)}}}(e)}).call(this,n(0))},function(e,t,n){(function(e){var t,n,i,a,r;
/*! jQuery UI - v1.9.1 - 2012-10-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
!function(e,t){function n(t,n){var a,r,o,s=t.nodeName.toLowerCase();return"area"===s?(r=(a=t.parentNode).name,!(!t.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+r+"]")[0])&&i(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var a=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each((function(){var i=this;setTimeout((function(){e(i).focus(),n&&n.call(i)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,a,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&e(this).removeAttr("id")}))}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function a(t,n,i,a){return e.each(r,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each((function(){e(this).css(o,a(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each((function(){e(this).css(o,a(this,t,!0,n)+"px")}))}})),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(t,!a)}}),e((function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"})),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var a,r=e.ui[t].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n){var i,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return t[i]>0||(t[i]=1,a=t[i]>0,t[i]=0,a)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,i,a,r,o){return e.ui.isOverAxis(t,i,r)&&e.ui.isOverAxis(n,a,o)}}))}(e),t=e,i=0,a=Array.prototype.slice,r=t.cleanData,t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(e){}r(e)},t.widget=function(e,n,i){var a,r,o,s,l=e.split(".")[0];e=e.split(".")[1],a=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[l]=t[l]||{},r=t[l][e],o=t[l][e]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(s=new n).options=t.widget.extend({},s.options),t.each(i,(function(e,a){t.isFunction(a)&&(i[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=i,e=a.apply(this,arguments),this._super=n,this._superApply=r,e}}())})),o.prototype=t.widget.extend(s,{widgetEventPrefix:s.widgetEventPrefix||e},i,{constructor:o,namespace:l,widgetName:e,widgetBaseClass:a,widgetFullName:a}),r?(t.each(r._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(e){for(var i,r,o=a.call(arguments,1),s=0,l=o.length;s<l;s++)for(i in o[s])r=o[s][i],o[s].hasOwnProperty(i)&&r!==n&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName;t.fn[e]=function(o){var s="string"==typeof o,l=a.call(arguments,1),c=this;return o=!s&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,s?this.each((function(){var i,a=t.data(this,r);return a?t.isFunction(a[o])&&"_"!==o.charAt(0)?(i=a[o].apply(a,l))!==a&&i!==n?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):this.each((function(){var e=t.data(this,r);e?e.option(o||{})._init():new i(o,this)})),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetName,this),t.data(n,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var a,r,o,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},a=e.split("."),e=a.shift(),a.length){for(r=s[e]=t.widget.extend({},this.options[e]),o=0;o<a.length-1;o++)r[a[o]]=r[a[o]]||{},r=r[a[o]];if(e=a.pop(),i===n)return r[e]===n?null:r[e];r[e]=i}else{if(i===n)return this.options[e]===n?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n){var i,a=this;n?(e=i=t(e),this.bindings=this.bindings.add(e)):(n=e,e=this.element,i=this.widget()),t.each(n,(function(n,r){function o(){if(!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||t.guid++);var s=n.match(/^(\w+)\s*(.*)$/),l=s[1]+a.eventNamespace,c=s[2];c?i.delegate(c,l,o):e.bind(l,o)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var a,r,o=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(t.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?n:a.effect||n:e;"number"==typeof(a=a||{})&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&t.effects&&(t.effects.effect[s]||!1!==t.uiBackCompat&&t.effects[s])?i[e](a):s!==e&&i[s]?i[s](a.duration,a.easing,r):i.queue((function(n){t(this)[e](),r&&r.call(i[0]),n()}))}})),!1!==t.uiBackCompat&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]}),function(e,t){var n=!1;e(document).mouseup((function(e){n=!1})),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(e),function(t,n){function i(e,t,n){return[parseInt(e[0],10)*(f.test(e[0])?t/100:1),parseInt(e[1],10)*(f.test(e[1])?n/100:1)]}function a(e,n){return parseInt(t.css(e,n),10)||0}t.ui=t.ui||{};var r,o=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,f=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(r!==n)return r;var e,i,a=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return t("body").append(a),e=o.offsetWidth,a.css("overflow","scroll"),e===(i=o.offsetWidth)&&(i=a[0].clientWidth),a.remove(),r=e-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),a="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,r="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var n,r,f,m,_,g=t(e.of),v=t.position.getWithinInfo(e.within),y=t.position.getScrollInfo(v),b=g[0],w=(e.collision||"flip").split(" "),k={};return 9===b.nodeType?(r=g.width(),f=g.height(),m={top:0,left:0}):t.isWindow(b)?(r=g.width(),f=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):b.preventDefault?(e.at="left top",r=f=0,m={top:b.pageY,left:b.pageX}):(r=g.outerWidth(),f=g.outerHeight(),m=g.offset()),_=t.extend({},m),t.each(["my","at"],(function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",t=u.exec(i[0]),n=u.exec(i[1]),k[this]=[t?t[0]:0,n?n[0]:0],e[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?_.left+=r:"center"===e.at[0]&&(_.left+=r/2),"bottom"===e.at[1]?_.top+=f:"center"===e.at[1]&&(_.top+=f/2),n=i(k.at,r,f),_.left+=n[0],_.top+=n[1],this.each((function(){var c,d,u=t(this),h=u.outerWidth(),p=u.outerHeight(),b=a(this,"marginLeft"),x=a(this,"marginTop"),S=h+b+a(this,"marginRight")+y.width,C=p+x+a(this,"marginBottom")+y.height,M=t.extend({},_),T=i(k.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?M.left-=h:"center"===e.my[0]&&(M.left-=h/2),"bottom"===e.my[1]?M.top-=p:"center"===e.my[1]&&(M.top-=p/2),M.left+=T[0],M.top+=T[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),c={marginLeft:b,marginTop:x},t.each(["left","top"],(function(i,a){t.ui.position[w[i]]&&t.ui.position[w[i]][a](M,{targetWidth:r,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:c,collisionWidth:S,collisionHeight:C,offset:[n[0]+T[0],n[1]+T[1]],my:e.my,at:e.at,within:v,elem:u})})),t.fn.bgiframe&&u.bgiframe(),e.using&&(d=function(t){var n=m.left-M.left,i=n+r-h,a=m.top-M.top,l=a+f-p,c={target:{element:g,left:m.left,top:m.top,width:r,height:f},element:{element:u,left:M.left,top:M.top,width:h,height:p},horizontal:i<0?"left":n>0?"right":"center",vertical:l<0?"top":a>0?"bottom":"middle"};r<h&&s(n+i)<r&&(c.horizontal="center"),f<p&&s(a+l)<f&&(c.vertical="middle"),o(s(n),s(i))>o(s(a),s(l))?c.important="horizontal":c.important="vertical",e.using.call(this,t,c)}),u.offset(t.extend(M,{using:d}))}))},t.ui.position={fit:{left:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=e.left-t.collisionPosition.marginLeft,l=a-s,c=s+t.collisionWidth-r-a;t.collisionWidth>r?l>0&&c<=0?(n=e.left+l+t.collisionWidth-r-a,e.left+=l-n):e.left=c>0&&l<=0?a:l>c?a+r-t.collisionWidth:a:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-s,e.left)},top:function(e,t){var n,i=t.within,a=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,s=e.top-t.collisionPosition.marginTop,l=a-s,c=s+t.collisionHeight-r-a;t.collisionHeight>r?l>0&&c<=0?(n=e.top+l+t.collisionHeight-r-a,e.top+=l-n):e.top=c>0&&l<=0?a:l>c?a+r-t.collisionHeight:a:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,a=t.within,r=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];d<0?((n=e.left+h+f+p+t.collisionWidth-o-r)<0||n<s(d))&&(e.left+=h+f+p):u>0&&((i=e.left-t.collisionPosition.marginLeft+h+f+p-l)>0||s(i)<u)&&(e.left+=h+f+p)},top:function(e,t){var n,i,a=t.within,r=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-o-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];d<0?(i=e.top+h+f+p+t.collisionHeight-o-r,e.top+h+f+p>d&&(i<0||i<s(d))&&(e.top+=h+f+p)):u>0&&(n=e.top-t.collisionPosition.marginTop+h+f+p-l,e.top+h+f+p>u&&(n>0||s(n)<u)&&(e.top+=h+f+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,a,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in e=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)e.style[r]=i[r];e.appendChild(s),(n=o||document.documentElement).insertBefore(e,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=t(s).offset().left,t.support.offsetFractions=a>10&&a<11,e.innerHTML="",n.removeChild(e)}(),!1!==t.uiBackCompat&&function(e){var t=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return t.call(this,i);var a=i.offset.split(" "),r=i.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),t.call(this,e.extend(i,{at:r[0]+a[0]+" "+r[1]+a[1],offset:n}))}}(e)}(e),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case r.UP:t=!0,this._keyEvent("previous",a);break;case r.DOWN:t=!0,this._keyEvent("next",a);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(t)return t=!1,void i.preventDefault();if(!n){var a=e.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target!==t.element[0]&&i.target!==n&&!e.contains(n,i.target)&&t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,a){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(e),function(e,t){var n,i,a,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},c=function(t){var n=t.name,i=t.form,a=e([]);return n&&(a=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter((function(){return!this.form}))),a};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||(e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||e(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(h)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){r||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){s.disabled||(r=!1,i=e.pageX,a=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){s.disabled||i===e.pageX&&a===e.pageY||(r=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];c(n).not(n).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(s.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(s.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,a=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(e),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,a,r,o,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,a=this.previousFilter||"",r=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),r===a?o=!0:r=a+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())})),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())}))),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var t=e(this),i=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",i.attr("id"))})),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),a<0?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,a;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-a<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,a;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+a>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(e),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,n,i=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,t=a.length;t<n;t++)r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){i.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var n,i,a,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,r)))return}switch(a=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-a)}this._slide(t,r,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,a,r,o,s,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),a=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-c.values(t));a>n&&(a=n,r=e(this),o=t)})),!0===d.range&&this.values(1)===d.min&&(o+=1,r=e(this.handles[o])),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),s=r.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,a,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),a=this._valueMax()-this._valueMin(),r=this._valueMin()+i*a,this._trimAlignValue(r)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,a,r;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&((a=this.values())[t]=n,r=this._trigger("slide",e,{handle:this.handles[t],value:n,values:a}),i=this.values(t?0:1),!1!==r&&this.values(t,n,!0))):n!==this.value()&&(!1!==(r=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,a,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,a=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(a[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,a=0;switch(e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<a;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,a,r,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,d={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n})):(i=this.value(),a=this._valueMin(),r=this._valueMax(),n=r!==a?(i-a)/(r-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))}})}(e)}).call(this,n(0))},function(e,t,n){(function(e){var t;void 0===(t=e).fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),i=-1,a=this.length;++i<a&&(n.context=n[0]=this[i])&&!1!==e.call(n[0],i,n););return this}}),function(e,t){"use strict";if(window.Select2===t){var n,i,a,r,o,s,l,c,d={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},h="<div class='select2-measure-scrollbar'></div>",f={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};s=e(document),c=1,r=function(){return c++},n=E(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,a;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(D(n.containerCss,this.opts.element)),this.container.addClass(D(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",k),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",k),this.results=i=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",k),this.results.on("mousemove",(function(n){var i=d;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var n=w(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){_(e.target,t.get())>=0&&n(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,n,a){var r=i.scrollTop();a>0&&r-a<=0?(i.scrollTop(0),k(e)):a<0&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),k(e))})),b(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var s=n.element.prop("readonly");s===t&&(s=!1),this.readonly(s),l=l||function(){var t=e(h);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),L.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,a,o,s,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(i,a,o){var s,c=this.opts.id,d=this.liveRegion;(s=function(i,a,u){var h,f,p,m,_,g,v,y,b,w,k=[];for(h=0,f=(i=n.sortResults(i,a,o)).length;h<f;h+=1)m=!(_=!0===(p=i[h]).disabled)&&c(p)!==t,g=p.children&&p.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+r()),y.attr("role","option"),(w=n.formatResult(p,y,o,l.opts.escapeMarkup))!==t&&(y.html(w),v.append(y)),g&&((b=e("<ul></ul>")).addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),k.push(v[0]);a.append(k),d.text(n.formatMatches(i.length))})(a,i,0)}},e.fn.select2.defaults,n)).id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(a?(n.query=this.bind((function(e){var n,a,r,o={results:[],more:!1},s=e.term;r=function(t,n){var i;t.is("option")?e.matcher(s,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2((function(e,t){r(t,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(a=this.getPlaceholderOption())&&(n=n.not(a)),n.each2((function(e,t){r(t,o.results)})),e.callback(o)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=M.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=j(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var a=[];e(v(t.val(),n.separator)).each((function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each((function(){if(g(this.id,t.id))return t=this,!1})),a.push(t)})),i(a)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,a=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",a._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,a._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,a,r,o=this.dropdown,s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),h=e(window),f=h.width(),p=h.height(),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,v=s.left,y=g+u<=_,b=s.top-u>=h.scrollTop(),w=o.outerWidth(!1),k=v+w<=m;o.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(o.hide(),s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,k=(v=s.left)+(w=o.outerWidth(!1))<=m,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=w:w=d,u=o.outerHeight(!1),k=v+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(t=this.body.offset()).top,v-=t.left),k||(v=s.left+this.container.outerWidth(!1)-w),a={left:v,width:d},n?(a.top=s.top-u,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=e.extend(a,D(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",(function(e){d.x=e.pageX,d.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,i="scroll."+n,a="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){p(t);var i,a=e("#select2-drop");a.length>0&&((i=a.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){e(this).on(a+" "+i+" "+r,(function(e){o.opened()&&o.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,a="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(i).off(a)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,a,r,o,s,l,c=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results")).length>0&&(a=s.offset().top+s.outerHeight(!0)),a>(r=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(a-r)),(o=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var a=e(n[i+=t]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,a=this.findHighlightableChoices();if(0===arguments.length)return _(a.filter(".select2-highlighted")[0],a.get());t>=a.length&&(t=a.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(a[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,a=this.search.val(),r=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:r,matcher:this.opts.matcher,callback:this.bind((function(o){i.opened()&&(i.opts.populateResults.call(this,e,o.results,{term:a,page:n,context:r}),i.postprocessResults(o,!1,!1),!0===o.more?(t.detach().appendTo(e).text(D(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))}))},tokenize:function(){},updateResults:function(n){var i,a,r,o=this.search,s=this.results,l=this.opts,c=this,d=o.val(),u=e.data(this.container,"select2-last-term");if((!0===n||!u||!g(d,u))&&(e.data(this.container,"select2-last-term",d),!0===n||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),e.isArray(i)&&i.length>=h&&O(l.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<l.minimumInputLength?(O(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+D(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&o.val().length>l.maximumInputLength?O(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+D(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+D(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=t&&null!=a&&o.val(a),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var a;r==this.queryCount&&(this.opened()?i.hasError!==t&&O(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+D(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==o.val()&&(a=this.opts.createSearchChoice.call(c,o.val(),i.results))!==t&&null!==a&&c.id(a)!==t&&null!==c.id(a)&&0===e(i.results).filter((function(){return g(c.id(this),c.id(a))})).length&&this.opts.createSearchChoicePosition(i.results,a),0===i.results.length&&O(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+D(l.formatNoMatches,l.element,o.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,i.results,{term:o.val(),page:this.resultsPage,context:null}),!0===i.more&&O(l.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+l.escapeMarkup(D(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),f(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+D(l.formatSelectionTooBig,l.element,h)+"</li>")}function f(){o.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find(".select2-result-selectable").length))}function p(e){s.html(e),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,a,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(r=0,o=(i=n.split(";")).length;r<o;r+=1)if(null!==(a=i[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=E(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(a=this.search.val().length,n.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),L.call(this,"selection","focusser")},initContainer:function(){var t,n,i=this.container,a=this.dropdown,o=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==u.PAGE_UP&&e.which!==u.PAGE_DOWN)switch(e.which){case u.UP:case u.DOWN:return this.moveHighlight(e.which===u.UP?-1:1),void k(e);case u.ENTER:return this.selectHighlighted(),void k(e);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(e),void k(e)}else k(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==u.TAB&&!u.isControl(e)&&!u.isFunctionKey(e)&&e.which!==u.ESC){if(!1!==this.opts.openOnEnter||e.which!==u.ENTER){if(e.which==u.DOWN||e.which==u.UP||e.which==u.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void k(e)}return e.which==u.DELETE||e.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void k(e)):void 0}k(e)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),k(n)}))),a.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){k(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=n.val(),r=null;t.query({matcher:function(e,n,i){var o=g(a,t.id(i));return o&&(r=i),o},callback:e.isFunction(i)?function(){i(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,n,i){var a=0,r=this;if(this.findHighlightableChoices().each2((function(e,t){if(g(r.id(t.data("select2-data")),r.opts.element.val()))return a=e,!1})),!1!==i&&(!0===n&&a>=0?this.highlight(a):this.highlight(0)),!0===n){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(function t(n){var i=0;return e.each(n,(function(e,n){n.children?i+=t(n.children):i++})),i}(t.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),a.empty(),null!==e&&(n=this.opts.formatSelection(e,a,this.opts.escapeMarkup)),n!==t&&a.append(n),(i=this.opts.formatSelectionCssClass(e,a))!==t&&a.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,a=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=a.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){a.opts.element.val(e?a.id(e):""),a.updateSelection(e),a.setPlaceholder(),n&&a.triggerChange({added:e,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),a=E(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){i.push(n.optionToData(t))})),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=v(n.val(),t.separator),r=[];t.query({matcher:function(n,i,o){var s=e.grep(a,(function(e){return g(e,t.id(o))})).length;return s&&r.push(o),s},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<a.length;n++)for(var o=a[n],s=0;s<r.length;s++){var l=r[s];if(g(o,t.id(l))){e.push(l),r.splice(s,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),L.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(t){i.search[0].focus(),i.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),a=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=function(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var a=document.selection.createRange();i=document.selection.createRange().text.length,a.moveStart("character",-t.value.length),n=a.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var s=i;return n.which==u.LEFT&&a.length?s=a:n.which==u.RIGHT?s=r.length?r:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=a.length?a:r):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),s=r.length?r:null):n.which==u.ENTER&&(s=null),this.selectChoice(s),k(n),void(s&&s.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void k(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void k(n);case u.ENTER:return this.selectHighlighted(),void k(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void k(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||k(n),n.which===u.ENTER&&k(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],a=this;e(t).each((function(){_(a.id(this),n)<0&&(n.push(a.id(this)),i.push(this))})),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,a,r=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?o:s,c=this.id(n),d=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(a=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(a),r&&l.find(".select2-search-choice-close").on("mousedown",k).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),k(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var n,i,a=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=_(this.id(n),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),o=this;a.each2((function(e,t){_(o.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),r.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&O(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var t,n,i,a,r=y(this.search);t=function(t){if(!o){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(o=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(o)}return o.text(t.val()),o.width()}(this.search)+10,n=this.search.offset().left,(a=(i=this.selection.width())-(n-this.selection.offset().left)-r)<t&&(a=i-r),a<40&&(a=i-r),a<=0&&(a=t),this.search.width(Math.floor(a))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){_(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)g(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var a,r=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,r.id);r.setVal(n),r.updateSelection(t),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(a,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var i,a,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();a=this.data(),t||(t=[]),i=e.map(t,(function(e){return r.opts.id(e)})),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),e.fn.select2=function(){var n,i,a,r,o,s=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:e.extend({},s[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),(i=o?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(_(s[0],l)<0)throw"Unknown method: "+s[0];if(r=t,(i=e(this).data("select2"))===t)return;if("container"===(a=s[0])?r=i.container:"dropdown"===a?r=i.dropdown:(u[a]&&(a=u[a]),r=i[a].apply(i,s.slice(1))),_(s[0],c)>=0||_(s[0],d)>=0&&1==s.length)return!1}})),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var a=[];return S(e.text,n.term,a,i),a.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return m(""+t).toUpperCase().indexOf(m(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,a){var r,o,s,l,c,d=e,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(o=-1,s=0,l=a.tokenSeparators.length;s<l&&(c=a.tokenSeparators[s],!((o=e.indexOf(c))>=0));s++);if(o<0)break;if(r=e.substring(0,o),e=e.substring(o+c.length),r.length>0&&(r=a.createSearchChoice.call(this,r,n))!==t&&null!==r&&a.id(r)!==t&&null!==a.id(r)){for(u=!1,s=0,l=n.length;s<l;s++)if(g(a.id(r),a.id(n[s]))){u=!0;break}u||i(r)}}return d!==e?e:void 0},escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:M,local:T,tags:j},util:{debounce:w,markMatch:S,escapeMarkup:C,stripDiacritics:m},class:{abstract:n,single:i,multi:a}}}function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function m(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return f[e]||e}))}function _(e,t){for(var n=0,i=t.length;n<i;n+=1)if(g(e,t[n]))return n;return-1}function g(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function v(t,n){var i,a,r;if(null===t||t.length<1)return[];for(a=0,r=(i=t.split(n)).length;a<r;a+=1)i[a]=e.trim(i[a]);return i}function y(e){return e.outerWidth(!1)-e.width()}function b(n){var i="keyup-change-value";n.on("keydown",(function(){e.data(n,i)===t&&e.data(n,i,n.val())})),n.on("keyup",(function(){var a=e.data(n,i);a!==t&&n.val()!==a&&(e.removeData(n,i),n.trigger("keyup-change"))}))}function w(e,n,i){var a;return i=i||t,function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout((function(){n.apply(i,t)}),e)}}function k(e){e.preventDefault(),e.stopPropagation()}function x(t,n,i){var a,r,o=[];(a=e.trim(t.attr("class")))&&e((a=""+a).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(a=e.trim(n.attr("class")))&&e((a=""+a).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(r=i(this))&&o.push(r)})),t.attr("class",o.join(" "))}function S(e,t,n,i){var a=m(e.toUpperCase()).indexOf(m(t.toUpperCase())),r=t.length;a<0?n.push(i(e)):(n.push(i(e.substring(0,a))),n.push("<span class='select2-match'>"),n.push(i(e.substring(a,a+r))),n.push("</span>"),n.push(i(e.substring(a+r,e.length))))}function C(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function M(n){var i,a=null,r=n.quietMillis||100,o=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,r=o,c=n.transport||e.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);i=i?i.call(s,l.term,l.page,l.context):null,r="function"==typeof r?r.call(s,l.term,l.page,l.context):r,a&&"function"==typeof a.abort&&a.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(s)):e.extend(u,n.params)),e.extend(u,{url:r,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),a=c.call(s,u)}),r)}}function T(t){var n,i,a=t,r=function(e){return""+e.text};e.isArray(a)&&(a={results:i=a}),!1===e.isFunction(a)&&(i=a,a=function(){return i});var o=a();return o.text&&(r=o.text,e.isFunction(r)||(n=o.text,r=function(e){return e[n]})),function(t){var n,i=t.term,o={results:[]};""!==i?(n=function(a,o){var s,l;if((a=a[0]).children){for(l in s={},a)a.hasOwnProperty(l)&&(s[l]=a[l]);s.children=[],e(a.children).each2((function(e,t){n(t,s.children)})),(s.children.length||t.matcher(i,r(s),a))&&o.push(s)}else t.matcher(i,r(a),a)&&o.push(a)},e(a().results).each2((function(e,t){n(t,o.results)})),t.callback(o)):t.callback(a())}}function j(n){var i=e.isFunction(n);return function(a){var r=a.term,o={results:[]},s=i?n(a):n;e.isArray(s)&&(e(s).each((function(){var e=this.text!==t,n=e?this.text:this;(""===r||a.matcher(r,n))&&o.results.push(e?this:{id:this,text:this})})),a.callback(o))}}function O(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function D(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function L(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function E(t,n){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var n=!!e.fn.prop;function i(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function a(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;n=a[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!==t.offsetX)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=i.offset();r.clk_x=t.pageX-o.left,r.clk_y=t.pageY-o.top}else r.clk_x=t.pageX-n.offsetLeft,r.clk_y=t.pageY-n.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function r(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(i){if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var a,o,s,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),a=i.type||this.attr2("method"),(s=(s="string"==typeof(o=i.url||this.attr2("action"))?e.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:a||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=i.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var u,h=[],f=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=e.param(i.data,d)),i.beforeSubmit&&!1===i.beforeSubmit(f,this,i))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(f,d);u&&(p=p?p+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+p,i.data=null):i.data=p;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(e,t,n){for(var a=i.context||this,r=0,o=m.length;r<o;r++)m[r].apply(a,[e,t,n||l,l])},i.error){var g=i.error;i.error=function(e,t,n){var a=i.context||this;g.apply(a,[e,t,n,l])}}if(i.complete){var v=i.complete;i.complete=function(e,t){var n=i.context||this;v.apply(n,[e,t,l])}}var y=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=t.fileapi&&t.formdata;r("fileAPI :"+k);var x,S=(y||w)&&!k;!1!==i.iframe&&(i.iframe||S)?i.closeKeepAlive?e.get(i.closeKeepAlive,(function(){x=M(f)})):x=M(f):x=(y||w)&&k?function(t){for(var n=new FormData,r=0;r<t.length;r++)n.append(t[r].name,t[r].value);if(i.extraData){var o=function(t){var n,a,r=e.param(t,i.traditional).split("&"),o=r.length,s=[];for(n=0;n<o;n++)r[n]=r[n].replace(/\+/g," "),a=r[n].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}(i.extraData);for(r=0;r<o.length;r++)o[r]&&n.append(o[r][0],o[r][1])}i.data=null;var s=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:a||"POST"});i.uploadProgress&&(s.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,n=e.loaded||e.position,a=e.total;e.lengthComputable&&(t=Math.ceil(n/a*100)),i.uploadProgress(e,n,a,t)}),!1),t});s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){i.formData?t.data=i.formData:t.data=n,l&&l.call(this,e,t)},e.ajax(s)}(f):e.ajax(i),l.removeData("jqxhr").data("jqxhr",x);for(var C=0;C<h.length;C++)h[C]=null;return this.trigger("form-submit-notify",[this,i]),this;function M(t){var o,s,c,d,u,f,p,m,_,g,v,y,b=l[0],w=e.Deferred();if(w.abort=function(e){m.abort(e)},t)for(s=0;s<h.length;s++)o=e(h[s]),n?o.prop("disabled",!1):o.removeAttr("disabled");if((c=e.extend(!0,{},e.ajaxSettings,i)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(g=(f=e(c.iframeTarget)).attr2("name"))?u=g:f.attr2("name",u):(f=e('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(e){}f.attr("src",c.iframeSrc),m.error=n,c.error&&c.error.call(c.context,m,n,t),d&&e.event.trigger("ajaxError",[m,c,n]),c.complete&&c.complete.call(c.context,m,n)}},(d=c.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&e.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(g=_.name)&&!_.disabled&&(c.extraData=c.extraData||{},c.extraData[g]=_.value,"image"==_.type&&(c.extraData[g+".x"]=b.clk_x,c.extraData[g+".y"]=b.clk_y));var k=1,x=2;function S(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){r("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){r("cannot get iframe.contentDocument: "+n),t=e.document}return t}var C=e("meta[name=csrf-token]").attr("content"),M=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),a&&!/post/i.test(a)||b.setAttribute("method","POST"),n!=c.url&&b.setAttribute("action",c.url),c.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout((function(){v=!0,E(k)}),c.timeout));var i=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(e.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+c.extraData[o].name+'">').val(c.extraData[o].value).appendTo(b)[0]):i.push(e('<input type="hidden" name="'+o+'">').val(c.extraData[o]).appendTo(b)[0]));c.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",E):p.addEventListener("load",E,!1),setTimeout((function e(){try{var t=S(p).readyState;r("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){r("Server abort: ",e," (",e.name,")"),E(x),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(e){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),t?b.setAttribute("target",t):l.removeAttr("target"),e(i).remove()}}M&&C&&(c.extraData=c.extraData||{},c.extraData[M]=C),c.forceSync?T():setTimeout(T,10);var j,O,D,L=50;function E(t){if(!m.aborted&&!D){if((O=S(p))||(r("cannot access response document"),t=x),t===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(t==x&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(O&&O.location.href!=c.iframeSrc||v){p.detachEvent?p.detachEvent("onload",E):p.removeEventListener("load",E,!1);var n,i="success";try{if(v)throw"timeout";var a="xml"==c.dataType||O.XMLDocument||e.isXMLDoc(O);if(r("isXml="+a),!a&&window.opera&&(null===O.body||!O.body.innerHTML)&&--L)return r("requeing onLoad callback, DOM not available"),void setTimeout(E,250);var o=O.body?O.body:O.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=O.XMLDocument?O.XMLDocument:O,a&&(c.dataType="xml"),m.getResponseHeader=function(e){return{"content-type":c.dataType}[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=O.getElementsByTagName("pre")[0],_=O.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==s&&!m.responseXML&&m.responseText&&(m.responseXML=A(m.responseText));try{j=P(m,s,c)}catch(e){i="parsererror",m.error=n=e||i}}catch(e){r("error caught: ",e),i="error",m.error=n=e||i}m.aborted&&(r("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,j,"success",m),w.resolve(m.responseText,"success",m),d&&e.event.trigger("ajaxSuccess",[m,c])):i&&(void 0===n&&(n=m.statusText),c.error&&c.error.call(c.context,m,i,n),w.reject(m,"error",n),d&&e.event.trigger("ajaxError",[m,c,n])),d&&e.event.trigger("ajaxComplete",[m,c]),d&&!--e.active&&e.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,i),D=!0,c.timeout&&clearTimeout(y),setTimeout((function(){c.iframeTarget?f.attr("src",c.iframeSrc):f.remove(),m.responseXML=null}),100)}}}var A=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},I=e.parseJSON||function(e){return window.eval("("+e+")")},P=function(t,n,i){var a=t.getResponseHeader("content-type")||"",r="xml"===n||!n&&a.indexOf("xml")>=0,o=r?t.responseXML:t.responseText;return r&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,n)),"string"==typeof o&&("json"===n||!n&&a.indexOf("json")>=0?o=I(o):("script"===n||!n&&a.indexOf("javascript")>=0)&&e.globalEval(o)),o};return w}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(r("DOM not ready, queuing ajaxForm"),e((function(){e(n.s,n.c).ajaxForm(t)})),this):(r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,a)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var a=[];if(0===this.length)return a;var r,o,s,l,c,d,u,h=this[0],f=n?h.getElementsByTagName("*"):h.elements;if(!f)return a;for(r=0,d=f.length;r<d;r++)if((s=(c=f[r]).name)&&!c.disabled)if(n&&h.clk&&"image"==c.type)h.clk==c&&(a.push({name:s,value:e(c).val(),type:c.type}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}));else if((l=e.fieldValue(c,!0))&&l.constructor==Array)for(i&&i.push(c),o=0,u=l.length;o<u;o++)a.push({name:s,value:l[o]});else if(t.fileapi&&"file"==c.type){i&&i.push(c);var p=c.files;if(p.length)for(o=0;o<p.length;o++)a.push({name:s,value:p[o],type:c.type});else a.push({name:s,value:"",type:c.type})}else null!=l&&(i&&i.push(c),a.push({name:s,value:l,type:c.type,required:c.required}));if(!n&&h.clk){var m=e(h.clk),_=m[0];(s=_.name)&&!_.disabled&&"image"==_.type&&(a.push({name:s,value:m.val()}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var a=e.fieldValue(this,t);if(a&&a.constructor==Array)for(var r=0,o=a.length;r<o;r++)n.push({name:i,value:a[r]});else null!=a&&n.push({name:this.name,value:a})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,a=this.length;i<a;i++){var r=this[i],o=e.fieldValue(r,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(n,o):n.push(o))}return n},e.fieldValue=function(t,n){var i=t.name,a=t.type,r=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!t.checked||("submit"==a||"image"==a)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var o=t.selectedIndex;if(o<0)return null;for(var s=[],l=t.options,c="select-one"==a,d=c?o+1:l.length,u=c?o:0;u<d;u++){var h=l[u];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,a=this.tagName.toLowerCase();n.test(i)||"textarea"==a?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}(void 0!==e?e:window.Zepto)}).call(this,n(0))},function(e,t,n){(function(e){window.jQuery&&function(e){if(!e.support.opacity&&!e.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}e.fn.rating=function(t){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){e.fn.rating.apply(e(this),n)}))}return e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]),this}t=e.extend({},e.fn.rating.options,t||{});return e.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=e(this),a=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=e(this.form||document.body),o=r.data("rating");o&&o.call==e.fn.rating.calls||(o={count:0,call:e.fn.rating.calls});var s=o[a]||r.data("rating"+a);s&&(n=s.data("rating")),s&&n?n.count++:((n=e.extend({},t||{},(e.metadata?i.metadata():e.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=o.count++,s=e('<span class="star-rating-control"/>'),i.before(s),s.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),s.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){e(this).rating("drain"),e(this).addClass("star-rating-hover")})).on("mouseout",(function(){e(this).rating("draw"),e(this).removeClass("star-rating-hover")})).on("click",(function(){e(this).rating("select")})).data("rating",n)));var l=e('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var c=(e.fn.width?l.width():0)||n.starWidth,d=n.count%n.split,u=Math.floor(c/n.split);l.width(u).find("a").css({"margin-left":"-"+d*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){e(this).rating("fill"),e(this).rating("focus")})).on("mouseout",(function(){e(this).rating("draw"),e(this).rating("blur")})).on("click",(function(){e(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&e(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(t){if(t.selfTriggered)return!1;e(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=o[a]=s,n.context=r,i.data("rating",n),s.data("rating",n),l.data("rating",n),r.data("rating",o),r.data("rating"+a,s)})),e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.focus&&t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e("INPUT"==this.tagName?this:null);t.blur&&t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;e.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+e.serial).addClass("star-rating-hover"))},drain:function(){var e=this.data("rating");if(!e)return this;e.readOnly||e.rater.children().filter(".rater-"+e.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var n=e(t.current),i=n.length?n.prevAll().addBack().filter(".rater-"+t.serial):null;i&&i.addClass("star-rating-on"),t.cancel[t.readOnly||t.required?"hide":"show"](),this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==t||this.length>1){if("number"==typeof t)return e(i.stars[t]).rating("select",void 0,n);if("string"==typeof t)return e.each(i.stars,(function(){e(this).data("rating.input").val()==t&&e(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var a=e(i.current?i.current.data("rating.input"):null),r=e(i.inputs).filter(":checked");return e(i.inputs).not(a).prop("checked",!1),a.prop("checked",!0),e(a.length?a:r).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(a[0],[a.val(),e("a",i.current)[0]]),this}},readOnly:function(t,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!t&&null!=t),n?e(i.inputs).attr("disabled","disabled"):e(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},e((function(){e("input[type=radio].star").rating()}))}(e)}).call(this,n(0))},function(e,t,n){"use strict";var i=n(177);n.n(i).a},function(e,t,n){"use strict";var i=n(178);n.n(i).a},function(e,t,n){"use strict";var i=n(179);n.n(i).a},function(e,t,n){"use strict";var i=n(180);n.n(i).a},,function(e,t,n){"use strict";var i=n(181);n.n(i).a},function(e,t,n){"use strict";var i=n(182);n.n(i).a},function(e,t,n){"use strict";var i=n(183);n.n(i).a},function(e,t,n){"use strict";var i=n(184);n.n(i).a},function(e,t,n){"use strict";var i=n(185);n.n(i).a},function(e,t,n){"use strict";var i=n(186);n.n(i).a},function(e,t,n){"use strict";var i=n(187);n.n(i).a},function(e,t,n){"use strict";var i=n(188);n.n(i).a},function(e,t,n){"use strict";var i=n(189);n.n(i).a},function(e,t,n){"use strict";var i=n(190);n.n(i).a},function(e,t,n){"use strict";var i=n(191);n.n(i).a},function(e,t,n){"use strict";var i=n(192);n.n(i).a},function(e,t,n){"use strict";var i=n(193);n.n(i).a},function(e,t,n){"use strict";var i=n(194);n.n(i).a},function(e,t,n){"use strict";var i=n(195);n.n(i).a},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"getGalaxyInstance",(function(){return r.a})),n.d(t,"setGalaxyInstance",(function(){return r.b})),n.d(t,"TracksterUI",(function(){return o.a})),n.d(t,"phyloviz",(function(){return I})),n.d(t,"SweepsterVisualization",(function(){return B})),n.d(t,"SweepsterVisualizationView",(function(){return X})),n.d(t,"createTabularDatasetChunkedView",(function(){return j.d})),n.d(t,"History",(function(){return le.a})),n.d(t,"HistoryContents",(function(){return ce.a})),n.d(t,"history",(function(){return ge.b})),n.d(t,"HistoryViewAnnotated",(function(){return ye})),n.d(t,"HistoryCopyDialog",(function(){return he.a})),n.d(t,"HDAListItemEdit",(function(){return be.a})),n.d(t,"HDAModel",(function(){return we.a})),n.d(t,"LegacyGridView",(function(){return Te})),n.d(t,"create_chart",(function(){return De})),n.d(t,"create_histogram",(function(){return Le})),n.d(t,"ToolshedGroups",(function(){return He})),n.d(t,"IES",(function(){return Be})),n.d(t,"Toast",(function(){return Z.a})),n.d(t,"trackster",(function(){return go})),n.d(t,"circster",(function(){return vo})),n.d(t,"library",(function(){return yo})),n.d(t,"multiHistory",(function(){return bo})),n.d(t,"panels",(function(){return qe.a})),n.d(t,"show_in_overlay",(function(){return O.c})),n.d(t,"hide_modal",(function(){return O.b})),n.d(t,"show_message",(function(){return O.d})),n.d(t,"show_modal",(function(){return O.e})),n.d(t,"Modal",(function(){return O.a})),n.d(t,"make_popupmenu",(function(){return F.b})),n.d(t,"make_popup_menus",(function(){return F.a})),n.d(t,"render_embedded_items",(function(){return Ge})),n.d(t,"async_save_text",(function(){return Ke})),n.d(t,"chart",(function(){return wo})),n.d(t,"chartUtilities",(function(){return ko})),n.d(t,"initMasthead",(function(){return Pt})),n.d(t,"panelManagement",(function(){return Yt})),n.d(t,"mountMakoTags",(function(){return Rt.c})),n.d(t,"mountJobMetrics",(function(){return Ht.b})),n.d(t,"mountJobParameters",(function(){return Nt.b})),n.d(t,"mountWorkflowEditor",(function(){return wr})),n.d(t,"mountPageEditor",(function(){return $r})),n.d(t,"mountPageDisplay",(function(){return qr})),n.d(t,"mountDestinationParams",(function(){return eo})),n.d(t,"mountDatasetInformation",(function(){return oo})),n.d(t,"mountDatasetStorage",(function(){return ho})),n.d(t,"mountJobInformation",(function(){return po})),n.d(t,"store",(function(){return _o.a}));var i=n(0),a=n.n(i),r=(n(701),n(6)),o=n(133),s=n(1),l=n(4),c=n.n(l),d=n(3),u=n(2),h=n.n(u),f=n(12),p=n(32),m=n(10),_=n(78),g=n(65),v=(n(421),c.a.Model.extend({is_visible:function(e,t){var n=e.getBoundingClientRect(),i=a()("svg")[0].getBoundingClientRect();return!(n.right<0||n.left>i.right||n.bottom<0||n.top>i.bottom)}})),y={drawTicks:function(e,t,n,i,a){var r=e.append("g").selectAll("g").data(t).enter().append("g").selectAll("g").data(n).enter().append("g").attr("class","tick").attr("transform",(function(e){return"rotate(".concat(180*e.angle/Math.PI-90,")translate(").concat(e.radius,",0)")})),o=[],s=[],l=function(e){return e.angle>Math.PI?"end":null};return a?(o=[0,0,0,-4],s=[4,0,"",".35em"],l=null):(o=[1,0,4,0],s=[0,4,".35em",""]),r.append("line").attr("x1",o[0]).attr("y1",o[1]).attr("x2",o[2]).attr("y1",o[3]).style("stroke","#000"),r.append("text").attr("x",s[0]).attr("y",s[1]).attr("dx",s[2]).attr("dy",s[3]).attr("text-anchor",l).attr("transform",i).text((function(e){return e.label}))},formatNum:function(e,t){if(void 0===t&&(t=2),null===e)return null;var n=null;if(Math.abs(e)<1)n=e.toPrecision(t);else{var i=Math.round(e.toPrecision(t));(e=Math.abs(e))<1e3?n=i:e<1e6?n="".concat(Math.round((i/1e3).toPrecision(3)).toFixed(0),"K"):e<1e9&&(n="".concat(Math.round((i/1e6).toPrecision(3)).toFixed(0),"M"))}return n}},b=c.a.Model.extend({}),w=c.a.View.extend({className:"circster",initialize:function(e){this.genome=e.genome,this.label_arc_height=50,this.scale=1,this.circular_views=null,this.chords_views=null,this.model.get("drawables").on("add",this.add_track,this),this.model.get("drawables").on("remove",this.remove_track,this);var t=this.model.get("config");t.get("arc_dataset_height").on("change:value",this.update_track_bounds,this),t.get("track_gap").on("change:value",this.update_track_bounds,this)},get_circular_tracks:function(){return this.model.get("drawables").filter((function(e){return"DiagonalHeatmapTrack"!==e.get("track_type")}))},get_chord_tracks:function(){return this.model.get("drawables").filter((function(e){return"DiagonalHeatmapTrack"===e.get("track_type")}))},get_tracks_bounds:function(){var e=this.get_circular_tracks(),t=this.model.get("config").get_value("arc_dataset_height"),n=this.model.get("config").get_value("track_gap"),i=Math.min(this.$el.width(),this.$el.height())-20,a=i/2-e.length*(t+n)+n-this.label_arc_height,r=f.range(a,i/2,t+n);return s.default.map(r,(function(e){return[e,e+t]}))},render:function(){var e=this,t=e.$el.width(),n=e.$el.height(),i=this.get_circular_tracks(),a=this.get_chord_tracks(),r=e.model.get("config").get_value("total_gap"),o=this.get_tracks_bounds(),s=f.select(e.$el[0]).append("svg").attr("width",t).attr("height",n).attr("pointer-events","all").append("svg:g").call(f.behavior.zoom().on("zoom",(function(){var t=f.event.scale;s.attr("transform","translate(".concat(f.event.translate,") scale(").concat(t,")")),e.scale!==t&&(e.zoom_drag_timeout&&clearTimeout(e.zoom_drag_timeout),e.zoom_drag_timeout=setTimeout((function(){}),400))}))).attr("transform","translate(".concat(t/2,",").concat(n/2,")")).append("svg:g").attr("class","tracks");this.circular_views=i.map((function(t,n){var i=new C({el:s.append("g")[0],track:t,radius_bounds:o[n],genome:e.genome,total_gap:r});return i.render(),i})),this.chords_views=a.map((function(t){var n=new M({el:s.append("g")[0],track:t,radius_bounds:o[0],genome:e.genome,total_gap:r});return n.render(),n}));var l=this.circular_views[this.circular_views.length-1].radius_bounds[1],c=[l,l+this.label_arc_height];this.label_track_view=new x({el:s.append("g")[0],track:new b,radius_bounds:c,genome:e.genome,total_gap:r}),this.label_track_view.render()},add_track:function(e){var t=this.model.get("config").get_value("total_gap");if("DiagonalHeatmapTrack"===e.get("track_type")){var n=this.circular_views[0].radius_bounds,i=new M({el:f.select("g.tracks").append("g")[0],track:e,radius_bounds:n,genome:this.genome,total_gap:t});i.render(),this.chords_views.push(i)}else{var a=this.get_tracks_bounds();s.default.each(this.circular_views,(function(e,t){e.update_radius_bounds(a[t])})),s.default.each(this.chords_views,(function(e){e.update_radius_bounds(a[0])}));var r=this.circular_views.length,o=new C({el:f.select("g.tracks").append("g")[0],track:e,radius_bounds:a[r],genome:this.genome,total_gap:t});o.render(),this.circular_views.push(o)}},remove_track:function(e,t,n){var i=this.circular_views[n.index];this.circular_views.splice(n.index,1),i.$el.remove();var a=this.get_tracks_bounds();s.default.each(this.circular_views,(function(e,t){e.update_radius_bounds(a[t])}))},update_track_bounds:function(){var e=this.get_tracks_bounds();s.default.each(this.circular_views,(function(t,n){t.update_radius_bounds(e[n])})),s.default.each(this.chords_views,(function(t){t.update_radius_bounds(e[0])}))}}),k=c.a.View.extend({tagName:"g",initialize:function(e){this.bg_stroke="#ddd",this.loading_bg_fill="#ffc",this.bg_fill="#ddd",this.total_gap=e.total_gap,this.track=e.track,this.radius_bounds=e.radius_bounds,this.genome=e.genome,this.chroms_layout=this._chroms_layout(),this.data_bounds=[],this.scale=1,this.parent_elt=f.select(this.$el[0])},get_fill_color:function(){var e=this.track.get("config").get_value("block_color");return e||(e=this.track.get("config").get_value("color")),e},render:function(){var e=this.parent_elt,t=this.chroms_layout,n=f.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]),i=e.selectAll("g").data(t).enter().append("svg:g").append("path").attr("d",n).attr("class","chrom-background").style("stroke",this.bg_stroke).style("fill",this.loading_bg_fill);i.append("title").text((function(e){return e.data.chrom}));var r=this,o=r.track.get("data_manager"),s=!o||o.data_is_ready();a.a.when(s).then((function(){a.a.when(r._render_data(e)).then((function(){i.style("fill",r.bg_fill),r.render_labels()}))}))},render_labels:function(){},update_radius_bounds:function(e){this.radius_bounds=e;var t=f.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]);this.parent_elt.selectAll("g>path.chrom-background").transition().duration(1e3).attr("d",t),this._transition_chrom_data(),this._transition_labels()},update_scale:function(e){var t=this.scale;if(this.scale=e,!(e<=t)){var n=this,i=new v;return this.parent_elt.selectAll("path.chrom-data").filter((function(e,t){return i.is_visible(this)})).each((function(t,i){var r,o=f.select(this),l=o.attr("chrom"),c=n.genome.get_chrom_region(l);n.track.get("data_manager").can_get_more_detailed_data(c)&&(r=n.track.get("data_manager").get_more_detailed_data(c,"Coverage",0,e),a.a.when(r).then((function(e){o.remove(),n._update_data_bounds();var t=s.default.find(n.chroms_layout,(function(e){return e.data.chrom===l})),i=n.get_fill_color();n._render_chrom_data(n.parent_elt,t,e).style("stroke",i).style("fill",i)})))})),n}},_transition_chrom_data:function(){var e=this.track,t=this.chroms_layout,n=this.parent_elt.selectAll("g>path.chrom-data");if(n[0].length>0){var i=this;a.a.when(e.get("data_manager").get_genome_wide_data(this.genome)).then((function(a){var r=s.default.reject(s.default.map(a,(function(e,n){var a=null,r=i._get_path_function(t[n],e);return r&&(a=r(e.data)),a})),(function(e){return null===e})),o=e.get("config").get_value("color");n.each((function(e,t){f.select(this).transition().duration(1e3).style("stroke",o).style("fill",o).attr("d",r[t])}))}))}},_transition_labels:function(){},_update_data_bounds:function(e){this.data_bounds=e||this.get_data_bounds(this.track.get("data_manager").get_genome_wide_data(this.genome)),this._transition_chrom_data()},_render_data:function(e){var t=this,n=this.chroms_layout,i=this.track,r=a.a.Deferred();return a.a.when(i.get("data_manager").get_genome_wide_data(this.genome)).then((function(a){t.data_bounds=t.get_data_bounds(a),i.get("config").set_value("min_value",t.data_bounds[0],{silent:!0}),i.get("config").set_value("max_value",t.data_bounds[1],{silent:!0});var o=s.default.zip(n,a);s.default.each(o,(function(n){var i=n[0],a=n[1];return t._render_chrom_data(e,i,a)}));var l=t.get_fill_color();t.parent_elt.selectAll("path.chrom-data").style("stroke",l).style("fill",l),r.resolve(e)})),r},_render_chrom_data:function(e,t,n){},_get_path_function:function(e,t){},_chroms_layout:function(){var e=this.genome.get_chroms_info(),t=f.layout.pie().value((function(e){return e.len})).sort(null)(e),n=2*Math.PI*this.total_gap/e.length;return s.default.map(t,(function(e,t){var i=e.endAngle-n;return e.endAngle=i>e.startAngle?i:e.startAngle,e}))}}),x=k.extend({initialize:function(e){k.prototype.initialize.call(this,e),this.innerRadius=this.radius_bounds[0],this.radius_bounds[0]=this.radius_bounds[1],this.bg_stroke="#fff",this.bg_fill="#fff",this.min_arc_len=.05},_render_data:function(e){var t=this,n=e.selectAll("g");n.selectAll("path").attr("id",(function(e){return"label-".concat(e.data.chrom)})),n.append("svg:text").filter((function(e){return e.endAngle-e.startAngle>t.min_arc_len})).attr("text-anchor","middle").append("svg:textPath").attr("class","chrom-label").attr("xlink:href",(function(e){return"#label-".concat(e.data.chrom)})).attr("startOffset","25%").text((function(e){return e.data.chrom}));var i=s.default.filter(this.chroms_layout,(function(e){return e.endAngle-e.startAngle>t.min_arc_len}));this.drawTicks(this.parent_elt,i,(function(e){var n=(e.endAngle-e.startAngle)/e.value,i=f.range(0,e.value,25e6).map((function(i,a){return{radius:t.innerRadius,angle:i*n+e.startAngle,label:0===a?0:a%3?null:t.formatNum(i)}}));return i.length<4&&(i[i.length-1].label=t.formatNum(Math.round((i[i.length-1].angle-e.startAngle)/n))),i}),(function(e){return e.angle>Math.PI?"rotate(180)translate(-16)":null}))}});s.default.extend(x.prototype,y);var S=k.extend({initialize:function(e){k.prototype.initialize.call(this,e);var t=this.track.get("config");t.get("min_value").on("change:value",this._update_min_max,this),t.get("max_value").on("change:value",this._update_min_max,this),t.get("color").on("change:value",this._transition_chrom_data,this)},_update_min_max:function(){var e=this.track.get("config"),t=[e.get_value("min_value"),e.get_value("max_value")];this._update_data_bounds(t),this.parent_elt.selectAll(".min_max").text((function(e,n){return t[n]}))},_quantile:function(e,t){return e.sort(f.ascending),f.quantile(e,t)},_render_chrom_data:function(e,t,n){var i=this._get_path_function(t,n);return i?e.datum(n.data).append("path").attr("class","chrom-data").attr("chrom",t.data.chrom).attr("d",i):null},_get_path_function:function(e,t){if("string"==typeof t||!t.data||0===t.data.length)return null;var n=f.scale.linear().domain(this.data_bounds).range(this.radius_bounds).clamp(!0),i=f.scale.linear().domain([0,t.data.length]).range([e.startAngle,e.endAngle]),a=f.svg.line.radial().interpolate("linear").radius((function(e){return n(e[1])})).angle((function(e,t){return i(t)}));return f.svg.area.radial().interpolate(a.interpolate()).innerRadius(n(0)).outerRadius(a.radius()).angle(a.angle())},render_labels:function(){var e=this,t=this.drawTicks(this.parent_elt,[this.chroms_layout[0]],this._data_bounds_ticks_fn(),(function(){return"rotate(90)"}),!0).classed("min_max",!0);s.default.each(t,(function(t){a()(t).click((function(){new _.a.ConfigSettingCollectionView({collection:e.track.get("config")}).render_in_modal("Configure Track")}))}))},_transition_labels:function(){if(0!==this.data_bounds.length){var e=this,t=s.default.filter(this.chroms_layout,(function(e){return e.endAngle-e.startAngle>.08})),n=s.default.filter(t,(function(e,t){return t%3==0})),i=s.default.flatten(s.default.map(n,(function(t){return e._data_bounds_ticks_fn()(t)})));this.parent_elt.selectAll("g.tick").data(i).transition().attr("transform",(function(e){return"rotate(".concat(180*e.angle/Math.PI-90,")translate(").concat(e.radius,",0)")}))}},_data_bounds_ticks_fn:function(){var e=this;return function(t){return[{radius:e.radius_bounds[0],angle:t.startAngle,label:e.formatNum(e.data_bounds[0])},{radius:e.radius_bounds[1],angle:t.startAngle,label:e.formatNum(e.data_bounds[1])}]}},get_data_bounds:function(e){}});s.default.extend(S.prototype,y);var C=S.extend({get_data_bounds:function(e){var t=s.default.flatten(s.default.map(e,(function(e){return e?s.default.map(e.data,(function(e){return parseInt(e[1],10)||0})):0})));return[s.default.min(t),this._quantile(t,.98)||s.default.max(t)]}}),M=k.extend({render:function(){var e=this;a.a.when(e.track.get("data_manager").data_is_ready()).then((function(){a.a.when(e.track.get("data_manager").get_genome_wide_data(e.genome)).then((function(t){var n=[],i=e.genome.get_chroms_info();s.default.each(t,(function(t,a){var r=i[a].chrom,o=s.default.map(t.data,(function(t){var n=e._get_region_angle(r,t[1]),i=e._get_region_angle(t[3],t[4]);return{source:{startAngle:n,endAngle:n+.01},target:{startAngle:i,endAngle:i+.01}}}));n=n.concat(o)})),e.parent_elt.append("g").attr("class","chord").selectAll("path").data(n).enter().append("path").style("fill",e.get_fill_color()).attr("d",f.svg.chord().radius(e.radius_bounds[0])).style("opacity",1)}))}))},update_radius_bounds:function(e){this.radius_bounds=e,this.parent_elt.selectAll("path").transition().attr("d",f.svg.chord().radius(this.radius_bounds[0]))},_get_region_angle:function(e,t){var n=s.default.find(this.chroms_layout,(function(t){return t.data.chrom===e}));return n.endAngle-(n.endAngle-n.startAngle)*(n.data.len-t)/n.data.len}}),T={GalaxyApp:c.a.View.extend({initialize:function(){m.a.cssLoadFile("static/style/circster.css");var e=new p.a.Genome(window.galaxy_config.app.genome),t=new p.a.GenomeVisualization(window.galaxy_config.app.viz_config);t.get("config").add([{key:"arc_dataset_height",label:"Arc Dataset Height",type:"int",value:25,view:"circster"},{key:"track_gap",label:"Gap Between Tracks",type:"int",value:5,view:"circster"},{key:"total_gap",label:"Gap [0-1]",type:"float",value:.4,view:"circster",hidden:!0}]),new w({el:a()("#center .unified-panel-body"),genome:e,model:t}).render(),a()("#center .unified-panel-header-inner").append("".concat(window.galaxy_config.app.viz_config.title," ").concat(window.galaxy_config.app.viz_config.dbkey));var n=g.a.create_icon_buttons_menu([{icon_class:"plus-button",title:h()("Add tracks"),on_click:function(){p.a.select_datasets({dbkey:t.get("dbkey")},(function(e){t.add_tracks(e)}))}},{icon_class:"gear",title:h()("Settings"),on_click:function(){new _.a.ConfigSettingCollectionView({collection:t.get("config")}).render_in_modal("Configure Visualization")}},{icon_class:"disk--arrow",title:h()("Save"),on_click:function(){var e=Object(r.a)();e.modal.show({title:h()("Saving..."),body:"progress"}),a.a.ajax({url:"".concat(Object(d.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:t.get("vis_id"),title:t.get("title"),dbkey:t.get("dbkey"),type:"trackster",vis_json:JSON.stringify(t)}}).success((function(n){e.modal.hide(),t.set("vis_id",n.vis_id)})).error((function(){e.modal.show({title:h()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){e.modal.hide()}}})}))}},{icon_class:"cross-circle",title:h()("Close"),on_click:function(){window.top.location="".concat(Object(d.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}});n.$el.attr("style","float: right"),a()("#center .unified-panel-header-inner").append(n.$el),a()(".menu-button").tooltip({placement:"bottom"})}})},j=n(55),O=n(27),D=c.a.View.extend({className:"UserMenuBase",isAcceptableValue:function(e,t,n){var i,a=e.val(),r=e.attr("displayLabel")||e.attr("id").replace("phyloViz","");return i=a,isNaN(parseFloat(i))||!isFinite(i)?(alert("".concat(r," is not a number!")),!1):a>n?(alert("".concat(r," is too large.")),!1):!(a<t)||(alert("".concat(r," is too small.")),!1)},hasIllegalJsonCharacters:function(e){return-1!==e.val().search(/"|'|\\/)&&(alert("Named fields cannot contain these illegal characters: double quote(\"), single guote('), or back slash(\\). "),!0)}});function L(){var e=this,t=f.layout.hierarchy().sort(null).value(null),n=360,i="Linear",a=18,r=200,o=0,s=.5,l=50;return e.leafHeight=function(t){return void 0===t?a:(a=t,e)},e.layoutMode=function(t){return void 0===t?i:(i=t,e)},e.layoutAngle=function(t){return void 0===t?n:isNaN(t)||t<0||t>360?e:(n=t,e)},e.separation=function(t){return void 0===t?r:(r=t,e)},e.links=function(e){return f.layout.tree().links(e)},e.nodes=function(c,d){"[object Array]"===toString.call(c)&&(c=c[0]);var u=t.call(e,c,d),h=[],f=0,p=0;return window._d=c,window._nodes=u,u.forEach((function(e){f=e.depth>f?e.depth:f,h.push(e)})),h.forEach((function(e){e.children||(p+=1,e.depth=f)})),a="Circular"===i?n/p:a,o=0,function e(t,n,i,a){var c=t.children,d=0,u=t.dist||s;u=u>1?1:u,t.dist=u,t.y0=null!==a?a.y0+u*r:l;c?(c.forEach((function(a){a.parent=t,d+=e(a,n,i,t)})),t.x0=d/c.length):(t.x0=o*i,o+=1);return t.x=t.x0,t.y=t.y0,t.x0}(h[0],f,a,null),h},e}var E=p.a.Visualization.extend({defaults:{layout:"Linear",separation:250,leafHeight:18,type:"phyloviz",title:h()("Title"),scaleFactor:1,translate:[0,0],fontSize:12,selectedNode:null,nodeAttrChangedTime:0},initialize:function(e){this.set("dataset",new j.a({id:e.dataset_id}))},root:{},toggle:function(e){void 0!==e&&(e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null))},toggleAll:function(e){e.children&&0!==e.children.length&&(e.children.forEach(this.toggleAll),this.toggle(e))},getData:function(){return this.root},save:function(){!function e(t){delete t.parent,t._selected&&delete t._selected;t.children&&t.children.forEach(e);t._children&&t._children.forEach(e)}(this.root);var e=a.a.extend(!0,{},this.attributes);return e.selectedNode=null,Object(O.d)("Saving to Galaxy","progress"),a.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{config:JSON.stringify(e),type:"phyloviz"},success:function(e){Object(O.b)()}})}}),A=c.a.View.extend({defaults:{nodeRadius:4.5},stdInit:function(e){this.model.on("change:separation change:leafHeight change:fontSize change:nodeAttrChangedTime",this.updateAndRender,this),this.vis=e.vis,this.i=0,this.maxDepth=-1,this.width=e.width,this.height=e.height},updateAndRender:function(e){e=e||this.model.root,this.renderNodes(e),this.renderLinks(e),this.addTooltips()},renderLinks:function(e){var t=this.vis.selectAll("g.completeLink").data(this.tree.links(this.nodes),(function(e){return e.target.id})),n=function(e){e.pos0="".concat(e.source.y0," ").concat(e.source.x0),e.pos1="".concat(e.source.y0," ").concat(e.target.x0),e.pos2="".concat(e.target.y0," ").concat(e.target.x0)};t.enter().insert("svg:g","g.node").attr("class","completeLink").append("svg:path").attr("class","link").attr("d",(function(e){return n(e),"M ".concat(e.pos0," L ").concat(e.pos1)})),t.transition().duration(500).select("path.link").attr("d",(function(e){return n(e),"M ".concat(e.pos0," L ").concat(e.pos1," L ").concat(e.pos2)})),t.exit().remove()},selectNode:function(e){f.selectAll("g.node").classed("selectedHighlight",(function(t){return e.id===t.id&&(e._selected?(delete e._selected,!1):(e._selected=!0,!0))})),this.model.set("selectedNode",e),a()("#phyloVizSelectedNodeName").val(e.name),a()("#phyloVizSelectedNodeDist").val(e.dist),a()("#phyloVizSelectedNodeAnnotation").val(e.annotation||"")},addTooltips:function(){a()(".tooltip").remove(),a()(".node").attr("data-original-title",(function(){var e=this.__data__,t=e.annotation||"None";return e?"".concat(e.name?"".concat(e.name,"<br/>"):"","Dist: ").concat(e.dist," <br/>Annotation1: ").concat(t).concat(e.bootstrap?"<br/>Confidence level: ".concat(Math.round(100*e.bootstrap)):""):""})).tooltip({placement:"top",trigger:"hover"})}}).extend({initialize:function(e){this.margins=e.margins,this.layoutMode="Linear",this.stdInit(e),this.layout(),this.updateAndRender(this.model.root)},layout:function(){this.tree=(new L).layoutMode("Linear"),this.diagonal=f.svg.diagonal().projection((function(e){return[e.y,e.x]}))},renderNodes:function(e){var t=this,n="".concat(t.model.get("fontSize"),"px");t.tree.separation(t.model.get("separation")).leafHeight(t.model.get("leafHeight"));var i=t.tree.separation(t.model.get("separation")).nodes(t.model.root),a=t.vis.selectAll("g.node").data(i,(function(e){return e.name+e.id||(e.id=++t.i)}));t.nodes=i,t.duration=500;var r=a.enter().append("svg:g").attr("class","node").on("dblclick",(function(){f.event.stopPropagation()})).on("click",(function(e){if(f.event.altKey)t.selectNode(e);else{if(e.children&&0===e.children.length)return;t.model.toggle(e),t.updateAndRender(e)}}));"[object Array]"===toString.call(e)&&(e=e[0]),r.attr("transform",(function(t){return"translate(".concat(e.y0,",").concat(e.x0,")")})),r.append("svg:circle").attr("r",1e-6).style("fill",(function(e){return e._children?"lightsteelblue":"#fff"})),r.append("svg:text").attr("class","nodeLabel").attr("x",(function(e){return e.children||e._children?-10:10})).attr("dy",".35em").attr("text-anchor",(function(e){return e.children||e._children?"end":"start"})).style("fill-opacity",1e-6);var o=a.transition().duration(500);o.attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})),o.select("circle").attr("r",t.defaults.nodeRadius).style("fill",(function(e){return e._children?"lightsteelblue":"#fff"})),o.select("text").style("fill-opacity",1).style("font-size",n).text((function(e){return e.name&&""!==e.name?e.name:e.bootstrap?Math.round(100*e.bootstrap):""}));var s=a.exit().transition().duration(500).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6),i.forEach((function(e){e.x0=e.x,e.y0=e.y}))}}),I=c.a.View.extend({className:"phyloviz",initialize:function(e){var t=this;t.MIN_SCALE=.05,t.MAX_SCALE=5,t.MAX_DISPLACEMENT=500,t.margins=[10,60,10,80],t.width=a()("#PhyloViz").width(),t.height=a()("#PhyloViz").height(),t.radius=t.width,t.data=e.data,a()(window).resize((function(){t.width=a()("#PhyloViz").width(),t.height=a()("#PhyloViz").height(),t.render()})),t.phyloTree=new E(e.config),t.phyloTree.root=t.data,t.zoomFunc=f.behavior.zoom().scaleExtent([t.MIN_SCALE,t.MAX_SCALE]),t.zoomFunc.translate(t.phyloTree.get("translate")),t.zoomFunc.scale(t.phyloTree.get("scaleFactor")),t.navMenu=new P(t),t.settingsMenu=new Y({phyloTree:t.phyloTree}),t.nodeSelectionView=new R({phyloTree:t.phyloTree}),t.search=new H,setTimeout((function(){t.zoomAndPan()}),1e3)},render:function(){var e=this;a()("#PhyloViz").empty(),e.mainSVG=f.select("#PhyloViz").append("svg:svg").attr("width",e.width).attr("height",e.height).attr("pointer-events","all").call(e.zoomFunc.on("zoom",(function(){e.zoomAndPan()}))),e.boundingRect=e.mainSVG.append("svg:rect").attr("class","boundingRect").attr("width",e.width).attr("height",e.height).attr("stroke","black").attr("fill","white"),e.vis=e.mainSVG.append("svg:g").attr("class","vis"),e.layoutOptions={model:e.phyloTree,width:e.width,height:e.height,vis:e.vis,margins:e.margins},a()("#title").text("Phylogenetic Tree from ".concat(e.phyloTree.get("title"),":")),new A(e.layoutOptions)},zoomAndPan:function(e){var t,n;void 0!==e&&(t=e.zoom,n=e.translate);var i,a=this.zoomFunc.scale(),r=this.zoomFunc.translate(),o="";switch(t){case"reset":a=1,r=[0,0];break;case"+":a*=1.1;break;case"-":a*=.9;break;default:"number"==typeof t?a=t:null!==f.event&&(a=f.event.scale)}if(!(a<this.MIN_SCALE||a>this.MAX_SCALE)){if(this.zoomFunc.scale(a),i="translate(".concat(this.margins[3],",").concat(this.margins[0],") scale(").concat(a,")"),null!==f.event)o="translate(".concat(f.event.translate,")");else{if(void 0!==n){var s=n.split(",")[0],l=n.split(",")[1];isNaN(s)||isNaN(l)||(r=[r[0]+parseFloat(s),r[1]+parseFloat(l)])}this.zoomFunc.translate(r),o="translate(".concat(r,")")}this.phyloTree.set("scaleFactor",a),this.phyloTree.set("translate",r),this.vis.attr("transform",o+i)}},reloadViz:function(){var e=this,t=a()("#phylovizNexSelector :selected").val();a.a.getJSON(e.phyloTree.get("dataset").url(),{tree_index:t,data_type:"raw_data"},(function(t){e.data=t.data,e.config=t,e.render()}))}}),P=c.a.View.extend({initialize:function(e){var t=this;t.phylovizView=e,a()("#panelHeaderRightBtns").empty(),a()("#phyloVizNavBtns").empty(),a()("#phylovizNexSelector").off(),t.initNavBtns(),t.initRightHeaderBtns(),a()("#phylovizNexSelector").off().on("change",(function(){t.phylovizView.reloadViz()}))},initRightHeaderBtns:function(){var e=this,t=g.a.create_icon_buttons_menu([{icon_class:"gear",title:h()("PhyloViz Settings"),on_click:function(){a()("#SettingsMenu").show(),e.settingsMenu.updateUI()}},{icon_class:"disk",title:h()("Save visualization"),on_click:function(){var t=a()("#phylovizNexSelector option:selected").text();t&&e.phylovizView.phyloTree.set("title",t),e.phylovizView.phyloTree.save()}},{icon_class:"chevron-expand",title:"Search / Edit Nodes",on_click:function(){a()("#nodeSelectionView").show()}},{icon_class:"information",title:h()("Phyloviz Help"),on_click:function(){window.open("https://galaxyproject.org/learn/visualization/phylogenetic-tree/")}}],{tooltip_config:{placement:"bottom"}});a()("#panelHeaderRightBtns").append(t.$el)},initNavBtns:function(){var e=this,t=g.a.create_icon_buttons_menu([{icon_class:"zoom-in",title:h()("Zoom in"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"+"})}},{icon_class:"zoom-out",title:h()("Zoom out"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"-"})}},{icon_class:"arrow-circle",title:"Reset Zoom/Pan",on_click:function(){e.phylovizView.zoomAndPan({zoom:"reset"})}}],{tooltip_config:{placement:"bottom"}});a()("#phyloVizNavBtns").append(t.$el)}}),Y=D.extend({className:"Settings",initialize:function(e){var t=this;t.phyloTree=e.phyloTree,t.el=a()("#SettingsMenu"),t.inputs={separation:a()("#phyloVizTreeSeparation"),leafHeight:a()("#phyloVizTreeLeafHeight"),fontSize:a()("#phyloVizTreeFontSize")},a()("#settingsCloseBtn").off().on("click",(function(){t.el.hide()})),a()("#phylovizResetSettingsBtn").off().on("click",(function(){t.resetToDefaults()})),a()("#phylovizApplySettingsBtn").off().on("click",(function(){t.apply()}))},apply:function(){var e=this;e.isAcceptableValue(e.inputs.separation,50,2500)&&e.isAcceptableValue(e.inputs.leafHeight,5,30)&&e.isAcceptableValue(e.inputs.fontSize,5,20)&&a.a.each(e.inputs,(function(t,n){e.phyloTree.set(t,n.val())}))},updateUI:function(){var e=this;a.a.each(e.inputs,(function(t,n){n.val(e.phyloTree.get(t))}))},resetToDefaults:function(){a()(".tooltip").remove();var e=this;a.a.each(e.phyloTree.defaults,(function(t,n){e.phyloTree.set(t,n)})),e.updateUI()},render:function(){}}),R=D.extend({className:"Settings",initialize:function(e){var t=this;t.el=a()("#nodeSelectionView"),t.phyloTree=e.phyloTree,t.UI={enableEdit:a()("#phylovizEditNodesCheck"),saveChanges:a()("#phylovizNodeSaveChanges"),cancelChanges:a()("#phylovizNodeCancelChanges"),name:a()("#phyloVizSelectedNodeName"),dist:a()("#phyloVizSelectedNodeDist"),annotation:a()("#phyloVizSelectedNodeAnnotation")},t.valuesOfConcern={name:null,dist:null,annotation:null},a()("#nodeSelCloseBtn").off().on("click",(function(){t.el.hide()})),t.UI.saveChanges.off().on("click",(function(){t.updateNodes()})),t.UI.cancelChanges.off().on("click",(function(){t.cancelChanges()})),function(e){e.fn.enable=function(t){return e(this).each((function(){t?e(this).removeAttr("disabled"):e(this).attr("disabled","disabled")}))}}(a.a),t.UI.enableEdit.off().on("click",(function(){t.toggleUI()}))},toggleUI:function(){var e=this,t=e.UI.enableEdit.is(":checked");t||e.cancelChanges(),a.a.each(e.valuesOfConcern,(function(n,i){e.UI[n].enable(t)})),t?(e.UI.saveChanges.show(),e.UI.cancelChanges.show()):(e.UI.saveChanges.hide(),e.UI.cancelChanges.hide())},cancelChanges:function(){var e=this,t=e.phyloTree.get("selectedNode");t&&a.a.each(e.valuesOfConcern,(function(n,i){e.UI[n].val(t[n])}))},updateNodes:function(){var e=this,t=e.phyloTree.get("selectedNode");if(t){if(!e.isAcceptableValue(e.UI.dist,0,1)||e.hasIllegalJsonCharacters(e.UI.name)||e.hasIllegalJsonCharacters(e.UI.annotation))return;a.a.each(e.valuesOfConcern,(function(n,i){t[n]=e.UI[n].val()})),e.phyloTree.set("nodeAttrChangedTime",new Date)}else alert("No node selected")}}),H=D.extend({initialize:function(){var e=this;a()("#phyloVizSearchBtn").on("click",(function(){var t=a()("#phyloVizSearchTerm"),n=a()("#phyloVizSearchCondition").val().split("-"),i=n[0],r=n[1];e.hasIllegalJsonCharacters(t),"dist"===i&&e.isAcceptableValue(t,0,1),e.searchTree(i,r,t.val())}))},searchTree:function(e,t,n){f.selectAll("g.node").classed("searchHighlight",(function(i){var a=i[e];if(null!=a)if("dist"===e)switch(t){case"greaterEqual":return a>=+n;case"lesserEqual":return a<=+n;default:return}else if("name"===e||"annotation"===e)return-1!==a.toLowerCase().indexOf(n.toLowerCase())}))}}),N=n(100),$=n(108),F=n(54),W=c.a.Model.extend({defaults:{inputs:null,values:null}}),z=c.a.Model.extend({defaults:{tool:null,tree_data:null},initialize:function(e){var t=this;this.get("tool").get("inputs").each((function(e){e.on("change:min change:max change:num_samples",(function(e){e.get("in_ptree")&&t.set_tree_data()}),t),e.on("change:in_ptree",(function(e){e.get("in_ptree")?t.add_param(e):t.remove_param(e),t.set_tree_data()}),t)})),e.config&&s.default.each(e.config,(function(e){var n=t.get("tool").get("inputs").find((function(t){return t.get("name")===e.name}));t.add_param(n),n.set(e)}))},add_param:function(e){e.get("ptree_index")||(e.set("in_ptree",!0),e.set("ptree_index",this.get_tree_params().length))},remove_param:function(e){e.set("in_ptree",!1),e.set("ptree_index",null),Object(s.default)(this.get_tree_params()).each((function(e,t){e.set("ptree_index",t+1)}))},set_tree_data:function(){var e=s.default.map(this.get_tree_params(),(function(e){return{param:e,samples:e.get_samples()}})),t=0;this.set("tree_data",{name:"Root",id:t++,children:0!==e.length?function e(n,i){var a=n[i],r=a.param,o=a.samples;return n.length-1===i?s.default.map(o,(function(e){return{id:t++,name:e,param:r,value:e}})):s.default.map(o,(function(a){return{id:t++,name:a,param:r,value:a,children:e(n,i+1)}}))}(e,0):null})},get_tree_params:function(){return Object(s.default)(this.get("tool").get("inputs").where({in_ptree:!0})).sortBy((function(e){return e.get("ptree_index")}))},get_num_leaves:function(){return this.get_tree_params().reduce((function(e,t){return e*t.get_samples().length}),1)},get_node_settings:function(e){var t=this.get("tool").get_inputs_dict(),n=e.parent;if(n)for(;0!==n.depth;)t[n.param.get("name")]=n.value,n=n.parent;var i=this,a=function e(t,n){return t.param&&(n[t.param.get("name")]=t.value),t.children?s.default.flatten(s.default.map(t.children,(function(t){return e(t,s.default.clone(n))}))):new W({inputs:i.get("tool").get("inputs"),values:n})}(e,t);return s.default.isArray(a)||(a=[a]),a},get_connected_nodes:function(e){for(var t=[],n=e.parent;n;)t.push(n),n=n.parent;return s.default.flatten([t,function e(t){return t.children?s.default.flatten([t,s.default.map(t.children,(function(t){return e(t)}))]):t}(e)])},get_leaf:function(e){for(var t,n=this.get("tree_data");n.children;)t=n.children,n=s.default.find(t,(function(t){return e[t.param.get("name")]===t.value}));return n},toJSON:function(){return this.get_tree_params().map((function(e){return{name:e.get("name"),min:e.get("min"),max:e.get("max"),num_samples:e.get("num_samples")}}))}}),U=c.a.Model.extend({defaults:{track:null,mode:"Pack",settings:null,regions:null},initialize:function(e){if(this.set("regions",e.regions),e.track){var t=s.default.extend({data_url:"".concat(Object(d.getAppRoot)(),"dummy1"),converted_datasets_state_url:"".concat(Object(d.getAppRoot)(),"dummy2")},e.track);this.set("track",N.a.object_from_template(t,{},null))}},same_settings:function(e){var t=this.get("settings"),n=e.get("settings");for(var i in t)if(!n[i]||t[i]!==n[i])return!1;return!0},toJSON:function(){return{track:this.get("track").to_dict(),settings:this.get("settings"),regions:this.get("regions")}}}),V=c.a.Collection.extend({model:U}),B=p.a.Visualization.extend({defaults:s.default.extend({},p.a.Visualization.prototype.defaults,{dataset:null,tool:null,parameter_tree:null,regions:null,tracks:null,default_mode:"Pack"}),initialize:function(e){this.set("dataset",new j.a(e.dataset)),this.set("tool",new $.a.Tool(e.tool)),this.set("regions",new p.a.GenomeRegionCollection(e.regions)),this.set("tracks",new V(e.tracks));var t=this.get("tool");this.set("tool_with_samplable_inputs",t),t.remove_inputs(["data","hidden_data","conditional","text"]),this.set("parameter_tree",new z({tool:t,config:e.tree_config}))},add_track:function(e){this.get("tracks").add(e)},toJSON:function(){return{id:this.get("id"),title:"Parameter exploration for dataset '".concat(this.get("dataset").get("name"),"'"),type:"sweepster",dataset_id:this.get("dataset").id,tool_id:this.get("tool").id,regions:this.get("regions").toJSON(),tree_config:this.get("parameter_tree").toJSON(),tracks:this.get("tracks").toJSON()}}}),q=c.a.View.extend({tagName:"tr",TILE_LEN:250,initialize:function(e){this.canvas_manager=e.canvas_manager,this.render(),this.model.on("change:track change:mode",this.draw_tiles,this)},render:function(){var e=this.model.get("settings"),t=e.get("values"),n=a()("<td/>").addClass("settings").appendTo(this.$el),i=a()("<div/>").addClass("track-info").hide().appendTo(n);i.append(a()("<div/>").css("font-weight","bold").text("Track Settings")),e.get("inputs").each((function(e){i.append("".concat(e.get("label"),": ").concat(t[e.get("name")],"<br/>"))}));var r=this;a()("<button/>").appendTo(i).text("Run on complete dataset").click((function(){i.toggle(),r.trigger("run_on_dataset",e)}));var o=g.a.create_icon_buttons_menu([{title:h()("Settings"),icon_class:"gear track-settings",on_click:function(){i.toggle()}},{title:h()("Remove"),icon_class:"cross-circle",on_click:function(){r.$el.remove(),a()(".tooltip").remove()}}]);n.prepend(o.$el),this.model.get("regions").each((function(){r.$el.append(a()("<td/>").addClass("tile").html(a()("<img/>").attr("src","".concat(Object(d.getAppRoot)(),"images/loading_large_white_bg.gif"))))})),this.model.get("track")&&this.draw_tiles()},draw_tiles:function(){var e=this,t=this.model.get("track"),n=this.model.get("regions"),i=this.$el.find("td.tile");t&&a.a.when(t.data_manager.data_is_ready()).then((function(r){n.each((function(n,r){var o=n.length()/e.TILE_LEN,s=1/o,l=e.model.get("mode");a.a.when(t.data_manager.get_data(n,l,o,{})).then((function(o){var c=e.canvas_manager.new_canvas();c.width=e.TILE_LEN,c.height=t.get_canvas_height(o,l,s,c.width),t.draw_tile(o,c.getContext("2d"),l,n,s),a()(i[r]).empty().append(c)}))}))}))}}),G=c.a.View.extend({number_input_template:'<div class="form-row-input sweep"><input class="min" type="text" size="6" value="<%= min %>"> - <input class="max" type="text" size="6" value="<%= max %>"> samples: <input class="num_samples" type="text" size="1" value="<%= num_samples %>"></div>',select_input_template:'<div class="form-row-input sweep"><%= options %></div>',initialize:function(e){this.$el=e.tool_row,this.render()},render:function(){var e=this.model,t=this.$el.find(".form-row-input"),n=null;if(t.find(":input").change((function(){e.set("value",a()(this).val())})),e instanceof $.a.IntegerToolParameter)n=a()(s.default.template(this.number_input_template)(this.model.toJSON()));else if(e instanceof $.a.SelectToolParameter){var i=s.default.map(this.$el.find("select option"),(function(e){return a()(e).val()})).join(", ");n=a()(s.default.template(this.select_input_template)({options:i}))}n.insertAfter(t);var r=this,o=g.a.create_icon_buttons_menu([{title:h()("Add parameter to tree"),icon_class:"plus-button",on_click:function(){e.set("in_ptree",!0),t.hide(),n.show(),a()(this).hide(),r.$el.find(".icon-button.toggle").show()}},{title:h()("Remove parameter from tree"),icon_class:"toggle",on_click:function(){e.set("in_ptree",!1),n.hide(),t.show(),a()(this).hide(),r.$el.find(".icon-button.plus-button").show()}}],{});this.$el.prepend(o.$el),e.get("in_ptree")?(t.hide(),r.$el.find(".icon-button.plus-button").hide()):(r.$el.find(".icon-button.toggle").hide(),n.hide()),s.default.each(["min","max","num_samples"],(function(t){n.find(".".concat(t)).change((function(){e.set(t,parseFloat(a()(this).val()))}))}))}}),J=c.a.View.extend({className:"tree-design",initialize:function(e){this.render()},render:function(){var e=new $.a.ToolFormView({model:this.model.get("tool")});e.render(),this.$el.append(e.$el);var t=this.model.get("tool").get("inputs");this.$el.find(".form-row").not(".form-actions").each((function(e){new G({model:t.at(e),tool_row:a()(this)})}))}}),K=c.a.View.extend({className:"tool-parameter-tree",initialize:function(e){this.model.on("change:tree_data",this.render,this)},render:function(){this.$el.children().remove();var e=this.model.get_tree_params();if(e.length){this.width=100*(2+e.length),this.height=15*this.model.get_num_leaves();var t=this,n=f.layout.cluster().size([this.height,this.width-160]),i=f.svg.diagonal().projection((function(e){return[e.y,e.x]})),r=n.nodes(this.model.get("tree_data")),o=s.default.uniq(s.default.pluck(r,"y"));s.default.each(e,(function(e,n){var i=o[n+1],r=a()("#center").position().left;t.$el.append(a()("<div>").addClass("label").text(e.get("label")).css("left",i+r))}));var l=f.select(this.$el[0]).append("svg").attr("width",this.width).attr("height",this.height+30).append("g").attr("transform","translate(40, 20)");l.selectAll("path.link").data(n.links(r)).enter().append("path").attr("class","link").attr("d",i);var c=l.selectAll("g.node").data(r).enter().append("g").attr("class","node").attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})).on("mouseover",(function(e){var n=s.default.pluck(t.model.get_connected_nodes(e),"id");c.filter((function(e){return void 0!==s.default.find(n,(function(t){return t===e.id}))})).style("fill","#f00")})).on("mouseout",(function(){c.style("fill","#000")}));c.append("circle").attr("r",9),c.append("text").attr("dx",(function(e){return e.children?-12:12})).attr("dy",3).attr("text-anchor",(function(e){return e.children?"end":"start"})).text((function(e){return e.name}))}}}),X=c.a.View.extend({className:"Sweepster",helpText:"<div><h4>Getting Started</h4><ol><li>Create a parameter tree by using the icons next to the tool's parameter names to add or remove parameters.<li>Adjust the tree by using parameter inputs to select min, max, and number of samples<li>Run the tool with different settings by clicking on tree nodes</ol></div>",initialize:function(e){this.canvas_manager=new p.a.CanvasManager(this.$el.parents("body")),this.tool_param_tree_view=new K({model:this.model.get("parameter_tree")}),this.track_collection_container=a()("<table/>").addClass("tracks"),this.model.get("parameter_tree").on("change:tree_data",this.handle_node_clicks,this);var t=this;this.model.get("tracks").each((function(e){e.get("track").view=t})),this.config=_.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"},{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"}],{})},render:function(){var e=new J({model:this.model.get("parameter_tree")});a()("#left").append(e.$el);var t=this,n=t.model.get("regions"),i=a()("<tr/>").appendTo(this.track_collection_container);n.each((function(e){i.append(a()("<th>").text(e.toString()))})),i.children().first().attr("colspan",2);var r=a()("<div>").addClass("tiles");a()("#right").append(r.append(this.track_collection_container)),t.model.get("tracks").each((function(e){t.add_track(e)}));var o=a()(this.helpText).addClass("help"),l=g.a.create_icon_buttons_menu([{title:h()("Close"),icon_class:"cross-circle",on_click:function(){a()(".tooltip").remove(),o.remove()}}]);o.prepend(l.$el.css("float","right")),a()("#center").append(o),this.tool_param_tree_view.render(),a()("#center").append(this.tool_param_tree_view.$el),this.handle_node_clicks();var c=g.a.create_icon_buttons_menu([{icon_class:"chevron-expand",title:"Set display mode"},{icon_class:"cross-circle",title:h()("Close"),on_click:function(){window.top.location="".concat(Object(d.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}}),u={};s.default.each(["Squish","Pack"],(function(e){u[e]=function(){t.model.set("default_mode",e),t.model.get("tracks").each((function(t){t.set("mode",e)}))}})),Object(F.b)(c.$el.find(".chevron-expand"),u),c.$el.attr("style","float: right"),a()("#right .unified-panel-header-inner").append(c.$el)},get_base_color:function(e){return this.config.get_value("".concat(e.toLowerCase(),"_color"))||this.config.get_value("n_color")},run_tool_on_dataset:function(e){var t=this.model.get("tool"),n=t.get("name"),i=this.model.get("dataset");t.set_input_values(e.get("values")),a.a.when(t.rerun(i)).then((function(e){})),Object(O.e)("Running ".concat(n," on complete dataset"),"".concat(n," is running on dataset '").concat(i.get("name"),"'. Outputs are in the dataset's history."),{Ok:function(){Object(O.b)()}})},add_track:function(e){var t=this,n=this.model.get("parameter_tree");t.model.add_track(e);var i=new q({model:e,canvas_manager:t.canvas_manager});return i.on("run_on_dataset",t.run_tool_on_dataset,t),t.track_collection_container.append(i.$el),i.$el.hover((function(){var i=n.get_leaf(e.get("settings").get("values")),a=s.default.pluck(n.get_connected_nodes(i),"id");f.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").filter((function(e){return void 0!==s.default.find(a,(function(t){return t===e.id}))})).style("fill","#f00")}),(function(){f.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").style("fill","#000")})),e},handle_node_clicks:function(){var e=this,t=this.model.get("parameter_tree"),n=this.model.get("regions");f.select(this.tool_param_tree_view.$el[0]).selectAll("g.node").on("click",(function(i,r){var o=e.model.get("tool"),l=e.model.get("dataset"),c=t.get_node_settings(i),d=a.a.Deferred();c.length>=10?Object(O.e)("Whoa there cowboy!","You clicked on a node to try ".concat(e.model.get("tool").get("name")," with ").concat(c.length," different combinations of settings. You can only run 10 jobs at a time."),{Ok:function(){Object(O.b)(),d.resolve(!1)}}):d.resolve(!0),a.a.when(d).then((function(t){if(t){var i=s.default.map(c,(function(t){var i=new U({settings:t,regions:n,mode:e.model.get("default_mode")});return e.add_track(i),i}));s.default.each(i,(function(t,i){setTimeout((function(){o.set_input_values(t.get("settings").get("values")),a.a.when(o.rerun(l,n)).then((function(n){var i=n.first(),a=i.get("track_config");a.dataset=i,a.tool=null,a.prefs=e.config.to_key_value_dict();var r=N.a.object_from_template(a,e,null);r.init_for_tool_data(),t.set("track",r)}))}),1e4*i)}))}}))}))}}),Q=n(11),Z=n(16),ee=n(81),te=n(80),ne=n(102),ie={LibraryDatasetView:c.a.View.extend({el:"#center",model:null,options:{},defaults:{edit_mode:!1},events:{"click .toolbtn_modify_dataset":"enableModification","click .toolbtn_cancel_modifications":"render","click .toolbtn-download-dataset":"downloadDataset","click .toolbtn-import-dataset":"importIntoHistory","click .copy-link-to-clipboard":"copyToClipboard","click .toolbtn_save_modifications":"saveModifications","click .toolbtn_detect_datatype":"detectDatatype"},select_genome:null,select_extension:null,list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be. You can also upload compressed files, which will automatically be decompressed."},list_genomes:[],initialize:function(e){this.options=s.default.extend(this.options,e),this.fetchExtAndGenomes(),this.options.id&&this.fetchDataset()},fetchDataset:function(e){var t=Object(r.a)();this.options=s.default.extend(this.options,e),this.model=new ee.a.Item({id:this.options.id});var n=this;this.model.fetch({success:function(){n.options.show_version?n.fetchVersion():n.render()},error:function(e,n){void 0!==n.responseJSON?Z.a.error("".concat(n.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){t.libraries.library_router.back()}}):Z.a.error("An error occurred. Click this to go back.","",{onclick:function(){t.libraries.library_router.back()}})}})},render:function(e){this.options=s.default.extend(this.options,e),a()(".tooltip").remove();var t=this.templateDataset();this.$el.html(t({item:this.model,rootPath:Object(d.getAppRoot)()})),a()(".peek").html(this.model.get("peek")),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("initialize")},_mountNametags:function(e){var t=this.$el.find(".nametags")[0];if(t){var n=this.model.get("tags");"string"==typeof n&&this.model.set({tags:n.split(", ")});var i=this.model.attributes,a=i.id,r=i.model_class,o=i.tags,s="".concat(r,"-").concat(a);Object(ne.b)({storeKey:s,tags:o},t)}},fetchVersion:function(e){this.options=s.default.extend(this.options,e);var t=this;this.options.ldda_id?(this.ldda=new ee.a.Ldda({id:this.options.ldda_id}),this.ldda.url="".concat(this.ldda.urlRoot+this.model.id,"/versions/").concat(this.ldda.id),this.ldda.fetch({success:function(){t.renderVersion()},error:function(e,t){void 0!==t.responseJSON?Z.a.error(t.responseJSON.err_msg):Z.a.error("An error occurred.")}})):(this.render(),Z.a.error("Library dataset version requested but no id provided."))},renderVersion:function(){a()(".tooltip").remove();var e=this.templateVersion();this.$el.html(e({item:this.model,ldda:this.ldda,rootPath:Object(d.getAppRoot)()})),a()(".peek").html(this.ldda.get("peek"))},enableModification:function(){a()(".tooltip").remove();var e=this.templateModifyDataset();this.$el.html(e({item:this.model,rootPath:Object(d.getAppRoot)()})),this.renderSelectBoxes({genome_build:this.model.get("genome_build"),file_ext:this.model.get("file_ext")}),a()(".peek").html(this.model.get("peek")),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("listener")},downloadDataset:function(){var e="".concat(Object(d.getAppRoot)(),"api/libraries/datasets/download/uncompressed"),t={ld_ids:this.id};this.processDownload(e,t)},processDownload:function(e,t,n){if(e&&t){t="string"==typeof t?t:a.a.param(t);var i="";a.a.each(t.split("&"),(function(){var e=this.split("=");i+='<input type="hidden" name="'.concat(e[0],'" value="').concat(e[1],'" />')})),a()('<form action="'.concat(e,'" method="').concat(n||"post",'">').concat(i,"</form>")).appendTo("body").submit().remove(),Z.a.info("Your download will begin soon.")}},importIntoHistory:function(){this.refreshUserHistoriesList((function(e){var t=Object(r.a)(),n=e.templateBulkImportInModal();e.modal=t.modal,e.modal.show({closing_events:!0,title:h()("Import into History"),body:n({histories:e.histories.models}),buttons:{Import:function(){e.importCurrentIntoHistory()},Close:function(){t.modal.hide()}}})}))},refreshUserHistoriesList:function(e){var t=this;this.histories=new ee.a.GalaxyHistories,this.histories.fetch({success:function(n){0===n.length?Z.a.warning("You have to create history first. Click this to do so.","",{onclick:function(){window.location=Object(d.getAppRoot)()}}):e(t)},error:function(e,t){void 0!==t.responseJSON?Z.a.error(t.responseJSON.err_msg):Z.a.error("An error occurred.")}})},importCurrentIntoHistory:function(){this.modal.disableButton("Import");var e=this.modal.$("input[name=history_name]").val(),t=this;if(""!==e)a.a.post("".concat(Object(d.getAppRoot)(),"api/histories"),{name:e}).done((function(e){t.processImportToHistory(e.id)})).fail((function(e,t,n){Z.a.error("An error occurred.")})).always((function(){t.modal.enableButton("Import")}));else{var n=a()(this.modal.$el).find("select[name=dataset_import_single] option:selected").val();this.processImportToHistory(n),this.modal.enableButton("Import")}},processImportToHistory:function(e){var t=Object(r.a)(),n=new ee.a.HistoryItem;n.url="".concat(n.urlRoot+e,"/contents"),a.a.getJSON("".concat(Object(d.getAppRoot)(),"history/set_as_current?id=").concat(e)),n.save({content:this.id,source:"library"},{success:function(){t.modal.hide(),Z.a.success("Dataset imported. Click this to start analyzing it.","",{onclick:function(){window.location=Object(d.getAppRoot)()}})},error:function(e,t){void 0!==t.responseJSON?Z.a.error("Dataset not imported. ".concat(t.responseJSON.err_msg)):Z.a.error("An error occurred. Dataset not imported. Please try again.")}})},detectDatatype:function(e){var t=this.model;t.set("file_ext","auto"),this._submitModification(t)},saveModifications:function(e){var t=!1,n=this.model,i=this.$el.find(".input_dataset_name").val();if(void 0!==i&&i!==n.get("name")){if(!(i.length>0))return void Z.a.warning("Library dataset name has to be at least 1 character long.");n.set("name",i),t=!0}var a=this.$el.find(".input_dataset_misc_info").val();void 0!==a&&a!==n.get("misc_info").trim()&&(n.set("misc_info",a),t=!0);var r=this.$el.find(".input_dataset_message").val();void 0!==r&&r!==n.get("message")&&(n.set("message",r),t=!0);var o=this.select_genome.$el.select2("data").id;void 0!==o&&o!==n.get("genome_build")&&(n.set("genome_build",o),t=!0);var s=this.select_extension.$el.select2("data").id;void 0!==s&&s!==n.get("file_ext")&&(n.set("file_ext",s),t=!0),t?this._submitModification(n):(this.render(),Z.a.info("Nothing has changed."))},_submitModification:function(e){var t=this;e.save(null,{patch:!0,success:function(e){t.render(),Z.a.success("Changes to library dataset saved.")},error:function(e,t){void 0!==t.responseJSON?Z.a.error(t.responseJSON.err_msg):Z.a.error("An error occurred while attempting to update the library dataset.")}})},copyToClipboard:function(e){e.preventDefault();var t=c.a.history.location.href;-1!==t.lastIndexOf("/permissions")&&(t=t.substr(0,t.lastIndexOf("/permissions"))),window.prompt("Copy to clipboard: Ctrl+C, Enter",t)},_extractIds:function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n].id);return t},fetchExtAndGenomes:function(){var e=this;0==this.list_genomes.length&&m.a.get({url:"".concat(Object(d.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(t){for(var n in t)e.list_extensions.push({id:t[n].extension,text:t[n].extension,description:t[n].description,description_url:t[n].description_url});e.list_extensions.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.list_extensions.unshift(e.auto)}}),0==this.list_extensions.length&&m.a.get({url:"".concat(Object(d.getAppRoot)(),"api/genomes"),success:function(t){for(var n in t)e.list_genomes.push({id:t[n][1],text:t[n][0]});e.list_genomes.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0}))}})},renderSelectBoxes:function(e){var t="?",n="auto";void 0!==e&&(void 0!==e.genome_build&&(t=e.genome_build),void 0!==e.file_ext&&(n=e.file_ext)),this.select_genome=new te.a.View({css:"dataset-genome-select",data:this.list_genomes,container:this.$el.find("#dataset_genome_select"),value:t}),this.select_extension=new te.a.View({css:"dataset-extension-select",data:this.list_extensions,container:this.$el.find("#dataset_extension_select"),value:n})},templateDataset:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <button data-toggle="tooltip" data-placement="top" title="Download dataset"\n                        class="btn btn-secondary toolbtn-download-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-download"></span>\n                        &nbsp;Download\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Import dataset into history"\n                        class="btn btn-secondary toolbtn-import-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-book"></span>\n                        &nbsp;to History\n                    </button>\n                    <% if (item.get("can_user_modify")) { %>\n                        <button data-toggle="tooltip" data-placement="top" title="Modify library item"\n                            class="btn btn-secondary toolbtn_modify_dataset toolbar-item mr-1" type="button">\n                            <span class="fa fa-pencil"></span>\n                            &nbsp;Modify\n                        </button>\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Attempt to detect the format of dataset"\n                            class="btn btn-secondary toolbtn_detect_datatype toolbar-item mr-1" type="button">\n                            <span class="fa fa-undo"></span>\n                            &nbsp;Auto-detect datatype\n                        </button>\n                    <% } %>\n                    <% if (item.get("can_user_manage")) { %>\n                        <a href="<% rootPath %>/libraries/folders/<%- item.get("folder_id") %>/dataset/<%- item.id %>/permissions">\n                            <button data-toggle="tooltip" data-placement="top" title="Manage permissions"\n                                class="btn btn-secondary toolbtn_change_permissions toolbar-item mr-1"\n                                type="button">\n                                <span class="fa fa-group"></span>\n                                &nbsp;Permissions\n                            </button>\n                        </a>\n                    <% } %>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="<% rootPath %>/libraries">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>/libraries/folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here"><%- path_item[1] %></span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <% if (item.get("is_unrestricted")) { %>\n                    <div>\n                        This dataset is unrestricted so everybody with the link can access it.\n                        Just share <span class="copy-link-to-clipboard"><a href="javascript:void(0)">this page</a></span>.\n                    </div>\n                <% } %>\n\n                \x3c!-- TABLE START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td><%= _.escape(item.get("name")) %></td>\n                        </tr>\n                        <% if (item.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(item.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(item.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(item.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(item.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(item.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(item.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("message")) { %>\n                            <tr>\n                                <th scope="row">Description</th>\n                                <td scope="row"><%= _.escape(item.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Misc. blurb</th>\n                                <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Misc. info</th>\n                                <td scope="row"><%= _.escape(item.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("uuid") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">UUID</th>\n                                <td scope="row"><%= _.escape(item.get("uuid")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("state") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">State</th>\n                                <td scope="row"><%= _.escape(item.get("state")) %></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <% if (item.get("job_stderr")) { %>\n                        <h4>Job Standard Error</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stderr")) %>\n                        </pre>\n                    <% } %>\n                    <% if (item.get("job_stdout")) { %>\n                        <h4>Job Standard Output</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stdout")) %>\n                        </pre>\n                    <% } %>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                    <% if (item.get("has_versions")) { %>\n                        <div>\n                            <h3>Expired versions:</h3>\n                            <ul>\n                                <% _.each(item.get("expired_versions"), function(version) { %>\n                                    <li>\n                                        <a title="See details of this version"\n                                            href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>/versions/<%- version[0] %>">\n                                            <%- version[1] %>\n                                        </a>\n                                    </li>\n                                <% }) %>\n                            <ul>\n                        </div>\n                    <% } %>\n\n                \x3c!-- TABLE END --\x3e\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateVersion:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go to latest dataset"\n                            class="btn btn-secondary toolbar-item mr-1" type="button">\n                            <span class="fa fa-caret-left fa-lg"></span>\n                            &nbsp;Latest dataset\n                        </button>\n                    </a>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries"  href="<% rootPath %>libraries">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="alert alert-warning">\n                    This is an expired version of the library dataset: <%= _.escape(item.get("name")) %>\n                </div>\n\n                \x3c!-- DATASET START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th scope="row" id="id_row" data-id="<%= _.escape(ldda.id) %>">Name</th>\n                            <td><%= _.escape(ldda.get("name")) %></td>\n                        </tr>\n                        <% if (ldda.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(ldda.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(ldda.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(ldda.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(ldda.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(ldda.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(ldda.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("message")) { %>\n                            <tr>\n                                <th scope="row">Message</th>\n                                <td scope="row"><%= _.escape(ldda.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous blurb</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous information</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                \x3c!-- DATASET END --\x3e\n                </div>\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateModifyDataset:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="<% rootPath %>libraries">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td>\n                                <input class="input_dataset_name form-control" type="text"\n                                    placeholder="name" value="<%= _.escape(item.get("name")) %>">\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Data type</th>\n                            <td>\n                                <span id="dataset_extension_select" class="dataset-extension-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Genome build</th>\n                            <td>\n                                <span id="dataset_genome_select" class="dataset-genome-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Size</th>\n                            <td><%= _.escape(item.get("file_size")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date last updated (UTC)</th>\n                            <td><%= _.escape(item.get("update_time")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date uploaded (UTC)</th>\n                            <td><%= _.escape(item.get("date_uploaded")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Uploaded by</th>\n                            <td><%= _.escape(item.get("uploaded_by")) %></td>\n                        </tr>\n                        <tr scope="row">\n                            <th scope="row">Data Lines</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Comment Lines</th>\n                            <% if (item.get("metadata_comment_lines") === "") { %>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            <% } else { %>\n                                <td scope="row">unknown</td>\n                            <% } %>\n                        </tr>\n                        <tr>\n                            <th scope="row">Number of Columns</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Column Types</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Message</th>\n                            <td scope="row"><input class="input_dataset_message form-control" type="text"\n                                placeholder="message" value="<%= _.escape(item.get("message")) %>"></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. blurb</th>\n                            <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. information</th>\n                            <td><input class="input_dataset_misc_info form-control" type="text"\n                                placeholder="info" value="<%= _.escape(item.get("misc_info")) %>"></td>\n                        </tr>\n\n                        \x3c!-- TODO: add functionality to modify tags here --\x3e\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                </div>\n                <div class="d-flex">\n                    <button data-toggle="tooltip" data-placement="top" title="Cancel modifications"\n                        class="btn btn-secondary toolbtn_cancel_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-times"></span>\n                        &nbsp;Cancel\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications"\n                        class="btn btn-secondary toolbtn_save_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-floppy-o"></span>\n                        &nbsp;Save\n                    </button>\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateBulkImportInModal:function(){return s.default.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select id="dataset_import_single" name="dataset_import_single"\n                        style="width:50%; margin-bottom: 1em;" autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">or create new:\n                    <input type="text" name="history_name" value="" placeholder="name of the new history"\n                        style="width:50%;" />\n                </div>\n            </div>')}})},ae={LibraryView:c.a.View.extend({el:"#center",model:null,options:{},events:{"click .toolbtn_save_permissions":"savePermissions"},initialize:function(e){this.options=s.default.extend(this.options,e),this.options.id&&this.fetchLibrary()},fetchLibrary:function(e){this.options=s.default.extend(this.options,e),this.model=new ee.a.Library({id:this.options.id});var t=this;this.model.fetch({success:function(){t.options.show_permissions&&t.showPermissions()},error:function(e,t){var n=Object(r.a)();void 0!==t.responseJSON?Z.a.error("".concat(t.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){n.libraries.library_router.back()}}):Z.a.error("An error occurred. Click this to go back.","",{onclick:function(){n.libraries.library_router.back()}})}})},showPermissions:function(e){this.options=s.default.extend(this.options,e),a()(".tooltip").remove(),void 0!==this.options.fetched_permissions&&(0===this.options.fetched_permissions.access_library_role_list.length?this.model.set({is_unrestricted:!0}):this.model.set({is_unrestricted:!1}));var t=!1,n=Object(r.a)();n.user&&(t=n.user.isAdmin());var i=this.templateLibraryPermissions();this.$el.html(i({library:this.model,is_admin:t,rootPath:Object(d.getAppRoot)()}));var o=this;a.a.get("".concat(Object(d.getAppRoot)(),"api/libraries/").concat(o.id,"/permissions?scope=current")).done((function(e){o.prepareSelectBoxes({fetched_permissions:e})})).fail((function(){Z.a.error("An error occurred while attempting to fetch library permissions.")})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},_serializeRoles:function(e){for(var t=[],n=0;n<e.length;n++)t.push("".concat(e[n][1],":").concat(e[n][0]));return t},prepareSelectBoxes:function(e){this.options=s.default.extend(this.options,e);var t=this.options.fetched_permissions,n=this._serializeRoles(t.access_library_role_list),i=this._serializeRoles(t.add_library_item_role_list),a=this._serializeRoles(t.manage_library_role_list),r=this._serializeRoles(t.modify_library_role_list);this.accessSelectObject=new te.a.View(this._createSelectOptions(this,"access_perm",n,!0)),this.addSelectObject=new te.a.View(this._createSelectOptions(this,"add_perm",i,!1)),this.manageSelectObject=new te.a.View(this._createSelectOptions(this,"manage_perm",a,!1)),this.modifySelectObject=new te.a.View(this._createSelectOptions(this,"modify_perm",r,!1))},_createSelectOptions:function(e,t,n,i){return i=!0===i&&i,{minimumInputLength:0,css:t,multiple:!0,placeholder:"Click to select a role",container:e.$el.find("#".concat(t)),ajax:{url:"".concat(Object(d.getAppRoot)(),"api/libraries/").concat(e.id,"/permissions?scope=available&is_library_access=").concat(i),dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:10,page:t}},results:function(e,t){var n=10*t<e.total;return{results:e.roles,more:n}}},formatResult:function(e){return"".concat(e.name," type: ").concat(e.type)},formatSelection:function(e){return e.name},initSelection:function(e,t){var n=[];a()(e.val().split(",")).each((function(){var e=this.split(":");n.push({id:e[0],name:e[1]})})),t(n)},initialData:n,dropdownCssClass:"bigdrop"}},_extractIds:function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n].id);return t},savePermissions:function(e){var t=this,n=this._extractIds(this.accessSelectObject.$el.select2("data")),i=this._extractIds(this.addSelectObject.$el.select2("data")),r=this._extractIds(this.manageSelectObject.$el.select2("data")),o=this._extractIds(this.modifySelectObject.$el.select2("data"));a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/").concat(t.id,"/permissions?action=set_permissions"),{"access_ids[]":n,"add_ids[]":i,"manage_ids[]":r,"modify_ids[]":o}).done((function(e){t.showPermissions({fetched_permissions:e}),Z.a.success("Permissions saved.")})).fail((function(){Z.a.error("An error occurred while attempting to set library permissions.")}))},templateLibraryPermissions:function(){return s.default.template('<div class="library_style_container">\n                <div>\n                    <a href="<% rootPath %>libraries">\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Go back to the list of Libraries" class="btn btn-secondary primary-button" type="button">\n                            <span class="fa fa-list"></span>&nbsp;Libraries\n                        </button>\n                    </a>\n                </div>\n                <h1>\n                    Library: <%= _.escape(library.get("name")) %>\n                </h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any library\n                        on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types.\n                        However please read carefully the implications of such actions.\n                    <% }%>\n                </div>\n                <div class="dataset_table">\n                    <h2>Library permissions</h2>\n                    <h4>Roles that can access the library</h4>\n                    <div id="access_perm" class="access_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can access this library.\n                        If there are no access roles set on the library it is considered <strong>unrestricted</strong>.\n                    </div>\n                    <h4>Roles that can manage permissions on this library</h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions on this library\n                        (includes giving access).\n                    </div>\n                    <h4>Roles that can add items to this library</h4>\n                    <div id="add_perm" class="add_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can add items to this library (folders and datasets).\n                    </div>\n                    <h4>Roles that can modify this library</h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top"\n                        title="Save modifications made on this page"\n                        class="btn btn-secondary toolbtn_save_permissions primary-button" type="button">\n                        <span class="fa fa-floppy-o"></span>&nbsp;Save\n                    </button>\n                </div>\n            </div>')}})},re=c.a.Router.extend({initialize:function(){this.routesHit=0,c.a.history.on("route",(function(){this.routesHit++}),this),this.bind("route",this.trackPageview)},routes:{"":"libraries","page/:show_page":"libraries_page","library/:library_id/permissions":"library_permissions","folders/:folder_id/permissions":"folder_permissions","folders/:folder_id/datasets/:dataset_id":"dataset_detail","folders/:folder_id/datasets/:dataset_id/permissions":"dataset_permissions","folders/:folder_id/datasets/:dataset_id/versions/:ldda_id":"dataset_version"},back:function(){this.routesHit>1?window.history.back():this.navigate("#",{trigger:!0,replace:!0})},trackPageview:function(){var e=c.a.history.getFragment();/^\//.test(e)||""==e||(e="/".concat(e)),"undefined"!=typeof ga&&ga("send","pageview","".concat(Object(d.getAppRoot)(),"library/list").concat(e)),void 0!==window.plausible&&window.plausible("pageview ".concat(Object(d.getAppRoot)(),"library/list").concat(e)),void 0!==window._paq&&(window._paq.push(["setCustomUrl","".concat(Object(d.getAppRoot)(),"library/list").concat(e)]),window._paq.push(["trackPageView"]))}}),oe=Q.a.SessionStorageModel.extend({defaults:{with_deleted:!1,without_restricted:!1,sort_order:"asc",sort_by:"name",library_page_size:20,folder_page_size:15}}),se={GalaxyApp:c.a.View.extend({libraryToolbarView:null,libraryListView:null,library_router:null,libraryView:null,folderToolbarView:null,folderListView:null,datasetView:null,initialize:function(){var e,t,n,i,a,o,s=Object(r.a)();if(s.config.ga_code&&(e=window,t=document,n="script",i="ga",e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),ga("create",s.config.ga_code,"auto"),ga("send","pageview")),s.config.plausible_server&&s.config.plausible_domain&&document.write('<script async defer data-domain="'+s.config.plausible_domain+'" src="'+s.config.plausible_server+'/js/plausible.js"><\/script>'),s.config.matomo_server&&s.config.matomo_site_id){var l=window._paq=window._paq||[];l.push(["trackPageView"]),l.push(["enableLinkTracking"]),function(){var e=s.config.matomo_server+"/";l.push(["setTrackerUrl",e+"matomo.php"]),l.push(["setSiteId",s.config.matomo_site_id]);var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.src=e+"matomo.js",i.parentNode.insertBefore(n,i)}()}s.libraries=this,this.preferences=new oe({id:"global-lib-prefs"}),this.library_router=new re,this.library_router.on("route:dataset_detail",(function(e,t){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new ie.LibraryDatasetView({id:t,show_version:!1,show_permissions:!1})})),this.library_router.on("route:dataset_version",(function(e,t,n){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new ie.LibraryDatasetView({id:t,ldda_id:n,show_version:!0})})),this.library_router.on("route:dataset_permissions",(function(e,t){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new ie.LibraryDatasetView({id:t,show_permissions:!0})})),this.library_router.on("route:library_permissions",(function(e){s.libraries.libraryView&&s.libraries.libraryView.$el.unbind("click"),s.libraries.libraryView=new ae.LibraryView({id:e,show_permissions:!0})})),c.a.history.start({pushState:!1})}})},le=n(87),ce=n(136),de=n(147),ue=n(104),he=n(118),fe=n(83),pe=n(114),me=(n(232),c.a.View.extend(Q.a.LoggableMixin).extend({_logNamespace:"history",tagName:"div",className:"history-column flex-column flex-row-container",id:function(){return this.model?"history-column-".concat(this.model.get("id")):""},initialize:function(e){e=e||{},this.purgeAllowed=!s.default.isUndefined(e.purgeAllowed)&&e.purgeAllowed,this.panel=e.panel||this.createPanel(e),this.setUpListeners()},createPanel:function(e){return new de.a.HistoryViewEdit(s.default.defaults(e,{model:this.model,purgeAllowed:this.purgeAllowed,dragItems:!0,$scrollContainer:function(){return this.$el}}))},setUpListeners:function(){var e=this;this.once("rendered",(function(){e.trigger("rendered:initial",e)})),this.setUpPanelListeners()},setUpPanelListeners:function(){var e=this;this.listenTo(this.panel,{rendered:function(){e.trigger("rendered",e)},"view:expanded view:rendered":function(e){e.$(".rerun-btn").off()}},this)},inView:function(e,t){var n=this.$el.offset().left;return!(n+this.$el.width()<e)&&n<=t},$panel:function(){return this.$(".history-panel")},render:function(e){e=void 0!==e?e:"fast";var t=this.model?this.model.toJSON():{};return this.$el.html(this.template(t)),this.renderPanel(e),this.panel.$el.css("display","flex"),this.setUpBehaviors(),this},setUpBehaviors:function(){},template:function(e){return e=s.default.extend(e||{},{isCurrentHistory:this.currentHistory}),a()('\n            <div class="panel-controls mb-1">\n                <div class="flex-row flex-column-container no-gutters justify-content-between">\n                    '.concat(this.controlsLeftTemplate({history:e,view:this}),"\n                    ").concat(this.controlsRightTemplate({history:e,view:this}),'\n                </div>\n            </div>\n            <div class="inner flex-row flex-column-container">\n                <div id="history-').concat(e.id,'" class="history-column history-panel flex-column"></div>\n            </div>'))},renderPanel:function(e){return e=void 0!==e?e:"fast",this.panel.setElement(this.$panel()).render(e),this.currentHistory&&this.panel.$list().before(this.panel._renderDropTargetHelp()),this},events:{"click .switch-to":function(){this.model.setAsCurrent()},"click .delete-history":function(){var e=this;this.model._delete().done((function(t){e.render()}))},"click .undelete-history":function(){var e=this;this.model.undelete().done((function(t){e.render()}))},"click .purge-history":function(){var e=this;window.confirm(h()("This will permanently remove the data. Are you sure?"))&&this.model.purge().done((function(t){e.render()}))},"click .copy-history":"copy"},copy:function(){Object(he.a)(this.model)},controlsLeftTemplate:s.default.template('\n        <div class="text-left col-8">\n            <% if( data.history.isCurrentHistory ){ %>\n                <strong class="current-label">\n                    '.concat(h()("Current History"),"\n                </strong>\n            <% } %>\n        </div>"),{variable:"data"}),controlsRightTemplate:s.default.template('<div class="text-right col-4">\n            <% if( !data.history.purged ){ %>\n                <div class="panel-menu btn-group">\n                    <% if( !data.history.isCurrentHistory ){ %>\n                        <button class="switch-to btn btn-secondary">\n                            '.concat(h()("Switch to"),'\n                        </button>\n                    <% } %>\n                    <button \n                    history-dropdown-btn="<%= data.history.id %>" \n                    type="button"\n                    class="btn btn-secondary dropdown-toggle"\n                    data-toggle="dropdown">\n                        <span class="caret"></span>\n                    </button>\n                    <div history-dropdown-menu="<%= data.history.id %>"  class="dropdown-menu" role="menu">\n                        <% if( !data.history.deleted ){ %>\n                            <a class="dropdown-item copy-history" href="javascript:void(0);">\n                                ').concat(h()("Copy"),'\n                            </a>\n                            <a class="dropdown-item delete-history" href="javascript:void(0);">\n                                ').concat(h()("Delete"),'\n                            </a>\n                        <% } else /* if is deleted */ { %>\n                            <a class="dropdown-item undelete-history" href="javascript:void(0);">\n                                ').concat(h()("Undelete"),'\n                            </a>\n                        <% } %>\n                        <% if( data.view.purgeAllowed ){ %>\n                            <a class="dropdown-item purge-history" href="javascript:void(0);">\n                                ').concat(h()("Purge"),"\n                            </a>\n                        <% } %>\n                    </div>\n                </div>\n            <% } %>\n        </div>"),{variable:"data"}),toString:function(){return"HistoryViewColumn(".concat(this.panel?this.panel:"",")")}})),_e={MultiPanelColumns:c.a.View.extend(Q.a.LoggableMixin).extend({_logNamespace:"history",className:"multi-panel-history",initialize:function(e){e=e||{},this.log("".concat(this,".init"),e),this.$el.addClass(this.className),this.options={columnWidth:312,borderWidth:1,columnGap:8,headerHeight:29,footerHeight:0,controlsHeight:20},this.perPage=e.perPage||10,this.hdaQueue=new pe.a.NamedAjaxQueue([],!1),this.collection=null,this.columnMap={},this.columnOptions=e.columnOptions||{},this.historySearch=null,this.datasetSearch=null,this.setCollection(e.histories),this.setUpListeners()},setUpListeners:function(){var e=this;this.on("end-of-scroll",(function(){e.collection.fetchMore()}))},setCollection:function(e){return this.stopListening(this.collection),this.collection=e||new le.b,this.setUpCollectionListeners(),this.createColumns(),this.hdaQueue.clear(),this.trigger("new-collection",this),this},addModels:function(e,t,n){var i=this;return n=n||{},(e=s.default.isArray(e)?e:[e]).forEach((function(e){i.addColumn(e,!1)})),this},setUpCollectionListeners:function(){this.listenTo(this.collection,{error:this.errorHandler,add:this.addModels,"all-fetched":this._postFetchAll,"new-current":this.addAsCurrentColumn,"set-as-current":this.setCurrentHistory,"change:deleted change:purged":this.handleDeletedHistory,sort:function(){this.renderColumns(0)}})},_postFetchAll:function(e){if(this.$(".histories-loading-indicator").remove(),!this.historySearch){var t=this.$(".outer-middle");t.scrollLeft(t.scrollLeft()+24)}},setCurrentHistory:function(e){this.log("setCurrentHistory:",e);var t=s.default.findWhere(this.columnMap,{currentHistory:!0});t&&(t.currentHistory=!1,t.$el.height(""));var n=this.columnMap[this.collection.currentHistoryId];return n.currentHistory=!0,this.collection.sort(),this._recalcFirstColumnHeight(),n},handleDeletedHistory:function(e){if(e.get("deleted")||e.get("purged")){this.log("handleDeletedHistory",this.collection.includeDeleted,e);var t=this.columnMap[e.id];if(!t)return;t.model.id===this.collection.currentHistoryId||this.collection.includeDeleted||this.removeColumn(t)}},errorHandler:function(e,t,n){if(!t||0!==t.status||0!==t.readyState){if(this.error(e,t,n),s.default.isString(e)&&s.default.isString(t)){var i=e;return fe.a.errorModal(i,t,n)}return t&&502===t.status?fe.a.badGatewayErrorModal():fe.a.ajaxErrorModal(e,t,n)}},_ajaxErrorHandler:function(){fe.a.ajaxErrorModal.apply(null,s.default.toArray(arguments))},create:function(e){return this.collection.create({current:!0})},createColumns:function(e,t){var n=this;t=t||this.options.columnOptions,this.columnMap={},this.collection.each((function(e,i){n.columnMap[e.id]=n.createColumn(e,t)}))},createColumn:function(e,t){var n=Object(r.a)();t=s.default.extend({},t,{model:e,purgeAllowed:n.config.allow_user_dataset_purge});var i=new me(t);return e.id===this.collection.currentHistoryId&&(i.currentHistory=!0),this.setUpColumnListeners(i),this.datasetSearch&&(i.panel.searchItems(this.datasetSearch),this.queueHdaFetchDetails(i)),i},addColumn:function(e,t){t=void 0===t||t;var n=this.createColumn(e);return this.columnMap[e.id]=n,t&&this.renderColumns(),n},addAsCurrentColumn:function(e,t,n){var i=this,a=this.addColumn(e,!1);return this.setCurrentHistory(e),a.once("rendered",(function(){i.queueHdaFetch(a)})),a},removeColumn:function(e,t){var n=this;if(t=void 0===t||t,this.log("removeColumn",e),e){var i=this.options.columnWidth+this.options.columnGap;e.$el.fadeOut("fast",(function(){t&&(a()(n).remove(),n.$(".middle").width(n.$(".middle").width()-i),n.checkColumnsInView(),n._recalcFirstColumnHeight()),n.stopListening(e.panel),n.stopListening(e),delete n.columnMap[e.model.id],e.remove()}))}},setUpColumnListeners:function(e){var t=this;this.listenTo(e,{"in-view":this.queueHdaFetch}),this.listenTo(e.panel,{"view:draggable:dragstart":function(e,n,i,a){t._dropData=JSON.parse(e.dataTransfer.getData("text")),t.currentColumnDropTargetOn()},"view:draggable:dragend":function(e,n,i,a){t._dropData=null,t.currentColumnDropTargetOff()},"droptarget:drop":function(e,n,i){var a=t._dropData.filter((function(e){return i.model.contents.isCopyable(e)}));t._dropData=null;var r=new pe.a.NamedAjaxQueue;0!==i.model.contents.currentPage&&r.add({name:"fetch-front-page",fn:function(){return i.model.contents.fetchPage(0)}}),a.reverse().forEach((function(e){r.add({name:"copy-".concat(e.id),fn:function(){return i.model.contents.copy(e)}})})),r.start(),r.done((function(e){i.model.fetch()}))}})},columnMapLength:function(){return Object.keys(this.columnMap).length},sortedFilteredColumns:function(e){return(e=e||this.filters)&&e.length?this.sortedColumns().filter((function(t,n){return t.currentHistory||s.default.every(e.map((function(e){return e.call(t)})))})):this.sortedColumns()},sortedColumns:function(){var e=this;return this.collection.map((function(t,n){return e.columnMap[t.id]}))},render:function(e){return e=void 0!==e?e:this.fxSpeed,this.log("".concat(this,".render")),this.$el.html(this.mainTemplate),this.renderColumns(e),this.setUpBehaviors(),this.trigger("rendered",this),this},renderColumns:function(e){e=s.default.isNumber(e)?e:this.fxSpeed;var t=this.sortedFilteredColumns(),n=this.$(".middle").empty();return this._addColumns(t,e),this.collection.allFetched||n.append(this.loadingIndicatorTemplate),this.trigger("columns-rendered",t,this),(!this.datasetSearch||t.length>1)&&(this.checkColumnsInView(),this._recalcFirstColumnHeight()),t},_addColumns:function(e,t){t=s.default.isNumber(t)?t:this.fxSpeed;var n=this.$(".middle"),i=n.children(".history-column").length;n.width(this._calcMiddleWidth(e.length+i)),e.forEach((function(e,i){e.delegateEvents().render(t).$el.appendTo(n)}))},_calcMiddleWidth:function(e){return e*(this.options.columnWidth+this.options.columnGap)+this.options.columnGap+16},queueHdaFetch:function(e){var t=e.model.contents;if(0===t.length&&e.model.contentsShown()){var n={silent:!0},i=s.default.values(t.storage.allExpanded()).join();i&&(n.details=i),this.hdaQueue.add({name:e.model.id,fn:function(){return t.fetchCurrentPage(n).done((function(){e.panel.renderItems()})).done((function(){ue.a.FETCH_STATE_ON_ADD||t.jobStateSummariesCollection.fetch()}))}}),this.hdaQueue.running||this.hdaQueue.start()}},queueHdaFetchDetails:function(e){var t=e.model.contents;!(0===t.length&&e.model.contentsShown())&&t.haveDetails()||(this.hdaQueue.add({name:e.model.id,fn:function(){return t.progressivelyFetchDetails().done((function(){e.panel._renderEmptyMessage()}))}}),this.hdaQueue.running||this.hdaQueue.start())},renderInfo:function(e){return this.$(".header .header-info").text(e)},events:{"click .done.btn":"close","click .create-new.btn":"create","click #include-deleted":"_clickToggleDeletedHistories","click .order .set-order":"_chooseOrder","click #toggle-deleted":"_clickToggleDeletedDatasets","click #toggle-hidden":"_clickToggleHiddenDatasets"},close:function(e){window.location=Object(d.getAppRoot)()},_clickToggleDeletedHistories:function(e){this.toggleDeletedHistories(a()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedHistories:function(e){window.location="".concat(Object(d.getAppRoot)(),e?"history/view_multiple?include_deleted_histories=True":"history/view_multiple")},_clickToggleDeletedDatasets:function(e){this.toggleDeletedDatasets(a()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedDatasets:function(e){e=void 0!==e&&e,this.sortedFilteredColumns().forEach((function(t,n){s.default.delay((function(){t.panel.toggleShowDeleted(e,!1)}),200*n)}))},_clickToggleHiddenDatasets:function(e){this.toggleHiddenDatasets(a()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleHiddenDatasets:function(e){e=void 0!==e&&e,this.sortedFilteredColumns().forEach((function(t,n){s.default.delay((function(){t.panel.toggleShowHidden(e,!1)}),200*n)}))},_chooseOrder:function(e){var t=this,n=this.collection,i=a()(e.currentTarget).data("order");this.$(".current-order").text(this.orderDescriptions[i]),this.toggleOptionsPopover(),n.setOrder(i);var r=n.slice(0,1);n.fetchFirst().done((function(){n.unshift(r,{silent:!0}),t.createColumns(),t.hdaQueue.clear(),t.render()})),this.once("columns-rendered",this._scrollLeft)},_scrollLeft:function(e){e=s.default.isNumber(e)?e:0,this.$(".outer-middle").scrollLeft(e)},setUpBehaviors:function(){var e=this;this._moreOptionsPopover();var t=function(t){var n=e;e.historySearch=t,e.filters=[function(){return this.model.matchesAll(n.historySearch)}],e.renderColumns(0)};this.$("#search-histories").searchInput({name:"search-histories",placeholder:h()("search histories"),onfirstsearch:function(n){e.$("#search-histories").searchInput("toggle-loading"),e.renderInfo(h()("loading all histories for search")),e.collection.fetchAll().done((function(){e.$("#search-histories").searchInput("toggle-loading"),e.renderInfo(""),t(n)}))},onsearch:t,onclear:function(t){e.historySearch=null,e.filters=[],e.renderColumns(0)},advsearchlink:!1}),this.$("#search-datasets").searchInput({name:"search-datasets",placeholder:h()("search all datasets"),onfirstsearch:function(t){e.hdaQueue.clear(),e.$("#search-datasets").searchInput("toggle-loading"),e.datasetSearch=t,e.sortedFilteredColumns().forEach((function(n){n.panel.searchItems(t),e.queueHdaFetchDetails(n)})),e.hdaQueue.progress((function(t){e.renderInfo([h()("searching"),t.curr+1,h()("of"),t.total].join(" "))})),e.hdaQueue.deferred.done((function(){e.renderInfo(""),e.$("#search-datasets").searchInput("toggle-loading")}))},onsearch:function(t){e.datasetSearch=t,e.sortedFilteredColumns().forEach((function(e){e.panel.searchItems(t)}))},onclear:function(t){e.datasetSearch=null,e.sortedFilteredColumns().forEach((function(e){e.panel.clearSearch()}))},advsearchlink:!0}),a()(window).resize((function(){e._recalcFirstColumnHeight()}));var n=s.default.debounce((function(){var t=e._viewport();e.checkColumnsInView(t),e.checkForEndOfScroll(t)}),100);this.$(".middle").parent().scroll(n)},_moreOptionsPopover:function(){return this.$(".open-more-options.btn").popover({container:".header",placement:"bottom",html:!0,content:a()(this.optionsPopoverTemplate(this))})},toggleOptionsPopover:function(e){this.$(".open-more-options.btn").popover("toggle")},_recalcFirstColumnHeight:function(){var e=this.$(".history-column").first(),t=this.$(".middle").height(),n=e.find(".panel-controls").height();e.height(t).find(".inner").height(t-n)},_viewport:function(){var e=this.$(".middle").parent(),t=e.offset().left;return{left:t,right:t+e.width()}},columnsInView:function(e){var t=e||this._viewport();return this.sortedFilteredColumns().filter((function(e){return e.currentHistory||e.inView(t.left,t.right)}))},checkColumnsInView:function(){this.columnsInView().forEach((function(e){e.trigger("in-view",e)}))},checkForEndOfScroll:function(e){e=e||this._viewport();var t=this.$(".middle");t.parent().scrollLeft()+e.right>=t.width()-16&&this.trigger("end-of-scroll")},currentColumnDropTargetOn:function(){var e=this.columnMap[this.collection.currentHistoryId];e&&(e.panel.dataDropped=function(e){},e.panel.dropTargetOn())},currentColumnDropTargetOff:function(){var e=this.columnMap[this.collection.currentHistoryId];e&&(e.panel.dataDropped=de.a.HistoryViewEdit.prototype.dataDrop,e.panel.dropTarget=!1,e.panel.$(".history-drop-target").remove())},toString:function(){return"MultiPanelColumns(".concat(this.columns?this.columns.length:0,")")},mainTemplate:'\n        <div class="header flex-column-container">\n            <div class="control-column control-column-left flex-column">\n                <div id="search-histories" class="search-control"></div>\n                <div id="search-datasets" class="search-control"></div>\n                <a class="open-more-options btn btn-secondary" tabindex="3">\n                    <span class="fa fa-ellipsis-h"></span>\n                </a>\n            </div>\n            <div class="control-column control-column-center flex-column">\n                <div class="header-info">\n                </div>\n            </div>\n            <div class="control-column control-column-right flex-column">\n                <button class="create-new btn btn-secondary" tabindex="4">\n                    '.concat(h()("Create new"),'\n                </button>\n            </div>\n        </div>\n        <div class="outer-middle flex-row flex-row-container">\n            <div class="middle flex-column-container flex-row"></div>\n        </div>\n        <div class="footer flex-column-container"></div>'),loadingIndicatorTemplate:'\n        <div class="histories-loading-indicator">\n            <span class="fa fa-spin fa-spinner"></span>\n            '.concat(h()("Loading histories")," ...\n        </div>"),orderDescriptions:{update_time:h()("most recent first"),"update_time-asc":h()("least recent first"),name:h()("name, a to z"),"name-dsc":h()("name, z to a"),size:h()("size, large to small"),"size-asc":h()("size, small to large")},optionsPopoverTemplate:s.default.template('<div class="more-options d-flex flex-column">\n            <div class="order btn-group mb-2">\n                <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                    '.concat(h()("Order histories by"),'\n                    <span class="current-order"><%- view.orderDescriptions[ view.collection.order ] %></span>\n                    <span class="caret"/>\n                </button>\n                <div class="dropdown-menu" role="menu">\n                    <% _.each( view.orderDescriptions, function( text, order ){ %>\n                        <a href="javascript:void(0);" class="dropdown-item set-order" data-order="<%- order %>">\n                            <%- text %>\n                        </a>\n                    <% }); %>\n                </div>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="include-deleted" type="checkbox" <%= view.collection.includeDeleted? " checked" : "" %>>\n                    ').concat(h()("Include deleted histories"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-deleted" type="checkbox">\n                    ').concat(h()("Include deleted datasets"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-hidden" type="checkbox">\n                    ').concat(h()("Include hidden datasets"),"\n                </label>\n            </div>\n        </div>"),{variable:"view"})})},ge=n(131),ve=ge.a.HistoryView,ye={AnnotatedHistoryView:ve.extend({className:"".concat(ve.prototype.className," annotated-history-panel"),_buildNewRender:function(){var e=ve.prototype._buildNewRender.call(this);return this.renderHistoryAnnotation(e),e},renderHistoryAnnotation:function(e){var t=this.model.get("annotation");t&&e.find("> .controls .subtitle").text(t)},renderItems:function(e){e=e||this.$el,ve.prototype.renderItems.call(this,e);var t=e.find("> .controls");return t.find(".contents-container.headers").remove(),a()('<div class="contents-container headers"/>').append([a()('<div class="history-content header"/>').text(h()("Dataset")),a()('<div class="additional-info header"/>').text(h()("Annotation"))]).appendTo(t),self.views},_renderItemView$el:function(e){return a()('<div class="contents-container"/>').append([e.render(0).$el,a()('<div class="additional-info"/>').text(e.model.get("annotation")||"")])},events:s.default.extend(s.default.clone(ve.prototype.events),{"click .contents-container":function(e){e.stopPropagation(),a()(e.currentTarget).find(".list-item .title-bar").click()},"click .icon-btn":function(e){e.stopPropagation();var t=a()(e.currentTarget);t.length&&"dropdown"===t.attr("data-toggle")&&t.dropdown("toggle")}}),_clickSectionLink:function(e){var t=a()(e.currentTarget).parent().parent().data("section");this.openSection(t)},toString:function(){return"AnnotatedHistoryView(".concat(this.model?this.model.get("name"):"",")")}})},be=n(163),we=n(112),ke=n(427),xe=n(123),Se=n(165),Ce=n(139);a.a.ajaxSettings.traditional=!0;var Me=a.a,Te=c.a.View.extend({grid:null,initialize:function(e){this.grid=new ke.a,this.dict_format=e.dict_format,this.title=e.title,this.title_id=e.title_id;var t=this;if(window.add_tag_to_grid_filter=function(e,n){var i=e+(void 0!==n&&""!==n?":".concat(n):"");Me("#advanced-search").is(":visible")||(Me("#standard-search").slideToggle("fast"),Me("#advanced-search").slideToggle("fast")),t.add_filter_condition("tags",i)},this.dict_format)if(this.setElement("<div/>"),e.url_base&&!e.items){var n=e.url_data||{};s.default.each(e.filters,(function(e,t){n["f-".concat(t)]=e})),Me.ajax({url:"".concat(e.url_base,"?").concat(Me.param(n)),success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.init_grid(e);else this.setElement("#grid-container"),this.init_grid(e);e.use_panels&&Me("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(e){e&&Me.inArray("history",e)>-1&&window.top.Galaxy&&window.top.Galaxy.currHistoryPanel&&window.top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&m.a.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",n),this.$el.html(xe.a.grid(t)),this.$el.find("#grid-table-header").html(xe.a.header(t)),this.$el.find("#grid-table-body").html(xe.a.body(t)),this.$el.find("#grid-table-footer").html(xe.a.footer(t)),t.message){this.$el.find("#grid-message").html(xe.a.message(t));var i=this;t.use_hide_message&&setTimeout((function(){i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(Ce.a)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){Me(this).off(),Me(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){Me(this).off(),Me(this).click((function(){Me(this).select()})).keyup((function(){Me(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){Me(this).off(),Me(this).click((function(){return e.set_sort_condition(Me(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){Me(this).off(),Me(this).submit((function(){var t=Me(this).attr("column_key"),n=Me("#input-".concat(t,"-filter")),i=n.val();return n.val(""),e.add_filter_condition(t,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){Me(this).off(),Me(this).click((function(){return Me(this).parent().remove(),e.remove_filter_condition(Me(this).attr("filter_key"),Me(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){Me(this).off(),Me(this).click((function(){return e.set_categorical_filter(Me(this).attr("filter_key"),Me(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){Me(this).off(),Me(this).click((function(){return e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=Me(this).find("input.grid-row-select-checkbox"),t=Me(this).find("span.grid-selected-count"),n=function(){t.text(Me(e).filter(":checked").length)};Me(e).each((function(){Me(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link > a").each((function(){Me(this).click((function(){return t.set_page(Me(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){Me(this).click((function(){return t.execute({href:Me(this).attr("href"),target:Me(this).attr("target")}),!1}))})),0!==e.items.length&&s.default.each(e.items,(function(n,i){var a=t.$("#grid-".concat(n.encode_id,"-popup")).off(),r=new Se.a(a);s.default.each(e.operations,(function(e){t._add_operation(r,e,n)}))}))},_add_operation:function(e,t,n){var i=this,a=n.operation_config[t.label];a.allowed&&t.allow_popup&&e.addItem({html:t.label,href:a.url_args,target:a.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var a=Me(e.target).html();t.onclick?t.onclick(n.encode_id):i.execute(this.findItemByHtml(a))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0);var n=Me(xe.a.filter_element(e,t)),i=this;n.click((function(){Me(this).remove(),i.remove_filter_condition(e,t)})),this.$el.find("#".concat(e,"-filtering-criteria")).append(n),this.go_page_one(),this.execute()},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n="-".concat(e)),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",a=Me("<span>".concat(i,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(e,"-header")).append(a),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],i=this.grid.get("filters")[e],a=this;this.$el.find(".".concat(e,"-filter")).each((function(){var r=Me.trim(Me(this).text()),o=n[r][e];if(o==t)Me(this).empty(),Me(this).addClass("current-filter"),Me(this).append(r);else if(o==i){Me(this).empty();var s=Me('<a href="javascript:void(0)" role="button">'.concat(r,"</a>"));s.click((function(){a.set_categorical_filter(e,o)})),Me(this).removeClass("current-filter"),Me(this).append(s)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,i=Me(this).attr("id"),a=parseInt(i.split("-")[2],10),r=t.grid.get("cur_page");if(a===e)n=Me(this).children().text(),Me(this).empty(),Me(this).addClass("inactive-link"),Me(this).text(n);else if(a===r){n=Me(this).text(),Me(this).empty(),Me(this).removeClass("inactive-link");var o=Me('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));o.click((function(){t.set_page(a)})),Me(this).append(o)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=Me(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=s.default.findWhere(this.grid.attributes.operations,{label:n});i&&!t&&(t=i.confirm||"");var a=[];this.$el.find("input[name=id]:checked").each((function(){a.push(Me(this).val())}));var r={operation:n,id:a,confirmation_text:t};return"top"!=i.target&&"center"!=i.target||(r=s.default.extend(r,{href:i.href,target:i.target})),this.execute(r),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");s.default.each(e,(function(e){Me(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,i=null,a=null,r=null;if(e&&(n=e.href,i=e.operation,t=e.id,a=e.confirmation_text,r=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var o=n.split("?");if(o.length>1)for(var s=o[1].split("&"),l=0;l<s.length;l++)-1!=s[l].indexOf("operation")?i=(i=s[l].split("=")[1]).replace(/\+/g," "):-1!=s[l].indexOf("id")&&(t=s[l].split("=")[1])}return i&&t?!(a&&""!==a&&"None"!=a&&"null"!=a&&!confirm(a))&&(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:t}),"top"==r?window.top.location="".concat(n,"?").concat(Me.param(this.grid.get_url_data())):"center"==r?Me("#galaxy_main").attr("src","".concat(n,"?").concat(Me.param(this.grid.get_url_data()))):this.grid.can_async_op(i)||this.dict_format?this.update_grid():this.go_to(r,n),!1):n?(this.go_to(r,n),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(r,n),!1)},go_to:function(e,t){var n=this.grid.get("async");this.grid.set("async",!1);var i=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",i),t||(t="".concat(this.grid.get("url_base"),"?").concat(Me.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0,async:n}),e){case"center":Me("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;Me.ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),i=t.grid.get("insert"),a=t.$el.find("#advanced-search").is(":visible"),r=t.dict_format?e:Me.parseJSON(e);r.embedded=n,r.insert=i,r.advanced_search=a,t.init_grid(r),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})}});function je(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Oe(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()-t,e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function De(e,t,n,i){var r,o,s=e,l=[],c=(r=new Date,new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),0,0));for(o=0;o<24;o++)l.push(Oe(c,o));var d=[];for(o=0;o<30;o++)d.push(je(c,o));var u=60,h=50,p=60,m=0;"hours"==n?m=12.5:"days"==n&&(m=10);var _,g=300+p+30,v=1.75;_=0!==f.max(s)?150/f.max(s):1;var y=150+u+h;a()(".charts").css("height",y*v);var b=f.select("#".concat(t)).attr("width",g).attr("height",y).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 ".concat(g," ").concat(y)).on("click",(function(){var e=f.select(this).attr("class");e=e.split(" "),f.selectAll(".".concat(e[0])).filter(".".concat(e[1])).style("cursor","zoom-in").transition().duration(750).attr("height",y).attr("width",g),f.select(this).style("cursor","default").transition().duration(750).attr("height",y*v).attr("width",g*v)})),w=b.selectAll("g").data(s).enter().append("g").attr("transform",(function(e,t){var n=p;return"translate(".concat(n+=+t*m,",").concat(u,")")})).on("mouseenter",(function(e){for(var t=1,n=e;n>=10;)n/=10,t++;var i=4*t+10;f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(p-5,", ").concat(150-e*_+u+10," )")).attr("visibility","visible").text(e),f.select(f.event.target.parentElement).select(".tool_tip").attr("width","".concat(i,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(p-i,", ").concat(150-e*_+u," )")).attr("width","".concat(i,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(e){f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),f.select(f.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(e)}));b.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(i),b.append("g").attr("class","axis").append("path").attr("class","x").attr("d",(function(){var e=u+150,t=p+300;return"M".concat(p," ").concat(e," L ").concat(t," ").concat(e)}));var k=f.scale.linear().range([150,0]),x=f.svg.axis().scale(k).orient("left").tickFormat((function(e){return f.round(e*f.max(s),0)}));b.append("g").attr("class","y axis").attr("id","y_".concat(t)).attr("text-anchor","end").attr("transform","translate( ".concat(p,",").concat(u,")")).call(x).select(".domain"),b.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=f.select("#y_".concat(t)).node(),n=p-e.getBoundingClientRect().width-5,i=u+e.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(i,")rotate(-90)")})).text("Number of Jobs"),w.append("rect").attr("y",(function(e){return 150-e*_})).attr("height",(function(e){return e*_})).attr("width",m-1);var S=!1;if("hours"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(m/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, ".concat(160," )")).text((function(e,t){return l[t].getHours()<10?"0".concat(String(l[t].getHours())):l[t].getHours()}));var C="";S=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(e,t){var n=0;return l[t].getDate()!=C&&(S?n=20:(n=27,S=!0),C=l[t].getDate()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),C="";var M="";S=!1,w.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text((function(e,t){var n="";return l[t].getDate()!=M&&(n=String(l[t].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(l[t].getDate())),M=l[t].getDate()),n})).attr("transform",(function(e,t){var n=150,i=f.select(this).node().getBBox().width;return l[t].getDate()!=C&&(S?n+=18:(n+=26,S=!0),C=l[t].getDate()),"translate( ".concat(i+2,", ").concat(n," )")}))}else if("days"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(m/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, ".concat(160," )")).text((function(e,t){return d[t].getDate()<10?"0".concat(String(d[t].getDate())):d[t].getDate()}));var T="";S=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(e,t){var n=0;return d[t].getMonth()!=T&&(S?n=20:(n=27,S=!0),T=d[t].getMonth()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),T="";var j="";S=!1,w.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text((function(e,t){var n="";return d[t].getMonth()!=j&&(n=String(d[t].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(d[t].getFullYear())),j=d[t].getMonth()),n})).attr("transform",(function(e,t){var n=150,i=f.select(this).node().getBBox().width;return d[t].getMonth()!=T&&(S?n+=18:(n+=26,S=!0),T=d[t].getMonth()),"translate( ".concat(i+2,", ").concat(n," )")}))}b.append("g").attr("class","tool_tip").append("rect"),b.select(".tool_tip").append("text"),"jc_dy_chart"!=t&&"jc_hr_chart"!=t||f.select("#".concat(t)).attr("height",y*v).attr("width",g*v).style("cursor","default")}function Le(e,t,n){var i=e,a=1.75,r=60,o=60,s=150+r+50,l=300+o+30,c=f.scale.linear().domain([0,f.max(i)]).range([0,300]);i=f.layout.histogram().bins(c.ticks(20))(i);for(var d,u=[],h=0;h<i.length;h++)u.push(i[h].length);d=0!==f.max(i)?150/f.max(u):1;var p=f.scale.linear().domain([0,f.max(i,(function(e){return e.y}))]).range([150,0]);var m=f.select("#".concat(t)).attr("viewBox","0 0 ".concat(l," ").concat(s)).attr("width",l).attr("height",s).attr("preserveAspectRatio","xMidYMin").on("click",(function(){var e=f.select(this).attr("class");e=e.split(" "),f.selectAll(".".concat(e[0])).filter(".".concat(e[1])).style("cursor","zoom-in").transition().duration(750).attr("height",s).attr("width",l),f.select(this).style("cursor","default").transition().duration(750).attr("height",s*a).attr("width",l*a)}));m.append("g").append("text").attr("class","title").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(n);var _,g=m.selectAll(".bar").data(i).enter().append("g").attr("class","bar").attr("transform",(function(e){return"translate(".concat(+c(e.x)+o,",").concat(+p(e.y)+r,")")})).on("mouseenter",(function(e){for(var t=0,n=e.length;n>=1;)n/=10,t++;var i=4*t+10;f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(o-5,", ").concat(150-e.length*d+r+10," )")).attr("visibility","visible").text(e.length),f.select(f.event.target.parentElement).select(".tool_tip").attr("width","".concat(i,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(o-i,", ").concat(150-e.length*d+r," )")).attr("width","".concat(i,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(){f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),f.select(f.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")}));_=void 0===i[0]?1:c(i[0].dx),g.append("rect").attr("x",1).attr("width",_-1).attr("height",(function(e){return 150-p(e.y)}));var v=f.svg.axis().scale(c).orient("bottom").tickFormat((function(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)}));m.append("g").attr("class","x axis").attr("id","x_".concat(t)).attr("transform","translate( ".concat(o,",").concat(150+r,")")).call(v),m.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=f.select("#x_".concat(t)).node(),n=o+e.getBoundingClientRect().width/2+30,i=r+150+e.getBoundingClientRect().height+10;return"translate(".concat(n,",").concat(i,")")})).text("ETA - hrs:mins");var y=f.svg.axis().scale(p).orient("left");m.append("g").attr("class","y axis").attr("id","y_".concat(t)).attr("transform","translate( ".concat(o,",").concat(r,")")).call(y),m.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=f.select("#y_".concat(t)).node(),n=o-e.getBoundingClientRect().width-5,i=r+e.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(i,")rotate(-90)")})).text("Number of Jobs"),m.append("g").attr("class","tool_tip").append("rect"),m.select(".tool_tip").append("text")}var Ee=c.a.Model.extend({urlRoot:"".concat(Object(d.getAppRoot)(),"api/groups")}),Ae={Group:Ee,Groups:c.a.Collection.extend({url:"".concat(Object(d.getAppRoot)(),"api/groups"),model:Ee})},Ie={GroupListRowView:c.a.View.extend({events:{},initialize:function(e){this.render(e.group)},render:function(e){var t=this.templateRow();return this.setElement(t({group:e})),this.$el.show(),this},templateRow:function(){return s.default.template(['<tr class="" data-id="<%- group.get("id") %>">','<td><a href="groups#/<%= group.get("id") %>"><%= _.escape(group.get("name")) %></a></td>','<td><%= group.get("total_members") %></td>','<td><%= group.get("total_repos") %></td>',"</tr>"].join(""))}})},Pe={GroupListView:c.a.View.extend({el:"#groups_element",defaults:{},initialize:function(e){this.options=s.default.defaults(this.options||{},this.defaults,e);var t=this;window.globalTS.groups.collection=new Ae.Groups,window.globalTS.groups.collection.fetch({success:function(e){t.render()},error:function(e,t){void 0!==t.responseJSON?Z.a.error(t.responseJSON.err_msg):Z.a.error("An error occurred.")}})},fetch:function(){},render:function(e){this.options=s.default.extend(this.options,e),a()(".tooltip").hide();var t=this.templateGroupsList();this.$el.html(t({length:window.globalTS.groups.collection.models.length})),this.renderRows(window.globalTS.groups.collection.models),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},renderRows:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.renderOne({group:n})}},renderOne:function(e){var t=new Ie.GroupListRowView(e);this.$el.find("#group_list_body").append(t.el)},templateGroupsList:function(){var e=[];return e.push('<div id="groups">'),e.push("</div>"),e.push('<div class="groups_container table-responsive">'),e.push("<% if(length === 0) { %>"),e.push("<div>There are no groups yet.</div>"),e.push("<% } else{ %>"),e.push('<table class="grid table table-sm">'),e.push("   <thead>"),e.push("     <th>Name</th>"),e.push("     <th>Members</th> "),e.push("     <th>Repositories</th>"),e.push("   </thead>"),e.push('   <tbody id="group_list_body">'),e.push("   </tbody>"),e.push("</table>"),e.push("<% }%>"),e.push("</div>"),s.default.template(e.join(""))}})},Ye={GroupDetailView:c.a.View.extend({el:"#groups_element",options:{},app:null,initialize:function(e){this.options=s.default.extend(this.options,e),this.app=window.globalTS.groups,null!==this.app.collection?(this.model=this.app.collection.get(this.options.group_id),this.render()):this.fetchGroup()},fetchGroup:function(e){var t=this;this.options=s.default.extend(this.options,e),this.model=new Ae.Group({id:this.options.group_id}),this.model.fetch({success:function(e){console.log("received data: "),console.log(e),t.render()},error:function(e,t){void 0!==t.responseJSON?Z.a.error(t.responseJSON.err_msg):Z.a.error("An error occurred.")}})},render:function(){var e=this.templateRow();this.$el.html(e({group:this.model})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},templateRow:function(){return s.default.template(["<div>",'<h3><%= _.escape(group.get("name")) %></h3>','<p class="" style="color:gray;">','A group of <%= group.get("members").length %> members with <%= group.get("repositories").length %> repositories and a total of <%= group.get("total_downloads") %> combined repository clones.</p>',"<h3>Members</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Repositories</th>","<th>Registered</th>","</thead>","<tbody>",'<% _.each(group.get("members"), function(member) { %>',"<tr>","<td>","<%= _.escape(member.username) %>","</td>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Repositories of <%= _.escape(member.username) %>" href="/repository/browse_repositories_by_user?user_id=<%= member.id %>&use_panels=true" id="<%= member.id %>"><%= member.user_repos_count %></a>',"</td>","<td>","<%= member.time_created %>","</td>","</tr>","<% }); %>","</tbody>","</table>","<h3>Repositories</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Description</th>","<th>Clones</th>","<th>Owner</th>","<th>Categories</th>","<th>Created</th>","<th>Updated</th>","<th>Rating</th>","<th>Verified</th>","</thead>","<tbody>",'<% _.each(group.get("repositories"), function(repo) { %>',"<tr>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Details of <%= _.escape(repo.name) %>" href="/view/<%= _.escape(repo.owner) %>/<%= _.escape(repo.name) %>" id="<%= repo.id %>"><%= _.escape(repo.name) %></a>',"</td>","<td>","<%= _.escape(repo.description) %>","</td>","<td>","<%= repo.times_downloaded %>","</td>","<td>","<%= _.escape(repo.owner) %>","</td>","<td>","<% _.each((repo.categories), function(cat) { %>",'<a data-toggle="tooltip" data-placement="top" title="Repositories in <%= cat.name %>" href="/repository/browse_repositories_in_category?id=<%= cat.id %>&use_panels=true"><%= cat.name %></a><br/>',"<% }); %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_created_full %>">',"<%= repo.time_created %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_updated_full %>">',"<%= repo.time_updated %>","</td>","<td>","<%= repo.ratings_mean %>","</td>","<td>","<%= repo.approved %>","</td>","</tr>","<% }); %>","</tbody>","</table>","</div>"].join(""))}})},Re=c.a.Router.extend({routes:{"":"groups",":group_id":"group_page"}}),He={ToolshedGroups:c.a.View.extend({groupListView:null,groupDetailView:null,collection:null,initialize:function(){window.globalTS.groups=this,this.ts_router=new Re,this.ts_router.on("route:groups",(function(){window.globalTS.groups.groupListView=new Pe.GroupListView})),this.ts_router.on("route:group_page",(function(e){window.globalTS.groups.groupDetailView=new Ye.GroupDetailView({group_id:e})})),c.a.history.start({pushState:!1})}})};function Ne(){a()("#spinner").remove(),a()("#main").children().remove()}function $e(){a()("#main").append('<div id="ie-loading-spinner"></div>')}function Fe(e,t,n,i,a,r,o,s){return{type:void 0!==e?e:"GIE spin",ajax_timeout:void 0!==t?t:2e3,ajax_timeout_max:void 0!==n?n:16e3,ajax_timeout_step:void 0!==i?i:500,sleep:void 0!==a?a:500,sleep_max:void 0!==r?r:8e3,sleep_step:void 0!==o?o:100,log_attempts:void 0===s||s,count:0}}function We(e,t,n){console.log(e),n&&Ne(),"string"==typeof t&&(Z.a.clear(),Z.a.error(t,"Error",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))}function ze(e){e.sleep<e.sleep_max&&(e.sleep+=e.sleep_step),e.log_attempts&&console.log("".concat(e.type," request ").concat(e.count," request timeout ").concat(e.ajax_timeout,"ms sleeping ").concat(e.sleep/1e3,"s")),window.setTimeout(e.spinner,e.sleep)}function Ue(e,t,n,i,r,o){var s=function(){var s={url:e,xhrFields:{withCredentials:!0},type:"GET",timeout:o.ajax_timeout,success:function(e,t,i){n(e,t,i)||(o.count++,ze(o))},error:function(e,t,n){"timeout"==t?(o.ajax_timeout<o.ajax_timeout_max&&(o.ajax_timeout+=o.ajax_timeout_step),o.count++,i(e,t,n)||ze(o)):(o.count++,r(e,t,n)||ze(o))}};t&&(s.dataType="json"),a.a.ajax(s)};console.log("Setting up new spinner for ".concat(o.type," on ").concat(e)),o.spinner=s,window.setTimeout(s,o.sleep)}function Ve(e,t,n,i,a){var r=function(e,t){1==t.count&&($e(),Z.a.info(e,null,{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))},o=function(e,t,i){return r(n.waiting,a),40==a.count&&Z.a.warning(n.wait_warn,"Warning",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}),!1};Ue(e,t,(function(e){if(!t||t&&1==e)console.log(n.success),Ne(),Z.a.clear(),i();else{if(t&&0==e)return r(n.not_ready,a),!1;We("Invalid response to ".concat(a.type," request"),n.invalid_response,!0)}return!0}),o,o,a)}var Be={append_notebook:function(e){Ne(),a()("#main").append('<iframe frameBorder="0" seamless="seamless" style="width: 100%; height: 100%; overflow:hidden;" scrolling="no" src="'.concat(e,'"></iframe>'))},clear_main_area:Ne,display_spinner:$e,make_spin_state:Fe,spin_error:We,spin:Ue,test_ie_availability:function(e,t){Ve(e,!1,{success:"IE connection succeeded, returning",waiting:"Interactive environment container is running, attempting to connect to the IE. Please wait...",wait_warn:"It is taking an usually long time to connect to the interactive environment. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"An error was encountered while attempting to connect to the interactive environment, contact your administrator."},t,Fe("IE availability"))},load_when_ready:function(e,t){Ve(e,!0,{success:"Galaxy reports IE container ready, returning",not_ready:"Galaxy is launching a container in which to run this interactive environment. Please wait...",unknown_response:"Galaxy failed to launch a container in which to run this interactive environment, contact a Galaxy administrator.",waiting:"Galaxy is launching a container in which to run this interactive environment. Please wait...",wait_warn:"It is taking an usually long time to start a container. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"Galaxy encountered an error while attempting to determine the readiness of this interactive environment's container, contact a Galaxy administrator."},t,Fe("IE container readiness"))},keepAlive:function(e){var t=0,n=window.setInterval((function(){a.a.ajax({url:e,xhrFields:{withCredentials:!0},type:"GET",timeout:500,success:function(){console.log("Connected to IE, returning")},error:function(e,i,a){t++,console.log("Request "+t),t>30&&(window.clearInterval(n),Ne(),Z.a.error("Could not connect to IE, contact your administrator","Error",{closeButton:!0,timeOut:2e4,tapToDismiss:!1}))}})}),1e4)}},qe=n(174);function Ge(){a()(".embedded-item").each((function(){var e=a()(this);if(!e.hasClass("history")){var t=function(){var t=e.find("input[type=hidden]").val();t||(t=e.data("item-url")),a.a.trim(e.find(".item-content").text())?(e.find(".summary-content").hide("fast"),e.find(".expanded-content").show("fast"),e.find(".toggle-expand").hide(),e.find(".toggle").show()):a.a.ajax({type:"GET",url:t,error:function(){alert("Getting item content failed.")},success:function(t){e.find(".summary-content").hide("fast"),e.find(".item-content").html(t),e.find(".expanded-content").show("fast"),e.find(".toggle-expand").hide(),e.find(".toggle").show(),Object(F.a)()}})},n=function(){e.find(".expanded-content").hide("fast"),e.find(".summary-content").show("fast"),e.find(".toggle").hide(),e.find(".toggle-expand").show()};a()(this).find(".toggle-expand").click((function(){return t(),!1})),a()(this).find(".toggle").click((function(){return n(),!1})),a()(this).find(".toggle-embed").click((function(){return e.find(".expanded-content").is(":visible")?n():t(),!1})),a()(this).hasClass("expanded")&&t()}}))}var Je=a.a;var Ke=function(e,t,n,i,a,r,o,s,l){void 0===a&&(a=30),void 0===o&&(o=4),Je("#".concat(e)).off().click((function(){if(!(Je("#renaming-active").length>0)){var e,c=Je("#".concat(t)),d=c.text();(e=r?Je("<textarea></textarea>").attr({rows:o,cols:a}).text(Je.trim(d)):Je("<input type='text'></input>").attr({value:Je.trim(d),size:a})).attr("id","renaming-active"),e.blur((function(){Je(this).remove(),c.show(),l&&l(e)})),e.keyup((function(a){if(27===a.keyCode)Je(this).trigger("blur");else if(13===a.keyCode){var r={};r[i]=Je(this).val(),Je(this).trigger("blur"),Je.ajax({url:n,data:r,error:function(){alert("Text editing for elt ".concat(t," failed"))},success:function(t){""!==t?c.text(t):c.html("<em>None</em>"),l&&l(e)}})}})),s&&s(e),c.hide(),e.insertAfter(c),e.focus(),e.select()}}))},Xe=n(167),Qe=n(73),Ze=n(18),et=c.a.Model.extend({defaults:{config:{}},urlRoot:function(){return Object(d.getAppRoot)()+"api/visualizations"},initialize:function(e){s.default.isObject(e.config)&&s.default.isObject(this.defaults.config)&&s.default.defaults(e.config,this.defaults.config),this._setUpListeners()},_setUpListeners:function(){},set:function(e,t){if("config"===e){var n=this.get("config");s.default.isObject(n)&&(t=s.default.extend(s.default.clone(n),t))}return c.a.Model.prototype.set.call(this,e,t),this},toString:function(){var e=this.get("id")||"";return this.get("title")&&(e+=":".concat(this.get("title"))),"Visualization(".concat(e,")")}});c.a.Collection.extend({model:et,url:function(){return"".concat(Object(d.getAppRoot)(),"api/visualizations")},initialize:function(e,t){t=t||{}},set:function(e,t){var n=this;e=s.default.map(e,(function(e){var t=n.get(e.id);if(!t)return e;var i=t.toJSON();return s.default.extend(i,e),i})),c.a.Collection.prototype.set.call(this,e,t)},toString:function(){return["VisualizationCollection(",[this.historyId,this.length].join(),")"].join("")}});function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var at=/^groups_([0-9]+)\|([\w]+)/,rt=c.a.Model.extend({defaults:{title:"",type:"",date:null,state:"",state_info:"",modified:!0,dataset_id:"",dataset_id_job:null},initialize:function(e,t){this.groups=new c.a.Collection,this.settings=new c.a.Model,this.visualization_id=t.visualization_id,this.visualization_name=t.visualization_name,this.dataset_id=t.dataset_id,this.chart_dict=t.chart_dict,console.debug("model::initialize() - Initialized with configuration:"),console.debug(t)},reset:function(){this.clear().set({title:"New Chart",dataset_id:this.dataset_id}),this.settings.clear(),this.groups.reset();var e,t=window.location.search,n={},i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=nt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(new URLSearchParams(t).entries());try{for(i.s();!(e=i.n()).done;){var a=tt(e.value,2),r=a[0],o=a[1],s=r.match(at);if(s){var l=s[1],c=s[2];n[l]=n[l]||{},n[l][c]=o,n[l].id=l}else this.settings.set(r,o)}}catch(e){i.e(e)}finally{i.f()}Object.keys(n).length>0?this.groups.set(Object.values(n)):this.groups.add({id:m.a.uid()})},state:function(e,t){this.set({state:e,state_info:t}),this.trigger("set:state"),console.debug("model::state() - "+t+" ("+e+")")},serialize:function(){var e={attributes:this.attributes,settings:this.settings.attributes,groups:[]};return this.groups.each((function(t){e.groups.push(t.attributes)})),e},save:function(e){var t=this;e=e||{},this.chart_dict=this.serialize(),new et({id:this.visualization_id||void 0,type:this.visualization_name,title:this.get("title")||"",config:{dataset_id:this.dataset_id,chart_dict:this.chart_dict}}).save().then((function(n){n&&n.id?(t.visualization_id=n.id,e.success&&e.success(),console.debug("model::save() - Received visualization id: "+n.id)):(e.error&&e.error(),console.debug("model::save() - Unrecognized response. Saving may have failed."))})).fail((function(t){e.error&&e.error(),console.debug("model::save() - Saving failed.")})),console.debug("model::save() - Saving with configuration.")},load:function(e){var t=e||this.chart_dict;return t&&(console.debug("model::load() - Attempting to load with configuration:"),console.debug(t)),this.reset(),t&&t.attributes?(this.set(t.attributes),this.state("ok","Loading saved visualization..."),this.settings.set(t.settings),this.groups.reset(),this.groups.add(t.groups),this.set("modified",!1),this.trigger("load"),console.debug("model::load() - Loading chart model "+t.attributes.type+"."),!0):(this.set("modified",!0),this.trigger("load"),console.debug("model::load() - Visualization attributes unavailable."),!1)}}),ot=n(166),st=n(56),lt=n(202),ct=n(129),dt=c.a.View.extend({initialize:function(e,t){var n=this;this.deferred=e.deferred,this.chart=e.chart,this.group=t.group,this.setElement(a()("<div/>")),this.listenTo(this.chart,"change:dataset_id",(function(){n.render()})),this.render()},render:function(){var e=this,t=m.a.clone(this.chart.plugin.groups)||[],n=this.chart.get("dataset_id");n&&(this.chart.state("wait","Loading metadata..."),this.deferred.execute((function(i){m.a.get({url:Object(d.getAppRoot)()+"api/datasets/"+n,cache:!0,success:function(n){var a={};ct.a.visitInputs(t,(function(t,i){if("data_column"==t.type){a[i]=m.a.clone(t);var r=[];t.is_auto&&r.push({label:"Column: Row Number",value:"auto"}),t.is_zero&&r.push({label:"Column: None",value:"zero"});var o=n.metadata_column_types;for(var s in o)(-1!=["int","float"].indexOf(o[s])&&t.is_numeric||t.is_label)&&r.push({label:"Column: "+(parseInt(s)+1),value:s});t.data=r}var l=e.group.get(i);void 0===l||t.hidden||(t.value=l)})),t.push({name:"__data_columns",type:"hidden",hidden:!0,value:a}),e.chart.state("ok","Metadata initialized..."),e.form=new st.a({inputs:t,onchange:function(){e.group.set(e.form.data.create()),e.chart.set("modified",!0),e.chart.trigger("redraw")}}),e.group.set(e.form.data.create()),e.$el.empty().append(e.form.$el),i.resolve(),e.chart.trigger("redraw")}})})))}}),ut=c.a.View.extend({initialize:function(e){var t=this;this.app=e,this.chart=e.chart,this.repeat=new lt.a.View({title:"Data series",title_new:"Data series",min:1,onnew:function(){t.chart.groups.add({id:m.a.uid()})}}),this.setElement(a()("<div/>").append(this.repeat.$el)),this.listenTo(this.chart.groups,"remove",(function(e){t.repeat.del(e.id),t.chart.trigger("redraw")})),this.listenTo(this.chart.groups,"reset",(function(){t.repeat.delAll()})),this.listenTo(this.chart.groups,"add",(function(e){t.repeat.add({id:e.id,$el:new dt(t.app,{group:e}).$el,ondel:function(){t.chart.groups.remove(e)}})}))},render:function(){s.default.size(this.chart.plugin.groups)>0?this.repeat.$el.show():this.repeat.$el.hide()}}),ht=c.a.View.extend({initialize:function(e,t){var n=this;this.chart=e.chart,this.setElement("<div/>"),this.listenTo(this.chart,"load",(function(){n.render()}))},render:function(){var e=this,t=m.a.clone(this.chart.plugin.settings)||[],n=this.chart.plugin.specs.use_panels;"optional"==n?t.push({name:"__use_panels",type:"boolean",label:"Use multi-panels",help:"Would you like to separate your data into individual panels?",value:!1}):this.chart.settings.set("__use_panels","yes"==n?"true":"false"),this.$el.empty(),s.default.size(t)>0&&(ct.a.visitInputs(t,(function(t,n){var i=e.chart.settings.get(n);void 0===i||t.hidden||(t.value=i)})),this.form=new st.a({inputs:t,onchange:function(){e.chart.settings.set(e.form.data.create()),e.chart.trigger("redraw")}}),this.chart.settings.set(this.form.data.create()),this.$el.append(this.form.$el))}}),ft=c.a.View.extend({initialize:function(e){this.plugin=e.chart.plugin,this.setElement(this._template()),this.$title=this.$(".charts-description-title"),this.$image=this.$(".charts-description-image"),this.$text=this.$(".charts-description-text"),this.render()},render:function(){this.plugin.logo?(this.$image.attr("src",Object(d.getAppRoot)()+this.plugin.logo),this.$title.html(this.plugin.html||"Unavailable"),this.$text.html(m.a.linkify(this.plugin.description||"")),this.$el.show()):this.$el.hide()},_template:function(){return'<div class="charts-description">\n                    <table>\n                    <tr>\n                        <td class="charts-description-image-td">\n                            <img alt="charts description" class="charts-description-image"/>\n                        </td>\n                        <td>\n                            <div class="charts-description-title"/>\n                        </td>\n                    </tr>\n                    </table>\n                    <div class="charts-description-text"/>\n                </div>'}}),pt=c.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.chart=this.app.chart,this.description=new ft(this.app),this.title=new Ze.a.Input({onchange:function(){n.chart.set("title",n.title.value())}}),this.tabs=new ot.a.View({}),this.tabs.add({id:"settings",icon:"fa fa-gear",tooltip:"Change settings.",$el:a()("<div/>").append("<label><b>Provide a title</b><label>").append(this.title.$el).append(a()("<div/>").addClass("form-text text-muted").html("This title will appear in the list of 'Saved Visualizations'.")).append(new ht(this.app).$el)}),this.chart.plugin.groups&&this.tabs.add({id:"groups",icon:"fa-database",tooltip:"Select data.",$el:new ut(this.app).$el}),this.setElement("<div class='charts-editor'/>"),this.$el.append(this.description.$el),this.$el.append(this.tabs.$el),this.listenTo(this.chart,"load",(function(){n.title.value(n.chart.get("title"))}))}}),mt=c.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.chart=this.app.chart,this.options=t,this.setElement(a()("<div/>").addClass("charts-viewer").append(a()("<div/>").addClass("info").append(a()("<span/>").addClass("icon")).append(a()("<span/>").addClass("text")))),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,20),this._createContainer("div"),this.chart.on("redraw",(function(e){n.chart.get("modified")&&n.chart.plugin.specs.confirm&&!e?n.chart.state("info","Please confirm the settings before rendering the results."):n.app.deferred.execute((function(e){console.debug("viewer:redraw() - Redrawing..."),n._draw(e,n.chart)}))})),this.chart.on("set:state",(function(){var e=n.$(".charts-viewer-container"),t=n.$info,i=n.$icon,a=n.$text;switch(i.removeClass(),t.show(),a.html(n.chart.get("state_info")),n.chart.get("state")){case"ok":t.hide(),e.show();break;case"failed":i.addClass("icon fa fa-warning"),e.hide();break;case"info":i.addClass("icon fa fa-info"),e.hide();break;default:i.addClass("icon fa fa-spinner fa-spin"),e.show()}}))},_fullscreen:function(e,t){e.css("height",a()(window).height()-t),a()(window).resize((function(){e.css("height",a()(window).height()-t)}))},_createContainer:function(e,t){e=e||"div",t=t||1,this.$(".charts-viewer-container").remove(),this.targets=[];for(var n=0;n<t;n++){var i=m.a.uid(),r=a()("<div/>").addClass("charts-viewer-container").width(parseInt(100/t)+"%").append(a()("<"+e+" class='charts-viewer-canvas' />").attr("id",i));this.$el.append(r),this.targets.push(i)}},_draw:function(e,t){var n="true"==t.settings.get("__use_panels")?t.groups.length:1;this._createContainer(t.plugin.specs.tag,n),t.set("date",m.a.time()),t.state("wait","Please wait..."),this.app.chart_load({process:e,chart:t,dataset:this.app.dataset,targets:this.targets})}});function _t(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}function gt(e,t){_t(e.replace("image/png","image/octet-stream"),"".concat(t||"GalaxyImage",".png"))}function vt(e){var t=e.$el.find("svg");if(0!=t.length||!e.error){var n=t.length,i=parseInt(t.first().css("height")),r=parseInt(t.first().css("width")),o=new XMLSerializer,s=a()("<svg/>").attr({version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:r*n,height:i}),l=0;return t.each((function(){var e=a()(this).clone();!function(e){for(var t in document.styleSheets){var n=document.styleSheets[t].cssRules;if(n)for(var i=0,a=n.length;i<a;i++)try{e.find(n[i].selectorText).each((function(e,t){t.style.cssText+=n[i].style.cssText}))}catch(e){console.error(e)}}}(e);var t=a()('<g transform="translate('+l+', 0)">').attr("xmlns","http://www.w3.org/2000/svg");t.append(e.find("g").first()),s.append(t),l+=r})),{string:o.serializeToString(s[0]),height:i,width:r}}e.error("No SVG found. This visualization type does not support SVG/PDF export.")}var yt={createPNG:function(e){e.$el.find("svg").length>0?function(e){var t=vt(e),n=document.createElement("canvas"),i=n.getContext("2d"),r=new Image,o=a()('<div style="display:none;"/>').append(a()(n));a()("body").append(o),n.width=5*t.width,n.height=5*t.height,r.src="data:image/svg+xml;base64,"+window.btoa(t.string),r.onload=function(){i.drawImage(r,0,0,n.width,n.height),gt(n.toDataURL("image/png"),e.title),o.remove()}}(e):function(e){var t=e.$el.find(".charts-viewer-canvas");try{if(0!==t.width()&&0!==t.height()){var n=document.createElement("canvas");n.width=t.outerWidth(!0),n.height=t.outerHeight(!0);var i=n.getContext("2d");i.save(),i.fillStyle="rgb(255,255,255)",i.fillRect(0,0,n.width,n.height),i.restore(),i.translate(0,0),i.textAlign="left",i.textBaseline="top",t.children().each((function(){!function e(t,n,i,r){var o=t.prop("tagName").toLowerCase(),s=t.position(),l=n+s.left+parseInt(t.css("marginLeft"),10)+parseInt(t.css("borderLeftWidth"),10)+parseInt(t.css("paddingLeft"),10),c=i+s.top+parseInt(t.css("marginTop"),10)+parseInt(t.css("borderTopWidth"),10)+parseInt(t.css("paddingTop"),10);"div"==o||"span"==o?t.children().each((function(){e(a()(this),l,c)})):"canvas"==o&&r.drawImage(t[0],l,c)}(a()(this),0,0,i)}));var r=n.toDataURL("image/png");r&&gt(r,e.title)}}catch(t){console.debug("FAILED - screenshot::_canvas2png() - "+t),e.error&&e.error("Please reduce your visualization to a single panel and try again.")}}(e)},createSVG:function(e){_t("data:none/none;base64,".concat(window.btoa(vt(e).string)),"".concat(e.title||"GalaxyImage",".svg"))},createPDF:function(e){var t=vt(e),n={filename:"visualization",type:"application/pdf",height:t.height,width:t.width,scale:2,svg:t.string},i=a()("body"),r=i.find("#viewer-form");for(var o in 0===r.length&&(r=a()("<form>",{id:"viewer-form",method:"post",action:"http://export.highcharts.com/",display:"none"}),i.append(r)),r.empty(),n){var s=a()("<input/>",{type:"hidden",name:o,value:n[o]});r.append(s)}try{r.submit()}catch(e){console.log(e)}}};function bt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kt=c.a.View.extend({initialize:function(e){var t=this;this.app=e,this.model=new c.a.Model({visible:!1}),this.execute_button=new Ze.a.Button({icon:"fa-check-square",tooltip:"Confirm",onclick:function(){e.chart.trigger("redraw",!0)}}),this.export_button=new Ze.a.ButtonMenu({icon:"fa-camera",tooltip:"Export"}),this.export_button.addMenu({key:"png",title:"Save as PNG",icon:"fa-file",onclick:function(){t._wait(e.chart,(function(){yt.createPNG({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}),this.export_button.addMenu({key:"svg",title:"Save as SVG",icon:"fa-file-text-o",onclick:function(){t._wait(e.chart,(function(){yt.createSVG({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}),this.export_button.addMenu({key:"pdf",title:"Save as PDF",icon:"fa-file-o",onclick:function(){e.modal.show({title:"Send visualization data for PDF creation",body:"Galaxy does not provide integrated PDF export scripts. You may click 'Continue' to create the PDF by using a 3rd party service (https://export.highcharts.com).",buttons:{Cancel:function(){e.modal.hide()},Continue:function(){e.modal.hide(),t._wait(e.chart,(function(){yt.createPDF({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}})}}),this.left_button=new Ze.a.Button({icon:"fa-angle-double-left",tooltip:"Show",onclick:function(){t.model.set("visible",!0),window.dispatchEvent(new Event("resize"))}}),this.right_button=new Ze.a.Button({icon:"fa-angle-double-right",tooltip:"Hide",onclick:function(){t.model.set("visible",!1),window.dispatchEvent(new Event("resize"))}}),this.save_button=new Ze.a.Button({icon:"fa-save",tooltip:"Save",onclick:function(){e.chart.get("title")?(e.message.update({message:"Saving '".concat(e.chart.get("title"),"'. It will appear in the list of 'Saved Visualizations'."),status:"success"}),e.chart.save({error:function(){e.message.update({message:"Could not save visualization.",status:"danger"})}})):e.message.update({message:"Please provide a name.",status:"danger"})}}),this.buttons=[this.left_button,this.right_button,this.execute_button,this.export_button,this.save_button],this.setElement("<div/>");var n,i=bt(this.buttons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.$el.append(a.$el)}}catch(e){i.e(e)}finally{i.f()}this.listenTo(this.model,"change",(function(){return t.render()})),this.render()},render:function(){var e=this.model.get("visible");this.app.$el[e?"removeClass":"addClass"]("charts-fullscreen"),this.execute_button.model.set("visible",e&&!!this.app.chart.plugin.specs.confirm),this.save_button.model.set("visible",e),this.export_button.model.set("visible",e),this.right_button.model.set("visible",e),this.left_button.model.set("visible",!e);var t=this.app.chart.plugin.specs.exports||[];this.export_button.collection.each((function(e){e.set("visible",-1!==t.indexOf(e.get("key")))}))},_wait:function(e,t){this.app.deferred.ready()?t():this.app.message.update({message:"Your visualization is currently being processed. Please wait and try again."})}}),xt=c.a.View.extend({initialize:function(e){var t=this,n=Object(r.a)();this.modal=n&&n.modal?n.modal:new Qe.a.View,this.setElement(a()("<div/>").addClass("charts-client").append(a()("<div/>").addClass("charts-buttons")).append(a()("<div/>").addClass("charts-center")).append(a()("<div/>").addClass("charts-right"))),this.$center=this.$(".charts-center"),this.$right=this.$(".charts-right"),this.$buttons=this.$(".charts-buttons"),this.chart=new rt({},e),this.chart.plugin=e.visualization_plugin,this.chart.plugin.specs=this.chart.plugin.specs||{},this.chart_load=e.chart_load,this.message=new Ze.a.Message,this.deferred=new Xe.a,this.viewer=new mt(this),this.editor=new pt(this),this.menu=new kt(this),this.$center.append(this.viewer.$el),this.$right.append(this.message.$el).append(this.editor.$el),this.$buttons.append(this.menu.$el),a.a.ajax({url:"".concat(Object(d.getAppRoot)(),"api/datasets/").concat(e.dataset_id)}).done((function(e){t.dataset=e,t.chart.load(),t.chart.trigger("redraw")})).fail((function(e){var n=e.responseJSON&&e.responseJSON.err_msg;t.errormessage=n||"Import failed for unkown reason."}))}}),St={},Ct=function(e){var t=e.dataset_groups,n=e.dataset_id,i=[];t.each((function(e){s.default.each(e.get("__data_columns"),(function(t,a){var r=e.get(a),o=Tt(n,r);-1!==i.indexOf(r)||St[o]||"auto"==r||"zero"==r||void 0===r||i.push(r)}))})),0!==i.length?m.a.get({url:Object(d.getAppRoot)()+"api/datasets/"+n,data:{data_type:"raw_data",provider:"dataset-column",indeces:i.toString()},success:function(t){for(var a=i.length,r=new Array(a),o=0;o<r.length;o++)r[o]=[];for(var s in t.data){var l=t.data[s];for(var c in l){var d=l[c];void 0!==d&&2147483647!=d&&c<a&&r[c].push(d)}}for(var u in console.debug("tabular-datasets::_fetch() - Fetching complete."),r){var h=i[u],f=Tt(n,h);St[f]=r[u]}Mt(e)}}):Mt(e)},Mt=function(e){var t=e.dataset_groups,n=e.dataset_id;console.debug("tabular-datasets::_fillFromCache() - Filling request from cache.");var i=0;t.each((function(e){s.default.each(e.get("__data_columns"),(function(t,a){var r=e.get(a),o=Tt(n,r),s=St[o];s&&(i=Math.max(i,s.length))}))})),0===i&&(console.debug("tabular-datasets::_fillFromCache() - No data available."),e.chart&&e.chart.state("failed","No data available."));var a=[];t.each((function(e,t){for(var n=m.a.merge({key:t+":"+e.get("key"),values:[]},e.attributes),r=0;r<i;r++)n.values[r]={x:parseInt(r)};a.push(n)})),t.each((function(e,t){var r=a[t].values;s.default.each(e.get("__data_columns"),(function(t,a){var o=e.get(a);switch(o){case"auto":for(var s=0;s<i;s++)r[s][a]=parseInt(s);break;case"zero":for(var l=0;l<i;l++)r[l][a]=0;break;default:for(var c=Tt(n,o),d=St[c],u=0;u<i;u++){var h=r[u],f=d[u];isNaN(f)&&!t.is_label&&(f=0),h[a]=f}}}))})),e.success(a)},Tt=function(e,t){return e+"__"+t},jt={request:Ct,requestPanels:function(e){var t=e.process,n=e.chart,i=e.render,a=e.targets,r=e.dataset_id||e.chart.get("dataset_id"),o=e.dataset_groups||e.chart.groups;Ct({chart:n,dataset_id:r,dataset_groups:o,success:function(e){try{if(a.length==e.length){var r=!0;for(var o in e){var s=e[o];if(!i(a[o],[s])){r=!1;break}}r&&n.state("ok","Multi-panel chart drawn.")}else 1==a.length?i(a[0],e)&&n.state("ok","Chart drawn."):n.state("failed","Invalid panel count.");t.resolve()}catch(e){console.debug("FAILED: tabular-utilities::panelHelper() - "+e),n.state("failed",e),t.reject()}}})}};function Ot(e,t){s.default.each(t,(function(t){s.default.each(t.values,(function(t,n){for(var i in e)t[i]=parseInt(n)}))}))}var Dt={makeCategories:function(e,t){var n={},i=e[0].__data_columns;return s.default.each(t,(function(e){i[e].is_label&&(n[e]=[])})),e&&e[0]&&s.default.each(e[0].values,(function(e){for(var t in n)n[t].push(String(e[t]))})),Ot(n,e),{array:n}},makeUniqueCategories:function(e,t){var n={},i={},a={},r=e[0].__data_columns;for(var o in s.default.each(r,(function(e,t){e.is_label&&(n[t]={},i[t]=[],a[t]=0)})),e){var l=e[o];for(var c in l.values){var d=l.values[c];for(var u in n){var h=String(d[u]);void 0===n[u][h]&&(n[u][h]=a[u],i[u].push(t?[a[u],h]:h),a[u]++)}}}for(var f in e){var p=e[f];for(var m in p.values){var _=p.values[m];for(var g in n){var v=String(_[g]);_[g]=n[g][v]}}}return{categories:n,array:i,counter:a}},makeSeries:function(e,t){var n=[];for(var i in e){var a=e[i],r=[];for(var o in a.values){var s=[];if(t)for(var l in t){var c=t[l];s.push(a.values[o][c])}else for(var d in a.values[o])s.push(a.values[o][d]);r.push(s)}n.push(r)}return n},getDomains:function(e,t){function n(t,n){var i;for(var a in e){var r=f[t](e[a].values,(function(e){return e[n]}));i=void 0===i?r:Math[t](i,r)}return i}var i={};for(var a in t){var r=t[a];i[r]={min:n("min",r),max:n("max",r)}}return i},mapCategories:Ot,makeTickFormat:function(e){var t=e.type,n=e.precision,i=e.categories,a=e.formatter;if("hide"==t)a((function(){return""}));else if("auto"==t)i&&a((function(e){return i[e]||""}));else{var r=function(e){switch(t){case"s":var i=f.formatPrefix(e);return i.scale(e).toFixed()+i.symbol;default:return f.format("."+n+t)(e)}};a(i?function(e){var t=i[e];if(!t)return"";if(isNaN(t))return t;try{return r(t)}catch(e){return t}}:function(e){return r(e)})}},addZoom:function(e){var t=100,n=e.yAxis,i=e.xAxis,a=e.xDomain||i.scale().domain,r=e.yDomain||n.scale().domain,o=e.redraw,s=e.svg,l=i.scale(),c=n.scale(),d=l.domain().slice(),u=c.domain().slice(),h=f.behavior.zoom();function p(e,n){return e[0]=Math.min(Math.max(e[0],n[0]),n[1]-n[1]/t),e[1]=Math.max(n[0]+n[1]/t,Math.min(e[1],n[1])),e}return l.nice(),c.nice(),h.x(l).y(c).scaleExtent([1,t]).on("zoom",(function(){r(p(c.domain(),u)),a(p(l.domain(),d)),o()})),s.call(h).on("dblclick.zoom",(function(){a(d),r(u),o(),h.scale(1),h.translate([0,0])})),h}},Lt=function e(t,n,i){m.a.request({type:"GET",url:Object(d.getAppRoot)()+"api/datasets/"+t.get("dataset_id_job"),data:{},success:function(a){var r=!1;switch(a.state){case"ok":t.state("wait","Job completed successfully..."),n&&n(a),r=!0;break;case"error":t.state("failed","Job has failed. Please check the history for details."),i&&i(a),r=!0;break;case"running":t.state("wait","Your job is running in the background and you may close the browser tab. Results will be available in your saved visualizations list.")}r||window.setTimeout((function(){e(t,n,i)}),1e3)}})},Et=function(){var e=Object(r.a)();e&&e.currHistoryPanel&&e.currHistoryPanel.refreshContents()},At={request:function(e,t,n,i){e.state("wait","Requesting job results..."),e.get("modified")&&e.get("dataset_id_job")&&(m.a.request({type:"PUT",url:Object(d.getAppRoot)()+"api/histories/none/contents/"+e.get("dataset_id_job"),data:{deleted:!0},success:function(){Et()}}),e.set("dataset_id_job",null),e.set("modified",!1)),e.get("dataset_id_job")?Lt(e,n,i):(e.state("wait","Sending job request..."),m.a.request({type:"POST",url:Object(d.getAppRoot)()+"api/tools",data:t,success:function(t){if(t.outputs&&0!==t.outputs.length){Et();var a=t.outputs[0];e.state("wait","Your job has been queued. You may close the browser window. The job will run in the background."),e.set("dataset_id_job",a.id),e.save(),Lt(e,n,i)}else e.state("failed","Job submission failed. No response."),i&&i()},error:function(n){var a="";n&&n.message&&n.message.data&&n.message.data.input&&(a=n.message.data.input+"."),e.state("failed","This visualization requires the '"+t.tool_id+"' tool. Please make sure it is installed. "+a),i&&i()}}))},requestCharts:function(e,t){var n="",i="",a=0;for(var r in e.settings.attributes){var o=e.settings.get(r);s.default.each([[" ","&#32;"],[",","&#44;"],[":","&#58;"]],(function(e){o=o.replace(new RegExp(e[0],"g"),e[1])})),n+=r+":"+o+", "}return n=n.substring(0,n.length-2),e.groups.each((function(e){a++,s.default.each(e.get("__data_columns"),(function(t,n){i+=n+"_"+a+":"+(parseInt(e.get(n))+1)+", "}))})),i=i.substring(0,i.length-2),{tool_id:"toolshed.g2.bx.psu.edu/repos/iuc/charts/charts/1.0.1",inputs:{input:{id:e.get("dataset_id"),src:"hda"},module:t,columns:i,settings:n}}}},It=n(151);function Pt(e,t){console.log("initMasthead");var n=a()("#masthead");if(e.hide_masthead)n.remove();else if(t){var i=new It.a;Object(It.b)(t,e,i)}}function Yt(e){console.log("panelManagement"),console.log("(looks like it's assinging some global handlers to window to manage the left and right panel views?)");var t=e.left_panel,n=e.right_panel,i=e.rightPanelSelector,a=e.leftPanelSelector;if(t){var r=new window.bundleEntries.panels.LeftPanel({el:a});window.force_left_panel=function(e){console.log("window.force_left_panel fired"),r.force_panel(e)}}if(n){var o=new window.bundleEntries.panels.RightPanel({el:i});window.handle_minwidth_hint=function(e){console.log("window.handle_minwidth_hint",e),o.handle_minwidth_hint(e)},window.force_right_panel=function(e){console.log("window.force_right_panel",e),o.force_panel(e)}}}var Rt=n(89),Ht=n(263),Nt=n(264),$t=n(8),Ft=n(170),Wt=n(98),zt=n(67);function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||Bt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Bt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Bt(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jt(e,t,n){return t&&Gt(e.prototype,t),n&&Gt(e,n),e}function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=tn(e);if(t){var a=tn(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var an=function e(t,n){nn(this,e),t.references.push(this),this.nodeId=n.id},rn=function(e){Xt(n,e);var t=Zt(n);function n(e,i,a){var r;return nn(this,n),(r=t.call(this,e,i)).toolInput=a,r}return n}(an),on=function(e){Xt(n,e);var t=Zt(n);function n(e,i,a){var r;return nn(this,n),(r=t.call(this,e,i)).pja=a,r}return n}(an),sn=function(){function e(t){nn(this,e),this.name=t,this.references=[]}return Jt(e,[{key:"canExtract",value:function(){return!0}}]),e}(),ln=function(){function e(){nn(this,e),this.parameters=[]}return Jt(e,[{key:"getParameter",value:function(e){var t,n=Vt(this.parameters);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.name==e)return i}}catch(e){n.e(e)}finally{n.f()}var a=new sn(e);return this.parameters.push(a),a}},{key:"getParameterFromMatch",value:function(e){return this.getParameter(e.substring(2,e.length-1))}}]),e}();var cn=n(86);function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hn(e,t,n){return t&&un(e.prototype,t),n&&un(e,n),e}var fn=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.33,1.5,2,2.5,3,4],pn=7,mn=["input","text","textarea"],_n=function(){function e(t){dn(this,e),this.panel=t}return hn(e,[{key:"test",value:function(e,t){var n=this;window.clearTimeout(this.timeout);var i=e.pageX,r=e.pageY,o=a()(this.panel),s=o.position(),l=o.width(),c=o.height(),d=o.parent(),u=d.width(),h=d.height(),f=d.offset(),p=f.left,m=f.top,_=p+d.width(),g=m+d.height(),v=-(l-u/2),y=-(c-h/2),b=u/2,w=h/2,k=!1,x=0;i-5<p?s.left<b&&(x=Math.min(23,b-s.left),o.css("left",s.left+x),k=!0):i+5>_?s.left>v&&(x=Math.min(23,s.left-v),o.css("left",s.left-x),k=!0):r-5<m?s.top<w&&(x=Math.min(23,w-s.top),o.css("top",s.top+x),k=!0):r+5>g&&s.top>y&&(x=Math.min(23,s.top-v),o.css("top","".concat(s.top-x,"px")),k=!0),k&&(t(),this.timeout=window.setTimeout((function(){n.test(e,t)}),50))}},{key:"stop",value:function(){window.clearTimeout(this.timeout)}}]),e}();function gn(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}var vn=function(){function e(t){dn(this,e),this.app=t,this.cv=a()("#canvas-viewport"),this.cc=this.cv.find("#canvas-container"),this.overview=a()("#overview-container"),this.oc=this.overview.find("#overview-canvas"),this.ov=this.overview.find("#overview-viewport"),this.zoomLevel=pn,this.canvasZoom=fn[pn],this.init_drag(),this.init_copy_paste()}return hn(e,[{key:"setZoom",value:function(e){return this.zoomLevel=Math.min(Math.max(0,e),fn.length-1),this.canvasZoom=fn[this.zoomLevel],this.cv.css("transform-origin","top left"),this.cv.css("transform","scale("+this.canvasZoom+")"),this.cv.css("width","".concat(100/this.canvasZoom,"%")),this.cv.css("height","".concat(100/this.canvasZoom,"%")),this._fitCanvasToNodes(),this.drawOverview(),this.zoomLevel}},{key:"move",value:function(e,t){e=Math.min(e,this.cv.width()/2),e=Math.max(e,-this.cc.width()+this.cv.width()/2),t=Math.min(t,this.cv.height()/2),t=Math.max(t,-this.cc.height()+this.cv.height()/2),this.cc.css({left:e,top:t}),this.cv.css({"background-position-x":e,"background-position-y":t}),this.updateViewportOverlay()}},{key:"init_drag",value:function(){var e,t,n=this,i=this;this.cc.each((function(){this.scroll_panel=new _n(this)})),this.cv.bind("click",(function(){document.activeElement.blur()})).bind("dragstart",(function(){var n=a()(this).offset(),r=i.cc.position();t=r.top-n.top,e=r.left-n.left})).bind("drag",(function(i,a){n.move((a.offsetX+e)/n.canvasZoom,(a.offsetY+t)/n.canvasZoom)})).bind("dragend",(function(){i.drawOverview()})),this.overview.click((function(e){if(i.overview.hasClass("blockaclick"))i.overview.removeClass("blockaclick");else{var t=i.cc.width(),a=i.cc.height(),r=i.oc.width(),o=i.oc.height(),s=e.pageX-i.oc.offset().left-i.ov.width()/2,l=e.pageY-i.oc.offset().top-i.ov.height()/2;n.move(-s/r*t,-l/o*a),n.drawOverview()}})),this.ov.bind("drag",(function(e,t){var a=i.cc.width(),r=i.cc.height(),o=i.oc.width(),s=i.oc.height(),l=t.offsetX-i.overview.offset().left,c=t.offsetY-i.overview.offset().top;n.move(-l/o*a,-c/s*r)})).bind("dragend",(function(){i.overview.addClass("blockaclick"),i.drawOverview()})),a()(".workflow-overview").bind("drag",(function(e,t){var n=a()(this).offsetParent(),r=n.offset(),o=Math.max(n.width()-(t.offsetX-r.left),n.height()-(t.offsetY-r.top));a()(this).css({width:o,height:o}),i.drawOverview()})),a()(".workflow-overview div").bind("drag",(function(){})),a()(".workflow-overview").bind("dragend",(function(e,t){var n=a()(this).offsetParent(),i=n.offset(),r=Math.max(n.width()-(t.offsetX-i.left),n.height()-(t.offsetY-i.top));localStorage.setItem("overview-size","".concat(r,"px"))}));var r=localStorage.getItem("overview-size");void 0!==r&&a()(".workflow-overview").css({width:r,height:r})}},{key:"init_copy_paste",value:function(){var e=this;document.addEventListener("copy",(function(t){!document.activeElement||mn.includes(document.activeElement.type)||document.getSelection().toString()||e.app.activeNode&&"subworkflow"!==e.app.activeNode.type&&(t.clipboardData.setData("application/json",JSON.stringify({nodeId:e.app.activeNode.id})),t.preventDefault())})),document.addEventListener("paste",(function(t){if(document.activeElement&&!mn.includes(document.activeElement.type)){var n;try{n=JSON.parse(t.clipboardData.getData("application/json")).nodeId}catch(e){console.debug(e)}n&&e.app.nodes[n]&&e.app.nodes[n].onClone(),t.preventDefault()}}))}},{key:"updateViewportOverlay",value:function(){var e=this.cc,t=this.cv,n=this.oc,i=this.ov,a=e.width(),r=e.height(),o=n.width(),s=n.height(),l=e.position();i.css({left:-l.left/a*o,top:-l.top/r*s,width:t.width()/a*o-2,height:t.height()/r*s-2})}},{key:"drawOverview",value:function(){this._fitCanvasToNodes();var e,t,n,i,r=a()("#overview-canvas"),o=r.parent().parent().width(),s=r.get(0).getContext("2d"),l=a()("#canvas-container").width(),c=a()("#canvas-container").height(),d=this.cv.width(),u=this.cv.height();l<d&&c<u?(i=(o-(n=l/d*o))/2,t=(o-(e=c/u*o))/2):l<c?(t=0,e=o,i=(o-(n=Math.ceil(e*l/c)))/2):(n=o,i=0,t=(o-(e=Math.ceil(n*c/l)))/2),r.parent().css({left:i,top:t,width:n,height:e}),r.attr("width",n),r.attr("height",e);var h=function(t,i){var a=t.position(),r=a.left/l*n,o=a.top/c*e,d=t.width()/l*n,u=t.height()/c*e;s.fillStyle=i,s.fillRect(r,o,d,u)};this.highlightInOverlay=function(e){var t=a()(e.element),n=0,i="#25537b";e.errors&&(i="#e31a1e");var r=function(e,t,n){var i=[];i.push(e);for(var a=gn(e),r=gn(t),o=Math.round((r.r-a.r)/(n+1)),s=Math.round((r.g-a.g)/(n+1)),l=Math.round((r.b-a.b)/(n+1)),c=0;c<n;c++)a.r+=o,a.g+=s,a.b+=l,i.push((d=a.r,u=a.g,h=a.b,"#"+((1<<24)+(d<<16)+(u<<8)+h).toString(16).slice(1)));var d,u,h;return i.push(t),i}("#400404",i,40),o=setInterval((function(){n++,h(t,r[n]),40===n&&clearInterval(o)}),20)},a.a.each(this.app.nodes,(function(e,t){var n=a()(t.element),i="#25537b";t.errors&&(i="#e31a1e"),h(n,i)})),this.updateViewportOverlay()}},{key:"_fitCanvasToNodes",value:function(){function e(e,t){return Math.ceil(e/t)*t}function t(e,t){return e<t||e>3*t?-(e-(Math.ceil(e%t/t)+1)*t):0}var n=this.canvasZoom,i=this._boundsForAllNodes(),r=this.cc.position(),o=this.cc.parent(),s=t(i.xmin,100),l=t(i.ymin,100);s=Math.max(s,r.left),l=Math.max(l,r.top);var c=r.left-s,d=r.top-l,u=e(i.xmax+100,100)+s,h=e(i.ymax+100,100)+l;u=Math.max(u,-c+o.width()),h=Math.max(h,-d+o.height()),this.cc.css({left:c/n,top:d/n,width:u,height:h}),this.cc.children().each((function(){var e=a()(this).position();a()(this).css("left",(e.left+s)/n),a()(this).css("top",(e.top+l)/n)}))}},{key:"_boundsForAllNodes",value:function(){var e,t=1/0,n=-1/0,i=1/0,r=-1/0;return Object.values(this.app.nodes).forEach((function(o){var s=a()(o.element);e=s.position(),t=Math.min(t,e.left),n=Math.max(n,e.left+s.width()),i=Math.min(i,e.top),r=Math.max(r,e.top+s.height())})),{xmin:t,xmax:n,ymin:i,ymax:r}}},{key:"scrollToNode",value:function(e){var t=a()(e.element),n=t.position(),i=a()("#canvas-viewport"),r=n.left+t.width()/2,o=n.top+t.height()/2,s=r-i.width()/2,l=o-i.height()/2;this.move(-s,-l),this.highlightInOverlay(e)}},{key:"scrollToNodes",value:function(){var e=a()("#canvas-viewport"),t=a()("#canvas-container"),n=0,i=0;t.width()!=e.width()&&(i=(e.width()-t.width())/2),t.height()!=e.height()&&(n=(e.height()-t.height())/2),t.css({left:i,top:n})}}]),e}(),yn=n(489),bn=n(611),wn=n(150),kn={components:{BDropdown:yn.a,BDropdownItem:bn.a,BButton:wn.a},props:{hasChanges:{type:Boolean},requiredReindex:{type:Boolean}}},xn=n(5),Sn=Object(xn.a)(kn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-header-buttons"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-attributes",attrs:{id:"workflow-home-button",role:"button",title:"Edit Attributes",variant:"link","aria-label":"Edit Attributes"},on:{click:function(t){return e.$emit("onAttributes")}}},[n("span",{staticClass:"fa fa-pencil-alt"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-save",attrs:{id:"workflow-save-button",role:"button",title:"Save Workflow",variant:"link","aria-label":"Save Workflow",disabled:!e.hasChanges},on:{click:function(t){return e.$emit("onSave")}}},[n("span",{staticClass:"fa fa-floppy-o"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-report",attrs:{id:"workflow-report-button",role:"button",title:"Edit Report",variant:"link","aria-label":"Edit Report"},on:{click:function(t){return e.$emit("onReport")}}},[n("span",{staticClass:"fa fa-edit"})]),e._v(" "),n("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-options",attrs:{"no-caret":"",right:"",id:"workflow-options-button",role:"button",title:"Workflow Options",variant:"link","aria-label":"Workflow Options"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("span",{staticClass:"fa fa-cog"})]},proxy:!0}])},[e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onSaveAs")}}},[n("span",{staticClass:"fa fa-floppy-o mr-1"}),e._v("Save As...")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onLint")}}},[n("span",{staticClass:"fa fa-magic mr-1"}),e._v("Best Practices")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onLayout")}}},[n("span",{staticClass:"fa fa-align-left mr-1"}),e._v("Auto Layout")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onUpgrade")}}},[n("span",{staticClass:"fa fa-recycle mr-1"}),e._v("Upgrade All Workflow Steps")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onDownload")}}},[n("span",{staticClass:"fa fa-download mr-1"}),e._v("Download")])],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-run",attrs:{id:"workflow-run-button",role:"button",title:"Run Workflow",variant:"link","aria-label":"Run Workflow"},on:{click:function(t){return e.$emit("onRun")}}},[n("span",{staticClass:"fa fa-play"})])],1)}),[],!1,null,null,null).exports,Cn=n(14),Mn=n(23),Tn=n(20),jn=n(17),On=n(7),Dn=n.n(On),Ln=n(168),En=n(63);$t.default.use(Cn.a);var An={props:{labelTitle:{type:String,default:""},labels:{type:Array,default:null},argumentName:{type:String,default:null}},data:function(){return{selectedValue:0,modalShow:!0}},computed:{title:function(){return"Insert '".concat(this.argumentName,"'")},hasLabels:function(){return this.labels&&this.labels.length>0}},methods:{onOk:function(){this.$emit("onOk",this.labels[this.selectedValue])},onCancel:function(){this.$emit("onCancel")}}},In=Object(xn.a)(An,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-modal",{attrs:{title:e.title,"ok-title":"Continue"},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[n("div",{staticClass:"ml-2"},[n("h5",{staticClass:"mb-3"},[e._v("Select "+e._s(e.labelTitle)+" Label:")]),e._v(" "),e.hasLabels?n("div",e._l(e.labels,(function(t,i){return n("b-form-radio",{key:i,staticClass:"my-2",attrs:{name:"labels",value:i},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},[e._v("\n                    "+e._s(t)+"\n                ")])})),1):n("b-alert",{attrs:{show:"",variant:"info"}},[e._v("\n                No labels found. Please specify labels in the Workflow Editor.\n            ")]),e._v(" "),n("p",{staticClass:"mt-3 text-muted"},[e._v("\n                You may add new labels by selecting a step in the workflow editor and then editing the corresponding\n                label field in the step form.\n            ")])],1)])],1)}),[],!1,null,null,null).exports,Pn=n(141),Yn={props:{inputs:{type:Array,required:!0}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.inputs;e.form=new st.a({el:t,inputs:e.inputs}).on("change",e.onChange),e.onChange()}))},methods:{onChange:function(){this.$emit("onChange",this.form.data.create())}}},Rn=Object(xn.a)(Yn,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"inputs"})}),[],!1,null,null,null).exports;function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}$t.default.use(Cn.a);var $n={components:{MarkdownSelector:In,DataDialog:Pn.a,Form:Rn},props:{argumentName:{type:String,required:!0},argumentPayload:{type:Object,default:null},history:{type:String,required:!0},labels:{type:Array,default:null},useLabels:{type:Boolean,required:!0}},data:function(){return{dataTag:null,formData:{},formShow:!1,labelShow:!1,dataShow:!1}},computed:{formInputs:function(){var e=null;return this.argumentPayload.settings&&this.argumentPayload.settings.length>0&&(e=this.argumentPayload.settings.slice()),this.argumentPayload.groups&&this.argumentPayload.groups.length>0&&(e=e||[]).push({type:"repeat",title:"Columns",name:"groups",min:1,inputs:this.argumentPayload.groups.map((function(e){return"data_column"==e.type&&(e.is_workflow=!0),e}))}),e}},created:function(){this.useLabels?this.labelShow=!0:this.dataShow=!0},methods:{onChange:function(e){this.formData=e},onLabel:function(e){this.dataTag='output="'.concat(e,'"'),this.labelShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onData:function(e){this.dataTag="history_dataset_id=".concat(e),this.dataShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onOk:function(){var e="";Object.entries(this.formData).forEach((function(t){var n=Hn(t,2),i=n[0],a=n[1];a&&(e+=", ".concat(i,'="').concat(a,'"'))})),this.$emit("onOk","visualization(visualization_id=".concat(this.argumentName,", ").concat(this.dataTag).concat(e,")"))},onCancel:function(){this.$emit("onCancel")}}},Fn=(n(559),Object(xn.a)($n,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.labelShow?n("MarkdownSelector",{attrs:{"initial-value":e.argumentType,"argument-name":e.argumentName,labels:e.labels,"label-title":e.selectedLabelTitle},on:{onOk:e.onLabel,onCancel:e.onCancel}}):e._e(),e._v(" "),e.dataShow?n("DataDialog",{attrs:{history:e.history,format:"id"},on:{onOk:e.onData,onCancel:e.onCancel}}):e._e(),e._v(" "),e.formShow?n("b-modal",{attrs:{"modal-class":"visualization-dialog-modal",title:"Configure Visualization","ok-title":"Continue"},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.formShow,callback:function(t){e.formShow=t},expression:"formShow"}},[n("Form",{attrs:{inputs:e.formInputs},on:{onChange:e.onChange}})],1):e._e()],1)}),[],!1,null,null,null).exports),Wn=n(205),zn=n(106),Un=n(21);function Vn(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var Bn={mixins:[zn.a],props:{getData:{type:Function,required:!0},title:{type:String,required:!0},leafIcon:{type:String,default:null},labelKey:{type:String,default:"id"},detailsKey:{type:String,default:null},timeKey:{type:String,default:"update_time"},isEncoded:{type:Boolean,default:!1}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.load()},methods:{onOk:function(e){this.$emit("onOk",e)},onCancel:function(){this.$emit("onCancel")},load:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.filter=null,t.optionsShow=!1,e.prev=2,e.next=5,t.getData();case 5:n=e.sent,i=n.data,t.items=i.map((function(e){var n=e[t.timeKey];return n&&(n=new Date(n).toLocaleString("default",{day:"numeric",month:"short",year:"numeric",minute:"numeric",hour:"numeric"})),{id:e.id,label:e[t.labelKey]||null,details:e[t.detailsKey]||null,time:n||null,isLeaf:!0}})),t.optionsShow=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.errorMessage=Object(Un.a)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Vn(r,i,a,o,s,"next",e)}function s(e){Vn(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},qn=Object(xn.a)(Bn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":e.onCancel},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{attrs:{title:e.title},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:!1,"is-encoded":e.isEncoded,filter:e.filter,"leaf-icon":e.leafIcon,"show-details":!!e.detailsKey},on:{clicked:e.onOk,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports;$t.default.use(Cn.a);var Gn={components:{MarkdownSelector:In,MarkdownVisualization:Fn,BasicSelectionDialog:qn,DatasetCollectionDialog:Wn.a,DataDialog:Pn.a},props:{argumentName:{type:String,default:null},argumentType:{type:String,default:null},argumentPayload:{type:Object,default:null},labels:{type:Array,default:null},useLabels:{type:Boolean,default:!1}},data:function(){return{selectorConfig:{job_id:{labelTitle:"Step"},invocation_id:{labelTitle:"Step"},history_dataset_id:{labelTitle:"Output"},history_dataset_collection_id:{labelTitle:"Output"}},jobsUrl:"".concat(Object(d.getAppRoot)(),"api/jobs"),workflowsUrl:"".concat(Object(d.getAppRoot)(),"api/workflows"),invocationsUrl:"".concat(Object(d.getAppRoot)(),"api/invocations"),historiesUrl:"".concat(Object(d.getAppRoot)(),"api/histories?view=detailed&q=published&qv=True"),selectedShow:!1,visualizationShow:!1,workflowShow:!1,historyShow:!1,jobShow:!1,invocationShow:!1,dataShow:!1,dataCollectionShow:!1}},computed:{selectedLabelTitle:function(){var e=this.selectorConfig[this.argumentType];return e&&e.labelTitle||"Select Label"}},created:function(){this.onCreate()},methods:{getInvocations:function(){return Dn.a.get(this.invocationsUrl)},getJobs:function(){return Dn.a.get(this.jobsUrl)},getWorkflows:function(){return Dn.a.get(this.workflowsUrl)},getHistories:function(){return Dn.a.get(this.historiesUrl)},onData:function(e){this.dataShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(history_dataset_id=").concat(e,")"))},onDataCollection:function(e){this.dataCollectionShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(history_dataset_collection_id=").concat(e.id,")"))},onJob:function(e){this.jobShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(job_id=").concat(e.id,")"))},onInvocation:function(e){this.invocationShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(invocation_id=").concat(e.id,")"))},onHistory:function(e){this.historyShow=!1,this.$emit("onInsert","history_link(history_id=".concat(e.id,")"))},onWorkflow:function(e){this.workflowShow=!1,this.$emit("onInsert","workflow_display(workflow_id=".concat(e.id,")"))},onVisualization:function(e){this.visualizationShow=!1,this.$emit("onInsert",e)},onCreate:function(){var e=this;"workflow_id"==this.argumentType?this.workflowShow=!0:"history_id"==this.argumentType?this.historyShow=!0:"history_dataset_id"==this.argumentType?this.useLabels?this.selectedShow=!0:Object(En.d)().then((function(t){e.dataHistoryId=t,e.dataShow=!0})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.selectedShow=!0:Object(En.d)().then((function(t){e.dataHistoryId=t,e.dataCollectionShow=!0})):"invocation_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.invocationShow=!0:"job_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.jobShow=!0:"visualization_id"==this.argumentType&&Object(En.d)().then((function(t){e.dataHistoryId=t,e.visualizationShow=!0}))},onOk:function(e){var t=this;e=e||"<ENTER LABEL>",this.selectedShow=!1,"history_dataset_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(output="').concat(e,'")')):Object(En.d)().then((function(e){t.dataShow=!0,t.dataHistoryId=e})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(output="').concat(e,'")')):Object(En.d)().then((function(e){t.dataCollectionShow=!0,t.dataHistoryId=e})):"job_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(step="').concat(e,'")')):this.jobShow=!0:"invocation_id"==this.argumentType&&(this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(step="').concat(e,'")')):this.invocationShow=!0)},onCancel:function(){this.dataCollectionShow=!1,this.selectedShow=!1,this.workflowShow=!1,this.visualizationShow=!1,this.jobShow=!1,this.invocationShow=!1,this.dataShow=!1,this.$emit("onCancel")}}},Jn=Object(xn.a)(Gn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.selectedShow?n("MarkdownSelector",{attrs:{"initial-value":e.argumentType,"argument-name":e.argumentName,labels:e.labels,"label-title":e.selectedLabelTitle},on:{onOk:e.onOk,onCancel:e.onCancel}}):e.visualizationShow?n("MarkdownVisualization",{attrs:{"argument-name":e.argumentName,"argument-payload":e.argumentPayload,labels:e.labels,"use-labels":e.useLabels,history:e.dataHistoryId},on:{onOk:e.onVisualization,onCancel:e.onCancel}}):e.dataShow?n("DataDialog",{attrs:{history:e.dataHistoryId,format:"id"},on:{onOk:e.onData,onCancel:e.onCancel}}):e.dataCollectionShow?n("DatasetCollectionDialog",{attrs:{history:e.dataHistoryId,format:"id"},on:{onOk:e.onDataCollection,onCancel:e.onCancel}}):e.jobShow?n("BasicSelectionDialog",{attrs:{"get-data":e.getJobs,"is-encoded":!0,title:"Job","label-key":"id"},on:{onOk:e.onJob,onCancel:e.onCancel}}):e.invocationShow?n("BasicSelectionDialog",{attrs:{"get-data":e.getInvocations,"is-encoded":!0,title:"Invocation","label-key":"id"},on:{onOk:e.onInvocation,onCancel:e.onCancel}}):e.workflowShow?n("BasicSelectionDialog",{attrs:{"get-data":e.getWorkflows,title:"Workflow","leaf-icon":"fa fa-sitemap fa-rotate-270","label-key":"name"},on:{onOk:e.onWorkflow,onCancel:e.onCancel}}):e.historyShow?n("BasicSelectionDialog",{attrs:{"get-data":e.getHistories,title:"History","label-key":"name"},on:{onOk:e.onHistory,onCancel:e.onCancel}}):e._e()],1)}),[],!1,null,null,null).exports,Kn="\n<div>\n<h3>Overview</h3>\n\n<p>\n    This document Markdown document will be used to generate your Galaxy Page.\n    This document should be Markdown with embedded command for extracting and\n    displaying Galaxy objects and their metadata. \n</p>\n\n".concat('\n<p>\n    For an overview of standard Markdown visit the\n    <a href="https://commonmark.org/help/tutorial/">commonmark.org tutorial</a>.\n</p>\n\n<p>\n    The Galaxy extensions to Markdown are represented as code blocks, these blocks start\n    with the line <tt>```galaxy</tt> and end with the line <tt>```</tt> and have a\n    command with arguments that reference parts of the workflow in the middle.\n</p>',"\n\n<h3>History Contents Commands</h3>\n\n<p>\n    These commands reference a dataset. For instance, the following examples would display\n    the dataset collection corresponding to a Galaxy dataset collection ID and display a\n    single dataset as an image corresponding to a Galaxy dataset ID.\n</p>\n\n<pre>\n```galaxy\nhistory_dataset_collection_display(history_dataset_collection_id=33b43b4e7093c91f)\n```\n</pre>\n\n<pre>\n```galaxy\nhistory_dataset_as_image(history_dataset_id=33b43b4e7093c91f)\n```\n</pre>\n\n\n").concat("\n<dt><tt>history_dataset_display</tt></dt>\n<dd>Embed a dataset description in the resulting document.</dd>\n<dt><tt>history_dataset_collection_display</tt></dt>\n<dd>Embed a dataset collection description in the resulting document.</dd>\n<dt><tt>history_dataset_as_image</tt></dt>\n<dd>Embed a dataset as an image in the resulting document - the dataset should be an image datatype.</dd>\n<dt><tt>history_dataset_peek</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'peek' into the resulting document - this is datatype dependent metadata but usually this is a few lines from the start of a file.</dd>\n<dt><tt>history_dataset_info</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'info' into the resulting document - this is datatype dependent metadata but usually this is the program output that generated the dataset.</dd>\n</dl>\n</div>\n","\n\n<h3>Workflow Commands</h3>\n\n<p>\n    These commands reference a workflow (currently only one). The following example would\n    display a representation of the workflow in the resulting Galaxy Page:\n</p>\n\n<pre>\n```galaxy\nworkflow_display(workflow_id=33b43b4e7093c91f>)\n```\n</pre>\n\n<dl>\n<dt><tt>workflow_display</tt></dt>\n<dd>Embed a description of the workflow itself in the resulting document.</dd>\n</dl>\n\n<h3>Job Commands</h3>\n\n<p>\n    These commands reference a Galaxy job.For instance, the\n    following example would show the job parameters the job ID 33b43b4e7093c91f:\n</p>\n\n<pre>\n```galaxy\njob_parameters(job_id=33b43b4e7093c91f)\n```\n</pre>\n\n<dt><tt>tool_stderr</tt></dt>\n<dd>Embed the tool standard error stream for this job in the resulting document.</dd>\n<dt><tt>tool_stdout</tt></dt>\n<dd>Embed the tool standard output stream for this job in the resulting document.</dd>\n<dt><tt>job_metrics</tt></dt>\n<dd>Embed the job metrics for this job in the resulting document (if Galaxy is configured and you have permission).</dd>\n<dt><tt>job_parameters</tt></dt>\n<dd>Embed the tool parameters for this job in the resulting document.</dd>\n");function Xn(){var e=a()(Kn);Object(O.e)("Pages Markdown Help",e,{Ok:O.b})}function Qn(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}$t.default.use(Cn.a);var Zn=[{id:"history_dataset_display",name:"Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_collection_display",name:"Collection",emitter:"onHistoryCollectionId"},{id:"history_dataset_as_image",name:"Image",emitter:"onHistoryDatasetId"},{id:"history_dataset_index",name:"Dataset Index",emitter:"onHistoryDatasetId"},{id:"history_dataset_embedded",name:"Embedded Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_type",name:"Dataset Type",emitter:"onHistoryDatasetId"},{id:"history_dataset_link",name:"Link to Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_name",name:"Name of Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_peek",name:"Peek into Dataset",emitter:"onHistoryDatasetId"},{id:"history_dataset_info",name:"Dataset Details",emitter:"onHistoryDatasetId"}],ei={components:{MarkdownDialog:Jn,ToolSection:Ln.a},props:{nodes:{type:Object,default:null}},data:function(){return{selectedArgumentName:null,selectedType:null,selectedLabels:null,selectedShow:!1,selectedPayload:null,visualizationIndex:{},error:null,historySection:{title:"History",name:"history",elems:[].concat(Zn,[{id:"history_link",name:"Link to Import",emitter:"onHistoryId"}])},historyInEditorSection:{title:"History",name:"history",elems:[].concat(Zn,[{id:"history_link",name:"Link to Import"}])},jobSection:{title:"Jobs",name:"jobs",elems:[{id:"job_metrics",name:"Job Metrics",description:"as table",emitter:"onJobId"},{id:"job_parameters",name:"Job Parameters",description:"as table",emitter:"onJobId"},{id:"tool_stdout",name:"Tool Output",description:"of job run",emitter:"onJobId"},{id:"tool_stderr",name:"Tool Error",description:"of job run",emitter:"onJobId"}]},workflowSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_time",name:"Invocation Time",emitter:"onInvocationId"},{id:"workflow_display",name:"Workflow Display",emitter:"onWorkflowId"}]},workflowInEditorSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_inputs",name:"Invocation Inputs"},{id:"invocation_outputs",name:"Invocation Output"},{id:"invocation_time",name:"Time a Workflow",description:"was invoked"},{id:"workflow_display",name:"Current Workflow",description:"containing all steps"}]},otherSection:{title:"Miscellaneous",name:"others",elems:[{id:"generate_galaxy_version",name:"Galaxy Version",description:"as text"},{id:"generate_time",name:"Current Time",description:"as text"}]},visualizationSection:{title:"Visualizations",name:"visualizations",elems:[]}}},computed:{isWorkflow:function(){return!!this.nodes},hasVisualizations:function(){return this.visualizationSection.elems.length>0}},created:function(){this.getVisualizations()},methods:{getSteps:function(){var e=[];return this.nodes&&Object.values(this.nodes).forEach((function(t){t.label&&e.push(t.label)})),e},getOutputs:function(){var e=[];return this.nodes&&Object.values(this.nodes).forEach((function(t){t.outputs.forEach((function(t){t.activeLabel&&e.push(t.activeLabel)}))})),e},getArgumentTitle:function(e){return e[0].toUpperCase()+e.substr(1).replace(/_([a-z])/g,(function(e){return" ".concat(e[1].toUpperCase())}))},onClick:function(e){switch(e.emitter){case"onHistoryDatasetId":this.onHistoryDatasetId(e.id);break;case"onHistoryId":this.onHistoryId(e.id);break;case"onHistoryCollectionId":this.onHistoryCollectionId(e.id);break;case"onJobId":this.onJobId(e.id);break;case"onWorkflowId":this.onWorkflowId(e.id);break;case"onInvocationId":this.onInvocationId(e.id);break;case"onVisualizationId":this.onVisualizationId(e.id);break;default:this.onNoParameter(e.id)}},onInsert:function(e){this.$emit("onInsert",e),this.selectedShow=!1},onCancel:function(){this.selectedShow=!1},onNoParameter:function(e){this.onInsert("".concat(e,"()"))},onVisualizationId:function(e){this.selectedArgumentName=e,this.selectedType="visualization_id",this.selectedPayload=this.visualizationIndex[e],this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryId:function(e){this.selectedArgumentName=e,this.selectedType="history_id",this.selectedShow=!0},onHistoryDatasetId:function(e){this.selectedArgumentName=e,this.selectedType="history_dataset_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryCollectionId:function(e){this.selectedArgumentName=e,this.selectedType="history_dataset_collection_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onWorkflowId:function(e){this.selectedArgumentName=e,this.selectedType="workflow_id",this.selectedShow=!0},onJobId:function(e){this.selectedArgumentName=e,this.selectedType="job_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},onInvocationId:function(e){this.selectedArgumentName=e,this.selectedType="invocation_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},onHelp:function(){Xn()},getVisualizations:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dn.a.get("".concat(Object(d.getAppRoot)(),"api/plugins?embeddable=True")).then((function(e){var n=e.data;t.visualizationSection.elems=n.map((function(e){return{id:e.name,name:e.html,description:e.description,logo:e.logo?"".concat(Object(d.getAppRoot)()).concat(e.logo):null,emitter:"onVisualizationId"}})),t.visualizationIndex={},n.forEach((function(e){t.visualizationIndex[e.name]=e}))})).catch((function(e){t.error="Failed to load Visualizations."}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Qn(r,i,a,o,s,"next",e)}function s(e){Qn(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},ti=Object(xn.a)(ei,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel"},[e._m(0),e._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[e.error?n("b-alert",{staticClass:"my-2 mx-3 px-2 py-1",attrs:{variant:"danger",show:""}},[e._v("\n                "+e._s(e.error)+"\n            ")]):e._e(),e._v(" "),e.isWorkflow?n("tool-section",{attrs:{category:e.historyInEditorSection,expanded:!0},on:{onClick:e.onClick}}):n("tool-section",{attrs:{category:e.historySection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),n("tool-section",{attrs:{category:e.jobSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),e.isWorkflow?n("tool-section",{attrs:{category:e.workflowInEditorSection,expanded:!0},on:{onClick:e.onClick}}):n("tool-section",{attrs:{category:e.workflowSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),n("tool-section",{attrs:{category:e.otherSection,expanded:!0},on:{onClick:e.onClick}}),e._v(" "),e.hasVisualizations?n("tool-section",{attrs:{category:e.visualizationSection,expanded:!0},on:{onClick:e.onClick}}):e._e()],1)]),e._v(" "),e.selectedShow?n("MarkdownDialog",{attrs:{"argument-type":e.selectedType,"argument-name":e.selectedArgumentName,"argument-payload":e.selectedPayload,labels:e.selectedLabels,"use-labels":e.isWorkflow},on:{onInsert:e.onInsert,onCancel:e.onCancel}}):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("div",{staticClass:"panel-header-text"},[this._v("Insert Objects")])])])}],!1,null,null,null).exports,ni=n(169);$t.default.use(Cn.a),Tn.c.add(jn.B);var ii={components:{MarkdownToolBox:ti,SidePanel:ni.a,FontAwesomeIcon:Mn.a},props:{markdownText:{type:String,default:null},markdownConfig:{type:Object,default:null},nodes:{type:Object,default:null},title:{type:String,default:null}},data:function(){return{content:this.markdownText}},watch:{markdownText:function(){var e=this.$refs["text-area"],t=e.selectionEnd;this.content=this.markdownText,$t.default.nextTick((function(){e.focus(),e.selectionEnd=t}))}},methods:{onInsert:function(e){e=e.replace(")(",", "),e="".concat("```","galaxy\n").concat(e,"\n").concat("```","\n");var t=this.$refs["text-area"];t.focus();var n=t.selectionStart,i=this.content.substr(0,n);i+="\r\n".concat(e.trim(),"\r\n"),i+=this.content.substr(n),this.$emit("onUpdate",i)},onUpdate:s.default.debounce((function(e){this.$emit("onUpdate",this.content)}),300),onHelp:function(){Xn()}}},ai=Object(xn.a)(ii,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SidePanel",{attrs:{id:"left",side:"left"},scopedSlots:e._u([{key:"panel",fn:function(){return[n("MarkdownToolBox",{attrs:{nodes:e.nodes},on:{onInsert:e.onInsert}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"workflow-markdown-editor",attrs:{id:"center"}},[n("div",{staticClass:"markdown-editor h-100"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[e._t("buttons"),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:"Help",variant:"link",role:"button"},on:{click:e.onHelp}},[n("font-awesome-icon",{attrs:{icon:"question"}})],1)],2),e._v(" "),n("div",{staticClass:"my-1"},[e._v("\n                        "+e._s(e.title)+"\n                    ")])])]),e._v(" "),n("div",{staticClass:"unified-panel-body d-flex"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"text-area",staticClass:"markdown-textarea",attrs:{id:"workflow-report-editor"},domProps:{value:e.content},on:{input:[function(t){t.target.composing||(e.content=t.target.value)},e.onUpdate]}})])])])],1)}),[],!1,null,null,null).exports,ri=n(272),oi=n(248);function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var di={name:"ToolBox",components:{ToolSection:Ln.a,ToolSearch:ri.a},data:function(){return{query:null,results:null}},props:{toolbox:{type:Array,required:!0},workflows:{type:Array,required:!0},dataManagers:{type:Array,required:!0},moduleSections:{type:Array,required:!0}},computed:{hasWorkflowSection:function(){return this.workflows.length>0},workflowSection:function(){return{name:h()("Workflows"),elems:this.workflows}},hasDataManagerSection:function(){return this.dataManagers.length>0},dataManagerSection:function(){return{name:h()("Data Managers"),elems:this.dataManagers}},sections:function(){return Object(oi.a)(this.toolsLayout,this.results)},toolsLayout:function(){return this.toolbox.map((function(e){return li(li({},e),{},{elems:e.elems&&e.elems.map((function(e){return e.disabled=!e.is_workflow_compatible,e}))})}))}},methods:{onQuery:function(e){this.query=e},onResults:function(e){this.results=e},onInsertTool:function(e,t){t.preventDefault(),this.$emit("onInsertTool",e.id,e.name)},onInsertModule:function(e,t){t.preventDefault(),this.$emit("onInsertModule",e.name,e.title)},onInsertWorkflow:function(e,t){t.preventDefault(),this.$emit("onInsertWorkflow",e.latest_id,e.name)},onInsertWorkflowSteps:function(e){this.$emit("onInsertWorkflowSteps",e.id,e.step_count)}}},ui=Object(xn.a)(di,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel"},[e._m(0),e._v(" "),n("div",{staticClass:"unified-panel-controls"},[n("tool-search",{attrs:{placeholder:"search tools"},on:{onQuery:e.onQuery,onResults:e.onResults}})],1),e._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[e._l(e.moduleSections,(function(t){return n("tool-section",{key:t.name,attrs:{"hide-name":!0,category:t,"tool-key":"name","section-name":t.name,"query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertModule}})})),e._v(" "),e.hasDataManagerSection?n("tool-section",{key:e.dataManagerSection.id,attrs:{category:e.dataManagerSection,"query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertTool}}):e._e(),e._v(" "),e._l(e.sections,(function(t){return n("tool-section",{key:t.id,attrs:{category:t,"query-filter":e.query},on:{onClick:e.onInsertTool}})})),e._v(" "),e.hasWorkflowSection?n("tool-section",{key:e.workflowSection.name,attrs:{category:e.workflowSection,"section-name":"workflows","operation-icon":"fa fa-files-o","operation-title":"Insert individual steps.","query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertWorkflow,onOperation:e.onInsertWorkflowSteps}}):e._e()],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("div",{staticClass:"panel-header-text"},[this._v("Tools")])])])}],!1,null,null,null).exports;$t.default.use(Cn.a),Tn.c.add(jn.x),Tn.c.add(jn.D),Tn.c.add(jn.z),Tn.c.add(jn.h),Tn.c.add(jn.m);var hi={components:{FontAwesomeIcon:Mn.a},props:{okay:{type:Boolean,default:!0},attributeLink:{type:String,default:"Edit Workflow Attributes"},successMessage:{type:String,required:!0},warningMessage:{type:String,required:!0},warningItems:{type:Array,default:null}},computed:{isOkay:function(){return this.okay&&!this.hasWarningItems},hasWarningItems:function(){return this.warningItems&&this.warningItems.length>0}},methods:{onMouseOver:function(e){this.$emit("onMouseOver",e)},onMouseLeave:function(e){this.$emit("onMouseLeave",e)},onClick:function(e,t){this.$emit("onClick",e,t)}}},fi=Object(xn.a)(hi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-2"},[e.isOkay?n("div",[n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check"}}),e._v(" "),n("span",[e._v(e._s(e.successMessage))])],1):n("div",[n("font-awesome-icon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),e._v(" "),n("span",[e._v(e._s(e._f("localize")(e.warningMessage)))]),e._v(" "),e.hasWarningItems?n("div",{staticClass:"mt-2"},e._l(e.warningItems,(function(t,i){return n("div",{key:i,staticClass:"ml-2",on:{mouseover:function(n){return e.onMouseOver(t)},mouseleave:function(n){return e.onMouseLeave(t)}}},[n("a",{staticClass:"scrolls",attrs:{href:"#"},on:{click:function(n){return e.onClick(t)}}},[t.autofix?n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"magic"}}):n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"search"}}),e._v("\n                    "+e._s(t.stepLabel)+": "+e._s(t.warningLabel)+"\n                ")],1)])})),0):n("p",{staticClass:"mt-2 ml-2"},[n("a",{attrs:{href:"#"},on:{click:e.onClick}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"pencil-alt"}}),e._v(e._s(e.attributeLink)+"\n            ")],1)])],1)])}),[],!1,null,null,null).exports;function pi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||_i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(e,t){if(e){if("string"==typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gi(e,t):void 0}}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function vi(e){var t=[];return Object.values(e).forEach((function(e){Object.entries(e.inputTerminals).forEach((function(n){var i=mi(n,2),a=i[0],r=i[1];if(!(r.connectors&&r.connectors.length>0||r.optional)){var o=r.attributes.input.label;t.push({stepId:e.id,stepLabel:e.title,warningLabel:o,inputName:a,autofix:!r.multiple})}}))})),t}function yi(e){var t=[];return Object.values(e).forEach((function(e){if(!e.isInput){var n,i=pi(e.activeOutputs.getAll());try{for(i.s();!(n=i.n()).done;){var a=n.value;a.label||t.push({stepId:e.id,stepLabel:e.title,warningLabel:a.output_name,autofix:!0})}}catch(e){i.e(e)}finally{i.f()}}})),t}function bi(e){var t=[];return e&&e.parameters.forEach((function(e){t.push({stepId:e.references[0].nodeId,stepLabel:e.references[0].toolInput.label,warningLabel:e.name,name:e.name,autofix:e.canExtract()})})),t}function wi(e){return{action_type:"extract_untyped_parameter",name:e.name}}function ki(e){return{action_type:"extract_input",input:{order_index:parseInt(e.stepId),input_name:e.inputName}}}$t.default.use(Cn.a),Tn.c.add(jn.m),Tn.c.add(jn.x);var xi={components:{FontAwesomeIcon:Mn.a,LintSection:fi},props:{untypedParameters:{type:ln},nodes:{type:Object,required:!0},annotation:{type:String,default:null},license:{type:String,default:null},creator:{default:null}},data:function(){return{forceRefresh:0}},methods:{refresh:function(){this.forceRefresh+=1},onAttributes:function(){this.$emit("onAttributes")},onFixUntypedParameter:function(e){confirm("This issue can be fixed automatically by creating an explicit parameter input step. Do you want to proceed?")?this.$emit("onRefactor",[wi(e)]):this.$emit("onScrollTo",e.stepId)},onFixDisconnectedInput:function(e){confirm("This issue can be fixed automatically by creating an explicit data input step. Do you want to proceed?")?this.$emit("onRefactor",[ki(e)]):this.$emit("onScrollTo",e.stepId)},onFixUnlabeledOutputs:function(e){confirm("This issue can be fixed automatically by removing all unlabeled workflow output. Do you want to proceed?")?this.$emit("onRefactor",[{action_type:"remove_unlabeled_workflow_outputs"}]):this.$emit("onScrollTo",e.stepId)},onScrollTo:function(e){this.$emit("onScrollTo",e.stepId)},onHighlight:function(e){this.$emit("onHighlight",e.stepId)},onUnhighlight:function(e){this.$emit("onUnhighlight",e.stepId)},onRefactor:function(){var e=function(e,t){var n,i=[],a=pi(bi(t));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.autofix&&i.push(wi(r))}}catch(e){a.e(e)}finally{a.f()}var o,s=pi(vi(e));try{for(s.s();!(o=s.n()).done;){var l=o.value;l.autofix&&i.push(ki(l))}}catch(e){s.e(e)}finally{s.f()}return yi(e).length>0&&i.push({action_type:"remove_unlabeled_workflow_outputs"}),i}(this.nodes,this.untypedParameters);this.$emit("onRefactor",e)}},computed:{hasActiveOutputs:function(){this.forceRefresh;for(var e=0,t=Object.values(this.nodes);e<t.length;e++){if(t[e].activeOutputs.getAll().length>0)return!0}return!1},showRefactor:function(){return!this.checkUntypedParameters||!this.checkDisconnectedInputs||!this.checkUnlabeledOutputs},checkAnnotation:function(){return!!this.annotation},checkLicense:function(){return!!this.license},checkCreator:function(){return this.creator instanceof Array?this.creator.length>0:!!this.creator},checkUntypedParameters:function(){return 0==this.warningUntypedParameters.length},checkDisconnectedInputs:function(){return 0==this.warningDisconnectedInputs.length},checkUnlabeledOutputs:function(){return 0==this.warningUnlabeledOutputs.length},warningUntypedParameters:function(){return bi(this.untypedParameters)},warningDisconnectedInputs:function(){return this.forceRefresh,vi(this.nodes)},warningMissingMetadata:function(){return this.forceRefresh,e=this.nodes,t=[],Object.values(e).forEach((function(e){if(e.isInput){var n=!e.annotation,i=!e.label,a=null;i&&n?a="Missing a label and annotation":i?a="Missing a label":n&&(a="Missing an annotation"),a&&t.push({stepId:e.id,stepLabel:e.title,warningLabel:a})}})),t;var e,t},warningUnlabeledOutputs:function(){return this.forceRefresh,yi(this.nodes)}}},Si=Object(xn.a)(xi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"header-tag":"header","body-class":"p-0"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"mb-1 font-weight-bold"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"magic"}}),e._v("\n            Best Practices Review\n        ")],1),e._v(" "),e.showRefactor?n("div",[n("a",{attrs:{href:"#"},on:{click:e.onRefactor}},[e._v(" Try to automatically fix issues. ")])]):e._e()]},proxy:!0}])},[e._v(" "),n("b-card-body",[n("LintSection",{attrs:{okay:e.checkAnnotation,"success-message":"This workflow is annotated. Ideally, this helps the executors of the workflow\n                understand the purpose and usage of the workflow.","warning-message":"This workflow is not annotated. Providing an annotation helps workflow executors\n                understand the purpose and usage of the workflow.","attribute-link":"Annotate your Workflow."},on:{onClick:e.onAttributes}}),e._v(" "),n("LintSection",{attrs:{okay:e.checkCreator,"success-message":"This workflow defines creator information.","warning-message":"This workflow does not specify creator(s). This is important metadata for workflows\n                that will be published and/or shared to help workflow executors know how to cite the\n                workflow authors.","attribute-link":"Provide Creator Details."},on:{onClick:e.onAttributes}}),e._v(" "),n("LintSection",{attrs:{okay:e.checkLicense,"success-message":"This workflow defines a license.","warning-message":"This workflow does not specify a license. This is important metadata for workflows\n                that will be published and/or shared to help workflow executors understand how it\n                may be used.","attribute-link":"Specify a License."},on:{onClick:e.onAttributes}}),e._v(" "),n("LintSection",{attrs:{"success-message":"Workflow parameters are using formal input parameters.","warning-message":"This workflow uses legacy workflow parameters. They should be replaced with\n            formal workflow inputs. Formal input parameters make tracking workflow provenance, usage within subworkflows,\n            and executing the workflow via the API more robust:","warning-items":e.warningUntypedParameters},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixUntypedParameter}}),e._v(" "),n("LintSection",{attrs:{"success-message":"All non-optional inputs to workflow steps are connected to formal input parameters.","warning-message":"Some non-optional inputs are not connected to formal workflow inputs. Formal input parameters\n            make tracking workflow provenance, usage within subworkflows, and executing the workflow via the API more robust:","warning-items":e.warningDisconnectedInputs},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixDisconnectedInput}}),e._v(" "),n("LintSection",{attrs:{"success-message":"All workflow inputs have labels and annotations.","warning-message":"Some workflow inputs are missing labels and/or annotations:","warning-items":e.warningMissingMetadata},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onScrollTo}}),e._v(" "),n("LintSection",{attrs:{"success-message":"This workflow has outputs and they all have valid labels.","warning-message":"The following workflow outputs have no labels, they should be assigned a useful label or\n                unchecked in the workflow editor to mark them as no longer being a workflow output:","warning-items":e.warningUnlabeledOutputs},on:{onMouseOver:e.onHighlight,onMouseLeave:e.onUnhighlight,onClick:e.onFixUnlabeledOutputs}}),e._v(" "),e.hasActiveOutputs?e._e():n("div",[n("font-awesome-icon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),e._v(" "),n("span",[e._v("This workflow has no labeled outputs, please select and label at least one output.")])],1)],1)],1)}),[],!1,null,null,null).exports,Ci=n(491),Mi={components:{BModal:Ci.a},props:{stateMessages:{type:Array,requierd:!0},title:{type:String,default:"Issues loading this workflow"},message:{type:String,default:"Please review the following issues, possibly resulting from tool upgrades or changes."}},data:function(){return{show:this.stateMessages.length>0}},methods:{humanIndex:function(e){return"".concat(parseInt(e.stepIndex,10)+1)},nodeTitle:function(e){return e.label?e.label:e.name},iconClass:function(e){var t="";return e.iconType&&(t="icon fa fa-fw ".concat(e.iconType)),t}},watch:{stateMessages:function(){this.stateMessages.length>0&&(this.show=!0)}}},Ti=(n(561),Object(xn.a)(Mi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:e.title,scrollable:"","ok-only":"","ok-title":"Continue"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"state-upgrade-modal"},[e._v("\n        "+e._s(e.message)+"\n        "),n("ul",{staticClass:"workflow-state-upgrade-step-summaries"},e._l(e.stateMessages,(function(t,i){return n("li",{key:i},[n("b",[n("i",{class:e.iconClass(t)}),e._v("\n                    Step "+e._s(e.humanIndex(t))+": "+e._s(e.nodeTitle(t))+"\n                ")]),e._v(" "),n("ul",{staticClass:"workflow-state-upgrade-step-details"},e._l(t.details,(function(t,i){return n("li",{key:i},[e._v("\n                        - "),n("span",{domProps:{innerHTML:e._s(t)}})])})),0)])})),0)])])}),[],!1,null,null,null).exports);function ji(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Di={components:{BModal:Ci.a},props:{refactorActions:{type:Array,required:!0},workflowId:{type:String,required:!0},title:{type:String,default:"Issues reworking this workflow"},message:{type:String,default:"Please review the following potential issues..."}},data:function(){return{show:this.refactorActions.length>0,confirmActionExecutions:[]}},watch:{refactorActions:function(){this.refactorActions.length>0&&this.dryRun()},show:function(){this.show&&this.$emit("onShow")}},methods:{dryRun:function(){this.$emit("onWorkflowMessage","Pre-checking requested workflow changes (dry run)...","progress"),Object(zt.e)(this.workflowId,this.refactorActions,!0).then(this.onDryRunResponse).catch(this.onError)},onError:function(e){this.$emit("onWorkflowError","Reworking workflow failed...",e)},onDryRunResponse:function(e){var t,n=!1,i=ji(e.action_executions);try{for(i.s();!(t=i.n()).done;){t.value.messages.length>0&&(n=!0)}}catch(e){i.e(e)}finally{i.f()}n?(this.show=!0,this.confirmActionExecutions=e.action_executions):this.executeRefactoring()},executeRefactoring:function(){var e=this;this.show=!1,this.$emit("onWorkflowMessage","Applying requested workflow changes...","progress"),Object(zt.e)(this.workflowId,this.refactorActions).then((function(t){e.$emit("onRefactor",t)})).catch(this.onError)}}},Li=Object(xn.a)(Di,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:e.title,scrollable:"","ok-title":"Save"},on:{ok:e.executeRefactoring},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"workflow-refactor-modal"},[e._v("\n        "+e._s(e.message)+"\n        "),n("ul",e._l(e.confirmActionExecutions,(function(t,i){return n("li",{key:i},[n("ul",e._l(t.messages,(function(t,i){return n("li",{key:i},[e._v("\n                        - "+e._s(t.message)+"\n                    ")])})),0)])})),0)])])}),[],!1,null,null,null).exports,Ei={props:{title:{type:String,required:!1},message:{type:String,required:!1},error:{type:Boolean,required:!1}},data:function(){return{show:!!this.title}},computed:{},methods:{onHidden:function(){this.$emit("onHidden")},onOk:function(){}},watch:{message:function(){this.show=!!this.title}}},Ai=Object(xn.a)(Ei,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:e.title,scrollable:"","hide-header-close":!0,"no-close-on-esc":!e.error,"no-close-on-backdrop":!e.error,"hide-footer":!e.error,"ok-only":""},on:{ok:e.onOk,hidden:e.onHidden},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"workflow-message-modal"},["progress"==e.message?n("div",[n("div",{staticClass:"progress progress-striped active"},[n("div",{staticClass:"progress-bar",staticStyle:{width:"100%"}})])]):n("div",[e._v("\n            "+e._s(e.message)+"\n        ")])])])}),[],!1,null,null,null).exports,Ii=n(9),Pi=n.n(Ii),Yi=n(160),Ri=n(241),Hi=n(29),Ni=n(207);function $i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Tn.c.add(jn.C),Tn.c.add(jn.I),Tn.c.add(jn.l),$t.default.use(Cn.a);var Wi={components:{License:Ni.a,LoadingSpan:Hi.a,FontAwesomeIcon:Mn.a},props:{inputLicense:{type:String}},data:function(){return{license:this.inputLicense||null,licensesLoading:!1,licenses:[],editLicense:!1}},mounted:function(){var e=this,t="".concat(Object(d.getAppRoot)(),"api/licenses");Dn.a.get(t).then((function(e){return e.data})).then((function(t){e.licenses=t,e.licensesLoading=!1})).catch((function(e){console.error(e)}))},computed:{currentLicenseInfo:function(){var e,t=$i(this.licenses);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.licenseId==this.license)return n}}catch(e){t.e(e)}finally{t.f()}return null},licenseOptions:function(){var e=[];e.push({value:null,text:"*Do not specify a license.*"});var t,n=$i(this.licenses);try{for(n.s();!(t=n.n()).done;){var i=t.value;(i.licenseId==this.license||i.recommended)&&e.push({value:i.licenseId,text:i.name})}}catch(e){n.e(e)}finally{n.f()}return e}},watch:{inputLicense:function(){this.license=this.inputLicense}},methods:{onSave:function(){this.onLicense(this.license),this.disableEdit()},disableEdit:function(){this.editLicense=!1},onLicense:function(e){this.$emit("onLicense",e)}}},zi=Object(xn.a)(Wi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.editLicense?n("div",[e.licensesLoading?n("loading-span",{attrs:{message:"Loading licenses..."}}):n("b-form-select",{attrs:{options:e.licenseOptions},model:{value:e.license,callback:function(t){e.license=t},expression:"license"}}),e._v(" "),e.currentLicenseInfo?n("License",{attrs:{"license-id":e.license,"input-license-info":e.currentLicenseInfo},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Save License",icon:"save"},on:{click:e.onSave}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Cancel Edit",icon:"times"},on:{click:e.disableEdit}})]},proxy:!0}],null,!1,2057188055)}):n("div",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onSave(t)}}},[e._v("Save without license")]),e._v(" or\n        "),n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editLicense=!1}}},[e._v("cancel edit.")])])],1):e.license?n("div",[n("License",{attrs:{"license-id":e.license},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit License",icon:"edit"},on:{click:function(t){e.editLicense=!0}}})]},proxy:!0}])})],1):n("div",[n("i",[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editLicense=!0}}},[e._v("Specify a license for this workflow.")])])])}),[],!1,null,null,null).exports;function Ui(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bi={computed:{addAttributes:function(){var e,t=[{value:null,text:"Add attribute"}],n=Ui(this.attributeInfo);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.show[i.key]||t.push({value:i.key,text:"- "+i.placeholder})}}catch(e){n.e(e)}finally{n.f()}return t},displayedAttributes:function(){var e=this;return this.attributeInfo.filter((function(t){return e.show[t.key]}))}},watch:{addAttribute:function(){var e=this;this.addAttribute&&(this.show[this.addAttribute]=!0),this.$nextTick((function(){e.addAttribute=null}))}},methods:{onReset:function(e){e.preventDefault(),this.$emit("onReset")},onHide:function(e){this.show[e]=!1},onSave:function(e){e.preventDefault();var t={};t.class=this.schemaOrgClass;var n,i=Ui(this.attributeInfo);try{for(i.s();!(n=i.n()).done;){var a=n.value.key;if(this.show[a]){var r=this.currentValues[a];"email"==a&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),t[a]=r}}}catch(e){i.e(e)}finally{i.f()}this.$emit("onSave",t)}}};function qi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ji=[{key:"name",label:"Name",placeholder:"name"},{key:"givenName",label:"Given Name",placeholder:"given name"},{key:"familyName",label:"Family Name",placeholder:"family name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier (typically an orcid.org ID)",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"},{key:"honorificPrefix",label:"Honorific Prefix (e.g. Dr/Mrs/Mr)",placeholder:"honorific prefix"},{key:"honorificSuffix",label:"Honorific Suffix (e.g. M.D.)",placeholder:"honorific suffix"},{key:"jobTitle",label:"Job Title",placeholder:"job title"}],Ki=Ji.map((function(e){return e.key}));Tn.c.add(jn.q,jn.w);var Xi={mixins:[Bi],components:{FontAwesomeIcon:Mn.a},props:{person:{type:Object}},data:function(){var e,t={},n={},i=qi(Ki);try{for(i.s();!(e=i.n()).done;){var a=e.value,r=a in this.person;if(r){var o=this.person[a];"email"==a&&0==o.indexOf("mailto:")&&(o=o.slice("mailto:".length)),t[a]=o}n[a]=r}}catch(e){i.e(e)}finally{i.f()}return{attributeInfo:Ji,show:n,currentValues:t,addAttribute:null,schemaOrgClass:"Person"}}},Qi=Object(xn.a)(Xi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:e.onSave,reset:e.onReset}},[e._l(e.displayedAttributes,(function(t){return n("div",{key:t.key,staticClass:"form-group",attrs:{role:"group"}},[n("label",{attrs:{for:t.key}},[e._v(e._s(t.label))]),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute",icon:"eye-slash"},on:{click:function(n){return e.onHide(t.key)}}}),e._v(" "),n("b-form-input",{attrs:{id:t.key,placeholder:"Enter "+t.placeholder+".",type:t.type},model:{value:e.currentValues[t.key],callback:function(n){e.$set(e.currentValues,t.key,n)},expression:"currentValues[attribute.key]"}})],1)})),e._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("b-form-select",{attrs:{options:e.addAttributes,size:"sm"},model:{value:e.addAttribute,callback:function(t){e.addAttribute=t},expression:"addAttribute"}})],1),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),e._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Cancel")])],2)}),[],!1,null,null,null).exports,Zi=n(203);function ea(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var na=[{key:"name",label:"Name",placeholder:"name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"}],ia=na.map((function(e){return e.key}));Tn.c.add(jn.q,jn.w);var aa={mixins:[Bi],components:{FontAwesomeIcon:Mn.a},props:{organization:{type:Object}},data:function(){var e,t={},n={},i=ea(ia);try{for(i.s();!(e=i.n()).done;){var a=e.value,r=a in this.organization;if(r){var o=this.organization[a];"email"==a&&0==o.indexOf("mailto:")&&(o=o.slice("mailto:".length)),t[a]=o}n[a]=r}}catch(e){i.e(e)}finally{i.f()}return{attributeInfo:na,show:n,currentValues:t,addAttribute:null,schemaOrgClass:"Organization"}}},ra=Object(xn.a)(aa,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:e.onSave,reset:e.onReset}},[e._l(e.displayedAttributes,(function(t){return n("div",{key:t.key,staticClass:"form-group",attrs:{role:"group"}},[n("label",{attrs:{for:t.key}},[e._v(e._s(t.label))]),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute",icon:"eye-slash"},on:{click:function(n){return e.onHide(t.key)}}}),e._v(" "),n("b-form-input",{attrs:{id:t.key,placeholder:"Enter "+t.placeholder+".",type:t.type},model:{value:e.currentValues[t.key],callback:function(n){e.$set(e.currentValues,t.key,n)},expression:"currentValues[attribute.key]"}})],1)})),e._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("b-form-select",{attrs:{options:e.addAttributes,size:"sm"},model:{value:e.addAttribute,callback:function(t){e.addAttribute=t},expression:"addAttribute"}})],1),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),e._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Cancel")])],2)}),[],!1,null,null,null).exports;function oa(e){return function(e){if(Array.isArray(e))return sa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Tn.c.add(jn.I),Tn.c.add(jn.l);var la={components:{FontAwesomeIcon:Mn.a,PersonForm:Qi,CreatorViewer:Zi.a,OrganizationForm:ra},props:{creators:{type:Array}},data:function(){return{creatorsCurrent:[],editIndex:null}},watch:{creators:function(){this.creatorsCurrent=this.creators}},methods:{onEdit:function(e){this.editIndex=e},onRemove:function(e){var t=oa(this.creatorsCurrent);t.splice(e,1),this.$emit("onCreators",t)},onSave:function(e){var t=this.editIndex,n=oa(this.creatorsCurrent);n[t]=e,this.$emit("onCreators",n),this.editIndex=null},onCancel:function(){var e=this.editIndex;this.creatorsCurrent[e].isNew&&this.creatorsCurrent.splice(e,1),this.editIndex=null},editNewPerson:function(){this.creatorsCurrent.push({class:"Person",isNew:!0,name:"",identifier:""}),this.editIndex=this.creatorsCurrent.length-1},editNewOrganization:function(){this.creatorsCurrent.push({class:"Organization",isNew:!0,name:""}),this.editIndex=this.creatorsCurrent.length-1}}},ca=Object(xn.a)(la,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"creators-editor"},[null!=e.editIndex&&"Person"==e.creatorsCurrent[e.editIndex].class?n("div",[n("PersonForm",{attrs:{person:e.creatorsCurrent[e.editIndex]},on:{onSave:e.onSave,onReset:e.onCancel}})],1):null!=e.editIndex&&"Organization"==e.creatorsCurrent[e.editIndex].class?n("div",[n("OrganizationForm",{attrs:{organization:e.creatorsCurrent[e.editIndex]},on:{onSave:e.onSave,onReset:e.onCancel}})],1):e.creatorsCurrent?n("div",e._l(e.creatorsCurrent,(function(t,i){return n("div",{key:i},[n("CreatorViewer",{attrs:{creator:t},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit Creator",icon:"edit"},on:{click:function(t){return e.onEdit(i)}}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Remove Creator",icon:"times"},on:{click:function(t){return e.onRemove(i)}}})]},proxy:!0}],null,!0)})],1)})),0):e._e(),e._v(" "),n("div",[n("i",[e._v("\n            Add a new creator - either\n            "),n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.editNewPerson()}}},[e._v("a person")]),e._v("\n            or "),n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.editNewOrganization()}}},[e._v("an organization")]),e._v(".\n        ")])])])}),[],!1,null,null,null).exports;$t.default.use(Cn.a);var da={name:"Attributes",components:{Tags:Ri.a,LicenseSelector:zi,CreatorEditor:ca},props:{id:{type:String,required:!0},name:{type:String,default:null},tags:{type:Array,required:!0},annotation:{type:String},license:{type:String,default:""},creator:{default:null},version:{type:Number,default:null},versions:{type:Array,default:null},parameters:{type:ln,default:null}},data:function(){return{message:null,messageVariant:null,tagsCurrent:this.tags,versionCurrent:this.version,annotationCurrent:this.annotation,nameCurrent:this.name}},created:function(){this.services=new Yi.a},computed:{creatorAsList:function(){var e=this.creator;return e?e instanceof Array||(e=[e]):e=[],e},hasParameters:function(){return this.parameters&&this.parameters.parameters.length>0},versionOptions:function(){for(var e=[],t=0;t<this.versions.length;t++){var n=this.versions[t],i=Pi.a.utc(n.update_time).format("MMM Do YYYY"),a="".concat(n.version+1,": ").concat(i,", ").concat(n.steps," steps");e.push({version:t,label:a})}return e}},watch:{version:function(){this.versionCurrent=this.version},license:function(){this.licenseCurrent=this.license},creator:function(){var e=this.creator;e?e instanceof Array||(e=[e]):e=[],this.creatorCurrent=e},annotation:function(){this.annotationCurrent=this.annotation},name:function(){this.nameCurrent=this.name}},methods:{onTags:function(e){this.tagsCurrent=e,this.onAttributes({tags:e})},onVersion:function(){this.$emit("onVersion",this.versionCurrent)},onLicense:function(e){this.$emit("onLicense",e)},onCreator:function(e){this.$emit("onCreator",e)},onError:function(e){this.message=e,this.messageVariant="danger"},onAttributes:function(e){var t=this;this.services.updateWorkflow(this.id,e).catch((function(e){t.onError(e)}))}}},ua=Object(xn.a)(da,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"right-content p-2",attrs:{id:"edit-attributes",itemscope:"",itemtype:"http://schema.org/CreativeWork"}},[n("b-alert",{attrs:{variant:e.messageVariant,show:!!e.message}},[e._v("\n        "+e._s(e.message)+"\n    ")]),e._v(" "),n("div",{attrs:{id:"workflow-name-area"}},[n("b",[e._v("Name")]),e._v(" "),n("meta",{attrs:{itemprop:"name",content:e.name}}),e._v(" "),n("b-input",{attrs:{id:"workflow-name"},on:{keyup:function(t){return e.$emit("update:nameCurrent",e.nameCurrent)}},model:{value:e.nameCurrent,callback:function(t){e.nameCurrent=t},expression:"nameCurrent"}})],1),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-version-area"}},[n("b",[e._v("Version")]),e._v(" "),n("b-form-select",{on:{change:e.onVersion},model:{value:e.versionCurrent,callback:function(t){e.versionCurrent=t},expression:"versionCurrent"}},e._l(e.versionOptions,(function(t){return n("b-form-select-option",{key:t.version,attrs:{value:t.version}},[e._v("\n                "+e._s(t.label)+"\n            ")])})),1)],1),e._v(" "),e.hasParameters?n("div",{staticClass:"mt-2",attrs:{id:"workflow-parameters-area"}},[n("b",[e._v("Parameters")]),e._v(" "),n("b-list-group",e._l(e.parameters.parameters.entries(),(function(t){var i=t[0],a=t[1];return n("b-list-group-item",{key:i},[e._v(e._s(i+1)+": "+e._s(a.name)+"\n            ")])})),1)],1):e._e(),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-annotation-area"}},[n("b",[e._v("Annotation")]),e._v(" "),n("meta",{attrs:{itemprop:"description",content:e.annotationCurrent}}),e._v(" "),n("b-textarea",{attrs:{id:"workflow-annotation"},on:{keyup:function(t){return e.$emit("update:annotationCurrent",e.annotationCurrent)}},model:{value:e.annotationCurrent,callback:function(t){e.annotationCurrent=t},expression:"annotationCurrent"}}),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("These notes will be visible when this workflow is viewed.")])],1),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-license-area"}},[n("b",[e._v("License")]),e._v(" "),n("LicenseSelector",{attrs:{"input-license":e.license},on:{onLicense:e.onLicense}})],1),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-creator-area"}},[n("b",[e._v("Creator")]),e._v(" "),n("CreatorEditor",{attrs:{creators:e.creatorAsList},on:{onCreators:e.onCreator}})],1),e._v(" "),n("div",{staticClass:"mt-2"},[n("b",[e._v("Tags")]),e._v(" "),n("Tags",{attrs:{tags:e.tagsCurrent},on:{input:e.onTags}}),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("\n            Apply tags to make it easy to search for and find items with the same tag.\n        ")])],1)],1)}),[],!1,null,null,null).exports;$t.default.use(Cn.a);var ha={props:{zoomLevel:{type:Number,required:!0}},data:function(){return{zoomDefault:this.zoomLevel}},computed:{zoomPercentage:function(){return Math.floor(100*fn[this.zoomLevel])}},methods:{onZoomIn:function(){this.$emit("onZoom",this.zoomLevel+1)},onZoomOut:function(){this.$emit("onZoom",this.zoomLevel-1)},onZoomReset:function(){this.$emit("onZoom",this.zoomDefault)}}},fa=(n(562),Object(xn.a)(ha,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"zoom-control float-right btn-group-horizontal"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-minus",attrs:{role:"button",title:"Zoom Out",size:"sm","aria-label":"Zoom Out"},on:{click:this.onZoomOut}}),this._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"zoom-reset",attrs:{role:"button",variant:"light",title:"Reset Zoom Level",size:"sm","aria-label":"Reset Zoom Level"},on:{click:this.onZoomReset}},[this._v("\n        "+this._s(this.zoomPercentage)+"%\n    ")]),this._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-plus",attrs:{role:"button",title:"Zoom In",size:"sm","aria-label":"Zoom In"},on:{click:this.onZoomIn}})],1)}),[],!1,null,"2e2762b2",null).exports),pa=n(116);function ma(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var va={components:{LoadingSpan:Hi.a},props:{getNode:{type:Function,required:!0},getManager:{type:Function,required:!0},datatypesMapper:{type:Object,required:!0}},data:function(){return{compatibleTools:[],isDeprecated:!1,popoverHeaderText:h()("Tool recommendations"),noRecommendationsMessage:h()("No tool recommendations"),deprecatedMessage:"",showLoading:!0}},created:function(){this.loadRecommendations()},methods:{getToolId:function(e){if(null!=e&&e.indexOf("/")>-1){var t=e.split("/");e=t[t.length-2]}return e},getWorkflowPath:function(e,t){var n={},i={};for(var a in e.steps){var r=e.steps[a],o=r.input_connections;for(var s in i[r.id]=this.getToolId(r.content_id),o){var l=o[s];if(null!=l){var c,d=[],u=ma(l);try{for(u.s();!(c=u.n()).done;){var h=c.value;d.push(h.id.toString())}}catch(e){u.e(e)}finally{u.f()}n[r.id.toString()]=d}}}var f=[],p=[];f.push(t);var m,_=ma(f=function e(t,i){for(var a in n)if(parseInt(a)===parseInt(t)){var r=parseInt(n[a][0]);null!=r&&(i.push(r),void 0!==n[r]&&null!==n[r]&&e(r,i))}return i}(t,f));try{for(_.s();!(m=_.n()).done;){var g=i[m.value.toString()];null!=g&&p.push(g)}}catch(e){_.e(e)}finally{_.f()}return p.join(",")},loadRecommendations:function(){var e=this,t=this.getNode(),n=this.getManager(),i=Object(Wt.b)(n),a={tool_sequence:this.getWorkflowPath(i,t.id)};Object(zt.b)(a).then((function(t){var n=t.predicted_data,i=n.o_extensions,a=n.children;e.isDeprecated=n.is_deprecated,e.deprecatedMessage=n.message,a.length>0&&(e.compatibleTools=Object(cn.b)(a,i,e.datatypesMapper)),e.showLoading=!1}))}}},ya=Object(xn.a)(va,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workflow-recommendations"},[n("div",{staticClass:"header-background"},[n("h4",[e._v(e._s(e.popoverHeaderText))])]),e._v(" "),e.showLoading?n("LoadingSpan",{attrs:{message:"Loading recommendations"}}):e._e(),e._v(" "),e.compatibleTools.length>0&&!e.isDeprecated?n("div",e._l(e.compatibleTools,(function(t){return n("div",{key:t.id},[n("i",{staticClass:"fa mr-1 fa-wrench"}),e._v(" "),n("a",{attrs:{href:"#",title:"Open tool",id:t.id},on:{click:function(n){return e.$emit("onCreate",t.id,t.name,n)}}},[e._v(e._s(t.name))])])})),0):e.isDeprecated?n("div",[e._v(e._s(e.deprecatedMessage))]):e._e(),e._v(" "),0!==e.compatibleTools.length||e.showLoading?e._e():n("div",[e._v(e._s(e.noRecommendationsMessage))])],1)}),[],!1,null,null,null).exports,ba=n(500),wa=n.n(ba);function ka(e,t,n){return(ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ja(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ja(e);if(t){var a=ja(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Ta(this,n)}}function Ta(e,t){return!t||"object"!==xa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Da(e,t,n){return t&&Oa(e.prototype,t),n&&Oa(e,n),e}function La(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ea={isCollection:!1,canMatch:function(){return!1},canMapOver:function(){return!1},toString:function(){return"NullCollectionType[]"},append:function(e){return e},equal:function(e){return e===this}},Aa={isCollection:!0,canMatch:function(e){return Ea!==e},canMapOver:function(){return!1},toString:function(){return"AnyCollectionType[]"},append:function(){return Aa},equal:function(e){return e===this}},Ia=function e(t,n){La(this,e),this.canAccept=t,this.reason=n},Pa=function(){function e(t){La(this,e),this.collectionType=t,this.isCollection=!0,this.rank=t.split(":").length}return Da(e,[{key:"append",value:function(t){return t===Ea?this:t===Aa?t:new e("".concat(this.collectionType,":").concat(t.collectionType))}},{key:"canMatch",value:function(e){return e!==Ea&&(e===Aa||e.collectionType==this.collectionType)}},{key:"canMapOver",value:function(e){if(e===Ea)return!1;if(e===Aa)return!1;if(this.rank<=e.rank)return!1;var t=e.collectionType;return this._endsWith(this.collectionType,t)}},{key:"effectiveMapOver",value:function(t){var n=t.collectionType;return new e(this.collectionType.substring(0,this.collectionType.length-n.length-1))}},{key:"equal",value:function(e){return e.collectionType==this.collectionType}},{key:"toString",value:function(){return"CollectionType[".concat(this.collectionType,"]")}},{key:"_endsWith",value:function(e,t){return-1!==e.indexOf(t,e.length-t.length)}}]),e}(),Ya=function(e){Sa(n,e);var t=Ma(n);function n(e){var i;return La(this,n),(i=t.call(this)).name=e.name,i.node=e.node,i.element=e.element,i.mapOver=e.mapOver||Ea,i.attributes=e,i.connectors=[],i}return Da(n,[{key:"connect",value:function(e){this.connectors.push(e),this.emit("change")}},{key:"disconnect",value:function(e){var t=this.connectors.findIndex((function(t){return t===e}));this.connectors.splice(t,1),this.resetMappingIfNeeded(),e.dragging||e.inputHandle.resetCollectionTypeSource(),this.emit("change")}},{key:"redraw",value:function(){this.connectors.forEach((function(e){e.redraw()}))}},{key:"destroy",value:function(){this.connectors.slice().forEach((function(e){e.destroy()})),this.emit("change")}},{key:"destroyInvalidConnections",value:function(){this.connectors.forEach((function(e){e&&e.destroyIfInvalid()})),this.emit("change")}},{key:"setMapOver",value:function(e){var t=e;if(this.multiple){var n=new Pa("list");if(e.collectionType===n.collectionType)return;t=e.effectiveMapOver?e.effectiveMapOver(n):e}this.mapOver.equal(e)||(this.mapOver=e,this.node.mapOver=t,Object.values(this.node.outputTerminals).forEach((function(e){e.setMapOver(t)}))),this.emit("change")}},{key:"isMappedOver",value:function(){return this.mapOver.isCollection}},{key:"resetMapping",value:function(){this.mapOver=Ea,this.emit("change")}},{key:"resetCollectionTypeSource",value:function(){var e=this.node;Object.values(e.outputTerminals).forEach((function(e){e.attributes.collection_type_source&&e.attributes.collection_type&&(e.attributes.collection_type=null,e.update(e.attributes))}))}},{key:"hasConnectedMappedInputTerminals",value:function(){var e=this.node.inputTerminals;for(var t in e){var n=e[t];if(n.connectors.length>0&&n.isMappedOver())return!0}return!1}},{key:"hasConnectedOutputTerminals",value:function(){var e=this.node.outputTerminals;for(var t in e)if(e[t].connectors.length>0)return!0;return!1}},{key:"hasMappedOverInputTerminals",value:function(){var e=this.node.inputTerminals;for(var t in e){if(e[t].mapOver.isCollection)return!0}return!1}},{key:"resetMappingIfNeeded",value:function(){}}]),n}(wa.a),Ra=function(e){Sa(n,e);var t=Ma(n);function n(e){var i;return La(this,n),(i=t.call(this,e)).datatypesMapper=e.datatypesMapper,i.update(e.input),i}return Da(n,[{key:"canAccept",value:function(e){return this._inputFilled()?new Ia(!1,"Input already filled with another connection, delete it before connecting another output."):this.attachable(e)}},{key:"resetMappingIfNeeded",value:function(){this.mapOver.isCollection&&((this.hasConnectedMappedInputTerminals()||!this.hasConnectedOutputTerminals())&&this.resetMapping())}},{key:"resetMapping",value:function(){ka(ja(n.prototype),"resetMapping",this).call(this),this.hasMappedOverInputTerminals()||Object.values(this.node.outputTerminals).forEach((function(e){e.resetMapping()}))}},{key:"connected",value:function(){return 0!==this.connectors.length}},{key:"_inputFilled",value:function(){return!!this.connected()&&(!this.multiple||!!this._collectionAttached())}},{key:"_collectionAttached",value:function(){if(this.connected()){var e=this.connectors[0].outputHandle;return!!e&&!!(e.isCollection||e.isMappedOver()||e.datatypes.indexOf("input")>0)}return!1}},{key:"_mappingConstraints",value:function(){var e=this.node;if(!e)return[];var t=this.mapOver;if(t.isCollection)return[t];var n=[];return this.hasConnectedOutputTerminals()?n.push(Object.values(e.outputTerminals)[0].mapOver):Object.values(e.inputTerminals).forEach((function(e){e.mapOver.isCollection&&e.connectors.length>0&&n.push(e.mapOver)})),n}},{key:"_producesAcceptableDatatype",value:function(e){for(var t in this.datatypes){var n=this.datatypes[t];if("input"==n)return new Ia(!0,null);var i=[],a=e.force_datatype?[e.force_datatype]:e.datatypes;for(var r in i=i.concat(a)){var o=i[r];if("input"==o||"_sniff_"==o||this._isSubType(i[r],n))return new Ia(!0,null)}}return new Ia(!1,"Effective output data type(s) [".concat(i,"] do not appear to match input type(s) [").concat(this.datatypes,"]."))}},{key:"_isSubType",value:function(e,t){return this.datatypesMapper.isSubType(e,t)}},{key:"_producesAcceptableDatatypeAndOptionalness",value:function(e){return this.optional||this.multiple||!e.optional?this._producesAcceptableDatatype(e):new Ia(!1,"Cannot connect an optional output to a non-optional input")}},{key:"_otherCollectionType",value:function(e){var t=Ea;e.isCollection&&(t=e.collectionType);var n=e.mapOver;return n.isCollection&&(t=n.append(t)),t}}]),n}(Ya),Ha=function(e){Sa(n,e);var t=Ma(n);function n(){return La(this,n),t.apply(this,arguments)}return Da(n,[{key:"update",value:function(e){this.datatypes=e.extensions,this.multiple=e.multiple,this.optional=e.optional,this.collection=!1}},{key:"connect",value:function(e){ka(ja(n.prototype),"connect",this).call(this,e);var t=e.outputHandle;if(t){var i=this._otherCollectionType(t);i.isCollection&&this.setMapOver(i)}}},{key:"attachable",value:function(e){var t=this._otherCollectionType(e),n=this.mapOver;if(t.isCollection){if(this.multiple){if(this.connected()&&!this._collectionAttached())return new Ia(!1,"Cannot attach collections to data parameters with individual data inputs already attached.");if(t.collectionType&&t.collectionType.endsWith("paired"))return new Ia(!1,"Cannot attach paired inputs to multiple data parameters, only lists may be treated this way.")}return n.isCollection&&n.canMatch(t)?this._producesAcceptableDatatypeAndOptionalness(e):this.multiple&&new Pa("list").canMatch(t)?this._producesAcceptableDatatypeAndOptionalness(e):this._mappingConstraints().every(t.canMatch.bind(t))?this._producesAcceptableDatatypeAndOptionalness(e):n.isCollection?this.hasConnectedMappedInputTerminals()?new Ia(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ia(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new Ia(!1,"Can't map over this input with output collection type - an output of this tool is not mapped over constraining this input. Disconnect output(s) and retry.")}return n.isCollection?new Ia(!1,"Cannot attach non-collection outputs to mapped over inputs, consider disconnecting inputs and outputs to reset this input's mapping."):this._producesAcceptableDatatypeAndOptionalness(e)}}]),n}(Ra),Na=function(e){Sa(n,e);var t=Ma(n);function n(){return La(this,n),t.apply(this,arguments)}return Da(n,[{key:"update",value:function(e){this.type=e.type,this.optional=e.optional}},{key:"effectiveType",value:function(e){return"select"==e?"text":e}},{key:"attachable",value:function(e){var t=this.effectiveType(this.type),n=this.effectiveType(e.attributes.type);return new Ia(t==n,"")}}]),n}(Ra),$a=function(e){Sa(n,e);var t=Ma(n);function n(){return La(this,n),t.apply(this,arguments)}return Da(n,[{key:"update",value:function(e){this.multiple=!1,this.collection=!0,this.collection_type=e.collection_type,this.datatypes=e.extensions,this.optional=e.optional;var t=[];e.collection_types?e.collection_types.forEach((function(e){t.push(new Pa(e))})):t.push(Aa),this.collectionTypes=t}},{key:"connect",value:function(e){ka(ja(n.prototype),"connect",this).call(this,e);var t=e.outputHandle;if(t){var i=this.node;Object.values(i.outputTerminals).forEach((function(n){n.attributes.collection_type_source&&!e.dragging&&(t.isMappedOver()?t.isCollection?n.attributes.collection_type=t.mapOver.append(t.collectionType).collectionType:n.attributes.collection_type=t.mapOver.collectionType:n.attributes.collection_type=t.attributes.collection_type,n.update(n.attributes))}))}var a=this._effectiveMapOver(t);this.setMapOver(a)}},{key:"_effectiveMapOver",value:function(e){var t=this.collectionTypes,n=this._otherCollectionType(e);if(!t.some((function(e){return e.canMatch(n)})))for(var i in t){var a=t[i];if(n.canMapOver(a)){var r=n.effectiveMapOver(a);if(r!=Ea)return r}}return Ea}},{key:"_effectiveCollectionTypes",value:function(){var e=this.mapOver;return this.collectionTypes.map((function(t){return e.append(t)}))}},{key:"attachable",value:function(e){var t=this._otherCollectionType(e);if(t.isCollection){var n=this._effectiveCollectionTypes(),i=this.mapOver;if(n.some((function(e){return e.canMatch(t)})))return this._producesAcceptableDatatypeAndOptionalness(e);if(i.isCollection)return this.hasConnectedMappedInputTerminals()?new Ia(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ia(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry.");if(this.collectionTypes.some((function(e){return t.canMapOver(e)}))){var a=this._effectiveMapOver(e);return a.isCollection?this._mappingConstraints().every((function(e){return a.canMatch(e)}))?this._producesAcceptableDatatypeAndOptionalness(e):this.hasConnectedMappedInputTerminals()?new Ia(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ia(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new Ia(!1,"Incompatible collection type(s) for attachment.")}return new Ia(!1,"Incompatible collection type(s) for attachment.")}return new Ia(!1,"Cannot attach a data output to a collection input.")}}]),n}(Ra),Fa=function(e){Sa(n,e);var t=Ma(n);function n(e){var i;return La(this,n),(i=t.call(this,e)).datatypes=e.datatypes,i.optional=e.optional,i}return Da(n,[{key:"update",value:function(e){this.datatypes=e.datatypes||e.extensions,this.optional=e.optional}},{key:"force_datatype",get:function(){var e=this.node.postJobActions["ChangeDatatypeAction"+this.name];return e?e.action_arguments.newtype:null}}]),n}(Ya),Wa=function(e){Sa(n,e);var t=Ma(n);function n(){return La(this,n),t.apply(this,arguments)}return Da(n,[{key:"resetMappingIfNeeded",value:function(){if(!this.hasConnectedOutputTerminals()&&!this.hasConnectedMappedInputTerminals()){var e=this.node;Object.values(e.inputTerminals).forEach((function(e){e.mapOver.isCollection&&e.resetMappingIfNeeded()}))}!this.hasMappedOverInputTerminals()&&this.resetMapping()}},{key:"resetMapping",value:function(){ka(ja(n.prototype),"resetMapping",this).call(this),this.connectors.forEach((function(e){var t=e.inputHandle;t&&(t.resetMappingIfNeeded(),e.destroyIfInvalid())}))}}]),n}(Fa),za=function(e){Sa(n,e);var t=Ma(n);function n(e){var i;(La(this,n),i=t.call(this,e),e.collection_type)?i.collectionType=new Pa(e.collection_type):(e.collection_type_source||console.log("Warning: No collection type or collection type source defined."),i.collectionType=Aa);return i.isCollection=!0,i}return Da(n,[{key:"update",value:function(e){var t;(ka(ja(n.prototype),"update",this).call(this,e),e.collection_type)?t=new Pa(e.collection_type):(e.collection_type_source||console.log("Warning: No collection type or collection type source defined."),t=Aa);var i=this.collectionType;this.collectionType=t;var a=this.connectors.slice(0);t.collectionType!=i.collectionType&&a.forEach((function(e){e.destroyIfInvalid(!0)}))}}]),n}(Fa),Ua={Terminal:Ya,InputTerminal:Ha,InputParameterTerminal:Na,OutputTerminal:Wa,OutputParameterTerminal:function(e){Sa(n,e);var t=Ma(n);function n(){return La(this,n),t.apply(this,arguments)}return Da(n,[{key:"update",value:function(e){this.attributes.type=e.type}}]),n}(Ya),InputCollectionTerminal:$a,OutputCollectionTerminal:za,CollectionTypeDescription:Pa,NULL_COLLECTION_TYPE_DESCRIPTION:Ea,ANY_COLLECTION_TYPE_DESCRIPTION:Aa},Va=n(82),Ba=n(72);function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ga(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ja(e){var t=e.e,n=e.manager,i=e.outputTerminal,r=e.outputEl,o=document.createElement("ul"),s=function(e,t){t.classList.add("active"),t.focus(),e.classList.remove("active")},l=function(e){e.stopPropagation();var t=e.currentTarget,a=t.previousSibling,l=t.nextSibling,c=t.getAttribute("node-key"),d=t.getAttribute("input-key"),u=n.nodes[c].inputTerminals[d],h=!1;switch(e.keyCode){case 40:s(t,l||t.parentNode.firstChild);break;case 38:s(t,a||t.parentNode.lastChild);break;case 32:o.remove(),r.removeAttribute("aria-owns"),r.setAttribute("aria-grabbed","false"),r.focus(),i.connectors.forEach((function(e){e.inputHandle===u&&(e.destroy(),h=!0,Object(Ba.a)("Connection destroyed"))})),h||(new Va.a(n.canvasManager,i,u).redraw(),Object(Ba.a)("Node connected"))}};32===t.keyCode&&(Object(Ba.a)("Node selected"),a()(o).focusout((function(e){o.contains(e.relatedTarget)||a()(o).hide()})),o.id="input-choices-menu",o.className="list-group",o.style.position="absolute",o.setAttribute("role","menu"),r.setAttribute("aria-grabbed","true"),r.setAttribute("aria-owns","input-choices-menu"),Object.entries(n.nodes).forEach((function(e){var t=qa(e,2),n=t[0],a=t[1];Object.entries(a.inputTerminals).forEach((function(e){var t=qa(e,2),a=t[0],r=t[1],s=r.canAccept(i),c=!1;if(i.connectors.forEach((function(e){e.inputHandle===r&&(c=!0)})),s.canAccept||c){var d=document.createElement("li");d.textContent="".concat(r.name," in ").concat(r.node.name," node"),d.tabIndex=-1,d.onkeydown=l,d.className="list-group-item",d.setAttribute("role","menuitem"),d.setAttribute("input-key",a),d.setAttribute("node-key",n),o.appendChild(d)}}))})),o.firstChild?(r.appendChild(o),o.firstChild.classList.add("active"),o.firstChild.focus()):Object(Ba.a)("There are no available inputs for this selected output"))}function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qa(e,t,n){return t&&Xa(e.prototype,t),n&&Xa(e,n),e}function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var tr=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ka(this,e),this.app=t,this.el=i.el,this.terminal=i.terminal,this.el.terminal=this.terminal,this.$el=a()(this.el),this.$el.on("dropinit",(function(e,t){return n.onDropInit(e,t)})),this.$el.on("dropstart",(function(e,t){return n.onDropStart(e,t)})),this.$el.on("dropend",(function(e,t){return n.onDropEnd(e,t)})),this.$el.on("drop",(function(e,t){return n.onDrop(e,t)}))}return Qa(e,[{key:"onDropInit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.terminal,i=a()(t.drag).hasClass("output-terminal")&&n.canAccept(t.drag.terminal);return i.canAccept?(this.$el.addClass("can-accept"),this.$el.removeClass("cannot-accept"),this.reason=null):(this.$el.addClass("cannot-accept"),this.$el.removeClass("can-accept"),this.reason=i.reason),!0}},{key:"onDropStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.proxy.terminal&&(this.$el.hasClass("can-accept")?(t.proxy.terminal.connectors[0].dropStart(!0),t.proxy.dropTooltip=""):(t.proxy.terminal.connectors[0].dropStart(!1),this.reason?(t.proxy.dropTooltip=this.reason,a()(t.proxy).tooltip("show")):t.proxy.dropTooltip=""))}},{key:"onDropEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.proxy.dropTooltip="",t.proxy.terminal&&t.proxy.terminal.connectors[0].dropEnd()}},{key:"onDrop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.proxy.dropTooltip="",this.$el.hasClass("can-accept")){var n=this.terminal,i=new Va.a(this.app.canvasManager,t.drag.terminal,n);i.redraw()}}}]),e}(),nr=function(){function e(t,n){var i=this;Ka(this,e),this.app=t,this.el=n.el,this.terminal=n.terminal,this.el.terminal=this.terminal,this.$el=a()(this.el),this.$el.attr("aria-label","connect output ".concat(this.terminal.name," to input. Press space to see a list of available inputs")),this.$el.attr("tabindex","0"),this.$el.attr("aria-grabbed","false"),this.$el.on("drag",(function(e,t){return i.onDrag(e,t)})),this.$el.on("dragstart",(function(e,t){return i.onDragStart(e,t)})),this.$el.on("dragend",(function(e,t){return i.onDragEnd(e,t)})),this.$el.on("keydown",(function(e){return Ja({e:e,manager:t,outputTerminal:n.terminal,outputEl:i.el})}))}return Qa(e,[{key:"onDrag",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){var e=t.app.canvasManager.canvasZoom,i=a()(n.proxy).offsetParent().offset(),r=n.offsetX-i.left,o=n.offsetY-i.top;a()(n.proxy).css({left:r/e,top:o/e}),n.proxy.terminal.redraw(),t.app.canvasManager.updateViewportOverlay()};i(),a()("#canvas-container").get(0).scroll_panel.test(e,i)}},{key:"onDragStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(t.available).addClass("input-terminal-active");var n=a()("<div class='drag-terminal'/>").appendTo("#canvas-container").get(0);n.dropTooltip="",a()(n).tooltip({title:function(){return n.dropTooltip||""}}),n.terminal=new Ua.Terminal({element:n,node:{}});var i=new Va.a(this.app.canvasManager);return i.dragging=!0,i.connect(this.terminal,n.terminal),n}},{key:"onDragEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.proxy.terminal.connectors[0];n&&n.destroy(),a()(t.proxy).tooltip("dispose"),a()(t.proxy).remove(),a()(t.available).removeClass("input-terminal-active"),a()("#canvas-container").get(0).scroll_panel.stop()}}]),e}(),ir={props:{input:{type:Object,required:!0},getNode:{type:Function,required:!0},getManager:{type:Function,required:!0},datatypesMapper:{type:Object,required:!0}},data:function(){return{showRemove:!1,isMultiple:!1}},watch:{input:function(e){var t=this,n=this.terminal;if(n instanceof this.terminalClassForInput(e))n.update(e),n.destroyInvalidConnections();else{this.$emit("onRemove",this.input);var i=this.createTerminal(e);i.connectors=this.terminal.connectors.map((function(e){return new Va.a(t.getManager(),e.outputHandle,i)})),i.destroyInvalidConnections(),this.terminal=i,n.destroy()}}},computed:{id:function(){var e=this.getNode();return"node-".concat(e.id,"-input-").concat(this.input.name)},label:function(){return this.input.label||this.input.name},terminalClass:function(){var e="terminal input-terminal";return this.isMultiple?"".concat(e," multiple"):e}},mounted:function(){this.terminal=this.createTerminal(this.input)},methods:{terminalClassForInput:function(e){var t=Ua.InputTerminal;return"dataset_collection"==e.input_type?t=Ua.InputCollectionTerminal:"parameter"==e.input_type&&(t=Ua.InputParameterTerminal),t},createTerminal:function(e){var t=new(this.terminalClassForInput(e))({node:this.getNode(),datatypesMapper:this.datatypesMapper,name:e.name,input:e,element:this.$refs.terminal});return t.on("change",this.onChange.bind(this)),new tr(this.getManager(),{el:this.$refs.terminal,terminal:t}),this.$emit("onAdd",this.input,t),t},onChange:function(){this.isMultiple=this.terminal.mapOver&&this.terminal.mapOver.isCollection,this.$emit("onChange")},onRemove:function(){this.terminal.destroy()},mouseOver:function(e){this.terminal.connectors.length>0&&(this.showRemove=!0)},mouseLeave:function(){this.showRemove=!1}},beforeDestroy:function(){this.$emit("onRemove",this.input),this.onRemove()}},ar=Object(xn.a)(ir,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-row dataRow input-data-row",on:{mouseover:e.mouseOver,mouseleave:e.mouseLeave}},[n("div",{ref:"terminal",class:e.terminalClass,attrs:{id:e.id,"input-name":e.input.name}},[n("div",{staticClass:"icon"})]),e._v(" "),e.showRemove?n("div",{staticClass:"delete-terminal",on:{click:e.onRemove}}):e._e(),e._v("\n    "+e._s(e.label)+"\n")])}),[],!1,null,null,null).exports;function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lr={props:{output:{type:Object,required:!0},getNode:{type:Function,required:!0},getManager:{type:Function,required:!0}},data:function(){return{isMultiple:!1}},computed:{id:function(){var e=this.getNode();return"node-".concat(e.id,"-output-").concat(this.output.name)},label:function(){var e,t=this.output.extensions||this.output.type||"unspecified";Array.isArray(t)&&(t=t.join(", "));var n=(null===(e=this.activeOutput)||void 0===e?void 0:e.activeLabel)||this.output.label||this.output.name;return"".concat(n," (").concat(t,")")},activeOutput:function(){return this.getNode().activeOutputs.outputsIndex[this.output.name]},activeClass:function(){var e;return(null===(e=this.activeOutput)||void 0===e?void 0:e.activeOutput)&&"mark-terminal-active"},showCallout:function(){return"tool"==this.getNode().type},terminalClass:function(){var e="terminal output-terminal";return this.isMultiple?"".concat(e," multiple"):e}},watch:{output:function(e){var t=this,n=this.terminal;if(n instanceof this.terminalClassForOutput(e))n.update(e),n.destroyInvalidConnections();else{this.$emit("onRemove",this.output);var i=this.createTerminal(e);i.connectors=this.terminal.connectors.map((function(e){return new Va.a(t.getManager(),i,e.inputHandle)})),i.destroyInvalidConnections(),this.terminal=i,n.destroy()}}},mounted:function(){this.terminal=this.createTerminal(this.output)},methods:{terminalClassForOutput:function(e){var t=Ua.OutputTerminal;return e.collection?t=Ua.OutputCollectionTerminal:e.parameter&&(t=Ua.OutputParameterTerminal),t},createTerminal:function(e){var t,n=this.terminalClassForOutput(e),i={node:this.getNode(),name:e.name,element:this.$refs.terminal,optional:e.optional};if(e.collection){var a=e.collection_type,r=e.collection_type_source;t=new n(or(or({},i),{},{collection_type:a,collection_type_source:r,datatypes:e.extensions}))}else t=e.parameter?new n(or(or({},i),{},{type:e.type})):new n(or(or({},i),{},{datatypes:e.extensions}));return t.on("change",this.onChange.bind(this)),new nr(this.getManager(),{el:this.$refs.terminal,terminal:t}),this.$emit("onAdd",this.output,t),t},onChange:function(){this.isMultiple=this.terminal.mapOver&&this.terminal.mapOver.isCollection,this.$emit("onChange")},onToggle:function(){this.$emit("onToggle",this.output.name)}},beforeDestroy:function(){this.$emit("onRemove",this.output),this.terminal.destroy()}},cr=Object(xn.a)(lr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-row dataRow output-data-row"},[e.showCallout?n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],class:["callout-terminal",e.output.name],attrs:{title:"Unchecked outputs will be hidden and are not available as subworkflow outputs."},on:{click:e.onToggle}},[n("i",{class:["mark-terminal",e.activeClass]})]):e._e(),e._v("\n    "+e._s(e.label)+"\n    "),n("div",{ref:"terminal",class:e.terminalClass,attrs:{id:e.id,"output-name":e.output.name}},[n("div",{staticClass:"icon"})])])}),[],!1,null,null,null).exports;function dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ur={},hr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entries={}}var t,n,i;return t=e,(n=[{key:"initialize",value:function(e,t){var n=this;this.outputs=e,this._refreshIndex(),t&&t.forEach((function(e){e.label&&ur[e.label]&&(e.label=null),n.add(e.output_name,e.label),e.label&&(ur[e.label]=!0)}))}},{key:"add",value:function(e,t){return!this.exists(e)&&(this.update(e,t),!0)}},{key:"toggle",value:function(e){this.exists(e)?this.remove(e):this.add(e)}},{key:"labelOutput",value:function(e,t){if(this.outputsIndex[e]&&!ur[t]){var n=this.update(e,t);return n&&ur[n]&&delete ur[n],t&&(ur[t]=!0),null}var i=this.get(e);return i&&i.label}},{key:"count",value:function(){return Object.keys(this.entries).length}},{key:"get",value:function(e){return this.entries[e]}},{key:"exists",value:function(e){return!!this.entries[e]}},{key:"remove",value:function(e){var t=this.get(e),n=t&&t.label;n&&ur[n]&&delete ur[n],delete this.entries[e],this._updateOutput(e)}},{key:"getAll",value:function(){return Object.values(this.entries)}},{key:"update",value:function(e,t){var n=this.get(e),i=n&&n.label;return this.entries[e]={output_name:e,label:t||null},this._updateOutput(e),i}},{key:"filterOutputs",value:function(e){var t=this;this.getAll().forEach((function(n){e.includes(n.output_name)||t.remove(n.output_name)})),this._refreshIndex()}},{key:"_updateOutput",value:function(e){var t=this.outputsIndex[e];if(t){var n=this.get(t.name);$t.default.set(t,"activeOutput",!!n),$t.default.set(t,"activeLabel",n&&n.label)}}},{key:"_refreshIndex",value:function(){var e=this;this.outputsIndex={},this.outputs&&this.outputs.forEach((function(t){e.outputsIndex[t.name]=t}))}}])&&dr(t.prototype,n),i&&dr(t,i),e}();$t.default.use(Cn.a);var fr={components:{LoadingSpan:Hi.a,Recommendations:ya,NodeInput:ar,NodeOutput:cr},props:{id:{type:String,default:""},contentId:{type:String,default:""},name:{type:String,default:"name"},type:{type:String,default:null},step:{type:Object,default:null},getManager:{type:Function,default:null},getCanvasManager:{type:Function,default:null},datatypesMapper:{type:Object,default:null}},data:function(){return{popoverShow:!1,node:null,inputs:[],outputs:[],inputTerminals:{},outputTerminals:{},errors:null,label:null,config_form:{},showLoading:!0,highlight:!1,scrolledTo:!1}},mounted:function(){var e=this;this.canvasManager=this.getCanvasManager(),this.activeOutputs=new hr,this.element=this.$el,this.content_id=this.contentId;var t=this.step,n=this.$el;if(t.position)n.style.top=t.position.top+"px",n.style.left=t.position.left+"px";else{var i=document.getElementById("canvas-viewport"),r=document.getElementById("canvas-container");if(i&&r){var o=-r.offsetLeft+(i.offsetWidth-n.offsetWidth)/2,s=-r.offsetTop+(i.offsetHeight-n.offsetHeight)/2;n.style.top="".concat(s,"px"),n.style.left="".concat(o,"px")}}!function(e,t){var n=a()(e);Object.entries(t).forEach((function(e){var t=Za(e,2),i=t[0],a=t[1];n.bind(i,a)}))}(this.$el,{dragstart:function(){e.$emit("onActivate",e)},dragend:function(){e.$emit("onChange"),e.canvasManager.drawOverview()},drag:function(t,n){var i=document.getElementById("canvas-container"),a=e.$el,r=i.getBoundingClientRect(),o=(n.offsetX-r.left)/e.canvasManager.canvasZoom,s=(n.offsetY-r.top)/e.canvasManager.canvasZoom;a.style.left="".concat(o,"px"),a.style.top="".concat(s,"px"),e.onRedraw()},dragclickonly:function(){e.$emit("onActivate",e)}}),this.$emit("onAdd",this),this.step._complete?this.initData(this.step):this.$emit("onUpdate",this)},computed:{title:function(){return this.label||this.name},idString:function(){return"wf-node-step-".concat(this.id)},showRule:function(){return this.inputs.length>0&&this.outputs.length>0},iconClass:function(){var e=pa.a[this.type];return e?"icon fa fa-fw ".concat(e):null},popoverId:function(){return"popover-".concat(this.id)},canClone:function(){return"subworkflow"!=this.type},isEnabled:function(){return Object(r.a)().config.enable_tool_recommendations},isInput:function(){return"data_input"==this.type||"data_collection_input"==this.type||"parameter_input"==this.type}},methods:{onChange:function(){this.$emit("onChange")},onAddInput:function(e,t){this.inputTerminals[e.name]=t,this.onRedraw()},onRemoveInput:function(e){delete this.inputTerminals[e.name],this.onRedraw()},onAddOutput:function(e,t){this.mapOver&&t.setMapOver(this.mapOver),this.outputTerminals[e.name]=t,this.onRedraw()},onRemoveOutput:function(e){delete this.outputTerminals[e.name],this.onRedraw()},onToggleOutput:function(e){this.activeOutputs.toggle(e),this.$emit("onChange")},onCreate:function(e,t){this.$emit("onCreate",e,t),this.popoverShow=!1},onClone:function(){this.$emit("onClone",this)},onRemove:function(){Object.values(this.inputTerminals).forEach((function(e){e.destroy()})),Object.values(this.outputTerminals).forEach((function(e){e.destroy()})),this.activeOutputs.filterOutputs([]),this.$emit("onRemove",this)},onRedraw:function(){Object.values(this.inputTerminals).forEach((function(e){e.redraw()})),Object.values(this.outputTerminals).forEach((function(e){e.redraw()}))},getNode:function(){return this},setNode:function(e){var t=this;e.workflow_outputs=e.outputs.map((function(e){return{output_name:e.name,label:e.label}})),this.initData(e),$t.default.nextTick((function(){t.updateData(e),t.$emit("onActivate",t)}))},setAnnotation:function(e){var t=this;this.annotationTimeout&&clearTimeout(this.annotationTimeout),this.annotationTimeout=setTimeout((function(){e!==t.annotation&&(t.annotation=e,t.$emit("onChange"))}),100)},setLabel:function(e){var t=this;this.labelTimeout&&clearTimeout(this.labelTimeout),this.labelTimeout=setTimeout((function(){e!==t.label&&(t.label=e,t.$emit("onChange"))}),100)},setData:function(e){var t;this.config_form=e.config_form,this.content_id=(null===(t=e.config_form)||void 0===t?void 0:t.id)||e.content_id,this.tool_state=e.tool_state,this.errors=e.errors,this.annotation=e.annotation,this.tooltip=e.tooltip||"",this.postJobActions=e.post_job_actions||{},this.label=e.label,this.uuid=e.uuid,this.inputs=e.inputs?e.inputs.slice():[],this.outputs=e.outputs?e.outputs.slice():[]},initData:function(e){this.setData(e),this.activeOutputs.initialize(this.outputs,e.workflow_outputs),this.showLoading=!1},updateData:function(e){this.setData(e);var t=this.outputs.map((function(e){return e.name}));this.activeOutputs.filterOutputs(t),this.showLoading=!1,this.$emit("onChange")},labelOutput:function(e,t){return this.activeOutputs.labelOutput(e,t)},changeOutputDatatype:function(e,t){"__empty__"===t&&(t=null);var n=this.outputTerminals[e];t?this.postJobActions["ChangeDatatypeAction"+e]={action_arguments:{newtype:t},action_type:"ChangeDatatypeAction",output_name:e}:delete this.postJobActions["ChangeDatatypeAction"+e],n.destroyInvalidConnections(),this.$emit("onChange")},onScrollTo:function(){var e=this;this.scrolledTo=!0,setTimeout((function(){e.scrolledTo=!1}),2e3)},onHighlight:function(){this.highlight=!0},onUnhighlight:function(){this.highlight=!1},makeActive:function(){this.element.classList.add("node-active")},makeInactive:function(){var e,t=this.element;(e=t.parentNode).removeChild(t),e.appendChild(t),t.classList.remove("node-active")}}},pr=Object(xn.a)(fr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"workflow-node":!0,"node-on-scroll-to":e.scrolledTo,"node-highlight":e.highlight},attrs:{id:e.idString,name:e.name,"node-label":e.label}},[n("div",{staticClass:"node-header unselectable clearfix"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-destroy py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"destroy node",title:"Remove"},on:{click:e.onRemove}},[n("i",{staticClass:"fa fa-times"})]),e._v(" "),e.isEnabled?n("b-button",{staticClass:"node-recommendations py-0 float-right",attrs:{id:e.popoverId,variant:"primary",size:"sm","aria-label":"tool recommendations"}},[n("i",{staticClass:"fa fa-arrow-right"})]):e._e(),e._v(" "),n("b-popover",{attrs:{target:e.popoverId,triggers:"hover",placement:"bottom",show:e.popoverShow},on:{"update:show":function(t){e.popoverShow=t}}},[n("Recommendations",{attrs:{"get-node":e.getNode,"get-manager":e.getManager,"datatypes-mapper":e.datatypesMapper},on:{onCreate:e.onCreate}})],1),e._v(" "),e.canClone?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-clone py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"clone node",title:"Duplicate"},on:{click:e.onClone}},[n("i",{staticClass:"fa fa-files-o"})]):e._e(),e._v(" "),n("i",{class:e.iconClass}),e._v(" "),n("span",{staticClass:"node-title"},[e._v(e._s(e.title))])],1),e._v(" "),e.errors?n("b-alert",{staticClass:"node-error",attrs:{variant:"danger",show:""}},[e._v("\n        "+e._s(e.errors)+"\n    ")]):n("div",{staticClass:"node-body"},[e.showLoading?n("loading-span",{attrs:{message:"Loading details"}}):e._e(),e._v(" "),e._l(e.inputs,(function(t){return n("node-input",{key:t.name,attrs:{input:t,"get-node":e.getNode,"get-manager":e.getManager,"datatypes-mapper":e.datatypesMapper},on:{onAdd:e.onAddInput,onRemove:e.onRemoveInput,onChange:e.onChange}})})),e._v(" "),e.showRule?n("div",{staticClass:"rule"}):e._e(),e._v(" "),e._l(e.outputs,(function(t){return n("node-output",{key:t.name,attrs:{output:t,"get-node":e.getNode,"get-manager":e.getManager},on:{onAdd:e.onAddOutput,onRemove:e.onRemoveOutput,onToggle:e.onToggleOutput,onChange:e.onChange}})}))],2)],1)}),[],!1,null,null,null).exports;function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var yr={components:{MarkdownEditor:ai,SidePanel:ni.a,StateUpgradeModal:Ti,ToolBoxWorkflow:ui,WorkflowOptions:Sn,WorkflowAttributes:ua,ZoomControl:fa,WorkflowNode:pr,WorkflowLint:Si,RefactorConfirmationModal:Li,MessagesModal:Ai},props:{id:{type:String,required:!0},initialVersion:{type:Number,required:!0},tags:{type:Array,required:!0},moduleSections:{type:Array,required:!0},dataManagers:{type:Array,required:!0},workflows:{type:Array,required:!0},toolbox:{type:Array,required:!0}},data:function(){return{isCanvas:!0,markdownConfig:null,markdownText:null,versions:[],parameters:null,zoomLevel:7,steps:{},hasChanges:!1,nodeIndex:0,nodes:{},requiresReindex:!1,datatypesMapper:null,datatypes:[],report:{},activeNode:null,labels:{},license:null,creator:null,annotation:null,name:null,stateMessages:[],insertedStateMessages:[],refactorActions:[],messageTitle:null,messageBody:null,messageIsError:!1,version:this.initialVersion}},created:function(){var e=this;Object(Ft.a)().then((function(t){e.datatypesMapper=t,e.datatypes=t.datatypes,e.canvasManager=new vn(e,e.$refs.canvas),e._loadCurrent(e.id,e.version)})),window.onbeforeunload=function(){if(e.hasChanges)return"There are unsaved changes to your workflow which will be lost."},Object(O.b)()},watch:{annotation:function(e,t){e!=t&&(this.hasChanges=!0)},name:function(e,t){e!=t&&(this.hasChanges=!0)},steps:function(e,t){this.hasChanges=!0},nodes:function(e,t){this.hasChanges=!0,e.length!=t.length&&(this.requiresReindex=!0)}},methods:{onActivate:function(e){this.activeNode!=e&&(this.activeNode&&this.activeNode.makeInactive(),document.activeElement.blur(),e.makeActive(),this.activeNode=e),Object(cn.f)(this,e,this.datatypes),this.canvasManager.drawOverview()},onAttemptRefactor:function(e){var t=this;if(this.hasChanges){if(0==window.confirm("You've made changes to your workflow that need to be saved before attempting the requested action. Save those changes and continue?"))return;return this.onWorkflowMessage("Saving workflow...","progress"),Object(zt.f)(this).then((function(n){t.refactorActions=e})).catch((function(e){t.onWorkflowError("Saving workflow failed, cannot apply requested changes...",e,{Ok:function(){t.hideModal()}})}))}this.refactorActions=e},onWorkflowError:function(e,t){this.messageTitle=e,this.messageBody=t.toString(),this.messageIsError=!0},onWorkflowMessage:function(e,t){this.messageTitle=e,this.messageBody=t,this.messageIsError=!1},hideModal:function(){this.messageTitle=null,this.messageBody=null,this.messageIsError=!1,Object(O.b)()},onRefactor:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Wt.a)(n,e.workflow);case 2:n._loadEditorData(e.workflow);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){vr(r,i,a,o,s,"next",e)}function s(e){vr(r,i,a,o,s,"throw",e)}o(void 0)}))})()},onAdd:function(e){this.nodes[e.id]=e},onUpdate:function(e){Object(zt.a)({type:e.type,content_id:e.contentId,_:"true"}).then((function(t){var n=Object.assign({},t,e.step);e.setNode(n)}))},onChange:function(){this.hasChanges=!0},onRemove:function(e){delete this.nodes[e.id],$t.default.delete(this.steps,e.id),this.canvasManager.drawOverview(),this.activeNode=null,Object(cn.e)()},onEditSubworkflow:function(e){var t="".concat(Object(d.getAppRoot)(),"workflow/editor?workflow_id=").concat(e);this.onNavigate(t)},onClone:function(e){var t=this,n=this.nodeIndex++,i=JSON.parse(JSON.stringify(e.step)),a=JSON.parse(JSON.stringify(e.config_form));$t.default.set(this.steps,n,_r(_r({},i),{},{id:n,config_form:_r(_r({},a),{},{inputs:a.inputs.filter((function(e){return!e.skipOnClone}))}),uuid:null,label:null,annotation:JSON.parse(JSON.stringify(e.annotation)),tool_state:JSON.parse(JSON.stringify(e.tool_state)),post_job_actions:JSON.parse(JSON.stringify(e.postJobActions))})),$t.default.nextTick().then((function(){t.canvasManager.drawOverview(),e=t.nodes[n],t.onActivate(e)}))},onInsertTool:function(e,t){this._insertStep(e,t,"tool")},onInsertModule:function(e,t){this._insertStep(null,t,e)},onInsertWorkflow:function(e,t){this._insertStep(e,t,"subworkflow")},onInsertWorkflowSteps:function(e,t){this.isCanvas?Object(cn.a)(this,e,t):this.isCanvas=!0},onDownload:function(){window.location="".concat(Object(d.getAppRoot)(),"api/workflows/").concat(this.id,"/download?format=json-download")},onSaveAs:function(){Object(cn.d)(this)},onLayout:function(){var e=this;return this.canvasManager.drawOverview(),this.canvasManager.scrollToNodes(),Promise.all([n.e(11),n.e(12)]).then(n.bind(null,2220)).then((function(t){t.autoLayout(e)}))},onAttributes:function(){Object(cn.e)(),this._ensureParametersSet()},onScrollTo:function(e){var t=this.nodes[e];this.canvasManager.scrollToNode(t),t.onScrollTo()},onHighlight:function(e){this.nodes[e].onHighlight()},onUnhighlight:function(e){this.nodes[e].onUnhighlight()},onLint:function(){if(this.requiresReindex){if(0==window.confirm("Workflow steps have been added or removed since last save, the workflow needs to be saved before best practices can be analzyed. Save workflow?"))return;this.onSave(!0)}else this._ensureParametersSet(),this.$refs.lint.refresh(),Object(cn.g)()},onUpgrade:function(){this.onAttemptRefactor([{action_type:"upgrade_all_steps"}])},onEdit:function(){this.isCanvas=!0},onReport:function(){this.isCanvas=!1},onReportUpdate:function(e){this.hasChanges=!0,this.report.markdown=e,this.markdownText=e},onRun:function(){var e="".concat(Object(d.getAppRoot)(),"workflows/run?id=").concat(this.id);this.onNavigate(e)},onNavigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!t&&this.hasChanges?this.onSave(!0).then((function(){window.location=e})):(this.hasChanges&&(window.onbeforeunload=!1,this.hideModal()),window.location=e)},onZoom:function(e){this.zoomLevel=this.canvasManager.setZoom(e)},onSave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!t&&this.onWorkflowMessage("Saving workflow...","progress"),Object(zt.f)(this).then((function(t){Object(zt.c)(e.id).then((function(t){e.versions=t,e.hideModal()}))})).catch((function(t){e.onWorkflowError("Saving workflow failed...",t,{Ok:function(){e.hideModal()}})}))},onVersion:function(e){if(e!=this.version){if(this.hasChanges)if(0==window.confirm("There are unsaved changes to your workflow which will be lost. Continue ?"))return;this.version=e,this._loadCurrent(this.id,e)}},_ensureParametersSet:function(){var e,t,n;this.parameters=(e=this.nodes,t=new ln,n=/\$\{.+?\}/g,Object.entries(e).forEach((function(e){var i=Ut(e,2),a=(i[0],i[1]);a.config_form&&a.config_form.inputs&&m.a.deepeach(a.config_form.inputs,(function(e){if("string"==typeof e.value){var i=e.value.match(n);if(i){var r,o=Vt(i);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=t.getParameterFromMatch(s);new rn(l,a,e)}}catch(e){o.e(e)}finally{o.f()}}}})),a.postJobActions&&Object.values(a.postJobActions).forEach((function(e){e.action_arguments&&Object.values(e.action_arguments).forEach((function(i){if("string"==typeof i){var r=i.match(n);if(r){var o,s=Vt(r);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=t.getParameterFromMatch(l);new on(c,a,e)}}catch(e){s.e(e)}finally{s.f()}}}}))}))})),t)},_insertStep:function(e,t,n){this.isCanvas?$t.default.set(this.steps,this.nodeIndex++,{name:t,content_id:e,type:n}):this.isCanvas=!0},_loadEditorData:function(e){var t=this,n=e.report||{},i=n.markdown||"\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n";this.markdownText=i,this.markdownConfig=n,this.hideModal(),this.stateMessages=Object(cn.c)(e);var a=this.stateMessages.length>0;this.license=e.license,this.creator=e.creator,Object(zt.c)(this.id).then((function(e){t.versions=e})),$t.default.nextTick((function(){t.canvasManager.drawOverview(),t.canvasManager.scrollToNodes(),t.hasChanges=t.requiresReindex=a}))},_loadCurrent:function(e,t){var n=this;this.onWorkflowMessage("Loading workflow...","progress"),Object(zt.d)(this,e,t).then((function(e){n._loadEditorData(e)})).catch((function(e){n.onWorkflowError("Loading workflow failed...",e)}))},onLicense:function(e){this.license!=e&&(this.hasChanges=!0,this.license=e)},onCreator:function(e){this.creator!=e&&(this.hasChanges=!0,this.creator=e)},getManager:function(){return this},getCanvasManager:function(){return this.canvasManager},onInsertedStateMessages:function(e){this.insertedStateMessages=e,this.hideModal()},resetMessage:function(){this.messageTitle=null,this.messageBody=null,this.messageError=!1}}},br=(n(563),Object(xn.a)(yr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workflow-client",attrs:{id:"columns"}},[n("StateUpgradeModal",{attrs:{"state-messages":e.stateMessages}}),e._v(" "),n("StateUpgradeModal",{attrs:{"state-messages":e.insertedStateMessages,title:"Subworkflow embedded with changes",message:"Problems were encountered loading this workflow (possibly a result of tool upgrades). Please review the following parameters and then save."}}),e._v(" "),n("RefactorConfirmationModal",{attrs:{"workflow-id":e.id,"refactor-actions":e.refactorActions},on:{onWorkflowError:e.onWorkflowError,onWorkflowMessage:e.onWorkflowMessage,onRefactor:e.onRefactor,onShow:function(t){return e.hideModal()}}}),e._v(" "),n("MessagesModal",{attrs:{title:e.messageTitle,message:e.messageBody,error:e.messageIsError},on:{onHidden:e.resetMessage}}),e._v(" "),e.isCanvas?e._e():n("MarkdownEditor",{attrs:{"markdown-text":e.markdownText,"markdown-config":e.markdownConfig,title:"Workflow Report: "+e.name,nodes:e.nodes},on:{onUpdate:e.onReportUpdate},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"workflow-canvas-button",title:"Return to Workflow",variant:"link",role:"button"},on:{click:e.onEdit}},[n("span",{staticClass:"fa fa-times"})])]},proxy:!0}],null,!1,2515380750)}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isCanvas,expression:"isCanvas"}]},[n("SidePanel",{attrs:{id:"left",side:"left"},scopedSlots:e._u([{key:"panel",fn:function(){return[n("ToolBoxWorkflow",{attrs:{toolbox:e.toolbox,"module-sections":e.moduleSections,"data-managers":e.dataManagers,workflows:e.workflows},on:{onInsertTool:e.onInsertTool,onInsertModule:e.onInsertModule,onInsertWorkflow:e.onInsertWorkflow,onInsertWorkflowSteps:e.onInsertWorkflowSteps}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"workflow-center",attrs:{id:"center"}},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("span",{staticClass:"sr-only"},[e._v("Workflow Editor")]),e._v("\n                    "+e._s(e.name)+"\n                ")])]),e._v(" "),n("div",{staticClass:"unified-panel-body workflow-canvas",attrs:{id:"workflow-canvas"}},[n("ZoomControl",{attrs:{"zoom-level":e.zoomLevel},on:{onZoom:e.onZoom}}),e._v(" "),n("div",{attrs:{id:"canvas-viewport"}},[n("div",{ref:"canvas",attrs:{id:"canvas-container"}},e._l(e.steps,(function(t,i){return n("WorkflowNode",{key:i,attrs:{id:i,name:t.name,type:t.type,"content-id":t.content_id,step:t,"datatypes-mapper":e.datatypesMapper,"get-manager":e.getManager,"get-canvas-manager":e.getCanvasManager},on:{onAdd:e.onAdd,onUpdate:e.onUpdate,onClone:e.onClone,onCreate:e.onInsertTool,onChange:e.onChange,onActivate:e.onActivate,onRemove:e.onRemove}})})),1)]),e._v(" "),e._m(0)],1)]),e._v(" "),n("SidePanel",{attrs:{id:"right",side:"right"},scopedSlots:e._u([{key:"panel",fn:function(){return[n("div",{staticClass:"unified-panel workflow-panel"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("WorkflowOptions",{attrs:{"has-changes":e.hasChanges},on:{onSave:e.onSave,onSaveAs:e.onSaveAs,onRun:e.onRun,onDownload:e.onDownload,onReport:e.onReport,onLayout:e.onLayout,onEdit:e.onEdit,onAttributes:e.onAttributes,onLint:e.onLint,onUpgrade:e.onUpgrade}})],1)]),e._v(" "),n("div",{staticClass:"unified-panel-body workflow-right"},[n("div",{staticClass:"m-1"},[n("WorkflowAttributes",{attrs:{id:e.id,tags:e.tags,parameters:e.parameters,"annotation-current":e.annotation,annotation:e.annotation,"name-current":e.name,name:e.name,version:e.version,versions:e.versions,license:e.license,creator:e.creator},on:{"update:annotationCurrent":function(t){e.annotation=t},"update:annotation-current":function(t){e.annotation=t},"update:nameCurrent":function(t){e.name=t},"update:name-current":function(t){e.name=t},onVersion:e.onVersion,onLicense:e.onLicense,onCreator:e.onCreator}}),e._v(" "),n("WorkflowLint",{ref:"lint",staticClass:"right-content",staticStyle:{display:"none"},attrs:{id:"lint-panel","untyped-parameters":e.parameters,annotation:e.annotation,creator:e.creator,license:e.license,nodes:e.nodes},on:{onAttributes:e.onAttributes,onHighlight:e.onHighlight,onUnhighlight:e.onUnhighlight,onRefactor:e.onAttemptRefactor,onScrollTo:e.onScrollTo}}),e._v(" "),n("div",{staticClass:"right-content",attrs:{id:"right-content"}})],1)])])]},proxy:!0}])})],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"workflow-overview",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"workflow-overview-body"},[t("div",{attrs:{id:"overview-container"}},[t("canvas",{attrs:{width:"0",height:"0",id:"overview-canvas"}}),this._v(" "),t("div",{attrs:{id:"overview-viewport"}})])])])}],!1,null,"7f5d2870",null).exports),wr=function(e){return new($t.default.extend(br))({propsData:e,el:"#columns"})},kr=n(85);function xr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Sr(e,t){return Cr.apply(this,arguments)}function Cr(){var e;return e=regeneratorRuntime.mark((function e(t,n){var i,a,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=!(r.length>2&&void 0!==r[2])||r[2])&&Object(O.e)(h()("Saving page"),h()("progress")),e.prev=2,e.next=5,Dn.a.post("".concat(Object(d.getAppRoot)(),"api/pages/").concat(t,"/revisions"),{content:n}).finally(i&&O.b);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(2),Object(Un.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),(Cr=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){xr(r,i,a,o,s,"next",e)}function s(e){xr(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}var Mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);return new Proxy(t,{get:function(e,t){if(t in e)return e[t];console.warn("Requested missing config prop",t)}})}();var Tr=window.WYMeditor,jr=null,Or={ITEM_HISTORY:"item_history",ITEM_DATASET:"item_dataset",ITEM_WORKFLOW:"item_workflow",ITEM_PAGE:"item_page",ITEM_VISUALIZATION:"item_visualization",DIALOG_HISTORY_LINK:"link_history",DIALOG_DATASET_LINK:"link_dataset",DIALOG_WORKFLOW_LINK:"link_workflow",DIALOG_PAGE_LINK:"link_page",DIALOG_VISUALIZATION_LINK:"link_visualization",DIALOG_EMBED_HISTORY:"embed_history",DIALOG_EMBED_DATASET:"embed_dataset",DIALOG_EMBED_WORKFLOW:"embed_workflow",DIALOG_EMBED_PAGE:"embed_page",DIALOG_EMBED_VISUALIZATION:"embed_visualization"};function Dr(e){var t,n,i,a;switch(e){case Or.ITEM_HISTORY:t="History",n="Histories",i="history",a="History";break;case Or.ITEM_DATASET:t="Dataset",n="Datasets",i="dataset",a="HistoryDatasetAssociation";break;case Or.ITEM_WORKFLOW:t="Workflow",n="Workflows",i="workflow",a="StoredWorkflow";break;case Or.ITEM_PAGE:t="Page",n="Pages",i="page",a="Page";break;case Or.ITEM_VISUALIZATION:t="Visualization",n="Visualizations",i="visualization",a="Visualization"}var r="list_".concat(n.toLowerCase(),"_for_selection");return{singular:t,plural:n,controller:i,iclass:a,list_ajax_url:Mr.list_objects_url.replace("LIST_ACTION",r)}}function Lr(e,t,n){var i=Mr.set_accessible_url.replace("ITEM_CONTROLLER",e);a.a.ajax({type:"POST",url:i,data:{id:t,accessible:"True"},error:function(){alert("Making ".concat(n," accessible failed"))}})}function Er(e,t){var n=Object(d.getAppRoot)();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(Mr,e)}({page_id:e,page_list_url:"".concat(n,"pages/list"),list_objects_url:"".concat(n,"page/LIST_ACTION"),set_accessible_url:"".concat(n,"ITEM_CONTROLLER/set_accessible_async"),get_name_and_link_url:"".concat(n,"ITEM_CONTROLLER/get_name_and_link_async?id="),editor_base_path:"".concat(n,"static/wymeditor/"),iframe_base_path:"".concat(n,"static/wymeditor/iframe/galaxy/")}),a()(document).ajaxError((function(e,t){var n=t.responseText||t.statusText||"Could not connect to server";return Object(O.e)("Server error",n,{"Ignore error":O.b}),!1})),a()("[name=page_content]").val(t).wymeditor({skin:"galaxy",basePath:Mr.editor_base_path,iframeBasePath:Mr.iframe_base_path,boxHtml:"<table class='wym_box' width='100%' height='100%'><tr><td><div class='wym_area_top'>".concat(Tr.TOOLS,"</div></td></tr><tr height='100%'><td><div class='wym_area_main' style='height: 100%;'>").concat(Tr.IFRAME).concat(Tr.STATUS,"</div></div></td></tr></table>"),toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:h()("Superscript"),css:"wym_tools_superscript"},{name:"Subscript",title:h()("Subscript"),css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"}]}),jr=a.a.wymeditors(0);var i=a()("<div class='galaxy-page-editor-button'><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Paragraph type</a></div>");a()(".wym_area_top").append(i);var r={};a.a.each(jr._options.containersItems,(function(e,t){var n=t.name;r[t.title.replace("_"," ")]=function(){jr.container(n)}})),Object(F.b)(i,r);var o=a()("<div><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Insert Link to Galaxy Object</a></div>").addClass("galaxy-page-editor-button");a()(".wym_area_top").append(o),Object(F.b)(o,{"Insert History Link":function(){jr.dialog(Or.DIALOG_HISTORY_LINK)},"Insert Dataset Link":function(){jr.dialog(Or.DIALOG_DATASET_LINK)},"Insert Workflow Link":function(){jr.dialog(Or.DIALOG_WORKFLOW_LINK)},"Insert Page Link":function(){jr.dialog(Or.DIALOG_PAGE_LINK)},"Insert Visualization Link":function(){jr.dialog(Or.DIALOG_VISUALIZATION_LINK)}});var s=a()("<div><a id='embed-galaxy-object' class='action-button popup' href='javascript:void(0)' role=''button'>Embed Galaxy Object</a></div>").addClass("galaxy-page-editor-button");a()(".wym_area_top").append(s),Object(F.b)(s,{"Embed History":function(){jr.dialog(Or.DIALOG_EMBED_HISTORY)},"Embed Dataset":function(){jr.dialog(Or.DIALOG_EMBED_DATASET)},"Embed Workflow":function(){jr.dialog(Or.DIALOG_EMBED_WORKFLOW)},"Embed Visualization":function(){jr.dialog(Or.DIALOG_EMBED_VISUALIZATION)}})}Tr.editor.prototype.dialog=function(e,t,n){var i,o,s=this,l=s.uniqueStamp(),c=s.selected();e==Tr.DIALOG_LINK&&(c&&(a()(s._options.hrefSelector).val(a()(c).attr(Tr.HREF)),a()(s._options.srcSelector).val(a()(c).attr(Tr.SRC)),a()(s._options.titleSelector).val(a()(c).attr(Tr.TITLE)),a()(s._options.altSelector).val(a()(c).attr(Tr.ALT))),c&&(null==(i=a()(c).attr("href"))&&(i=""),null==(o=a()(c).attr("title"))&&(o="")),Object(O.e)("Create Link","<div><div><label id='link_attribute_label'>URL <span style='float: right; font-size: 90%'><a href='javascript:void(0)' role=\"button\" id='set_link_id'>Create in-page anchor</a></span></label><br><input type='text' class='wym_href' value='".concat(i,"' size='40' /></div><div><label>Title</label><br><input type='text' class='wym_title' value='").concat(o,"' size='40' /></div><div>"),{"Make link":function(){var e=a()(s._options.hrefSelector).val()||"",t=a()(".wym_id").val()||"",n=a()(s._options.titleSelector).val()||"";if(e||t){s._exec(Tr.CREATE_LINK,l);var i=a()("a[href=".concat(l,"]"),s._doc.body);i.attr(Tr.HREF,e).attr(Tr.TITLE,n).attr("id",t),0===i.text().indexOf("wym-")&&i.text(n)}Object(O.b)()},Cancel:function(){Object(O.b)()}},{},(function(){a()("#set_link_id").click((function(){a()("#link_attribute_label").text("ID/Name");var e=a()(".wym_href");e.addClass("wym_id").removeClass("wym_href"),c&&e.val(a()(c).attr("id")),a()(this).remove()}))})));if(e==Tr.DIALOG_IMAGE)return s._selected_image&&(a()("".concat(s._options.dialogImageSelector," ").concat(s._options.srcSelector)).val(a()(s._selected_image).attr(Tr.SRC)),a()("".concat(s._options.dialogImageSelector," ").concat(s._options.titleSelector)).val(a()(s._selected_image).attr(Tr.TITLE)),a()("".concat(s._options.dialogImageSelector," ").concat(s._options.altSelector)).val(a()(s._selected_image).attr(Tr.ALT))),void Object(O.e)("Image","<div class='row'><label>URL</label><br><input type='text' class='wym_src' value='' size='40' /></div><div class='row'><label>Alt text</label><br><input type='text' class='wym_alt' value='' size='40' /></div><div class='row'><label>Title</label><br><input type='text' class='wym_title' value='' size='40' /></div>",{Insert:function(){var e=a()(s._options.srcSelector).val();e.length>0&&(s._exec(Tr.INSERT_IMAGE,l),a()("img[src$=".concat(l,"]"),s._doc.body).attr(Tr.SRC,e).attr(Tr.TITLE,a()(s._options.titleSelector).val()).attr(Tr.ALT,a()(s._options.altSelector).val())),Object(O.b)()},Cancel:function(){Object(O.b)()}});if(e==Tr.DIALOG_TABLE&&Object(O.e)("Table","<div class='row'><label>Caption</label><br><input type='text' class='wym_caption' value='' size='40' /></div><div class='row'><label>Summary</label><br><input type='text' class='wym_summary' value='' size='40' /></div><div class='row'><label>Number Of Rows<br></label><input type='text' class='wym_rows' value='3' size='3' /></div><div class='row'><label>Number Of Cols<br></label><input type='text' class='wym_cols' value='2' size='3' /></div>",{Insert:function(){var e=a()(s._options.rowsSelector).val(),t=a()(s._options.colsSelector).val();if(e>0&&t>0){var n=s._doc.createElement(Tr.TABLE),i=null,r=a()(s._options.captionSelector).val();n.createCaption().innerHTML=r;for(var o=0;o<e;o++){i=n.insertRow(o);for(var l=0;l<t;l++)i.insertCell(l)}a()(n).attr("summary",a()(s._options.summarySelector).val());var c=a()(s.findUp(s.container(),Tr.MAIN_CONTAINERS)).get(0);c&&c.parentNode?a()(c).after(n):a()(s._doc.body).append(n)}Object(O.b)()},Cancel:function(){Object(O.b)()}}),e==Or.DIALOG_HISTORY_LINK||e==Or.DIALOG_DATASET_LINK||e==Or.DIALOG_WORKFLOW_LINK||e==Or.DIALOG_PAGE_LINK||e==Or.DIALOG_VISUALIZATION_LINK){var d;switch(e){case Or.DIALOG_HISTORY_LINK:d=Dr(Or.ITEM_HISTORY);break;case Or.DIALOG_DATASET_LINK:d=Dr(Or.ITEM_DATASET);break;case Or.DIALOG_WORKFLOW_LINK:d=Dr(Or.ITEM_WORKFLOW);break;case Or.DIALOG_PAGE_LINK:d=Dr(Or.ITEM_PAGE);break;case Or.DIALOG_VISUALIZATION_LINK:d=Dr(Or.ITEM_VISUALIZATION)}var u=new kr.a({url_base:d.list_ajax_url,embedded:!0}),h=Object(r.a)();h.modal.show({title:"Insert Link to ".concat(d.singular),body:a()("<div/>").append(u.$el).append(a()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(d.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,buttons:{Insert:function(){var e=!1;null!=a()("#make-importable:checked").val()&&(e=!0),u.$("input[name=id]:checked").each((function(){var t=a()(this).val();e&&Lr(d.controller,t,d.singular);var n=(Mr.get_name_and_link_url+t).replace("ITEM_CONTROLLER",d.controller);a.a.getJSON(n,(function(e){s._exec(Tr.CREATE_LINK,l);var n=a()("a[href=".concat(l,"]"),s._doc.body).text();""==n||n==l?s.insert("<a href='".concat(e.link,"'>").concat(d.singular," '").concat(e.name,"'</a>")):a()("a[href=".concat(l,"]"),s._doc.body).attr(Tr.HREF,e.link).attr(Tr.TITLE,d.singular+t)}))})),h.modal.hide()},Close:function(){h.modal.hide()}}})}if(e==Or.DIALOG_EMBED_HISTORY||e==Or.DIALOG_EMBED_DATASET||e==Or.DIALOG_EMBED_WORKFLOW||e==Or.DIALOG_EMBED_PAGE||e==Or.DIALOG_EMBED_VISUALIZATION){var f;switch(e){case Or.DIALOG_EMBED_HISTORY:f=Dr(Or.ITEM_HISTORY);break;case Or.DIALOG_EMBED_DATASET:f=Dr(Or.ITEM_DATASET);break;case Or.DIALOG_EMBED_WORKFLOW:f=Dr(Or.ITEM_WORKFLOW);break;case Or.DIALOG_EMBED_PAGE:f=Dr(Or.ITEM_PAGE);break;case Or.DIALOG_EMBED_VISUALIZATION:f=Dr(Or.ITEM_VISUALIZATION)}var p=new kr.a({url_base:f.list_ajax_url,embedded:!0}),m=Object(r.a)();m.modal.show({title:"Insert Link to ".concat(f.singular),body:a()("<div/>").append(p.$el).append(a()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(f.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,extra_class:"pages-embed",buttons:{Embed:function(){var e=!1;null!=a()("#make-importable:checked").val()&&(e=!0),p.$("input[name=id]:checked").each((function(){var t=a()(this),n=t.val(),i=t.closest("td").next("td").find("label").text();e&&Lr(f.controller,n,f.singular);var r=["<div id='","".concat(f.iclass,"-").concat(n),"' class='embedded-item ",f.singular.toLowerCase()," placeholder'>","<p class='title'>","Embedded Galaxy ",f.singular," '",i,"'","</p>","<p class='content'>","[Do not edit this block; Galaxy will fill it in with the annotated ",f.singular.toLowerCase()," when it is displayed.]","</p>","</div>"].join("");s.insert(r)})),m.modal.hide()},Close:function(){m.modal.hide()}}})}};var Ar={props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},title:{type:String,default:null},content:{type:String,default:null}},created:function(){var e=this;this.$nextTick((function(){Er(e.pageId,e.content)}))},methods:{saveContent:function(e){var t=this;Sr(this.pageId,jr.xhtml(),!e).then((function(){e&&(window.location="".concat(Object(d.getAppRoot)()).concat(t.publicUrl))})).catch((function(e){Z.a.error("Failed to save page: ".concat(e))}))}}},Ir=(n(564),Object(xn.a)(Ar,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"save-button",title:"Save",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!1)}}},[n("span",{staticClass:"fa fa-save"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"view-button",title:"Save & View",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!0)}}},[n("span",{staticClass:"fa fa-eye"})])],1),e._v("\n            "+e._s(e.title)+"\n        ")])]),e._v(" "),n("div",{staticClass:"unified-panel-body"},[n("textarea",{attrs:{name:"page_content",val:e.content}})])])}),[],!1,null,null,null).exports);$t.default.use(Cn.a),Tn.c.add(jn.p,jn.C);var Pr={components:{MarkdownEditor:ai,FontAwesomeIcon:Mn.a},data:function(){return{markdownText:this.content}},props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},title:{type:String,default:null},content:{type:String,default:null},contentData:{type:Object,default:null}},methods:{onUpdate:function(e){this.markdownText=e},saveContent:function(e){var t=this;Sr(this.pageId,this.markdownText,!e).then((function(){e&&(window.location=t.publicUrl)})).catch((function(e){Z.a.error("Failed to save page: ".concat(e))}))}}},Yr=Object(xn.a)(Pr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"columns"}},[n("markdown-editor",{attrs:{title:e.title,"markdown-text":e.markdownText,"markdown-config":e.contentData},on:{onUpdate:e.onUpdate},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"save-button",title:"Save",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!1)}}},[n("font-awesome-icon",{attrs:{icon:"save"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"view-button",title:"Save & View",variant:"link",role:"button"},on:{click:function(t){return e.saveContent(!0)}}},[n("font-awesome-icon",{attrs:{icon:"eye"}})],1)]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;function Rr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var Hr={props:{pageId:{required:!0,type:String}},data:function(){return{title:null,contentFormat:null,contentData:null,content:null,publicUrl:null,loading:!0}},components:{PageEditorHtml:Ir,PageEditorMarkdown:Yr,LoadingSpan:Hi.a},created:function(){var e=this;this.getPage(this.pageId).then((function(t){e.publicUrl="".concat(Object(d.getAppRoot)(),"u/").concat(t.username,"/p/").concat(t.slug),e.content=t.content,e.contentFormat=t.content_format,e.contentData=t,e.title=t.title,e.loading=!1})).catch((function(e){Z.a.error("Failed to load page: ".concat(e))}))},methods:{getPage:function(e){return(t=regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dn.a.get("".concat(Object(d.getAppRoot)(),"api/pages/").concat(e));case 3:return n=t.sent,i=n.data,t.abrupt("return",i);case 8:t.prev=8,t.t0=t.catch(0),Object(Un.b)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){Rr(r,i,a,o,s,"next",e)}function s(e){Rr(r,i,a,o,s,"throw",e)}o(void 0)}))})();var t}}},Nr=Object(xn.a)(Hr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("LoadingSpan",{staticClass:"m-3",attrs:{message:"Loading Page"}}):"markdown"==e.contentFormat?n("page-editor-markdown",{attrs:{title:e.title,"page-id":e.pageId,"public-url":e.publicUrl,content:e.content,"content-data":e.contentData}}):n("page-editor-html",{attrs:{title:e.title,"page-id":e.pageId,"public-url":e.publicUrl,content:e.content}})}),[],!1,null,null,null).exports,$r=function(e){return new($t.default.extend(Nr))({propsData:e,el:"#columns"})};function Fr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr={components:{Markdown:n(270).a},props:{pageId:{type:String,required:!0}},computed:{dataUrl:function(){return"".concat(Object(d.getAppRoot)(),"api/pages/").concat(this.pageId)},exportUrl:function(){return"".concat(this.dataUrl,".pdf")},editUrl:function(){return"".concat(Object(d.getAppRoot)(),"page/edit_content?id=").concat(this.pageId)}},data:function(){return{markdownConfig:{}}},created:function(){var e=this;this.getContent().then((function(t){e.markdownConfig=zr(zr({},t),{},{markdown:t.content})}))},methods:{onEdit:function(){window.location=this.editUrl},getContent:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dn.a.get(t.dataUrl);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","Failed to retrieve content. ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Fr(r,i,a,o,s,"next",e)}function s(e){Fr(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},Br=Object(xn.a)(Vr,(function(){var e=this.$createElement;return(this._self._c||e)("markdown",{attrs:{"markdown-config":this.markdownConfig,"export-link":this.exportUrl},on:{onEdit:this.onEdit}})}),[],!1,null,null,null).exports,qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()("#page-display-content").each((function(t,n){var i=a()(n).attr("page_id"),r=$t.default.extend(Br);return e.pageId=i,new r({propsData:e}).$mount(n)}))},Gr=n(50);function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xr={props:{jobId:{type:String,required:!0}},created:function(){this.fetchJobDestinationParams(this.jobId)},computed:{jobDestinationParams:function(){return this.$store.getters.jobDestinationParams(this.jobId)}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(Gr.b)(["fetchJobDestinationParams"]))},Qr=Object(xn.a)(Xr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"tabletip info_data_table",attrs:{id:"destination_parameters"}},[n("tbody",e._l(e.jobDestinationParams,(function(t,i){return n("tr",{key:i},[n("td",[e._v(e._s(i))]),e._v(" "),n("td",[e._v(e._s(t))])])})),0)])])}),[],!1,null,null,null).exports,Zr=n(38),eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelectorAll(".job-destination-parameters");Array.prototype.forEach.call(t,(function(t,n){e.jobId=t.getAttribute("job_id"),Object(Zr.a)(Qr)(e,t)}))},to=n(97),no=n(206),io=n(115),ao={props:{hda_id:{type:String,required:!0}},components:{DatasetProvider:io.c,DecodedId:no.a,UtcDate:to.a},methods:{bytesToString:function(e){return m.a.bytesToString(e)}}},ro=Object(xn.a)(ao,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DatasetProvider",{attrs:{id:e.hda_id},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[t.loading?e._e():n("div",[n("h3",[e._v("Dataset Information")]),e._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"dataset-details"}},[n("tbody",[n("tr",[n("td",[e._v("Number")]),e._v(" "),n("td",{attrs:{id:"number"}},[e._v(e._s(i.hid))])]),e._v(" "),n("tr",[n("td",[e._v("Name")]),e._v(" "),n("td",{attrs:{id:"name"}},[e._v(e._s(i.name))])]),e._v(" "),n("tr",[n("td",[e._v("Created")]),e._v(" "),i.create_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:i.create_time,mode:"pretty"}})],1):e._e()]),e._v(" "),n("tr",[n("td",[e._v("Filesize")]),e._v(" "),n("td",{attrs:{id:"filesize"},domProps:{innerHTML:e._s(e.bytesToString(i.file_size))}})]),e._v(" "),n("tr",[n("td",[e._v("Dbkey")]),e._v(" "),n("td",{attrs:{id:"dbkey"}},[e._v(e._s(i.metadata_dbkey))])]),e._v(" "),n("tr",[n("td",[e._v("Format")]),e._v(" "),n("td",{attrs:{id:"format"}},[e._v(e._s(i.file_ext))])]),e._v(" "),n("tr",[n("td",[e._v("File contents")]),e._v(" "),n("td",{attrs:{id:"file-contents"}},[n("a",{attrs:{href:i.download_url}},[e._v("contents")])])]),e._v(" "),i.id?n("tr",[n("td",[e._v("History Content API ID")]),e._v(" "),n("td",[n("div",{attrs:{id:"dataset-id"}},[e._v(e._s(i.id)+" "),n("decoded-id",{attrs:{id:i.id}})],1)])]):e._e(),e._v(" "),i.history_id?n("tr",[n("td",[e._v("History API ID")]),e._v(" "),n("td",[n("div",{attrs:{id:"history_id"}},[e._v(e._s(i.history_id)+" "),n("decoded-id",{attrs:{id:i.history_id}})],1)])]):e._e(),e._v(" "),i.uuid?n("tr",[n("td",[e._v("UUID")]),e._v(" "),n("td",{attrs:{id:"dataset-uuid"}},[e._v(e._s(i.uuid))])]):e._e(),e._v(" "),i.file_name?n("tr",[n("td",[e._v("Full Path")]),e._v(" "),n("td",{attrs:{id:"file_name"}},[e._v(e._s(i.file_name))])]):e._e()])])])]}}])})}),[],!1,null,null,null).exports,oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.querySelectorAll(".dataset-information").forEach((function(t){e.hda_id=t.getAttribute("hda_id"),Object(Zr.a)(ro)(e,t)}))},so=n(229),lo=n.n(so),co={components:{LoadingSpan:Hi.a},props:{datasetId:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{storageInfo:null,descriptionRendered:null,errorMessage:null}},created:function(){var e=this,t=this.datasetId,n=this.datasetType;Dn.a.get("".concat(Object(d.getAppRoot)(),"api/datasets/").concat(t,"/storage"),{hda_ldda:n}).then(this.handleResponse).catch((function(t){e.errorMessage=Object(Un.a)(t)}))},methods:{handleResponse:function(e){var t=e.data,n=t.description;this.storageInfo=t,this.descriptionRendered=n?lo()().render(t.description):null}}},uo=Object(xn.a)(co,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.includeTitle?n("h3",[e._v("Dataset Storage")]):e._e(),e._v(" "),e.errorMessage?n("div",{staticClass:"error"},[e._v(e._s(e.errorMessage))]):null==e.storageInfo?n("loading-span"):n("div",[n("p",[e._v("\n            This dataset is stored in\n            "),e.storageInfo.name?n("span",{staticClass:"display-os-by-name"},[e._v("\n                a Galaxy object store named "),n("b",[e._v(e._s(e.storageInfo.name))])]):e.storageInfo.object_store_id?n("span",{staticClass:"display-os-by-id"},[e._v("\n                a Galaxy object store with id "),n("b",[e._v(e._s(e.storageInfo.object_store_id))])]):n("span",{staticClass:"display-os-default"},[e._v(" the default configured Galaxy object store ")]),e._v(".\n        ")]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.descriptionRendered)}})])],1)}),[],!1,null,null,null).exports,ho=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelectorAll(".dataset-storage");Array.prototype.forEach.call(t,(function(t,n){var i=t.getAttribute("dataset_id"),a=t.getAttribute("dataset_type")||"hda";e.datasetId=i,e.datasetType=a,Object(Zr.a)(uo)(e,t)}))},fo=n(130),po=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.querySelectorAll(".job-information").forEach((function(t){e.job_id=t.getAttribute("job_id"),Object(Zr.a)(fo.a)(e,t)}))},mo=n(486),_o=n.n(mo);function go(e){new o.b(e)}function vo(e){new T.GalaxyApp(e)}function yo(e){new se.GalaxyApp(e)}function bo(e){const t=new le.b([],{includeDeleted:e.includingDeleted,order:e.order,limitOnFirstFetch:e.limit,limitPerFetch:e.limit,currentHistoryId:e.current_history_id}),n=new _e.MultiPanelColumns({el:a()("#center").get(0),histories:t});t.fetchFirst({silent:!0}).done((function(){n.createColumns(),n.render(0)}))}function wo(e){return new xt(e)}const ko={Datasets:jt,Jobs:At,Series:Dt}},function(e,t,n){"use strict";n.r(t),n.d(t,"addInitialization",(function(){return d.a})),n.d(t,"config$",(function(){return p})),n.d(t,"set",(function(){return m})),n.d(t,"get",(function(){return _})),n.d(t,"getAppRoot",(function(){return g}));var i=n(143),a=n(795),r=n(221),o=n(893),s=n(633),l=n(88),c={options:{root:Object(l.a)()},bootstrapped:{},form_input_auto_focus:!1,sentry:{}},d=n(75);const u=new i.a,h=u.pipe(Object(r.a)(e=>e instanceof Object),Object(o.a)((e,t)=>Object.assign({},e,t),c)),f=new a.a(c);h.subscribe(f);const p=f.asObservable().pipe(Object(r.a)(Boolean),Object(s.a)(100));function m(...e){e.forEach(e=>u.next(e))}function _(){return f.getValue()}function g(e="/"){let t=e;try{t=_().options.root}catch(n){try{t=Object(l.a)(e)}catch(e){console.warn("Unable to find index link in head",e)}}return t}},,,function(e,t,n){"use strict";var i={props:{summary:{type:n(36).f,required:!0}},computed:{hasRunningJobs:function(){return this.summary&&this.summary.running>0},maxJobs:function(){return this.summary.all_jobs},okJobs:function(){return this.summary.ok},runningJobs:function(){return this.summary.running},errorJobs:function(){var e=this.summary,t=e.failed,n=void 0===t?0:t,i=e.error;return n+(void 0===i?0:i)},waitingJobs:function(){var e=this.summary,t=e.waiting,n=void 0===t?0:t,i=e.queued;return n+(void 0===i?0:i)}}},a=n(5),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.maxJobs&&e.runningJobs?n("b-progress",{attrs:{max:e.maxJobs,height:"1em"}},[e.errorJobs?n("b-progress-bar",{attrs:{value:e.errorJobs,variant:"danger"}}):e._e(),e._v(" "),e.okJobs?n("b-progress-bar",{attrs:{value:e.okJobs,variant:"success"}}):e._e(),e._v(" "),e.runningJobs?n("b-progress-bar",{attrs:{value:e.runningJobs,variant:"info",animated:""}}):e._e(),e._v(" "),e.waitingJobs?n("b-progress-bar",{attrs:{value:e.waitingJobs,variant:"dark",animated:""}}):e._e()],1):e._e()}),[],!1,null,null,null);t.a=r.exports},function(e,t,n){"use strict";var i=n(33),a=n(36),r=n(209);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={mixins:[n(243).a],components:{PriorityMenu:r.a,PriorityMenuItem:r.b},props:{dataset:{type:a.c,required:!0},expanded:{type:Boolean,required:!0},showTags:{type:Boolean,required:!1,default:!1}},data:function(){return{toolHelp:null,testVal:!1}},created:function(){this.STATES=a.g},computed:s(s(s({},Object(i.c)("user",["currentUser"])),Object(i.c)("config",["config"])),{},{showViz:function(){return this.config.visualizations_visible},displayButtonTitle:function(){return this.dataset.purged?"Cannot display datasets removed from disk":this.dataset.state==a.g.UPLOAD?"This dataset must finish uploading before it can be viewed":this.dataset.state==a.g.NEW?"This dataset is not yet viewable":"View data"},editButtonTitle:function(){return this.dataset.deleted?"Undelete dataset to edit attributes":this.dataset.purged?"Cannot edit attributes of datasets removed from disk":new Set([a.g.UPLOAD,a.g.NEW]).has(this.dataset.state)?"This dataset is not yet editable":"Edit attributes"},deleteButtonTitle:function(){return this.dataset.purged?"Dataset has been permanently deleted":this.dataset.deleted?"Undelete":"Delete"},showDownloads:function(){return!this.dataset.purged&&(!!this.dataset.hasData&&new Set([a.g.OK,a.g.FAILED_METADATA,a.g.ERROR]).has(this.dataset.state))},hasViz:function(){return(this.dataset.viz_count||0)&&this.dataset.hasData&&!this.dataset.deleted}}),methods:{notIn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=new Set(t);return!i.has(this.dataset.state)},isIn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=new Set(t);return i.has(this.dataset.state)},viewData:function(){var e=this,t=this.dataset.id;t&&this.useGalaxy((function(n){if(n.frame&&n.frame.active)n.frame.addDataset(t);else{var i=e.dataset.getUrl("display");i&&e.iframeRedirect(i)}}))},visualize:function(){var e={path:this.dataset.getUrl("show_params"),title:"Dataset details",tryIframe:!1};this.iframeAdd(e)||this.backboneRoute("visualizations",{dataset_id:this.dataset.id})},showToolHelp:function(e){this.eventHub.$emit("toggleToolHelp",e)},onDeleteClick:function(){var e=this.dataset.deleted?"undelete":"delete";this.$emit(e)}}},d=n(5),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PriorityMenu",{attrs:{"starting-height":27}},[e.notIn(e.STATES.NOT_VIEWABLE,e.STATES.DISCARDED)?n("PriorityMenuItem",{key:"view-dataset",attrs:{title:e.displayButtonTitle,disabled:e.dataset.purged||e.isIn(e.STATES.UPLOAD,e.STATES.NEW),icon:"fas fa-eye"},on:{click:function(t){return t.stopPropagation(),e.viewData(t)}}}):e._e(),e._v(" "),e.notIn(e.STATES.DISCARDED)?n("PriorityMenuItem",{key:"edit-dataset",attrs:{title:e.editButtonTitle,disabled:e.dataset.deleted||e.isIn(e.STATES.UPLOAD,e.STATES.NEW),icon:"fa fa-pencil"},on:{click:function(t){return t.stopPropagation(),e.backboneRoute("datasets/edit",{dataset_id:e.dataset.id})}}}):e._e(),e._v(" "),e.dataset.accessible?n("PriorityMenuItem",{key:"delete-dataset",attrs:{title:e.deleteButtonTitle,disabled:e.dataset.purged,icon:e.dataset.deleted?"fas fa-trash-restore":"fas fa-trash"},on:{click:function(t){return t.stopPropagation(),e.onDeleteClick(t)}}}):e._e(),e._v(" "),e.expanded?n("PriorityMenuItem",{key:"edit-tags",attrs:{title:"Edit Dataset Tags",pressed:e.showTags,icon:"fas fa-tags"},on:{click:function(t){return t.stopPropagation(),e.$emit("update:showTags",!e.showTags)}}}):e._e(),e._v(" "),e.isIn(e.STATES.ERROR)?n("PriorityMenuItem",{key:"show-error",attrs:{title:"Error",icon:"fa fa-bug"},on:{click:function(t){return t.stopPropagation(),e.backboneRoute("datasets/error",{dataset_id:e.dataset.id})}}}):e._e(),e._v(" "),e.showDownloads&&e.dataset.hasMetaData?e._e():n("PriorityMenuItem",{key:"download",attrs:{title:"Download",href:e.prependPath(e.dataset.getUrl("download")),target:"_blank",download:"",icon:"fas fa-file-download"}}),e._v(" "),e.showDownloads&&e.dataset.hasMetaData?n("PriorityMenuItem",{key:"download-metadata",attrs:{title:"Download",href:e.prependPath(e.dataset.getUrl("download")),target:"_blank",download:"",icon:"fas fa-file-download"}}):e._e(),e._v(" "),!e.dataset.purged&&e.dataset.getUrl("download")?n("PriorityMenuItem",{key:"copy-link",attrs:{title:"Copy Link",icon:"fa fa-chain"},on:{click:function(t){return t.stopPropagation(),e.$emit("copy-link")}}}):e._e(),e._v(" "),e.showDownloads&&e.dataset.hasMetaData?n("div",e._l(e.dataset.meta_files,(function(t){return n("PriorityMenuItem",{key:"download-"+t.download_url,attrs:{title:"Download "+t.file_type,href:e.prependPath(e.dataset.getUrl("meta_download")+t.file_type),target:"_blank",download:"",icon:"fas fa-file-download"}})})),1):e._e(),e._v(" "),e.dataset.rerunnable&&e.dataset.creating_job&&e.notIn(e.STATES.UPLOAD,e.STATES.NOT_VIEWABLE)?n("PriorityMenuItem",{key:"run-job",attrs:{title:"Run job again",href:e.prependPath(e.dataset.getUrl("rerun")),icon:"fa fa-refresh"},on:{click:function(t){return t.stopPropagation(),e.backboneRoute("/",{job_id:e.dataset.creating_job})}}}):e._e(),e._v(" "),e.showViz&&e.hasViz&&e.isIn(e.STATES.OK,e.STATES.FAILED_METADATA)?n("PriorityMenuItem",{key:"visualize",attrs:{title:"Visualize Data",icon:"fa-bar-chart"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.visualize(t)}}}):e._e(),e._v(" "),e.currentUser&&e.currentUser.id&&e.dataset.creating_job?n("PriorityMenuItem",{key:"tool-tip",attrs:{title:"Tool Help",icon:"fa fa-question"},on:{click:function(t){return t.stopPropagation(),e.showToolHelp(e.dataset.creating_job)}}}):e._e(),e._v(" "),e.notIn(e.STATES.NOT_VIEWABLE)?n("PriorityMenuItem",{key:"dataset-details",attrs:{title:"View Details",icon:"fa fa-info-circle"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.iframeAdd({path:e.dataset.getUrl("show_params"),title:"Dataset details"})}}}):e._e()],1)}),[],!1,null,null,null);t.a=u.exports},function(e,t,n){"use strict";var i=n(5),a=Object(i.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-dropdown",{attrs:{"no-caret":"",right:"",variant:"link",size:"sm",boundary:"window","toggle-class":"p-1"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("i",{staticClass:"fas fa-trash"}),e._v(" "),n("span",{staticClass:"sr-only"},[e._v("Delete Collection")])]},proxy:!0}])},[e._v(" "),n("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}},[e._v(" Delete Collection Only ")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.$emit("delete",{recursive:!0})}}},[e._v("\n        Delete Contained Datasets\n    ")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.$emit("delete",{recursive:!0,purge:!0})}}},[e._v("\n        Purge Contained Datasets\n    ")])],1)}),[],!1,null,null,null);t.a=a.exports},,function(e,t,n){"use strict";var i=n(429),a=n(276),r={components:{DebouncedInput:i.a,ClickToEdit:a.a},props:{value:{type:String,required:!1,default:""},tooltipPlacement:{type:String,required:!1,default:"left"}},computed:{annotation:{get:function(){return this.value||""},set:function(e,t){e!==t&&this.$emit("input",e)}}}},o=(n(863),n(5)),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("click-to-edit",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{boundary:"viewport",placement:e.tooltipPlacement},expression:"{ boundary: 'viewport', placement: tooltipPlacement }",modifiers:{hover:!0}}],ref:"annotationInput",staticClass:"annotation",attrs:{"tag-name":"p",value:e.annotation,title:e._f("localize")("Edit annotation..."),placeholder:e._f("localize")("Edit annotation...")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.toggleEdit,a=t.placeholder,r=t.stateValidator;return[n("debounced-input",{attrs:{delay:1e3},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-form-textarea",{attrs:{size:"sm",tabindex:"-1",rows:"3","no-resize":"",value:t.value,placeholder:a,state:r(t.value,e.annotation)},on:{input:t.input,blur:function(e){return i(!1)}}})]}}],null,!0),model:{value:e.annotation,callback:function(t){e.annotation=t},expression:"annotation"}})]}}])})}),[],!1,null,"d720f3c6",null);t.a=s.exports},function(e,t,n){"use strict";var i=n(36),a=n(45),r=n(58),o=n(89),s=n(60);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){d(r,i,a,o,s,"next",e)}function s(e){d(r,i,a,o,s,"throw",e)}o(void 0)}))}}var h={components:{StatelessTags:o.a},props:{content:{type:i.a,required:!0}},computed:{tags:function(){return this.content.tags}},methods:{saveTag:function(e){var t=this;return u(regeneratorRuntime.mark((function n(){var i,o,l,c,d,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.tag,o=e.addTag,(l=Object(s.a)(i)).valid){n.next=4;break}return n.abrupt("return");case 4:return(c=new Set(t.tags)).add(l.text),d=Array.from(c),n.next=9,Object(a.o)(t.content,{tags:d});case 9:return u=n.sent,n.next=12,Object(r.b)(u);case 12:o(l);case 13:case"end":return n.stop()}}),n)})))()},deleteTag:function(e){var t=this;return u(regeneratorRuntime.mark((function n(){var i,o,c,d,u,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.tag,o=e.deleteTag,(c=Object(s.a)(i)).valid){n.next=4;break}return n.abrupt("return");case 4:return(d=new Set(l(t.tags))).delete(c.text),u=Array.from(d),n.next=9,Object(a.o)(t.content,{tags:u});case 9:return h=n.sent,n.next=12,Object(r.b)(h);case 12:o(i);case 13:case"end":return n.stop()}}),n)})))()}}},f=n(5),p=Object(f.a)(h,(function(){var e=this.$createElement;return(this._self._c||e)("StatelessTags",{attrs:{value:this.tags},on:{"before-adding-tag":this.saveTag,"before-deleting-tag":this.deleteTag}})}),[],!1,null,null,null);t.a=p.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return i.default}));var i=n(465);n(0),n(38)},,,,,,,,,function(e,t,n){"use strict";var i=n(2),a=n.n(i),r={props:{oncancel:{type:Function,required:!0},renderExtensionsToggle:{type:Boolean,default:!1},hideSourceItems:{type:Boolean,required:!0},suggestedName:{type:String,required:!1,default:""}},computed:{validInput:function(){return this.collectionName.length>0}},data:function(){return{titleForHelp:a()("Expand or Close Help"),hideOriginalsText:a()("Hide original elements?"),titleMoreHelp:a()("Close and show more help"),placeholderEnterName:a()("Enter a name for your new collection"),dropdownText:a()("Create a <i>single</> pair"),isExpanded:!1,collectionName:this.suggestedName,removeFileExtensionsText:"Remove file extensions?",localHideSourceItems:this.hideSourceItems}},methods:{l:function(e){return a()(e)},_clickForHelp:function(){return this.isExpanded=!this.isExpanded,this.isExpanded},_cancelCreate:function(){this.oncancel()},_getName:function(){return this.collectionName}},watch:{localHideSourceItems:function(){this.$emit("onUpdateHideSourceItems",this.localHideSourceItems)}}},o=(n(1093),n(5)),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-creator"},[n("div",{staticClass:"header flex-row no-flex"},[n("div",{staticClass:"main-help well clear",class:{expanded:e.isExpanded}},[n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}},[e.isExpanded?n("div",[n("i",{staticClass:"fas fa-chevron-up"})]):n("div",[n("i",{staticClass:"fas fa-chevron-down"})])]),e._v(" "),n("div",{staticClass:"help-content"},[e._t("help-content"),e._v(" "),n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}})],2)])]),e._v(" "),n("div",{staticClass:"middle flex-row flex-row-container"},[e._t("middle-content")],2),e._v(" "),n("div",{staticClass:"footer flex-row no-flex"},[n("div",{staticClass:"attributes clear"},[n("div",{staticClass:"clear"},[e.renderExtensionsToggle?n("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.removeFileExtensionsText)+"\n                    "),n("input",{staticClass:"remove-extensions float-right",attrs:{type:"checkbox",checked:""},on:{click:function(t){return e.$emit("remove-extensions-toggle")}}})]):e._e(),e._v(" "),n("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.hideOriginalsText)+"\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.localHideSourceItems,expression:"localHideSourceItems"}],staticClass:"hide-originals float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.localHideSourceItems)?e._i(e.localHideSourceItems,null)>-1:e.localHideSourceItems},on:{change:function(t){var n=e.localHideSourceItems,i=t.target,a=!!i.checked;if(Array.isArray(n)){var r=e._i(n,null);i.checked?r<0&&(e.localHideSourceItems=n.concat([null])):r>-1&&(e.localHideSourceItems=n.slice(0,r).concat(n.slice(r+1)))}else e.localHideSourceItems=a}}})])]),e._v(" "),n("div",{staticClass:"clear"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.collectionName,expression:"collectionName"}],staticClass:"collection-name form-control float-right",attrs:{placeholder:e.placeholderEnterName},domProps:{value:e.collectionName},on:{input:function(t){t.target.composing||(e.collectionName=t.target.value)}}}),e._v(" "),n("div",{staticClass:"collection-name-prompt float-right"},[e._v("\n                    "+e._s(e.l("Name:"))+"\n                ")])])]),e._v(" "),n("div",{staticClass:"actions clear vertically-spaced"},[n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e._cancelCreate}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])]),e._v(" "),n("div",{staticClass:"main-options float-right"},[n("button",{staticClass:"create-collection btn btn-primary",attrs:{disabled:!e.validInput},on:{click:function(t){return e.$emit("clicked-create",e.collectionName)}}},[e._v("\n                    "+e._s(e.l("Create collection"))+"\n                ")])])])])])}),[],!1,null,null,null).exports;t.a={components:{CollectionCreator:s},props:{initialElements:{required:!0,type:Array},creationFn:{type:Function,required:!0},oncancel:{type:Function,required:!0},oncreate:{type:Function,required:!0},defaultHideSourceItems:{type:Boolean,required:!1,default:!0}},data:function(){return{hideSourceItems:this.defaultHideSourceItems}},methods:{onUpdateHideSourceItems:function(e){this.hideSourceItems=e},_naiveStartingAndEndingLCS:function(e,t){for(var n="",i="",a=0,r=0;a<e.length&&a<t.length&&e[a]===t[a];)n+=e[a],a+=1;if(a===e.length)return e;if(a===t.length)return t;for(a=e.length-1,r=t.length-1;a>=0&&r>=0&&e[a]===t[r];)i=[e[a],i].join(""),a-=1,r-=1;return n+i}}}},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(595),o={props:{element:{required:!0}},data:function(){return{titleElementName:a()("Click to rename"),isSelected:!1}},methods:{l:function(e){return a()(e)},toString:function(){return"PairedListDatasetCollectionElementView()"}}},s=(n(1098),n(5)),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"dataset",on:{click:function(t){return e.$emit("element-is-selected",e.element)}}},[n("label",[e._v("\n        "+e._s(e.element.name)+"\n    ")])])}),[],!1,null,null,null).exports;var c=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var n,i,a=[];for(n=0;n<=t.length;n++)a[n]=[n];for(i=0;i<=e.length;i++)a[0][i]=i;for(n=1;n<=t.length;n++)for(i=1;i<=e.length;i++)t.charAt(n-1)===e.charAt(i-1)?a[n][i]=a[n-1][i-1]:a[n][i]=Math.min(a[n-1][i-1]+1,Math.min(a[n][i-1]+1,a[n-1][i]+1));return a[t.length][e.length]},d={components:{ClickToEdit:n(683).a},created:function(){this.name=this.pair.name},data:function(){return{unpairButtonTitle:a()("Unpair"),titlePairName:a()("Click to rename"),name:""}},props:{pair:{required:!0},unlinkFn:{required:!0,type:Function}},methods:{l:function(e){return a()(e)}},watch:{pair:function(){this.name=this.pair.name},name:function(){this.$emit("onPairRename",this.name)}}},u=Object(s.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("li",{staticClass:"dataset paired"},[n("span",{staticClass:"forward-dataset-name flex-column"},[e._v(e._s(e.pair.forward.name))]),e._v(" "),n("span",{staticClass:"pair-name-column flex-column"},[n("span",{staticClass:"pair-name"},[n("click-to-edit",{attrs:{title:e.titlePairName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),n("span",{staticClass:"reverse-dataset-name flex-column"},[e._v(e._s(e.pair.reverse.name))])]),e._v(" "),n("button",{staticClass:"unpair-btn",on:{click:e.unlinkFn}},[n("span",{staticClass:"fa fa-unlink",attrs:{title:e.unpairButtonTitle}})])])}),[],!1,null,null,null).exports,h=n(24);var f=function(e,t){var n,i,a=/(-?[0-9.]+)/g,r=e.toString().toLowerCase()||"",o=t.toString().toLowerCase()||"",s=String.fromCharCode(0),l=r.replace(a,"".concat(s,"$1").concat(s)).split(s),c=o.replace(a,"".concat(s,"$1").concat(s)).split(s),d=new Date(r).getTime(),u=d?new Date(o).getTime():null;if(u){if(d<u)return-1;if(d>u)return 1}for(var h=0,f=Math.max(l.length,c.length);h<f;h++){if((n=parseFloat(l[h])||l[h])<(i=parseFloat(c[h])||c[h]))return-1;if(n>i)return 1}return 0},p=(n(1100),n(892)),m=n(720),_=n.n(m),g=n(8),v=n(14);g.default.use(v.a);var y={mixins:[r.a],created:function(){this.strategy=this.autopairLCS,this.filters=this.commonFilters[this.filters]||this.commonFilters[this.DEFAULT_FILTERS],this._elementsSetUp()},components:{UnpairedDatasetElementView:l,PairedElementView:u,Splitpanes:p.Splitpanes,Pane:p.Pane,draggable:_.a},data:function(){return{state:"build",dragToChangeTitle:a()("Drag to change"),chooseFilterTitle:a()("Choose from common filters"),filterTextPlaceholder:a()("Filter text"),filterTextTitle:a()("Use this box to filter elements, using simple matching or regular expressions."),pairedElements:[],unpairedElements:[],commonFilters:{illumina:["_1","_2"],Rs:["_R1","_R2"],dot12s:[".1.fastq",".2.fastq"]},DEFAULT_FILTERS:"illumina",filters:this.DEFAULT_FILTERS,automaticallyPair:!0,initialPairsPossible:!0,matchPercentage:.9,twoPassAutoPairing:!0,removeExtensions:!0,workingElements:[],forwardFilter:"",reverseFilter:"",selectedForwardElement:null,selectedReverseElement:null,autopairSimple:this.autoPairFnBuilder({scoreThreshold:function(){return.6},match:function(e){return(e=e||{}).matchTo===e.possible?{index:e.index,score:1}:e.bestMatch}}),autopairLevenshtein:this.autoPairFnBuilder({scoreThreshold:function(){return this.matchPercentage},match:function(e){var t=1-c((e=e||{}).matchTo,e.possible)/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),autopairLCS:this.autoPairFnBuilder({scoreThreshold:function(){return this.matchPercentage},match:function(e){e=e||{};var t=this._naiveStartingAndEndingLCS(e.matchTo,e.possible).length/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),strategy:null,errorText:a()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),invalidHeader:a()("The following selections could not be included due to problems:"),allInvalidElementsPartOne:a()("At least two elements are needed for the collection. You may need to"),noElementsHeader:a()("No datasets were selected"),cancelText:a()("cancel"),allInvalidElementsPartTwo:a()("and reselect new elements."),duplicatePairNames:[]}},methods:{l:function(e){return a()(e)},removeExtensionsToggle:function(){var e=this;this.removeExtensions=!this.removeExtensions,this.pairedElements.forEach((function(t,n){t.name=e._guessNameForPair(t.forward,t.reverse,e.removeExtensions)}))},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.selectedDatasetElems=[],this.initialFiltersSet(),this.workingElements=JSON.parse(JSON.stringify(this.initialElements.slice(0))),this._ensureElementIds(),this._validateElements(),this._sortInitialList(),1==this.automaticallyPair&&(this.autoPair(),this.initialPairsPossible=this.pairedElements.length>0)},initialFiltersSet:function(){this.changeFilters("illumina")},_ensureElementIds:function(){return this.workingElements.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=e._uid)})),this.workingElements},_validateElements:function(){var e=this;return this.workingElements=this.workingElements.filter((function(t){var n=e._isElementInvalid(t);return n&&e.invalidElements.push(t.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?a()("is a collection, this is not allowed"):e.state===h.a.OK||h.a.NOT_READY_STATES.includes(e.state)?e.deleted||e.purged?a()("has been deleted or purged"):null:a()("has errored, is paused, or is not accessible")},_sortInitialList:function(){this._sortDatasetList(this.workingElements)},_sortDatasetList:function(e){return e.sort((function(e,t){return f(e.name,t.name)})),e},filterElements:function(e,t){var n=this;return e.filter((function(e){return n.filterElement(e,t)}))},filterElement:function(e,t){return""==t||new RegExp(t).test(e.name)},forwardElementSelected:function(e){null==this.selectedForwardElement||!this.selectedForwardElement.id==e.id?this.selectedForwardElement=e:this.selectedForwardElement=null,this.selectedForwardElement&&this.selectedReverseElement&&this.selectedReverseElement!=this.selectedForwardElement&&this._pair(this.selectedForwardElement,this.selectedReverseElement)},reverseElementSelected:function(e){null==this.selectedReverseElement||!this.selectedReverseElement.id==e.id?this.selectedReverseElement=e:this.selectedReverseElement=null,this.selectedForwardElement&&this.selectedReverseElement&&this.selectedReverseElement!=this.selectedForwardElement&&this._pair(this.selectedForwardElement,this.selectedReverseElement)},_pair:function(e,t,n){n=n||{};var i=this._createPair(e,t,n.name);return this.pairedElements.push(i),this.removePairFromUnpaired(e,t),n.silent||this.$emit("pair:new",i),i},removePairFromUnpaired:function(e,t){this.workingElements.splice(this.workingElements.indexOf(t),1),this.workingElements.splice(this.workingElements.indexOf(e),1),this.selectedForwardElement=null,this.selectedReverseElement=null},_createPair:function(e,t,n){if(!e||!t||e===t)throw new Error("Bad pairing: ".concat([JSON.stringify(e),JSON.stringify(t)]));return{forward:e,name:n=n||this._guessNameForPair(e,t),reverse:t}},_guessNameForPair:function(e,t,n){n=n||this.removeExtensions;var i=e.name,a=t.name,r=i.replace(new RegExp(this.forwardFilter),""),o=a.replace(new RegExp(this.reverseFilter),""),s=this._naiveStartingAndEndingLCS(r,o),l=s.lastIndexOf("/");if(l>0){var c=s.slice(0,l+1);s=s.replace(c,"")}if(n){var d=s.lastIndexOf(".");if(d>0){var u=s.slice(d,s.length);s=s.replace(u,""),i=i.replace(u,""),a=a.replace(u,"")}}return s||"".concat(i," & ").concat(a)},clickAutopair:function(){var e=this;this.selectedForwardElement=null,this.selectedReverseElement=null,this.autoPair(),this.workingElements=this.workingElements.filter((function(t){return!e.pairedElements.includes(t)}))},clickUnpair:function(e){var t=this;return function(){return t._unpair(e)}},clickClearFilters:function(){this.forwardFilter="",this.reverseFilter=""},splitByFilter:function(){var e=[new RegExp(this.forwardFilter),new RegExp(this.reverseFilter)],t=[[],[]];return this.workingElements.forEach((function(n){e.forEach((function(e,i){e.test(n.name)&&t[i].push(n)}))})),t},autoPair:function(e){var t=this.splitByFilter(),n=[];if(this.twoPassAutopairing){var i=this.autopairSimple({listA:t[0],listB:t[1]});n=i||n,t=this.splitByFilter()}e=e||this.strategy,t=this.splitByFilter();var a=e.call(this,{listA:t[0],listB:t[1]});return n=a?n.concat(a):n},_addToUnpaired:function(e){var t=this;this.workingElements.splice(function n(i,a){if(i===a)return i;var r=Math.floor((a-i)/2)+i,o=f(e.name,t.workingElements[r].name);if(o<0)return n(i,r);if(o>0)return n(r+1,a);for(;t.workingElements[r]&&t.workingElements[r].name===e.name;)r++;return r}(0,this.workingElements.length),0,e)},_unpair:function(e){if(!e)throw new Error("Bad pair: ".concat(JSON.stringify(e)));return this.pairedElements.splice(this.pairedElements.indexOf(e),1),this._addToUnpaired(e.forward),this._addToUnpaired(e.reverse),e},unpairAll:function(){for(var e=[];this.pairedElements.length;)e.push(this._unpair(this.pairedElements[0],{silent:!0}))},autoPairFnBuilder:function(e){(e=e||{}).createPair=e.createPair||function(e){var t=(e=e||{}).listA.splice(e.indexA,1)[0],n=e.listB.splice(e.indexB,1)[0],i=e.listB.indexOf(t),a=e.listA.indexOf(n);return-1!==i&&e.listB.splice(i,1),-1!==a&&e.listA.splice(a,1),this._pair(t,n,{silent:!0})};var t=[];function n(){return t.length||(t=[new RegExp(this.filters[0]),new RegExp(this.filters[1])]),t}return e.preprocessMatch=e.preprocessMatch||function(e){var t=n.call(this);return Object.assign(e,{matchTo:e.matchTo.name.replace(t[0],""),possible:e.possible.name.replace(t[1],"")})},function(t){for(var n,i=(t=t||{}).listA,a=t.listB,r=0,o={score:0,index:null},s=[];r<i.length;){var l=i[r];for(o.score=0,n=0;n<a.length;n++){var c=a[n];if(i[r]!==a[n]&&1===(o=e.match.call(this,e.preprocessMatch.call(this,{matchTo:l,possible:c,index:n,bestMatch:o}))).score)break}var d=e.scoreThreshold.call(this);if(o.score>=d?s.push(e.createPair.call(this,{listA:i,indexA:r,listB:a,indexB:o.index})):r+=1,!i.length||!a.length)return s}return s}},changeFilters:function(e){this.filters[0]=this.forwardFilter=this.commonFilters[e][0],this.filters[1]=this.reverseFilter=this.commonFilters[e][1]},clickedCreate:function(e){var t=this;if(this.checkForDuplicates(),"build"==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.pairedElements,e,this.hideSourceItems).done(this.oncreate).fail((function(){t.state="error"}))},checkForDuplicates:function(){var e=this,t={};this.duplicatePairNames=[];var n=!0;this.pairedElements.forEach((function(i){Object.prototype.hasOwnProperty.call(t,i.name)&&(n=!1,console.log("found a dupe"),e.duplicatePairNames.push(i.name)),t[i.name]=!0})),this.state=n?"build":"duplicates"},stripExtension:function(e){return e.includes(".")?e.substring(0,e.lastIndexOf(".")):e}},computed:{forwardElements:{get:function(){return this.filterElements(this.workingElements,this.forwardFilter)}},reverseElements:{get:function(){return this.filterElements(this.workingElements,this.reverseFilter)}},pairableElements:{get:function(){var e=this,t=[];return this.forwardElements.forEach((function(n,i){e.reverseElements[i]&&n.id!=e.reverseElements[i].id&&t.push({forward:e.forwardElements[i],reverse:e.reverseElements[i]})})),t}},numOfUnpairedForwardElements:function(){return this.forwardElements.length},numOfFilteredOutForwardElements:function(){return this.workingElements.length-this.numOfUnpairedForwardElements},numOfUnpairedReverseElements:function(){return this.reverseElements.length},numOfFilteredOutReverseElements:function(){return this.workingElements.length-this.numOfUnpairedReverseElements},numOfPairs:function(){return this.pairedElements.length},returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},tooFewElementsSelected:function(){return this.workingElements.length<2&&0==this.pairedElements.length},showDuplicateError:function(){return this.duplicatePairNames.length>0},noUnpairedElementsDisplayed:function(){return this.numOfUnpairedForwardElements+this.numOfUnpairedReverseElements==0},renderPairButton:function(){return this}}},b=(n(1099),Object(s.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"paired-list-collection-creator"},["error"==e.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorText)+"\n        ")])],1):n("div",[e.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.noElementsHeader)+"\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.invalidHeader)+"\n                "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0),e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.tooFewElementsSelected?n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),e.initialPairsPossible?e._e():n("div",[n("b-alert",{attrs:{show:"",variant:"danger",dismissible:""}},[e._v("\n                    "+e._s(e.l("Could not automatically create any pairs from the given dataset names. You may want to choose or enter different filters and try auto-pairing again."))+"\n                    "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                        "+e._s(e.cancelText)+"\n                    ")]),e._v("\n                    "+e._s(e.allInvalidElementsPartTwo)+"\n                ")])],1),e._v(" "),"duplicates"==e.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n                    "+e._s(e.l("Collections cannot have duplicated names. The following list names are duplicated: "))+"\n                    "),n("ul",e._l(e.duplicatePairNames,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0),e._v("\n                    "+e._s(e.l("Please fix these duplicates and try again."))+"\n                ")])],1):e._e(),e._v(" "),n("collection-creator",{attrs:{oncancel:e.oncancel,"hide-source-items":e.hideSourceItems,"render-extensions-toggle":!0},on:{onUpdateHideSourceItems:e.onUpdateHideSourceItems,"clicked-create":e.clickedCreate,"remove-extensions-toggle":e.removeExtensionsToggle},scopedSlots:e._u([{key:"help-content",fn:function(){return[n("p",[e._v("\n                        "+e._s(e.l(["Collections of paired datasets are ordered lists of dataset pairs (often forward and reverse reads). ","These collections can be passed to tools and workflows in order to have analyses done on each member of ","the entire group. This interface allows you to create a collection, choose which datasets are paired, ","and re-order the final collection."].join("")))+"\n                    ")]),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("Unpaired datasets are shown in the"))+"\n                        "),n("i",{attrs:{"data-target":".unpaired-columns"}},[e._v("\n                            "+e._s(e.l("unpaired section"))+"\n                        ")]),e._v("\n                        "+e._s(".")+"\n                        "+e._s(e.l("Paired datasets are shown in the"))+"\n                        "),n("i",{attrs:{"data-target":".paired-columns"}},[e._v("\n                            "+e._s(e.l("paired section"))+"\n                        ")]),e._v("\n                        "+e._s(".")+"\n                    ")]),e._v(" "),n("ul",[e._v("\n                        "+e._s(e.l("To pair datasets, you can:"))+"\n                        "),n("li",[e._v("\n                            "+e._s(e.l("Click a dataset in the"))+"\n                            "),n("i",{attrs:{"data-target":".forward-column"}},[e._v("\n                                "+e._s(e.l("forward column"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("to select it then click a dataset in the"))+"\n                            "),n("i",{attrs:{"data-target":".reverse-column"}},[e._v("\n                                "+e._s(e.l("reverse column"))+"\n                            ")])]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click one of the Pair these datasets buttons in the middle column to pair the datasets in a particular row."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click"))+"\n                            "),n("i",{attrs:{"data-target":".autopair-link"}},[e._v("\n                                "+e._s(e.l("Auto-pair"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("to have your datasets automatically paired based on name."))+"\n                        ")])]),e._v(" "),n("ul",[e._v("\n                        "+e._s(e.l("You can filter what is shown in the unpaired sections by:"))+"\n                        "),n("li",[e._v("\n                            "+e._s(e.l("Entering partial dataset names in either the "))+"\n                            "),n("i",{attrs:{"data-target":".forward-unpaired-filter input"}},[e._v("\n                                "+e._s(e.l("forward filter"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("or "))+"\n                            "),n("i",{attrs:{"data-target":".reverse-unpaired-filter input"}},[e._v("\n                                "+e._s(e.l("reverse filter"))+"\n                            ")]),e._v("\n                            "+e._s(".")+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Choosing from a list of preset filters by clicking the arrow beside the filter input."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Entering regular expressions to match dataset names. See:"))+"\n                            "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions",target:"_blank"}},[e._v("\n                                "+e._s(e.l("MDN's JavaScript Regular Expression Tutorial")))]),e._v("\n                            "+e._s(e.l("Note: forward slashes (\\) are not needed."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Clearing the filters by clicking the "))+"\n                            "),n("i",{attrs:{"data-target":".clear-filters-link"}},[e._v("\n                                "+e._s(e.l("Clear filters link"))+"\n                            ")]),e._v("\n                            "+e._s(".")+"\n                        ")])]),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("To unpair individual dataset pairs, click the "))+"\n                        "),n("i",{attrs:{"data-target":".unpair-btn"}},[e._v("\n                            "+e._s(e.l("unpair buttons ("))+"\n                            "),n("span",{staticClass:"fa fa-unlink"}),e._v("\n                            "+e._s(")")+"\n                        ")]),e._v("\n                        "+e._s(e.l("Click the"))+"\n                        "),n("i",{attrs:{"data-target":".unpair-all-link"}},[e._v("\n                            "+e._s(e.l("Unpair all"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("link to unpair all pairs."))+"\n                    ")]),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l('You can include or remove the file extensions (e.g. ".fastq") from your pair names by toggling the'))+"\n                        "),n("i",{attrs:{"data-target":".remove-extensions-prompt"}},[e._v("\n                            "+e._s(e.l("Remove file extensions from pair names?"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("control."))+"\n                    ")]),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("Once your collection is complete, enter a"))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[e._v("\n                            "+e._s(e.l("name"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("and click "))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[e._v("\n                            "+e._s(e.l("Create list"))+"\n                        ")]),e._v("\n                        "+e._s(e.l(". (Note: you do not have to pair all unpaired datasets to finish.)"))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"column-headers vertically-spaced flex-column-container"},[n("div",{staticClass:"forward-column flex-column column"},[n("div",{staticClass:"column-header"},[n("div",{staticClass:"column-title"},[n("span",{staticClass:"title"},[e._v("\n                                        "+e._s(e.numOfUnpairedForwardElements)+"\n                                        "+e._s(e.l("unpaired forward"))+"\n                                    ")]),e._v(" "),n("span",{staticClass:"title-info unpaired-info"},[e._v("\n                                        "+e._s(e.numOfFilteredOutForwardElements)+" "+e._s(e.l("filtered out"))+"\n                                    ")])]),e._v(" "),n("div",{staticClass:"unpaired-filter forward-unpaired-filter float-left search-input search-query input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.forwardFilter,expression:"forwardFilter"}],attrs:{type:"text",placeholder:e.filterTextPlaceholder,title:"filterTextTitle"},domProps:{value:e.forwardFilter},on:{input:function(t){t.target.composing||(e.forwardFilter=t.target.value)}}}),e._v(" "),n("div",{staticClass:"input-group-append",attrs:{title:e.chooseFilterTitle}},[n("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),e._v(" "),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("illumina")}}},[e._v("_1")]),e._v(" "),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("Rs")}}},[e._v("_R1")]),e._v(" "),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("dot12s")}}},[e._v(".1.fastq")])])])])])]),e._v(" "),n("div",{staticClass:"paired-column flex-column no-flex column"},[n("div",{staticClass:"column-header"},[n("a",{staticClass:"clear-filters-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.clickClearFilters}},[e._v("\n                                    "+e._s(e.l("Clear Filters"))+"\n                                ")]),e._v(" "),n("br"),e._v(" "),n("a",{staticClass:"autopair-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.clickAutopair}},[e._v("\n                                    "+e._s(e.l("Auto-pair"))+"\n                                ")])])]),e._v(" "),n("div",{staticClass:"reverse-column flex-column column"},[n("div",{staticClass:"column-header"},[n("div",{staticClass:"column-title"},[n("span",{staticClass:"title"},[e._v("\n                                        "+e._s(e.numOfUnpairedReverseElements)+"\n                                        "+e._s(e.l("unpaired reverse"))+"\n                                    ")]),e._v(" "),n("span",{staticClass:"title-info unpaired-info"},[e._v("\n                                        "+e._s(e.numOfFilteredOutReverseElements)+" "+e._s(e.l("filtered out")))])]),e._v(" "),n("div",{staticClass:"unpaired-filter reverse-unpaired-filter float-left search-input search-query input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.reverseFilter,expression:"reverseFilter"}],attrs:{type:"text",placeholder:e.filterTextPlaceholder,title:"filterTextTitle"},domProps:{value:e.reverseFilter},on:{input:function(t){t.target.composing||(e.reverseFilter=t.target.value)}}}),e._v(" "),n("div",{staticClass:"input-group-append",attrs:{title:e.chooseFilterTitle}},[n("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),e._v(" "),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("illumina")}}},[e._v("_2")]),e._v(" "),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("Rs")}}},[e._v("_R2")]),e._v(" "),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.changeFilters("dot12s")}}},[e._v(".2.fastq")])])])])])])]),e._v(" "),n("splitpanes",{staticStyle:{height:"400px"},attrs:{horizontal:""}},[n("pane",[e.noUnpairedElementsDisplayed?n("div",[n("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("\n                                    "+e._s(e.l("No datasets were found matching the current filters."))+"\n                                ")])],1):e._e(),e._v(" "),n("div",{staticClass:"unpaired-columns flex-column-container scroll-container flex-row"},[n("div",{staticClass:"forward-column flex-column column truncate"},[n("ol",{staticClass:"column-datasets"},e._l(e.forwardElements,(function(t){return n("unpaired-dataset-element-view",{key:t.id,class:{selected:e.selectedForwardElement&&t.id==e.selectedForwardElement.id},attrs:{element:t},on:{"element-is-selected":e.forwardElementSelected}})})),1)]),e._v(" "),n("div",{staticClass:"paired-column flex-column no-flex column truncate"},[""!==e.forwardFilter&&""!==e.reverseFilter?n("ol",{staticClass:"column-datasets"},e._l(e.pairableElements,(function(t,i){return n("li",{key:i,staticClass:"dataset",on:{click:function(n){return e._pair(t.forward,t.reverse)}}},[e._v("\n                                            "+e._s(e.l("Pair these datasets"))+"\n                                        ")])})),0):e._e()]),e._v(" "),n("div",{staticClass:"reverse-column flex-column column truncate"},[n("ol",{staticClass:"column-datasets"},e._l(e.reverseElements,(function(t){return n("unpaired-dataset-element-view",{key:t.id,class:{selected:e.selectedReverseElement&&t.id==e.selectedReverseElement.id},attrs:{element:t},on:{"element-is-selected":e.reverseElementSelected}})})),1)])])]),e._v(" "),n("pane",[n("div",{staticClass:"column-header"},[n("div",{staticClass:"column-title paired-column-title"},[n("span",{staticClass:"title"},[e._v(" "+e._s(e.numOfPairs)+" "+e._s(e.l(" pairs")))])]),e._v(" "),n("a",{staticClass:"unpair-all-link",attrs:{href:"javascript:void(0);",role:"button"},on:{click:e.unpairAll}},[e._v("\n                                    "+e._s(e.l("Unpair all"))+"\n                                ")])]),e._v(" "),n("div",{staticClass:"paired-columns flex-column-container scroll-container flex-row"},[n("ol",{staticClass:"column-datasets"},[n("draggable",{on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.pairedElements,callback:function(t){e.pairedElements=t},expression:"pairedElements"}},e._l(e.pairedElements,(function(t){return n("paired-element-view",{key:t.id,attrs:{pair:t,"unlink-fn":e.clickUnpair(t)},on:{onPairRename:function(e){return t.name=e}}})})),1)],1)])])],1)]},proxy:!0}])})],1)])])}),[],!1,null,null,null));t.default=b.exports},function(e,t,n){"use strict";n.r(t);var i=n(595),a=n(2),r=n.n(a),o={created:function(){this.elementName=this.element.name},props:{element:{required:!0}},data:function(){return{titleDiscardButton:r()("Remove this dataset from the list"),titleElementName:r()("Click to rename"),isSelected:!1,elementName:""}},components:{ClickToEdit:n(683).a},methods:{l:function(e){return r()(e)},clickDiscard:function(){this.$emit("element-is-discarded",this.element)},toString:function(){return"ListDatasetCollectionElementView()"}},watch:{elementName:function(){this.$emit("onRename",this.elementName)}}},s=(n(1095),n(5)),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-element",on:{click:function(t){return e.$emit("element-is-selected",e.element)}}},[n("click-to-edit",{attrs:{title:e.titleElementName},model:{value:e.elementName,callback:function(t){e.elementName=t},expression:"elementName"}}),e._v(" "),n("button",{staticClass:"discard-btn btn-sm",attrs:{title:e.titleDiscardButton},on:{click:e.clickDiscard}},[e._v("\n        "+e._s(e.l("Discard"))+"\n    ")])],1)}),[],!1,null,null,null).exports,c=n(24),d=n(0),u=n.n(d),h=u.a;u.a.fn.extend({hoverhighlight:function(e,t){return e=e||"body",this.length?(h(this).each((function(){var n=h(this),i=n.data("target");i&&n.mouseover((function(n){h(i,e).css({background:t})})).mouseout((function(e){h(i).css({background:""})}))})),this):this}});var f=n(8),p=n(14),m=n(720),_=n.n(m);f.default.use(p.a);var g={mixins:[i.a],created:function(){this._instanceSetUp(),this._elementsSetUp(),this.saveOriginalNames()},components:{DatasetCollectionElementView:l,draggable:_.a},data:function(){return{state:"build",titleUndoButton:r()("Undo all reordering and discards"),titleDeselectButton:r()("De-select all selected datasets"),noElementsHeader:r()("No datasets were selected"),discardedElementsHeader:r()("No elements left. Would you like to"),invalidHeader:r()("The following selections could not be included due to problems:"),allInvalidElementsPartOne:r()("At least one element is needed for the collection. You may need to"),cancelText:r()("cancel"),startOverText:r()("start over"),allInvalidElementsPartTwo:r()("and reselect new elements."),errorText:r()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),workingElements:[],originalNamedElements:[],invalidElements:[],selectedDatasetElems:[],removeExtensions:!0,duplicateNames:[]}},computed:{atLeastOneDatasetIsSelected:function(){return this.selectedDatasetElems.length>0},getSelectedDatasetElems:function(){return this.selectedDatasetElems},returnWorkingElements:function(){return this.workingElements},noMoreValidDatasets:function(){return 0==this.workingElements.length},returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},noElementsLeft:function(){return 0==this.workingElements.length},showDuplicateError:function(){return this.duplicateNames.length>0}},methods:{l:function(e){return r()(e)},_instanceSetUp:function(){this.selectedDatasetElems=[]},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.workingElements=JSON.parse(JSON.stringify(this.initialElements.slice(0))),this._ensureElementIds(),this._validateElements(),this._mangleDuplicateNames()},_ensureElementIds:function(){return this.workingElements.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=e._uid)})),this.workingElements},_validateElements:function(){var e=this;return this.workingElements=this.workingElements.filter((function(t){var n=e._isElementInvalid(t);return n&&e.invalidElements.push(t.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?r()("is a collection, this is not allowed"):e.state===c.a.OK||c.a.NOT_READY_STATES.includes(e.state)?e.deleted||e.purged?r()("has been deleted or purged"):null:r()("has errored, is paused, or is not accessible")},_mangleDuplicateNames:function(){var e=1,t={};this.workingElements.forEach((function(n){for(var i=n.name;Object.prototype.hasOwnProperty.call(t,i);)i="".concat(n.name," (").concat(e,")"),e+=1;n.name=i,t[n.name]=!0}))},saveOriginalNames:function(){this.originalNamedElements=JSON.parse(JSON.stringify(this.workingElements))},getOriginalNames:function(){this.workingElements=JSON.parse(JSON.stringify(this.originalNamedElements))},elementSelected:function(e){this.selectedDatasetElems.includes(e.id)?this.selectedDatasetElems.splice(this.selectedDatasetElems.indexOf(e.id),1):this.selectedDatasetElems.push(e.id)},elementDiscarded:function(e){return this.$delete(this.workingElements,this.workingElements.indexOf(e)),this.workingElements},clickClearAll:function(){this.selectedDatasetElems=[]},clickedCreate:function(e){var t=this;if(this.checkForDuplicates(),"error"!==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.workingElements,e,this.hideSourceItems).done(this.oncreate).fail((function(){t.state="error"}))},checkForDuplicates:function(){var e=this,t={};this.duplicateNames=[];var n=!0;this.workingElements.forEach((function(i){Object.prototype.hasOwnProperty.call(t,i.name)&&(n=!1,e.duplicateNames.push(i.name)),t[i.name]=!0})),this.state=n?"build":"error"},reset:function(){this._instanceSetUp(),this.getOriginalNames()},toString:function(){return"ListCollectionCreator"}}},v=(n(1096),Object(s.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-collection-creator"},["error"==e.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorText)+"\n        ")])],1):n("div",[e.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.noElementsHeader)+"\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.invalidHeader)+"\n                "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0),e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),e.showDuplicateError?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n                    "+e._s(e.l("Collections cannot have duplicated names. The following list names are duplicated: "))+"\n                    "),n("ol",e._l(e.duplicateNames,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0),e._v("\n                    "+e._s(e.l("Please fix these duplicates and try again."))+"\n                ")])],1):e._e(),e._v(" "),n("collection-creator",{attrs:{oncancel:e.oncancel,"hide-source-items":e.hideSourceItems},on:{onUpdateHideSourceItems:e.onUpdateHideSourceItems,"clicked-create":e.clickedCreate},scopedSlots:e._u([{key:"help-content",fn:function(){return[n("p",[e._v("\n                        "+e._s(e.l(["Collections of datasets are permanent, ordered lists of datasets that can be passed to tools ","and workflows in order to have analyses done on each member of the entire group. This interface allows ","you to create a collection and re-order the final collection."].join("")))+"\n                    ")]),e._v(" "),n("ul",[n("li",[e._v("\n                            "+e._s(e.l("Rename elements in the list by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .name"}},[e._v("\n                                "+e._s(e.l("the existing name"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Discard elements from the final created list by clicking on the "))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .discard"}},[e._v("\n                                "+e._s(e.l("Discard"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("button."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Reorder the list by clicking and dragging elements. Select multiple elements by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element"}},[e._v("\n                                "+e._s(e.l("them"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("and you can then move those selected by dragging the entire group. Deselect them by clicking them again or by clicking the"))+"\n                            "),n("i",{attrs:{"data-target":".clear-selected"}},[e._v("\n                                "+e._s(e.l("Clear selected"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("link."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".reset"}},[e._v("\n                                "+e._s(e.l("Start over"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("link to begin again as if you had just opened the interface."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".cancel-create"}},[e._v("\n                                "+e._s(e.l("Cancel"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("button to exit the interface."))+"\n                        ")])]),e._v(" "),n("br"),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("Once your collection is complete, enter a "))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[e._v("\n                            "+e._s(e.l("name"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("and click"))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[e._v("\n                            "+e._s(e.l("Create list"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("."))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"collection-elements-controls"},[n("a",{staticClass:"reset",attrs:{href:"javascript:void(0);",role:"button",title:e.titleUndoButton},on:{click:e.reset}},[e._v("\n                            "+e._s(e.l("Start over"))+"\n                        ")]),e._v(" "),e.atLeastOneDatasetIsSelected?n("a",{staticClass:"clear-selected",attrs:{href:"javascript:void(0);",role:"button",title:e.titleDeselectButton},on:{click:e.clickClearAll}},[e._v("\n                            "+e._s(e.l("Clear selected"))+"\n                        ")]):e._e()]),e._v(" "),n("draggable",{staticClass:"collection-elements scroll-container flex-row drop-zone",on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.workingElements,callback:function(t){e.workingElements=t},expression:"workingElements"}},[e.noMoreValidDatasets?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                                "+e._s(e.discardedElementsHeader)+"\n                                "),n("a",{staticClass:"reset-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.reset}},[e._v("\n                                    "+e._s(e.startOverText)+"\n                                ")]),e._v("\n                                ?\n                            ")])],1):e._l(e.returnWorkingElements,(function(t){return n("dataset-collection-element-view",{key:t.id,class:{selected:e.getSelectedDatasetElems.includes(t.id)},attrs:{element:t},on:{"element-is-selected":e.elementSelected,"element-is-discarded":e.elementDiscarded,onRename:function(e){return t.name=e}}})}))],2)]},proxy:!0}])})],1)])])}),[],!1,null,null,null));t.default=v.exports},function(e,t,n){"use strict";n.r(t);var i=n(595),a=n(24),r=n(2),o=n.n(r),s=n(8),l=n(14);s.default.use(l.a);var c={mixins:[i.a],created:function(){this._elementsSetUp(),this.initialSuggestedName=this._guessNameForPair(this.workingElements[0],this.workingElements[1],this.removeExtensions)},data:function(){return{state:"build",errorText:o()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),noElementsHeader:o()("No datasets were selected."),allInvalidElementsPartOne:o()("Exactly two elements needed for the collection. You may need to"),cancelText:o()("cancel"),allInvalidElementsPartTwo:o()("and reselect new elements."),exactlyTwoValidElementsPartOne:o()("Two (and only two) elements are needed for the pair. You may need to "),exactlyTwoValidElementsPartTwo:o()("and reselect new elements."),invalidHeader:o()("The following selections could not be included due to problems:"),minElements:2,workingElements:[],invalidElements:[],removeExtensions:!0,initialSuggestedName:""}},computed:{returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},exactlyTwoValidElements:function(){return 2==this.workingElements.length}},methods:{l:function(e){return o()(e)},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.workingElements=JSON.parse(JSON.stringify(this.initialElements.slice(0))),this._ensureElementIds(),this._validateElements()},_ensureElementIds:function(){return this.workingElements.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=e._uid)})),this.workingElements},_validateElements:function(){var e=this;return this.workingElements=this.workingElements.filter((function(t){var n=e._isElementInvalid(t);return n&&e.invalidElements.push(t.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?o()("is a collection, this is not allowed"):e.state===a.a.OK||a.a.NOT_READY_STATES.includes(e.state)?e.deleted||e.purged?o()("has been deleted or purged"):null:o()("has errored, is paused, or is not accessible")},swapButton:function(){this.workingElements=[this.workingElements[1],this.workingElements[0]]},clickedCreate:function(e){var t=this;if("error"!==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.workingElements,e,this.hideSourceItems).done(this.oncreate).fail((function(){t.state="error"}))},toString:function(){return"PairCollectionCreator"},removeExtensionsToggle:function(){this.removeExtensions=!this.removeExtensions,this.initialSuggestedName=this._guessNameForPair(this.workingElements[0],this.workingElements[1],this.removeExtensions)},_guessNameForPair:function(e,t,n){n=n||this.removeExtensions;var i=e.name,a=t.name,r=this._naiveStartingAndEndingLCS(i,a),o=r.lastIndexOf("/");if(o>0){var s=r.slice(0,o+1);r=r.replace(s,""),i=i.replace(c,""),a=a.replace(c,"")}if(n){var l=r.lastIndexOf(".");if(l>0){var c=r.slice(l,r.length);r=r.replace(c,""),i=i.replace(c,""),a=a.replace(c,"")}}return r||"".concat(i," & ").concat(a)}}},d=(n(1097),n(5)),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pair-collection-creator"},["error"==e.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorText)+"\n        ")])],1):n("div",[e.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.noElementsHeader)+"\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.invalidHeader)+"\n                "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0),e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.exactlyTwoValidElements?n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),n("collection-creator",{attrs:{oncancel:e.oncancel,"hide-source-items":e.hideSourceItems,"suggested-name":e.initialSuggestedName},on:{onUpdateHideSourceItems:e.onUpdateHideSourceItems,"clicked-create":e.clickedCreate,"remove-extensions-toggle":e.removeExtensionsToggle},scopedSlots:e._u([{key:"help-content",fn:function(){return[n("p",[e._v("\n                        "+e._s(e.l(["Pair collections are permanent collections containing two datasets: one forward and one reverse. ","Often these are forward and reverse reads. The pair collections can be passed to tools and workflows in ","order to have analyses done on both datasets. This interface allows you to create a pair, name it, and ","swap which is forward and which reverse."].join("")))+"\n                    ")]),e._v(" "),n("ul",[n("li",[e._v("\n                            "+e._s(e.l("Click the "))+"\n                            "),n("i",{attrs:{"data-target":".swap"}},[e._v("\n                                "+e._s(e.l("Swap"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("link to make your forward dataset the reverse and the reverse dataset forward"))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click the "))+"\n                            "),n("i",{attrs:{"data-target":".cancel-create"}},[e._v("\n                                "+e._s(e.l("Cancel"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("button to exit the interface."))+"\n                        ")])]),e._v(" "),n("br"),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("Once your collection is complete, enter a "))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[e._v(" "+e._s(e.l("name")))]),e._v("\n                        "+e._s(e.l("and click "))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[e._v("\n                            "+e._s(e.l("Create list"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("."))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"collection-elements-controls"},[n("a",{staticClass:"swap",attrs:{href:"javascript:void(0);",title:"l('Swap forward and reverse datasets')"},on:{click:e.swapButton}},[e._v("\n                            "+e._s(e.l("Swap"))+"\n                        ")])]),e._v(" "),n("div",{staticClass:"collection-elements scroll-container flex-row"},e._l(e.workingElements,(function(t,i){return n("div",{key:t.id,staticClass:"collection-element"},[e._v("\n                            "+e._s(0==i?e.l("forward"):e.l("reverse"))+": "+e._s(t.name)+"\n                        ")])})),0)]},proxy:!0}])})],1):n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.exactlyTwoValidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.exactlyTwoValidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1)])])}),[],!1,null,null,null);t.default=u.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(3),l=n(6),c=n(68),d=n(18),u=o.a.Router.extend({initialize:function(e,t){this.page=e,this.options=t},executeUseRouter:function(e){var t=Object(s.getAppRoot)();return e.startsWith(t)&&(e=e.replace(t,"/")),this.push(e)},push:function(e,t){(t=t||{}).__identifer=Math.random().toString(36).substr(2),e+=-1==e.indexOf("?")?"?":"&";var n=a.a.param(t,!0);e+=n,Object(l.a)().params=t,this.navigate(e,{trigger:!0}),window.history.replaceState(window.history.state,"",window.location.pathname.replace(n,""))},execute:function(e,t,n){Object(l.a)().debug("router execute:",e,t,n);var i=c.a.parse(t.pop());t.push(i),e&&(this.authenticate(t,n)?e.apply(this,t):this.access_denied())},authenticate:function(e,t){return!0},access_denied:function(){this.page.display(new d.a.Message({status:"danger",message:"You must be logged in with proper credentials to make this request.",persistent:!0}))}});t.a=u},function(e,t,n){"use strict";n.r(t);var i=n(45),a=n(58),r=n(218),o=n(467),s=n(115),l=n(474),c=n(29),d={components:{DatasetProvider:s.c,DatasetCollectionUIWrapper:function(){return Promise.resolve().then(n.bind(null,663))},DatasetUIWrapper:l.a,LoadingSpan:c.a},props:{collectionContents:{type:Array,required:!0}}},u=n(5),h=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.collectionContents,(function(t){return n("div",{key:t.id,staticStyle:{"margin-left":"2em"},attrs:{index:1}},["hda"===t.element_type?n("DatasetProvider",{attrs:{id:t.object.id},scopedSlots:e._u([{key:"default",fn:function(e){var i=e.item,a=e.loading;return[n("div",[a?n("loading-span",{attrs:{message:"Loading datasets"}}):n("DatasetUIWrapper",{attrs:{item:i,element_identifier:t.element_identifier}})],1)]}}],null,!0)}):e._e(),e._v(" "),"dataset_collection"===t.element_type?n("DatasetCollectionUIWrapper",{attrs:{item:t,element_count:e.collectionContents.length+1}}):e._e()],1)})),0)}),[],!1,null,null,null).exports;function f(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){f(r,i,a,o,s,"next",e)}function s(e){f(r,i,a,o,s,"throw",e)}o(void 0)}))}}var m={components:{DatasetCollectionContentProvider:s.a,DatasetCollectionContents:h,DscUI:o.a},props:{item:{type:Object,required:!0},element_count:{type:Number,required:!1}},data:function(){return{expand:!1}},computed:{datasetCollection:function(){var e=this.item;return"DatasetCollectionElement"===e.model_class&&((e=this.item.object).name=this.item.element_identifier,e.contents_url=this.item.contents_url||e.contents_url,e.element_count=this.element_count,e.populated_state="ok"),new r.a(e)}},methods:{toggleExpand:function(){this.expand=!this.expand},onDelete:function(e){var t=arguments;return p(regeneratorRuntime.mark((function n(){var r,o,s,l,c,d,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.recursive,s=void 0!==o&&o,l=r.purge,c=void 0!==l&&l,n.next=4,Object(i.f)(e,s,c);case 4:if(!(d=n.sent).deleted){n.next=9;break}return u=Object.assign(e,{isDeleted:d.deleted}),n.next=9,Object(a.b)(u);case 9:case"end":return n.stop()}}),n)})))()},onUndelete:function(e){return p(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.o)(e,{deleted:!1});case 2:if(!1!==(n=t.sent).deleted){t.next=7;break}return r=Object.assign(e,{isDeleted:n.deleted}),t.next=7,Object(a.b)(r);case 7:case"end":return t.stop()}}),t)})))()},onHide:function(e){return p(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.o)(e,{visible:!1});case 2:if(!1!==(n=t.sent).visible){t.next=7;break}return r=Object.assign(e,{isVisible:n.visible}),t.next=7,Object(a.b)(r);case 7:case"end":return t.stop()}}),t)})))()},onUnhide:function(e){return p(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.o)(e,{visible:!0});case 2:if(!(n=t.sent).visible){t.next=7;break}return r=Object.assign(e,{isVisible:n.visible}),t.next=7,Object(a.b)(r);case 7:case"end":return t.stop()}}),t)})))()}}},_=Object(u.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.datasetCollection?n("DscUI",e._g(e._b({attrs:{dsc:e.datasetCollection,"show-tags":!0},on:{viewCollection:e.toggleExpand,hide:function(t){return e.onHide(e.datasetCollection)},unhide:function(t){return e.onUnhide(e.datasetCollection)},delete:function(t){return e.onDelete(e.datasetCollection,t)},undelete:function(t){return e.onUndelete(e.datasetCollection)}}},"DscUI",e.$attrs,!1),e.$listeners)):e._e(),e._v(" "),e.expand?n("DatasetCollectionContentProvider",{attrs:{id:e.datasetCollection.contents_url},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[t.loading?n("b-spinner",[e._v("Loading Dataset Collection...")]):n("DatasetCollectionContents",{attrs:{"collection-contents":i}})]}}],null,!1,3103410675)}):e._e()],1)}),[],!1,null,null,null);t.default=_.exports},function(e,t,n){"use strict";var i=n(7),a=n.n(i),r=n(8),o=n(14),s=n(6),l=n(47);r.default.use(o.a);var c={props:{registration_warning_message:{type:String,required:!1},redirect:{type:String,required:!1},terms_url:{type:String,required:!1}},data:function(){var e=Object(s.a)();return{username:null,subscribe:null,messageText:null,messageVariant:null,session_csrf_token:e.session_csrf_token,isAdmin:e.user.isAdmin(),termsRead:!1}},computed:{messageShow:function(){return null!=this.messageText},showRegistrationWarning:function(){return null!=this.registration_warning_message}},methods:{login:function(){var e=Object(l.b)();this.$emit("setRedirect","user/external_ids"),window.location=e+"login"},submit:function(){var e=this,t=Object(l.b)(),n=new URLSearchParams(window.location.search).get("custos_token");a.a.post("".concat(t,"authnz/custos/create_user?token=").concat(n)).then((function(e){e.data.redirect_uri?window.location=e.data.redirect_uri:window.location=t})).catch((function(t){e.messageVariant="danger";var n=t.response.data&&t.response.data.err_msg;e.messageText=n||"Login failed for an unknown reason."}))}}},d=n(5),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-md-center"},[n("div",{staticClass:"col",class:{"col-lg-6":!e.isAdmin}},[n("b-alert",{attrs:{show:e.showRegistrationWarning,variant:"info"},domProps:{innerHTML:e._s(e.registration_warning_message)}}),e._v(" "),n("b-alert",{attrs:{show:e.messageShow,variant:e.messageVariant},domProps:{innerHTML:e._s(e.messageText)}}),e._v(" "),n("b-form",{attrs:{id:"confirmation"},on:{submit:function(t){return t.preventDefault(),e.submit()}}},[n("b-card",{attrs:{"no-body":"",header:"Confirm new account creation"}},[n("b-card-body",[n("p",[e._v("Looks like you are about to create a new account!")]),e._v(" "),n("p",[e._v("\n                            Do you already have a Galaxy account? If so, click\n                            "),n("em",[e._v("'No, go back to login'")]),e._v(" to log in using your existing username and password to\n                            connect this account via "),n("strong",[e._v("User Preferences")]),e._v(".\n                            "),n("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/idps/custos/#link-an-existing-galaxy-account",target:"_blank"}},[e._v("More details here.")])]),e._v(" "),n("p",[e._v("\n                            If you wish to continue and create a new account, select\n                            "),n("em",[e._v("'Yes, create new account'")]),e._v(".\n                        ")]),e._v(" "),n("p",[e._v("\n                            Reminder: Registration and usage of multiple accounts is tracked and such accounts are\n                            subject to termination and data deletion on public Galaxy servers. Connect existing\n                            account now to continue to use your existing data and avoid possible loss of data.\n                        ")]),e._v(" "),n("b-form-group",[n("b-form-checkbox",{model:{value:e.termsRead,callback:function(t){e.termsRead=t},expression:"termsRead"}},[e._v("\n                                I have read and accept these terms to create a new Galaxy account.\n                            ")])],1),e._v(" "),n("b-button",{attrs:{name:"confirm",type:"submit",disabled:!e.termsRead},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Yes, create new account")]),e._v(" "),n("b-button",{attrs:{name:"cancel",type:"submit"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("No, go back to login")])],1),e._v(" "),e.isAdmin?e._e():n("b-card-footer",[e._v("\n                        Already have an account?\n                        "),n("a",{attrs:{id:"login-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Log in here.")])])],1)],1)],1),e._v(" "),e.terms_url?n("div",{staticClass:"col"},[n("b-embed",{attrs:{type:"iframe",src:e.terms_url,aspect:"1by1"}})],1):e._e()])])}),[],!1,null,null,null);t.a=u.exports},,function(e,t,n){"use strict";var i=n(3),a=n(6),r=n(586),o=n(97),s=n(29),l=n(50),c=n(33);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={components:{UtcDate:o.a,WorkflowInvocationState:r.a,LoadingSpan:s.a},props:{invocationItems:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0},noInvocationsMessage:{type:String,default:"No Workflow Invocations to display"},headerMessage:{type:String,default:""},ownerGrid:{type:Boolean,default:!0}},data:function(){return{invocationItemsModel:[],invocationFields:[{key:"workflow_id",label:"Workflow"},{key:"history_id",label:"History"},{key:"create_time",label:"Invoked"},{key:"update_time",label:"Updated"},{key:"state"},{key:"execute",label:""}],status:""}},computed:u(u({},Object(c.c)(["getWorkflowNameByInstanceId","getWorkflowByInstanceId","getHistoryNameById"])),{},{invocationItemsComputed:function(){return this.computeItems(this.invocationItems)}}),methods:u(u({},Object(l.b)(["fetchWorkflowForInstanceId","fetchHistoryForId"])),{},{computeItems:function(e){var t=this;return e.map((function(e){return t.ownerGrid&&(t.fetchWorkflowForInstanceId(e.workflow_id),t.fetchHistoryForId(e.history_id)),{id:e.id,create_time:e.create_time,update_time:e.update_time,workflow_id:e.workflow_id,history_id:e.history_id,state:e.state,_showDetails:!1}}))},swapRowDetails:function(e){e.toggleDetails()},executeWorkflow:function(e){window.location="".concat(Object(i.getAppRoot)(),"workflows/run?id=").concat(e)},switchHistory:function(e){Object(a.a)().currHistoryPanel.switchToHistory(e)}})},p=n(5),m=Object(p.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invocations-list"},[e._m(0),e._v(" "),e.headerMessage?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n        "+e._s(e.headerMessage)+"\n    ")]):e._e(),e._v(" "),e.loading?n("loading-span",{attrs:{message:"Loading workflow invocations"}}):n("div",[e.invocationItemsComputed.length?n("b-table",{attrs:{fields:e.invocationFields,items:e.invocationItemsComputed,hover:"",striped:"","caption-top":"",busy:e.loading,fixed:""},scopedSlots:e._u([{key:"row-details",fn:function(t){return[n("b-card",[n("small",{staticClass:"float-right",attrs:{"data-invocation-id":t.item.id}},[n("b",[e._v("Invocation: "+e._s(t.item.id))])]),e._v(" "),n("workflow-invocation-state",{attrs:{"invocation-id":t.item.id},on:{"invocation-cancelled":function(t){return e.$emit("reload-invocations")}}})],1)]}},{key:"cell(workflow_id)",fn:function(t){return[n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"toggle-invocation-details",attrs:{title:"Show Invocation details",href:"#"},on:{click:function(n){return n.stopPropagation(),e.swapRowDetails(t)}}},[n("b",[e._v(e._s(e.getWorkflowNameByInstanceId(t.item.workflow_id)))])])]}},{key:"cell(history_id)",fn:function(t){return[n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{id:"switch-to-history",title:"Switch to History",href:"#"},on:{click:function(n){return n.stopPropagation(),e.switchHistory(t.item.history_id)}}},[n("b",[e._v(e._s(e.getHistoryNameById(t.item.history_id)))])])]}},{key:"cell(create_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(execute)",fn:function(t){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"workflow-run btn-sm btn-primary fa fa-play",attrs:{id:"run-workflow",title:"Run Workflow"},on:{click:function(n){n.stopPropagation(),e.executeWorkflow(e.getWorkflowByInstanceId(t.item.workflow_id).id)}}})]}}]),model:{value:e.invocationItemsModel,callback:function(t){e.invocationItemsModel=t},expression:"invocationItemsModel"}}):n("b-alert",{attrs:{id:"no-invocations",variant:"info",show:""}},[e._v("\n            "+e._s(e.noInvocationsMessage)+"\n        ")])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"mb-3"},[t("span",{attrs:{id:"invocations-title"}},[this._v("Workflow Invocations")])])}],!1,null,null,null);t.a=m.exports},function(e,t,n){"use strict";var i=n(7),a=n.n(i),r=n(8),o=n(503),s=n.n(o),l=n(14),c=n(6),d=n(47);r.default.use(l.a);var u={components:{Multiselect:s.a},props:{login_page:{type:Boolean,required:!1}},data:function(){var e=Object(c.a)();return{messageText:null,messageVariant:null,enable_oidc:e.config.enable_oidc,oidc_idps:e.config.oidc,cilogon_idps:[],selected:null,rememberIdp:!1,cilogonOrCustos:null,toggle_cilogon:!1}},computed:{filtered_oidc_idps:function(){var e=Object.assign({},this.oidc_idps);return delete e.custos,delete e.cilogon,e},cilogonListShow:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")||Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")},messageShow:function(){return null!=this.messageText},cilogon_enabled:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")},custos_enabled:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")}},methods:{toggleCILogon:function(e){this.toggle_cilogon=!this.toggle_cilogon,this.cilogonOrCustos=this.toggle_cilogon?e:null},submitOIDCLogin:function(e){var t=this,n=Object(d.b)();a.a.post("".concat(n,"authnz/").concat(e,"/login")).then((function(e){e.data.redirect_uri&&(window.location=e.data.redirect_uri)})).catch((function(e){t.messageVariant="danger";var n=e.response.data&&e.response.data.err_msg;t.messageText=n||"Login failed for an unknown reason."}))},submitCILogon:function(e){var t=this,n=Object(d.b)();this.login_page&&this.setIdpPreference(),a.a.post("".concat(n,"authnz/").concat(e,"/login/?idphint=").concat(this.selected.EntityID)).then((function(t){localStorage.setItem("galaxy-provider",e),t.data.redirect_uri&&(window.location=t.data.redirect_uri)})).catch((function(e){t.messageVariant="danger";var n=e.response.data&&e.response.data.err_msg;t.messageText=n||"Login failed for an unknown reason."})).finally((function(){var e=new URLSearchParams(window.location.search);e.has("message")&&"Duplicate Email"==e.get("message")&&t.$refs.duplicateEmail.show()}))},getCILogonIdps:function(){var e=this,t=Object(d.b)();a.a.get("".concat(t,"authnz/get_cilogon_idps")).then((function(t){e.cilogon_idps=t.data,1==e.cilogon_idps.length?e.selected=e.cilogon_idps[0]:e.cilogon_idps.sort((function(e,t){return e.DisplayName>t.DisplayName?1:-1}))})).then((function(){if(e.login_page){var t=e.getIdpPreference();t&&(e.selected=e.cilogon_idps.find((function(e){return e.EntityID===t})))}}))},setIdpPreference:function(){this.rememberIdp?localStorage.setItem("galaxy-remembered-idp",this.selected.EntityID):localStorage.removeItem("galaxy-remembered-idp")},getIdpPreference:function(){return localStorage.getItem("galaxy-remembered-idp")}},created:function(){this.rememberIdp=null!==this.getIdpPreference(),this.cilogonListShow&&this.getCILogonIdps()}},h=(n(842),n(5)),f=Object(h.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{show:e.messageShow,variant:e.messageVariant},domProps:{innerHTML:e._s(e.messageText)}}),e._v(" "),n("b-form",{attrs:{id:"externalLogin"}},[n("hr",{staticClass:"my-4"}),e._v(" "),e.cilogonListShow?n("div",{staticClass:"cilogon"},[e.login_page?n("div",[n("b-form-group",{attrs:{label:"Use existing institutional login"}},[n("multiselect",{attrs:{placeholder:"Select your institution",options:e.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),e.login_page?n("b-form-group",[n("b-form-checkbox",{attrs:{id:"remember-idp"},model:{value:e.rememberIdp,callback:function(t){e.rememberIdp=t},expression:"rememberIdp"}},[e._v("\n                        Remember institution selection\n                    ")])],1):e._e(),e._v(" "),e.cilogon_enabled?n("b-button",{attrs:{disabled:null===e.selected},on:{click:function(t){return e.submitCILogon("cilogon")}}},[e._v("Sign in with Institutional Credentials*")]):e._e(),e._v(" "),Object.prototype.hasOwnProperty.call(e.oidc_idps,"custos")?n("b-button",{attrs:{disabled:null===e.selected},on:{click:function(t){return e.submitCILogon("custos")}}},[e._v("Sign in with Custos*")]):e._e()],1):n("div",[e.cilogon_enabled?n("b-button",{on:{click:function(t){return e.toggleCILogon("cilogon")}}},[e._v("Sign in with Institutional Credentials*")]):e._e(),e._v(" "),e.custos_enabled?n("b-button",{on:{click:function(t){return e.toggleCILogon("custos")}}},[e._v("Sign in with Custos*")]):e._e(),e._v(" "),e.toggle_cilogon?n("b-form-group",[n("multiselect",{attrs:{placeholder:"Select your institution",options:e.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),e.toggle_cilogon?n("b-button",{attrs:{disabled:null===e.selected},on:{click:function(t){return e.submitCILogon(e.cilogonOrCustos)}}},[e._v("Login*")]):e._e()],1):e._e()],1),e._v(" "),n("p",{staticClass:"mt-3"},[n("small",{staticClass:"text-muted"},[e._v("\n                    * Galaxy uses CILogon via Custos to enable you to log in from this organization. By clicking\n                    'Sign In', you agree to the\n                    "),n("a",{attrs:{href:"https://ca.cilogon.org/policy/privacy"}},[e._v("CILogon")]),e._v(" privacy policy and you agree to\n                    share your username, email address, and affiliation with CILogon, Custos, and Galaxy.\n                ")])])]):e._e(),e._v(" "),e._l(e.filtered_oidc_idps,(function(t,i){return n("div",{key:i,staticClass:"m-1"},[t.icon?n("span",[n("b-button",{staticClass:"d-block mt-3",attrs:{variant:"link"},on:{click:function(t){return e.submitOIDCLogin(i)}}},[n("img",{attrs:{src:t.icon,height:"45",alt:i}})])],1):n("span",[n("b-button",{staticClass:"d-block mt-3",on:{click:function(t){return e.submitOIDCLogin(i)}}},[n("i",{class:e.oidc_idps[i]}),e._v("\n                    Sign in with\n                    "+e._s(i.charAt(0).toUpperCase()+i.slice(1))+"\n                ")])],1)])}))],2)],1)}),[],!1,null,"25680a88",null);t.a=f.exports},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var i={props:{value:{required:!0,type:String},title:{required:!1,type:String}},data:function(){return{editable:!1,localValue:this.value}},watch:{localValue:function(e){this.$emit("input",e)},value:function(e){this.localValue=e}}},a=(n(1094),n(5)),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.editable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],staticClass:"click-to-edit-input",attrs:{contenteditable:""},domProps:{value:e.localValue},on:{blur:function(t){e.editable=!1},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editable=!1},input:function(t){t.target.composing||(e.localValue=t.target.value)}}}):n("label",{on:{click:function(t){e.editable=!0}}},[e._v("\n    "+e._s(e.localValue)+"\n")])}),[],!1,null,null,null);t.a=r.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(458);n.n(i).a},,function(e,t,n){"use strict";var i=n(460);n.n(i).a},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(461);n.n(i).a},function(e,t,n){"use strict";var i=n(462);n.n(i).a},function(e,t,n){"use strict";var i=n(463);n.n(i).a},function(e,t,n){"use strict";var i=n(464);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(676);n.n(i).a},function(e,t,n){"use strict";var i=n(677);n.n(i).a},function(e,t,n){"use strict";var i=n(678);n.n(i).a},function(e,t,n){"use strict";var i=n(679);n.n(i).a},function(e,t,n){"use strict";var i=n(680);n.n(i).a},function(e,t,n){"use strict";var i=n(681);n.n(i).a},function(e,t,n){"use strict";var i=n(682);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(512),n(525),e.exports=n(2166)},function(e,t,n){"use strict";var i=n(734);n.n(i).a},function(e,t,n){"use strict";var i=n(735);n.n(i).a},function(e,t,n){"use strict";var i=n(736);n.n(i).a},function(e,t,n){"use strict";var i=n(737);n.n(i).a},function(e,t,n){"use strict";var i=n(738);n.n(i).a},function(e,t,n){"use strict";var i=n(739);n.n(i).a},function(e,t,n){"use strict";var i=n(740);n.n(i).a},function(e,t,n){"use strict";var i=n(741);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(742);n.n(i).a},,function(e,t,n){"use strict";var i=n(743);n.n(i).a},function(e,t,n){"use strict";var i=n(744);n.n(i).a},function(e,t,n){"use strict";var i=n(745);n.n(i).a},function(e,t,n){"use strict";var i=n(746);n.n(i).a},,function(e,t,n){var i,a,r;!function(o){"use strict";a=[n(0)],void 0===(r="function"==typeof(i=function(e,t){
/*!
 * jsTree 3.0.3
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
if(e.jstree)return;var n,i,a=0,r=!1,o=!1,s=!1,l=[],c=e("script:last").attr("src"),d=document,u=d.createElement("LI");u.setAttribute("role","treeitem"),(n=d.createElement("I")).className="jstree-icon jstree-ocl",u.appendChild(n),(n=d.createElement("A")).className="jstree-anchor",n.setAttribute("href","#"),(i=d.createElement("I")).className="jstree-icon jstree-themeicon",n.appendChild(i),u.appendChild(n),n=i=null,e.jstree={version:"3.0.3",defaults:{plugins:[]},plugins:{},path:c&&-1!==c.indexOf("/")?c.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},e.jstree.create=function(t,n){var i=new e.jstree.core(++a),r=n;return n=e.extend(!0,{},e.jstree.defaults,n),r&&r.plugins&&(n.plugins=r.plugins),e.each(n.plugins,(function(e,t){"core"!==e&&(i=i.plugin(t,n[t]))})),i.init(t,n),i},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[]}}},e.jstree.reference=function(t){var n=null,i=null;if(t&&t.id&&(t=t.id),!i||!i.length)try{i=e(t)}catch(e){}if(!i||!i.length)try{i=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?n=i:e(".jstree").each((function(){var i=e(this).data("jstree");if(i&&i._model.data[t])return n=i,!1})),n},e.fn.jstree=function(n){var i="string"==typeof n,a=Array.prototype.slice.call(arguments,1),r=null;return this.each((function(){var o=e.jstree.reference(this),s=i&&o?o[n]:null;if(r=i&&s?s.apply(o,a):null,o||i||n!==t&&!e.isPlainObject(n)||e(this).data("jstree",new e.jstree.create(this,n)),(o&&!i||!0===n)&&(r=o||!1),null!==r&&r!==t)return!1})),null!==r&&r!==t?r:this},e.expr[":"].jstree=e.expr.createPseudo((function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}})),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},e.jstree.core.prototype={plugin:function(t,n){var i=e.jstree.plugins[t];return i?(this._data[t]={},i.prototype=this,new i(n,this)):this},init:function(t,n){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this.element.bind("destroyed",e.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter((function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))})).remove(),this.element.html("<ul class='jstree-container-ul jstree-children'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){e||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",(function(){return this.className.replace(/jstree[^ ]*|$/gi,"")})),this.element=null},bind:function(){this.element.on("dblclick.jstree",(function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}})).on("click.jstree",".jstree-ocl",e.proxy((function(e){this.toggle_node(e.target)}),this)).on("click.jstree",".jstree-anchor",e.proxy((function(t){t.preventDefault(),e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)}),this)).on("keydown.jstree",".jstree-anchor",e.proxy((function(t){if("INPUT"===t.target.tagName)return!0;var n=null;switch(t.which){case 13:case 32:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_prev_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 38:t.preventDefault(),(n=this.get_prev_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,(function(e){this.get_node(e,!0).children(".jstree-anchor").focus()})):(n=this.get_next_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 40:t.preventDefault(),(n=this.get_next_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 46:t.preventDefault(),(n=this.get_node(t.currentTarget))&&n.id&&"#"!==n.id&&(n=this.is_selected(n)?this.get_selected():n);break;case 113:t.preventDefault(),n=this.get_node(t.currentTarget)}}),this)).on("load_node.jstree",e.proxy((function(t,n){if(n.status&&("#"!==n.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var i,a,r=[];for(i=0,a=this._data.core.selected.length;i<a;i++)r=r.concat(this._model.data[this._data.core.selected[i]].parents);for(i=0,a=(r=e.vakata.array_unique(r)).length;i<a;i++)this.open_node(r[i],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(e.proxy((function(){this.trigger("ready")}),this),0)}}),this)).on("init.jstree",e.proxy((function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)}),this)).on("loading.jstree",e.proxy((function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()}),this)).on("blur.jstree",".jstree-anchor",e.proxy((function(t){e(t.currentTarget).filter(".jstree-hovered").mouseleave()}),this)).on("focus.jstree",".jstree-anchor",e.proxy((function(t){this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter()}),this)).on("mouseenter.jstree",".jstree-anchor",e.proxy((function(e){this.hover_node(e.currentTarget)}),this)).on("mouseleave.jstree",".jstree-anchor",e.proxy((function(e){this.dehover_node(e.currentTarget)}),this))},unbind:function(){this.element.off(".jstree"),e(document).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children:eq(0)")},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){var i;t&&t.id&&(t=t.id);try{if(this._model.data[t])t=this._model.data[t];else if(((i=e(t,this.element)).length||(i=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=e(t,this.element)).length||!i.hasClass("jstree"))return!1;t=this._model.data["#"]}return n&&(t="#"===t.id?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(e,t,n){if(!(e=e.parents?e:this.get_node(e))||"#"===e.id||!e.parents)return!1;var i,a,r=[];for(r.push(n?e.id:e.text),i=0,a=e.parents.length;i<a;i++)r.push(n?e.parents[i]:this.get_text(e.parents[i]));return r=r.reverse().slice(1),t?r.join(t):r},get_next_dom:function(t,n){var i;return(t=this.get_node(t,!0))[0]===this.element[0]?!!(i=this._firstChild(this.get_container_ul()[0]))&&e(i):!(!t||!t.length)&&(n?!!(i=this._nextSibling(t[0]))&&e(i):t.hasClass("jstree-open")?!!(i=this._firstChild(t.children(".jstree-children")[0]))&&e(i):null!==(i=this._nextSibling(t[0]))?e(i):t.parentsUntil(".jstree",".jstree-node").next(".jstree-node").eq(0))},get_prev_dom:function(t,n){var i;if((t=this.get_node(t,!0))[0]===this.element[0])return!!(i=this.get_container_ul()[0].lastChild)&&e(i);if(!t||!t.length)return!1;if(n)return!!(i=this._previousSibling(t[0]))&&e(i);if(null!==(i=this._previousSibling(t[0]))){for(t=e(i);t.hasClass("jstree-open");)t=t.children(".jstree-children:eq(0)").children(".jstree-node:last");return t}return!(!(i=t[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&e(i)},get_parent:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var i,a,r,o,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,i=0,a=t.children_d.length;i<a;i++){for(r=0,o=t.parents.length;r<o;r++)this._model.data[t.parents[r]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[r]].children_d,t.children_d[i]);this._model.data[t.children_d[i]].state.selected&&(s=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[i])),delete this._model.data[t.children_d[i]]}t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading"),this._load_node(t,e.proxy((function(e){(t=this._model.data[t.id]).state.loading=!1,t.state.loaded=e;var i=this.get_node(t,!0);t.state.loaded&&!t.children.length&&i&&i.length&&!i.hasClass("jstree-leaf")&&i.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),i.removeClass("jstree-loading"),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)}),this)),!0},_load_nodes:function(e,t,n){var i,a,r=!0,o=function(){this._load_nodes(e,t,!0)},s=this._model.data;for(i=0,a=e.length;i<a;i++)!s[e[i]]||s[e[i]].state.loaded&&n||(this.is_loading(e[i])||this.load_node(e[i],o),r=!1);r&&t&&!t.done&&(t.call(this,e),t.done=!0)},_load_node:function(t,n){var i,a=this.settings.core.data;return a?e.isFunction(a)?a.call(this,t,e.proxy((function(i){!1===i&&n.call(this,!1),this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(i):i,(function(e){n.call(this,e)}))}),this)):"object"==typeof a?a.url?(a=e.extend(!0,{},a),e.isFunction(a.url)&&(a.url=a.url.call(this,t)),e.isFunction(a.data)&&(a.data=a.data.call(this,t)),e.ajax(a).done(e.proxy((function(i,a,r){var o=r.getResponseHeader("Content-Type");return-1!==o.indexOf("json")||"object"==typeof i?this._append_json_data(t,i,(function(e){n.call(this,e)})):-1!==o.indexOf("html")||"string"==typeof i?this._append_html_data(t,e(i),(function(e){n.call(this,e)})):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:r})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))}),this)).fail(e.proxy((function(e){n.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)}),this))):(i=e.isArray(a)||e.isPlainObject(a)?JSON.parse(JSON.stringify(a)):a,"#"===t.id?this._append_json_data(t,i,(function(e){n.call(this,e)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof a?"#"===t.id?this._append_html_data(t,e(a),(function(e){n.call(this,e)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):"#"===t.id?this._append_html_data(t,this._data.core.original_container_html.clone(!0),(function(e){n.call(this,e)})):n.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,n,i){(t=this.get_node(t)).children=[],t.children_d=[];var a,r,o,s=n.is("ul")?n.children():n,l=t.id,c=[],d=[],u=this._model.data,h=u[l],f=this._data.core.selected.length;for(s.each(e.proxy((function(t,n){(a=this._parse_model_from_html(e(n),l,h.parents.concat()))&&(c.push(a),d.push(a),u[a].children_d.length&&(d=d.concat(u[a].children_d)))}),this)),h.children=c,h.children_d=d,r=0,o=h.parents.length;r<o;r++)u[h.parents[r]].children_d=u[h.parents[r]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(t,n,i){(t=this.get_node(t)).children=[],t.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),e.isArray(n)||(n=[n]);var a=null,r={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var n,i,a,r,o=e.dat,s=e.par,l=[],c=[],d=[],u=e.df,h=e.t_id,f=e.t_cnt,p=e.m,m=p[s],_=e.sel,g=function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l=e.id.toString(),c={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in u)u.hasOwnProperty(a)&&(c.state[a]=u[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),e&&e.data&&(c.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(c.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(c.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(c.li_attr[a]=e.li_attr[a]);if(c.li_attr.id||(c.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(c.a_attr[a]=e.a_attr[a]);for(e&&e.children&&!0===e.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]),p[c.id]=c,a=0,r=c.children.length;a<r;a++)o=g(p[c.children[a]],c.id,i),s=p[o],c.children_d.push(o),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d));return delete e.data,delete e.children,p[c.id].original=e,c.state.selected&&d.push(c.id),c.id},v=function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l,c=!1;do{c="j"+h+"_"+ ++f}while(p[c]);for(a in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(a)&&(l.state[a]=u[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,r=e.children.length;a<r;a++)o=v(e.children[a],l.id,i),s=p[o],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,p[l.id]=l,l.state.selected&&d.push(l.id),l.id};if(o.length&&o[0].id!==t&&o[0].parent!==t){for(i=0,a=o.length;i<a;i++)o[i].children||(o[i].children=[]),p[o[i].id.toString()]=o[i];for(i=0,a=o.length;i<a;i++)p[o[i].parent.toString()].children.push(o[i].id.toString()),m.children_d.push(o[i].id.toString());for(i=0,a=m.children.length;i<a;i++)n=g(p[m.children[i]],s,m.parents.concat()),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d));for(i=0,a=m.parents.length;i<a;i++)p[m.parents[i]].children_d=p[m.parents[i]].children_d.concat(c);r={cnt:f,mod:p,sel:_,par:s,dpc:c,add:d}}else{for(i=0,a=o.length;i<a;i++)(n=v(o[i],s,m.parents.concat()))&&(l.push(n),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d)));for(m.children=l,m.children_d=c,i=0,a=m.parents.length;i<a;i++)p[m.parents[i]].children_d=p[m.parents[i]].children_d.concat(c);r={cnt:f,mod:p,sel:_,par:s,dpc:c,add:d}}return r},s=function(t,n){if(this._cnt=t.cnt,this._model.data=t.mod,n){var a,r,o=t.add,s=t.sel,l=this._data.core.selected.slice(),c=this._model.data;if(s.length!==l.length||e.vakata.array_unique(s.concat(l)).length!==s.length){for(a=0,r=s.length;a<r;a++)-1===e.inArray(s[a],o)&&-1===e.inArray(s[a],l)&&(c[s[a]].state.selected=!1);for(a=0,r=l.length;a<r;a++)-1===e.inArray(l[a],s)&&(c[l[a]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),"#"!==t.par?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString().replace(/return ([^;}]+)[\s;}]+$/,"postMessage($1);}")],{type:"text/javascript"}))),(a=new window.Worker(this._wrk)).onmessage=e.proxy((function(e){s.call(this,e.data,!0),this._data.core.working=!1,this._data.core.worker_queue.length&&this._append_json_data.apply(this,this._data.core.worker_queue.shift())}),this),this._data.core.working?this._data.core.worker_queue.push([t,n,i]):(this._data.core.working=!0,a.postMessage(r))}catch(e){s.call(this,o(r),!1)}else s.call(this,o(r),!1)},_parse_model_from_html:function(t,n,i){i=i?[].concat(i):[],n&&i.unshift(n);var a,r,o,s,l,c=this._model.data,d={id:!1,text:!1,icon:!0,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(d.state[o]=this._model.default_state[o]);if(s=e.vakata.attributes(t,!0),e.each(s,(function(t,n){if(!(n=e.trim(n)).length)return!0;d.li_attr[t]=n,"id"===t&&(d.id=n.toString())})),(s=t.children("a").eq(0)).length&&(s=e.vakata.attributes(s,!0),e.each(s,(function(t,n){(n=e.trim(n)).length&&(d.a_attr[t]=n)}))),(s=t.children("a:eq(0)").length?t.children("a:eq(0)").clone():t.clone()).children("ins, i, ul").remove(),s=s.html(),s=e("<div />").html(s),d.text=this.settings.core.force_text?s.text():s.html(),s=t.data(),d.data=s?e.extend(!0,{},s):null,d.state.opened=t.hasClass("jstree-open"),d.state.selected=t.children("a").hasClass("jstree-clicked"),d.state.disabled=t.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(o in d.data.jstree)d.data.jstree.hasOwnProperty(o)&&(d.state[o]=d.data.jstree[o]);(s=t.children("a").children(".jstree-themeicon")).length&&(d.icon=!s.hasClass("jstree-themeicon-hidden")&&s.attr("rel")),d.state.icon&&(d.icon=d.state.icon),s=t.children("ul").children("li");do{l="j"+this._id+"_"+ ++this._cnt}while(c[l]);return d.id=d.li_attr.id?d.li_attr.id.toString():l,s.length?(s.each(e.proxy((function(t,n){a=this._parse_model_from_html(e(n),d.id,i),r=this._model.data[a],d.children.push(a),r.children_d.length&&(d.children_d=d.children_d.concat(r.children_d))}),this)),d.children_d=d.children_d.concat(d.children)):t.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr.class&&(d.li_attr.class=d.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),d.a_attr.class&&(d.a_attr.class=d.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l=e.id.toString(),c=this._model.data,d=this._model.default_state,u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in d)d.hasOwnProperty(a)&&(u.state[a]=d[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),e&&e.data&&(u.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(u.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(u.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(u.li_attr[a]=e.li_attr[a]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(u.a_attr[a]=e.a_attr[a]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),c[u.id]=u,a=0,r=u.children.length;a<r;a++)s=c[o=this._parse_model_from_flat_json(c[u.children[a]],u.id,i)],u.children_d.push(o),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete e.data,delete e.children,c[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l,c=!1,d=this._model.data,u=this._model.default_state;do{c="j"+this._id+"_"+ ++this._cnt}while(d[c]);for(a in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(a)&&(l.state[a]=u[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,r=e.children.length;a<r;a++)s=d[o=this._parse_model_from_json(e.children[a],l.id,i)],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,d[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e,t,n,i=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),a=document.createElement("UL");for(t=0,n=i.length;t<n;t++)(e=this.redraw_node(i[t],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&a.appendChild(e);this._model.force_full_redraw&&(a.className=this.get_container_ul()[0].className,this.element.empty().append(a)),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:i})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(t,n,i){var a=this.get_node(t),r=!1,o=!1,s=!1,l=!1,c=!1,d=!1,h="",f=document,p=this._model.data,m=!1,_=!1,g=null;if(!a)return!1;if("#"===a.id)return this.redraw(!0);if(n=n||0===a.children.length,t=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(a.id[0])?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):document.getElementById(a.id))t=e(t),i||((r=t.parent().parent()[0])===this.element[0]&&(r=null),o=t.index()),n||!a.children.length||t.children(".jstree-children").length||(n=!0),n||(s=t.children(".jstree-children")[0]),_=t.attr("aria-selected"),m=t.children(".jstree-anchor")[0]===document.activeElement,t.remove();else if(n=!0,!i){if(!(null===(r="#"!==a.parent?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||r&&p[a.parent].state.opened))return!1;o=e.inArray(a.id,null===r?p["#"].children:p[a.parent].children)}for(l in t=u.cloneNode(!0),h="jstree-node ",a.li_attr)if(a.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?t.setAttribute(l,a.li_attr[l]):h+=a.li_attr[l]}for(c in _&&"false"!==_&&t.setAttribute("aria-selected",!0),a.state.loaded&&!a.children.length?h+=" jstree-leaf":(h+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),null!==a.parent&&p[a.parent].children[p[a.parent].children.length-1]===a.id&&(h+=" jstree-last"),t.id=a.id,t.className=h,h=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":""),a.a_attr)if(a.a_attr.hasOwnProperty(c)){if("href"===c&&"#"===a.a_attr[c])continue;"class"!==c?t.childNodes[1].setAttribute(c,a.a_attr[c]):h+=" "+a.a_attr[c]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(a.icon&&!0!==a.icon||!1===a.icon)&&(!1===a.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===a.icon.indexOf("/")&&-1===a.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+a.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(f.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,n&&a.children.length&&a.state.opened&&a.state.loaded){for((d=f.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",l=0,c=a.children.length;l<c;l++)d.appendChild(this.redraw_node(a.children[l],n,!0));t.appendChild(d)}if(s&&t.appendChild(s),!i){for(r||(r=this.element[0]),l=0,c=r.childNodes.length;l<c;l++)if(r.childNodes[l]&&r.childNodes[l].className&&-1!==r.childNodes[l].className.indexOf("jstree-children")){g=r.childNodes[l];break}g||((g=f.createElement("UL")).setAttribute("role","group"),g.className="jstree-children",r.appendChild(g)),o<(r=g).childNodes.length?r.insertBefore(t,r.childNodes[o]):r.appendChild(t),m&&t.childNodes[1].focus()}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy((function(){this.open_node(a.id,!1,0)}),this),0)),t},open_node:function(n,i,a){var r,o,s,l;if(e.isArray(n)){for(r=0,o=(n=n.slice()).length;r<o;r++)this.open_node(n[r],i,a);return!0}if(!(n=this.get_node(n))||"#"===n.id)return!1;if(a=a===t?this.settings.core.animation:a,!this.is_closed(n))return i&&i.call(this,n,!1),!1;if(this.is_loaded(n))s=this.get_node(n,!0),l=this,s.length&&(n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&(n.state.opened=!0,this.redraw_node(n,!0),s=this.get_node(n,!0)),a?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(a,(function(){this.style.display="",l.trigger("after_open",{node:n})}))):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,i&&i.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),a&&s.length||this.trigger("after_open",{node:n});else{if(this.is_loading(n))return setTimeout(e.proxy((function(){this.open_node(n,i,a)}),this),500);this.load_node(n,(function(e,t){return t?this.open_node(e,i,a):!!i&&i.call(this,e,!1)}))}},_open_to:function(t){if(!(t=this.get_node(t))||"#"===t.id)return!1;var n,i,a=t.parents;for(n=0,i=a.length;n<i;n+=1)"#"!==n&&this.open_node(a[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,i){var a,r,o,s;if(e.isArray(n)){for(a=0,r=(n=n.slice()).length;a<r;a++)this.close_node(n[a],i);return!0}return!(!(n=this.get_node(n))||"#"===n.id)&&(!this.is_closed(n)&&(i=i===t?this.settings.core.animation:i,o=this,(s=this.get_node(n,!0)).length&&(i?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,(function(){this.style.display="",s.children(".jstree-children").remove(),o.trigger("after_close",{node:n})})):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove())),n.state.opened=!1,this.trigger("close_node",{node:n}),void(i&&s.length||this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(e,t,n){if(e||(e="#"),!(e=this.get_node(e)))return!1;var i,a,r,o="#"===e.id?this.get_container_ul():this.get_node(e,!0);if(!o.length){for(i=0,a=e.children_d.length;i<a;i++)this.is_closed(this._model.data[e.children_d[i]])&&(this._model.data[e.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||o,r=this,(o=this.is_closed(e)?o.find(".jstree-closed").addBack():o.find(".jstree-closed")).each((function(){r.open_node(this,(function(e,i){i&&this.is_parent(e)&&this.open_all(e,t,n)}),t||0)})),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,n){if(t||(t="#"),!(t=this.get_node(t)))return!1;var i,a,r="#"===t.id?this.get_container_ul():this.get_node(t,!0),o=this;if(!r.length){for(i=0,a=t.children_d.length;i<a;i++)this._model.data[t.children_d[i]].state.opened=!1;return this.trigger("close_all",{node:t})}r=this.is_open(t)?r.find(".jstree-open").addBack():r.find(".jstree-open"),e(r.get().reverse()).each((function(){o.close_node(this,n||0)})),this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.enable_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled"),this.trigger("enable_node",{node:t})},disable_node:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.disable_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled"),this.trigger("disable_node",{node:t})},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var i,a,r=this.get_node(e).id,o=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(i=0,a=s.length;i<a;i+=1)s[i]===r&&(l=!l),s[i]===o&&(l=!l),l||s[i]===r||s[i]===o?this.select_node(s[i],!1,!1,n):this.deselect_node(s[i],!1,n)}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout((function(){n.attr("aria-activedescendant",e[0].id),e.attr("aria-selected",!0)}),0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,n,i,a){var r,o,s;if(e.isArray(t)){for(o=0,s=(t=t.slice()).length;o<s;o++)this.select_node(t[o],n,i,a);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;r=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),i||(r=this._open_to(t)),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:a}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:a}))},deselect_node:function(t,n,i){var a,r,o;if(e.isArray(t)){for(a=0,r=(t=t.slice()).length;a<r;a++)this.deselect_node(t[a],n,i);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;o=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),o.length&&o.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:i}))},select_all:function(e){var t,n,i=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:i})},deselect_all:function(e){var t,n,i=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked"),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy((function(e){return this.get_node(e)}),this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,i,a,r,o=this.get_selected(!0),s={};for(n=0,i=o.length;n<i;n++)s[o[n].id]=o[n];for(n=0,i=o.length;n<i;n++)for(a=0,r=o[n].children_d.length;a<r;a++)s[o[n].children_d[a]]&&delete s[o[n].children_d[a]];for(n in o=[],s)s.hasOwnProperty(n)&&o.push(n);return t?e.map(o,e.proxy((function(e){return this.get_node(e)}),this)):o},get_bottom_selected:function(t){var n,i,a=this.get_selected(!0),r=[];for(n=0,i=a.length;n<i;n++)a[n].children.length||r.push(a[n].id);return t?e.map(r,e.proxy((function(e){return this.get_node(e)}),this)):r},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},
/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&"#"!==e&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(n,i){if(n){if(n.core){var a,r,o;if(n.core.open)return e.isArray(n.core.open)?(a=!0,!1,r=this,e.each(n.core.open.concat([]),(function(t,o){r.get_node(o)&&(r.is_loaded(o)?(r.is_closed(o)&&r.open_node(o,!1,0),n&&n.core&&n.core.open&&e.vakata.array_remove_item(n.core.open,o)):(r.is_loading(o)||r.open_node(o,e.proxy((function(t,a){!a&&n&&n.core&&n.core.open&&e.vakata.array_remove_item(n.core.open,t.id),this.set_state(n,i)}),r),0),a=!1))})),a&&(delete n.core.open,this.set_state(n,i)),!1):(delete n.core.open,this.set_state(n,i),!1);if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,i),!1;
/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/if(n.core.selected)return o=this,this.deselect_all(),e.each(n.core.selected,(function(e,t){o.select_node(t)})),delete n.core.selected,this.set_state(n,i),!1;if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,i),!1}return!e.isEmptyObject(n)||(n=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var i=this.get_container_ul()[0].className;t||this.element.html("<ul class='"+i+"'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.load_node("#",(function(t,n){n&&(this.get_container_ul()[0].className=i,this.set_state(e.extend(!0,{},this._data.core.state),(function(){this.trigger("refresh")}))),this._data.core.state=null}))},refresh_node:function(t){if(!(t=this.get_node(t))||"#"===t.id)return!1;var n=[],i=[];this._data.core.selected.concat([]);i.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each((function(){n.push(this.id)})),this._load_nodes(i,e.proxy((function(e){this.open_node(n,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})}),this))},set_id:function(t,n){if(!(t=this.get_node(t))||"#"===t.id)return!1;var i,a,r=this._model.data;for(n=n.toString(),r[t.parent].children[e.inArray(t.id,r[t.parent].children)]=n,i=0,a=t.parents.length;i<a;i++)r[t.parents[i]].children_d[e.inArray(t.id,r[t.parents[i]].children_d)]=n;for(i=0,a=t.children.length;i<a;i++)r[t.children[i]].parent=n;for(i=0,a=t.children_d.length;i<a;i++)r[t.children_d[i]].parents[e.inArray(t.id,r[t.children_d[i]].parents)]=n;return-1!==(i=e.inArray(t.id,this._data.core.selected))&&(this._data.core.selected[i]=n),(i=this.get_node(t.id,!0))&&i.attr("id",n),delete r[t.id],t.id=n,r[n]=t,!0},get_text:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.text},set_text:function(t,n){var i,a;if(e.isArray(t)){for(i=0,a=(t=t.slice()).length;i<a;i++)this.set_text(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(e,t,n){if(!(e=this.get_node(e||"#")))return!1;t&&t.flat&&!n&&(n=[]);var i,a,r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:e.li_attr,a_attr:e.a_attr,state:{},data:(!t||!t.no_data)&&e.data};if(t&&t.flat?r.parent=e.parent:r.children=[],!t||!t.no_state)for(i in e.state)e.state.hasOwnProperty(i)&&(r.state[i]=e.state[i]);if(t&&t.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id),t&&t.flat&&"#"!==e.id&&n.push(r),!t||!t.no_children)for(i=0,a=e.children.length;i<a;i++)t&&t.flat?this.get_json(e.children[i],t,n):r.children.push(this.get_json(e.children[i],t));return t&&t.flat?n:"#"===e.id?r.children:r},create_node:function(n,i,a,r,o){if(null===n&&(n="#"),!(n=this.get_node(n)))return!1;if(!(a=a===t?"last":a).toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,(function(){this.create_node(n,i,a,r,!0)}));var s,l,c,d;switch(i||(i={text:this.get_string("New node")}),i.text===t&&(i.text=this.get_string("New node")),"#"===n.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":s=this.get_node(n.parent),a=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),a=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":a=0;break;case"last":a=n.children.length;break;default:a||(a=0)}if(a>n.children.length&&(a=n.children.length),i.id||(i.id=!0),!this.check("create_node",i,n,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===i.id&&delete i.id,!(i=this._parse_model_from_json(i,n.id,n.parents.concat())))return!1;for(s=this.get_node(i),(l=[]).push(i),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),c=0,d=n.parents.length;c<d;c++)this._model.data[n.parents[c]].children_d=this._model.data[n.parents[c]].children_d.concat(l);for(i=s,s=[],c=0,d=n.children.length;c<d;c++)s[c>=a?c+1:c]=n.children[c];return s[a]=i.id,n.children=s,this.redraw_node(n,!0),r&&r.call(this,this.get_node(i)),this.trigger("create_node",{node:this.get_node(i),parent:n.id,position:a}),i.id},rename_node:function(t,n){var i,a,r;if(e.isArray(t)){for(i=0,a=(t=t.slice()).length;i<a;i++)this.rename_node(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(r=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:r}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,i,a,r,o,s,l,c,d,u;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;if(a=this.get_node(t.parent),r=e.inArray(t.id,a.children),u=!1,!this.check("delete_node",t,a,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==r&&(a.children=e.vakata.array_remove(a.children,r)),(o=t.children_d.concat([])).push(t.id),c=0,d=o.length;c<d;c++){for(s=0,l=t.parents.length;s<l;s++)-1!==(r=e.inArray(o[c],this._model.data[t.parents[s]].children_d))&&(this._model.data[t.parents[s]].children_d=e.vakata.array_remove(this._model.data[t.parents[s]].children_d,r));this._model.data[o[c]].state.selected&&(u=!0,-1!==(r=e.inArray(o[c],this._data.core.selected))&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,r)))}for(this.trigger("delete_node",{node:t,parent:a.id}),u&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:a.id}),c=0,d=o.length;c<d;c++)delete this._model.data[o[c]];return this.redraw_node(a,!0),!0},check:function(t,n,i,a,r){n=n&&n.id?n:this.get_node(n),i=i&&i.id?i:this.get_node(i);var o=t.match(/^move_node|copy_node|create_node$/i)?i:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||r&&r.is_multi||n.id!==i.id&&e.inArray(n.id,i.children)!==a&&-1===e.inArray(i.id,n.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(!1===o.functions[t]||!0===o.functions[t])?(!1===o.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),o.functions[t]):!(!1===s||e.isFunction(s)&&!1===s.call(this,t,n,i,a,r)||s&&!1===s[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,i,a,r,o){var s,l,c,d,u,h,f,p,m,_,g,v,y,b;if(i=this.get_node(i),a=a===t?0:a,!i)return!1;if(!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,(function(){this.move_node(n,i,a,r,!0)}));if(e.isArray(n)){for(s=0,l=(n=n.reverse().slice()).length;s<l;s++)this.move_node(n[s],i,a,r,o);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;if(c=(n.parent||"#").toString(),u=a.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,f=!(h=n.instance?n.instance:this._model.data[n.id]?this:e.jstree.reference(n.id))||!h._id||this._id!==h._id,d=h&&h._id&&c&&h._model.data[c]&&h._model.data[c].children?e.inArray(n.id,h._model.data[c].children):-1,f)return!!this.copy_node(n,i,a,r,o)&&(h&&h.delete_node(n),!0);switch("#"===u.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(i.id,u.children);break;case"after":a=e.inArray(i.id,u.children)+1;break;case"inside":case"first":a=0;break;case"last":a=u.children.length;break;default:a||(a=0)}if(a>u.children.length&&(a=u.children.length),!this.check("move_node",n,u,a,{core:!0,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===u.id){for(p=u.children.concat(),-1!==(m=e.inArray(n.id,p))&&(p=e.vakata.array_remove(p,m),a>m&&a--),m=[],_=0,g=p.length;_<g;_++)m[_>=a?_+1:_]=p[_];m[a]=n.id,u.children=m,this._node_changed(u.id),this.redraw("#"===u.id)}else{for((m=n.children_d.concat()).push(n.id),_=0,g=n.parents.length;_<g;_++){for(p=[],v=0,y=(b=h._model.data[n.parents[_]].children_d).length;v<y;v++)-1===e.inArray(b[v],m)&&p.push(b[v]);h._model.data[n.parents[_]].children_d=p}for(h._model.data[c].children=e.vakata.array_remove_item(h._model.data[c].children,n.id),_=0,g=u.parents.length;_<g;_++)this._model.data[u.parents[_]].children_d=this._model.data[u.parents[_]].children_d.concat(m);for(p=[],_=0,g=u.children.length;_<g;_++)p[_>=a?_+1:_]=u.children[_];for(p[a]=n.id,u.children=p,u.children_d.push(n.id),u.children_d=u.children_d.concat(n.children_d),n.parent=u.id,(m=u.parents.concat()).unshift(u.id),b=n.parents.length,n.parents=m,m=m.concat(),_=0,g=n.children_d.length;_<g;_++)this._model.data[n.children_d[_]].parents=this._model.data[n.children_d[_]].parents.slice(0,-1*b),Array.prototype.push.apply(this._model.data[n.children_d[_]].parents,m);this._node_changed(c),this._node_changed(u.id),this.redraw("#"===c||"#"===u.id)}return r&&r.call(this,n,u,a),this.trigger("move_node",{node:n,parent:u.id,position:a,old_parent:c,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),!0},copy_node:function(n,i,a,r,o){var s,l,c,d,u,h,f,p,m,_;if(i=this.get_node(i),a=a===t?0:a,!i)return!1;if(!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,(function(){this.copy_node(n,i,a,r,!0)}));if(e.isArray(n)){for(s=0,l=(n=n.reverse().slice()).length;s<l;s++)this.copy_node(n[s],i,a,r,o);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;switch(p=(n.parent||"#").toString(),m=a.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,!(_=n.instance?n.instance:this._model.data[n.id]?this:e.jstree.reference(n.id))||!_._id||this._id!==_._id,"#"===m.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(i.id,m.children);break;case"after":a=e.inArray(i.id,m.children)+1;break;case"inside":case"first":a=0;break;case"last":a=m.children.length;break;default:a||(a=0)}if(a>m.children.length&&(a=m.children.length),!this.check("copy_node",n,m,a,{core:!0,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(f=_?_.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===f.id&&delete f.id,!(f=this._parse_model_from_json(f,m.id,m.parents.concat())))return!1;for(d=this.get_node(f),n&&n.state&&!1===n.state.loaded&&(d.state.loaded=!1),(c=[]).push(f),c=c.concat(d.children_d),this.trigger("model",{nodes:c,parent:m.id}),u=0,h=m.parents.length;u<h;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(c);for(c=[],u=0,h=m.children.length;u<h;u++)c[u>=a?u+1:u]=m.children[u];return c[a]=d.id,m.children=c,m.children_d.push(d.id),m.children_d=m.children_d.concat(d.children_d),this._node_changed(m.id),this.redraw("#"===m.id),r&&r.call(this,d,m,a),this.trigger("copy_node",{node:d,original:n,parent:m.id,position:a,old_parent:p,old_position:_&&_._id&&p&&_._model.data[p]&&_._model.data[p].children?e.inArray(n.id,_._model.data[p].children):-1,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),d.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,a,l=[];for(i=0,a=t.length;i<a;i++)(n=this.get_node(t[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;r=l,s=this,o="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,a,l=[];for(i=0,a=t.length;i<a;i++)(n=this.get_node(t[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;r=l,s=this,o="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:o,node:r,inst:s}},can_paste:function(){return!1!==o&&!1!==r},paste:function(e,t){if(!((e=this.get_node(e))&&o&&o.match(/^(copy_node|move_node)$/)&&r))return!1;this[o](r,e,t)&&this.trigger("paste",{parent:e.id,node:r,mode:o}),r=!1,o=!1,s=!1},edit:function(t,n){if(!(t=this.get_node(t)))return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t);var i=this._data.core.rtl,a=this.element.width(),r=t.children(".jstree-anchor"),o=e("<span>"),
/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
s=n,l=e("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=e("<input />",{value:s,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy((function(){var n=o.children(".jstree-rename-input").val();""===n&&(n=s),l.remove(),o.replaceWith(r),o.remove(),this.set_text(t,s),!1===this.rename_node(t,e("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())&&this.set_text(t,s)}),this),keydown:function(e){var t=e.which;27===t&&(this.value=s),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){c.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(e){if(13===e.which)return!1}}),d={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""};o.attr("class",r.attr("class")).append(r.contents().clone()).append(c),r.replaceWith(o),l.css(d),c.css(d).width(Math.min(l.text("pW"+c[0].value).width(),a))[0].select()},set_theme:function(t,n){if(!t)return!1;if(!0===n){var i=this.settings.core.themes.dir;i||(i=e.jstree.path+"/themes"),n=i+"/"+t+"/style.css"}n&&-1===e.inArray(n,l)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),l.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,n){var i,a,r,o;if(e.isArray(t)){for(i=0,a=(t=t.slice()).length;i<a;i++)this.set_icon(t[i],n);return!0}return!(!(t=this.get_node(t))||"#"===t.id)&&(o=t.icon,t.icon=n,r=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===n?this.hide_icon(t):!0===n?r.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"):-1===n.indexOf("/")&&-1===n.indexOf(".")?(r.removeClass(o).css("background",""),r.addClass(n+" jstree-themeicon-custom").attr("rel",n)):(r.removeClass(o).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||"#"===e.id)&&e.icon},hide_icon:function(t){var n,i;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||"#"===t)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,i,a;if(e.isArray(t)){for(n=0,i=(t=t.slice()).length;n<i;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||"#"===t)&&(a=this.get_node(t,!0),t.icon=!a.length||a.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),a.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var i=n?{}:[];return t&&t.attributes&&e.each(t.attributes,(function(t,a){-1===e.inArray(a.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==a.nodeValue&&""!==e.trim(a.nodeValue)&&(n?i[a.nodeName]=a.nodeValue:i.push(a.nodeName))})),i},e.vakata.array_unique=function(e){var t,n,i,a=[];for(t=0,i=e.length;t<i;t++){for(n=0;n<=t&&e[t]!==e[n];n++);n===t&&a.push(e[t])}return a},e.vakata.array_remove=function(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e},e.vakata.array_remove_item=function(t,n){var i=e.inArray(n,t);return-1!==i?e.vakata.array_remove(t,i):t};var h=document.createElement("I");h.className="jstree-icon jstree-checkbox",e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(t,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy((function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}),this)).on("loading.jstree",e.proxy((function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}),this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy((function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)}),this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy((function(e,t){var n,i,a=this._model.data,r=(a[t.parent],t.nodes);for(n=0,i=r.length;n<i;n++)a[r[n]].state.checked=a[r[n]].original&&a[r[n]].original.state&&a[r[n]].original.state.checked,a[r[n]].state.checked&&this._data.checkbox.selected.push(r[n])}),this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy((function(t,n){var i,a,r,o,s,l,c=this._model.data,d=c[n.parent],u=n.nodes,h=[],f=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(d.state[p?"selected":"checked"]){for(a=0,r=u.length;a<r;a++)c[u[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(u)}else for(a=0,r=u.length;a<r;a++)if(c[u[a]].state[p?"selected":"checked"]){for(o=0,s=c[u[a]].children_d.length;o<s;o++)c[c[u[a]].children_d[o]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(c[u[a]].children_d)}if(-1!==f.indexOf("up")){for(a=0,r=d.children_d.length;a<r;a++)c[d.children_d[a]].children.length||h.push(c[d.children_d[a]].parent);for(o=0,s=(h=e.vakata.array_unique(h)).length;o<s;o++)for(d=c[h[o]];d&&"#"!==d.id;){for(i=0,a=0,r=d.children.length;a<r;a++)i+=c[d.children[a]].state[p?"selected":"checked"];if(i!==r)break;d.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(d.id),(l=this.get_node(d,!0))&&l.length&&l.children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)}),this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy((function(t,n){var i,a,r,o,s=n.node,l=this._model.data,c=this.get_node(s.parent),d=this.get_node(s,!0),u=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==u.indexOf("down"))for(this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected.concat(s.children_d)),i=0,a=s.children_d.length;i<a;i++)(o=l[s.children_d[i]]).state[h?"selected":"checked"]=!0,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(-1!==u.indexOf("up"))for(;c&&"#"!==c.id;){for(r=0,i=0,a=c.children.length;i<a;i++)r+=l[c.children[i]].state[h?"selected":"checked"];if(r!==a)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),(o=this.get_node(c,!0))&&o.length&&o.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}-1!==u.indexOf("down")&&d.length&&d.find(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked")}),this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy((function(e,t){var n,i,a,r=this.get_node("#"),o=this._model.data;for(n=0,i=r.children_d.length;n<i;n++)(a=o[r.children_d[n]])&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1)}),this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy((function(t,n){var i,a,r,o=n.node,s=this.get_node(o,!0),l=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection;if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),-1!==l.indexOf("down"))for(i=0,a=o.children_d.length;i<a;i++)(r=this._model.data[o.children_d[i]]).state[c?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(i=0,a=o.parents.length;i<a;i++)(r=this._model.data[o.parents[i]]).state[c?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),(r=this.get_node(o.parents[i],!0))&&r.length&&r.children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked");for(r=[],i=0,a=this._data[c?"core":"checkbox"].selected.length;i<a;i++)-1!==l.indexOf("down")&&-1!==e.inArray(this._data[c?"core":"checkbox"].selected[i],o.children_d)||-1!==l.indexOf("up")&&-1!==e.inArray(this._data[c?"core":"checkbox"].selected[i],o.parents)||r.push(this._data[c?"core":"checkbox"].selected[i]);this._data[c?"core":"checkbox"].selected=e.vakata.array_unique(r),-1!==l.indexOf("down")&&s.length&&s.find(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked")}),this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy((function(e,t){for(var n,i,a,r,o=this.get_node(t.parent),s=this._model.data,l=this.settings.checkbox.tie_selection;o&&"#"!==o.id;){for(a=0,n=0,i=o.children.length;n<i;n++)a+=s[o.children[n]].state[l?"selected":"checked"];if(a!==i)break;o.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(o.id),(r=this.get_node(o,!0))&&r.length&&r.children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}}),this)).on("move_node.jstree",e.proxy((function(t,n){var i,a,r,o,s,l=n.is_multi,c=n.old_parent,d=this.get_node(n.parent),u=this._model.data,h=this.settings.checkbox.tie_selection;if(!l)for(i=this.get_node(c);i&&"#"!==i.id;){for(a=0,r=0,o=i.children.length;r<o;r++)a+=u[i.children[r]].state[h?"selected":"checked"];if(a!==o)break;i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=d;i&&"#"!==i.id;){for(a=0,r=0,o=i.children.length;r<o;r++)a+=u[i.children[r]].state[h?"selected":"checked"];if(a===o)i.state[h?"selected":"checked"]||(i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!i.state[h?"selected":"checked"])break;i.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}}),this))},this._undetermined=function(){var t,n,i=this._model.data,a=this.settings.checkbox.tie_selection,r=this._data[a?"core":"checkbox"].selected,o=[],s=this;for(t=0,n=r.length;t<n;t++)i[r[t]]&&i[r[t]].parents&&(o=o.concat(i[r[t]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each((function(){var e,a=s.get_node(this);if(a.state.loaded)for(t=0,n=a.children_d.length;t<n;t++)!(e=i[a.children_d[t]]).state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined&&(o.push(e.id),o=o.concat(e.parents));else a.original&&a.original.state&&a.original.state.undetermined&&!0===a.original.state.undetermined&&(o.push(a.id),o=o.concat(a.parents))})),o=e.vakata.array_unique(o),o=e.vakata.array_remove_item(o,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,n=o.length;t<n;t++)i[o[t]].state[a?"selected":"checked"]||(r=this.get_node(o[t],!0))&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")},this.redraw_node=function(t,i,a){if(t=n.redraw_node.call(this,t,i,a)){var r,o,s=null;for(r=0,o=t.childNodes.length;r<o;r++)if(t.childNodes[r]&&t.childNodes[r].className&&-1!==t.childNodes[r].className.indexOf("jstree-anchor")){s=t.childNodes[r];break}s&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(s.className+=" jstree-checked"),s.insertBefore(h.cloneNode(!1),s.childNodes[0]))}return a||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,i,a=this.settings.checkbox.cascade,r=this.settings.checkbox.tie_selection,o=this._data[r?"core":"checkbox"].selected,s=this._model.data;if(!t||!0===t.state[r?"selected":"checked"]||-1===a.indexOf("undetermined")||-1===a.indexOf("down")&&-1===a.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,i=t.children_d.length;n<i;n++)if(-1!==e.inArray(t.children_d[n],o)||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.activate_node=function(t,i){if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox"))return n.activate_node.call(this,t,i);this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),this.trigger("activate_node",{node:this.get_node(t)})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var i,a,r;if(e.isArray(t)){for(a=0,r=(t=t.slice()).length;a<r;a++)this.check_node(t[a],n);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;i=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var i,a,r;if(e.isArray(t)){for(i=0,a=(t=t.slice()).length;i<a;i++)this.uncheck_node(t[i],n);return!0}if(!(t=this.get_node(t))||"#"===t.id)return!1;r=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),r.length&&r.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||"#"===e.id)&&e.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy((function(e){return this.get_node(e)}),this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,i,a,r,o=this.get_checked(!0),s={};for(n=0,i=o.length;n<i;n++)s[o[n].id]=o[n];for(n=0,i=o.length;n<i;n++)for(a=0,r=o[n].children_d.length;a<r;a++)s[o[n].children_d[a]]&&delete s[o[n].children_d[a]];for(n in o=[],s)s.hasOwnProperty(n)&&o.push(n);return t?e.map(o,e.proxy((function(e){return this.get_node(e)}),this)):o},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,i,a=this.get_checked(!0),r=[];for(n=0,i=a.length;n<i;n++)a[n].children.length||r.push(a[n].id);return t?e.map(r,e.proxy((function(e){return this.get_node(e)}),this)):r}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.create_node(i,{},"last",(function(e){setTimeout((function(){n.edit(e)}),0)}))}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.delete_node(n.get_selected()):n.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.cut(n.get_selected()):n.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.is_selected(i)?n.copy(n.get_selected()):n.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),i=n.get_node(t.reference);n.paste(i)}}}}}}},e.jstree.plugins.contextmenu=function(n,i){this.bind=function(){i.bind.call(this);var t=0;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy((function(e){e.preventDefault(),t=e.ctrlKey?e.timeStamp:0,this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e)}),this)).on("click.jstree",".jstree-anchor",e.proxy((function(n){this._data.contextmenu.visible&&(!t||n.timeStamp-t>250)&&e.vakata.context.hide()}),this)),e(document).on("context_hide.vakata",e.proxy((function(){this._data.contextmenu.visible=!1}),this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(n,i,a,r){if(!(n=this.get_node(n))||"#"===n.id)return!1;var o=this.settings.contextmenu,s=this.get_node(n,!0).children(".jstree-anchor"),l=!1,c=!1;(o.show_at_node||i===t||a===t)&&(l=s.offset(),i=l.left,a=l.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,r),c=o.items,e.isFunction(c)&&(c=c.call(this,n,e.proxy((function(e){this._show_contextmenu(n,i,a,e)}),this))),e.isPlainObject(c)&&this._show_contextmenu(n,i,a,c)},this._show_contextmenu=function(t,n,i,a){var r=this.get_node(t,!0).children(".jstree-anchor");e(document).one("context_show.vakata",e.proxy((function(t,n){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(i)}),this)),this._data.contextmenu.visible=!0,e.vakata.context.show(r,{x:n,y:i},a),this.trigger("show_contextmenu",{node:t,x:n,y:i})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(document).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,i){if(!t)return!1;i||(n.html="",n.items=[]);var a,r="",o=!1;return i&&(r+="<ul>"),e.each(t,(function(t,i){if(!i)return!0;n.items.push(i),!o&&i.separator_before&&(r+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),o=!1,r+="<li class='"+(i._class||"")+(!0===i._disabled||e.isFunction(i._disabled)&&i._disabled({item:i,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",r+="<a href='#' rel='"+(n.items.length-1)+"'>",e.vakata.context.settings.icons&&(r+="<i ",i.icon&&(-1!==i.icon.indexOf("/")||-1!==i.icon.indexOf(".")?r+=" style='background:url(\""+i.icon+"\") center center no-repeat' ":r+=" class='"+i.icon+"' "),r+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),r+=(e.isFunction(i.label)?i.label({item:t,reference:n.reference,element:n.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(a=e.vakata.context._parse(i.submenu,!0))&&(r+=a),r+="</li>",i.separator_after&&(r+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",o=!0)})),r=r.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(r+="</ul>"),i||(n.html=r,e.vakata.context._trigger("parse")),r.length>10&&r},_show_submenu:function(n){if((n=e(n)).length&&n.children("ul").length){var i=n.children("ul"),a=n.offset().left+n.outerWidth(),r=n.offset().top,o=i.width(),s=i.height(),l=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?n[a-(o+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[a+o+10>l?"addClass":"removeClass"]("vakata-context-right"),r+s+10>c&&i.css("bottom","-1px"),i.show()}},show:function(i,a,r){var o,s,l,c,d,u,h,f;switch(n.element&&n.element.length&&n.element.width(""),!0){case!a&&!i:return!1;case!!a&&!!i:n.reference=i,n.position_x=a.x,n.position_y=a.y;break;case!a&&!!i:n.reference=i,o=i.offset(),n.position_x=o.left+i.outerHeight(),n.position_y=o.top;break;case!!a&&!i:n.position_x=a.x,n.position_y=a.y}i&&!r&&e(i).data("vakata_contextmenu")&&(r=e(i).data("vakata_contextmenu")),e.vakata.context._parse(r)&&n.element.html(n.html),n.items.length&&(s=n.element,l=n.position_x,c=n.position_y,d=s.width(),u=s.height(),h=e(window).width()+e(window).scrollLeft(),f=e(window).height()+e(window).scrollTop(),t&&(l-=s.outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+d+20>h&&(l=h-(d+20)),c+u+20>f&&(c=f-(u+20)),n.element.css({left:l,top:c}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e((function(){t="rtl"===e("body").css("direction");var i=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",(function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(i&&clearTimeout(i),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))})).on("mouseleave","li",(function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")})).on("mouseleave",(function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((function(){e.vakata.context.hide()}),e.vakata.context.settings.hide_onmouseleave))})).on("click","a",(function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()})).on("keydown","a",(function(t){var i=null;switch(t.which){case 13:case 32:t.type="mouseup",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}})).on("keydown",(function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.mouseup()})).appendTo("body"),e(document).on("mousedown",(function(t){n.is_visible&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()})).on("context_show.vakata",(function(e,i){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()}))}))}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},e.jstree.plugins.dnd=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",e.proxy((function(t){var n=this.get_node(t.target),i=this.is_selected(n)?this.get_selected().length:1;if(n&&n.id&&"#"!==n.id&&(1===t.which||"touchstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_selected(!0):[n])))return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,{jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:i>1?this.get_selected():[n.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(i>1?i+" "+this.get_string("nodes"):this.get_text(t.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}),this))}},e((function(){var t=!1,n=!1,i=!1,a=e('<div id="jstree-marker">&#160;</div>').hide().appendTo("body");e(document).bind("dnd_start.vakata",(function(e,n){t=!1})).bind("dnd_move.vakata",(function(r,o){if(i&&clearTimeout(i),o&&o.data&&o.data.jstree&&(!o.event.target.id||"jstree-marker"!==o.event.target.id)){var s,l,c,d,u,h,f,p,m,_,g,v,y,b,w=e.jstree.reference(o.event.target),k=!1,x=!1,S=!1;if(w&&w._data&&w._data.dnd)if(a.attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")),o.helper.children().attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy:eq(0)")[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"show":"hide"](),o.event.target!==w.element[0]&&o.event.target!==w.get_container_ul()[0]||0!==w.get_container_ul().children().length){if((k=e(o.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(x=k.offset(),S=o.event.pageY-x.top,c=k.height(),h=S<c/3?["b","i","a"]:S>c-c/3?["a","i","b"]:S>c/2?["i","a","b"]:["i","b","a"],e.each(h,(function(r,S){switch(S){case"b":s=x.left-6,l=x.top,d=w.get_parent(k),u=k.parent().index();break;case"i":y=w.settings.dnd.inside_pos,b=w.get_node(k.parent()),s=x.left-2,l=x.top+c/2+1,d=b.id,u="first"===y?0:"last"===y?b.children.length:Math.min(y,b.children.length);break;case"a":s=x.left-6,l=x.top+c,d=w.get_parent(k),u=k.parent().index()+1}
/*!
								// TODO: moving inside, but the node is not yet loaded?
								// the check will work anyway, as when moving the node will be loaded first and checked again
								if(v === 'i' && !ins.is_loaded(p)) { }
								*/for(f=!0,p=0,m=o.data.nodes.length;p<m;p++)if(_=o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node",g=u,"move_node"===_&&"a"===S&&o.data.origin&&o.data.origin===w&&d===w.get_parent(o.data.nodes[p])&&(v=w.get_node(d),g>e.inArray(o.data.nodes[p],v.children)&&(g-=1)),!(f=f&&(w&&w.settings&&w.settings.dnd&&!1===w.settings.dnd.check_while_dragging||w.check(_,o.data.origin&&o.data.origin!==w?o.data.origin.get_node(o.data.nodes[p]):o.data.nodes[p],d,g,{dnd:!0,ref:w.get_node(k.parent()),pos:S,is_multi:o.data.origin&&o.data.origin!==w,is_foreign:!o.data.origin})))){w&&w.last_error&&(n=w.last_error());break}if(f)return"i"===S&&k.parent().is(".jstree-closed")&&w.settings.dnd.open_timeout&&(i=setTimeout(function(e,t){return function(){e.open_node(t)}}(w,k),w.settings.dnd.open_timeout)),t={ins:w,par:d,pos:"i"!==S||"last"!==y||0!==u||w.is_loaded(b)?u:"last"},a.css({left:s+"px",top:l+"px"}).show(),o.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),n={},h=!0,!1})),!0===h))return}else{for(f=!0,p=0,m=o.data.nodes.length;p<m&&(f=f&&w.check(o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node",o.data.origin&&o.data.origin!==w?o.data.origin.get_node(o.data.nodes[p]):o.data.nodes[p],"#","last",{dnd:!0,ref:w.get_node("#"),pos:"i",is_multi:o.data.origin&&o.data.origin!==w,is_foreign:!o.data.origin}));p++);if(f)return t={ins:w,par:"#",pos:"last"},a.hide(),void o.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok")}t=!1,o.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),a.hide()}})).bind("dnd_scroll.vakata",(function(e,n){n&&n.data&&n.data.jstree&&(a.hide(),t=!1,n.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))})).bind("dnd_stop.vakata",(function(r,o){if(i&&clearTimeout(i),o&&o.data&&o.data.jstree){a.hide();var s,l,c=[];if(t){for(s=0,l=o.data.nodes.length;s<l;s++)c[s]=o.data.origin?o.data.origin.get_node(o.data.nodes[s]):o.data.nodes[s],o.data.origin&&(c[s].instance=o.data.origin);t.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](c,t.par,t.pos)}else(s=e(o.event.target).closest(".jstree")).length&&n&&n.error&&"check"===n.error&&(s=s.jstree(!0))&&s.settings.core.error.call(this,n)}})).bind("keyup keydown",(function(t,n){(n=e.vakata.dnd._get())&&n.data&&n.data.jstree&&n.helper.find(".jstree-copy:eq(0)")[n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"]()}))})),function(e){var t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(t,n){var i=e.vakata.dnd._get();i.event=n,e(document).triggerHandler("dnd_"+t+".vakata",i)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&&t.helper.remove(),t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(document).off("mousemove touchmove",e.vakata.dnd.drag),e(document).off("mouseup touchend",e.vakata.dnd.stop)},_scroll:function(n){if(!t.scroll_e||!t.scroll_l&&!t.scroll_t)return t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===n)return!1;var i=t.scroll_e.scrollTop(),a=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(i+t.scroll_t*e.vakata.dnd.settings.scroll_speed),t.scroll_e.scrollLeft(a+t.scroll_l*e.vakata.dnd.settings.scroll_speed),i===t.scroll_e.scrollTop()&&a===t.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",t.scroll_e)},start:function(n,i,a){"touchstart"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_drag&&e.vakata.dnd.stop({});try{n.currentTarget.unselectable="on",n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&&(n.currentTarget.style.MozUserSelect="none")}catch(e){}return t.init_x=n.pageX,t.init_y=n.pageY,t.data=i,t.is_down=!0,t.element=n.currentTarget,t.target=n.target,t.is_touch="touchstart"===n.type,!1!==a&&(t.helper=e("<div id='vakata-dnd'></div>").html(a).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(document).bind("mousemove touchmove",e.vakata.dnd.drag),e(document).bind("mouseup touchend",e.vakata.dnd.stop),!1},drag:function(n){if("touchmove"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_down){if(!t.is_drag){if(!(Math.abs(n.pageX-t.init_x)>(t.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(n.pageY-t.init_y)>(t.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;t.helper&&(t.helper.appendTo("body"),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,e.vakata.dnd._trigger("start",n)}var i=!1,a=!1,r=!1,o=!1,s=!1,l=!1,c=!1,d=!1,u=!1,h=!1;return t.scroll_t=0,t.scroll_l=0,t.scroll_e=!1,e(e(n.target).parentsUntil("body").addBack().get().reverse()).filter((function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)})).each((function(){var i=e(this),a=i.offset();if(this.scrollHeight>this.offsetHeight&&(a.top+i.height()-n.pageY<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),n.pageY-a.top<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(a.left+i.width()-n.pageX<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),n.pageX-a.left<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1)),t.scroll_t||t.scroll_l)return t.scroll_e=e(this),!1})),t.scroll_e||(i=e(document),a=e(window),r=i.height(),o=a.height(),s=i.width(),l=a.width(),c=i.scrollTop(),d=i.scrollLeft(),r>o&&n.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1),r>o&&o-(n.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),s>l&&n.pageX-d<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1),s>l&&l-(n.pageX-d)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),(t.scroll_t||t.scroll_l)&&(t.scroll_e=i)),t.scroll_e&&e.vakata.dnd._scroll(!0),t.helper&&(u=parseInt(n.pageY+e.vakata.dnd.settings.helper_top,10),h=parseInt(n.pageX+e.vakata.dnd.settings.helper_left,10),r&&u+25>r&&(u=r-50),s&&h+t.helper_w>s&&(h=s-(t.helper_w+2)),t.helper.css({left:h+"px",top:u+"px"})),e.vakata.dnd._trigger("move",n),!1}},stop:function(n){if("touchend"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_drag)e.vakata.dnd._trigger("stop",n);else if("touchend"===n.type&&n.target===t.target){var i=setTimeout((function(){e(n.target).click()}),100);e(n.target).one("click",(function(){i&&clearTimeout(i)}))}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(t,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this.element.on("before_open.jstree",e.proxy((function(t,n){var i,a,r=this._data.search.res,o=[],s=e();if(r&&r.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(r,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this.settings.search.show_only_matches&&this._data.search.res.length)){for(i=0,a=r.length;i<a;i++)o=o.concat(this.get_node(r[i]).parents);s=(o=e.vakata.array_remove_item(e.vakata.array_unique(o),"#")).length?e(this.element[0].querySelectorAll("#"+e.map(o,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))):e(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),(s=s.add(this._data.search.dom)).parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))}}),this)),this.settings.search.show_only_matches&&this.element.on("search.jstree",(function(t,n){n.nodes.length&&(e(this).find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),n.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})))})).on("clear_search.jstree",(function(t,n){n.nodes.length&&e(this).find(".jstree-node").css("display","").filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last")}))},this.search=function(t,n){if(!1===t||""===e.trim(t.toString()))return this.clear_search();t=t.toString();var i=this.settings.search,a=!!i.ajax&&i.ajax,r=null,o=[],s=[];if(this._data.search.res.length&&this.clear_search(),!n&&!1!==a)return e.isFunction(a)?a.call(this,t,e.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(e.isArray(n)?e.vakata.array_unique(n):[],(function(){this.search(t,!0)}),!0)}),this)):((a=e.extend({},a)).data||(a.data={}),a.data.str=t,e.ajax(a).fail(e.proxy((function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(a)},this.settings.core.error.call(this,this._data.core.last_error)}),this)).done(e.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(e.isArray(n)?e.vakata.array_unique(n):[],(function(){this.search(t,!0)}),!0)}),this)));this._data.search.str=t,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],r=new e.vakata.search(t,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),e.each(this._model.data,(function(e,n){n.text&&(i.search_callback&&i.search_callback.call(this,t,n)||!i.search_callback&&r.search(n.text).isMatch)&&(!i.search_leaves_only||n.state.loaded&&0===n.children.length)&&(o.push(e),s=s.concat(n.parents))})),o.length&&(s=e.vakata.array_unique(s),this._search_open(s),this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(o,(function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.res=o,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),this.trigger("search",{nodes:this._data.search.dom,str:t,res:this._data.search.res})},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this._search_open=function(t){var n=this;e.each(t.concat([]),(function(i,a){if("#"===a)return!0;try{a=e("#"+a.replace(e.jstree.idregex,"\\$&"),n.element)}catch(e){}a&&a.length&&n.is_closed(a)&&(n._data.search.opn.push(a[0].id),n.open_node(a,(function(){n._search_open(t)}),0))}))}},function(e){e.vakata.search=function(e,t,n){!1!==(n=n||{}).fuzzy&&(n.fuzzy=!0),e=n.caseSensitive?e:e.toLowerCase();var i,a,r,o,s=n.location||0,l=n.distance||100,c=n.threshold||.6,d=e.length;return d>32&&(n.fuzzy=!1),n.fuzzy&&(i=1<<d-1,a=function(){var t={},n=0;for(n=0;n<d;n++)t[e.charAt(n)]=0;for(n=0;n<d;n++)t[e.charAt(n)]|=1<<d-n-1;return t}(),r=function(e,t){var n=e/d,i=Math.abs(s-t);return l?n+i/l:i?1:n}),o=function(t){if(t=n.caseSensitive?t:t.toLowerCase(),e===t||-1!==t.indexOf(e))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var o,l,u,h,f,p,m,_,g,v=t.length,y=c,b=t.indexOf(e,s),w=d+v,k=1,x=[];for(-1!==b&&(y=Math.min(r(0,b),y),-1!==(b=t.lastIndexOf(e,s+d))&&(y=Math.min(r(0,b),y))),b=-1,o=0;o<d;o++){for(u=0,h=w;u<h;)r(o,s+h)<=y?u=h:w=h,h=Math.floor((w-u)/2+u);for(w=h,p=Math.max(1,s-h+1),m=Math.min(s+h,v)+d,(_=new Array(m+2))[m+1]=(1<<o)-1,l=m;l>=p;l--)if(g=a[t.charAt(l-1)],_[l]=0===o?(_[l+1]<<1|1)&g:(_[l+1]<<1|1)&g|(f[l+1]|f[l])<<1|1|f[l+1],_[l]&i&&(k=r(o,l-1))<=y){if(y=k,b=l-1,x.push(b),!(b>s))break;p=Math.max(1,2*s-b)}if(r(o+1,s)>y)break;f=_}return{isMatch:b>=0,score:k}},!0===t?{search:o}:o(t)}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy((function(e,t){this.sort(t.parent,!0)}),this)).on("rename_node.jstree create_node.jstree",e.proxy((function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)}),this)).on("move_node.jstree copy_node.jstree",e.proxy((function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)}),this))},this.sort=function(t,n){var i,a;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(i=0,a=t.children_d.length;i<a;i++)this.sort(t.children_d[i],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy((function(){this.element.on(this.settings.state.events,e.proxy((function(){f&&clearTimeout(f),f=setTimeout(e.proxy((function(){this.save_state()}),this),100)}),this))}),this);this.element.on("ready.jstree",e.proxy((function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()}),this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",(function(n,i){i.instance.trigger("restore_state",{state:e.extend(!0,{},t)})})),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"#":{},default:{}},e.jstree.plugins.types=function(n,i){this.init=function(e,n){var a,r;if(n&&n.types&&n.types.default)for(a in n.types)if("default"!==a&&"#"!==a&&n.types.hasOwnProperty(a))for(r in n.types.default)n.types.default.hasOwnProperty(r)&&n.types[a][r]===t&&(n.types[a][r]=n.types.default[r]);i.init.call(this,e,n),this._model.data["#"].type="#"},this.refresh=function(e,t){i.refresh.call(this,e,t),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",e.proxy((function(e,n){var i,a,r=this._model.data,o=n.nodes,s=this.settings.types,l="default";for(i=0,a=o.length;i<a;i++)l="default",r[o[i]].original&&r[o[i]].original.type&&s[r[o[i]].original.type]&&(l=r[o[i]].original.type),r[o[i]].data&&r[o[i]].data.jstree&&r[o[i]].data.jstree.type&&s[r[o[i]].data.jstree.type]&&(l=r[o[i]].data.jstree.type),r[o[i]].type=l,!0===r[o[i]].icon&&s[l].icon!==t&&(r[o[i]].icon=s[l].icon);r["#"].type="#"}),this)),i.bind.call(this)},this.get_json=function(t,n,a){var r,o,s=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},c=i.get_json.call(this,t,l,a);if(!1===c)return!1;if(e.isArray(c))for(r=0,o=c.length;r<o;r++)c[r].type=c[r].id&&s[c[r].id]&&s[c[r].id].type?s[c[r].id].type:"default",n&&n.no_id&&(delete c[r].id,c[r].li_attr&&c[r].li_attr.id&&delete c[r].li_attr.id);else c.type=c.id&&s[c.id]&&s[c.id].type?s[c.id].type:"default",n&&n.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,i=t.length;n<i;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,a,r,o,s){if(!1===i.check.call(this,n,a,r,o,s))return!1;a=a&&a.id?a:this.get_node(a),r=r&&r.id?r:this.get_node(r);var l,c,d,u,h=a&&a.id?e.jstree.reference(a.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(a.id,r.children)){if((l=this.get_rules(r)).max_children!==t&&-1!==l.max_children&&l.max_children===r.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(a.type,l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;if(h&&a.children_d&&a.parents){for(c=0,d=0,u=a.children_d.length;d<u;d++)c=Math.max(c,h[a.children_d[d]].parents.length);c=c-a.parents.length+1}(c<=0||c===t)&&(c=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;r=this.get_node(r.parent),l=this.get_rules(r),c++}while(r)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,i){var a,r,o,s,l;if(e.isArray(n)){for(r=0,o=(n=n.slice()).length;r<o;r++)this.set_type(n[r],i);return!0}return a=this.settings.types,n=this.get_node(n),!(!a[i]||!n)&&(s=n.type,l=this.get_icon(n),n.type=i,(!0===l||a[s]&&a[s].icon&&l===a[s].icon)&&this.set_icon(n,a[i].icon===t||a[i].icon),!0)}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,i){this.check=function(t,n,a,r,o){if(!1===i.check.call(this,t,n,a,r,o))return!1;if(n=n&&n.id?n:this.get_node(n),!(a=a&&a.id?a:this.get_node(a))||!a.children)return!0;var s,l,c="rename_node"===t?r:n.text,d=[],u=this.settings.unique.case_sensitive,h=this._model.data;for(s=0,l=a.children.length;s<l;s++)d.push(u?h[a.children[s]].text:h[a.children[s]].text.toLowerCase());switch(u||(c=c.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return(s=-1===e.inArray(c,d)||n.text&&n.text[u?"toString":"toLowerCase"]()===c)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"create_node":return(s=-1===e.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"copy_node":return(s=-1===e.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"move_node":return(s=n.parent===a.id||-1===e.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s}return!0},this.create_node=function(n,a,r,o,s){if(!a||a.text===t){if(null===n&&(n="#"),!(n=this.get_node(n)))return i.create_node.call(this,n,a,r,o,s);if(!(r=r===t?"last":r).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return i.create_node.call(this,n,a,r,o,s);a||(a={});var l,c,d,u,h,f=this._model.data,p=this.settings.unique.case_sensitive,m=this.settings.unique.duplicate;for(c=l=this.get_string("New node"),d=[],u=0,h=n.children.length;u<h;u++)d.push(p?f[n.children[u]].text:f[n.children[u]].text.toLowerCase());for(u=1;-1!==e.inArray(p?c:c.toLowerCase(),d);)c=m.call(this,l,++u).toString();a.text=c}return i.create_node.call(this,n,a,r,o,s)}};var p=document.createElement("DIV");p.setAttribute("unselectable","on"),p.className="jstree-wholerow",p.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy((function(){this.hide_dots()}),this)).on("init.jstree loading.jstree ready.jstree",e.proxy((function(){this.get_container_ul().addClass("jstree-wholerow-ul")}),this)).on("deselect_all.jstree",e.proxy((function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}),this)).on("changed.jstree",e.proxy((function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,i,a=!1;for(n=0,i=t.selected.length;n<i;n++)(a=this.get_node(t.selected[n],!0))&&a.length&&a.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("open_node.jstree",e.proxy((function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("hover_node.jstree dehover_node.jstree",e.proxy((function(e,t){this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}),this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy((function(t){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n)}),this)).on("click.jstree",".jstree-wholerow",(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()})).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy((function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()}),this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy((function(e){return e.stopImmediatePropagation(),this.hover_node(e.currentTarget),!1}),this)).on("mouseleave.jstree",".jstree-node",e.proxy((function(e){this.dehover_node(e.currentTarget)}),this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,i,a){if(t=n.redraw_node.call(this,t,i,a)){var r=p.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),t.insertBefore(r,t.childNodes[0])}return t}}})?i.apply(t,a):i)||(e.exports=r)}()},function(e,t,n){"use strict";var i=n(747);n.n(i).a},function(e,t,n){"use strict";var i=n(748);n.n(i).a},function(e,t,n){"use strict";var i=n(749);n.n(i).a},function(e,t,n){"use strict";var i=n(750);n.n(i).a},function(e,t,n){"use strict";var i=n(751);n.n(i).a},function(e,t,n){"use strict";var i=n(752);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(753);n.n(i).a},function(e,t,n){"use strict";var i=n(754);n.n(i).a},function(e,t,n){"use strict";var i=n(755);n.n(i).a},function(e,t,n){"use strict";var i=n(756);n.n(i).a},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i,a=n(47),r=n(1),o=n(6),s=n(900),l=n.n(s),c=n(662),d=n(0),u=n.n(d),h=n(4),f=n.n(h),p=n(3),m=n(2),_=n.n(m),g=n(10),v=n(18),y=n(73),b=n(240),w=n(113),k=n(8),x=n(7),S=n.n(x),C=function(){clearInterval(i)},M={props:{jobId:{type:String,required:!0}},data:function(){return{entryPoints:[]}},created:function(){this.pollEntryPoints()},beforeDestroy:function(){C()},computed:{interactiveToolsLink:function(){return Object(p.getAppRoot)()+"interactivetool_entry_points/list"}},methods:{pollEntryPoints:function(){var e=this;!function e(t,n,a){C();var r=Object(p.getAppRoot)()+"api/entry_points";S.a.get(r,{params:a}).then((function(r){var o=[],s=!0;r.data.forEach((function(e,t){o.push(e),e.active||(s=!1)})),t(o),s&&0!=o.length||(i=setInterval((function(){e(t,n,a)}),3e3))})).catch(n)}((function(t){e.entryPoints=t}),(function(e){console.error(e)}),{job_id:this.jobId})}}},T=n(5),j=Object(T.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"infomessagelarge"},[0==e.entryPoints.length?n("p",[e._v("Waiting for InteractiveTool result view(s) to become available.")]):1==e.entryPoints.length?n("p",[e.entryPoints[0].active?n("span",[e._v("\n            There is an InteractiveTool result view available,\n            "),n("a",{attrs:{href:e.entryPoints[0].target}},[e._v("click here to display")]),e._v(".\n        ")]):n("span",[e._v("\n            There is an InteractiveTool result view available, waiting for view to become active...\n        ")])]):n("div",[e._v("\n        There are multiple InteractiveTool result views available:\n        "),n("ul",e._l(e.entryPoints,(function(t){return n("li",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n                "),t.active?n("span",[e._v(" ("),n("a",{attrs:{href:t.target}},[e._v("click here to display")]),e._v(") ")]):n("span",[e._v(" (waiting to become active...) ")])])})),0)]),e._v("\n\n    You may also access all active InteractiveTools from the\n    "),n("a",{attrs:{href:e.interactiveToolsLink}},[e._v("User menu")]),e._v(".\n")])}),[],!1,null,null,null).exports,O=n(12),D=n(170),L=n(67),E=n(86),A={props:{toolId:{type:String,required:!0}},data:function(){return{deprecated:!1,deprecatedMessage:"",showMessage:!1}},created:function(){this.loadRecommendations()},computed:{getToolId:function(){var e=this.toolId||"";if(e.indexOf("/")>0){var t=e.split("/");e=t[t.length-2]}return e}},methods:{loadRecommendations:function(){var e=this,t={tool_sequence:this.getToolId};Object(L.b)(t).then((function(t){Object(D.a)().then((function(n){var i=t.predicted_data;if(e.deprecated=i.is_deprecated,e.deprecatedMessage=i.message,null!==t&&i.children.length>0){var a={},r=i.o_extensions,o=i.children,s=Object(E.b)(o,r,n);s.length>0&&!1===e.deprecated&&(e.showMessage=!0,a.o_extensions=i.o_extensions,a.name=i.name,a.children=s,e.renderD3Tree(a))}}))}))},renderD3Tree:function(e){var t=0,n=null,i=O.select("#tool-recommendation").append("svg").attr("class","tree-size").append("g"),a=i[0][0].parentNode,r=a.clientHeight,o=a.clientWidth,s=parseInt(.15*o);a.setAttribute("viewBox",-s+" 0 "+.5*o+" "+r),a.setAttribute("preserveAspectRatio","xMidYMid meet");var l=O.layout.tree().size([r,o]),c=O.svg.diagonal().projection((function(e){return[e.y,e.x]})),d=function(e){var a=l.nodes(n).reverse(),r=l.links(a);a.forEach((function(e){e.y=e.depth*(o/10)}));var s=i.selectAll("g.node").data(a,(function(e){return e.id||(e.id=++t)})),d=s.enter().append("g").attr("class","node").attr("transform",(function(t){return"translate("+e.y0+","+e.x0+")"})).on("click",u);d.append("circle").attr("r",1e-6),d.append("text").attr("x",(function(e){return e.children||e._children?-10:10})).attr("dy",".35em").attr("text-anchor",(function(e){return e.children||e._children?"end":"start"})).text((function(e){var t=e.name;return t.length>20?t.slice(0,20)+"...":e.name})),d.append("title").text((function(e){return e.children||e._children?e.name:"Open tool - "+e.name})),s.transition().duration(750).attr("transform",(function(e){return"translate("+e.y+","+e.x+")"})).select("circle").attr("r",2.5),s.exit().transition().duration(750).attr("transform",(function(t){return"translate("+e.y+","+e.x+")"})).remove();var h=i.selectAll("path.link").data(r,(function(e){return e.target.id}));h.enter().insert("path","g").attr("class","link").attr("d",(function(t){var n={x:e.x0,y:e.y0};return c({source:n,target:n})})),h.transition().duration(750).attr("d",c),h.exit().transition().duration(750).attr("d",(function(t){var n={x:e.x,y:e.y};return c({source:n,target:n})})).remove(),a.forEach((function(e){e.x0=e.x,e.y0=e.y}))},u=function(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),d(e);var t=e.id;void 0!==t&&"undefined"!==t&&null!==t&&""!==t&&(document.location.href="".concat(Object(p.getAppRoot)(),"tool_runner?tool_id=").concat(t))};(n=e).x0=parseInt(r/2),n.y0=0,n.children.forEach((function e(t){t.children&&(t._children=t.children,t._children.forEach(e),t.children=null)})),d(n)}}},I=Object(T.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!e.deprecated&&e.showMessage?n("div",{staticClass:"infomessagelarge"},[n("h4",[e._v("Tool recommendation")]),e._v("\n        You have used "+e._s(e.getToolId)+" tool. For further analysis, you could try using the following/recommended\n        tools. The recommended tools are shown in the decreasing order of their scores predicted using machine\n        learning analysis on workflows. Therefore, tools at the top may be more useful than the ones at the bottom.\n        Please click on one of the following/recommended tools to open its definition.\n    ")]):e.deprecated?n("div",{staticClass:"warningmessagelarge"},[e._v("\n        You have used "+e._s(e.getToolId)+" tool. "+e._s(e.deprecatedMessage)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"tool-recommendation-view",attrs:{id:"tool-recommendation"}})])}),[],!1,null,null,null).exports;function P(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var R={View:f.a.View.extend({initialize:function(e){var t=this,n=Object(o.a)();this.modal=n.modal||new y.a.View,this.form=new b.a(g.a.merge({setupToolMicrodata:!0,listen_to_history:!0,always_refresh:!1,buildmodel:function(e,i){var a=i.model.attributes,r="",o={},s=a.job_id;s?r="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(s,"/build_for_rerun"):(r="".concat(Object(p.getAppRoot)(),"api/tools/").concat(a.id,"/build"),(o=u.a.extend({},n.params)).tool_id&&delete o.tool_id),a.version&&(o.tool_version=a.version),g.a.get({url:r,data:o,success:function(r){if(r.display){var o=a.version||!(!a.tool_id||!a.tool_id.match(/^(toolshed)\./))&&a.tool_id;r.versions&&o&&!r.versions.includes(o.replace(/.*\//,""))&&(r.message="Requested version unavailable."),i.model.set(r),t._customize(i),n.emit.debug("tool-form-base::_buildModel()","Initial tool model ready.",r),e.resolve()}else window.location=Object(p.getAppRoot)()},error:function(t,r){var o=t&&t.err_msg||"Uncaught error.";401==r?window.location="".concat(Object(p.getAppRoot)(),"user/login?").concat(u.a.param({redirect:"".concat(Object(p.getAppRoot)(),"?tool_id=").concat(a.id)})):i.$el.is(":empty")?i.$el.prepend(new v.a.Message({message:o,status:"danger",persistent:!0}).$el):n.modal&&n.modal.show({title:_()("Tool request failed"),body:o,buttons:{Close:function(){n.modal.hide()}}}),n.emit.debug("tool-form-base::_buildModel()","Initial tool model request failed.",t),e.reject()}})},postchange:function(e,t){var i={tool_id:t.model.get("id"),tool_version:t.model.get("version"),inputs:u.a.extend(!0,{},t.data.create())};t.wait(!0),n.emit.debug("tool-form::postchange()","Sending current state.",i),g.a.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools/").concat(t.model.get("id"),"/build"),data:i,success:function(i){t.update(i),t.wait(!1),n.emit.debug("tool-form::postchange()","Received new model.",i),e.resolve()},error:function(t){n.emit.debug("tool-form::postchange()","Refresh request failed.",t),e.reject()}})}},e)),this.deferred=this.form.deferred,this.setElement("<div/>"),this.$el.append(this.form.$el)},_customize:function(e){var t=this,n=Object(o.a)(),i=e.model.attributes,a=i.inputs;n.config.server_mail_configured&&!n.user.isAnonymous()&&a.push({name:"send_email_notification",label:_()("Email notification"),type:"boolean",value:"false",ignore:"false",help:_()("Send an email notification when the job completes.")});var r,s,l=new v.a.Button({icon:"fa-check",tooltip:"Execute: ".concat(i.name," (").concat(i.version,")"),title:_()("Execute"),cls:"btn btn-primary",wait_cls:"btn btn-info",onclick:function(){l.wait(),e.portlet.disable(),t.submit(i,(function(){l.unwait(),e.portlet.enable()}))}});(i.buttons={execute:l},i.job_id&&i.job_remap)&&("job_produced_collection_elements"===i.job_remap?(r="Replace elements in collection ?",s="The previous run of this tool failed. Use this option to replace the failed element(s) in the dataset collection that were produced during the previous tool run."):(r="Resume dependencies from this job ?",s="The previous run of this tool failed and other tools were waiting for it to finish successfully. Use this option to resume those tools using the new output(s) of this tool run."),i.inputs.push({label:r,name:"rerun_remap_job_id",type:"select",display:"radio",ignore:"__ignore__",value:"__ignore__",options:[["Yes",i.job_id],["No","__ignore__"]],help:s}));var c={};n.user.attributes.preferences&&"extra_user_preferences"in n.user.attributes.preferences&&(c=JSON.parse(n.user.attributes.preferences.extra_user_preferences)),"true"===("use_cached_job|use_cached_job_checkbox"in c&&c["use_cached_job|use_cached_job_checkbox"])&&i.inputs.push({label:"BETA: Attempt to re-use jobs with identical parameters ?",help:"This may skip executing jobs that you have already run",name:"use_cached_job",type:"select",display:"radio",ignore:"__ignore__",value:"__ignore__",options:[["No",!1],["Yes",!0]]})},submit:function(e,t){var n=this,i=Object(o.a)(),a={history_id:i.currHistoryPanel&&i.currHistoryPanel.model.id,tool_id:e.id,tool_version:e.version,inputs:this.form.data.create()};if(this.form.trigger("reset"),!this.validate(a))return i.emit.debug("tool-form::submit()","Submission canceled. Validation failed."),void(t&&t());if(e.action!=="".concat(Object(p.getAppRoot)(),"tool_runner/index")){var s=u()("<form/>").attr({action:e.action,method:e.method,enctype:e.enctype});return r.default.each(a.inputs,(function(e,t){s.append(u()("<input/>").attr({name:t,value:e}))})),s.hide().appendTo("body").submit().remove(),void(t&&t())}i.emit.debug("tool-form::submit()","Validation complete.",a),g.a.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools"),data:a,success:function(e){if(t&&t(),n.$el.children().hide(),e.produces_entry_points){var r,o=P(e.jobs);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=k.default.extend(j),c=document.createElement("div");n.$el.append(c),new l({propsData:{jobId:s.id}}).$mount(c)}}catch(e){o.e(e)}finally{o.f()}}n.$el.append(n._templateSuccess(e,a));var d=i.config.enable_tool_recommendations;if(!0===d||"true"===d){var h=k.default.extend(I),f=document.createElement("div");n.$el.append(f),new h({propsData:{toolId:a.tool_id}}).$mount(f)}n.$el.parent().scrollTop(0),e.jobs&&e.jobs.length>0&&(n.$el.append(u()("<div/>",{id:"webhook-view"})),new w.a.WebhookView({type:"tool",toolId:a.tool_id})),i.currHistoryPanel&&(n.form.stopListening(i.currHistoryPanel.collection),i.currHistoryPanel.refreshContents())},error:function(e){t&&t(),i.emit.debug("tool-form::submit","Submission failed.",e);var r=!1;if(e&&e.err_data){var o=n.form.data.matchResponse(e.err_data);for(var s in o){n.form.highlight(s,o[s]),r=!0;break}}r||n.modal.show({title:_()("Job submission failed"),body:n._templateError(a,e&&e.err_msg),buttons:{Close:function(){n.modal.hide()}}})}})},validate:function(e){var t=Object(o.a)(),n=e.inputs,i=-1,a=null;for(var r in n){var s=n[r],l=this.form.data.match(r),c=this.form.field_list[l],d=this.form.input_list[l];if(l&&d&&c){if(!d.optional&&null==s&&"hidden"!=d.type)return this.form.highlight(l,"This input requires a value."),!1;if(c.validate){var u=c.validate();if(u)return this.form.highlight(l,u),!1}if(s&&s.batch){var h=s.values.length,f=h>0&&s.values[0]&&s.values[0].src;if(f)if(null===a)a=f;else if(a!==f)return this.form.highlight(l,"Please select either dataset or dataset list fields for all batch mode fields."),!1;if(-1===i)i=h;else if(i!==h)return this.form.highlight(l,"Please make sure that you select the same number of inputs for all batch mode fields. This field contains <b>".concat(h,"</b> selection(s) while a previous field contains <b>").concat(i,"</b>.")),!1}}else t.emit.debug("tool-form::validate()","Retrieving input objects failed.")}return!0},_getInputs:function(e){var t=[],n={};for(var i in e.inputs){var a=e.inputs[i];if(a&&Array.isArray(a.values)){var r,o=P(a.values);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.src&&!n[s.id]&&(t.push(s),n[s.id]=!0)}}catch(e){o.e(e)}finally{o.f()}}}return t},_templateRow:function(e,t){var n="";if(e.length>0){n+="<p>".concat(t,":</p>"),e.sort((function(e,t){t.hid,e.hid})),n+="<ul>";var i,a=P(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s="".concat(o.hid,": ").concat(r.default.escape(o.name));n+="<li><b>".concat(s,"</b></li>")}}catch(e){a.e(e)}finally{a.f()}n+="</ul>"}return n},_templateSuccess:function(e,t){var n=e&&e.jobs?e.jobs.length:0;if(n>0){var i=this._getInputs(t),a=i.length,r=e.outputs.length,o=n>1?"".concat(n," jobs"):"1 job",s=a>1?"".concat(a," inputs"):"this input",l=r>1?"".concat(r," outputs"):"this output",c=this.form.model.get("name");return'<div class="donemessagelarge">\n                        <p>\n                            Executed <b>'.concat(c,"</b> and successfully added ").concat(o," to the queue.\n                        </p>\n                        ").concat(this._templateRow(i,"The tool uses ".concat(s)),"\n                        ").concat(this._templateRow(e.outputs,"It produces ".concat(l)),"\n                        <p>\n                            You can check the status of queued jobs and view the resulting data by refreshing the History panel. When the job has been run the status will change from 'running' to 'finished' if completed successfully or 'error' if problems were encountered.\n                        </p>\n                    </div>")}return this._templateError(e,"Invalid success response. No jobs found.")},_templateError:function(e,t){return u()("<div/>").addClass("errormessagelarge").append(u()("<p/>").text("The server could not complete the request. Please contact the Galaxy Team if this error persists. ".concat(t||""))).append(u()("<pre/>").text(JSON.stringify(e,null,4)))}})},H=n(434),N=n(14),$=n(23),F=n(20),W=n(17);k.default.use(N.a);var z={props:{slug:{type:String,required:!0}},data:function(){return{slugInput:this.slug}},mounted:function(){this.$refs.input.select()},methods:{onChange:function(){var e=this.slugInput.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase();this.$emit("onChange",e)},onCancel:function(){this.$emit("onChange",this.slug)}}},U=Object(T.a)(z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-input",{ref:"input",staticClass:"d-inline w-auto h-auto px-1 py-0",on:{change:e.onChange,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onChange(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onCancel(t)}]},model:{value:e.slugInput,callback:function(t){e.slugInput=t},expression:"slugInput"}})}),[],!1,null,null,null).exports;k.default.use(N.a),F.c.add(W.w),F.c.add(W.l);var V={components:{FontAwesomeIcon:$.a,SlugInput:U},props:{id:{type:String,required:!0},plural_name:{type:String,required:!0},model_class:{type:String,required:!0}},data:function(){return{ready:!1,hasUsername:Object(o.a)().user.get("username"),newUsername:"",errMsg:null,item:{title:"title",username_and_slug:"username/slug",importable:!1,published:!1,users_shared_with:[]},shareFields:["email",{key:"id",label:""}],makeMembersPublic:!1,showUrl:!0,tooltipClipboard:"Copy URL"}},computed:{modelClassLower:function(){return this.model_class.toLowerCase()},pluralNameLower:function(){return this.plural_name.toLowerCase()},itemStatus:function(){return this.item.published?"accessible via link and published":"accessible via link"},itemRoot:function(){var e=window.location.port?":".concat(window.location.port):"";return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(e).concat(Object(p.getAppRoot)())},itemUrl:function(){return"".concat(this.itemRoot).concat(this.item.username_and_slug)},itemSlugParts:function(){var e=this.item.username_and_slug,t=e.lastIndexOf("/");return[e.substring(0,t+1),e.substring(t+1)]},itemUrlParts:function(){var e=this.itemUrl,t=e.lastIndexOf("/");return[e.substring(0,t+1),e.substring(t+1)]},published_url:function(){return"".concat(Object(p.getAppRoot)()).concat(this.pluralNameLower,"/list_published")},shareUrl:function(){return"".concat(Object(p.getAppRoot)()).concat(this.modelClassLower,"/share/?id=").concat(this.id)},slugUrl:function(){return"".concat(Object(p.getAppRoot)()).concat(this.modelClassLower,"/set_slug_async/?id=").concat(this.id)},showDanger:function(){return null!==this.errMsg}},created:function(){this.getModel()},methods:{onCopy:function(){var e=document.createElement("input");document.body.appendChild(e),e.value=this.itemUrl,e.select(),document.execCommand("copy"),document.body.removeChild(e),this.tooltipClipboard="Copied!"},onCopyOut:function(){this.tooltipClipboard="Copy URL"},onEdit:function(){this.showUrl=!1},onChange:function(e){var t=this;this.showUrl=!0,this.item.username_and_slug="".concat(this.itemSlugParts[0]).concat(e);var n="".concat(this.slugUrl,"&new_slug=").concat(e);S.a.get(n).catch((function(e){return t.errMsg=e.response.data.err_msg}))},onImportable:function(e){e?this.setSharing("make_accessible_via_link-".concat(this.item.published?"publish":"unpublish")):(this.item.published=!1,this.setSharing("disable_link_access-unpublish"))},onPublish:function(e){e?(this.item.importable=!0,this.setSharing("make_accessible_and_publish")):this.setSharing("unpublish")},getModel:function(){var e=this;this.ready=!1,S.a.get("".concat(Object(p.getAppRoot)(),"api/").concat(this.pluralNameLower,"/").concat(this.id,"/sharing")).then((function(t){e.item=t.data,e.ready=!0})).catch((function(t){return e.errMsg=t.response.data.err_msg}))},setUsername:function(){var e=this,t=Object(o.a)();S.a.put("".concat(Object(p.getAppRoot)(),"api/users/").concat(t.user.id,"/information/inputs"),{username:this.newUsername||""}).then((function(t){e.errMsg=null,e.hasUsername=!0,e.getModel()})).catch((function(t){return e.errMsg=t.response.data.err_msg}))},setSharing:function(e,t){var n=this,i={action:e,user_id:t};return S.a.post("".concat(Object(p.getAppRoot)(),"api/").concat(this.pluralNameLower,"/").concat(this.id,"/sharing"),i).then((function(e){e.data.skipped&&(n.errMsg="Some of the items within this object were not published due to an error."),n.item=e.data,n.ready=!0})).catch((function(e){return n.errMsg=e.response.data.err_msg}))}}},B=Object(T.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready?n("div",[n("h3",[e._v("Share or Publish "+e._s(e.model_class)+" `"+e._s(e.item.title)+"`")]),e._v(" "),n("b-alert",{attrs:{show:e.showDanger,variant:"danger",dismissible:""}},[e._v(" "+e._s(e.errMsg)+" ")]),e._v(" "),n("br"),e._v(" "),e.hasUsername?n("div",[n("b-form-checkbox",{staticClass:"make-accessible",attrs:{switch:""},on:{change:e.onImportable},model:{value:e.item.importable,callback:function(t){e.$set(e.item,"importable",t)},expression:"item.importable"}},[e._v("\n            Make "+e._s(e.model_class)+" accessible\n        ")]),e._v(" "),e.item.importable?n("b-form-checkbox",{staticClass:"make-publishable",attrs:{switch:""},on:{change:e.onPublish},model:{value:e.item.published,callback:function(t){e.$set(e.item,"published",t)},expression:"item.published"}},[e._v("\n            Make "+e._s(e.model_class)+" publicly available in\n            "),n("a",{attrs:{href:e.published_url,target:"_top"}},[e._v("Published "+e._s(e.plural_name))])]):e._e(),e._v(" "),n("br"),e._v(" "),e.item.importable?n("div",[n("div",[e._v("\n                This "+e._s(e.model_class)+" is currently "),n("strong",[e._v(e._s(e.itemStatus))]),e._v(".\n            ")]),e._v(" "),n("p",[e._v("Anyone can view and import this "+e._s(e.model_class)+" by visiting the following URL:")]),e._v(" "),n("blockquote",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit URL",variant:"link",size:"sm"},on:{click:e.onEdit}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),e._v(" "),n("b-button",{attrs:{id:"tooltip-clipboard",variant:"link",size:"sm"},on:{click:e.onCopy,mouseout:e.onCopyOut}},[n("font-awesome-icon",{attrs:{icon:"link"}})],1),e._v(" "),n("b-tooltip",{attrs:{target:"tooltip-clipboard",triggers:"hover"}},[e._v("\n                    "+e._s(e.tooltipClipboard)+"\n                ")]),e._v(" "),e.showUrl?n("a",{staticClass:"ml-2",attrs:{id:"item-url",href:e.itemUrl,target:"_top"}},[e._v("\n                    url:\n                    "+e._s(e.itemUrl)+"\n                ")]):n("span",{attrs:{id:"item-url-text"}},[e._v("\n                    slug:\n                    "+e._s(e.itemUrlParts[0])),n("SlugInput",{staticClass:"ml-1",attrs:{slug:e.itemUrlParts[1]},on:{onChange:e.onChange}})],1)],1)]):n("div",[e._v("\n            Access to this "+e._s(e.model_class)+" is currently restricted so that only you and the users listed below can\n            access it. Note that sharing a History will also allow access to all of its datasets.\n        ")]),e._v(" "),n("br"),e._v(" "),n("h4",[e._v("Share "+e._s(e.model_class)+" with Individual Users")]),e._v(" "),n("div",[e.item.users_shared_with&&e.item.users_shared_with.length>0?n("div",[n("b-table",{attrs:{small:"","caption-top":"",fields:e.shareFields,items:e.item.users_shared_with},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                        The following users will see this "+e._s(e.model_class)+" in their "+e._s(e.model_class)+" list and will\n                        be able to view, import and run it.\n                    ")]},proxy:!0},{key:"cell(id)",fn:function(t){return[n("b-button",{staticClass:"unshare_user",attrs:{size:"sm"},on:{click:function(n){return n.stopPropagation(),e.setSharing("unshare_user",t.value)}}},[e._v("Remove")])]}}],null,!1,1606674453)})],1):n("div",[n("p",[e._v("You have not shared this "+e._s(e.model_class)+" with any users.")])]),e._v(" "),n("b-button",{attrs:{href:e.shareUrl,id:"share_with_a_user"}},[n("span",[e._v("Share with a user")])])],1)],1):n("div",[n("div",[e._v("To make a "+e._s(e.model_class)+" accessible via link or publish it, you must create a public username:")]),e._v(" "),n("form",{staticClass:"form-group",on:{submit:function(t){return t.preventDefault(),e.setUsername()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUsername,expression:"newUsername"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newUsername},on:{input:function(t){t.target.composing||(e.newUsername=t.target.value)}}})]),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(t){return e.setUsername()}}},[e._v("Set Username")])],1)],1):e._e()}),[],!1,null,null,null).exports,q=n(68),G=function(e){var t=Object(o.a)(),n=t.config;return e=e||t.user.id,{information:{title:_()("Manage Information"),id:"edit-preferences-information",description:"Edit your email, addresses and custom parameters or change your public name.",url:"api/users/".concat(e,"/information/inputs"),icon:"fa-user",redirect:"user",shouldRender:!n.use_remote_user},password:{title:_()("Change Password"),id:"edit-preferences-password",description:_()("Allows you to change your login credentials."),icon:"fa-unlock-alt",url:"api/users/".concat(e,"/password/inputs"),submit_title:"Save Password",redirect:"user",shouldRender:!n.use_remote_user},external_ids:{title:_()("Manage Third-Party Identities"),id:"manage-third-party-identities",description:_()("Connect or disconnect access to your third-party identities."),icon:"fa-id-card-o",submit_title:"Disconnect identity",submit_icon:"fa-trash",shouldRender:n.enable_oidc},permissions:{title:_()("Set Dataset Permissions for New Histories"),id:"edit-preferences-permissions",description:"Grant others default access to newly created histories. Changes made here will only affect histories created after these settings have been stored.",url:"api/users/".concat(e,"/permissions/inputs"),icon:"fa-users",submit_title:"Save Permissions",redirect:"user",shouldRender:!n.single_user},make_data_private:{title:_()("Make All Data Private"),id:"edit-preferences-make-data-private",description:_()("Click here to make all data private."),icon:"fa-lock",shouldRender:!n.single_user},api_key:{title:_()("Manage API Key"),id:"edit-preferences-api-key",description:_()("Access your current API key or create a new one."),url:"api/users/".concat(e,"/api_key/inputs"),icon:"fa-key",submit_title:"Create a new Key",submit_icon:"fa-check"},cloud_auth:{id:"edit-preferences-cloud-auth",title:_()("Manage Cloud Authorization"),description:_()("Add or modify the configuration that grants Galaxy to access your cloud-based resources."),icon:"fa-cloud",submit_title:"Create a new Key",submit_icon:"fa-check"},toolbox_filters:{title:_()("Manage Toolbox Filters"),id:"edit-preferences-toolbox-filters",description:_()("Customize your Toolbox by displaying or omitting sets of Tools."),url:"api/users/".concat(e,"/toolbox_filters/inputs"),icon:"fa-filter",submit_title:"Save Filters",redirect:"user",shouldRender:!!n.has_user_tool_filters},custom_builds:{title:_()("Manage Custom Builds"),description:_()("Add or remove custom builds using history datasets."),icon:"fa-cubes"},logout:{title:_()("Sign Out"),id:"edit-preferences-sign-out",description:_()("Click here to sign out of all sessions."),icon:"fa-sign-out",shouldRender:!!t.session_csrf_token&&!n.single_user}}},J=n(33);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z={computed:X({},Object(J.c)("config",["config"])),methods:X({},Object(J.b)("config",["loadConfigs"])),created:function(){this.loadConfigs()},render:function(){return this.$scopedSlots.default({config:this.config})}},ee=n(226);function te(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}k.default.use(N.a);var ne={props:{userId:{type:String,required:!0},enableQuotas:{type:Boolean,required:!0}},components:{ConfigProvider:Z},data:function(){return{email:"",diskUsage:"",quotaUsageString:"",baseUrl:"".concat(Object(p.getAppRoot)(),"user"),messageVariant:null,message:null,name:"",nameState:null,deleteError:"",submittedNames:[]}},created:function(){var e=this,t=q.a.get("message"),n=q.a.get("status");t&&n&&(this.message=t,this.messageVariant=n),S.a.get("".concat(Object(p.getAppRoot)(),"api/users/").concat(this.userId)).then((function(t){e.email=t.data.email,e.diskUsage=t.data.nice_total_disk_usage,e.quotaUsageString=e.enableQuotas?"Your disk quota is: <strong>".concat(t.data.quota,"</strong>."):""}))},computed:{activeLinks:function(){var e={},t=G();for(var n in t)if(!1!==t[n].shouldRender)switch(e[n]=t[n],n){case"make_data_private":e[n].onclick=this.makeDataPrivate;break;case"custom_builds":e[n].onclick=this.openManageCustomBuilds;break;case"logout":e[n].onclick=this.signOut;break;default:e[n].action=n}return e},showDeleteError:function(){return""!==this.deleteError}},methods:{toggleNotifications:function(){Notification.requestPermission().then((function(e){"granted"===e?new Notification("Notifications enabled",{icon:"static/favicon.ico"}):alert("Notifications disabled, please re-enable through browser settings.")}))},openManageCustomBuilds:function(){Object(o.a)().page.router.push("".concat(Object(p.getAppRoot)(),"custom_builds"))},makeDataPrivate:function(){var e=Object(o.a)();confirm(_()("WARNING: This will make all datasets (excluding library datasets) for which you have 'management' permissions, in all of your histories private, and will set permissions such that all of your new data in these histories is created as private.  Any datasets within that are currently shared will need to be re-shared or published.  Are you sure you want to do this?"))&&S.a.post("".concat(Object(p.getAppRoot)(),"history/make_private?all_histories=true")).then((function(t){e.modal.show({title:_()("Datasets are now private"),body:"All of your histories and datsets have been made private.  If you'd like to make all *future* histories private please use the <a href=\"".concat(e.root,'user/permissions">User Permissions</a> interface.'),buttons:{Close:function(){e.modal.hide()}}})}))},signOut:function(){var e=Object(o.a)();e.modal.show({title:_()("Sign out"),body:"Do you want to continue and sign out of all active sessions?",buttons:{Cancel:function(){e.modal.hide()},"Sign out":ee.c}})},checkFormValidity:function(){var e=this.$refs.form.checkValidity();return this.nameState=e,e},resetModal:function(){this.name="",this.nameState=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkFormValidity()){e.next=2;break}return e.abrupt("return",!1);case 2:if(t.email!==t.name){e.next=17;break}return t.nameState=!0,e.prev=4,e.next=7,S.a.delete("".concat(Object(p.getAppRoot)(),"api/users/").concat(t.userId));case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(4),403!==e.t0.response.status){e.next=14;break}return t.deleteError="User deletion must be configured on this instance in order to allow user self-deletion.  Please contact an administrator for assistance.",e.abrupt("return",!1);case 14:Object(ee.d)(),e.next=19;break;case 17:return t.nameState=!1,e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[4,9]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){te(r,i,a,o,s,"next",e)}function s(e){te(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}},ie=(n(1601),Object(T.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"p-0",attrs:{fluid:""}},[n("h2",[e._v("User preferences")]),e._v(" "),n("b-alert",{attrs:{variant:e.messageVariant,show:!!e.message}},[e._v("\n        "+e._s(e.message)+"\n    ")]),e._v(" "),n("p",[e._v("\n        You are logged in as "),n("strong",{attrs:{id:"user-preferences-current-email"}},[e._v(e._s(e.email))]),e._v(".\n    ")]),e._v(" "),e._l(e.activeLinks,(function(t,i){return n("b-row",{key:i,staticClass:"ml-3 mb-1"},[n("i",{class:["pref-icon pt-1 fa fa-lg",t.icon]}),e._v(" "),n("div",{staticClass:"pref-content pr-1"},[t.onclick?n("a",{attrs:{id:t.id,href:"javascript:void(0)"},on:{click:t.onclick}},[n("b",[e._v(e._s(t.title))])]):n("a",{attrs:{id:t.id,href:e.baseUrl+"/"+t.action}},[n("b",[e._v(e._s(t.title))])]),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("\n                "+e._s(t.description)+"\n            ")])])])})),e._v(" "),n("b-row",{staticClass:"ml-3 mb-1"},[n("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-plus-square-o"}),e._v(" "),n("div",{staticClass:"pref-content pr-1"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.toggleNotifications}},[n("b",[e._v("Enable notifications")])]),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("\n                Allow push and tab notifcations on job completion. To disable, revoke the site notification\n                privilege in your browser.\n            ")])])]),e._v(" "),n("ConfigProvider",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.config;return[i&&!i.single_user?n("b-row",{staticClass:"ml-3 mb-1"},[n("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-radiation"}),e._v(" "),n("div",{staticClass:"pref-content pr-1"},[n("a",{attrs:{id:"delete-account",href:"javascript:void(0)"}},[n("b",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}]},[e._v("Delete Account")])]),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("Delete your account on this Galaxy server.")]),e._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",centered:"",title:"Account Deletion","title-tag":"h2"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[n("p",[n("b-alert",{attrs:{variant:"danger",show:e.showDeleteError}},[e._v(e._s(e.deleteError))]),e._v(" "),n("b",[e._v("\n                            This action cannot be undone. Your account will be permanently deleted, along with the\n                            data contained in it.\n                        ")])],1),e._v(" "),n("b-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("b-form-group",{attrs:{state:e.nameState,label:"Enter your user email for this account as confirmation.","label-for":"Email","invalid-feedback":"Incorrect email"}},[n("b-form-input",{attrs:{id:"name-input",state:e.nameState,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1)],1)]):e._e()]}}])}),e._v(" "),n("p",{staticClass:"mt-2"},[e._v("\n        You are using "),n("strong",[e._v(e._s(e.diskUsage))]),e._v(" of disk space in this Galaxy instance.\n        "),n("span",{domProps:{innerHTML:e._s(e.quotaUsageString)}}),e._v("\n        Is your usage more than expected? See the\n        "),n("a",{attrs:{href:"https://galaxyproject.org/learn/managing-datasets/",target:"_blank"}},[n("b",[e._v("documentation")])]),e._v(" for\n        tips on how to find all of the data in your account.\n    ")])],2)}),[],!1,null,"fdfb2288",null).exports),ae=n(164);k.default.use(N.a);var re={props:{item:Object},computed:{getName:function(){return this.item.name||"Unavailable"},isError:function(){return"error"===this.item.state},isPaused:function(){return"paused"===this.item.state}},methods:{copyDataset:function(e){this.$emit("copyDataset",this.item)},showDataset:function(e){this.$emit("showDataset",this.item)}}},oe=(n(1602),Object(T.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-link",{staticClass:"workflow-dropdown font-weight-bold p-2",attrs:{id:"dataset-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e.isError?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon error fa fa-times-circle text-danger",attrs:{title:"An error occurred for this dataset."}}):e.isPaused?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon pause fa fa-pause text-info",attrs:{title:"The creation of this dataset has been paused."}}):n("span",{staticClass:"dataset-icon fa fa-caret-down"}),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(this.getName))])]),e._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dataset-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDataset(t)}}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),n("span",[e._v("Show in History")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.copyDataset(t)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),n("span",[e._v("Copy to History")])])])],1)}),[],!1,null,"1281dd7a",null).exports);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de={props:{item:Object},computed:le(le({},Object(J.c)(["getHistoryNameById"])),{},{historyName:function(){return this.getHistoryNameById(this.item.history_id)}})},ue=Object(T.a)(de,(function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    "+this._s(this.historyName)+"\n")])}),[],!1,null,null,null).exports,he=n(273),fe=n(97),pe=n(241),me=n(29);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye={components:{DatasetHistory:ue,DatasetName:oe,LoadingSpan:me.a,DelayedInput:he.a,UtcDate:fe.a,Tags:pe.a},data:function(){return{error:null,scrolled:!1,fields:[{key:"name",sortable:!0},{key:"tags",sortable:!1},{label:"History",key:"history_id",sortable:!0},{key:"extension",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{key:"context",label:"",sortable:!1}],query:"",limit:50,offset:0,sortBy:"update_time",sortDesc:!0,loading:!0,message:null,messageVariant:null,rows:[]}},computed:{showNotFound:function(){return!this.loading&&0===this.rows.length&&this.query},showNotAvailable:function(){return!this.loading&&0===this.rows.length&&!this.query},showMessage:function(){return!!this.message}},created:function(){this.fetchHistories(),this.root=Object(p.getAppRoot)(),this.services=new ae.a({root:this.root}),this.load()},methods:ge(ge({},Object(J.b)(["fetchHistories"])),{},{load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.services.getDatasets({query:this.query,sortBy:this.sortBy,sortDesc:this.sortDesc,offset:this.offset,limit:this.limit}).then((function(n){e.rows=t?e.rows.concat(n):n,e.loading=!1})).catch((function(t){e.error=t}))},onCopyDataset:function(e){var t=this,n=Object(o.a)().currHistoryPanel,i=e.id,a=n.model.id;this.services.copyDataset(i,a).then((function(e){n.loadCurrentHistory()})).catch((function(e){t.onError(e)}))},onShowDataset:function(e){var t=this,n=Object(o.a)();this.services.setHistory(e.history_id).then((function(e){n.currHistoryPanel.loadCurrentHistory()})).catch((function(e){t.onError(e)}))},onTags:function(e,t){var n=this,i=this.rows[t];i.tags=e,this.services.updateTags(i.id,"HistoryDatasetAssociation",e).catch((function(e){n.onError(e)}))},onQuery:function(e){this.query=e,this.offset=0,this.load()},onSort:function(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.offset=0,this.load()},onScroll:function(e){var t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.offset+this.limit<=this.rows.length&&(this.offset+=this.limit,this.load(!0))},onSuccess:function(e){this.message=e,this.messageVariant="success"},onError:function(e){this.message=e,this.messageVariant="danger"}})},be=Object(T.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"overflow-auto h-100",on:{scroll:e.onScroll}},[e.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):n("div",[n("b-alert",{attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),n("delayed-input",{staticClass:"mb-3",attrs:{placeholder:"Search Datasets"},on:{onChange:e.onQuery}}),e._v(" "),n("b-table",{attrs:{id:"dataset-table",striped:"","no-local-sorting":"",fields:e.fields,items:e.rows},on:{"sort-changed":e.onSort},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("DatasetName",{attrs:{item:t.item},on:{showDataset:e.onShowDataset,copyDataset:e.onCopyDataset}})]}},{key:"cell(history_id)",fn:function(e){return[n("DatasetHistory",{attrs:{item:e.item}})]}},{key:"cell(tags)",fn:function(t){return[n("Tags",{attrs:{index:t.index,tags:t.item.tags},on:{input:e.onTags}})]}},{key:"cell(update_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}])}),e._v(" "),e.loading?n("loading-span",{attrs:{message:"Loading datasets"}}):e._e(),e._v(" "),e.showNotFound?n("div",[e._v("\n            No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(this.query))]),e._v(".\n        ")]):e._e(),e._v(" "),e.showNotAvailable?n("div",[e._v("No datasets found.")]):e._e()],1)])}),[],!1,null,null,null).exports,we=n(503),ke=n.n(we);n(843);k.default.use(N.a);var xe={components:{Multiselect:ke.a},data:function(){var e=Object(o.a)();return{customBuildsUrl:"".concat(e.root,"api/users/").concat(e.user.id,"/custom_builds"),selectedInstalledBuilds:[],installedBuilds:[],maxFileSize:100,fileLoaded:0,fields:[{key:"name",label:"Name"},{key:"id",label:"Key"},{key:"count",label:"Number of chroms/contigs"},{key:"action",label:""}],customBuilds:[],alertType:"info",alertMessage:"",dismissSecs:5,dismissCountDown:0,form:{id:"",name:"",file:"",text:""},dataSources:[{value:"fasta",text:"FASTA-file from history"},{value:"file",text:"Len-file from disk"},{value:"text",text:"Len-file by copy/paste"}],selectedDataSource:"fasta",fastaFilesLoading:!0,fastaFilesSelectDisabled:!0,fastaFiles:[],selectedFastaFile:null}},computed:{lengthType:function(){return this.selectedDataSource||""},lengthValue:function(){var e="";return"fasta"===this.lengthType?e=this.selectedFastaFile||"":"file"===this.lengthType?e=this.form.file:"text"===this.lengthType&&(e=this.form.text),e}},created:function(){var e=Object(o.a)(),t=e.currHistoryPanel&&e.currHistoryPanel.model.id;this.loadCustomBuilds(),t?this.loadCustomBuildsMetadata(t):this.fastaFilesLoading=!1},methods:{loadCustomBuilds:function(){var e=this;S.a.get(this.customBuildsUrl).then((function(t){e.customBuilds=t.data})).catch((function(t){e.showAlert("danger",t.response)}))},loadCustomBuildsMetadata:function(e){var t=this,n=Object(o.a)();S.a.get("".concat(n.root,"api/histories/").concat(e,"/custom_builds_metadata")).then((function(e){for(var n=e.data.fasta_hdas,i=0;i<n.length;i++)n[i].text=n[i].label;n&&n.length>0&&(t.fastaFiles=n,t.selectedFastaFile=n[0].value,t.fastaFilesSelectDisabled=!1),t.fastaFilesLoading=!1,t.installedBuilds=e.data.installed_builds;for(var a=0;a<t.installedBuilds.length;a++)t.installedBuilds[a].text=t.installedBuilds[a].label})).catch((function(e){t.showAlert("danger",e.response),t.fastaFilesLoading=!1}))},save:function(e){var t=this,n={id:this.form.id,name:this.form.name,"len|type":this.lengthType,"len|value":this.lengthValue};if(!n.id.trim()||!n.name.trim()||!n["len|value"].trim())return this.showAlert("danger","All inputs are required."),!1;S.a.put("".concat(this.customBuildsUrl,"/").concat(n.id),n).then((function(e){e.data.message?t.showAlert("warning",e.data.message):t.showAlert("success","Successfully added a new custom build."),t.loadCustomBuilds()})).catch((function(e){var n=e.response.data.err_msg;t.showAlert("danger",n||"Failed to create custom build.")}))},deleteBuild:function(e){var t=this;S.a.delete("".concat(this.customBuildsUrl,"/").concat(e)).then((function(n){t.customBuilds=t.customBuilds.filter((function(t){return t.id!==e}))})).catch((function(e){var n=e.response.data.err_msg;t.showAlert("danger",n||"Failed to delete custom build.")}))},readFile:function(e){var t=this,n=e.target.files&&e.target.files[0];if(n){var i=new FileReader;i.onprogress=function(e){e.lengthComputable&&(t.fileLoaded=100*Math.round(e.loaded/e.total))},i.onload=function(){t.fileLoaded=0,t.form.file=i.result},i.readAsText(n)}},showAlert:function(e,t){this.alertType=e,this.alertMessage=t,this.dismissCountDown=this.dismissSecs},countDownChanged:function(e){this.dismissCountDown=e}}},Se=(n(1603),Object(T.a)(xe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("b-col",[n("h4",[e._v("Current Custom Builds")])])],1),e._v(" "),n("b-row",[n("b-col",[n("b-table",{staticClass:"grid",attrs:{small:"","show-empty":"",items:e.customBuilds,fields:e.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{href:"javascript:void(0)",title:"Delete build"},on:{click:function(n){return e.deleteBuild(t.item.id)}}},[n("i",{staticClass:"icon fa fa-lg fa-trash-o"})])]}}])})],1)],1),e._v(" "),e.installedBuilds.length>0?[n("b-row",{staticClass:"mt-2"},[n("b-col",[n("h4",[e._v("System Installed Builds")])])],1),e._v(" "),n("b-row",[n("b-col",{staticClass:"mb-4",attrs:{id:"installed-builds"}},[n("multiselect",{attrs:{multiple:"",taggable:"",label:"label","track-by":"value",searchable:!1,options:e.installedBuilds},model:{value:e.selectedInstalledBuilds,callback:function(t){e.selectedInstalledBuilds=t},expression:"selectedInstalledBuilds"}})],1)],1)]:e._e(),e._v(" "),n("b-row",[n("b-col",[n("h4",[e._v("Add a Custom Build")])])],1),e._v(" "),n("b-row",[n("b-col",[n("b-card",[n("b-alert",{attrs:{fade:"",dismissible:"",variant:e.alertType,show:e.dismissCountDown},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v("\n                        "+e._s(e.alertMessage)+"\n                    ")]),e._v(" "),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("b-form-group",{attrs:{label:"Name",description:"Specify a build name, e.g. Hamster.","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",tour_id:"name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Key",description:"Specify a build key, e.g. hamster_v1.","label-for":"id"}},[n("b-form-input",{attrs:{id:"id",tour_id:"id",required:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Definition",description:"Provide the data source.","label-for":"type"}},[n("b-form-select",{attrs:{id:"type",tour_id:"type",options:e.dataSources},model:{value:e.selectedDataSource,callback:function(t){e.selectedDataSource=t},expression:"selectedDataSource"}})],1),e._v(" "),n("div",["fasta"===e.selectedDataSource?n("b-form-group",{attrs:{label:"FASTA-file"}},[n("b-form-select",{attrs:{options:e.fastaFiles,disabled:e.fastaFilesSelectDisabled},model:{value:e.selectedFastaFile,callback:function(t){e.selectedFastaFile=t},expression:"selectedFastaFile"}})],1):e._e(),e._v(" "),"file"===e.selectedDataSource?n("b-form-group",{attrs:{label:"Len-file"}},[n("b-form-file",{attrs:{placeholder:"Choose a file..."},on:{change:e.readFile}}),e._v(" "),n("b-progress",{directives:[{name:"show",rawName:"v-show",value:0!==e.fileLoaded,expression:"fileLoaded !== 0"}],attrs:{animated:"","show-progress":"",value:e.fileLoaded,max:e.maxFileSize}}),e._v(" "),n("b-form-textarea",{directives:[{name:"show",rawName:"v-show",value:e.form.file,expression:"form.file"}],attrs:{value:e.form.file}})],1):e._e(),e._v(" "),"text"===e.selectedDataSource?n("b-form-group",{attrs:{label:"Edit/Paste"}},[n("b-form-textarea",{attrs:{id:"len-file-text-area"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1):e._e()],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{id:"save",type:"submit",variant:"primary",title:"Create new build"}},[n("i",{staticClass:"icon fa fa-save"}),e._v(" Save\n                        ")])],1)],1)],1),e._v(" "),n("b-col",["fasta"===e.selectedDataSource?n("b-card",{staticClass:"alert-info"},[n("h4",[e._v("FASTA format")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("\n                        This is a multi-fasta file from your current history that provides the genome sequences for each\n                        chromosome/contig in your build.\n                    ")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("Here is a snippet from an example multi-fasta file:")]),e._v(" "),n("pre",{staticClass:"card-text"},[e._v(">chr1\nATTATATATAAGACCACAGAGAGAATATTTTGCCCGG...\n\n>chr2\nGGCGGCCGCGGCGATATAGAACTACTCATTATATATA...\n\n...")])]):n("b-card",{staticClass:"alert-info"},[n("h4",[e._v("Length Format")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("The length format is two-column, separated by whitespace, of the form:")]),e._v(" "),n("pre",{staticClass:"card-text"},[e._v("chrom/contig   length of chrom/contig")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("For example, the first few entries of "),n("em",[e._v("mm9.len")]),e._v(" are as follows:")]),e._v(" "),n("pre",{staticClass:"card-text"},[e._v("chr1    197195432\nchr2    181748087\nchr3    159599783\nchr4    155630120\nchr5    152537259")]),e._v(" "),n("p",{staticClass:"card-text"},[e._v("\n                        Trackster uses this information to populate the select box for chrom/contig, andto set the\n                        maximum basepair of the track browser. You may either upload a .len fileof this format (Len File\n                        option), or directly enter the information into the box (Len Entry option).\n                    ")])])],1)],1)],2)}),[],!1,null,"d6e155ea",null).exports),Ce=n(213),Me=n(85),Te=n(156),je={View:f.a.View.extend({initialize:function(e){var t=this,n=Object(o.a)();Te.a.markViewAsLoading(this),this.model=new f.a.Model(e),this.item=this.model.get("item"),this.title=this.model.get("plural"),e&&e.active_tab&&(this.active_tab=e.active_tab),u.a.ajax({url:"".concat(Object(p.getAppRoot)()+this.item,"/").concat(this.model.get("action_id"),"?").concat(u.a.param(n.params)),success:function(e){t.model.set(e),t.render()}})},render:function(){var e=new Me.a(this.model.attributes);this.$el.empty().append(e.$el),this.$el.append(this._templateShared())},_templateShared:function(){var e=this,t=u()("<div><br/><h2>".concat(this.model.get("plural")," shared with you by others</h2></div>")),n=this.model.attributes;if(n.shared_by_others&&n.shared_by_others.length>0){var i=u()('<table class="colored" border="0" cellspacing="0" cellpadding="0" width="100%"><tr class="header"><th>Title</th><th>Owner</th></tr></table>');r.default.each(n.shared_by_others,(function(t,n){var a="".concat(Object(p.getAppRoot)()+e.item,"/display_by_username_and_slug?username=").concat(t.username,"&slug=").concat(t.slug);i.append('<tr><td><a href="'.concat(a,'">').concat(r.default.escape(t.title),"</a></td><td>").concat(r.default.escape(t.username),"</td></tr>"))})),t.append(i)}else t.append("No ".concat(this.model.get("plural").toLowerCase()," have been shared with you."));return t}})};function Oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.location=n?"".concat(e,"workflows/run?id=").concat(t.id):"".concat(e,"workflows/list?message=").concat(t.message,"&status=success")}k.default.use(N.a);var De={data:function(){var e=Object(o.a)();return{sourceFile:null,sourceURL:null,errorMessage:null,myexperiment_target_url:"http://".concat(e.config.myexperiment_target_url,"/galaxy?galaxy_url=").concat(window.location.protocol,"//").concat(window.location.host)}},computed:{hasErrorMessage:function(){return null!=this.errorMessage},trsSearchHref:function(){return"".concat(Object(p.getAppRoot)(),"workflows/trs_search")},trsImportHref:function(){return"".concat(Object(p.getAppRoot)(),"workflows/trs_import")}},methods:{submit:function(e){var t=this;if(e.preventDefault(),this.sourceFile||this.sourceURL){var n=new FormData;n.append("archive_file",this.sourceFile),n.append("archive_source",this.sourceURL),S.a.post("".concat(Object(p.getAppRoot)(),"api/workflows"),n).then((function(e){Oe(Object(p.getAppRoot)(),e.data)})).catch((function(e){var n=e.response.data&&e.response.data.err_msg;t.errorMessage=n||"Import failed for an unknown reason."}))}else this.errorMessage="You must provide a workflow archive URL or file."}}},Le=Object(T.a)(De,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:e.submit}},[n("b-card",{attrs:{title:"Import Workflow"}},[n("b-alert",{attrs:{show:e.hasErrorMessage,variant:"danger"}},[e._v(e._s(e.errorMessage))]),e._v(" "),n("p",[e._v("Please provide a Galaxy workflow export URL or a workflow file.")]),e._v(" "),n("b-form-group",{attrs:{label:"Archived Workflow URL"}},[n("b-form-input",{attrs:{id:"workflow-import-url-input",type:"url"},model:{value:e.sourceURL,callback:function(t){e.sourceURL=t},expression:"sourceURL"}}),e._v("\n            If the workflow is accessible via a URL, enter the URL above and click Import.\n        ")],1),e._v(" "),n("b-form-group",{attrs:{label:"Archived Workflow File"}},[n("b-form-file",{model:{value:e.sourceFile,callback:function(t){e.sourceFile=t},expression:"sourceFile"}}),e._v("\n            If the workflow is in a file on your computer, choose it and then click Import.\n        ")],1),e._v(" "),n("b-button",{attrs:{id:"workflow-import-button",type:"submit"}},[e._v("Import workflow")]),e._v(" "),n("div",{staticClass:"mt-4"},[n("h4",[e._v("Import a Workflow from Configured GA4GH Tool Registry Servers (e.g. Dockstore)")]),e._v("\n            Use either the Galaxy "),n("a",{attrs:{href:e.trsSearchHref}},[e._v("search form")]),e._v(" or\n            "),n("a",{attrs:{href:e.trsImportHref}},[e._v("import from a TRS ID")]),e._v(".\n        ")]),e._v(" "),n("div",{staticClass:"mt-4"},[n("h4",[e._v("Import a Workflow from myExperiment")]),e._v(" "),n("a",{attrs:{href:e.myexperiment_target_url}},[e._v("Visit myExperiment")]),e._v(" "),n("div",{staticClass:"form-text"},[e._v("Click the link above to visit myExperiment and search for Galaxy workflows.")])])],1)],1)}),[],!1,null,null,null).exports,Ee=n(160);function Ae(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Pe(e,t){return(e=e.replace(/^https?:\/\//,"").replace(/\/$/,""))==(t=t.replace(/^https?:\/\//,"").replace(/\/$/,""))}k.default.use(N.a);var Ye={props:{queryTrsServer:{type:String,default:null},queryTrsId:{type:String,default:null}},created:function(){this.services=new Ee.a,this._configureTrsServers()},data:function(){return{selection:null,trsSelection:null,trsServers:[],loading:!0}},computed:{showDropdown:function(){return this.trsServers.length>1}},methods:{onTrsSelection:function(e){this.selection=e,this.$emit("onTrsSelection",e)},onError:function(e){this.$emit("onError",e)},_configureTrsServers:function(){var e=this;this.services.getTrsServers().then((function(t){e.trsServers=t;var n=e.queryTrsServer,i=null;if(n){var a,r=Ae(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.id==n){i=o;break}if(Pe(o.api_url,n)){i=o;break}if(Pe(o.link_url,n)){i=o;break}}}catch(e){r.e(e)}finally{r.f()}}null===i&&(n&&e.onError("Failed to find requested TRS server "+n),i=t[0]),e.selection=i,e.loading=!1,e.onTrsSelection(i)}))}}},Re=(n(1604),Object(T.a)(Ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("span",{staticClass:"m-1 text-muted"},[e.showDropdown?n("span",{staticClass:"dropdown"},[n("b-link",{staticClass:"font-weight-bold",attrs:{id:"dropdownTrsServer","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n            "+e._s(e.selection.label)+"\n            "),n("span",{staticClass:"fa fa-caret-down"})]),e._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownTrsServer"}},e._l(e.trsServers,(function(t){return n("a",{key:t.id,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(n){return n.preventDefault(),e.onTrsSelection(t)}}},[e._v(e._s(t.label))])})),0)],1):n("span",[n("b-link",{staticClass:"font-weight-bold",attrs:{href:e.selection.link_url,target:"_blank",title:e.selection.doc}},[e._v("\n            "+e._s(e.selection.label)+"\n        ")])],1)])}),[],!1,null,"8659ec70",null).exports);F.c.add(W.M),k.default.use(N.a);var He={components:{FontAwesomeIcon:$.a},props:{trsTool:{type:Object}},methods:{importVersion:function(e){var t=e.id.includes(":".concat(e.name))?e.name:e.id;this.$emit("onImport",t)}}},Ne={components:{TrsServerSelection:Re,TrsTool:Object(T.a)(He,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("b",[e._v("Name:")]),e._v(" "),n("span",[e._v(e._s(e.trsTool.name))])]),e._v(" "),n("div",[n("b",[e._v("Description:")]),e._v(" "),n("span",[e._v(e._s(e.trsTool.description))])]),e._v(" "),n("div",[n("b",[e._v("Organization")]),e._v(" "),n("span",[e._v(e._s(e.trsTool.organization))])]),e._v(" "),n("div",[n("b",[e._v("Versions")]),e._v(" "),n("ul",e._l(e.trsTool.versions,(function(t){return n("li",{key:t.id},[n("b-button",{staticClass:"m-1 workflow-import",attrs:{"data-version-name":t.name},on:{click:function(n){return e.importVersion(t)}}},[e._v("\n                    "+e._s(t.name)+"\n                    "),n("font-awesome-icon",{attrs:{icon:"upload"}})],1)],1)})),0)])])}),[],!1,null,null,null).exports},methods:{importVersion:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.services.importTrsTool(this.trsSelection.id,e,t).then((function(e){Oe(Object(p.getAppRoot)(),e,i)})).catch((function(e){n.errorMessage=e||"Import failed for an unknown reason."}))}}},$e=n(16);k.default.use(N.a);var Fe={mixins:[Ne],props:{queryTrsServer:{type:String,default:null},queryTrsId:{type:String,default:null},queryTrsVersionId:{type:String,default:null},isRun:{type:Boolean,default:!1}},created:function(){this.services=new Ee.a,this.toolId=this.queryTrsId},data:function(){return{trsSelection:null,trsTool:null,errorMessage:null,isAutoImport:this.queryTrsVersionId&&this.queryTrsServer&&this.queryTrsId,timeout:null,toolId:null}},computed:{hasErrorMessage:function(){return null!=this.errorMessage},isAnonymous:function(){return Object(o.a)().user.isAnonymous()},debouncedToolId:{get:function(){return this.toolId},set:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.toolId=e.trim()}),300)}}},watch:{toolId:function(){this.onToolId()}},methods:{onTrsSelection:function(e){this.trsSelection=e,this.toolId&&this.onToolId()},onTrsSelectionError:function(e){this.errorMessage=e},onToolId:function(){var e=this;this.trsSelection&&this.services.getTrsTool(this.trsSelection.id,this.toolId).then((function(t){if(e.trsTool=t,e.errorMessage=null,e.isAutoImport){var n="name",i=e.trsTool.versions.find((function(t){return t.name===e.queryTrsVersionId||(t.id===e.queryTrsVersionId?(n="id",!0):void 0)}));i?e.importVersion(e.trsTool.id,i[n],e.isRun):($e.a.warning("Specified version: ".concat(e.queryTrsVersionId," doesn't exist")),e.isAutoImport=!1)}})).catch((function(t){e.trsTool=null,e.errorMessage=t}))}}},We=Object(T.a)(Fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isAnonymous?n("b-alert",{staticClass:"text-center my-2",attrs:{show:"",variant:"danger"}},[e._v("Anonymous user cannot import workflows, please register or log in")]):n("b-card",{attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Import"}},[n("b-alert",{attrs:{show:e.hasErrorMessage,variant:"danger"}},[e._v(e._s(e.errorMessage))]),e._v(" "),n("div",[n("b",[e._v("TRS Server:")]),e._v(" "),n("TrsServerSelection",{attrs:{"query-trs-server":e.queryTrsServer,"query-trs-id":e.queryTrsId},on:{onTrsSelection:e.onTrsSelection,onError:e.onTrsSelectionError}})],1),e._v(" "),e.isAutoImport&&!e.hasErrorMessage?n("div",{staticClass:"text-center my-2"},[n("b-spinner",{staticClass:"align-middle"}),e._v(" "),n("strong",[e._v("Loading your Workflow...")])],1):n("div",[n("div",[n("b",[e._v("TRS ID:")]),e._v(" "),n("b-form-input",{attrs:{id:"trs-id-input"},model:{value:e.debouncedToolId,callback:function(t){e.debouncedToolId=t},expression:"debouncedToolId"}})],1),e._v(" "),e.trsTool?n("trs-tool",{attrs:{"trs-tool":e.trsTool},on:{onImport:function(t){return e.importVersion(e.trsTool.id,t)}}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports,ze=n(212);k.default.use(ze.a),k.default.use(N.a);var Ue={mixins:[Ne],data:function(){return{query:"",results:[],trsSelection:null,errorMessage:null,trsSearchService:new Ee.b({}),searching:!1,searchingFor:null,newSearch:!0,fields:[{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"organization",label:"Organization"}]}},watch:{query:function(){""==this.query?(this.newSearch=!0,this.results=[]):this.trsSearchService.searchQuery=this.query}},subscriptions:function(){return{searchResults:this.trsSearchService.searchResults}},mounted:function(){var e=this,t=null;this.$observables.searchResults.subscribe({next:function(n){e.newSearch=!1,e.searching=!0,e.searchingFor=n[0],null!==t&&t.unsubscribe(),t=n[1].subscribe({next:function(t){e.results=t,e.searching=!1}})},error:function(t){e.errorMessage=t}})},computed:{hasErrorMessage:function(){return null!=this.errorMessage},itemsComputed:function(){return this.computeItems(this.results)},searchHelp:function(){return"Search by workflow description. Tags (key:value) can be used to also search by metadata - for instance name:example. Available tags include organization and name."}},created:function(){this.services=new Ee.a},methods:{onTrsSelection:function(e){this.trsSelection=e,this.trsSearchService.trsServer=e.id,this.query=""},onTrsSelectionError:function(e){this.errorMessage=e},showRowDetails:function(e,t,n){"A"!=n.target.nodeName&&(e._showDetails=!e._showDetails)},computeItems:function(e){return e.map((function(e){return{id:e.id,name:e.name,description:e.description,data:e,_showDetails:!1}}))}}},Ve=Object(T.a)(Ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Search"}},[n("b-alert",{attrs:{show:e.hasErrorMessage,variant:"danger"}},[e._v(e._s(e.errorMessage))]),e._v(" "),n("div",[n("b",[e._v("TRS Server:")]),e._v(" "),n("TrsServerSelection",{on:{onTrsSelection:e.onTrsSelection,onError:e.onTrsSelectionError}})],1),e._v(" "),n("div",[n("b-input-group",{staticClass:"mb-3"},[n("b-input",{attrs:{id:"trs-search-query",placeholder:"search query"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.query=""}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),n("b-input-group-append",[n("b-btn",[n("i",{directives:[{name:"b-popover",rawName:"v-b-popover.bottom",value:e.searchHelp,expression:"searchHelp",modifiers:{bottom:!0}}],staticClass:"fa fa-question",attrs:{title:"Search Help"}})]),e._v(" "),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"clear search"},on:{click:function(t){e.query=""}}},[n("i",{staticClass:"fa fa-times"})])],1)],1)],1),e._v(" "),n("div",[e.searching?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n            Searching for "+e._s(e.searchingFor)+", this may take a while - please be patient.\n        ")]):e.newSearch?n("b-alert",{attrs:{variant:"info",show:""}},[e._v(" Enter search query to begin search. ")]):0==e.results.length?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n            No search results found, refine your search.\n        ")]):n("b-table",{attrs:{fields:e.fields,items:e.itemsComputed,hover:"",striped:"","caption-top":"",busy:e.searching},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"row-details",fn:function(t){return[n("b-card",[n("trs-tool",{attrs:{"trs-tool":t.item.data},on:{onImport:function(n){return e.importVersion(t.item.data.id,n)}}})],1)]}}])})],1)],1)}),[],!1,null,null,null).exports,Be=n(21);function qe(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){qe(r,i,a,o,s,"next",e)}function s(e){qe(r,i,a,o,s,"throw",e)}o(void 0)}))}}function Je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(p.getAppRoot)()}var t,n,i,a,r;return t=e,(n=[{key:"getActiveInteractiveTools",value:(r=Ge(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.root,"api/entry_points?running=true"),e.prev=1,e.next=4,S.a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return r.apply(this,arguments)})},{key:"stopInteractiveTool",value:(a=Ge(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/entry_points/").concat(t),e.next=3,S.a.delete(n);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"catch",value:function(e){Object(Be.b)(e)}}])&&Je(t.prototype,n),i&&Je(t,i),e}();k.default.use(N.a);var Xe={components:{UtcDate:fe.a},data:function(){return{error:null,fields:[{label:"",key:"checkbox"},{label:"Name",key:"name",sortable:!0},{label:"Job Info",key:"job_info",sortable:!0},{label:"Created",key:"created_time",sortable:!0},{label:"Last Updated",key:"last_updated",sortable:!0}],filter:"",messages:[],nInteractiveTools:0,activeInteractiveTools:[]}},computed:{showNotFound:function(){return 0===this.nInteractiveTools&&this.filter&&!this.isActiveToolsListEmpty},isCheckboxMarked:function(){return this.activeInteractiveTools.some((function(e){return e.marked}))},isActiveToolsListEmpty:function(){return 0===this.activeInteractiveTools.length},currentHistory:function(){return Object(o.a)().currHistoryPanel}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new Ke({root:this.root}),this.load()},methods:{load:function(){var e=this;this.filter="",this.services.getActiveInteractiveTools().then((function(t){e.activeInteractiveTools=t})).catch((function(t){e.error=t}))},filtered:function(e){this.nInteractiveTools=e.length},stopInteractiveToolSession:function(){var e=this;this.activeInteractiveTools.filter((function(e){return e.marked})).map((function(t){return e.services.stopInteractiveTool(t.id).then((function(t){e.activeInteractiveTools=e.activeInteractiveTools.filter((function(e){return!e.marked}))})).catch((function(n){e.messages.push("Failed to stop interactive tool ".concat(t.name,": ").concat(n.message))}))}))},createId:function(e,t){return e+"-"+t}}},Qe=Object(T.a)(Xe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.messages,(function(t,i){return n("b-alert",{key:i,attrs:{show:3,variant:"danger"}},[e._v(e._s(t))])})),e._v(" "),n("h2",[e._v("Active Interactive Tools")]),e._v(" "),n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"6"}},[n("b-input",{staticClass:"m-1",attrs:{id:"interactivetool-search",name:"query",placeholder:"Search Interactive Tool",autocomplete:"off",type:"text"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1),e._v(" "),n("b-table",{attrs:{id:"interactive-tool-table",striped:"",fields:e.fields,items:e.activeInteractiveTools,filter:e.filter},on:{filtered:e.filtered},scopedSlots:e._u([{key:"cell(checkbox)",fn:function(t){return[n("b-form-checkbox",{attrs:{id:e.createId("checkbox",t.item.id)},model:{value:t.item.marked,callback:function(n){e.$set(t.item,"marked",n)},expression:"row.item.marked"}})]}},{key:"cell(name)",fn:function(t){return[n("a",{attrs:{index:t.index,id:e.createId("link",t.item.id),href:t.item.target,target:"_blank",name:t.item.name}},[e._v(e._s(t.item.name))])]}},{key:"cell(job_info)",fn:function(t){return[t.item.active?n("label",[e._v(" running ")]):n("label",[e._v(" stopped ")])]}},{key:"cell(created_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.item.created_time,mode:"elapsed"}})]}},{key:"cell(last_updated)",fn:function(e){return[n("UtcDate",{attrs:{date:e.item.modified_time,mode:"elapsed"}})]}}])}),e._v(" "),e.isActiveToolsListEmpty?n("label",[e._v("You do not have active interactive tools yet ")]):e._e(),e._v(" "),e.showNotFound?n("div",[e._v("\n        No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(this.filter))]),e._v(".\n    ")]):e._e(),e._v(" "),e.isCheckboxMarked?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"stopInteractiveTool",title:"Terminate selected tools"},on:{click:function(t){return t.stopPropagation(),e.stopInteractiveToolSession()}}},[e._v("Stop\n    ")]):e._e()],2)}),[],!1,null,null,null).exports;F.c.add(W.g);var Ze={props:["workflow"],components:{FontAwesomeIcon:$.a},computed:{urlEdit:function(){return"".concat(Object(p.getAppRoot)(),"workflow/editor?id=").concat(this.workflow.id)},urlDownload:function(){return"".concat(Object(p.getAppRoot)(),"api/workflows/").concat(this.workflow.id,"/download?format=json-download")},urlShare:function(){return"".concat(Object(p.getAppRoot)(),"workflow/sharing?id=").concat(this.workflow.id)},urlView:function(){return"".concat(Object(p.getAppRoot)(),"workflow/display_by_id?id=").concat(this.workflow.id)},urlViewShared:function(){return"".concat(Object(p.getAppRoot)(),"workflow/display_by_username_and_slug?username=").concat(this.workflow.owner,"&slug=").concat(this.workflow.slug)}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new Ee.a({root:this.root})},methods:{onCopy:function(){var e=this;this.services.copyWorkflow(this.workflow).then((function(t){e.$emit("onAdd",t),e.$emit("onSuccess","Successfully copied workflow '".concat(e.workflow.name,"' to '").concat(t.name,"'."))})).catch((function(t){e.$emit("onError",t)}))},onDelete:function(){var e=this,t=this.workflow.id,n=this.workflow.name;window.confirm("Are you sure you want to delete workflow '".concat(n,"'?"))&&this.services.deleteWorkflow(t).then((function(n){e.$emit("onRemove",t),e.$emit("onSuccess",n)})).catch((function(t){e.$emit("onError",t)}))},onRename:function(){var e=this,t=this.workflow.id,n=this.workflow.name,i=window.prompt("Enter a new name for workflow '".concat(n,"'"),n);if(i){var a={name:i};this.services.updateWorkflow(t,a).then((function(){e.$emit("onUpdate",t,a),e.$emit("onSuccess","Successfully changed name of workflow '".concat(n,"' to '").concat(i,"'."))})).catch((function(t){e.$emit("onError",t)}))}}}},et=Object(T.a)(Ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-link",{staticClass:"workflow-dropdown font-weight-bold",attrs:{id:"workflow-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("font-awesome-icon",{attrs:{icon:"caret-down"}}),e._v(" "),n("span",[e._v(e._s(e.workflow.name))])],1),e._v(" "),e.workflow.description?n("p",[e._v(e._s(e.workflow.description))]):e._e(),e._v(" "),e.workflow.shared?n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onCopy(t)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),n("span",[e._v("Copy")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlViewShared}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),n("span",[e._v("View")])])]):n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:e.urlEdit}},[n("span",{staticClass:"fa fa-edit fa-fw mr-1"}),e._v(" "),n("span",[e._v("Edit")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onCopy(t)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),n("span",[e._v("Copy")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlDownload}},[n("span",{staticClass:"fa fa-download fa-fw mr-1"}),e._v(" "),n("span",[e._v("Download")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onRename(t)}}},[n("span",{staticClass:"fa fa-signature fa-fw mr-1"}),e._v(" "),n("span",[e._v("Rename")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlShare}},[n("span",{staticClass:"fa fa-share-alt fa-fw mr-1"}),e._v(" "),n("span",[e._v("Share")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlView}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),n("span",[e._v("View")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onDelete(t)}}},[n("span",{staticClass:"fa fa-trash fa-fw mr-1"}),e._v(" "),n("span",[e._v("Delete")])])])],1)}),[],!1,null,null,null).exports;function tt(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}F.c.add(W.A),F.c.add(W.M),F.c.add(W.G),F.c.add(W.s),F.c.add(W.E);var it={components:{FontAwesomeIcon:$.a,UtcDate:fe.a,Tags:pe.a,WorkflowDropdown:et},data:function(){return{error:null,fields:[{key:"name",sortable:!0},{key:"tags",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{label:"Sharing",key:"published",sortable:!0},{label:"Bookmarked",key:"show_in_tool_panel",sortable:!0},{key:"execute",label:""}],filter:"",loading:!0,message:null,messageVariant:null,nWorkflows:0,workflows:[]}},computed:{showNotFound:function(){return 0===this.nWorkflows&&this.filter},showNotAvailable:function(){return 0===this.nWorkflows&&!this.filter},showMessage:function(){return!!this.message}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new Ee.a({root:this.root}),this.load()},methods:{load:function(){var e=this;this.loading=!0,this.filter="",this.services.getWorkflows().then((function(t){e.workflows=t,e.nWorkflows=t.length,e.loading=!1})).catch((function(t){e.error=t}))},filtered:function(e){this.nWorkflows=e.length},createWorkflow:function(e){window.location="".concat(this.root,"workflows/create")},importWorkflow:function(e){window.location="".concat(this.root,"workflows/import")},executeWorkflow:function(e){window.location="".concat(this.root,"workflows/run?id=").concat(e.id)},bookmarkWorkflow:function(e){var t=this,n=e.id,i={show_in_tool_panel:!e.show_in_tool_panel,tags:e.tags};this.services.updateWorkflow(n,i).then((function(){window.location="".concat(Object(p.getAppRoot)(),"workflows/list")})).catch((function(e){t.onError(e)}))},onTags:function(e,t){var n=this,i=this.workflows[t];i.tags=e,this.services.updateWorkflow(i.id,{show_in_tool_panel:i.show_in_tool_panel,tags:i.tags}).catch((function(e){n.onError(e)}))},onAdd:function(e){this.workflows.unshift(e),this.nWorkflows=this.workflows.length},onRemove:function(e){this.workflows=this.workflows.filter((function(t){return t.id!==e})),this.nWorkflows=this.workflows.length},onUpdate:function(e,t){var n=this.workflows.find((function(t){return t.id===e}));Object.assign(n,t),this.workflows=tt(this.workflows)},onSuccess:function(e){this.message=e,this.messageVariant="success"},onError:function(e){this.message=e,this.messageVariant="danger"}}},at=Object(T.a)(it,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):n("div",[e.loading?n("span",[n("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),e._v("\n            Loading workflows...\n        ")],1):n("div",[n("b-alert",{attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"6"}},[n("b-input",{staticClass:"m-1",attrs:{id:"workflow-search",name:"query",placeholder:"Search Workflows",autocomplete:"off",type:"text"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),n("b-col",[n("span",{staticClass:"float-right"},[n("b-button",{staticClass:"m-1",attrs:{id:"workflow-create"},on:{click:e.createWorkflow}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n                            Create\n                        ")],1),e._v(" "),n("b-button",{staticClass:"m-1",attrs:{id:"workflow-import"},on:{click:e.importWorkflow}},[n("font-awesome-icon",{attrs:{icon:"upload"}}),e._v("\n                            Import\n                        ")],1)],1)])],1),e._v(" "),n("b-table",{attrs:{id:"workflow-table",striped:"",fields:e.fields,items:e.workflows,filter:e.filter},on:{filtered:e.filtered},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("WorkflowDropdown",{attrs:{workflow:t.item},on:{onAdd:e.onAdd,onRemove:e.onRemove,onUpdate:e.onUpdate,onSuccess:e.onSuccess,onError:e.onError}})]}},{key:"cell(tags)",fn:function(t){return[n("Tags",{attrs:{index:t.index,tags:t.item.tags},on:{input:e.onTags}})]}},{key:"cell(published)",fn:function(t){return[t.item.published?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Published",icon:"globe"}}):e._e(),e._v(" "),t.item.shared?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Shared",icon:"share-alt"}}):e._e()]}},{key:"cell(show_in_tool_panel)",fn:function(t){return[n("b-form-checkbox",{on:{change:function(n){return e.bookmarkWorkflow(t.item)}},model:{value:t.item.show_in_tool_panel,callback:function(n){e.$set(t.item,"show_in_tool_panel",n)},expression:"row.item.show_in_tool_panel"}})]}},{key:"cell(update_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"cell(execute)",fn:function(t){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"workflow-run btn-sm btn-primary fa fa-play",attrs:{title:"Run Workflow"},on:{click:function(n){return n.stopPropagation(),e.executeWorkflow(t.item)}}})]}}])}),e._v(" "),e.showNotFound?n("div",[e._v("\n                No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(this.filter))]),e._v(".\n            ")]):e._e(),e._v(" "),e.showNotAvailable?n("div",[e._v("No workflows found. You may create or import new workflows.")]):e._e()],1)])])}),[],!1,null,null,null).exports,rt=n(612),ot=n(63),st={components:{BFormInput:rt.a},props:{value:{type:String},mode:{type:String,default:"file"},requireWritable:{type:Boolean,default:!1}},data:function(){return{localValue:this.value}},computed:{placeholder:function(){return"Click to select ".concat(this.mode)}},methods:{selectFile:function(){var e=this,t={mode:this.mode,requireWritable:this.requireWritable};Object(ot.c)((function(t){e.localValue=null==t?void 0:t.url}),t)}},watch:{localValue:function(e){this.$emit("input",e)},value:function(e){this.localValue=e}}},lt=Object(T.a)(st,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-form-input",{staticClass:"directory-form-input",attrs:{placeholder:e.placeholder},on:{click:e.selectFile},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})}),[],!1,null,null,null).exports,ct=n(104);function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(e,"?full=true");return new Promise((function e(a,r){S.a.get(i).then((function(i){var o=i.data.state;null!==t&&t(o),-1!==ct.a.NON_TERMINAL_STATES.indexOf(o)?setTimeout(e,n,a,r):-1!==ct.a.ERROR_STATES.indexOf(o)?r(i):a(i)})).catch(r)}))}var ut=n(130);F.c.add(W.u),k.default.use(N.a);var ht={components:{JobInformation:ut.a,FontAwesomeIcon:$.a},props:{job:{type:Object,required:!0},header:{type:String,default:"Job ended in error"}},data:function(){return{expanded:!1,showInfo:!1}},computed:{errorClasses:function(){var e=["code"];return this.expanded||e.push("preview"),e}},methods:{toggleExpanded:function(){this.expanded=!this.expanded}}},ft=(n(1605),Object(T.a)(ht,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"border-variant":"danger",header:e.header}},[n("b-card-text",[n("div",{on:{click:function(t){e.showInfo=!0}}},[n("a",{attrs:{href:"#"}},[e._v("See full job details "),n("font-awesome-icon",{attrs:{icon:"info-circle"}})],1)]),e._v(" "),e.job.stderr?n("div",{staticClass:"error-wrapper",on:{click:e.toggleExpanded}},[e._v("\n            Job Standard Error\n            "),n("pre",{class:e.errorClasses},[e._v(e._s(e.job.stderr))]),e._v(" "),e.expanded?e._e():n("b",[e._v("(Click to expand job standard error)")])]):e._e()]),e._v(" "),n("b-modal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}},[n("job-information",{attrs:{job_id:e.job.id,"include-times":!0}})],1)],1)}),[],!1,null,"23bb3cb0",null).exports),pt=n(235);function mt(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function _t(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){mt(r,i,a,o,s,"next",e)}function s(e){mt(r,i,a,o,s,"throw",e)}o(void 0)}))}}F.c.add(W.r),F.c.add(W.M),F.c.add(W.o),k.default.use(N.a);var gt={components:{FilesInput:lt,FontAwesomeIcon:$.a,JobError:ft,LoadingSpan:me.a},data:function(){return{initializing:!0,importType:"externalUrl",sourceFile:null,sourceURL:null,sourceRemoteFilesUri:null,errorMessage:null,waitingOnJob:!1,complete:!1,jobError:null,hasFileSources:!1}},mounted:function(){var e=this;return _t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:case"end":return t.stop()}}),t)})))()},computed:{importReady:function(){var e=this.importType;return"externalUrl"==e?!!this.sourceURL:"upload"==e?!!this.sourceFile:"remoteFilesUri"==e&&!!this.sourceRemoteFilesUri},historyLink:function(){return"".concat(Object(p.getAppRoot)(),"histories/list")}},methods:{initialize:function(){var e=this;return _t(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new pt.a).getFileSources();case 2:n=t.sent,e.hasFileSources=n.length>0,e.initializing=!1;case 5:case"end":return t.stop()}}),t)})))()},submit:function(e){var t=this,n=new FormData,i=this.importType;"externalUrl"==i?n.append("archive_source",this.sourceURL):"upload"==i?(n.append("archive_file",this.sourceFile),n.append("archive_source","")):"remoteFilesUri"==i&&n.append("archive_source",this.sourceRemoteFilesUri),S.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),n).then((function(e){t.waitingOnJob=!0,dt(e.data.id).then((function(e){t.waitingOnJob=!1,t.complete=!0})).catch(t.handleError)})).catch(this.handleError)},handleError:function(e){var t;this.waitingOnJob=!1,this.errorMessage=Object(Be.a)(e,"History import failed."),(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.stderr)&&(this.jobError=e.data)}},watch:{importType:function(){"remoteFilesUri"!=this.importType||this.sourceRemoteFilesUri||this.$refs.filesInput.selectFile()}}},vt=(n(1606),Object(T.a)(gt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"body-class":"history-import-component",title:"Import a history from an archive"}},[e.errorMessage?n("b-alert",{attrs:{variant:"danger",dismissible:"",show:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History import job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.initializing?n("div",[n("loading-span",{attrs:{message:"Loading server configuration."}})],1):e.waitingOnJob?n("div",[n("LoadingSpan",{attrs:{message:"Waiting on history import job, this may take a while."}})],1):e.complete?n("div",[n("b-alert",{attrs:{show:e.complete,variant:"success",dismissible:""},on:{dismissed:function(t){e.complete=!1}}},[n("h4",[e._v("Done!")]),e._v(" "),n("p",[e._v("History imported, check out "),n("a",{attrs:{href:e.historyLink}},[e._v("your histories")]),e._v(".")])])],1):n("div",[n("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("b-form-group",{attrs:{label:"How would you like to specify the history archive?"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[n("b-form-radio-group",{attrs:{"aria-describedby":i,name:"import-type",stacked:""},model:{value:e.importType,callback:function(t){e.importType=t},expression:"importType"}},[n("b-form-radio",{attrs:{value:"externalUrl"}},[e._v("\n                        Export URL from another Galaxy instance\n                        "),n("font-awesome-icon",{attrs:{icon:"external-link-alt"}})],1),e._v(" "),n("b-form-radio",{attrs:{value:"upload"}},[e._v("\n                        Upload local file from your computer\n                        "),n("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),e.hasFileSources?n("b-form-radio",{attrs:{value:"remoteFilesUri"}},[e._v("\n                        Select a remote file (e.g. Galaxy's FTP)\n                        "),n("font-awesome-icon",{attrs:{icon:"folder-open"}})],1):e._e()],1)]}}])}),e._v(" "),"externalUrl"==e.importType?n("b-form-group",{attrs:{label:"Archived History URL"}},[n("b-form-input",{attrs:{type:"url"},model:{value:e.sourceURL,callback:function(t){e.sourceURL=t},expression:"sourceURL"}})],1):e._e(),e._v(" "),"upload"==e.importType?n("b-form-group",{attrs:{label:"Archived History File"}},[n("b-form-file",{model:{value:e.sourceFile,callback:function(t){e.sourceFile=t},expression:"sourceFile"}})],1):e._e(),e._v(" "),n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"remoteFilesUri"==e.importType,expression:"importType == 'remoteFilesUri'"}],attrs:{label:"Remote File"}},[n("files-input",{ref:"filesInput",model:{value:e.sourceRemoteFilesUri,callback:function(t){e.sourceRemoteFilesUri=t},expression:"sourceRemoteFilesUri"}})],1),e._v(" "),n("b-button",{staticClass:"import-button",attrs:{variant:"primary",type:"submit",disabled:!e.importReady}},[e._v("Import history")])],1)],1)],1)}),[],!1,null,"d5384606",null).exports),yt=n(650),bt=n(656),wt=n(657),kt=n(491),xt=n(107);F.c.add(W.w);var St={components:{BModal:kt.a,JobInformation:ut.a,FontAwesomeIcon:$.a},props:{historyExport:{type:Object,required:!0}},data:function(){return{details:!1}},computed:{link:function(){return this.historyExport.external_download_permanent_url}},methods:{showDetails:function(){this.details=!0},copyUrl:function(){Object(xt.a)(this.latestExportUrl,"Export URL copied to your clipboard")}}},Ct=Object(T.a)(St,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b",[n("a",{staticClass:"generated-export-link",attrs:{href:e.link}},[e._v(e._s(e.link))])]),e._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"copy-export-link",staticStyle:{cursor:"pointer"},attrs:{title:"Copy export URL to your clipboard",icon:"link"},on:{click:e.copyUrl}}),e._v(" "),n("i",{attrs:{title:"Information about when the history export was generated is included in the job details. Additionally, if there are issues with export, the job details may help figure out the underlying problem or communicate issues to your Galaxy administrator."}},[e._v("\n        ("),n("a",{staticClass:"show-job-link",attrs:{href:"#"},on:{click:e.showDetails}},[e._v("view job details")]),e._v(")\n    ")]),e._v(" "),n("b-modal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:e.details,callback:function(t){e.details=t},expression:"details"}},[n("job-information",{attrs:{job_id:e.historyExport.job_id,"include-times":!0}})],1)],1)}),[],!1,null,null,null).exports;k.default.use(N.a);var Mt={components:{LoadingSpan:me.a,ExportLink:Ct,JobError:ft},props:{historyId:{type:String,required:!0}},data:function(){return{errorMessage:null,exportsInitialized:!1,exports:null,loadingExports:!1,waitingOnJob:!1,jobError:null}},created:function(){this.exportsInitialized||(this.exportsInitialized=!0,this.loadExports())},computed:{hasExports:function(){return null!==this.exports&&this.exports.length>0},latestExport:function(){return this.exports&&this.exports[0]},readyExports:function(){return(this.exports||[]).filter((function(e){return e.ready}))},hasReadyExport:function(){return null!==this.latestReadyExport},latestReadyExport:function(){return this.readyExports.length>0?this.readyExports[0]:null},latestExportReady:function(){var e,t;return(null===(e=this.latestExport)||void 0===e?void 0:e.ready)&&(null===(t=this.latestExport)||void 0===t?void 0:t.up_to_date)},latestExportPreparing:function(){var e;return null===(e=this.latestExport)||void 0===e?void 0:e.preparing},whyNoLink:function(){return this.hasExports?"previous history export archival likely failed":"no history export ever initiated for this history"}},methods:{loadExports:function(){var e=this;this.loadingExports=!0;var t="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.get(t).then((function(t){e.loadingExports=!1,e.exports=t.data,e.latestExportPreparing?e.waitOnExportJob(e.latestExport.job_id):e.waitingOnJob=!1})).catch(this.handleError)},regenerateExport:function(){var e=this;this.waitingOnJob=!0;var t="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.put(t).then((function(t){var n=t.status;200==n?e.loadExports():202==n?e.waitOnExportJob(t.data.job_id):e.errorMessage="Unexpected error while polling history export ".concat(Object(Be.a)(t))})).catch(this.handleError)},waitOnExportJob:function(e){var t=this;this.waitingOnJob=!0,this.jobError=!1,dt(e).then((function(e){t.waitingOnJob=!1,t.loadExports()})).catch(this.handleError)},handleError:function(e){var t;this.waitingOnJob=!1,this.loadingExports=!1,this.errorMessage=Object(Be.a)(e,"Error generating a history export link"),(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.stderr)&&(this.jobError=e.data)}}},Tt=Object(T.a)(Mt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.loadingExports?n("div",[n("loading-span",{attrs:{message:"Loading history export information from Galaxy server."}})],1):e.waitingOnJob?n("div",[n("loading-span",{attrs:{message:"Galaxy server is preparing history for download, this will likely take a while."}})],1):e.latestExportReady?n("div",[e._v("\n        Link for download ready\n        "),n("export-link",{attrs:{"history-export":e.latestExport}}),e._v("\n        . Use this link to download the archive or import it on another Galaxy server.\n    ")],1):e.hasReadyExport?n("div",[n("p",[e._v("An out of date export is ready "),n("export-link",{attrs:{"history-export":e.latestReadyExport}}),e._v(".")],1),e._v(" "),n("p",[e._v("\n            The history has changed since this export was generated,\n            "),n("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.regenerateExport(t)}}},[e._v("click here to generate a new archive for the current history state")]),e._v(".\n        ")])]):n("div",[n("p",[e._v("No link for history export ready, "+e._s(e.whyNoLink)+".")]),e._v(" "),n("p",[n("b",[n("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.regenerateExport(t)}}},[e._v("Click here to to generate a new archive for this history.")])])])])],1)}),[],!1,null,null,null).exports;k.default.use(N.a);var jt={components:{FilesInput:lt,LoadingSpan:me.a,JobError:ft},props:{historyId:{type:String,required:!0}},computed:{canExport:function(){return!!this.name&&!!this.directory}},data:function(){return{errorMessage:null,name:null,directory:null,waitingOnJob:!1,jobComplete:!1,jobError:null}},methods:{doExport:function(){var e=this,t={directory_uri:this.directory,file_name:this.name};this.waitingOnJob=!0;var n="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.put(n,t).then((function(t){dt(t.data.job_id).then((function(t){e.waitingOnJob=!1,e.jobComplete=!0})).catch(e.handleError)})).catch(this.handleError)},reset:function(){this.jobComplete=!1,this.errorMessage=null,this.name="",this.directory="",this.jobError=null},handleError:function(e){var t;this.waitingOnJob=!1,this.errorMessage=Object(Be.a)(e,"History export failed."),(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.stderr)&&(this.jobError=e.data)}}},Ot=Object(T.a)(jt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"export-to-remote-file"},[e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n        "),e.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:e.jobError}}):e._e()],1):e._e(),e._v(" "),e.waitingOnJob?n("div",[n("loading-span",{attrs:{message:"Executing history export job, this will likely take a while."}})],1):e.jobComplete?n("div",[n("b-alert",{attrs:{show:"",variant:"success",dismissible:""},on:{dismissed:e.reset}},[n("h4",[e._v("Done!")]),e._v(" "),n("p",[e._v("History successfully exported.")])])],1):n("div",[n("b-form-group",{staticClass:"mt-3",attrs:{id:"fieldset-directory","label-for":"directory",description:"Select a 'remote files' directory to export history archive to."}},[n("files-input",{attrs:{id:"directory",mode:"directory","require-writable":!0},model:{value:e.directory,callback:function(t){e.directory=t},expression:"directory"}})],1),e._v(" "),n("b-form-group",{staticClass:"mt-3",attrs:{id:"fieldset-name","label-for":"name",description:"Give the exported file a name."}},[n("b-form-input",{attrs:{id:"name",placeholder:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",[n("b-button",{staticClass:"export-button",attrs:{variant:"primary",disabled:!e.canExport},on:{click:e.doExport}},[e._v("Export")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function Dt(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Lt(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Dt(r,i,a,o,s,"next",e)}function s(e){Dt(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Et={components:{LoadingSpan:me.a,ToLink:Tt,ToRemoteFile:Ot,BCard:yt.a,BTabs:bt.a,BTab:wt.a},props:{historyId:{type:String,required:!0}},data:function(){return{initializing:!0,hasWritableFileSources:!1}},mounted:function(){var e=this;return Lt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:case"end":return t.stop()}}),t)})))()},methods:{initialize:function(){var e=this;return Lt(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new pt.a).getFileSources();case 2:n=t.sent,e.hasWritableFileSources=n.some((function(e){return e.writable})),e.initializing=!1;case 5:case"end":return t.stop()}}),t)})))()}}},At=Object(T.a)(Et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"history-export-component"},[n("h2",[e._v("Export history archive")]),e._v(" "),e.initializing?n("span",[n("loading-span",{attrs:{message:"Loading server configuration."}})],1):e.hasWritableFileSources?n("span",[n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[n("b-tab",{attrs:{title:"to a link","title-link-class":"tab-export-to-link",active:""}},[n("b-card-text",[n("ToLink",{attrs:{"history-id":e.historyId}})],1)],1),e._v(" "),n("b-tab",{attrs:{title:"to a remote file","title-link-class":"tab-export-to-file"}},[n("b-card-text",[n("ToRemoteFile",{attrs:{"history-id":e.historyId}})],1)],1)],1)],1)],1):n("span",[n("ToLink",{attrs:{"history-id":e.historyId}})],1)])}),[],!1,null,null,null).exports,It=n(112),Pt=n(163),Yt={props:{id:{type:String,required:!1}},data:function(){return{historyTemplate:"",historyJSON:{},errorMessages:[]}},created:function(){var e=this.id,t="";t=void 0!==e&&""!==e&&null!==e?Object(p.getAppRoot)()+"history/display_structured?id="+e:Object(p.getAppRoot)()+"history/display_structured",this.ajaxCall(t)},methods:{ajaxCall:function(e){var t=this;S.a.get(e).then((function(e){t._updateHistoryData(e)})).catch((function(e){console.error(e),t.errorMessages.push("Error fetching history data -- reload the page to retry this request.  Please contact an administrator if the problem persists.")}))},_updateHistoryData:function(e){var t=e.data;this.historyTemplate=t.template,this.historyJSON=t.history_json},makeHistoryView:function(e){window.hdas=e.map((function(e){var t=Object(o.a)();return new Pt.a.HDAListItemEdit({model:new It.a.HistoryDatasetAssociation(e),el:u()("#hda-"+e.id),linkTarget:"galaxy_main",purgeAllowed:t.config.allow_user_dataset_purge,logger:t.logger}).render(0)})),u()((function(){u()(".workflow, .tool").each((function(e,t){var n=u()(t).children(".body");u()(t).children(".header").click((function(e){n.toggle()})).addClass("clickable")}))}))}},updated:function(){this.makeHistoryView(this.historyJSON)}},Rt=(n(1607),Object(T.a)(Yt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.errorMessages,(function(t){return n("div",[n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(t))])])})),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.historyTemplate)}})],2)}),[],!1,null,null,null).exports),Ht=n(131),Nt={props:{id:{type:String,required:!0}},data:function(){return{historyData:{},historyHistory:{},errorMessages:[]}},created:function(){var e=Object(p.getAppRoot)()+"history/view/"+this.id;this.ajaxCall(e,this.updateHistoryView)},methods:{ajaxCall:function(e,t){var n=this;S.a.get(e).then((function(e){t(e)})).catch((function(e){n.showError("Error fetching histories -- reload the page to retry this request.  Please contact an administrator if the problem persists.",e)}))},updateHistoryView:function(e){this.historyData=e.data,this.historyHistory=e.data.history},showError:function(e,t){console.error(t),this.errorMessages.push(e)},makeHistoryView:function(e){u()((function(){var t={hasMasthead:e.use_panels?"true":"false",userIsOwner:e.user_is_owner?"true":"false",isCurrent:e.history_is_current?"true":"false",historyJSON:e.history,showDeletedJson:e.show_deleted,showHiddenJson:e.show_hidden,initialModeDeleted:e.show_deleted?"showing_deleted":"not_showing_deleted",initialModeHidden:e.show_hidden?"showing_hidden":"not_showing_hidden",allowUserDatasetPurge:e.allow_user_dataset_purge?"true":"false"};t.viewToUse=t.userIsOwner?{location:"mvc/history/history-view-edit",className:"HistoryViewEdit"}:{location:"mvc/history/history-view",className:"HistoryView"},Ht.a.historyEntry(t)}))},showStructure:function(){var e=Object(o.a)(),t=k.default.extend(Rt),n=document.createElement("div");e.page.center.display(n),new t({propsData:{id:q.a.get("id")}}).$mount(n)},switchHistory:function(){var e=Object(p.getAppRoot)()+"history/switch_to_history?hist_id="+this.historyHistory.id;this.ajaxCall(e,this.reloadPage)},reloadPage:function(){window.location.reload()}},updated:function(){this.makeHistoryView(this.historyData)}},$t=(n(1608),Object(T.a)(Nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"structured-history-view"}},[n("div",{staticClass:"clear",attrs:{id:"history-view-controls"}},[n("div",{staticClass:"float-left"},[0==e.historyHistory.purged?n("span",[0==e.historyData.user_is_owner?n("span",[n("button",{staticClass:"btn btn-secondary",attrs:{id:"import"}},[e._v("Import and start using history")])]):e._e(),e._v(" "),e.historyData.user_is_owner&&0==e.historyData.history_is_current?n("span",[n("button",{staticClass:"btn btn-secondary",attrs:{id:"switch-history"},on:{click:e.switchHistory}},[e._v("\n                        Switch to this history\n                    ")])]):e._e(),e._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{id:"show-structure"},on:{click:e.showStructure}},[e._v("Show structure")])]):e._e()]),e._v(" "),e._m(0)]),e._v(" "),e._l(e.errorMessages,(function(t){return n("div",[n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(t))])])})),e._v(" "),n("div",{staticClass:"history-panel unified-panel-body",staticStyle:{overflow:"auto"},attrs:{id:"history-"+e.historyHistory.id}})],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"float-right"},[t("button",{staticClass:"btn btn-secondary",attrs:{id:"toggle-deleted"}},[this._v("Include deleted")]),this._v(" "),t("button",{staticClass:"btn btn-secondary",attrs:{id:"toggle-hidden"}},[this._v("Include hidden")])])}],!1,null,null,null).exports),Ft=n(270);function Wt(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}k.default.use(N.a);var zt={components:{Markdown:Ft.a},props:{invocationId:{type:String,required:!0}},data:function(){return{markdownConfig:{},invocationMarkdown:null}},created:function(){var e=this;this.getMarkdown(this.invocationId).then((function(t){e.markdownConfig=t,e.invocationMarkdown=t.invocation_markdown})).catch((function(e){$e.a.error("Failed to load invocation markdown: ".concat(e))}))},methods:{onEdit:function(){window.location="".concat(Object(p.getAppRoot)(),"pages/create?invocation_id=").concat(this.invocationId)},getMarkdown:function(e){return(t=regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Object(p.getAppRoot)(),"api/invocations/").concat(e,"/report"),t.prev=1,t.next=4,S.a.get(n);case 4:return i=t.sent,a=i.data,t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(1),Object(Be.b)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){Wt(r,i,a,o,s,"next",e)}function s(e){Wt(r,i,a,o,s,"throw",e)}o(void 0)}))})();var t}}},Ut=Object(T.a)(zt,(function(){var e=this.$createElement;return(this._self._c||e)("markdown",{staticClass:"p-3",attrs:{"markdown-config":this.markdownConfig},on:{onEdit:this.onEdit}})}),[],!1,null,null,null).exports;function Vt(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Bt(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Vt(r,i,a,o,s,"next",e)}function s(e){Vt(r,i,a,o,s,"throw",e)}o(void 0)}))}}function qt(){return(qt=Bt(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object(p.getAppRoot)(),"api/workflows/").concat(t,"/download?style=run"),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Gt(e,t){return Jt.apply(this,arguments)}function Jt(){return(Jt=Bt(regeneratorRuntime.mark((function e(t,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(Object(p.getAppRoot)(),"api/workflows/").concat(t,"/invocations"),e.next=3,S.a.post(i,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kt={props:{title:{type:String,default:""},icon:{type:String,default:"fa-play"},percentage:{type:Number,default:-1},waiting:{type:Boolean,default:!1},waitText:{type:String,default:"Sending..."},variant:{type:String,default:"info"}},computed:{progressWidth:function(){return"".concat(this.percentage,"%")},buttonClass:function(){return this.waiting?"disabled":"btn btn-".concat(this.variant)},iconClass:function(){return this.waiting?"fa-spinner fa-spin mr-1":this.icon+" mr-1"},currentText:function(){return this.waiting?this.waitText:this.title}}},Xt=Object(T.a)(Kt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"ui-button-default",class:e.buttonClass,attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[n("i",{staticClass:"icon fa",class:e.iconClass}),e._v(" "),n("span",{staticClass:"title"},[e._v(" "+e._s(e.currentText)+" ")]),e._v(" "),-1!=e.percentage?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",style:{width:e.progressWidth}})]):e._e()])}),[],!1,null,null,null).exports,Qt={components:{WorkflowInvocationState:n(586).a},props:{workflowName:{type:String,required:!0},invocations:{type:Array,required:!0}},data:function(){return{refreshHistoryTimeout:null}},computed:{timesExecuted:function(){return this.invocations.length},multipleInvocations:function(){return this.timesExecuted>1},historyTarget:function(){return this.multipleInvocations?"".concat(Object(p.getAppRoot)(),"history/view_multiple"):"".concat(Object(p.getAppRoot)(),"history/switch_to_history?hist_id=").concat(this.invocations[0].history_id)},wasNewHistoryTarget:function(){if(this.invocations.length<1)return!1;var e=Object(o.a)();return this.invocations[0].history_id&&e.currHistoryPanel&&e.currHistoryPanel.model.id!=this.invocations[0].history_id||!1}},methods:{_refreshHistory:function(){var e=this,t=Object(o.a)(),n=t&&t.currHistoryPanel&&t.currHistoryPanel.model;this.refreshHistoryTimeout&&window.clearTimeout(this.refreshHistoryTimeout),n&&n.refresh().success((function(){0===n.numOfUnfinishedShownContents()&&(e.refreshHistoryTimeout=window.setTimeout((function(){e._refreshHistory()}),n.UPDATE_DELAY))}))}},mounted:function(){new w.a.WebhookView({type:"workflow",toolId:null,toolVersion:null}),this._refreshHistory()}},Zt=Object(T.a)(Qt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"donemessagelarge"},[n("p",[e._v("\n            Successfully invoked workflow "),n("b",[e._v(e._s(e.workflowName))]),e.multipleInvocations?n("em",[e._v(" - "+e._s(e.timesExecuted)+" times")]):e._e(),e._v(".\n        ")]),e._v(" "),e.multipleInvocations?n("p",[e._v("\n            This workflow will generate results in multiple histories. You can observe progress in the\n            "),n("a",{attrs:{href:e.historyTarget}},[e._v("history multi-view")]),e._v(".\n        ")]):e.wasNewHistoryTarget?n("p",[e._v("\n            This workflow will generate results in a new history.\n            "),n("a",{attrs:{href:e.historyTarget}},[e._v("Switch to that history now")]),e._v(".\n        ")]):n("p",[e._v("\n            You can check the status of queued jobs and view the resulting data by refreshing the History pane, if\n            this has not already happened automatically.\n        ")])]),e._v(" "),e._l(e.invocations,(function(e,t){return n("workflow-invocation-state",{key:e.id,attrs:{index:t,"invocation-id":e.id}})})),e._v(" "),n("div",{attrs:{id:"webhook-view"}})],2)}),[],!1,null,null,null).exports,en=n(167),tn=n(56),nn=n(129),an=n(116);var rn=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.runData=t,this.name=t.name,this.workflowResourceParameters=t.workflow_resource_parameters,this.hasWorkflowResourceParameters=!r.default.isEmpty(this.workflowResourceParameters),this.historyId=t.history_id,this.workflowId=t.id,this.hasUpgradeMessages=t.has_upgrade_messages,this.hasStepVersionChanges=!r.default.isEmpty(t.step_version_changes),this.steps=[],this.links=[],this.parms=[],this.wpInputs={},this.parameterInputLabels=[];var i=!1,a=!1;r.default.each(t.steps,(function(e,t){var i=an.a[e.step_type],a="".concat(parseInt(t+1),": ").concat(e.step_label||e.step_name);e.annotation&&(a+=" - ".concat(e.annotation)),e.step_version&&(a+=" (Galaxy Version ".concat(e.step_version,")")),e=g.a.merge({index:t,fixed_title:r.default.escape(a),icon:i||"",help:null,citations:null,collapsible:!0,collapsed:t>0&&!on(e),sustain_version:!0,sustain_repeats:!0,sustain_conditionals:!0,narrow:!0,text_enable:"Edit",text_disable:"Undo",cls_enable:"fa fa-edit",cls_disable:"fa fa-undo",errors:e.messages,initial_errors:!0,cls:"ui-portlet-section",hide_operations:!0,needs_refresh:!1,always_refresh:"tool"!=e.step_type},e),n.steps[t]=e,n.links[t]=[],n.parms[t]={},"parameter_input"==e.step_type&&e.step_label&&n.parameterInputLabels.push(e.step_label)})),r.default.each(this.steps,(function(e,t){nn.a.visitInputs(e.inputs,(function(e,i){n.parms[t][i]=e}))})),r.default.each(this.steps,(function(e,t){r.default.each(e.output_connections,(function(e){r.default.each(n.steps,(function(i,a){i.step_index===e.input_step_index&&n.links[t].push(i)}))}))})),r.default.each(this.steps,(function(e,t){r.default.each(n.steps,(function(i,a){var o={};r.default.each(e.output_connections,(function(e){i.step_index===e.input_step_index&&(o[e.input_name]=e)})),r.default.each(n.parms[a],(function(n,i){var a=o[i];a&&(n.type="hidden",n.help=n.step_linked?"".concat(n.help,", "):"",n.help+="Output dataset '".concat(a.output_name,"' from step ").concat(parseInt(t)+1),n.step_linked=n.step_linked||[],n.step_linked.push({index:e.index,step_type:e.step_type}))}))}))}));var o=0,s=function(e){return n.wpInputs[e]=n.wpInputs[e]||{label:e,name:e,type:"text",color:"hsl( ".concat(100*++o,", 70%, 30% )"),style:"ui-form-wp-source",links:[]}};r.default.each(this.steps,(function(e,t){r.default.each(n.parms[t],(function(t,n){!function(e,t){for(var n,i=/\$\{(.+?)\}/g;n=i.exec(String(e));){var a=n[1];t(s(a))}}(t.value,(function(n){a=!0,n.links.push(e),t.wp_linked=!0,t.type="text",t.backdrop=!0,t.style="ui-form-wp-target"}))})),r.default.each(e.replacement_parameters,(function(e){-1==n.parameterInputLabels.indexOf(e)&&s(e)}))})),r.default.each(this.steps,(function(e,t){if("tool"==e.step_type){var n=!0;nn.a.visitInputs(e.inputs,(function(t,a,r){var o=t.value&&"RuntimeValue"==t.value.__class__,s=-1!=["data","data_collection"].indexOf(t.type),l=r[t.data_ref];t.step_linked&&!on(t.step_linked)&&(n=!1),t.options&&(0==t.options.length&&!n||t.wp_linked)&&(t.is_workflow=!0),l&&(t.is_workflow=l.step_linked&&!on(l.step_linked)||t.wp_linked),(s||t.value&&"RuntimeValue"==t.value.__class__&&!t.step_linked)&&(e.collapsed=!1,i=!0),o&&(t.value=null),t.flavor="workflow",o||s||"hidden"===t.type||t.wp_linked||(t.optional||!g.a.isEmpty(t.value)&&""!==t.value)&&(t.collapsible_value=t.value,t.collapsible_preview=!0)}))}})),this.hasOpenToolSteps=i,this.hasReplacementParametersInToolForm=a};function on(e){for(var t=Array.isArray(e)?e:[e],n=0;n<t.length;n++){var i=t[n];if(!i||!i.step_type||!i.step_type.startsWith("data"))return!1}return!0}var sn={View:f.a.View.extend({initialize:function(e){var t=Object(o.a)();this.modal=t.modal||new y.a.View,this.runWorkflowModel=e.model,this.deferred=new en.a,this.setRunButtonStatus=e.setRunButtonStatus,this.handleInvocations=e.handleInvocations,this.setElement(e.el),this._configure(),this.render()},_configure:function(){this.forms=[],this.steps=this.runWorkflowModel.steps,this.links=this.runWorkflowModel.links,this.parms=this.runWorkflowModel.parms,this.wp_inputs=this.runWorkflowModel.wpInputs},render:function(){var e=this;this.deferred.reset(),this._renderParameters(),this._renderHistory(),this._renderUseCachedJob(),this._renderResourceParameters(),r.default.each(this.steps,(function(t){e._renderStep(t)}))},_renderParameters:function(){var e=this;this.wp_form=null,r.default.isEmpty(this.wp_inputs)||(this.wp_form=new tn.a({title:"<b>Workflow Parameters</b>",inputs:this.wp_inputs,cls:"ui-portlet-section",onchange:function(){r.default.each(e.wp_form.input_list,(function(t,n){r.default.each(t.links,(function(t){e._refreshStep(t)}))}))}}),this._append(this.$el.empty(),this.wp_form.$el))},_renderHistory:function(){this.history_form=new tn.a({cls:"ui-portlet-section",title:"<b>History Options</b>",inputs:[{type:"conditional",name:"new_history",test_param:{name:"check",label:"Send results to a new history",type:"boolean",value:"false",help:""},cases:[{value:"true",inputs:[{name:"name",label:"History name",type:"text",value:this.runWorkflowModel.name}]}]}]}),this._append(this.$el,this.history_form.$el)},_renderResourceParameters:function(){this.workflow_resource_parameters_form=null,r.default.isEmpty(this.runWorkflowModel.workflowResourceParameters)||(this.workflow_resource_parameters_form=new tn.a({cls:"ui-portlet-section",title:"<b>Workflow Resource Options</b>",inputs:this.runWorkflowModel.workflowResourceParameters}),this._append(this.$el,this.workflow_resource_parameters_form.$el))},_renderUseCachedJob:function(){var e=Object(o.a)(),t={};e.user.attributes.preferences&&"extra_user_preferences"in e.user.attributes.preferences&&(t=JSON.parse(e.user.attributes.preferences.extra_user_preferences));var n="use_cached_job|use_cached_job_checkbox"in t&&t["use_cached_job|use_cached_job_checkbox"];this.display_use_cached_job_checkbox="true"===n,this.display_use_cached_job_checkbox&&(this.job_options_form=new tn.a({cls:"ui-portlet-section",title:"<b>Job re-use Options</b>",inputs:[{type:"conditional",name:"use_cached_job",test_param:{name:"check",label:"BETA: Attempt to reuse jobs with identical parameters?",type:"boolean",value:"false",help:"This may skip executing jobs that you have already run."}}]}),this._append(this.$el,this.job_options_form.$el))},_renderStep:function(e){var t=this,n=Object(o.a)(),i=null;this.deferred.execute((function(a){if(t.$el.addClass("ui-steps"),"tool"==e.step_type)e.postchange=function(t,i){var a={tool_id:e.id,tool_version:e.version,inputs:u.a.extend(!0,{},i.data.create())};i.wait(!0),n.emit.debug("tool-form-composite::postchange()","Sending current state.",a),g.a.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools/").concat(e.id,"/build"),data:a,success:function(e){i.update(e),i.wait(!1),n.emit.debug("tool-form-composite::postchange()","Received new model.",e),t.resolve()},error:function(e){n.emit.debug("tool-form-composite::postchange()","Refresh request failed.",e),t.reject()}})},i=new b.a(e),e.post_job_actions&&e.post_job_actions.length&&i.portlet.append(u()("<div/>").addClass("ui-form-element-disabled").append(u()("<div/>").addClass("ui-form-title").html("<b>Job Post Actions</b>")).append(u()("<div/>").addClass("ui-form-preview").html(r.default.reduce(e.post_job_actions,(function(e,t){return"".concat(e," ").concat(t.short_str)}),""))));else{var o=-1!=["data_input","data_collection_input"].indexOf(e.step_type);r.default.each(e.inputs,(function(e){e.flavor="module",e.hide_label=o})),i=new tn.a(g.a.merge({title:e.fixed_title,onchange:function(){r.default.each(t.links[e.index],(function(e){t._refreshStep(e)}))},inputs:e.inputs&&e.inputs.length>0?e.inputs:[{type:"hidden",name:"No options available.",ignore:null}]},e)),e.step_label&&i.$el.attr("step-label",e.step_label)}if(t.forms[e.index]=i,t._append(t.$el,i.$el),e.needs_refresh&&t._refreshStep(e),i.portlet[t.show_progress?"disable":"enable"](),t.show_progress){var s=100*(e.index+1)/t.steps.length;t.setRunButtonStatus(!1,"Preparing...",s)}n.emit.debug("tool-form-composite::initialize()","".concat(e.index," : Workflow step state ready."),e),window.setTimeout((function(){a.resolve()}),0)}))},_refreshStep:function(e){var t=this,n=this.forms[e.index];n?(r.default.each(this.parms[e.index],(function(e,i){if(e.step_linked||e.wp_linked){var a=n.field_list[n.data.match(i)];if(a){var o;if(e.step_linked)o={values:[]},r.default.each(e.step_linked,(function(e){if(on(e)){var n=t.forms[e.index].data.create().input;n&&r.default.each(n.values,(function(e){o.values.push(e)}))}})),!e.multiple&&o.values.length>0&&(o={values:[o.values[0]]});else if(e.wp_linked){o=e.value;for(var s,l=/\$\{(.+?)\}/g;s=l.exec(e.value);){var c=t.wp_form.field_list[t.wp_form.data.match(s[1])],d=c&&c.value();d&&(o=o.split(s[0]).join(d))}}void 0!==o&&a.value(o)}}})),n.trigger("change")):e.needs_refresh=!0},execute:function(){var e=this;this.show_progress=!0,this._enabled(!1),this.deferred.execute((function(t){window.setTimeout((function(){t.resolve(),e._submit()}),0)}))},_submit:function(){var e=this,t=Object(o.a)(),n=this.history_form.data.create(),i={new_history_name:n["new_history|name"]?n["new_history|name"]:null,history_id:n["new_history|name"]?null:this.runWorkflowModel.historyId,resource_params:this.workflow_resource_parameters_form?this.workflow_resource_parameters_form.data.create():{},replacement_params:this.wp_form?this.wp_form.data.create():{},parameters:{},parameters_normalized:!0,batch:!0};this.display_use_cached_job_checkbox&&(i.use_cached_job="true"===this.job_options_form.data.create()["use_cached_job|check"]);var a=!0;for(var r in this.forms){var s=this.forms[r],l=s.data.create(),c=this.steps[r],d=c.step_index;for(var u in s.trigger("reset"),l){var h=l[u],f=s.data.match(u),p=s.input_list[f];if(!p.step_linked){if(on(c)?!(a=h&&h.values&&h.values.length>0)&&p.optional&&(a=!0):a=p.optional||p.is_workflow&&""!==h||!p.is_workflow&&null!==h,!a){"hidden"==p.type&&this.modal.show({title:_()("Workflow submission failed"),body:"Step ".concat(d,": ").concat(c.step_label||c.step_name," is in an invalid state. Please remove and re-add this step in the Workflow Editor."),buttons:{Close:function(){e.modal.hide()}}}),s.highlight(f);break}i.parameters[d]=i.parameters[d]||{},i.parameters[d][u]=l[u]}}if(!a)break}a?(t.emit.debug("tool-form-composite::submit()","Validation complete.",i),Gt(this.runWorkflowModel.workflowId,i).then((function(n){t.emit.debug("tool-form-composite::submit","Submission successful.",n),Array.isArray(n)&&n.length>0?e.handleInvocations(n):e.submissionErrorModal(i,n),e._enabled(!0)})).catch((function(n){t.emit.debug("tool-form-composite::submit","Submission failed.",n);var a=!1;if(n&&n.err_data)for(var r in e.forms){var o=e.forms[r],s=n.err_data[o.model.get("step_index")];if(s){var l=o.data.matchResponse(s);for(var c in l){o.highlight(c,l[c]),a=!0;break}}}a||e.submissionErrorModal(i,n),e._enabled(!0)}))):(this._enabled(!0),t.emit.debug("tool-form-composite::submit()","Validation failed.",i))},_append:function(e,t){e.append("<p/>").append(t)},_enabled:function(e){this.setRunButtonStatus(e,"Sending...",-1),this.wp_form&&this.wp_form.portlet[e?"enable":"disable"](),this.history_form&&this.history_form.portlet[e?"enable":"disable"](),r.default.each(this.forms,(function(t){t&&t.portlet[e?"enable":"disable"]()}))},submissionErrorModal:function(e,t){var n=this;this.modal.show({title:_()("Workflow submission failed"),body:this._templateError(e,t&&t.err_msg),buttons:{Close:function(){n.modal.hide()}}})},_templateError:function(e,t){return u()("<div/>").addClass("errormessagelarge").append(u()("<p/>").text("The server could not complete the request. Please contact the Galaxy Team if this error persists. ".concat(JSON.stringify(t)||""))).append(u()("<pre/>").text(JSON.stringify(e,null,4)))}})},ln={props:{model:{type:Object,required:!0},setRunButtonStatus:{type:Function,required:!0}},data:function(){return{runForm:null}},mounted:function(){var e=this;this.$nextTick((function(){var t={el:e.$refs.form,model:e.model,setRunButtonStatus:e.setRunButtonStatus,handleInvocations:e.handleInvocations};e.runForm=new sn.View(t)}))},methods:{execute:function(){this.runForm.execute()},handleInvocations:function(e){this.$emit("submissionSuccess",e)}}},cn=Object(T.a)(ln,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"form"})}),[],!1,null,null,null).exports,dn=["data_input","data_collection_input","parameter_input"];function un(e){return dn.includes(e)}var hn={props:{model:{type:Object,required:!0},setRunButtonStatus:{type:Function,required:!0},targetHistory:{type:String,default:"current"},useJobCache:{type:Boolean,default:!1}},data:function(){return{form:null,inputTypes:{}}},computed:{},created:function(){var e=this;this.form=new tn.a(this.formDefinition()),this.$nextTick((function(){e.$refs.form.appendChild(e.form.$el[0])}))},methods:{formDefinition:function(){var e=this,t=[];return Object.values(this.model.wpInputs).forEach((function(n){var i=Object.assign({},n);i.color=void 0,t.push(i),e.inputTypes[i.name]="replacement_parameter"})),this.model.steps.forEach((function(n,i){if(un(n.step_type)){var a=new String(n.step_index),r=n.step_label||new String(n.step_index+1),o=n.annotation,s=n.inputs[0],l=Object.assign({},s,{name:a,help:o,label:r});l.flavor="module",t.push(l),e.inputTypes[a]=n.step_type}})),{inputs:t}},execute:function(){var e=this,t={},n={},i=this.form.data.create();for(var a in i){var r=i[a],o=this.inputTypes[a];"replacement_parameter"==o?t[a]=r:un(o)&&(n[a]=r)}var s={replacement_dict:t,inputs:n,inputs_by:"step_index",batch:!0,use_cached_job:this.useJobCache};"current"==this.targetHistory?s.history_id=this.model.historyId:s.new_history_name=this.model.name,Gt(this.model.workflowId,s).then((function(t){e.$emit("submissionSuccess",t)})).catch((function(t){console.log(t),e.$emit("submissionError",t)}))}}},fn=Object(T.a)(hn,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"form"})}),[],!1,null,null,null).exports,pn={components:{LoadingSpan:me.a,WaitButton:Xt,WorkflowRunSuccess:Zt,WorkflowRunForm:cn,WorkflowRunFormSimple:fn},props:{workflowId:{type:String},preferSimpleForm:{type:Boolean,default:!1},simpleFormTargetHistory:{type:String,default:"current"},simpleFormUseJobCache:{type:Boolean,default:!1}},data:function(){return{error:null,loading:!0,hasUpgradeMessages:!1,hasStepVersionChanges:!1,workflowName:"",runForm:null,runButtonEnabled:!0,runButtonWaitText:"",runButtonPercentage:-1,invocations:null,simpleForm:null,submissionError:null,model:null}},created:function(){var e=this;(function(e){return qt.apply(this,arguments)})(this.workflowId).then((function(t){var n=new rn(t),i=e.preferSimpleForm;i&&(n.hasReplacementParametersInToolForm&&(console.log("cannot render simple workflow form - has ${} values in tool steps"),i=!1),n.hasOpenToolSteps&&(console.log("cannot render simple workflow form - one or more tools have disconnected runtime inputs"),i=!1),n.hasWorkflowResourceParameters&&(console.log("Cannot render simple workflow form - workflow resource parameters are configured"),i=!1)),e.simpleForm=i,e.model=n,e.hasUpgradeMessages=n.hasUpgradeMessages,e.hasStepVersionChanges=n.hasStepVersionChanges,e.workflowName=e.model.name,e.loading=!1})).catch((function(t){console.log(t),e.error=Object(Be.a)(t)}))},methods:{execute:function(){this.$refs.runform.execute(),this.submissionError=null},setRunButtonStatus:function(e,t,n){this.runButtonEnabled=e,this.runButtonWaitText=t,this.runButtonPercentage=n},handleInvocations:function(e){this.invocations=e},handleSubmissionError:function(e){this.submissionError=Object(Be.a)(e)},showAdvanced:function(){this.simpleForm=!1}}},mn=Object(T.a)(pn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.error?n("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n        "+e._s(e.error)+"\n    ")]):n("span",[e.loading?n("b-alert",{attrs:{variant:"info",show:""}},[n("loading-span",{attrs:{message:"Loading workflow run data"}})],1):null!=e.invocations?n("workflow-run-success",{attrs:{invocations:e.invocations,"workflow-name":e.workflowName}}):n("div",{staticClass:"ui-form-composite"},[n("div",{staticClass:"ui-form-composite-messages mb-4"},[e.hasUpgradeMessages?n("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n                    Some tools in this workflow may have changed since it was last saved or some errors were found.\n                    The workflow may still run, but any new options will have default values. Please review the\n                    messages below to make a decision about whether the changes will affect your analysis.\n                ")]):e._e(),e._v(" "),e.hasStepVersionChanges?n("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n                    Some tools are being executed with different versions compared to those available when this\n                    workflow was last saved because the other versions are not or no longer available on this Galaxy\n                    instance. To upgrade your workflow and dismiss this message simply edit the workflow and re-save\n                    it.\n                ")]):e._e(),e._v(" "),e.submissionError?n("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n                    Workflow submission failed: "+e._s(e.submissionError)+"\n                ")]):e._e()],1),e._v(" "),n("div",{staticClass:"ui-form-composite-header h4"},[n("b",[e._v("Workflow: "+e._s(e.workflowName))]),e._v(" "),n("wait-button",{attrs:{title:"Run Workflow",id:"run-workflow",variant:"primary",disabled:!e.runButtonEnabled,waiting:!e.runButtonEnabled,"wait-text":e.runButtonWaitText,percentage:e.runButtonPercentage},on:{click:e.execute}})],1),e._v(" "),e.simpleForm?n("div",[n("workflow-run-form-simple",{ref:"runform",attrs:{model:e.model,"set-run-button-status":e.setRunButtonStatus,"target-history":e.simpleFormTargetHistory,"use-job-cache":e.simpleFormUseJobCache},on:{submissionSuccess:e.handleInvocations,submissionError:e.handleSubmissionError}}),e._v(" "),n("a",{attrs:{href:"#"},on:{click:e.showAdvanced}},[e._v("Expand to full workflow form.")])],1):n("workflow-run-form",{ref:"runform",attrs:{model:e.model,"set-run-button-status":e.setRunButtonStatus},on:{submissionSuccess:e.handleInvocations}})],1)],1)],1)}),[],!1,null,null,null).exports;var _n={components:{Invocations:n(666).a},data:function(){return{invocationItems:[],loading:!0}},created:function(){this.fetchRecentInvocations()},methods:{fetchRecentInvocations:function(){var e,t,n=this;(e={user_id:Object(o.a)().user.id,limit:150,view:"collection"},t="".concat(Object(p.getAppRoot)(),"api/invocations"),S.a.get(t,{params:e})).then((function(e){n.invocationItems=e.data,n.loading=!1})).catch(this.handleError)},handleError:function(e){console.error(e)}}},gn=Object(T.a)(_n,(function(){var e=this.$createElement;return(this._self._c||e)("invocations",{attrs:{"invocation-items":this.invocationItems,loading:this.loading,"no-invocations-message":"There are no invocations to be shown."},on:{"reload-invocations":this.fetchRecentInvocations}})}),[],!1,null,null,null).exports,vn=n(1088),yn=n.n(vn),bn=n(1089),wn=n.n(bn),kn=n(269),xn=n(271);k.default.use(N.a);var Sn=Object.freeze({CITATION:"bibliography",BIBTEX:"bibtex",RAW:"raw"}),Cn={components:{Citation:xn.a},props:{source:{type:String,required:!0},id:{type:String,required:!0},simple:{type:Boolean,required:!1,default:!1}},data:function(){return{citations:[],errors:[],showCollapse:!1,outputFormats:Sn,outputFormat:Sn.CITATION}},updated:function(){var e=this;this.$nextTick((function(){e.$emit("rendered")}))},created:function(){var e=this;Object(kn.a)(this.source,this.id).then((function(t){e.citations=t})).catch((function(e){console.error(e)}))}},Mn=(n(1756),Object(T.a)(Cn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.simple?e.citations.length?n("div",[n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.id,expression:"id"}],attrs:{variant:"primary"}},[e._v("Citations")]),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:e.id.replace(/ /g,"_")},on:{show:function(t){return e.$emit("show")},shown:function(t){return e.$emit("shown")},hide:function(t){return e.$emit("hide")},hidden:function(t){return e.$emit("hidden")}}},[n("b-card",e._l(e.citations,(function(t,i){return n("Citation",{key:i,staticClass:"formatted-reference",attrs:{citation:t,"output-format":e.outputFormat}})})),1)],1)],1):e._e():n("b-card",{staticClass:"citation-card",attrs:{"header-tag":"nav"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-nav",{attrs:{"card-header":"",tabs:""}},[n("b-nav-item",{attrs:{active:e.outputFormat===e.outputFormats.CITATION},on:{click:function(t){e.outputFormat=e.outputFormats.CITATION}}},[e._v("Citations (APA)")]),e._v(" "),n("b-nav-item",{attrs:{active:e.outputFormat===e.outputFormats.BIBTEX},on:{click:function(t){e.outputFormat=e.outputFormats.BIBTEX}}},[e._v("BibTeX")])],1)]},proxy:!0}],null,!1,3994401831)},[e._v(" "),"histories"===e.source?n("div",{staticClass:"infomessage"},[e._v("\n            When writing up your analysis, remember to include all references that should be cited in order to\n            completely describe your work. Also, please remember to\n            "),n("a",{attrs:{href:"https://galaxyproject.org/citing-galaxy"}},[e._v("cite Galaxy")]),e._v(".\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"citations-formatted"},e._l(e.citations,(function(t,i){return n("Citation",{key:i,staticClass:"formatted-reference",attrs:{citation:t,"output-format":e.outputFormat}})})),1)])],1)}),[],!1,null,null,null).exports),Tn=n(901);function jn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Dn={components:{Citations:Mn,isotope:wn.a},directives:{infiniteScroll:yn.a},props:{transitionDuration:{type:Number,default:200}},data:function(){return{tools:[],buffer:[],filterOption:null,filterText:"",busy:!1,loading:!0}},computed:{isoOptions:function(){var e=this;return{transitionDuration:this.transitionDuration,masonry:{fitWidth:!0},getFilterData:{filterByText:function(t){var n=new RegExp(e.filterText,"i");return t.name.match(n)||t.description.match(n)||t.help.match(n)}}}}},created:function(){var e=this;S.a.get("".concat(Object(p.getAppRoot)(),"api/tools?tool_help=True")).then((function(t){e.initialize(t.data)})).catch((function(e){console.error(e)}))},methods:{show:function(e){this.$refs.cards[e].style.zIndex="1"},shown:function(e){var t=this;this.layout(),Object(Tn.setTimeout)((function(){t.$refs.cards[e].style.zIndex="auto"}),200)},hidden:function(e){this.layout()},layout:function(){this.$refs.iso.layout()},filter:function(e){this.$refs.iso.filter(e)},toolsExtracted:function(e){return e.reduce((function(e,t){return"elems"in t?e.concat(t.elems.reduce((function(e,n){return n.name?[].concat(jn(e),[{id:n.id,name:n.name,section:t.name,description:n.description,url:Object(p.getAppRoot)()+String(n.link).substring(1),version:n.version,help:n.help}]):e}),[])):e}),[]).map((function(e){return[Math.random(),e]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},loadMore:function(){var e=this;this.buffer.length<this.tools.length&&(this.busy=!0,Object(Tn.setTimeout)((function(){var t=e.buffer.length,n=t+10,i=e.tools.slice(t,n);e.buffer=e.buffer.concat(i),e.busy=!1}),100))},helpSummary:function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.evaluate("//strong[text()='What it does']/../following-sibling::*",t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(n)return n.innerHTML;var i=t.documentElement.textContent;return i?i.substring(0,i.indexOf("\n\n")):null},getToolsNumber:function(){return this.tools.length},initialize:function(e){this.tools=this.toolsExtracted(e),this.buffer=this.tools.slice(0,20),this.loading=!1}}},Ln=Object(T.a)(Dn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy"}},[n("h2",{staticClass:"mb-3",staticStyle:{"text-align":"center"}},[n("span",{attrs:{id:"tools-view"}},[e._v("Consolidated view of "+e._s(e.tools.length)+" available tools.")])]),e._v(" "),e.loading?e._e():n("div",[n("b-container",{staticClass:"mb-4",attrs:{fluid:""}},[n("b-row",{staticClass:"justify-content-center"},[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:[function(t){return e.filter("filterByText")},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filterText=""}]},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1)],1)],1),e._v(" "),n("isotope",{ref:"iso",staticStyle:{margin:"0 auto"},attrs:{options:e.isoOptions,list:e.buffer},on:{filter:function(t){e.filterOption=arguments[2]}}},e._l(e.buffer,(function(t,i){return n("b-card",{key:i,ref:"cards",refInFor:!0,staticClass:"m-2",staticStyle:{width:"23rem"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",[n("b-link",{attrs:{href:t.url,target:"_blank"}},[n("h4",{staticClass:"tools-view-name"},[e._v(e._s(t.name))])]),e._v(" "),n("b-badge",{staticClass:"tools-view-section"},[e._v(e._s(t.section))])],1)]},proxy:!0}],null,!0)},[e._v(" "),n("p",{staticClass:"card-text",domProps:{innerHTML:e._s(e.helpSummary(t.help)||t.description)}}),e._v(" "),n("p",{staticClass:"card-text"},[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal--"+i,expression:"'modal-' + '-' + index"}],attrs:{index:i}},[e._v("Info")]),e._v(" "),n("b-modal",{attrs:{id:"modal--"+i,centered:"","ok-only":"",static:!0,title:t.name}},[n("b",[e._v(e._s(t.version+" / "+t.id))]),e._v(" "),n("p",[e._v(e._s(t.description))]),e._v(" "),n("p",{domProps:{innerHTML:e._s(t.help)}})])],1),e._v(" "),n("Citations",{attrs:{id:t.id,simple:"",source:"tools"},on:{rendered:e.layout,show:function(t){return e.show(i)},shown:function(t){return e.shown(i)},hidden:function(t){return e.hidden(i)}}})],1)})),1)],1)])}),[],!1,null,null,null).exports;function En(e){return function(e){if(Array.isArray(e))return An(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var In={data:function(){return{schemaTagObj:{}}},methods:{createToolsJson:function(e){return{"@context":"http://schema.org","@graph":e.reduce((function(e,t){return"elems"in t?e.concat(t.elems.reduce((function(e,t){return t.name?[].concat(En(e),[{"@type":"SoftwareApplication",operatingSystem:"Any",applicationCategory:"Web application",name:t.name,description:t.help||t.description,softwareVersion:t.version,url:Object(p.getAppRoot)()+String(t.link).substring(1)}]):e}),[])):e}),[])}}},created:function(){var e=this;S.a.get("".concat(Object(p.getAppRoot)(),"api/tools?tool_help=True")).then((function(t){e.schemaTagObj=e.createToolsJson(t.data);var n=document.createElement("script");n.id="schema-json",n.type="application/ld+json",n.text=JSON.stringify(e.schemaTagObj),document.head.appendChild(n)})).catch((function(e){console.error(e)}))}},Pn=Object(T.a)(In,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,Yn=n(114),Rn=n(87),Hn=n(118),Nn=Me.a.extend({initialize:function(e){this.ajaxQueue=new Yn.a.AjaxQueue,Me.a.prototype.initialize.call(this,e)},init_grid_elements:function(){var e=this.ajaxQueue;e.stop(),Me.a.prototype.init_grid_elements.call(this),u.a.makeArray(this.$el.find(".delayed-value-datasets_by_state").map((function(e,t){return function(){var e=u()(t).data("id"),n="".concat(Object(p.getAppRoot)(),"api/histories/").concat(e,"?keys=nice_size,contents_active,contents_states"),i={};return i.url=n,i.type="GET",i.success=function(t){for(var n=t.contents_states,i="",a=0,r=["ok","running","queued","new","error"];a<r.length;a++){var o=r[a],s=n[o];s&&(i+='<div class="count-box state-color-'.concat(o,'" title="Datasets in ').concat(o,' state">').concat(s,"</div> "))}var l=t.contents_active,c=l.deleted;c&&(i+='<div class="count-box state-color-deleted" title="Deleted datasets">'.concat(c,"</div> "));var d=l.hidden;d&&(i+='<div class="count-box state-color-hidden" title="Hidden datasets">'.concat(d,"</div> ")),u()(".delayed-value-datasets_by_state[data-id='".concat(e,"']")).html(i),u()(".delayed-value-disk_size[data-id='".concat(e,"']")).html(t.nice_size)},u.a.ajax(i)}}))).forEach((function(t){return e.add(t)})),e.start()},_showCopyDialog:function(e){var t=new Rn.a({id:e});t.fetch().fail((function(){alert("History could not be fetched. Please contact an administrator")})).done((function(){Object(Hn.a)(t,{}).done((function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)}))}))},add_operation:function(e,t,n){var i=this;"Copy"==t.label&&(t.onclick=function(e){i._showCopyDialog(e)}),Me.a.prototype.add_operation.call(this,e,t,n)}}),$n={View:f.a.View.extend({title:_()("Histories"),initialize:function(e){var t=this,n=Object(o.a)();Te.a.markViewAsLoading(this),"list_published"==e.action_id?this.active_tab="shared":"list"==e.action_id&&(this.active_tab="user"),this.model=new f.a.Model,g.a.get({url:"".concat(Object(p.getAppRoot)(),"history/").concat(e.action_id,"?").concat(u.a.param(n.params)),success:function(e){t.model.set(e),t.render()}})},render:function(){var e=new Nn(this.model.attributes);this.$el.empty().append(e.$el)}})},Fn={data:function(){return{plugins:[],hdas:[],search:"",selected:null,name:null,error:null,fixed:!1}},created:function(){var e=this,t=Object(o.a)(),n="".concat(Object(p.getAppRoot)(),"api/plugins"),i=t.params.dataset_id;i&&(this.fixed=!0,this.selected=i,n+="?dataset_id=".concat(i)),S.a.get(n).then((function(t){e.plugins=t.data})).catch((function(t){e.error=e._errorMessage(t)}))},methods:{select:function(e){var t=this;if(this.fixed)this.create(e);else{var n=Object(o.a)(),i=n.currHistoryPanel&&n.currHistoryPanel.model.id;i?S.a.get("".concat(Object(p.getAppRoot)(),"api/plugins/").concat(e.name,"?history_id=").concat(i)).then((function(n){t.name=e.name,t.hdas=n.data&&n.data.hdas,t.hdas&&t.hdas.length>0&&(t.selected=t.hdas[0].id)})).catch((function(e){t.error=t._errorMessage(e)})):this.error="This option requires an accessible history."}},create:function(e){var t="".concat(e.href,"?dataset_id=").concat(this.selected);"_top"==e.target?window.location.href=t:u()("#galaxy_main").attr("src",t)},match:function(e){return!this.search||-1!=e.name.indexOf(this.search)||e.description&&-1!=e.description.indexOf(this.search)},_errorMessage:function(e){return e&&e.response&&e.response.data&&e.response.data.err_msg||"Request failed for an unknown reason."}}},Wn=Object(T.a)(Fn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui-thumbnails"},[e.error?n("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):n("div",[n("div",{staticClass:"search-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search-query parent-width",attrs:{name:"query",placeholder:"search visualizations",autocomplete:"off",type:"text"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),e._v(" "),e._l(e.plugins,(function(t){return n("div",{key:t.name},[e.match(t)?n("table",[n("tr",{staticClass:"ui-thumbnails-item",on:{click:function(n){return e.select(t)}}},[n("td",[t.logo?n("img",{staticClass:"ui-thumbnails-image",attrs:{alt:"ui thumbnails",src:t.logo}}):n("div",{staticClass:"ui-thumbnails-icon fa fa-eye"})]),e._v(" "),n("td",[n("div",{staticClass:"ui-thumbnails-title font-weight-bold"},[e._v(e._s(t.html))]),e._v(" "),n("div",{staticClass:"ui-thumbnails-text"},[e._v(e._s(t.description))])])]),e._v(" "),e.fixed?e._e():n("tr",[n("td"),e._v(" "),t.name==e.name?n("td",[e.hdas&&e.hdas.length>0?n("div",[n("div",{staticClass:"font-weight-bold"},[e._v("Select a dataset to visualize:")]),e._v(" "),n("div",{staticClass:"ui-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selected=t.target.multiple?n:n[0]}}},e._l(e.hdas,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])})),0),e._v(" "),n("div",{staticClass:"icon-dropdown fa fa-caret-down"})]),e._v(" "),n("button",{staticClass:"ui-button-default float-left mt-3 btn btn-primary",attrs:{type:"button"},on:{click:function(n){return e.create(t)}}},[n("i",{staticClass:"icon fa fa-check"}),e._v(" "),n("span",{staticClass:"title"},[e._v("Create Visualization")])])]):n("div",{staticClass:"alert alert-danger"},[e._v("\n                            There is no suitable dataset in your current history which can be visualized with this\n                            plugin.\n                        ")])]):e._e()])]):e._e()])}))],2)])}),[],!1,null,null,null).exports;function zn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Vn={View:f.a.View.extend({initialize:function(){var e=Object(o.a)();this.setElement("<div/>"),this.model=new f.a.Model({dataset_id:e.params.dataset_id}),this.active_tab="user",this.render()},render:function(){var e=this,t="".concat(Object(p.getAppRoot)(),"api/datasets/").concat(this.model.get("dataset_id"));g.a.get({url:t,success:function(t){var n="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(t.creating_job,"?full=True");g.a.get({url:n,success:function(n){e.render_error_page(t,n),e.find_common_problems(n)},error:function(){e.display_message({status:"error",message:"Error occurred while loading the job.",persistent:!0,cls:"errormessage"},e.$(".response-message"))}})},error:function(){e.display_message({status:"error",message:"Error occurred while loading the dataset.",persistent:!0,cls:"errormessage"},e.$(".response-message"))}})},find_common_problems:function(e){var t=this,n="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(e.id,"/common_problems");g.a.get({url:n,success:function(e){t.render_common_problems(e)},error:function(e){console.log("error"),console.log(e)}})},render_common_problems:function(e){var t=e.has_duplicate_inputs,n=e.has_empty_inputs;if(t||n){var i=this.$el.find(".common_problems");i.text("Detected Common Potential Problems"),n&&i.after("\n                    <p>\n                        The tool was executed with one or more empty input datasets. This frequently\n                        results in tool errors due to problematic input choices.\n                    <p>"),t&&i.after("\n                    <p>\n                        The tool was executed with one or more duplicate input datasets. This frequently\n                        results in tool errors due to problematic input choices.\n                    <p>")}},render_error_page:function(e,t){this.$el.empty().append("\n            ".concat(this._templateHeader(),"\n            <h2>Dataset Error Report</h2>\n            <p>An error occurred while running the tool <b>").concat(t.tool_id,"</b>.</p>\n            ").concat(this.job_summary(t),'\n            <h3>Troubleshooting</h3>\n            <p>\n                There are a number of helpful resources to self diagnose and\n                correct problems.\n                <br>\n                Start here:\n                <b>\n                    <a href="https://galaxyproject.org/support/tool-error/" target="_blank">\n                        My job ended with an error. What can I do?\n                    </a>\n                </b>\n            </p>')),this.$el.append("<h3>Issue Report</h3>").append(this._getBugFormTemplate(e,t))},job_summary:function(e){var t=e.tool_stderr,n=e.job_stderr,i=e.job_messages;if(!t&&!n&&!i)return'<h3 class="common_problems"></h3>';var a="<h3>Details</h3>";if(i){a+="<p>Execution resulted in the following messages:</p>";var o,s=zn(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;a+='<p><pre class="rounded code">'.concat(r.default.escape(l.desc),"</pre></p>")}}catch(e){s.e(e)}finally{s.f()}}return t&&(a+="<p>Tool generated the following standard error:</p>",a+='<pre class="rounded code">'.concat(r.default.escape(t),"</pre>")),n&&(a+="<p>Galaxy job runner generated the following standard error:</p>",a+='<pre class="code">'.concat(r.default.escape(n),"</pre>")),a+='<h3 class="common_problems"></h3>'},display_message:function(e,t,n,i){i?n?t.append(new v.a.UnescapedMessage(e).$el):t.empty().html(new v.a.UnescapedMessage(e).$el):n?t.append(new v.a.Message(e).$el):t.empty().html(new v.a.Message(e).$el)},_templateHeader:function(){return'<div class="page-container edit-attr"><div class="response-message"></div></div>'},_getBugFormTemplate:function(e,t){var n=this,i=Object(o.a)().user.get("email"),a=new tn.a({inputs:[{type:"text",hidden:!!i,name:"email",value:i,label:"Please provide your email:"},{type:"text",area:!0,name:"message",label:"Please provide detailed information on the activities leading to this issue:"}],buttons:{save:new v.a.Button({icon:"fa-bug",title:_()("Report"),cls:"btn btn-primary",floating:"clear",onclick:function(){var i=a.data.create(),r="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(t.id,"/error");i.dataset_id=e.id,n.submit(i,r)}})}});return a.$el},submit:function(e,t){var n=this;u.a.ajax({type:"POST",url:t,data:e,success:function(e){n.$el.empty().append(n._templateHeader()),e.messages.forEach((function(e){n.display_message({status:e[1],message:e[0],persistent:!0},n.$(".response-message"),!0,!0)}))},error:function(){n.display_message({status:"error",message:"Error occurred while saving. Please fill all the required fields and try again.",persistent:!0,cls:"errormessage"},n.$(".response-message"))}})}})},Bn=n(166),qn={View:f.a.View.extend({initialize:function(){var e=Object(o.a)();this.setElement("<div/>"),this.model=new f.a.Model({dataset_id:e.params.dataset_id}),this.message=new v.a.Message({persistent:!0}),this.tabs=this._createTabs(),this.active_tab="user",this.$el.append(u()("<h4/>").append("Edit dataset attributes")).append(this.message.$el).append("<p/>").append(this.tabs.$el).hide(),this.render()},render:function(){var e=this;u.a.ajax({url:"".concat(Object(p.getAppRoot)(),"dataset/get_edit?dataset_id=").concat(e.model.get("dataset_id")),success:function(t){!e.initial_message&&e.message.update(t),e.initial_message=!0,r.default.each(e.forms,(function(e,n){e.model.set("inputs",t["".concat(n,"_inputs")]),e.model.set("hide_operations",t["".concat(n,"_disable")]),e.render()})),e.$el.show()},error:function(t){var n=t.responseJSON&&t.responseJSON.err_msg;e.message.update({status:"danger",message:n||"Error occurred while loading the dataset."})}})},_submit:function(e,t){var n=this,i=t.data.create();i.dataset_id=this.model.get("dataset_id"),i.operation=e,u.a.ajax({type:"PUT",url:"".concat(Object(p.getAppRoot)(),"dataset/set_edit"),data:i,success:function(e){n.message.update(e),n.render(),n._reloadHistory()},error:function(e){var t=e.responseJSON&&e.responseJSON.err_msg;n.message.update({status:"danger",message:t||"Error occurred while editing the dataset attributes."})}})},_createTabs:function(){this.forms={attribute:this._getAttribute(),conversion:this._getConversion(),datatype:this._getDatatype(),permission:this._getPermission()};var e=new Bn.a.View;return e.add({id:"attribute",title:_()("Attributes"),icon:"fa fa-bars",tooltip:_()("Edit dataset attributes"),$el:this.forms.attribute.$el}),e.add({id:"convert",title:_()("Convert"),icon:"fa-gear",tooltip:_()("Convert to new format"),$el:this.forms.conversion.$el}),e.add({id:"datatype",title:_()("Datatypes"),icon:"fa-database",tooltip:_()("Change data type"),$el:this.forms.datatype.$el}),e.add({id:"permissions",title:_()("Permissions"),icon:"fa-user",tooltip:_()("Permissions"),$el:this.forms.permission.$el}),e},_getAttribute:function(){var e=this,t=new tn.a({title:_()("Edit attributes"),operations:{submit_attributes:new v.a.Button({tooltip:_()("Save attributes of the dataset."),icon:"fa-floppy-o",title:_()("Save"),onclick:function(){e._submit("attributes",t)}}),submit_autodetect:new v.a.Button({tooltip:"This will inspect the dataset and attempt to correct the values of fields if they are not accurate.",icon:"fa-undo",title:"Auto-detect",onclick:function(){e._submit("autodetect",t)}})}});return t},_getConversion:function(){var e=this,t=new tn.a({title:_()("Convert to new format"),operations:{submit_conversion:new v.a.Button({tooltip:_()("Convert the datatype to a new format."),title:_()("Convert datatype"),icon:"fa-exchange",onclick:function(){e._submit("conversion",t)}})}});return t},_getDatatype:function(){var e=this,t=new tn.a({title:_()("Change datatype"),operations:{submit_datatype:new v.a.Button({tooltip:_()("Change the datatype to a new type."),title:_()("Change datatype"),icon:"fa-exchange",onclick:function(){e._submit("datatype",t)}}),submit_datatype_detect:new v.a.Button({tooltip:_()("Detect the datatype and change it."),title:_()("Detect datatype"),icon:"fa-undo",onclick:function(){e._submit("datatype_detect",t)}})}});return t},_getPermission:function(){var e=this,t=new tn.a({title:_()("Manage dataset permissions"),operations:{submit_permission:new v.a.Button({tooltip:_()("Save permissions."),title:_()("Save permissions"),icon:"fa-floppy-o ",onclick:function(){e._submit("permission",t)}})}});return t},_reloadHistory:function(){var e=Object(o.a)();e&&e.currHistoryPanel.loadCurrentHistory()}})};function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t instanceof Object||(console.warn("safeAssign expected an object, instead got:",t),t={}),Object.keys(t).filter((function(t){return Object.prototype.hasOwnProperty.call(e,t)})).forEach((function(n){return e[n]=t[n]}))}function Jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Kn=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,Zn=new WeakMap,ei=0,ti=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zn.set(this,ei++)}var t,n,i;return t=e,i=[{key:"setTransient",value:function(){var e=this;Qn.has(e)||Qn.set(e,new Set);for(var t=Qn.get(e),n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i.forEach((function(e){return t.add(e)})),Qn.set(e,t)}},{key:"validate",value:function(e){if(Xn.has(this))return Xn.get(this)(e);throw new Error("Missing validator")}},{key:"setValidator",value:function(e){Xn.set(this,e)}}],(n=[{key:"updateState",value:function(){Kn.set(this,this.state)}},{key:"errorMessage",value:function(e){return e in this.validationErrors?this.validationErrors[e]:"errmessage"}},{key:"fieldValid",value:function(e){return!(e in this.validationErrors)}},{key:"counter",get:function(){return Zn.get(this)}},{key:"dirty",get:function(){return Kn.get(this)!=this.state}},{key:"clean",get:function(){return!this.dirty}},{key:"state",get:function(){var e=this.transientFields;return JSON.stringify(this,(function(t){if(!e.has(t))return this[t]}))}},{key:"lastState",get:function(){return Kn.get(this)}},{key:"transientFields",get:function(){var e=this.constructor;return Qn.has(e)||Qn.set(e,new Set),Qn.get(e)}},{key:"valid",get:function(){return 0==Object.keys(this.validationErrors).length}},{key:"validationErrors",get:function(){return this.constructor.validate(this)}}])&&Jn(t.prototype,n),i&&Jn(t,i),e}();function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=si(e);if(t){var a=si(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return ri(this,n)}}function ri(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?oi(e):t}function oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(e){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(n,e);var t=ai(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).role_arn="",Gn(oi(e),i),e.updateState(),e}return n}(ti);function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=pi(e);if(t){var a=pi(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return hi(this,n)}}function hi(e,t){return!t||"object"!==ci(t)&&"function"!=typeof t?fi(e):t}function fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}li.setValidator((function(e){var t={};return e.role_arn.length||(t.role_arn="Missing role_arn"),t})),li.fields={role_arn:{label:"Role ARN",description:"The Amazon resource name (ARN) of the role to be assumed by Galaxy.",placeholder:"arn:aws:iam::XXXXXXXXXXXX:role/XXXXXXXXXXX"}};var mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(n,e);var t=ui(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).tenant_id="",e.client_id="",e.client_secret="",Gn(fi(e),i),e.updateState(),e}return n}(ti);mi.setValidator((function(e){var t={};return e.tenant_id.length<36&&(t.tenant_id="Tenant ID too short"),e.tenant_id||(t.tenant_id="Missing Tenant ID"),e.client_id.length<36&&(t.client_id="Client ID too short"),e.client_id||(t.client_id="Missing client ID"),e.client_secret||(t.client_secret="Missing secret"),t})),mi.fields={tenant_id:{label:"Tenant ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"Your Tenant ID (or Directory ID) on Azure."},client_id:{label:"Client ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"The Client ID (or Application ID) you defined for Galaxy on your Azure directory."},client_secret:{label:"Client Secret",mask:"",placeholder:"Client Secret",description:"A secret string you obtained from Azure portal that Galaxy can use to prove its identity when requesting tokens to access your resources."}};var _i=new Map;function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yi(e,t,n){return(yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Si(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function bi(e,t){return(bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Si(e);if(t){var a=Si(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return ki(this,n)}}function ki(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?xi(e):t}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_i.set("aws",{klass:li,label:"Amazon Web Services (AWS)"}),_i.set("azure",{klass:mi,label:"Microsoft Azure"});var Ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bi(e,t)}(r,e);var t,n,i,a=wi(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=a.call(this)).id=null,e.description="",e.authn_id=null,e.provider=null,e.expanded=!1,e.loading=!1;var n=Object.assign({},r.defaults,t);return Gn(xi(e),n),e.config=new e.configClass(n.config),e.updateState(),e}return t=r,i=[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r(e)}},{key:"defaults",get:function(){return{authn_id:null,provider:"aws",expanded:!1}}}],(n=[{key:"match",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!e.length||this.title.includes(e)}},{key:"title",get:function(){return this.description.length?this.description:this.provider}},{key:"valid",get:function(){return yi(Si(r.prototype),"valid",this)&&this.config.valid}},{key:"resourceProvider",get:function(){return this.provider},set:function(e){this.provider=e,this.config=new this.configClass({})}},{key:"configClass",get:function(){return _i.get(this.provider).klass}}])&&vi(t.prototype,n),i&&vi(t,i),r}(ti);function Mi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Ci.setTransient("expanded","loading"),Ci.setValidator((function(e){var t={};return e.provider||(t.provider="Provider must be set"),e.authn_id||(t.authn_id="Please pick an identity provider"),e.config.valid||(t.config="Invalid config object"),t}));var Ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="",this.provider="",Gn(this,t)}var t,n,i;return t=e,i=[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t)}}],(n=[{key:"authn_id",get:function(){return this.id}},{key:"text",get:function(){return this.provider}},{key:"value",get:function(){return this.id}}])&&Mi(t.prototype,n),i&&Mi(t,i),e}();function ji(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Oi(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ji(r,i,a,o,s,"next",e)}function s(e){ji(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Di,Li=function(e){return Object(a.c)()+e};function Ei(){return(Ei=Oi(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Li("api/cloud/authz"),e.next=3,S.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error("Unexpected response from listing.");case 6:return e.abrupt("return",n.data.map(Ci.create));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(){return(Ai=Oi(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Li("api/cloud/authz/${id}"),e.next=3,S.a.get(n);case 3:if(200==(i=e.sent).status){e.next=6;break}throw new Error("Unexpected response loading key.");case 6:return e.abrupt("return",Ci.create(i.data));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(){return(Ii=Oi(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ci.create(t),e.next=3,Pi(n);case 3:if(200==(i=e.sent).status){e.next=6;break}throw new Error("Save failure.");case 6:return e.abrupt("return",Ci.create(i.data));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e){return Yi.apply(this,arguments)}function Yi(){return(Yi=Oi(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.id?S.a.put(Li("api/cloud/authz/".concat(t.id)),t):S.a.post(Li("api/cloud/authz"),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(){return(Ri=Oi(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Ci.create(t)).id){e.next=8;break}return i=Li("api/cloud/authz/".concat(t.id)),e.next=5,S.a.delete(i);case 5:if(200==e.sent.status){e.next=8;break}throw new Error("Delete failure.");case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(){return Ni.apply(this,arguments)}function Ni(){return(Ni=Oi(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=8;break}return t=Li("authnz"),e.next=4,S.a.get(t);case 4:if(200==(n=e.sent).status){e.next=7;break}throw new Error("Unable to load identity providers");case 7:Di=n.data.map(Ti.create);case 8:return e.abrupt("return",Di);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $i={listCredentials:function(){return Ei.apply(this,arguments)},getCredential:function(e){return Ai.apply(this,arguments)},saveCredential:function(e){return Ii.apply(this,arguments)},deleteCredential:function(e){return Ri.apply(this,arguments)},getIdentityProviders:Hi},Fi=n(1091),Wi=n(447),zi={components:{MaskedInput:{extends:Fi.a,props:{mask:{type:String,required:!1,default:""}},computed:{masker:function(){return Object(Wi.a)({mask:this.mask})}},methods:{getFormatted:function(e){var t=this.stringifyValue(e);return this.mask.length?this.masker.resolve(t):t}}}},props:{value:{type:Object,required:!0}},computed:{config:function(){return this.value},fieldDefs:function(){return this.value.constructor.fields}}};function Ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bi={components:{CredentialConfig:Object(T.a)(zi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.fieldDefs,(function(t,i){return n("b-form-group",{key:i,attrs:{label:t.label||i,"label-for":"config-"+i,"label-cols-lg":"3",state:e.config.fieldValid(i),"invalid-feedback":e.config.errorMessage(i)}},[n("masked-input",{attrs:{id:"config-"+i,mask:t.mask,placeholder:t.placeholder,maxlength:t.maxlength||Math.Infinity,state:e.config.fieldValid(i),trim:""},model:{value:e.config[i],callback:function(t){e.$set(e.config,i,t)},expression:"config[fieldName]"}})],1)})),1)}),[],!1,null,null,null).exports},props:{value:{type:Ci,required:!0}},data:function(){return{identityProviders:[]}},computed:{credential:function(){return this.value},resourceProviderOptions:function(){return Array.from(_i.entries()).map((function(e){var t=Ui(e,2);return{value:t[0],text:t[1].label}}))},config:function(){return this.credential.config},loading:function(){return this.credential.loading},saveButtonDisabled:function(){return!(this.credential.valid&&this.credential.dirty)},saveButtonVariant:function(){return this.saveButtonDisabled?"secondary":"primary"},saveButtonTitle:function(){return this.loading?"Saving Key...":"Save Key"}},created:function(){var e=this;Hi().then((function(t){e.credential.authn_id||1!=t.length||(e.credential.authn_id=t[0].authn_id,e.credential.updateState()),e.identityProviders=t}))}},qi={components:{CredentialForm:Object(T.a)(Bi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{attrs:{validated:e.credential.isValid}},[n("b-form-group",{attrs:{label:"Description","label-for":"credentialDescription","label-cols-lg":"3"}},[n("b-form-input",{attrs:{id:"credentialDescription",state:e.credential.fieldValid("description"),placeholder:"Description (optional)",trim:""},model:{value:e.credential.description,callback:function(t){e.$set(e.credential,"description",t)},expression:"credential.description"}})],1),e._v(" "),e.identityProviders.length>1?n("b-form-group",{attrs:{label:"Identity Provider","label-for":"identityProvider","label-cols-lg":"3"}},[n("b-form-select",{attrs:{id:"identityProvider",state:e.credential.fieldValid("authn_id"),options:e.identityProviders},model:{value:e.credential.authn_id,callback:function(t){e.$set(e.credential,"authn_id",t)},expression:"credential.authn_id"}})],1):e._e(),e._v(" "),n("b-form-group",{attrs:{label:"Resource Provider","label-for":"resourceProvider","label-cols-lg":"3"}},[n("b-form-select",{attrs:{id:"resourceProvider",state:e.credential.fieldValid("provider"),options:e.resourceProviderOptions},model:{value:e.credential.resourceProvider,callback:function(t){e.$set(e.credential,"resourceProvider",t)},expression:"credential.resourceProvider"}})],1),e._v(" "),n("credential-config",{model:{value:e.credential.config,callback:function(t){e.$set(e.credential,"config",t)},expression:"credential.config"}}),e._v(" "),n("footer",{staticClass:"border-top"},[n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return t.preventDefault(),e.$emit("delete",e.credential)}}},[e._v(" Delete Key ")]),e._v(" "),n("b-button",{attrs:{"aria-label":"Save Key",variant:e.saveButtonVariant,disabled:e.saveButtonDisabled},on:{click:function(t){return t.preventDefault(),e.$emit("save",e.credential)}}},[e._v("\n            "+e._s(e.saveButtonTitle)+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},props:{credential:{type:Ci,required:!0}},computed:{statusClasses:function(){var e=this.credential,t=e.expanded,n=e.valid,i=e.dirty;return{loading:e.loading,expanded:t,valid:n,dirty:i,collapsed:!t}},variant:function(){return this.expanded?"":this.credential.dirty?"warning":this.credential.valid?"primary":"danger"},expanded:function(){return this.credential.expanded}},methods:{expand:function(e){var t=void 0!==e?e:!this.expanded;this.$emit("expand",{expanded:t})}}},Gi=Object(T.a)(qi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-list-group-item",{staticClass:"cloud-auth-key",class:e.statusClasses,attrs:{variant:e.variant,button:!e.expanded}},[n("header",[n("hgroup",[n("h4",{on:{click:function(t){return t.preventDefault(),e.expand()}}},[e._v(e._s(e.credential.title))]),e._v(" "),n("nav",{staticClass:"operations"},[n("ul",[n("transition",{attrs:{name:"fade"}},[e.expanded&&e.credential.dirty?n("li",{staticClass:"save"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Save Key",title:"Save Key"},on:{click:function(t){return t.preventDefault(),e.$emit("save",e.credential)}}},[n("span",[e._v("Save Key")])])]):e._e()]),e._v(" "),n("li",{staticClass:"delete"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Delete Key",title:"Delete Key"},on:{click:function(t){return t.preventDefault(),e.$emit("delete",e.credential)}}},[n("span",[e._v("Delete Key")])])]),e._v(" "),n("li",{staticClass:"details"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Show Details",title:"Show Details"},on:{click:function(t){return t.preventDefault(),e.expand()}}},[n("span",[e._v("Details")])])])],1)])])]),e._v(" "),e.expanded?n("credential-form",{staticClass:"border-top",on:{click:function(t){return t.target!==t.currentTarget?null:e.expand()},save:function(t){return e.$emit("save",e.credential)},delete:function(t){return e.$emit("delete",e.credential)}},model:{value:e.credential,callback:function(t){e.credential=t},expression:"credential"}}):e._e()],1)}),[],!1,null,null,null).exports;function Ji(e){return function(e){if(Array.isArray(e))return Ki(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ki(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}k.default.use(N.a);var Xi={components:{CloudAuthItem:Gi},data:function(){return{items:[],filter:"",showHelp:!0,showFilter:!1,loading:!1,doomedItem:null,errorMessage:null}},computed:{filteredItems:function(){var e=this;return this.items.filter((function(t){return t.match(e.filter)}))},filterDescription:function(){return"".concat(this.filteredItems.length," matches out of ").concat(this.items.length," items")},deleteButtonVariant:function(){return this.showDeleted?"primary":"secondary"},hasDoomed:{get:function(){return null!==this.doomedItem},set:function(){}}},watch:{showDeleted:function(e){this.loadCredentials({deleted:e})}},methods:{loadCredentials:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,$i.listCredentials(t).then((function(t){return e.items=t})).catch(this.setError("Unable to load cloud keys.")).finally((function(){return e.loading=!1}))},onCreate:function(){var e=Ci.create({expanded:!0});this.addItem(e)},onSave:function(e){e.valid&&(e.loading=!0,$i.saveCredential(e).then((function(t){e.id=t.id,e.updateState()})).catch(this.setError("Unable to save key.")).finally((function(){return e.loading=!1})))},onDelete:function(e){this.doomedItem=e,e.id?this.$refs.deleteModal.show():(this.removeItem(e),this.doomedItem=null)},deleteKey:function(){var e=this;$i.deleteCredential(this.doomedItem).then((function(){return e.removeItem(e.doomedItem)})).catch(this.setError("Unable to delete cloud key.")).finally((function(){e.doomedItem=null}))},expand:function(e,t){var n=t.expanded;e.expanded=n,n&&this.items.filter((function(t){return t!==e})).forEach((function(e){return e.expanded=!1}))},addItem:function(e){this.items=[].concat(Ji(this.items),[e])},removeItem:function(e){this.items=this.items.filter((function(t){return t!==e}))},setError:function(e){var t=this;return function(n){t.errorMessage=e,console.warn(n)}}},created:function(){this.loadCredentials()}},Qi=(n(1758),Object(T.a)(Xi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"cloud-auth"},[n("header",[n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]),e._v(" "),n("hgroup",{staticClass:"cloud-auth-title"},[n("h1",[e._v("Manage Cloud Authorization")]),e._v(" "),n("nav",{staticClass:"operations"},[n("ul",[n("li",{staticClass:"cloudKeyHelp"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.showHelp},attrs:{"aria-label":"Instructions",title:"Instructions"},on:{click:function(t){t.preventDefault(),e.showHelp=!e.showHelp}}},[n("span",[e._v("Instructions")])])]),e._v(" "),n("li",{staticClass:"cloudKeyFilter"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.showFilter},attrs:{"aria-label":"Filter Results",title:"Filter Results"},on:{click:function(t){t.preventDefault(),e.showFilter=!e.showFilter}}},[n("span",[e._v("Filter")])])]),e._v(" "),n("li",{staticClass:"createCloudKey"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Create New Key",title:"Create New Key"},on:{click:function(t){return t.preventDefault(),e.onCreate(t)}}},[n("span",[e._v("Create New Key")])])])])])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showHelp?n("hgroup",[n("p",[e._v("See the online "),n("a",{attrs:{href:"https://galaxyproject.org/authnz/"}},[e._v("Documentation")]),e._v(".")])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showFilter?n("hgroup",[n("b-form-group",{attrs:{description:e.filterDescription}},[n("b-form-input",{attrs:{type:"text",placeholder:"Filter"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1):e._e()]),e._v(" "),n("b-button-group",{staticClass:"mb-4"},[n("button",{attrs:{name:"createNewKey"},on:{click:e.onCreate}},[e._v("Create New Authorization Key")])])],1),e._v(" "),n("div",{staticClass:"scroll-container"},[n("b-list-group",[n("transition-group",{attrs:{name:"fade"}},e._l(e.filteredItems,(function(t){return n("cloud-auth-item",{key:t.counter,staticClass:"mb-1",attrs:{credential:t},on:{delete:e.onDelete,save:e.onSave,expand:function(n){return e.expand(t,n)}}})})),1)],1)],1),e._v(" "),n("b-modal",{ref:"deleteModal",attrs:{centered:"",id:"deleteCredentialModal",title:"Delete Key?",size:"sm"},on:{ok:e.deleteKey,cancel:function(t){e.doomedItem=null}},model:{value:e.hasDoomed,callback:function(t){e.hasDoomed=t},expression:"hasDoomed"}})],1)}),[],!1,null,null,null).exports);function Zi(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function ea(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Zi(r,i,a,o,s,"next",e)}function s(e){Zi(r,i,a,o,s,"throw",e)}o(void 0)}))}}var ta,na=function(e){return Object(a.c)()+e};function ia(){return(ia=ea(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return n="custos"===t.provider||"cilogon"===t.provider?na("authnz/".concat(t.provider,"/disconnect/").concat(t.email)):na("authnz/".concat(t.provider,"/disconnect/")),e.next=4,S.a.delete(n);case 4:if(200==e.sent.status){e.next=7;break}throw new Error("Delete failure.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(){return(aa=ea(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=na("authnz"),e.next=3,S.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error("Unable to load connected external identities");case 6:return ta=n.data,e.abrupt("return",ta);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){return(ra=ea(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=na("authnz/".concat(t,"/login")),e.next=3,S.a.post(n);case 3:if(200==(i=e.sent).status){e.next=6;break}throw new Error("Save failure.");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(){return(oa=ea(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sa(),console.log(t.username),e.abrupt("return",sa().username);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(){return la.apply(this,arguments)}function la(){return(la=ea(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=na("api/users/current"),e.next=3,S.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ca={saveIdentity:function(e){return ra.apply(this,arguments)},disconnectIdentity:function(e){return ia.apply(this,arguments)},getIdentityProviders:function(){return aa.apply(this,arguments)},hasUsername:function(){return oa.apply(this,arguments)}},da=n(667);k.default.use(N.a);var ua={components:{ExternalLogin:da.a},data:function(){return{items:[],showHelp:!0,loading:!1,doomedItem:null,errorMessage:null,enable_oidc:Object(o.a)().config.enable_oidc,cilogonOrCustos:null}},computed:{deleteButtonVariant:function(){return this.showDeleted?"primary":"secondary"},hasDoomed:{get:function(){return null!==this.doomedItem},set:function(){}}},watch:{showDeleted:function(e){this.loadIdentities({deleted:e})}},methods:{loadIdentities:function(){var e=this;this.loading=!0,ca.getIdentityProviders().then((function(t){e.items=t})).catch(this.setError("Unable to load connected external identities.")).finally((function(){return e.loading=!1}))},onDisconnect:function(e){this.doomedItem=e,e.id?this.items.length>1?this.$refs.deleteModal.show():(this.$refs.deleteAndResetModal.show(),this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")):this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")},disconnectID:function(){var e=this;ca.disconnectIdentity(this.doomedItem).then((function(){e.removeItem(e.doomedItem)})).catch((function(t){t.data?e.setError("Unable to disconnect external identity."):e.removeItem(e.doomedItem)})).finally((function(){e.removeItem(e.doomedItem),e.doomedItem=null}))},disconnectAndReset:function(){this.disconnectID(),Object(ee.b)()},removeItem:function(e){this.items=this.items.filter((function(t){return t!=e}))},setError:function(e){var t=this;return function(n){t.errorMessage=e,console.warn(n)}}},created:function(){this.loadIdentities()}},ha=(n(1759),Object(T.a)(ua,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"external-id"},[n("header",[n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v(e._s(e.errorMessage))]),e._v(" "),e._m(0),e._v(" "),n("p",[e._v("\n            Users with existing Galaxy user accounts (e.g., via Galaxy username and password) can associate their\n            account with their 3rd party identities. For instance, if a user associates their Galaxy account with\n            their Google account, then they can login to Galaxy either using their Galaxy username and password, or\n            their Google account. Whichever method they use they will be assuming same Galaxy user account, hence\n            having access to the same histories, workflows, datasets, libraries, etc.\n        ")]),e._v(" "),e._m(1)],1),e._v(" "),e.items.length?n("div",{staticClass:"external-subheading"},[n("h3",[e._v("Connected External Identities")]),e._v(" "),e._l(e.items,(function(t){return n("b-button",{key:t.email,staticClass:"d-block mt-3",attrs:{"aria-label":"Disconnect External Identity",title:"Disconnect External Identity"},on:{click:function(n){return e.onDisconnect(t)}}},[e._v("\n            Disconnect "+e._s(t.provider.charAt(0).toUpperCase()+t.provider.slice(1))+" - "+e._s(t.email)+"\n        ")])})),e._v(" "),n("b-modal",{ref:"deleteModal",attrs:{centered:"",id:"disconnectIDModal",title:"Disconnect Identity?",size:"sm"},on:{ok:e.disconnectID,cancel:function(t){e.doomedItem=null}}}),e._v(" "),n("b-modal",{ref:"deleteAndResetModal",attrs:{centered:"",id:"disconnectAndResetModal",title:"Deleting last external identity"},on:{ok:e.disconnectAndReset,cancel:function(t){e.doomedItem=null}}},[n("p",[e._v("\n                This is your only defined external identity. If you delete this identity, you will be logged out. To\n                log back in you will need to use a password associated with your account, or reconnect to this third\n                party identity. If you don't know your Galaxy user password, you can reset it or contact an\n                administrator for help.\n            ")])]),e._v(" "),n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==e.errorMessage},on:{dismissed:function(t){e.errorMessage=null}}},[e._v(e._s(e.errorMessage))])],2):e._e(),e._v(" "),e.enable_oidc?n("div",{staticClass:"external-subheading"},[n("h3",[e._v("Connect Other External Identities")]),e._v(" "),n("external-login",{attrs:{login_page:!1}})],1):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("hgroup",{staticClass:"external-id-title"},[t("h1",[this._v("Manage External Identities")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n            See more information, including a list of supported identity providers,\n            "),t("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/"}},[this._v("here")]),this._v(".\n        ")])}],!1,null,null,null).exports),fa=n(664),pa=n(629);function ma(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function _a(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ma(r,i,a,o,s,"next",e)}function s(e){ma(r,i,a,o,s,"throw",e)}o(void 0)}))}}function ga(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var va=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(p.getAppRoot)()}var t,n,i,a,r,o,s,l,c,d,u,h;return t=e,(n=[{key:"getLibraryPermissions",value:(h=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/libraries/").concat(t,"/permissions?scope=current"),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return h.apply(this,arguments)})},{key:"getLibrary",value:(u=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/libraries/").concat(t),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return u.apply(this,arguments)})},{key:"getFolderPermissions",value:(d=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/folders/").concat(t,"/permissions?scope=current"),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return d.apply(this,arguments)})},{key:"getDatasetPermissions",value:(c=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/libraries/datasets/").concat(t,"/permissions?scope=current"),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return c.apply(this,arguments)})},{key:"getDataset",value:(l=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/libraries/datasets/").concat(t),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return l.apply(this,arguments)})},{key:"getFolder",value:(s=_a(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/folders/").concat(t),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),Object(Be.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return s.apply(this,arguments)})},{key:"getSelectOptions",value:(o=_a(regeneratorRuntime.mark((function e(t,n,i,a,r,o){var s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=o?"&q=".concat(o):"",s="".concat(t,"/").concat(n,"/permissions?scope=available&is_library_access=").concat(i,"&page_limit=").concat(r,"&page=").concat(a).concat(o),e.prev=2,e.next=5,S.a.get(s);case 5:return l=e.sent,e.abrupt("return",l.data);case 9:e.prev=9,e.t0=e.catch(2),Object(Be.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t,n,i,a,r){return o.apply(this,arguments)})},{key:"setPermissions",value:(r=_a(regeneratorRuntime.mark((function e(t,n,i,a,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new FormData,i.forEach((function(e){Object.keys(e).map((function(t){var n=e[t].map((function(e){return e.id}));o.append(t,n)}))})),S()({method:"post",url:"".concat(t,"/").concat(n,"/permissions?action=set_permissions"),data:o,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a(e)})).catch((function(e){r(e)}));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n,i,a){return r.apply(this,arguments)})},{key:"toggleDatasetPrivacy",value:(a=_a(regeneratorRuntime.mark((function e(t,n,i,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(Object(p.getAppRoot)(),"api/libraries/datasets/").concat(t,"/permissions?action=").concat(n?"make_private":"remove_restrictions")).then((function(e){i(e.data)})).catch((function(e){a(e)}));case 2:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return a.apply(this,arguments)})}])&&ga(t.prototype,n),i&&ga(t,i),e}(),ya=n(786);k.default.use(ya.a);var ba={props:{id:{type:String,required:!0},title:{type:String,required:!0},permission_type:{type:String,required:!0},initial_value:{type:Array,required:!0},apiRootUrl:{type:String,required:!0},alert:{type:String,required:!0}},components:{Multiselect:ke.a},data:function(){return{permissions:void 0,folder:void 0,is_admin:void 0,options:void 0,value:void 0,page:1,page_limit:10,searchValue:"",fetched_options:[]}},created:function(){this.services=new va({root:this.root}),this.assignValue(this.initial_value),this.getSelectOptions()},computed:{hasMorePages:function(){return this.page*this.page_limit<this.options.total}},methods:{getSelectOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.services.getSelectOptions(this.apiRootUrl,this.id,!0,this.page,this.page_limit,this.searchValue).then((function(n){e.options=n,e.fetched_options=t?e.options.roles:e.fetched_options.concat(e.options.roles)}))},reachedEndOfList:function(e){e&&(this.page++,this.getSelectOptions())},valueChanged:function(){this.$emit("input",this.value,this.permission_type)},searchChanged:function(e){this.page=1,this.searchValue=e,this.getSelectOptions(!0)},assignValue:function(e){this.value=e}}},wa=(n(1760),Object(T.a)(ba,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),n("b-row",[n("b-col",[e.options&&e.value?n("div",{class:e.permission_type},[n("multiselect",{attrs:{options:e.fetched_options,"clear-on-select":!0,"preserve-search":!0,multiple:!0,label:"name","track-by":"id","internal-search":!1},on:{input:e.valueChanged,"search-change":e.searchChanged},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("template",{slot:"afterList"},[e.hasMorePages?n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.reachedEndOfList,expression:"reachedEndOfList"}]},[n("span",{staticClass:"spinner fa fa-spinner fa-spin fa-1x"})]):e._e()])],2)],1):e._e()]),e._v(" "),n("b-col",[n("b-alert",{attrs:{show:"",variant:"info"}},[n("div",{domProps:{innerHTML:e._s(e.alert)}})])],1)],1)],1)}),[],!1,null,"5b6f0fb4",null).exports),ka={props:{is_admin:{type:Boolean,required:!0}}},xa=Object(T.a)(ka,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"text-center"},[this.is_admin?t("b-alert",{attrs:{show:"",variant:"warning"}},[this._v("\n            You are logged in as an "),t("strong",[this._v("administrator")]),this._v(" therefore you can manage any folder on this\n            Galaxy instance. Please make sure you understand the consequences.\n        ")]):t("b-alert",{attrs:{show:"",variant:"warning"}},[this._v("\n            You can assign any number of roles to any of the following permission types. However please read\n            carefully the implications of such actions.\n        ")])],1)])}),[],!1,null,null,null).exports,Sa={props:{name:{type:String,required:!0},path:{type:String,required:!0}},components:{LibraryPermissionsWarning:xa,FontAwesomeIcon:$.a},data:function(){return{is_admin:Object(o.a)().user.attributes.is_admin}}},Ca=(n(1761),Object(T.a)(Sa,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.name?n("div",[n("b-button",{attrs:{variant:"primary",title:"back to parent folder",to:{path:""+this.path}}},[n("font-awesome-icon",{attrs:{icon:"angle-double-left"}})],1),e._v(" "),n("div",[n("div",{staticClass:"header text-center"},[e._v(e._s(e.name))])])],1):e._e(),e._v(" "),n("LibraryPermissionsWarning",{attrs:{is_admin:e.is_admin}}),e._v(" "),n("hr",{staticClass:"my-4"})],1)}),[],!1,null,"98b140ae",null).exports);function Ma(e){void 0!==e.responseJSON?$e.a.error(e.responseJSON.err_msg):$e.a.error("An error occurred during with the last library interaction")}function Ta(e){var t=[];return e&&e.forEach((function(e){t.push({name:e[0],id:e[1]})})),t}var ja=n(210),Oa=[ja.c,ja.d,W.G,W.F,W.v,W.s,ja.e,W.I,W.d,W.L,W.z,W.O,ja.a,ja.f,W.y],Da=[W.b,ja.e,ja.c],La=[W.t,W.A,W.u,W.K,W.k,W.e],Ea=[W.s,W.z,ja.e,W.I,W.K,W.L];function Aa(){Da.forEach((function(e){F.c.add(e)}))}k.default.use(N.a),Aa();var Ia={props:{folder_id:{type:String,required:!0}},components:{PermissionsInputField:wa,PermissionsHeader:Ca,FontAwesomeIcon:$.a},data:function(){return{permissions:void 0,folder:void 0,add_library_item_role_list:void 0,modify_folder_role_list:void 0,manage_folder_role_list:void 0,add_type:"add_library_item_role_list",manage_type:"manage_folder_role_list",modify_type:"modify_folder_role_list",apiRootUrl:"".concat(Object(p.getAppRoot)(),"api/folders")}},created:function(){var e=this;this.root=Object(p.getAppRoot)(),this.services=new va({root:this.root}),this.services.getFolderPermissions(this.folder_id).then((function(t){e.add_library_item_role_list=Ta(t.add_library_item_role_list),e.manage_folder_role_list=Ta(t.manage_folder_role_list),e.modify_folder_role_list=Ta(t.modify_folder_role_list)})),this.services.getFolder(this.folder_id).then((function(t){e.folder=t}))},methods:{setUserPermissionsPreferences:function(e,t){this[t]=e},postPermissions:function(){var e=this;this.services.setPermissions(this.apiRootUrl,this.folder_id,[{"add_ids[]":this.add_library_item_role_list},{"manage_ids[]":this.manage_folder_role_list},{"modify_ids[]":this.modify_folder_role_list}],(function(t){$e.a.success("Permissions saved."),e.permissions=t}),(function(e){$e.a.error("An error occurred while attempting to set folder permissions."),console.error(e)}))}}},Pa=Object(T.a)(Ia,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.folder?n("PermissionsHeader",{attrs:{name:e.folder.name,path:"/folders/"+this.folder.parent_id}}):e._e(),e._v(" "),n("b-container",{attrs:{fluid:""}},[n("div",{staticClass:"dataset_table"},[n("h2",{staticClass:"text-center"},[e._v("Folder permissions")]),e._v(" "),e.manage_folder_role_list?n("PermissionsInputField",{attrs:{id:e.folder_id,permission_type:e.manage_type,initial_value:e.manage_folder_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can manage permissions on this folder.",title:"Roles that can manage permissions on this folder"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.add_library_item_role_list?n("PermissionsInputField",{attrs:{id:e.folder_id,permission_type:e.add_type,initial_value:e.add_library_item_role_list,"api-root-url":e.apiRootUrl,title:"Roles that can add items to this folder",alert:"User with <strong>any</strong> of these roles can add items to this folder (folders and\n                            datasets)."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.modify_folder_role_list?n("PermissionsInputField",{attrs:{id:e.folder_id,permission_type:e.modify_type,initial_value:e.modify_folder_role_list,"api-root-url":e.apiRootUrl,title:"Roles that can modify this folder",alert:"User with <strong>any</strong> of these roles can modify this folder (name, etc.)."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),n("button",{staticClass:"btn btn-secondary toolbtn_save_permissions primary-button",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Save modifications",type:"button"},on:{click:e.postPermissions}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n                Save\n            ")],1)],1)])],1)}),[],!1,null,null,null).exports;function Ya(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Ra(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Ya(r,i,a,o,s,"next",e)}function s(e){Ya(r,i,a,o,s,"throw",e)}o(void 0)}))}}function Ha(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Na=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(p.getAppRoot)()}var t,n,i,a,r;return t=e,(n=[{key:"getFolderContents",value:(r=Ra(regeneratorRuntime.mark((function e(t,n,i,a){var r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>4&&void 0!==l[4]&&l[4],o="".concat(this.root,"api/folders/").concat(t,"/contents?include_deleted=").concat(n,"&limit=").concat(i,"&offset=").concat(a).concat(this.getSearchQuery(r)),e.prev=2,e.next=5,S.a.get(o);case 5:return s=e.sent,e.abrupt("return",s.data);case 9:e.prev=9,e.t0=e.catch(2),Object(Be.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"getFilteredFolderContents",value:(a=Ra(regeneratorRuntime.mark((function e(t,n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(this.root,"api/folders/").concat(t,"/contents?").concat(this.getSearchQuery(i)));case 2:return a=e.sent,e.abrupt("return",a.data.folder_contents.filter((function(e){return!n.some((function(t){return t.id===e.id}))})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getSearchQuery",value:function(e){return e?"&search_text=".concat(encodeURI(e.trim())):""}},{key:"updateFolder",value:function(e,t,n){var i="".concat(this.root,"api/folders/").concat(e.id);try{return S.a.patch(i,e).then((function(){t()})).catch((function(e){n(e)})).data}catch(e){Object(Be.b)(e)}}},{key:"newFolder",value:function(e,t,n){var i="".concat(this.root,"api/folders/").concat(e.parent_id);try{return S.a.post(i,{name:e.name,description:e.description}).then((function(e){t(e.data)})).catch((function(e){n(e)})).data}catch(e){Object(Be.b)(e)}}},{key:"undeleteFolder",value:function(e,t,n){var i="".concat(this.root,"api/folders/").concat(e.id,"?undelete=true");try{return S.a.delete(i).then((function(e){t(e.data)})).catch((function(e){n(e)})).data}catch(e){Object(Be.b)(e)}}},{key:"undeleteDataset",value:function(e,t,n){var i="".concat(this.root,"api/libraries/datasets/").concat(e.id,"?undelete=true");try{return S.a.delete(i).then((function(e){t(e.data)})).catch((function(e){n(e)})).data}catch(e){Object(Be.b)(e)}}}])&&Ha(t.prototype,n),i&&Ha(t,i),e}(),$a=n(286),Fa=n.n($a),Wa=[{label:"",key:"type_icon"},{label:"&check;",key:"selected",sortable:!1},{label:"Name",key:"name",sortable:!0},{label:"Description",key:"message",sortable:!1},{label:"Type",key:"type",sortable:!0},{label:"Size",key:"raw_size",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{label:"State",key:"state",sortable:!0},{label:"",key:"is_unrestricted",sortable:!1},{label:"",key:"buttons",sortable:!1}],za=n(81);function Ua(e,t){var n=Object(o.a)(),i=r.default.template('<div>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Library</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- library.get("name") %></td>\n                        </tr>\n                        <% if(library.get("description") !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- library.get("description") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("synopsis") !== "") { %>\n                            <tr>\n                                <td>synopsis</td>\n                                <td><%- library.get("synopsis") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("create_time_pretty") !== "") { %>\n                            <tr>\n                                <td>created</td>\n                                <td>\n                                    <span title="<%- library.get("create_time") %>">\n                                        <%- library.get("create_time_pretty") %>\n                                    </span>\n                                </td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- library.get("id") %></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Folder</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- options.folder_name %></td>\n                        </tr>\n                        <% if(options.folder_description !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- options.folder_description %></td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- options.id %></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>');n.modal.show({closing_events:!0,title:_()("Location Details"),body:i({library:e,options:t}),buttons:{Close:function(){n.modal.hide()}}})}var Va=0,Ba=0,qa=0,Ga={};function Ja(e,t,n,i){var a=Object(o.a)(),s=[],l=[];if(0===e.length)$e.a.info("You must select at least one item for deletion.");else{var c=r.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>');a.modal.show({closing_events:!0,title:_()("Deleting selected items"),body:c({}),buttons:{Close:function(){a.modal.hide()}}}),Ga.total_number=0,Ga.failed_number=0,e.forEach((function(e){var t=e.id;void 0!==t&&("F"==t.substring(0,1)?l.push(t):s.push(t))})),Ba=s.length+l.length,qa=100/Ba,Va=0;for(var d=[],u=s.length-1;u>=0;u--){var h=new za.a.Item({id:s[u]});d.push(h)}for(var f=l.length-1;f>=0;f--){var p=new za.a.FolderAsModel({id:l[f]});d.push(p)}Ga.total_number=Ba,function e(t,n,i,a){var r=Object(o.a)(),s=new za.a.Folder,l=t.pop();if(void 0===l)return 0===Ga.failed_number?(a(),$e.a.success("Selected items were deleted.")):Ga.failed_number===Ga.total_number?$e.a.error("There was an error and no items were deleted. Please make sure you have sufficient permissions."):Ga.failed_number<Ga.total_number&&$e.a.warning("Some of the items could not be deleted. Please make sure you have sufficient permissions."),r.modal.hide(),s;l.destroy().done((function(r){n(r),Ka(),e(t,n,i,a)})).fail((function(){Ga.failed_number+=1,Ka(),e(t,n,i,a)})),i()}(d,t,n,i)}}function Ka(){Va+=qa,u()(".progress-bar-import").width("".concat(Math.round(Va),"%"));var e="".concat(Math.round(Va),"% Complete");u()(".completion_span").text(e)}var Xa={ImportDatasetModal:f.a.View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.importToHistoryModal()},findCheckedItems:function(){return this.options.selected},importToHistoryModal:function(){var e=this,t=Object(o.a)(),n=this.findCheckedItems(),i=this.templateImportIntoHistoryModal();0===n.length?$e.a.info("You must select some datasets first."):this.fetchUserHistories().done((function(){e.modal=t.modal,e.modal.show({closing_events:!0,title:_()("Import into History"),body:i({histories:e.histories.models}),buttons:{Import:function(){e.importAllIntoHistory()},Close:function(){t.modal.hide()}}})})).fail((function(e,t){void 0!==t.responseJSON?$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}))},fetchUserHistories:function(){return this.histories=new za.a.GalaxyHistories,this.histories.fetch()},importAllIntoHistory:function(){var e=this;this.modal.disableButton("Import");var t=this.modal.$("input[name=history_name]").val();if(""!==t)this.createNewHistory(t).done((function(t){e.processImportToHistory(t.id,t.name)})).fail((function(e,t,n){$e.a.error("An error occurred.")})).always((function(){e.modal.disableButton("Import")}));else{var n=u()("select[name=import_to_history] option:selected").val(),i=u()("select[name=import_to_history] option:selected").text();this.processImportToHistory(n,i),this.modal.disableButton("Import")}},createNewHistory:function(e){return u.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),{name:e})},processImportToHistory:function(e,t){for(var n=this.findCheckedItems(),i=[],a=n.dataset_ids.length-1;a>=0;a--){var r=n.dataset_ids[a],o=new za.a.HistoryItem;o.url="".concat(o.urlRoot+e,"/contents"),o.content=r,o.source="library",i.push(o)}for(var s=n.folder_ids.length-1;s>=0;s--){var l=n.folder_ids[s],c=new za.a.HistoryItem;c.url="".concat(c.urlRoot+e,"/contents"),c.content=l,c.source="library_folder",i.push(c)}this.initChainCallControlToHistory({length:i.length,history_name:t}),u.a.getJSON("".concat(Object(p.getAppRoot)(),"history/set_as_current?id=").concat(e)),this.chainCallImportingIntoHistory(i,t)},initChainCallControlToHistory:function(e){var t;t=this.templateImportIntoHistoryProgressBar(),this.modal.$el.find(".modal-body").html(t({history_name:e.history_name})),this.progress=0,this.progressStep=100/e.length,this.options.chain_call_control.total_number=e.length,this.options.chain_call_control.failed_number=0},chainCallImportingIntoHistory:function(e,t){var n=this,i=Object(o.a)(),a=e.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?$e.a.success("Selected datasets imported into history. Click this to start analyzing it.","",{onclick:function(){window.location=Object(p.getAppRoot)()}}):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?$e.a.error("There was an error and no datasets were imported into history."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&$e.a.warning("Some of the datasets could not be imported into history. Click this to see what was imported.","",{onclick:function(){window.location=Object(p.getAppRoot)()}}),i.modal.hide(),!0;u.a.when(a.save({content:a.content,source:a.source})).done((function(){Ka(),n.chainCallImportingIntoHistory(e,t)})).fail((function(){n.options.chain_call_control.failed_number+=1,Ka(),n.chainCallImportingIntoHistory(e,t)}))},templateImportIntoHistoryProgressBar:function(){return r.default.template('<div class="import_text">\n                Importing selected items to history <b><%= _.escape(history_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateDeletingItemsProgressBar:function(){return r.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateImportIntoHistoryModal:function(){return r.default.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select name="import_to_history" style="width:50%; margin-bottom: 1em; " autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">\n                    or create new:\n                    <input type="text" name="history_name" value=""\n                        placeholder="name of the new history" style="width:50%;" />\n                </div>\n            </div>')}})},Qa=n(608),Za=n(237),er=n(609),tr=n(238),nr=n(607),ir=n(239),ar=n(157),rr=n(275);function or(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var sr={ImportCollectionModal:f.a.View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.showCollectionSelect()},findCheckedItems:function(){return this.options.selected},fetchUserHistories:function(){return this.histories=new za.a.GalaxyHistories,this.histories.fetch()},createNewHistory:function(e){return(t=regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),{name:e});case 2:return n=t.sent,i=n.data,Object(o.a)().currHistoryPanel.switchToHistory(i.id),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){or(r,i,a,o,s,"next",e)}function s(e){or(r,i,a,o,s,"throw",e)}o(void 0)}))})();var t},showCollectionSelect:function(e){var t=this,n=Object(o.a)(),i=this.findCheckedItems();if(0===i.length)$e.a.info("You must select some datasets first.");else{var a=this.templateCollectionSelectModal();this.fetchUserHistories().done((function(){t.modal=n.modal,t.modal.show({closing_events:!0,title:"Create History Collection from Datasets",body:a({selected_datasets:i.dataset_ids.length,histories:t.histories.models}),buttons:{Continue:function(){t.showCollectionBuilder(i.dataset_ids)},Close:function(){n.modal.hide()}}})})).fail((function(e,t){void 0!==t.responseJSON?$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}))}},showCollectionBuilder:function(e){for(var t=this,n=[],i=e.length-1;i>=0;i--){var a={},r=e[i];a.id=r.ldda_id,a.name=r.name,a.deleted=r.deleted,a.state=r.state,n.push(a)}var o=this.modal.$("input[name=history_name]").val();if(""!==o)this.createNewHistory(o).then((function(e){$e.a.success("History created"),t.collectionImport(n,e.id,e.name)})).catch((function(e){console.error(e),$e.a.error("An error occurred.")}));else{this.select_collection_history=this.modal.$el.find("#library-collection-history-select");var s=this.select_collection_history.val(),l=this.select_collection_history.find("option:selected").text();this.collectionImport(n,s,l)}},collectionImport:function(e,t,n){var i,a,r=this,o="Creating Collection in ".concat(n);if(this.collectionType=this.modal.$el.find("#library-collection-type-select").val(),"list"===this.collectionType)i=Qa.default,a=function(e,n,i){return e=e.map((function(e){return{id:e.id,name:e.name,src:"ldda"}})),r.createHDCA(e,r.collectionType,n,i,t)},Za.a.listCollectionCreatorModal(e,{creationFn:a,title:o,defaultHideSourceItems:!0},i);else if("paired"===this.collectionType)i=er.default,a=function(e,n,i){return e=[{name:"forward",src:"ldda",id:e[0].id},{name:"reverse",src:"ldda",id:e[1].id}],r.createHDCA(e,r.collectionType,n,i,t)},tr.a.pairCollectionCreatorModal(e,{creationFn:a,title:o,defaultHideSourceItems:!0},i);else if("list:paired"===this.collectionType)i=nr.default,a=function(e,n,i){return e=e.map((function(e){return{collection_type:"paired",src:"new_collection",name:e.name,element_identifiers:[{name:"forward",id:e.forward.id,src:"ldda"},{name:"reverse",id:e.reverse.id,src:"ldda"}]}})),r.createHDCA(e,"list:paired",n,i,t)},ir.a.pairedListCollectionCreatorModal(e,{creationFn:a,title:o,defaultHideSourceItems:!0},i);else if("rules"===this.collectionType){ar.a.ruleBasedCollectionCreatorModal(e,"library_datasets","collections",{creationFn:function(e,n,i,a){return r.createHDCA(e,n,i,a,t)},defaultHideSourceItems:!0})}},createHDCA:function(e,t,n,i,a,r){return new rr.a.HistoryDatasetCollection({history_content_type:"dataset_collection",collection_type:t,history_id:a,name:n,hide_source_items:i,copy_elements:!i,element_identifiers:e}).save(r)},templateCollectionSelectModal:function(){return r.default.template('<div> \x3c!-- elements selection --\x3e\n                \x3c!-- type selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Collection type</h4>\n                    <div class="form-group">\n                        <select id="library-collection-type-select" name="library-collection-type-select" class="form-control">\n                            <option value="list">List</option>\n                            <option value="paired">Paired</option>\n                            <option value="list:paired">List of Pairs</option>\n                            <option value="rules">From Rules</option>\n                        </select>\n                    </div>\n                    <h5>Which type to choose?</h5>\n                    <dl class="row">\n                        <dt class="col-sm-3">List</dt>\n                        <dd class="col-sm-9">Generic collection which groups any number of datasets into a set; similar to file system folder.</dd>\n\n                        <dt class="col-sm-3">Paired</dt>\n                        <dd class="col-sm-9">Simple collection containing exactly two sequence datasets; one reverse and the other forward.</dd>\n\n                        <dt class="col-sm-3">List of Pairs</dt>\n                        <dd class="col-sm-9">Advanced collection containing any number of Pairs; imagine as Pair-type collections inside of a List-type collection.</dd>\n\n                        <dt class="col-sm-3">From Rules</dt>\n                        <dd class="col-sm-9">Use Galaxy\'s rule builder to describe collections. This is more of an advanced feature that allows building any number of collections or any type.</dd>\n                    </dl>\n                </div>\n                \x3c!-- history selection/creation --\x3e\n                <div class="library-modal-item">\n                    <h4>Select history</h4>\n                    <div class="form-group">\n                        <select id="library-collection-history-select" name="library-collection-history-select" class="form-control">\n                            <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                                <option value="<%= _.escape(history.get("id")) %>">\n                                    <%= _.escape(history.get("name")) %>\n                                </option>\n                            <% }); %>\n                        </select>\n                        <label>or create new:</label>\n                        <input class="form-control" type="text" name="history_name" value="" placeholder="name of the new history" />\n                    </div>\n                </div>\n            </div>')}})},lr=n(80),cr=(n(1763),{AddDatasets:f.a.View.extend({options:null,initialize:function(e){this.options=e,this.options.chain_call_control={total_number:0,failed_number:0},this.list_extensions=e.list_extensions,this.list_genomes=e.list_genomes,this.showImportModal(e)},showImportModal:function(e){switch(e.source){case"history":this.addFilesFromHistoryModal();break;case"importdir":this.importFilesFromGalaxyFolderModal({source:"importdir"});break;case"path":this.importFilesFromPathModal();break;case"userdir":this.importFilesFromGalaxyFolderModal({source:"userdir"});break;default:$e.a.error("Invalid import source.")}},templateBrowserModal:function(){return r.default.template('<div id="file_browser_modal">\n                    <div style="margin-bottom:1em;">\n                        <label title="Switch to selecting files" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-folders" checked="checked">\n                            Choose Files\n                        </label>\n                        <label title="Switch to selecting folders" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-files">\n                            Choose Folders\n                        </label>\n                    </div>\n                    <div class="alert alert-info jstree-files-message">\n                        All files you select will be imported into the current folder ignoring their folder structure.\n                    </div>\n                    <div class="alert alert-info jstree-folders-message" style="display:none;">\n                        All files within the selected folders and their subfolders will be imported into the current folder.\n                    </div>\n                    <div style="margin-bottom:1em;">\n                        <label class="checkbox-inline jstree-preserve-structure" style="display:none;">\n                            <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                                Preserve directory structure\n                            </label>\n                        <label class="checkbox-inline">\n                            <input class="link-checkbox" type="checkbox" value="link_files">\n                                Link files instead of copying\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                                Convert line endings to POSIX\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                                Convert spaces to tabs\n                        </label>\n                    </div>\n                    <button title="Select all files" type="button" class="button primary-button libimport-select-all">\n                        Select all\n                    </button>\n                    <button title="Select no files" type="button" class="button primary-button libimport-select-none">\n                        Unselect all\n                    </button>\n                    <hr /> \x3c!-- append jstree object here --\x3e\n                    <div id="jstree_browser">\n                    </div>\n                    <hr />\n                    <p>You can set extension type and genome for all imported datasets at once:</p>\n                    <div>\n                        Type: <span id="library_extension_select" class="library-extension-select" />\n                        Genome: <span id="library_genome_select" class="library-genome-select" />\n                    </div>\n                    <br />\n                    <div>\n                        <label class="checkbox-inline tag-files">\n                            Tag datasets based on file names\n                            <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                        </label>\n                    </div>\n                </div>')},templateImportPathModal:function(){return r.default.template('<div id="file_browser_modal">\n                <div class="alert alert-info jstree-folders-message">\n                    All files within the given folders and their subfolders will be imported into the current folder.\n                </div>\n                <div style="margin-bottom: 0.5em;">\n                    <label class="checkbox-inline">\n                        <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                        Preserve directory structure\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="link-checkbox" type="checkbox" value="link_files">\n                        Link files instead of copying\n                    </label>\n                    <br>\n                    <label class="checkbox-inline">\n                        <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                        Convert line endings to POSIX\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                        Convert spaces to tabs\n                    </label>\n                </div>\n                <textarea id="import_paths" class="form-control" rows="5"\n                    placeholder="Absolute paths (or paths relative to Galaxy root) separated by newline" autofocus>\n                </textarea>\n                <hr />\n                <p>You can set extension type and genome for all imported datasets at once:</p>\n                <div>\n                    Type: <span id="library_extension_select" class="library-extension-select"></span>\n                    Genome: <span id="library_genome_select" class="library-genome-select"></span>\n                </div>\n                <div>\n                    <label class="checkbox-inline tag-files">\n                        Tag datasets based on file names\n                        <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                    </label>\n                </div>\n            </div>')},renderSelectBoxes:function(){var e=Object(o.a)();this.select_genome=new lr.a.View({css:"library-genome-select",data:this.list_genomes,container:e.modal.$el.find("#library_genome_select"),value:"?"}),this.select_extension=new lr.a.View({css:"library-extension-select",data:this.list_extensions,container:e.modal.$el.find("#library_extension_select"),value:"auto"})},addFilesFromHistoryModal:function(){var e=this,t=Object(o.a)();this.histories=new za.a.GalaxyHistories,this.histories.fetch().done((function(){e.modal=t.modal;var n=e.templateAddFilesFromHistory();e.modal.show({closing_events:!0,title:_()("Adding datasets from your history"),body:n({histories:e.histories.models}),buttons:{Add:function(){e.addAllDatasetsFromHistory()},Close:function(){t.modal.hide()}},closing_callback:function(){}}),e.fetchAndDisplayHistoryContents(e.histories.models[0].id),u()("#dataset_add_bulk").change((function(t){e.fetchAndDisplayHistoryContents(t.target.value)}))})).fail((function(e,t){void 0!==t.responseJSON?$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}))},importFilesFromGalaxyFolderModal:function(e){var t=this,n=this.templateBrowserModal(),i=Object(o.a)();this.modal=i.modal,this.modal.show({closing_events:!0,title:_()("Please select folders or files"),body:n({}),buttons:{Import:function(){t.importFromJstreePath(t,e)},Close:function(){i.modal.hide()}},closing_callback:function(){t.options.updateContent()}}),u()(".libimport-select-all").bind("click",(function(){u()("#jstree_browser").jstree("check_all")})),u()(".libimport-select-none").bind("click",(function(){u()("#jstree_browser").jstree("uncheck_all")})),this.renderSelectBoxes(),e.disabled_jstree_element="folders",this.renderJstree(e),u()("input[type=radio]").change((function(n){"jstree-disable-folders"===n.target.value?(e.disabled_jstree_element="folders",t.renderJstree(e),u()(".jstree-folders-message").hide(),u()(".jstree-preserve-structure").hide(),u()(".jstree-files-message").show()):"jstree-disable-files"===n.target.value&&(u()(".jstree-files-message").hide(),u()(".jstree-folders-message").show(),u()(".jstree-preserve-structure").show(),e.disabled_jstree_element="files",t.renderJstree(e))}))},importFromJstreePath:function(e,t){var n=u()("#jstree_browser").jstree().get_selected(!0),i=r.default.filter(n,(function(e){return 0==e.state.disabled})),a=this.modal.$el.find(".preserve-checkbox").is(":checked"),o=this.modal.$el.find(".link-checkbox").is(":checked"),s=this.modal.$el.find(".spacetab-checkbox").is(":checked"),l=this.modal.$el.find(".posix-checkbox").is(":checked"),c=this.select_extension.value(),d=this.select_genome.value(),h=this.modal.$el.find(".tag-files").is(":checked"),f=i[0].type,p=[];if(i.length<1)$e.a.info("Please select some items first.");else{this.modal.disableButton("Import");for(var m=i.length-1;m>=0;m--)void 0!==i[m].li_attr.full_path&&p.push('"'.concat(i[m].li_attr.full_path,'"'));if(this.initChainCallControlAddingDatasets({length:p.length}),"folder"===f){var _="".concat(t.source,"_folder");this.chainCallImportingFolders({paths:p,preserve_dirs:a,link_data:o,space_to_tab:s,to_posix_lines:l,source:_,file_type:c,dbkey:d,tag_using_filenames:h})}else if("file"===f){var g="".concat(t.source,"_file");this.chainCallImportingUserdirFiles({paths:p,file_type:c,dbkey:d,link_data:o,space_to_tab:s,to_posix_lines:l,source:g,tag_using_filenames:h})}}},chainCallImportingUserdirFiles:function(e){var t=this,n=Object(o.a)(),i=e.paths.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?($e.a.success("Selected files imported into the current folder"),n.modal.hide()):$e.a.error("An error occurred."),!0;var a="".concat(Object(p.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:e.source,path:i,file_type:e.file_type,link_data:e.link_data,space_to_tab:e.space_to_tab,to_posix_lines:e.to_posix_lines,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};u.a.when(u.a.post(a,r)).done((function(n){Ka(),t.chainCallImportingUserdirFiles(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,Ka(),t.chainCallImportingUserdirFiles(e)}))},renderJstree:function(e){this.options=r.default.extend(this.options,e);var t=e.source||"userdir",n=this.options.disabled_jstree_element;this.jstree=new za.a.Jstree,this.jstree.url="".concat(this.jstree.urlRoot,"?target=").concat(t,"&format=jstree&disable=").concat(n),this.jstree.fetch({success:function(e,t){u()("#jstree_browser").jstree("destroy"),u()("#jstree_browser").jstree({core:{data:e},plugins:["types","checkbox"],types:{folder:{icon:"jstree-folder"},file:{icon:"jstree-file"}},checkbox:{three_state:!1}})},error:function(e,t){void 0!==t.responseJSON?404001===t.responseJSON.err_code?($e.a.warning(t.responseJSON.err_msg),Object(o.a)().modal.hide()):$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}})},importFilesFromPathModal:function(){var e=this,t=Object(o.a)();this.modal=t.modal;var n=this.templateImportPathModal();this.modal.show({closing_events:!0,title:_()("Please enter paths to import"),body:n({}),buttons:{Import:function(){e.importFromPathsClicked(e)},Close:function(){t.modal.hide()}},closing_callback:function(){e.options.updateContent()}}),this.renderSelectBoxes()},importFromPathsClicked:function(){var e=this.modal.$el.find(".preserve-checkbox").is(":checked"),t=this.modal.$el.find(".link-checkbox").is(":checked"),n=this.modal.$el.find(".spacetab-checkbox").is(":checked"),i=this.modal.$el.find(".posix-checkbox").is(":checked"),a=this.modal.$el.find(".tag-files").is(":checked"),r=this.select_extension.value(),o=this.select_genome.value(),s=u()("textarea#import_paths").val(),l=[];if(s){this.modal.disableButton("Import");for(var c=(s=s.split("\n")).length-1;c>=0;c--){var d=s[c].trim();0!==d.length&&l.push(d)}this.initChainCallControlAddingDatasets({length:l.length}),this.chainCallImportingFolders({paths:l,preserve_dirs:e,link_data:t,space_to_tab:n,to_posix_lines:i,source:"admin_path",file_type:r,tag_using_filenames:a,dbkey:o})}else $e.a.info("Please enter a path relative to Galaxy root.")},chainCallImportingFolders:function(e){var t=this,n=Object(o.a)(),i=e.paths.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?($e.a.success("Selected folders and their contents imported into the current folder."),n.modal.hide()):$e.a.error("An error occurred."),!0;var a="".concat(Object(p.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:e.source,path:i,preserve_dirs:e.preserve_dirs,link_data:e.link_data,to_posix_lines:e.to_posix_lines,space_to_tab:e.space_to_tab,file_type:e.file_type,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};u.a.when(u.a.post(a,r)).done((function(n){Ka(),t.chainCallImportingFolders(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,Ka(),t.chainCallImportingFolders(e)}))},fetchAndDisplayHistoryContents:function(e){var t=this;new za.a.HistoryContents({id:e}).fetch({success:function(n){var i=t.templateHistoryContents();n.length>0?(t.histories.get(e).set({contents:n}),t.modal.$el.find(".library_selected_history_content").html(i({history_contents:n.models.reverse()})),t.modal.$el.find(".history-import-select-all").bind("click",(function(){u()(".library_selected_history_content [type=checkbox]").prop("checked",!0)})),t.modal.$el.find(".history-import-unselect-all").bind("click",(function(){u()(".library_selected_history_content [type=checkbox]").prop("checked",!1)})),t.modal.$el.find(".history-import-toggle-all").bind("click",(function(e){t.selectAll(e)})),t.modal.$el.find(".dataset_row").bind("click",(function(e){t.selectClickedRow(e)}))):t.modal.$el.find(".library_selected_history_content").html("<p>Selected history is empty.</p>")},error:function(e,t){void 0!==t.responseJSON?$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}})},templateAddingDatasetsProgressBar:function(){return r.default.template('<div class="import_text">\n                Adding selected datasets to library folder <b><%= _.escape(folder_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateAddFilesFromHistory:function(){return r.default.template('<div id="add_files_modal">\n                <div class="form-group">\n                    <label>1. Select history:</label>\n                    <select id="dataset_add_bulk" name="dataset_add_bulk" class="form-control">\n                        <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library_selected_history_content">\n                </div>\n            </div>')},templateHistoryContents:function(){return r.default.template('<div class="form-group">\n                <label>2. Choose the datasets to import:</label>\n                <div class="library_style_container" style="width: 100%;" id="dataset_list">\n                    <table class="grid table table-hover table-sm">\n                        <thead>\n                            <tr>\n                                <th style="width: 30px;" class="mid" title="Check to select all datasets">\n                                    <input class="history-import-toggle-all" style="margin: 0;" type="checkbox" />\n                                </th>\n                                <th style="width: 30px;"></th>\n                                <th>Name</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% _.each(history_contents, function(history_item) { %>\n                                <% if (history_item.get("deleted") != true ) { %>\n                                    <% var item_name = history_item.get("name") %>\n                                    <% if (history_item.get("type") === "collection") { %>\n                                        <% var collection_type = history_item.get("collection_type") %>\n                                        <% if (collection_type === "list") { %>\n                                            <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                                data-name="<%= _.escape(history_item.get("type")) %>">\n                                                <td><input style="margin: 0;" type="checkbox"></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection)\n                                                </td>\n                                            </tr>\n                                        <% } else { %>\n                                            <tr class="dataset_row" title="You can convert this collection into a collection of type list using the Collection Tools">\n                                                <td><input style="margin: 0;" type="checkbox" onclick="return false;" disabled="disabled" /></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection of type <%= _.escape(collection_type) %> not supported.)\n                                                </td>\n                                            </tr>\n                                        <% } %>\n                                    <% } else if (history_item.get("visible") === true && history_item.get("state") === "ok") { %>\n                                        <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                            data-name="<%= _.escape(history_item.get("type")) %>">\n                                            <td><input style="margin: 0;" type="checkbox"></td>\n                                            <td><%= _.escape(history_item.get("hid")) %></td>\n                                            <td>\n                                                <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                            </td>\n                                        </tr>\n                                    <% } %>\n                                <% } %>\n                            <% }); %>\n                        </tbody>\n                    </table>\n                </div>\n            </div>')},selectClickedRow:function(e){var t,n,i="";t=u()(e.target).closest("tr"),"input"===e.target.localName?(i=e.target,n="input"):"td"===e.target.localName&&(i=t.find(":checkbox")[0],n="td"),i.checked?"td"===n?(i.checked="",this.makeWhiteRow(t)):"input"===n&&this.makeDarkRow(t):"td"===n?(i.checked="selected",this.makeDarkRow(t)):"input"===n&&this.makeWhiteRow(t)},selectAll:function(e){var t=e.target.checked,n=this;u()(":checkbox","#dataset_list tbody").each((function(){this.checked=t;var e=u()(this).closest("tr");t?n.makeDarkRow(e):n.makeWhiteRow(e)}))},makeDarkRow:function(e){e.addClass("table-primary")},makeWhiteRow:function(e){e.removeClass("table-primary")},addAllDatasetsFromHistory:function(){var e=this.modal.$el.find(".library_selected_history_content").find(":checked"),t=[],n=[],i=[];if(e.length<1)$e.a.info("You must select some datasets first.");else{this.modal.disableButton("Add"),e.each((function(){var e=u()(this).closest("tr").data("id");if(e){var i=u()(this).closest("tr").data("name");t.push(e),n.push(i)}}));for(var a=t.length-1;a>=0;a--){var r=t[a],o=new za.a.Item;o.url="".concat(Object(p.getAppRoot)(),"api/folders/").concat(this.options.id,"/contents"),"collection"===n[a]?o.set({from_hdca_id:r}):o.set({from_hda_id:r}),i.push(o)}this.initChainCallControlAddingDatasets({length:i.length}),this.chainCallAddingHdas(i)}},initChainCallControlAddingDatasets:function(e){var t;t=this.templateAddingDatasetsProgressBar(),this.modal.$el.find(".modal-body").html(t({folder_name:this.options.folder_name})),this.progress=0,this.progressStep=100/e.length,this.options.chain_call_control.total_number=e.length,this.options.chain_call_control.failed_number=0},chainCallAddingHdas:function(e){var t=this,n=Object(o.a)();this.added_hdas=new za.a.Folder;var i=e.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?$e.a.success("Selected datasets from history added to the folder"):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?$e.a.error("There was an error and no datasets were added to the folder."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&$e.a.warning("Some of the datasets could not be added to the folder"),this.options.updateContent(),n.modal.hide(),this.added_hdas;u.a.when(i.save({from_hda_id:i.get("from_hda_id")})).done((function(n){Ka(),t.chainCallAddingHdas(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,Ka(),t.chainCallAddingHdas(e)}))}})});function dr(e,t,n){!function(e,t,n){if(e&&t){t="string"==typeof t?t:u.a.param(t);var i="";u.a.each(t.split("&"),(function(){var e=this.split("=");i+='<input type="hidden" name="'.concat(e[0],'" value="').concat(e[1],'" />')})),u()('<form action="'.concat(e,'" method="').concat(n||"post",'">').concat(i,"</form>")).appendTo("body").submit().remove(),$e.a.info("Your download will begin soon.")}}("".concat(Object(a.b)(),"api/libraries/datasets/download/").concat(e),{ld_ids:t,folder_ids:n},"get")}var ur={name:"SearchField",props:{typingDelay:{type:Number,default:1e3,required:!1}},data:function(){return{search:"",awaitingSearch:!1}},methods:{startSearch:function(){this.$emit("updateSearch",this.search),this.awaitingSearch=!1}},watch:{search:function(){var e=this;this.awaitingSearch||setTimeout((function(){e.startSearch()}),this.typingDelay),this.awaitingSearch=!0}}},hr=Object(T.a)(ur,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{staticClass:"mr-1",attrs:{type:"search",id:"filterInput",placeholder:"Search"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startSearch()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)}),[],!1,null,"356b90b4",null).exports;function fr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function pr(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){fr(r,i,a,o,s,"next",e)}function s(e){fr(r,i,a,o,s,"throw",e)}o(void 0)}))}}La.forEach((function(e){F.c.add(e)})),k.default.use(N.a);var mr,_r={name:"FolderTopBar",props:{folder_id:{type:String,required:!0},include_deleted:{type:Boolean,required:!0},isAllSelectedMode:{type:Boolean,required:!0},selected:{type:Array,required:!0},unselected:{type:Array,required:!0},metadata:{type:Object,required:!0},folderContents:{type:Array,required:!0}},components:{SearchField:hr,FontAwesomeIcon:$.a},data:function(){return{is_admin:!1,user_library_import_dir_available:!1,library_import_dir:!1,allow_library_path_paste:!1,list_genomes:[],list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically.\n                     If your file is not detected properly as one of the known formats,\n                     it most likely means that it has some format problems (e.g., different\n                     number of columns on different rows). You can still coerce the system\n                     to set your data to the format you think it should be.\n                     You can also upload compressed files, which will automatically be decompressed"}}},created:function(){var e=Object(o.a)();this.services=new Na,this.is_admin=e.user.attributes.is_admin,this.user_library_import_dir_available=e.config.user_library_import_dir_available,this.library_import_dir=e.config.library_import_dir,this.allow_library_path_paste=e.config.allow_library_path_paste,this.fetchExtAndGenomes()},computed:{contains_file_or_folder:function(){return this.folderContents.find((function(e){return"folder"===e.type||"file"===e.type}))},logged_dataset_manipulation:function(){var e=Object(o.a)();return!(!this.contains_file_or_folder||!e.user||e.user.isAnonymous())},dataset_manipulation:function(){var e=Object(o.a)();return!(!this.contains_file_or_folder||!e.user)}},methods:{updateSearch:function(e){this.$emit("updateSearch",e)},deleteSelected:function(){var e=this;this.getSelected().then((function(t){return Ja(t,(function(t){return e.$emit("deleteFromTable",t)}),(function(){return e.$emit("refreshTable")}),(function(){return e.$emit("refreshTableContent")}))}))},getSelected:function(){var e=this;return pr(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isAllSelectedMode){t.next=9;break}return e.$emit("setBusy",!0),t.next=4,e.services.getFilteredFolderContents(e.folder_id,e.unselected,e.$parent.search_text);case 4:return n=t.sent,e.$emit("setBusy",!1),t.abrupt("return",n);case 9:return t.abrupt("return",e.selected);case 10:case"end":return t.stop()}}),t)})))()},newFolder:function(){this.$emit("newFolder")},downloadData:function(e){var t=this;this.findCheckedItems().then((function(n){var i=n.datasets,a=n.folders;0!==t.selected.length?dr(e,i,a):$e.a.info("You must select at least one dataset to download")}))},addDatasets:function(e){new cr.AddDatasets({source:e,id:this.folder_id,updateContent:this.updateContent,list_genomes:this.list_genomes,list_extensions:this.list_extensions})},findCheckedItems:(mr=pr(regeneratorRuntime.mark((function e(){var t,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],n=[],i=[],e.next=5,this.getSelected();case 5:return e.sent.forEach((function(e){var a=t?e.id:e;"file"===e.type?n.push(a):i.push(a)})),e.abrupt("return",{datasets:n,folders:i});case 8:case"end":return e.stop()}}),e,this)}))),function(){return mr.apply(this,arguments)}),importToHistoryModal:function(e){var t=this;this.findCheckedItems(!e).then((function(n){var i=n.datasets,a=n.folders,r=t.selected;r.dataset_ids=i,r.folder_ids=a,e?new sr.ImportCollectionModal({selected:r}):new Xa.ImportDatasetModal({selected:r})}))},isCurrentFolder:function(e){return this.folder_id===e},fetchExtAndGenomes:function(){var e=this;g.a.get({url:"".concat(Object(p.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(t){for(var n in e.list_extensions=[],t)e.list_extensions.push({id:t[n].extension,text:t[n].extension,description:t[n].description,description_url:t[n].description_url});e.list_extensions.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.list_extensions.unshift(e.auto)},cache:!0}),g.a.get({url:"".concat(Object(p.getAppRoot)(),"api/genomes"),success:function(t){for(var n in e.list_genomes=[],t)e.list_genomes.push({id:t[n][1],text:t[n][0]});e.list_genomes.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0}))},cache:!0})},showDetails:function(){var e,t,n,i;e=Object.assign({id:this.folder_id},this.metadata),t=e.parent_library_id,n=Object(o.a)(),i=null,n.libraries&&null!==n.libraries.libraryListView?Ua(i=n.libraries.libraryListView.collection.get(e.folder_id)):(i=new za.a.Library({id:t})).fetch({success:function(){Ua(i,e)},error:function(e,t){void 0!==t.responseJSON?$e.a.error(t.responseJSON.err_msg):$e.a.error("An error occurred.")}})},toggle_include_deleted:function(e){this.$emit("fetchFolderContents",e)},updateContent:function(){this.$emit("fetchFolderContents")}}},gr=(n(1764),Object(T.a)(_r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-inline d-flex align-items-center mb-2"},[n("b-button",{staticClass:"mr-1 btn btn-secondary",attrs:{to:{path:"/"},"data-toggle":"tooltip",title:"Go to libraries list"}},[n("font-awesome-icon",{attrs:{icon:"home"}})],1),e._v(" "),n("div",[n("div",{staticClass:"form-inline"},[n("SearchField",{on:{updateSearch:function(t){return e.updateSearch(t)}}}),e._v(" "),e.metadata.can_add_library_item?n("button",{staticClass:"btn btn-secondary toolbtn-create-folder add-library-items add-library-items-folder mr-1",attrs:{title:"Create new folder",type:"button"},on:{click:e.newFolder}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n                    Folder\n                ")],1):e._e(),e._v(" "),e.metadata.can_add_library_item?n("div",[n("div",{staticClass:"dropdown add-library-items add-library-items-datasets mr-1",attrs:{title:"Add datasets to current folder"}},[e._m(0),e._v(" "),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("history")}}},[e._v("\n                                from History")]),e._v(" "),e.user_library_import_dir_available?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("userdir")}}},[e._v("\n                                from User Directory\n                            ")]):e._e(),e._v(" "),e.library_import_dir||e.allow_library_path_paste?n("div",[n("h5",{staticClass:"dropdown-header cursor-pointer"},[e._v("Admins only")]),e._v(" "),e.library_import_dir?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("importdir")}}},[e._v("\n                                    from Import Directory\n                                ")]):e._e(),e._v(" "),e.allow_library_path_paste?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(t){return e.addDatasets("path")}}},[e._v("\n                                    from Path\n                                ")]):e._e()]):e._e()])])]):e._e(),e._v(" "),n("div",{staticClass:"dropdown mr-1"},[n("button",{staticClass:"primary-button dropdown-toggle add-to-history",attrs:{type:"button","data-toggle":"dropdown"}},[n("font-awesome-icon",{attrs:{icon:"book"}}),e._v("\n                        Export to History "),n("span",{staticClass:"caret"})],1),e._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[n("a",{staticClass:"toolbtn-bulk-import add-to-history-datasets dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.importToHistoryModal(!1)}}},[e._v("\n                            as Datasets\n                        ")]),e._v(" "),n("a",{staticClass:"toolbtn-collection-import add-to-history-collection dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return e.importToHistoryModal(!0)}}},[e._v("\n                            as a Collection\n                        ")])])]),e._v(" "),e.dataset_manipulation?n("div",{staticClass:"dropdown dataset-manipulation mr-1",attrs:{title:"Download items as archive"}},[n("button",{staticClass:"primary-button",attrs:{type:"button",id:"download--btn"},on:{click:function(t){return e.downloadData("zip")}}},[n("font-awesome-icon",{attrs:{icon:"download"}}),e._v("\n                        Download\n                    ")],1)]):e._e(),e._v(" "),e.logged_dataset_manipulation?n("button",{staticClass:"primary-button toolbtn-bulk-delete logged-dataset-manipulation mr-1",attrs:{"data-toggle":"tooltip",title:"Mark items deleted",type:"button"},on:{click:e.deleteSelected}},[n("font-awesome-icon",{attrs:{icon:"trash"}}),e._v("\n                    Delete\n                ")],1):e._e(),e._v(" "),n("span",{staticClass:"mr-1",attrs:{"data-toggle":"tooltip",title:"Show location details"}},[n("button",{staticClass:"primary-button toolbtn-show-locinfo",attrs:{type:"button"},on:{click:e.showDetails}},[n("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v("\n                        Details\n                    ")],1)]),e._v(" "),e.logged_dataset_manipulation?n("div",{staticClass:"form-check logged-dataset-manipulation mr-1"},[n("b-form-checkbox",{attrs:{id:"checkbox-1",checked:e.include_deleted,name:"checkbox-1"},on:{input:function(t){return e.toggle_include_deleted(t)}}},[e._v("\n                        include deleted\n                    ")])],1):e._e()],1)])],1),e._v(" "),n("b-breadcrumb",[n("b-breadcrumb-item",{attrs:{title:"Return to the list of libraries",to:{path:"/"}}},[e._v("\n            Libraries\n        ")]),e._v(" "),e._l(this.metadata.full_path,(function(t){return[n("b-breadcrumb-item",{key:t[0],attrs:{title:e.isCurrentFolder(t[0])?"You are in this folder":"Return to this folder",active:e.isCurrentFolder(t[0]),to:{name:"LibraryFolder",params:{folder_id:""+t[0]}},href:"#"}},[e._v(e._s(t[1]))])]}))],2)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[t("span",{staticClass:"fa fa-plus"}),this._v(" Datasets "),t("span",{staticClass:"caret"})])}],!1,null,"1ad141ff",null).exports);function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Oa.forEach((function(e){F.c.add(e)})),k.default.use(N.a);var wr={props:{folder_id:{type:String,required:!0}},components:{FolderTopBar:gr,UtcDate:fe.a,FontAwesomeIcon:$.a},data:function(){return yr(yr({},{selected:[],unselected:[],expandedMessage:[],folderContents:[],include_deleted:!1,search_text:"",isAllSelectedMode:!1,currentPage:1}),{current_folder_id:null,error:null,isBusy:!1,folder_metadata:{},fields:Wa,selectMode:"multi",perPage:10,maxDescriptionLength:40,total_rows:0,root:Object(p.getAppRoot)()})},created:function(){this.services=new Na({root:this.root}),this.initFolder(this.folder_id)},methods:{initFolder:function(e){this.current_folder_id=e,this.resetData(),this.fetchFolderContents(this.include_deleted)},resetData:function(){var e=this,t={selected:[],unselected:[],expandedMessage:[],folderContents:[],include_deleted:!1,search_text:"",isAllSelectedMode:!1,currentPage:1};Object.keys(t).forEach((function(n){return e[n]=t[n]}))},fetchFolderContents:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.include_deleted=t,this.setBusy(!0),this.services.getFolderContents(this.current_folder_id,t,this.perPage,(this.currentPage-1)*this.perPage,this.search_text).then((function(t){e.folderContents=t.folder_contents,e.folder_metadata=t.metadata,e.total_rows=t.metadata.total_rows,e.isAllSelectedMode?(e.selected=[],k.default.nextTick((function(){e.selectAllRenderedRows()}))):e.selected.length>0&&k.default.nextTick((function(){e.selected.forEach((function(t){return e.select_unselect_row_by_id(t.id)}))})),e.setBusy(!1)})).catch((function(t){e.error=t}))},updateSearchValue:function(e){this.search_text=e,this.folderContents=[],this.fetchFolderContents(this.include_deleted)},selectAllRenderedRows:function(){var e=this;this.$refs.folder_content_table.items.forEach((function(t,n){t.isNewFolder||t.deleted||e.unselected.some((function(e){return e.id===t.id}))||(e.select_unselect_row(n),e.selected.some((function(e){return e.id===t.id}))||e.selected.push(t))}))},clearRenderedSelectedRows:function(){this.$refs.folder_content_table.clearSelected(),this.selected=[]},refreshTable:function(){this.$refs.folder_content_table.refresh()},refreshTableContent:function(){this.fetchFolderContents(this.include_deleted)},deleteFromTable:function(e){this.folderContents=this.folderContents.filter((function(t){if(t.id!==e.id)return t}))},isAllSelectedOnPage:function(){if(!this.$refs.folder_content_table)return!1;var e=0;return this.$refs.folder_content_table.computedItems.forEach((function(t){(t.isNewFolder||t.deleted)&&e++})),this.selected.length+e===this.$refs.folder_content_table.computedItems.length},toggleSelect:function(){this.unselected=[],this.isAllSelectedOnPage()?(this.isAllSelectedMode=!1,this.clearRenderedSelectedRows()):(this.isAllSelectedMode=!0,this.selectAllRenderedRows())},newFolder:function(){this.folderContents.unshift({editMode:!0,isNewFolder:!0,type:"folder",name:"",description:""}),this.refreshTable()},onRowClick:function(e,t,n){var i=this.selected.findIndex((function(t){return t.id===e.id}));i>-1?(this.selected.splice(i,1),this.select_unselect_row(t,!0),this.isAllSelectedMode&&(this.unselected.push(e),this.total_rows===this.unselected.length&&(this.isAllSelectedMode=!1,this.unselected=[]))):e.isNewFolder||e.deleted||(this.select_unselect_row(t),this.selected.push(e))},select_unselect_row_by_id:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$refs.folder_content_table.items.findIndex((function(t){return t.id===e}));this.select_unselect_row(n,t)},select_unselect_row:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.$refs.folder_content_table.unselectRow(e):this.$refs.folder_content_table.selectRow(e)},bytesToString:function(e){return g.a.bytesToString(e)},navigateToPermission:function(e){"file"===e.type?this.$router.push({path:"".concat(this.folder_id,"/dataset/").concat(e.id,"/permissions")}):"folder"===e.type&&this.$router.push({path:"".concat(e.id,"/permissions")})},getMessage:function(e){return"file"===e.type?e.message:"folder"===e.type?e.description:void 0},expandMessage:function(e){this.expandedMessage.push(e.id)},setBusy:function(e){this.isBusy=e},linkify:function(e){return Fa()(e)},toggleEditMode:function(e){e.editMode=!e.editMode,this.folderContents=this.folderContents.filter((function(e){if(!e.isNewFolder)return e})),this.refreshTable()},createNewFolder:function(e){var t=this;e.name?e.name.length<3?$e.a.warning("Folder name has to be at least 3 characters long."):this.services.newFolder({parent_id:this.current_folder_id,name:e.name,description:e.description},(function(n){e.id=n.id,e.update_time=n.update_time,e.editMode=!1,e.can_manage=!0,e.isNewFolder=!1,t.refreshTable(),$e.a.success("Folder created.")}),(function(){$e.a.error("An error occurred.")})):$e.a.error("Folder's name is missing.")},undelete:function(e){var t=this,n=function(t){var n="".concat("folder"===e.type?"Folder":"Dataset");void 0!==t.responseJSON?$e.a.error("".concat(n," was not undeleted. ").concat(t.responseJSON.err_msg)):$e.a.error("An error occurred! ".concat(n," was not undeleted. Please try again."))};"folder"===e.type?this.services.undeleteFolder(e,(function(n){e.deleted=n.deleted,t.refreshTable(),$e.a.success("Folder undeleted.")}),n):this.services.undeleteDataset(e,(function(n){e.deleted=n.deleted,t.refreshTable(),$e.a.success("Dataset undeleted. Click this to see it.","",{onclick:function(){window.location="".concat(Object(p.getAppRoot)(),"library/list#folders/").concat(this.current_folder_id,"/datasets/").concat(e.id)}})}),n)},saveChanges:function(e){var t=this,n=!1,i=this.$refs["name".concat(e.id)].value;if(i&&i!==e.name){if(!(i.length>2))return void $e.a.warning("Folder name has to be at least 3 characters long.");e.name=i,n=!0}var a=this.$refs["description".concat(e.id)].value;void 0!==a&&a!==e.description&&(e.description=a,n=!0),n?this.services.updateFolder(e,(function(){$e.a.success("Changes to folder saved."),e.editMode=!1,t.refreshTable()}),(function(e){e.data&&e.data.err_msg?$e.a.error(e.data.err_msg):$e.a.error("An error occurred while attempting to update the folder.")})):$e.a.info("Nothing has changed.")}},watch:{currentPage:{handler:function(e){this.fetchFolderContents(this.include_deleted)}},perPage:{handler:function(e){this.fetchFolderContents(this.include_deleted)}}},beforeRouteUpdate:function(e,t,n){this.initFolder(e.params.folder_id),n()}},kr=(n(1765),Object(T.a)(wr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("FolderTopBar",{attrs:{"folder-contents":e.folderContents,include_deleted:e.include_deleted,folder_id:e.current_folder_id,selected:e.selected,metadata:e.folder_metadata,unselected:e.unselected,"is-all-selected-mode":e.isAllSelectedMode},on:{updateSearch:function(t){return e.updateSearchValue(t)},refreshTable:e.refreshTable,refreshTableContent:e.refreshTableContent,fetchFolderContents:function(t){return e.fetchFolderContents(t)},deleteFromTable:e.deleteFromTable,setBusy:function(t){return e.setBusy(t)},newFolder:e.newFolder}}),e._v(" "),n("b-table",{ref:"folder_content_table",attrs:{id:"folder_list_body",striped:"",hover:"",busy:e.isBusy,fields:e.fields,items:e.folderContents,"per-page":e.perPage,selectable:"","no-select-on-click":"","show-empty":""},on:{"update:busy":function(t){e.isBusy=t},"row-clicked":e.onRowClick},scopedSlots:e._u([{key:"empty",fn:function(){return[e.isBusy?n("div",{staticClass:"text-center my-2"},[n("b-spinner",{staticClass:"align-middle"}),e._v(" "),n("strong",[e._v("Loading...")])],1):n("div",{staticClass:"empty-folder-message"},[e._v("\n                    This folder is either empty or you do not have proper access permissions to see the contents. If\n                    you expected something to show up please consult the\n                    "),n("a",{attrs:{href:"https://galaxyproject.org/data-libraries/#permissions",target:"_blank"}},[e._v("\n                        library security wikipage\n                    ")])])]},proxy:!0},{key:"head(selected)",fn:function(){return[e.isAllSelectedMode&&!e.isAllSelectedOnPage()?n("font-awesome-icon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:"minus-square"},on:{click:e.toggleSelect}}):n("font-awesome-icon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:e.isAllSelectedOnPage()?["far","check-square"]:["far","square"]},on:{click:e.toggleSelect}})]},proxy:!0},{key:"cell(selected)",fn:function(t){return[t.item.isNewFolder||t.item.deleted?e._e():n("font-awesome-icon",{staticClass:"select-checkbox lib-folder-checkbox",attrs:{size:"lg",icon:t.rowSelected?["far","check-square"]:["far","square"]}})]}},{key:"cell(name)",fn:function(t){return[t.item.editMode?n("div",[t.item.isNewFolder?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"row.item.name"}],ref:"name"+t.item.id,staticClass:"form-control",attrs:{name:"input_folder_name",rows:"3"},domProps:{value:t.item.name},on:{input:function(n){n.target.composing||e.$set(t.item,"name",n.target.value)}}}):n("textarea",{ref:"name"+t.item.id,staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.item.name}})]):t.item.deleted?n("div",[n("div",{staticClass:"deleted-item"},[e._v(e._s(t.item.name))])]):n("div",["folder"===t.item.type?n("b-link",{attrs:{to:{name:"LibraryFolder",params:{folder_id:""+t.item.id}}}},[e._v(e._s(t.item.name))]):n("a",{attrs:{href:e.root+"library/list#folders/"+e.current_folder_id+"/datasets/"+t.item.id}},[e._v(e._s(t.item.name))])],1)]}},{key:"cell(message)",fn:function(t){return[t.item.editMode?n("div",[t.item.isNewFolder?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.description,expression:"row.item.description"}],ref:"description"+t.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:t.item.description},on:{input:function(n){n.target.composing||e.$set(t.item,"description",n.target.value)}}}):n("textarea",{ref:"description"+t.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:t.item.description}})]):n("div",[e.getMessage(t.item)?n("div",{staticClass:"description-field"},[e.getMessage(t.item).length>e.maxDescriptionLength&&!e.expandedMessage.includes(t.item.id)?n("div",[n("span",{staticClass:"shrinked-description",attrs:{title:e.getMessage(t.item)},domProps:{innerHTML:e._s(e.linkify(e.getMessage(t.item).substring(0,e.maxDescriptionLength)))}}),e._v(" "),n("span",{attrs:{title:e.getMessage(t.item)}},[e._v(" ...")]),e._v(" "),n("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:function(n){return e.expandMessage(t.item)}}},[e._v("(more)")])]):n("div",{domProps:{innerHTML:e._s(e.linkify(e.getMessage(t.item)))}})]):e._e()])]}},{key:"cell(type_icon)",fn:function(t){return["folder"===t.item.type?n("font-awesome-icon",{attrs:{icon:["far","folder"],title:"Folder"}}):"file"===t.item.type?n("font-awesome-icon",{attrs:{title:"Dataset",icon:["far","file"]}}):e._e()]}},{key:"cell(type)",fn:function(t){return["folder"===t.item.type?n("div",[e._v(e._s(t.item.type))]):"file"===t.item.type?n("div",[e._v(e._s(t.item.file_ext))]):e._e()]}},{key:"cell(raw_size)",fn:function(t){return["file"===t.item.type?n("div",{domProps:{innerHTML:e._s(e.bytesToString(t.item.raw_size))}}):e._e()]}},{key:"cell(state)",fn:function(t){return["ok"!=t.item.state?n("div",[e._v("\n                    "+e._s(t.item.state)+"\n                ")]):e._e()]}},{key:"cell(update_time)",fn:function(t){return[t.item.update_time?n("UtcDate",{attrs:{date:t.item.update_time,"custom-format":"'YYYY-MM-DD- HH:mm a'",mode:"elapsed"}}):e._e()]}},{key:"cell(is_unrestricted)",fn:function(t){return[t.item.is_unrestricted?n("font-awesome-icon",{attrs:{title:"Unrestricted dataset",icon:"globe"}}):t.item.deleted?n("font-awesome-icon",{attrs:{title:"Marked deleted",icon:"ban"}}):t.item.is_private?n("font-awesome-icon",{attrs:{title:"Private dataset",icon:"key"}}):!1===t.item.is_private&&!1===t.item.is_unrestricted?n("font-awesome-icon",{attrs:{title:"Restricted dataset",icon:"shield-alt"}}):e._e()]}},{key:"cell(buttons)",fn:function(t){return[t.item.editMode?n("div",[n("button",{staticClass:"primary-button btn-sm permission_folder_btn save_folder_btn",attrs:{title:"save "+t.item.name},on:{click:function(n){t.item.isNewFolder?e.createNewFolder(t.item):e.saveChanges(t.item)}}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n                        Save\n                    ")],1),e._v(" "),n("button",{staticClass:"primary-button btn-sm permission_folder_btn",attrs:{title:"Discard Changes"},on:{click:function(n){return e.toggleEditMode(t.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}}),e._v("\n                        Cancel\n                    ")],1)]):n("div",[t.item.can_manage&&!t.item.deleted&&"folder"===t.item.type?n("b-button",{staticClass:"lib-btn permission_folder_btn edit_folder_btn",attrs:{"data-toggle":"tooltip","data-placement":"top",size:"sm",title:"Edit "+t.item.name},on:{click:function(n){return e.toggleEditMode(t.item)}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                        Edit\n                    ")],1):e._e(),e._v(" "),t.item.can_manage&&!t.item.deleted?n("b-button",{staticClass:"lib-btn permission_lib_btn",attrs:{size:"sm",title:"Permissions of "+t.item.name},on:{click:function(n){return e.navigateToPermission(t.item)}}},[n("font-awesome-icon",{attrs:{icon:"users"}}),e._v("\n                        Manage\n                    ")],1):e._e(),e._v(" "),t.item.deleted?n("button",{staticClass:"lib-btn primary-button btn-sm undelete_dataset_btn",attrs:{title:"Undelete "+t.item.name,type:"button"},on:{click:function(n){return e.undelete(t.item)}}},[n("font-awesome-icon",{attrs:{icon:"unlock"}}),e._v("\n                        Undelete\n                    ")],1):e._e()],1)]}}])}),e._v(" "),n("b-container",[n("b-row",{staticClass:"justify-content-md-center"},[n("b-col",{attrs:{md:"auto"}},[n("b-pagination",{attrs:{"total-rows":e.total_rows,"per-page":e.perPage,"aria-controls":"folder_list_body"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),n("b-col",{attrs:{cols:"1.5"}},[n("table",[n("tr",[n("td",{staticClass:"m-0 p-0"},[n("b-form-input",{staticClass:"pagination-input-field",attrs:{id:"paginationPerPage",autocomplete:"off",type:"number"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e._v(" "),n("td",{staticClass:"text-muted ml-1 paginator-text"},[n("span",{staticClass:"pagination-total-pages-text"},[e._v("per page, "+e._s(e.total_rows)+" total")])])])])])],1)],1)],1)])}),[],!1,null,"72f0612e",null).exports);k.default.use(ya.a),k.default.use(N.a),Aa();var xr={props:{folder_id:{type:String,required:!0},dataset_id:{type:String,required:!0}},components:{PermissionsInputField:wa,LibraryPermissionsWarning:xa,FontAwesomeIcon:$.a},data:function(){return{permissions:void 0,dataset:void 0,is_admin:void 0,access_dataset_roles:void 0,modify_item_roles:void 0,manage_dataset_roles:void 0,access_dataset_roles_type:"access_dataset_roles",modify_item_roles_type:"modify_item_roles",manage_dataset_roles_type:"manage_dataset_roles",apiRootUrl:"".concat(Object(p.getAppRoot)(),"api/libraries/datasets")}},created:function(){var e=this,t=Object(o.a)();this.root=Object(p.getAppRoot)(),this.services=new va({root:this.root}),this.is_admin=t.user.attributes.is_admin,this.services.getDatasetPermissions(this.dataset_id).then((function(t){return e.assignFetchedPermissions(t)})),this.services.getDataset(this.dataset_id).then((function(t){e.dataset=t}))},computed:{is_unrestricted:function(){return!!this.access_dataset_roles&&0===this.access_dataset_roles.length}},methods:{assignFetchedPermissions:function(e){this.access_dataset_roles=Ta(e.access_dataset_roles),this.modify_item_roles=Ta(e.modify_item_roles),this.manage_dataset_roles=Ta(e.manage_dataset_roles),console.log(this.access_dataset_roles)},toggleDatasetPrivacy:function(e){var t=this;this.services.toggleDatasetPrivacy(this.dataset_id,e,(function(n){$e.a.success("".concat(e?"The dataset is now private to you.":"Access to this dataset is now unrestricted.")),t.assignFetchedPermissions(n),t.$refs.access_field.assignValue(t.access_dataset_roles)}),(function(e){$e.a.error("An error occurred while attempting to set folder permissions."),console.error(e)}))},setUserPermissionsPreferences:function(e,t){this[t]=e},postPermissions:function(){var e=this;this.services.setPermissions(this.apiRootUrl,this.dataset_id,[{"access_ids[]":this.access_dataset_roles},{"modify_ids[]":this.modify_item_roles},{"manage_ids[]":this.manage_dataset_roles}],(function(t){$e.a.success("Permissions saved."),e.assignFetchedPermissions(t)}),(function(e){$e.a.error("An error occurred while attempting to set folder permissions."),console.error(e)}))}}},Sr=(n(1766),Object(T.a)(xr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-container",{attrs:{fluid:""}},[e.dataset?n("div",[n("b-breadcrumb",[n("b-breadcrumb-item",{attrs:{title:"Return to the list of libraries",to:{path:"/"}}},[e._v("\n                    Libraries\n                ")]),e._v(" "),e._l(this.dataset.full_path,(function(t){return[n("b-breadcrumb-item",{key:t[0],attrs:{to:{path:"/folders/"+t[0]},active:t[0]===e.dataset_id,href:"#"}},[e._v(e._s(t[1]))])]}))],2),e._v(" "),n("b-row",[n("b-col",[n("b-button",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Go to Dataset Details",variant:"secondary",type:"button",href:e.root+"library/list#folders/"+e.folder_id+"/datasets/"+e.dataset_id}},[n("font-awesome-icon",{attrs:{icon:["far","file"]}}),e._v("\n                        Dataset Details\n                    ")],1)],1),e._v(" "),n("b-col",[n("div",[n("div",{staticClass:"header text-center"},[e._v(e._s(e.dataset.name))])])]),e._v(" "),n("b-col")],1)],1):e._e(),e._v(" "),n("LibraryPermissionsWarning",{attrs:{is_admin:e.is_admin}}),e._v(" "),n("hr",{staticClass:"my-4"}),e._v(" "),n("h2",{staticClass:"text-center"},[e._v("Library-related permissions")]),e._v(" "),e.modify_item_roles?n("PermissionsInputField",{attrs:{id:e.dataset_id,permission_type:e.modify_item_roles_type,initial_value:e.modify_item_roles,title:"Roles that can modify the library item","api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can modify name, metadata, and other information about this library item."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),n("hr",{staticClass:"my-4"}),e._v(" "),n("h2",{staticClass:"text-center"},[e._v("Dataset-related permissions")]),e._v(" "),n("div",{staticClass:"alert alert-warning text-center"},[e._v("\n            Changes made below will affect "),n("strong",[e._v("every")]),e._v(" library item that was created from this dataset\n            and also every history this dataset is part of.\n        ")]),e._v(" "),e.is_unrestricted?n("p",{staticClass:"text-center"},[e._v("\n            You can\n            "),n("strong",{staticClass:"make-private",on:{click:function(t){return e.toggleDatasetPrivacy(!0)}}},[n("a",{attrs:{id:"make-private",href:"javascript:void(0)"}},[e._v("make this dataset private")])]),e._v("\n            to you.\n        ")]):n("p",{staticClass:"text-center"},[e._v("\n            You can\n            "),n("strong",{staticClass:"remove-restrictions",on:{click:function(t){return e.toggleDatasetPrivacy(!1)}}},[n("a",{attrs:{href:"javascript:void(0)"}},[e._v("remove all access restrictions")])]),e._v("\n            on this dataset.\n        ")]),e._v(" "),e.access_dataset_roles?n("PermissionsInputField",{ref:"access_field",attrs:{id:e.dataset_id,permission_type:e.access_dataset_roles_type,initial_value:e.access_dataset_roles,"api-root-url":e.apiRootUrl,title:"Roles that can access the dataset",alert:"User has to have <strong>all these roles</strong> in order to access this dataset.\n                    Users without access permission <strong>cannot</strong> have other permissions on this dataset.\n                    If there are no access roles set on the dataset it is considered <strong>unrestricted</strong>."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.manage_dataset_roles?n("PermissionsInputField",{attrs:{id:e.dataset_id,permission_type:e.manage_dataset_roles_type,initial_value:e.manage_dataset_roles,"api-root-url":e.apiRootUrl,title:"Roles that can manage permissions on the dataset",alert:"User with <strong>any</strong> of these roles can manage permissions of this dataset.\n                    If you remove yourself you will lose the ability manage this dataset unless you are an admin."},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),n("b-button",{staticClass:"toolbtn_save_permissions",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Save modifications",variant:"secondary"},on:{click:e.postPermissions}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n            Save\n        ")],1)],1)],1)}),[],!1,null,"2eae96c7",null).exports);function Cr(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Mr(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Cr(r,i,a,o,s,"next",e)}function s(e){Cr(r,i,a,o,s,"throw",e)}o(void 0)}))}}function Tr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var jr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(p.getAppRoot)()}var t,n,i,a,r,o,s;return t=e,(n=[{key:"getLibraries",value:(s=Mr(regeneratorRuntime.mark((function e(){var t,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n="".concat(this.root,"api/libraries?deleted=").concat(t),e.prev=2,e.next=5,S.a.get(n);case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2),Object(Be.b)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return s.apply(this,arguments)})},{key:"saveChanges",value:(o=Mr(regeneratorRuntime.mark((function e(t,n,i){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(this.root,"api/libraries/").concat(t.id),e.prev=1,r=S.a.patch(a,t).then((function(e){n(e.data)})).catch((function(e){i(e)})),e.abrupt("return",r.data);case 6:e.prev=6,e.t0=e.catch(1),Object(Be.b)(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e,t,n){return o.apply(this,arguments)})},{key:"deleteLibrary",value:(r=Mr(regeneratorRuntime.mark((function e(t,n,i){var a,r,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]&&s[3],r="".concat(this.root,"api/libraries/").concat(t.id).concat(a?"?undelete=true":""),e.prev=2,o=S.a.delete(r,t).then((function(e){n(e.data)})).catch((function(e){i(e)})),e.abrupt("return",o.data);case 7:e.prev=7,e.t0=e.catch(2),Object(Be.b)(e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"createNewLibrary",value:(a=Mr(regeneratorRuntime.mark((function e(t,n,i,a,r){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(this.root,"api/libraries/"),e.prev=1,s=S.a.post(o,{name:t,description:n,synopsis:i}).then((function(e){a(e.data)})).catch((function(e){r(e)})),e.abrupt("return",s.data);case 6:e.prev=6,e.t0=e.catch(1),Object(Be.b)(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e,t,n,i,r){return a.apply(this,arguments)})}])&&Tr(t.prototype,n),i&&Tr(t,i),e}(),Or=[{label:"Name",key:"name",sortable:!0},{label:"Description",key:"description",sortable:!1},{label:"Synopsis",key:"synopsis",sortable:!1},{label:"",key:"is_unrestricted",sortable:!1},{label:"",key:"buttons",sortable:!1}];k.default.use(N.a);var Dr={props:{text:{type:String},changedValue:{type:String},isEditMode:{type:Boolean},isExpanded:{type:Boolean}},data:function(){return{maxDescriptionLength:40}},methods:{updateValue:function(e){this.$emit("update:changedValue",e)},toggleDescriptionExpand:function(){this.$emit("toggleDescriptionExpand")},linkify:function(e){return Fa()(e)}}},Lr=(n(1767),Object(T.a)(Dr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-field"},[e.isEditMode?n("div",[n("b-form-textarea",{staticClass:"form-control",attrs:{value:e.text,rows:"3","no-resize":""},on:{change:e.updateValue}})],1):e.text.length>e.maxDescriptionLength&&!e.isExpanded?n("div",[n("span",{staticClass:"shrinked-description",attrs:{title:e.text},domProps:{innerHTML:e._s(e.linkify(e.text.substring(0,e.maxDescriptionLength)))}}),e._v(" "),n("span",{attrs:{title:e.text}},[e._v("...")]),e._v(" "),n("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:e.toggleDescriptionExpand}},[e._v("(more) ")])]):n("div",[n("div",{domProps:{innerHTML:e._s(e.linkify(e.text))}}),e._v(" "),e.text.length>e.maxDescriptionLength?n("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:e.toggleDescriptionExpand}},[e._v("(less)\n            ")]):e._e()])])])}),[],!1,null,"4f27b8df",null).exports);Ea.forEach((function(e){F.c.add(e)})),k.default.use(N.a);var Er={components:{FontAwesomeIcon:$.a,LibraryEditField:Lr,SearchField:hr},computed:{rows:function(){return this.librariesList.length}},data:function(){var e=Object(o.a)();return{newDescriptionProperty:"newDescription",newSynopsisProperty:"newSynopsis",isNewLibFormVisible:!1,currentPage:1,fields:Or,perPage:10,librariesList:[],maxDescriptionLength:40,include_deleted:!1,exclude_restricted:!1,filterOn:[],excluded:[],filter:null,isAdmin:e.user.isAdmin(),newLibraryForm:{name:"",description:"",synopsis:""}}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new jr({root:this.root}),this.loadLibraries(this.include_deleted)},methods:{loadLibraries:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.services.getLibraries(t).then((function(t){return e.librariesList=t}))},toggleEditMode:function(e){e.editMode=!e.editMode,this.$refs.libraries_list.refresh()},toggleDescriptionExpand:function(e){e.isExpanded=!e.isExpanded,this.$refs.libraries_list.refresh()},saveChanges:function(e){var t=e[this.newDescriptionProperty],n=e[this.newSynopsisProperty];t&&(e.description=t),n&&(e.synopsis=n),this.services.saveChanges(e,(function(){$e.a.success("Changes to library saved")}),(function(e){return Ma(e)})),this.toggleEditMode(e)},deleteLibrary:function(e){var t=this;this.services.deleteLibrary(e,(function(){$e.a.success("Library has been marked deleted."),e.deleted=!0,t.toggleEditMode(e),t.include_deleted||t.hideOn("deleted",!1)}),(function(e){return Ma(e)}))},gotoFirstPage:function(){this.currentPage=1},onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},searchValue:function(e){this.filter=e},toggle_include_deleted:function(e){var t=this;this.include_deleted=e,this.include_deleted?this.services.getLibraries(this.include_deleted).then((function(e){t.librariesList=t.librariesList.concat(e),t.$refs.libraries_list.refresh()})):this.hideOn("deleted",!1)},toggle_exclude_restricted:function(e){this.exclude_restricted=e,this.exclude_restricted?this.excluded=this.hideOn("public",!0):this.librariesList=this.librariesList.concat(this.excluded)},hideOn:function(e,t){var n=[];return this.librariesList=this.librariesList.filter((function(i){if(i[e]===t)return i;n.push(i)})),n},undelete:function(e){var t=this;this.services.deleteLibrary(e,(function(){e.deleted=!1,$e.a.success("Library has been undeleted."),t.$refs.libraries_list.refresh()}),(function(e){return Ma(e)}),!0)},newLibrary:function(){var e=this;this.services.createNewLibrary(this.newLibraryForm.name,this.newLibraryForm.description,this.newLibraryForm.synopsis,(function(t){e.librariesList.push(t),e.newLibraryForm.name="",e.newLibraryForm.description="",e.newLibraryForm.synopsis="",e.isNewLibFormVisible=!1,$e.a.success("Library created.")}),(function(e){return Ma(e)}))}}},Ar=(n(1768),Object(T.a)(Er,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-inline d-flex align-items-center mb-2"},[n("b-button",{staticClass:"mr-1",attrs:{title:"go to first page"},on:{click:e.gotoFirstPage}},[n("font-awesome-icon",{attrs:{icon:"home"}})],1),e._v(" "),e.isAdmin?n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],staticClass:"mr-1",attrs:{id:"create-new-lib",title:"Create new folder"}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n            Library\n        ")],1):e._e(),e._v(" "),n("SearchField",{attrs:{"typing-delay":0},on:{updateSearch:function(t){return e.searchValue(t)}}}),e._v(" "),e.isAdmin?n("b-form-checkbox",{staticClass:"mr-1",on:{input:function(t){return e.toggle_include_deleted(t)}}},[e._v("\n            include deleted\n        ")]):e._e(),e._v(" "),n("b-form-checkbox",{staticClass:"mr-1",on:{input:function(t){return e.toggle_exclude_restricted(t)}}},[e._v("\n            exclude restricted\n        ")])],1),e._v(" "),n("b-collapse",{attrs:{id:"collapse-2"},model:{value:e.isNewLibFormVisible,callback:function(t){e.isNewLibFormVisible=t},expression:"isNewLibFormVisible"}},[n("b-card",[n("b-form",{on:{submit:function(t){return t.preventDefault(),e.newLibrary(t)}}},[n("b-input-group",{staticClass:"mb-2 new-row",scopedSlots:e._u([{key:"append",fn:function(){return[n("b-button",{attrs:{id:"save_new_library",type:"submit",title:"save"}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n                            Save\n                        ")],1)]},proxy:!0}])},[n("b-form-input",{attrs:{required:"",placeholder:"Name"},model:{value:e.newLibraryForm.name,callback:function(t){e.$set(e.newLibraryForm,"name",t)},expression:"newLibraryForm.name"}}),e._v(" "),n("b-form-input",{attrs:{required:"",placeholder:"Description"},model:{value:e.newLibraryForm.description,callback:function(t){e.$set(e.newLibraryForm,"description",t)},expression:"newLibraryForm.description"}}),e._v(" "),n("b-form-input",{attrs:{placeholder:"Synopsis"},model:{value:e.newLibraryForm.synopsis,callback:function(t){e.$set(e.newLibraryForm,"synopsis",t)},expression:"newLibraryForm.synopsis"}})],1)],1)],1)],1),e._v(" "),n("b-table",{ref:"libraries_list",attrs:{id:"libraries_list",striped:"",hover:"",fields:e.fields,items:e.librariesList,"per-page":e.perPage,"current-page":e.currentPage,"show-empty":"",filter:e.filter,"filter-included-fields":e.filterOn},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[t.item.editMode?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"row.item.name"}],staticClass:"form-control input_library_name",attrs:{rows:"3"},domProps:{value:t.item.name},on:{input:function(n){n.target.composing||e.$set(t.item,"name",n.target.value)}}}):t.item.deleted&&e.include_deleted?n("div",{staticClass:"deleted-item"},[e._v(e._s(t.item.name))]):n("b-link",{attrs:{to:{path:"folders/"+t.item.root_folder_id}}},[e._v(e._s(t.item.name))])]}},{key:"cell(description)",fn:function(t){var i=t.item;return[n("LibraryEditField",{ref:"description-"+i.id,attrs:{"is-expanded":i.isExpanded,"is-edit-mode":i.editMode,text:i.description,"changed-value":i[e.newDescriptionProperty]},on:{toggleDescriptionExpand:function(t){return e.toggleDescriptionExpand(i)},"update:changedValue":function(t){return e.$set(i,e.newDescriptionProperty,t)},"update:changed-value":function(t){return e.$set(i,e.newDescriptionProperty,t)}}})]}},{key:"cell(synopsis)",fn:function(t){var i=t.item;return[n("LibraryEditField",{ref:"synopsis-"+i.id,attrs:{"is-expanded":i.isExpanded,"is-edit-mode":i.editMode,text:i.synopsis,"changed-value":i[e.newSynopsisProperty]},on:{toggleDescriptionExpand:function(t){return e.toggleDescriptionExpand(i)},"update:changedValue":function(t){return e.$set(i,e.newSynopsisProperty,t)},"update:changed-value":function(t){return e.$set(i,e.newSynopsisProperty,t)}}})]}},{key:"cell(is_unrestricted)",fn:function(t){return[t.item.public&&!t.item.deleted?n("font-awesome-icon",{attrs:{title:"Unrestricted dataset",icon:"globe"}}):e._e()]}},{key:"cell(buttons)",fn:function(t){return[t.item.deleted?n("b-button",{attrs:{title:"Undelete "+t.item.name},on:{click:function(n){return e.undelete(t.item)}}},[n("font-awesome-icon",{attrs:{icon:"unlock"}}),e._v("\n                Undelete\n            ")],1):e.isAdmin?n("div",[t.item.can_user_modify&&t.item.editMode?n("b-button",{staticClass:"lib-btn permission_folder_btn",attrs:{size:"sm",title:"Permissions of "+t.item.name},on:{click:function(n){return e.saveChanges(t.item)}}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n                    Save\n                ")],1):e._e(),e._v(" "),t.item.can_user_modify?n("b-button",{staticClass:"lib-btn edit_library_btn save_library_btn",attrs:{size:"sm",title:"Edit "+t.item.name},on:{click:function(n){return e.toggleEditMode(t.item)}}},[t.item.editMode?n("div",[n("font-awesome-icon",{attrs:{icon:["fas","times"]}}),e._v("\n                        Cancel\n                    ")],1):n("div",[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                        Edit\n                    ")],1)]):e._e(),e._v(" "),t.item.can_user_manage&&!t.item.editMode?n("b-button",{staticClass:"lib-btn permission_library_btn",attrs:{size:"sm",title:"Permissions of "+t.item.name,to:{path:"/"+t.item.id+"/permissions"}}},[n("font-awesome-icon",{attrs:{icon:"users"}}),e._v("\n                    Manage\n                ")],1):e._e(),e._v(" "),t.item.editMode?n("b-button",{staticClass:"lib-btn delete-lib-btn",attrs:{size:"sm",title:"Delete "+t.item.name},on:{click:function(n){return e.deleteLibrary(t.item)}}},[n("font-awesome-icon",{attrs:{icon:"trash"}}),e._v("\n                    Delete\n                ")],1):e._e()],1):e._e()]}}])}),e._v(" "),n("b-container",[n("b-row",{staticClass:"justify-content-md-center"},[n("b-col",{attrs:{md:"auto"}},[n("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"libraries_list"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),n("b-col",{attrs:{cols:"1.5"}},[n("table",[n("tr",[n("td",{staticClass:"m-0 p-0"},[n("b-form-input",{staticClass:"pagination-input-field",attrs:{id:"paginationPerPage",autocomplete:"off",type:"number",onkeyup:"this.value|=0;if(this.value<1)this.value=1"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e._v(" "),n("td",{staticClass:"text-muted ml-1 paginator-text"},[n("span",{staticClass:"pagination-total-pages-text"},[e._v("per page, "+e._s(e.rows)+" total")])])])])])],1)],1)],1)}),[],!1,null,"40df5f16",null).exports);k.default.use(N.a),Aa();var Ir={props:{library_id:{type:String,required:!0}},components:{PermissionsHeader:Ca,PermissionsInputField:wa,FontAwesomeIcon:$.a},data:function(){return{permissions:void 0,library:void 0,add_library_item_role_list:void 0,manage_library_role_list:void 0,modify_library_role_list:void 0,access_library_role_list:void 0,apiRootUrl:"".concat(Object(p.getAppRoot)(),"api/libraries"),add_type:"add_library_item_role_list",manage_type:"manage_library_role_list",modify_type:"modify_library_role_list",access_type:"access_library_role_list"}},created:function(){var e=this;this.root=Object(p.getAppRoot)(),this.services=new va({root:this.root}),this.services.getLibraryPermissions(this.library_id).then((function(t){console.log("fetched_permissions",t),e.add_library_item_role_list=Ta(t.add_library_item_role_list),e.manage_library_role_list=Ta(t.manage_library_role_list),e.modify_library_role_list=Ta(t.modify_library_role_list),e.access_library_role_list=Ta(t.access_library_role_list)})),this.services.getLibrary(this.library_id).then((function(t){e.library=t}))},methods:{setUserPermissionsPreferences:function(e,t){this[t]=e},postPermissions:function(){var e=this;this.services.setPermissions(this.apiRootUrl,this.library_id,[{"add_ids[]":this.add_library_item_role_list},{"manage_ids[]":this.manage_library_role_list},{"modify_ids[]":this.modify_library_role_list},{"access_ids[]":this.access_library_role_list}],(function(t){$e.a.success("Library permissions saved."),e.permissions=t}),(function(e){$e.a.error("An error occurred while attempting to set folder permissions."),console.error(e)}))}}},Pr=(n(1769),Object(T.a)(Ir,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.library?n("PermissionsHeader",{attrs:{name:e.library.name,path:"/"}}):e._e(),e._v(" "),n("h2",{staticClass:"text-center"},[e._v("Library permissions")]),e._v(" "),e.access_library_role_list?n("PermissionsInputField",{attrs:{id:e.library_id,permission_type:e.access_type,initial_value:e.access_library_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can access this library. If there are no access roles set on the library it is considered <strong>unrestricted</strong>.",title:"Roles that can access the library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.manage_library_role_list?n("PermissionsInputField",{attrs:{id:e.library_id,permission_type:e.manage_type,initial_value:e.manage_library_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can manage permissions on this library (includes giving access).",title:"Roles that can manage permissions on this library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.add_library_item_role_list?n("PermissionsInputField",{staticClass:"add_perm",attrs:{id:e.library_id,permission_type:e.add_type,initial_value:e.add_library_item_role_list,"api-root-url":e.apiRootUrl,alert:"User with <strong>any</strong> of these roles can add items to this library (folders and datasets).",title:"Roles that can add items to this library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),e.modify_library_role_list?n("PermissionsInputField",{attrs:{id:e.library_id,permission_type:e.modify_type,initial_value:e.modify_library_role_list,"api-root-url":e.apiRootUrl,alert:"User with  <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).",title:"Roles that can modify this library"},on:{input:e.setUserPermissionsPreferences}}):e._e(),e._v(" "),n("button",{staticClass:"toolbtn_save_permissions",attrs:{title:"Save modifications"},on:{click:e.postPermissions}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),e._v("\n        Save\n    ")],1)],1)}),[],!1,null,"1d13d486",null).exports);k.default.use(pa.a);var Yr=new pa.a({mode:"history",base:"".concat(Object(p.getAppRoot)(),"libraries"),routes:[{path:"/",name:"LibrariesList",component:Ar},{path:"/:library_id/permissions",name:"LibraryPermissions",component:Pr,props:!0},{path:"/folders/:folder_id",name:"LibraryFolder",component:kr,props:!0},{path:"/folders/:folder_id/permissions",name:"LibraryFolder",component:Pa,props:!0},{path:"/folders/:folder_id/dataset/:dataset_id/permissions",name:"LibraryFolder",component:Sr,props:!0}]}),Rr=n(94),Hr=Object(T.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("router-view")}),[],!1,null,null,null).exports,Nr=n(168),$r=n(272),Fr=n(145),Wr=n(658);F.c.add(ja.g),F.c.add(W.H);var zr={name:"FavoritesButton",props:{query:{type:String}},components:{FontAwesomeIcon:$.a},data:function(){return{searchKey:"#favorites",tooltipToggle:"Show favorites",tooltipUntoggle:"Clear",toggle:!1}},directives:{"v-b-tooltip":Wr.a},watch:{query:function(){this.toggle=this.query==this.searchKey}},computed:{tooltipText:function(){return this.toggle?this.tooltipUntoggle:this.tooltipToggle}},methods:{onFavorites:function(){this.toggle=!this.toggle,this.toggle?this.$emit("onFavorites",this.searchKey):this.$emit("onFavorites",null)}}},Ur=Object(T.a)(zr,(function(){var e=this.$createElement,t=this._self._c||e;return t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"panel-header-button",attrs:{title:this.tooltipText,href:"javascript:void(0)",role:"button","aria-label":"Show favorite tools"},on:{click:this.onFavorites}},[this.toggle?t("font-awesome-icon",{attrs:{icon:["fas","star"]}}):t("font-awesome-icon",{attrs:{icon:["far","star"]}})],1)}),[],!1,null,null,null).exports,Vr=n(248);function Br(e){return function(e){if(Array.isArray(e))return qr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Gr={name:"ToolBox",components:{UploadButton:Fr.a,FavoritesButton:Ur,ToolSection:Nr.a,ToolSearch:$r.a},data:function(){return{query:null,results:null,queryFilter:null,queryPending:!1,showSections:!1,buttonText:"",buttonIcon:""}},props:{toolbox:{type:Array,required:!0},storedWorkflowMenuEntries:{type:Array,required:!0},workflowTitle:{type:String,default:_()("Workflows")}},computed:{queryTooShort:function(){return this.query&&this.query.length<3},queryFinished:function(){return this.query&&1!=this.queryPending},sections:function(){return this.showSections?Object(Vr.a)(this.toolbox,this.results):Object(Vr.b)(this.toolbox,this.results)},isUser:function(){var e=Object(o.a)();return!(!e.user||!e.user.id)},workflows:function(){return[{title:_()("All workflows"),href:"".concat(Object(a.b)(),"workflows/list"),id:"list"}].concat(Br(this.storedWorkflowMenuEntries.map((function(e){return{id:e.id,title:e.name,href:"".concat(Object(a.b)(),"workflows/run?id=").concat(e.id)}}))))},hasResults:function(){return this.results&&this.results.length>0}},methods:{onQuery:function(e){this.query=e,this.queryPending=!0},onResults:function(e){this.results=e,this.queryFilter=this.hasResults?this.query:null,this.setButtonText(),this.queryPending=!1},onFavorites:function(e){this.query=e},onOpen:function(e,t){if("upload1"===e.id)t.preventDefault(),Object(Fr.c)();else if("regular"===e.form_style){t.preventDefault(),Object(o.a)().router.push("/",{tool_id:e.id,version:e.version})}},onToggle:function(){this.showSections=!this.showSections,this.setButtonText()},setButtonText:function(){this.buttonText=this.showSections?"Hide Sections":"Show Sections",this.buttonIcon=this.showSections?"fa fa-eye-slash":"fa fa-eye"}}},Jr=Object(T.a)(Gr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[e.isUser?n("favorites-button",{attrs:{query:e.query},on:{onFavorites:e.onFavorites}}):e._e()],1),e._v(" "),n("div",{staticClass:"panel-header-text"},[e._v("Tools")])])]),e._v(" "),n("div",{staticClass:"unified-panel-controls"},[n("tool-search",{attrs:{query:e.query,placeholder:"search tools"},on:{onQuery:e.onQuery,onResults:e.onResults}}),e._v(" "),n("upload-button"),e._v(" "),e.hasResults?n("div",{staticClass:"py-2"},[n("b-button",{staticClass:"w-100",attrs:{size:"sm"},on:{click:e.onToggle}},[n("span",{class:e.buttonIcon}),e._v(" "),n("span",{staticClass:"mr-1"},[e._v(e._s(e.buttonText))])])],1):e.queryTooShort?n("div",{staticClass:"py-2"},[n("b-badge",{staticClass:"alert-danger w-100"},[e._v("Search string too short!")])],1):e.queryFinished?n("div",{staticClass:"py-2"},[n("b-badge",{staticClass:"alert-danger w-100"},[e._v("No results found!")])],1):e._e()],1),e._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[n("div",{staticClass:"toolMenu"},e._l(e.sections,(function(t){return n("tool-section",{key:t.id,attrs:{category:t,"query-filter":e.queryFilter},on:{onClick:e.onOpen}})})),1),e._v(" "),n("tool-section",{attrs:{category:{text:e.workflowTitle}}}),e._v(" "),n("div",{staticClass:"toolSectionBody",attrs:{id:"internal-workflows"}},[n("div",{staticClass:"toolSectionBg"}),e._v(" "),e._l(e.workflows,(function(t){return n("div",{key:t.id,staticClass:"toolTitle"},[n("a",{attrs:{href:t.href}},[e._v(e._s(t.title))])])}))],2)],1)])])}),[],!1,null,null,null).exports,Kr=n(169),Xr=n(38),Qr=f.a.View.extend({initialize:function(){this.model=new f.a.Model({title:_()("Tools")})},isVueWrapper:!0,mountVueComponent:function(e){var t=Object(o.a)();return this.component=Object(Xr.a)(Kr.a)({side:"left",currentPanel:Jr,currentPanelProperties:{storedWorkflowMenuEntries:t.config.stored_workflow_menu_entries,toolbox:t.config.toolbox}},e)},toString:function(){return"toolPanel"}}),Zr=n(165),eo=n(219),to=[{html:_()("History Actions"),header:!0,anon:!0},{html:_()("Copy"),func:function(){var e=Object(o.a)();Object(Hn.a)(e.currHistoryPanel.model).done((function(){e.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Share or Publish"),func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.router&&e.router.push("/histories/sharing?id=".concat(e.currHistoryPanel.model.id))},singleUserDisable:!0},{html:_()("Show Structure"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.router&&e.router.push("/histories/show_structure")}},{html:_()("Extract Workflow"),href:"workflow/build_from_current_history"},{html:_()("Set Permissions"),func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.router&&e.router.push("/histories/permissions?id=".concat(e.currHistoryPanel.model.id))},singleUserDisable:!0},{html:_()("Make Private"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&confirm(_()("This will make all the data in this history private (excluding library datasets), and will set permissions such that all new data is created as private.  Any datasets within that are currently shared will need to be re-shared or published.  Are you sure you want to do this?"))&&u.a.post("".concat(e.root,"history/make_private"),{history_id:e.currHistoryPanel.model.id},(function(){e.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Resume Paused Jobs"),href:"history/resume_paused_jobs?current=True",anon:!0},{html:_()("Dataset Actions"),header:!0,anon:!0},{html:_()("Copy Datasets"),href:"dataset/copy_datasets"},{html:_()("Collapse Expanded Datasets"),func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.currHistoryPanel.collapseAll()}},{html:_()("Unhide Hidden Datasets"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&confirm(_()("Really unhide all hidden datasets?"))&&u.a.post("".concat(Object(p.getAppRoot)(),"history/adjust_hidden"),{user_action:"unhide"},(function(){e.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Delete Hidden Datasets"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&confirm(_()("Really delete all hidden datasets?"))&&u.a.post("".concat(Object(p.getAppRoot)(),"history/adjust_hidden"),{user_action:"delete"},(function(){e.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Purge Deleted Datasets"),confirm:_()("Really delete all deleted datasets permanently? This cannot be undone."),href:"history/purge_deleted_datasets",purge:!0,anon:!0},{html:_()("Downloads"),header:!0},{html:_()("Export Tool Citations"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.router&&e.router.push("/histories/citations?id=".concat(e.currHistoryPanel.model.id))}},{html:_()("Export History to File"),anon:!0,func:function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.router&&e.router.push("/histories/".concat(e.currHistoryPanel.model.id,"/export"))}},{html:_()("Beta Features"),anon:!1,header:!0},{html:_()("Use Beta History Panel"),anon:!1,func:function(){Object(eo.b)()}}];w.a.load({type:"history-menu",async:!1,callback:function(e){var t=[];e.each((function(e){var n=e.toJSON();n.activate&&t.push({html:_()(n.config.title),func:n.config.function&&new Function(n.config.function),anon:!0})})),t.length>0&&(t.unshift({html:_()("Webhooks"),header:!0}),u.a.merge(to,t))}});var no=function(e,t){var n=function(e,t,n){var i=Object(o.a)();return r.default.clone(to).filter((function(a){return(!i.config.single_user||!a.singleUserDisable)&&(!(e&&!a.anon)&&(!(!t&&a.purge)&&(a.href&&(a.href=n+a.href,a.target=a.target||"galaxy_main"),a.confirm&&(a.func=function(){var e=window.parent.document.getElementById("galaxy_main");confirm(a.confirm)&&e&&(e.src=a.href)}),!0)))}))}(void 0===(t=t||{}).anonymous||t.anonymous,t.purgeAllowed||!1,Object(p.getAppRoot)());return new Zr.a(e,n)},io=n(147),ao=n(11),ro=ao.a.SessionStorageModel.extend({defaults:{tagsEditorShown:!1,annotationEditorShown:!1,scrollPosition:0},toString:function(){return"HistoryViewPrefs(".concat(JSON.stringify(this.toJSON()),")")}});ro.storageKey=function(){return"history-panel"};var oo,so=io.a.HistoryViewEdit,lo=so.extend({className:"".concat(so.prototype.className," current-history-panel"),HDCAViewClass:so.prototype.HDCAViewClass.extend({foldoutStyle:"drilldown"}),emptyMsg:[_()("This history is empty"),". ",_()("You can "),'<a class="uploader-link" href="javascript:void(0)">',_()("load your own data"),"</a>",_()(" or "),'<a class="get-data-link" href="javascript:void(0)">',_()("get data from an external source"),"</a>"].join(""),initialize:function(e){e=e||{},this.preferences=new ro(r.default.extend({id:ro.storageKey()},r.default.pick(e,r.default.keys(ro.prototype.defaults)))),so.prototype.initialize.call(this,e),this.panelStack=[],this.currentContentId=e.currentContentId||null},_setUpListeners:function(){so.prototype._setUpListeners.call(this);var e=this;this.on("new-model",(function(){e.preferences.set("scrollPosition",0)}))},loadCurrentHistory:function(){return this.loadHistory(null,{url:"".concat(Object(p.getAppRoot)(),"history/current_history_json")})},switchToHistory:function(e,t){return Object(o.a)().user.isAnonymous()?(this.trigger("error",_()("You must be logged in to switch histories"),_()("Anonymous user")),u.a.when()):this.loadHistory(e,{url:"".concat(Object(p.getAppRoot)(),"history/set_as_current?id=").concat(e)})},createNewHistory:function(e){return Object(o.a)().user.isAnonymous()?(this.trigger("error",_()("You must be logged in to create histories"),_()("Anonymous user")),u.a.when()):this.loadHistory(null,{url:"".concat(Object(p.getAppRoot)(),"history/create_new_current")})},setModel:function(e,t,n){return so.prototype.setModel.call(this,e,t,n),this.model&&this.model.id&&(this.log("checking for updates"),this.model.checkForUpdates()),this},_setUpModelListeners:function(){return so.prototype._setUpModelListeners.call(this),this.listenTo(this.model,{"change:nice_size change:size":function(){this.trigger("history-size-change",this,this.model,arguments)},"change:id":function(){this.once("loading-done",(function(){this.model.checkForUpdates()}))}})},_setUpCollectionListeners:function(){so.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,"state:ready",(function(e,t,n){e.get("visible")||this.collection.storage.includeHidden()||this.removeItemView(e)}))},_setUpBehaviors:function(e){e=e||this.$el;var t=this;return so.prototype._setUpBehaviors.call(t,e),this._debouncedScrollCaptureHandler||(this._debouncedScrollCaptureHandler=r.default.debounce((function(){t.$el.is(":visible")&&t.preferences.set("scrollPosition",u()(this).scrollTop())}),40)),t.$scrollContainer(e).off("scroll",this._debouncedScrollCaptureHandler).on("scroll",this._debouncedScrollCaptureHandler),t},_buildNewRender:function(){if(!this.model)return u()();var e=so.prototype._buildNewRender.call(this);return e.find(".search").prependTo(e.find("> .controls")),this._renderQuotaMessage(e),e},_renderQuotaMessage:function(e){return e=e||this.$el,u()(this.templates.quotaMsg({},this)).prependTo(e.find(".messages"))},_renderTags:function(e){return so.prototype._renderTags.call(this,e)},_renderAnnotation:function(e){var t=this;so.prototype._renderAnnotation.call(t,e),t.preferences.get("annotationEditorShown")&&t.annotationEditor.toggle(!0),t.listenTo(t.annotationEditor,"hiddenUntilActivated:shown hiddenUntilActivated:hidden",(function(e){t.preferences.set("annotationEditorShown",e.hidden)}))},_swapNewRender:function(e){so.prototype._swapNewRender.call(this,e);var t=this;return r.default.delay((function(){var e=t.preferences.get("scrollPosition");e&&t.scrollTo(e,0)}),10),this},_attachItems:function(e){so.prototype._attachItems.call(this,e);return this.currentContentId&&this._setCurrentContentById(this.currentContentId),this},addItemView:function(e,t,n){var i=so.prototype.addItemView.call(this,e,t,n);return i&&this.panelStack.length?this._collapseDrilldownPanel():i},_setUpItemViewListeners:function(e){return so.prototype._setUpItemViewListeners.call(this,e),this.listenTo(e,{"expanded:drilldown":function(e,t){this._expandDrilldownPanel(t)},"collapsed:drilldown":function(e,t){this._collapseDrilldownPanel(t)}})},setCurrentContent:function(e){this.$(".history-content.current-content").removeClass("current-content"),e?(e.$el.addClass("current-content"),this.currentContentId=e.model.id):this.currentContentId=null},_setCurrentContentById:function(e){var t=this.viewFromModelId(e)||null;this.setCurrentContent(t)},_expandDrilldownPanel:function(e){this.panelStack.push(e),this.$controls().add(this.$list()).hide(),e.parentName=this.model.get("name"),e.delegateEvents().render().$el.appendTo(this.$el)},_collapseDrilldownPanel:function(e){this.panelStack.pop(),this.$controls().add(this.$list()).show()},events:r.default.extend(r.default.clone(so.prototype.events),{"click .uploader-link":function(e){Object(Fr.c)()},"click .get-data-link":function(e){var t=u()(".toolMenuContainer");t.parent().scrollTop(0),t.find('span:contains("Get Data")').click()}}),listenToGalaxy:function(e){this.listenTo(e,{"center-frame:load":function(e){var t=e.fullpath,n=null;r.default.find({display:/datasets\/([a-f0-9]+)\/display/,edit:/datasets\/([a-f0-9]+)\/edit/,report_error:/dataset\/errors\?id=([a-f0-9]+)/,rerun:/tool_runner\/rerun\?id=([a-f0-9]+)/,show_params:/datasets\/([a-f0-9]+)\/show_params/},(function(e,i){return n=r.default.result(t.match(e),1)})),this._setCurrentContentById(n?"dataset-".concat(n):null)},"center-panel:load":function(e){try{var t=e.model.attributes.dataset_id||null;if(null===t)throw"Invalid id";this._setCurrentContentById("dataset-".concat(t))}catch(e){this._setCurrentContentById()}},"activate-hda":function(e){this._setCurrentContentById("dataset-".concat(e))}})},connectToQuotaMeter:function(e){return e?(this.listenTo(e,"quota:over",this.showQuotaMessage),this.listenTo(e,"quota:under",this.hideQuotaMessage),this.on("rendered rendered:initial",(function(){e&&e.isOverQuota()&&this.showQuotaMessage()})),this):this},clearMessages:function(e){var t=r.default.isUndefined(e)?this.$messages().children('[class$="message"]'):u()(e.currentTarget);return(t=t.not(".quota-message")).fadeOut(this.fxSpeed,(function(){u()(this).remove()})),this},showQuotaMessage:function(){var e=this.$(".quota-message");e.is(":hidden")&&e.slideDown(this.fxSpeed)},hideQuotaMessage:function(){var e=this.$(".quota-message");e.is(":hidden")||e.slideUp(this.fxSpeed)},unhideHidden:function(){var e=this;return window.confirm(_()("Really unhide all hidden datasets?"))?e.model.contents._filterAndUpdate({visible:!1,deleted:"",purged:""},{visible:!0}).done((function(){e.model.contents.includeHidden||e.renderItems()})):u.a.when()},deleteHidden:function(){return window.confirm(_()("Really delete all hidden datasets?"))?this.model.contents._filterAndUpdate({visible:!1,deleted:"",purged:""},{deleted:!0,visible:!0}):u.a.when()},toString:function(){return"CurrentHistoryView(".concat(this.model?this.model.get("name"):"",")")}});lo.prototype.templates=(oo=ao.a.wrapTemplate(['<div class="quota-message errormessage">',_()("You are over your disk quota"),". ",_()("Tool execution is on hold until your disk usage drops below your allocated quota"),".","</div>"],"history"),r.default.extend(r.default.clone(so.prototype.templates),{quotaMsg:oo}));var co={CurrentHistoryView:lo},uo=f.a.View.extend({initialize:function(e,t){var n=this,i=Object(o.a)(),a=[];this.userIsAnonymous=i.user.isAnonymous(),this.allow_user_dataset_purge=t.config.allow_user_dataset_purge,this.root=t.root,this.historyView=new co.CurrentHistoryView({className:"".concat(co.CurrentHistoryView.prototype.className," middle"),purgeAllowed:this.allow_user_dataset_purge,linkTarget:"galaxy_main"}),i.currHistoryPanel=this.historyView,i.currHistoryPanel.listenToGalaxy(i),this.buttonRefresh=new v.a.ButtonLink({id:"history-refresh-button",title:_()("Refresh history"),cls:"panel-header-button",icon:"fa fa-refresh",onclick:function(){n.historyView.loadCurrentHistory()}}),a.push(this.buttonRefresh),this.userIsAnonymous||(this.buttonNew=new v.a.ButtonLink({id:"history-new-button",title:_()("Create new history"),cls:"panel-header-button",icon:"fa fa-plus",onclick:function(){i.currHistoryPanel.createNewHistory()}}),a.push(this.buttonNew)),this.buttonViewMulti=new v.a.ButtonLink({id:"history-view-multi-button",title:_()("View all histories"),cls:"panel-header-button",icon:"fa fa-columns",href:"".concat(this.root,"history/view_multiple")}),a.push(this.buttonViewMulti),this.buttonOptions=new v.a.ButtonLink({id:"history-options-button",title:_()("History options"),cls:"panel-header-button",target:"galaxy_main",icon:"fa fa-cog",href:"".concat(this.root,"root/history_options")}),a.push(this.buttonOptions),this.model=new f.a.Model({cls:"history-right-panel",title:_()("History"),buttons:a}),this.setElement(this._template()),this.historyView.setElement(this.$el),this.historyView.connectToQuotaMeter(i.quotaMeter),this.historyView.loadCurrentHistory(),i.listenTo(this.historyView,"history-size-change",(function(){i.user.fetch({url:"".concat(i.user.urlRoot(),"/").concat(i.user.id||"current")})}))},render:function(){this.optionsMenu=no(this.buttonOptions.$el,{anonymous:this.userIsAnonymous,purgeAllowed:this.allow_user_dataset_purge,root:this.root}),this.buttonViewMulti.$el[this.userIsAnonymous?"hide":"show"]()},_template:function(e){return['<div id="current-history-panel" class="history-panel middle"/>'].join("")},toString:function(){return"historyPanel"}}),ho=n(490),fo=n(36),po=n(2173),mo=function(e){return null!=e},_o=function(e){return mo(e)&&!isNaN(e)&&isFinite(e)},go={contents:[],targetKey:null,startKey:null,startKeyIndex:0,topRows:0,bottomRows:0,totalMatches:0},vo={props:{parent:{type:Object,required:!0},params:{type:fo.i,default:function(){return new fo.i}},pageSize:{type:Number,default:fo.i.pageSize},debouncePeriod:{type:Number,default:1e3},debug:{type:Boolean,default:!1}},computed:{busy:function(){return this.loading||this.scrolling},slotProps:function(){return{payload:this.payload,scrollPos:this.scrollPos,loading:this.loading,scrolling:this.scrolling,busy:this.busy,params:this.params,pageSize:this.pageSize,setScrollPos:this.setScrollPos,manualReload:this.manualReload}}},data:function(){return{payload:go,scrollPos:new fo.h,loading:!1,scrolling:!1}},watch:{params:function(e,t){fo.i.equals(e,t)||this.resetScrollPos()}},created:function(){var e=this;this.params$=this.watch$("params"),this.scrollPos$=this.watch$("scrollPos");var t=this.initStreams(),n=t.payload$,i=t.loading$,a=t.scrolling$,r=t.resetPos$,o=void 0===r?po.a:r;this.listenTo(a,(function(t){return e.scrolling=t})),this.listenTo(i,(function(t){return e.loading=t})),this.listenTo(o,(function(t){return e.setScrollPos(t)})),this.listenTo(n,{next:function(t){return e.setPayload(t)},error:function(e){return console.warn("error in cache$",e)},complete:function(){return console.warn("why did cache$ complete?")}})},methods:{resetScrollPos:function(){this.setScrollPos(fo.h.create())},initStreams:function(){return console.warn("Override initStreams in ContentProvider"),{payload$:po.a,loading$:po.a,scrolling$:po.a,resetPos$:po.a}},setScrollPos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=void 0===t?0:t,i=e.key,a=void 0===i?null:i;_o(n)&&(this.scrollPos=fo.h.create({cursor:n,key:a}))},manualReload:function(){this.setScrollPos(this.scrollPos$.value)},setPayload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},go,e);this.$set(this,"payload",t)}},render:function(){return this.$scopedSlots.default(this.slotProps)}},yo=n(1090),bo=n.n(yo),wo=n(592),ko={ASC:"asc",DESC:"desc",isValid:function(e){return Object.values(xo).some((function(t){return t==e}))}},xo=ko;function So(e){return function(e){if(Array.isArray(e))return To(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Mo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||Mo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){if(e){if("string"==typeof e)return To(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?To(e,t):void 0}}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var jo=function(e,t){return Math.abs(+e-+t)},Oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyDirection,n=void 0===t?xo.ASC:t,i=e.pageSize,a=void 0===i?fo.i.pageSize:i;if(!xo.isValid(n))throw new Error("buildContentResult: invalid sort direction: ".concat(n));return function(e){var t=Co(e,2),i=t[0],r=t[1];if(void 0===i)throw new Error("missing skiplist");if(void 0===r)throw new Error("missing target key");if(!Number.isFinite(r))throw console.warn("Target key should be numeric",i,r),new Error("buildContentResult: targetKey must be a numeric value",r);var o=i.findEntries(r),s=o.matchingValue,l=o.desc,c=o.asc,d=n==xo.ASC,u=d?l:c,h=d?c:l,f=Object(wo.pipe)(Object(wo.filter)((function(e){var t=Co(e,1)[0];return d?t<r:t>r})),Object(wo.take)(a)),p=Object(wo.pipe)(Object(wo.filter)((function(e){var t=Co(e,1)[0];return d?t>r:t<r})),Object(wo.take)(2*a)),m=Array.from(f(u)),_=Array.from(p(h)),g=s?[[r,s]]:[],v=[].concat(So(m.reverse()),g,So(_)),y=Do(r,v),b=y.startKey,w=y.startKeyIndex;return{contents:v.map((function(e){var t=Co(e,2);t[0];return t[1]})),targetKey:r,startKey:b,startKeyIndex:w}}},Do=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={startKey:null,startKeyIndex:-1,distance:1/0};return t.filter((function(e){return Array.isArray(e)})).reduce((function(t,n,i){var a=Co(n,1)[0],r=jo(e,a);return r<t.distance?{startKey:a,startKeyIndex:i,distance:r}:t}),n)},Lo=function(){return new bo.a},Eo=function(e,t){var n=t.doc,i=t.key,a=t.match,r=parseInt(i);return a?e.upsert(r,n):e.has(r)&&e.delete(r),e},Ao=function(e){return function(t){var n;if(e in t)n=t[e];else{var i=t._id.split("-");n=parseInt(i[1])}var a=parseInt(n);if(isNaN(a))throw console.warn("Non integer key for document",t),new Error("Key for update map should be an integer");return a}},Io=n(1081),Po=n(278),Yo=n(624),Ro=n(634),Ho=n(631),No=n(2194),$o=n(2198),Fo=n(2199),Wo=n(780),zo=n(633),Uo=n(2208),Vo=n(2200),Bo=n(152),qo=n(2190),Go=n(2188),Jo=n(2189),Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return Object(Go.a)((function(t){var n=t.pipe(Object(Jo.a)(!0)),i=t.pipe(Object(zo.a)(e),Object(Jo.a)(!1));return Object(qo.a)(n,i).pipe(Object(Ro.a)())}))},Xo=n(2191),Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Object(Go.a)((function(t){var n=t.pipe(Object(zo.a)(e));return t.pipe(Object(Xo.a)(n))}))};var Zo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(Bo.a)((function(n){var i=n/e;return e*(t?Math.ceil(i):Math.floor(i))}))},es=n(778),ts=n(2192),ns=n(2180),is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialInterval,n=void 0===t?1e3:t,i=e.maxInterval,a=void 0===i?6e4:i,r=e.lambda,o=void 0===r?.25:r,s=e.debug,l=void 0!==s&&s,c=0;return Object(ts.a)((function(e){var t=Math.floor(n*Math.exp(o*c++));return t=Math.max(t,n),t=Math.min(t,a),Object(es.a)(e).pipe(_s(l,(function(e){return console.log("decay",e,c,t)})),Object(ns.a)(t))}))},as=n(798),rs=(n(668),n(265),n(1082)),os=n(143),ss=n(1092),ls=n(2174),cs=n(221),ds=Object(rs.a)((function(){var e=new os.a,t=XMLHttpRequest.prototype.open;return XMLHttpRequest.prototype.open=function(n,i){return e.next({method:n,url:i}),t.apply(this,arguments)},e.pipe(Object(ss.a)((function(){XMLHttpRequest.prototype.open=t})))})).pipe(Object(ls.a)()),us=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=t.method,i=t.url,a=e.methods,r=void 0===a?["GET","POST","PUT","DELETE"]:a,o=e.routes,s=void 0===o?[]:o,l=e.exclude,c=void 0===l?[]:l,d=hs(i);return!!r.includes(n)&&((!c.length||!c.find(d))&&(!!s.length&&!!s.find(d)))}},hs=function(e){return function(t){return t instanceof RegExp?e.match(t):e.includes(t)}},fs=(n(2193),n(2207)),ps=function(e){return Object(fs.a)({bufferSize:e,refCount:!0})},ms=n(2181),_s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return Object(ms.a)((function(n){e&&t(n)}))},gs=(n(801),new Map,n(2209),n(904)),vs=(n(893),n(2195),n(2196),n(266),n(2178)),ys=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(vs.a)(t).pipe(Object(zo.a)(0))},bs=n(71);var ws=n(247),ks=n(800);n(2197),n(799),n(787),n(262),n(217),n(216);function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ms(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ts=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.indexKey,i=void 0===n?"hid":n,a=t.label,r=void 0===a?"payload":a,o=e.contents,s=void 0===o?[]:o,l=e.startKeyIndex,c=Ms(e,["contents","startKeyIndex"]),d=s.map((function(e,t){var n=e[i];return t==l?"".concat(n,"*"):n})),u=Ss({keys:d,startKeyIndex:l},c);console.log(r,u)},js=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){if(!(e instanceof Function))return Object(Io.a)("monitor should be a function in aggregateCacheUpdates");var i=t.pageSize,a=void 0===i?ws.a.pageSize:i,r=t.debouncePeriod,o=void 0===r?250:r,s=t.keyField,l=void 0===s?"hid":s,c=t.keyDirection,d=void 0===c?xo.DESC:c,u=t.inputChunk,h=void 0===u?Math.floor(a/2):u,f=t.updateGroupLifetime,p=void 0===f?2*o:f,m=t.debug,_=void 0!==m&&m,g=Ao(l),v=n.pipe(ps(1)),y=v.pipe(Zo(h,d==xo.DESC),Object(Ro.a)(),_s(_,(function(e){return console.log("monitorInputKey",e)}))).pipe(Object(Ho.a)(e),_s(_,(function(e){return console.log("monitor output",e)}))).pipe(Object(No.a)((function(e){return e.key}),(function(e){return e}),(function(e){return e.pipe(Object($o.a)(p,Po.a),Object(Fo.a)())})),Object(Wo.a)((function(e){return e.pipe(Object(zo.a)(.25*o))})),Qo(o),_s(_,(function(e){return console.log("burst",e.map((function(e){return e.key})))}))),b=Lo();return y.pipe(Object(Wo.a)((function(e){return Object(Yo.a)(e).pipe(Object(Uo.a)(Eo,b))})),_s(_,(function(){return console.log("grouped update burst done")}))).pipe(Object(Vo.a)(v)).pipe(Object(Bo.a)(Oo({pageSize:a,keyDirection:d,getKey:g})),_s(_,(function(e){return Ts(e,{indexKey:l,label:"aggregateCacheUpdates payload"})})))}},Os=n(2201);function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){Es(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function As(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Is=function(e){return function(t,n){return t[e]===n[e]}},Ps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hid",n=e.contents,i=void 0===n?[]:n,a=As(e,["contents"]),r=i.map((function(e){return e[t]}));return Ls({keys:r},a)};function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){Hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ns(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Fs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.debouncePeriod,a=n.debug,r=void 0!==a&&a,o=t.parent$.pipe(Object(Ro.a)(Is("id")),_s(r,(function(e){return console.log("processContentStreams: parent changed",e)}))),s=t.params$.pipe(Object(Ro.a)(fo.i.equals),_s(r,(function(e){return console.log("processContentStreams: params changed",e)}))),l=t.scrollPos$.pipe(Object(zo.a)(i),_s(r,(function(e){return console.log("processContentStreams: pos changed",e)})),Object(Ro.a)(fo.h.equals)),c=t.scrollPos$.pipe(Ko(200)),d=new os.a,u=d.pipe(Ko(i),Object(Os.a)(!0)),h=new os.a;return{payload$:ys(o,s).pipe(Object(Ho.a)((function(t){var i=Ns(t,2),a=i[0],o=i[1];return l.pipe(_s(r,(function(e){console.clear(),console.log("processContentStreams: pos",JSON.stringify(e))})),e(Rs({parent:a,filters:o,loadingEvents$:d,resetPos$:h},n)),Object(Os.a)(Rs(Rs({},go),{},{placeholder:!0})))})),Object(ls.a)()),scrolling$:c,loading$:u,resetPos$:h}}var Ws=n(795),zs=n(2210),Us=n(2184),Vs=n(796),Bs=n(2203),qs=n(779),Gs=n(2204),Js=n(2202),Ks=n(58),Xs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.history,n=e.filters,i=e.initialInterval,a=void 0===i?2e3:i,r=e.maxInterval,o=void 0===r?10*a:r,s=e.disablePoll,l=void 0!==s&&s,c=e.debug,d=void 0!==c&&c,u=e.windowSize,h=void 0===u?2*fo.i.pageSize:u;if(void 0===t)return Object(Io.a)(new Error("Missing history in loadContents"));if(void 0===n)return Object(Io.a)(new Error("Missing filters in loadContents"));var f=t.id,p=function(e){return Object(rs.a)((function(){return Object(es.a)([f,n,e]).pipe(Object(Ks.e)({windowSize:h}))}))},m=function(e){return Qs(100).pipe(Object(Ho.a)((function(){return e.pipe(Object(Js.a)((function(e){return e.pipe(is({initialInterval:a,maxInterval:o,debug:d}))})))})))};return Object(Ho.a)((function(e){var t=p(e);return l?t:m(t)}))},Qs=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ds.pipe(Object(cs.a)(us(e)))}({methods:["POST","PUT","DELETE"],routes:[/api\/(history|tools|histories)/]}).pipe(Object(Os.a)(!0),Object(zo.a)(e))};function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){tl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nl(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var il=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.history,i=e.filters,a=void 0===i?new fo.i:i,r=e.pageSize,o=void 0===r?fo.i.pageSize:r,s=e.debug,l=void 0!==s&&s,c=e.keyField,d=void 0===c?"hid":c,u=e.keyDirection,h=void 0===u?xo.DESC:u,f=nl(e,["history","filters","pageSize","debug","keyField","keyDirection"]);return t.pipe(Object(Bo.a)((function(e){return parseInt(e)})),js((function(e){return Object(es.a)([n.id,a,e]).pipe(Object(Ks.i)({pageSize:o,debug:l,keyField:d}))}),el({keyField:d,keyDirection:h,pageSize:o,debug:l},f)))}};function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sl(e){return function(e){if(Array.isArray(e))return dl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||cl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cl(e,t){if(e){if("string"==typeof e)return dl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dl(e,t):void 0}}function dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,n=e.filters,i=void 0===n?new fo.i:n,a=e.pageSize,r=void 0===a?fo.i.pageSize:a,o=e.debouncePeriod,s=void 0===o?250:o,l=e.loadingTimeout,c=void 0===l?2e3:l,d=e.disablePoll,u=void 0!==d&&d,h=e.debug,f=void 0!==h&&h,p=e.loadingEvents$,m=void 0===p?new os.a:p,_=e.resetPos$,g=void 0===_?new os.a:_,v=yl("totalMatches",t,i,(function(){return new Ws.a(t.hidItems)})),y=yl("cursorToHid",t,i,(function(){return new Ws.a(gl(t))})),b=yl("hidToTopRows",t,i,(function(){return new Ws.a(_l(t))}));return Object(Go.a)((function(e){var n=ll(Object(zs.a)(e,(function(e){return null===e.key})),2),a=n[0],o=n[1].pipe(Object(Vs.a)("key")),l=a.pipe(Object(Vs.a)("cursor"),Object(Vo.a)(y),Object(Bo.a)((function(e){return hl.apply(void 0,sl(e))})),Object(Bo.a)((function(e){return Math.round(e)})),_s(f,(function(e){return console.log("estimatedHid",e,t)}))),d=Object(qo.a)(o,l).pipe(Object(Ro.a)(),Object(cs.a)((function(e){return!isNaN(e)})),Object(ls.a)()),h=d.pipe(Zo(r,!0),Object(Ro.a)(),_s(f,(function(e){return console.log("serverHid",e)})),Object(ls.a)()),p=h.pipe(Object(ms.a)((function(){return m.next(!0)})),Xs({history:t,filters:i,disablePoll:u,debug:f}),Object(ms.a)((function(){return m.next(!1)})),Object(ms.a)((function(e){return wl(t.id,e)})),Object(ls.a)()),_=d.pipe(Object(Bs.a)(h),Object(qs.a)(),Object(zo.a)(100)).pipe(il({history:t,filters:i,pageSize:r,debouncePeriod:s,debug:f}),_s(f,(function(e){return console.log("cacheMonitor.contents (hid)",e.contents.map((function(e){return e.hid})))})),Object(fs.a)(1)).pipe(Object(Vo.a)(v,b),Object(Bo.a)(ml(r)),_s(f,(function(e){return console.log("payload",e)}))),w=Object(ks.a)(c).pipe(Object(Jo.a)(rl(rl({},go),{},{noResults:!0})),Object(as.a)(1)),k=Object(gs.a)(w,_),x=Object(Us.a)(k,_),S=p.pipe(Object(Gs.a)(),Object(cs.a)((function(e){var t=ll(e,2),n=t[0],i=t[1];return!isNaN(n.maxHid)&&!isNaN(i.maxHid)})),Object(Vo.a)(e,d),Object(Bo.a)((function(e){var t=ll(e,3),n=ll(t[0],2),i=n[0],a=n[1],r=t[1],o=t[2],s=a.maxHid>i.maxHid,l=0==r.cursor&&null==r.key,c=Math.abs(o-i.maxContentHid)<2;return s&&(l||c)?new fo.h({cursor:0,key:a.maxHid}):null})),Object(cs.a)(Boolean)),C=p.pipe(Object(Vo.a)(y),Object(Bo.a)((function(e){var t=ll(e,2),n=t[0],i=t[1];return fl(n,i)}))),M=p.pipe(Object(Vo.a)(b),Object(Bo.a)((function(e){var t=ll(e,2),n=t[0],i=t[1];return pl(n,i)}))),T=p.pipe(Object(Vs.a)("totalMatches"),Object(Bo.a)((function(e){return parseInt(e)})));return new bs.a((function(e){var t=x.subscribe(e);return t.add(C.subscribe(y)),t.add(M.subscribe(b)),t.add(T.subscribe(v)),t.add(S.subscribe(g)),t}))}))},hl=function(e,t){var n=t.get(e,{interpolate:!0});return _o(n)?n:t.hasData?(console.log("invalid curve fit",n,e,t.domain),t.get(0)):void 0},fl=function(e,t){var n=e.maxHid,i=e.minHid,a=e.maxContentHid,r=e.minContentHid,o=e.matches,s=e.totalMatchesUp,l=e.totalMatches;return t.set(0,n),t.set(1,i),l>0&&(t.set(s/l,a),t.set((o+s)/l,r)),t},pl=function(e,t){var n=e.minContentHid,i=e.maxContentHid,a=e.minHid,r=e.maxHid,o=e.matchesUp,s=e.matchesDown,l=e.matches,c=e.totalMatchesUp,d=e.totalMatches;return l>0&&(t.set(i,c-o),t.set(n,Math.max(0,c+s-1))),t.set(r,0),d>0&&t.set(a,d-1),t.domain=[a,r],t},ml=function(e){return function(t){var n=ll(t,3),i=n[0],a=n[1],r=n[2],o=i.contents,s=void 0===o?[]:o,l=0,c=Math.max(0,a-s.length-1);if(r.size&&s.length&&a>e){var d=s[0].hid,u=r.get(d,{interpolate:!0});l=Math.max(0,Math.round(u)),c=Math.max(0,a-l-s.length)}return rl({topRows:l,bottomRows:c,totalMatches:a},i)}},_l=function(e){var t=new fo.b;return t.domain=[0,+e.hidItems],t.xPrecision=3,t.yPrecision=3,t.set(e.hidItems,0),t.set(0,e.hidItems),t},gl=function(e){var t=new fo.b;return t.domain=[0,1],t.xPrecision=3,t.yPrecision=2,t.set(0,e.hidItems),t.set(1,1),t},vl=new Map,yl=function(e,t,n,i){var a=bl(e,t,n);return vl.has(a)||vl.set(a,i()),vl.get(a)},bl=function(e,t,n){return JSON.stringify({label:e,historyId:t.id,filters:n.export()})},wl=function(e,t){var n=(0,Rr.a.getters["betaHistory/getHistoryById"])(e),i=t.historySize,a=t.historyEmpty,r=rl(rl({},n),{},{size:i,empty:a});Rr.a.dispatch("betaHistory/setHistory",r)},kl={mixins:[vo],props:{disablePoll:{type:Boolean,default:!1}},computed:{history:function(){return this.parent}},watch:{history:function(e,t){e.id!=t.id&&this.resetScrollPos()}},methods:{initStreams:function(){var e=this.disablePoll,t=this.debouncePeriod,n=this.pageSize,i=this.params$,a=this.scrollPos$,r=this.debug,o=this.watch$("history");return Fs(ul,{params$:i,parent$:o,scrollPos$:a},{disablePoll:e,debouncePeriod:t,pageSize:n,debug:r})}}};function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach((function(t){Cl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ml(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Tl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.dsc,i=e.filters,a=void 0===i?new fo.i:i,r=e.pageSize,o=void 0===r?fo.i.pageSize:r,s=e.debug,l=void 0!==s&&s,c=e.keyField,d=void 0===c?"element_index":c,u=e.keyDirection,h=void 0===u?xo.ASC:u,f=Ml(e,["dsc","filters","pageSize","debug","keyField","keyDirection"]);return t.pipe(Object(Bo.a)((function(e){return parseInt(e)})),js((function(e){return Object(es.a)([n.contents_url,a,e]).pipe(Object(Ks.f)({pageSize:o,debug:!1,keyField:d}))}),Sl({keyField:d,keyDirection:h,pageSize:o,debug:l},f)))}};function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){Dl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return El(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return El(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Al=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,n=e.filters,i=void 0===n?new ws.a:n,a=e.pageSize,r=void 0===a?ws.a.pageSize:a,o=e.debug,s=void 0!==o&&o,l=e.loadingEvents$,c=void 0===l?new os.a:l,d=t.totalElements,u=t.contents_url;return Object(Go.a)((function(n){var a=Ll(Object(zs.a)(n,(function(e){return null===e.key})),2),o=a[0],l=a[1],h=o.pipe(Object(Vs.a)("cursor"),Object(Bo.a)((function(e){return Math.round(e*d)}))),f=l.pipe(Object(Vs.a)("key")),p=Object(qo.a)(f,h).pipe(Object(ls.a)()),m=p.pipe(Zo(r,!1),Object(Ro.a)()).pipe(Object(Bo.a)((function(e){return{offset:Math.max(0,e-r),limit:3*r,targetRow:e}}))).pipe(Object(Ho.a)((function(e){return Object(es.a)([u,i,e]).pipe(Object(ms.a)((function(){return c.next(!0)})),Object(Ks.d)({debug:s}),Object(ms.a)((function(){return c.next(!1)})))}))),_=p.pipe(Tl(Ol({dsc:t,filters:i},e)),Object(Bo.a)((function(e){var t=e.contents,n=t.length?t[0].element_index:0,i=Math.max(0,d-t.length-n);return Ol(Ol({},e),{},{topRows:n,bottomRows:i,totalMatches:d})})));return new bs.a((function(e){var t=_.subscribe(e);return t.add(m.subscribe()),t}))}))},Il={mixins:[vo],computed:{dsc:function(){return this.parent instanceof fo.d?this.parent:new fo.d(this.parent)}},watch:{dsc:function(e,t){e.id!=t.id&&this.resetScrollPos()}},methods:{initStreams:function(){var e=this.debouncePeriod,t=this.pageSize,n=this.params$,i=this.scrollPos$,a=this.debug,r=this.watch$("dsc",!0);return Fs(Al,{params$:n,parent$:r,scrollPos$:i},{debouncePeriod:e,pageSize:t,debug:a})}}},Pl=n(218),Yl=n(589),Rl=n.n(Yl);function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $l={props:{collection:{type:Object,required:!0,validator:function(e){return"_id"in e}},isRoot:{type:Boolean,required:!0}},data:function(){return{raw:this.collection}},computed:{dsc:function(){var e=JSON.parse(JSON.stringify(this.raw));return new Pl.a(e)}},watch:{collection:function(e,t){e&&!Rl()(e,t)&&(this.raw=e)},dsc:function(e,t){e&&!Rl()(e,t)&&this.$emit("update:collection",e)}},created:function(){var e=this,t=this.watch$("isRoot",!0).pipe(Object(Ro.a)()),n=this.watch$("collection",!0).pipe(Object(Vs.a)("_id"),Object(Ro.a)()),i=ys(n,t).pipe(Object(Ho.a)((function(e){var t=Hl(e,2),n=t[0],i=t[1]?Ks.g:Ks.h,a={selector:{_id:n},offset:0,limit:1};return Object(es.a)(a).pipe(i(),Object(Bo.a)((function(e){var t=e.initialMatches,n=void 0===t?[]:t,i=e.doc,a=void 0===i?null:i;if(e.deleted)return null;var r=a;return 1==n.length&&(r=n[0]),r})))})));this.$subscribeTo(i,(function(t){e.raw=t}))},render:function(){return this.$scopedSlots.default({dsc:this.dsc})}},Fl=n(234),Wl={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0}},data:function(){return{items:new Set}},methods:{isExpanded:function(e){var t=this.getItemKey(e);return this.items.has(t)},setExpanded:function(e,t){var n=this.getItemKey(e),i=new Set(this.items);t?i.add(n):i.delete(n),this.items=i},reset:function(){this.items=new Set}},watch:{scopeKey:function(e,t){e!==t&&this.reset()}},render:function(){return this.$scopedSlots.default({isExpanded:this.isExpanded,setExpanded:this.setExpanded})}};function zl(e){return function(e){if(Array.isArray(e))return Ul(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ul(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Vl={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0}},data:function(){return{items:new Map,showSelection:!1}},computed:{selectionSize:function(){return this.items.size}},methods:{setShowSelection:function(e){this.showSelection=e},isSelected:function(e){var t=this.getItemKey(e);return this.items.has(t)},setSelected:function(e,t){var n=this.getItemKey(e),i=new Map(this.items);t?i.set(n,e):i.delete(n),this.items=i},selectItems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[].concat(zl(this.items.values()),zl(t)),i=n.map((function(t){return[e.getItemKey(t),t]}));this.items=new Map(i)},reset:function(){this.items=new Map}},watch:{scopeKey:function(e,t){e!==t&&this.reset()},selectionSize:function(e){e>0&&(this.showSelection=!0)},showSelection:function(e){e||this.reset()}},render:function(){return this.$scopedSlots.default({selectedItems:this.items,showSelection:this.showSelection,setShowSelection:this.setShowSelection,selectItems:this.selectItems,isSelected:this.isSelected,setSelected:this.setSelected,resetSelection:this.reset})}},Bl=(n(2089),Object(T.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"history d-flex flex-column"},[n("header",{staticClass:"p-2"},[e.$slots.nav?n("nav",{staticClass:"top-nav pb-2"},[e._t("nav")],2):e._e(),e._v(" "),e._t("details")],2),e._v(" "),e.$slots.messages?n("section",[e._t("messages")],2):e._e(),e._v(" "),e.$slots.listcontrols?n("section",{staticClass:"p-2"},[e._t("listcontrols")],2):e._e(),e._v(" "),n("section",{staticClass:"scroller flex-grow-1"},[e._t("listing")],2),e._v(" "),e.$slots.modals?n("section",[e._t("modals")],2):e._e()])}),[],!1,null,null,null).exports),ql={props:{history:{type:fo.e,required:!0}},computed:{hasMessages:function(){return this.userOverQuota||history.isDeleted}},data:function(){return{userOverQuota:!1}}},Gl=Object(T.a)(ql,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasMessages?n("div",[n("b-alert",{attrs:{show:e.history.isDeleted,variant:"warning"}},[e._v("\n        "+e._s(e._f("localize")("This history has been deleted"))+"\n    ")]),e._v(" "),n("b-alert",{attrs:{show:e.userOverQuota,variant:"warning"}},[e._v("\n        "+e._s(e._f("localize")("You are over your disk quota. Tool execution is on hold until your disk usage drops below your allocated quota."))+"\n    ")])],1):e._e()}),[],!1,null,null,null).exports,Jl=n(209),Kl=n(243),Xl=n(276),Ql=n(584),Zl=n(45),ec=n(89),tc=n(132),nc=n(60);function ic(e){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function rc(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){ac(r,i,a,o,s,"next",e)}function s(e){ac(r,i,a,o,s,"throw",e)}o(void 0)}))}}function oc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sc(e,t){return(sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=dc(e);if(t){var a=dc(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return cc(this,n)}}function cc(e,t){return!t||"object"!==ic(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(l,e);var t,n,i,a,r,o,s=lc(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,{id:e.id,itemClass:"History",context:"history-panel"})).history=e,t}return t=l,(n=[{key:"save",value:(o=rc(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(nc.a)(t),(i=new Set(this.history.tags)).add(n.text),e.next=5,this.saveHistoryTags(i);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"delete",value:(r=rc(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(nc.a)(t),(i=new Set(this.history.tags)).delete(n.text),e.next=5,this.saveHistoryTags(i);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"saveHistoryTags",value:(a=rc(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t),e.next=3,Object(Zl.p)(this.history.id,{tags:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}])&&oc(t.prototype,n),i&&oc(t,i),l}(tc.a),hc={components:{Tags:ec.b},props:{history:{type:fo.e,required:!0}},computed:{storeKey:function(){return"History-".concat(this.history.id)},historyTagService:function(){return new uc(this.history)}}},fc=Object(T.a)(hc,(function(){var e=this.$createElement;return(this._self._c||e)("Tags",{attrs:{tags:this.history.tags,"store-key":this.storeKey,"tag-service":this.historyTagService}})}),[],!1,null,null,null).exports,pc=n(155);function mc(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function _c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(n),!0).forEach((function(t){vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yc={props:{history:{type:pc.a,required:!0},value:{type:Boolean,required:!1,default:!1}},data:function(){return{name:"",copyAll:!1,loading:!1}},computed:gc(gc({},Object(J.c)("user",["currentUser"])),{},{title:function(){return"Copying History: ".concat(this.history.name)},saveTitle:function(){return this.loading?"Saving...":"Copy History"},saveVariant:function(){return this.loading?"info":this.formValid?"primary":"secondary"},newNameValid:function(){return this.name==this.history.name?null:this.name.length>0},formValid:function(){return this.newNameValid},showModal:{get:function(){return this.value},set:function(e,t){e!==t&&this.$emit("input",e)}}}),methods:gc(gc({},Object(J.b)("betaHistory",["copyHistory"])),{},{copy:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.loading=!0,i=n.history,a=n.name,r=n.copyAll,t.next=4,n.copyHistory({history:i,name:a,copyAll:r});case 4:n.loading=!1,e();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){mc(r,i,a,o,s,"next",e)}function s(e){mc(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}),watch:{history:{handler:function(e){this.name="Copy of '".concat(e.name,"'")},immediate:!0}}},bc=(n(2090),Object(T.a)(yc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"copyModal",attrs:{title:e.title,"title-tag":"h2"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var i=t.ok,a=t.cancel;return n("div",{},[n("div",[n("b-button",{staticClass:"mr-3",on:{click:function(e){return a()}}},[e._v(" Cancel ")]),e._v(" "),n("b-button",{attrs:{variant:e.saveVariant,disabled:!e.formValid},on:{click:function(t){return e.copy(i)}}},[e._v("\n                "+e._s(e._f("localize")(e.saveTitle))+"\n            ")])],1)])}}]),model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("transition",{attrs:{name:"fade"}},[n("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{show:e.currentUser.isAnonymous,variant:"warning"}},[e._v("\n            As an anonymous user, unless you login or register, you will lose your current history after copying\n            this history. You can "),n("a",{attrs:{href:"/user/login"}},[e._v("login here")]),e._v(" or "),n("a",{attrs:{href:"/user/create"}},[e._v("register here")]),e._v(".\n        ")])],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.loading?n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("b-spinner",{attrs:{label:"Copying History..."}})],1):e._e()]),e._v(" "),n("transition",[e.loading?e._e():n("b-form",[n("b-form-group",{attrs:{label:"Enter a title for the new history","label-for":"copy-modal-title"}},[n("b-input",{attrs:{id:"copy-modal-title",state:e.newNameValid,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{state:e.newNameValid}},[e._v("\n                    Please enter a valid history title.\n                ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Choose which datasets from the original history to include."}},[n("b-form-radio",{attrs:{value:!1},model:{value:e.copyAll,callback:function(t){e.copyAll=t},expression:"copyAll"}},[e._v("\n                    Copy only the active, non-deleted datasets.\n                ")]),e._v(" "),n("b-form-radio",{attrs:{value:!0},model:{value:e.copyAll,callback:function(t){e.copyAll=t},expression:"copyAll"}},[e._v("\n                    Copy all datasets including deleted ones.\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports);function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){xc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sc(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Cc(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Sc(r,i,a,o,s,"next",e)}function s(e){Sc(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Mc={mixins:[Kl.a],components:{PriorityMenu:Jl.a,PriorityMenuItem:Jl.b,HistoryTags:fc,Annotation:Ql.a,ClickToEdit:Xl.a,CopyHistoryModal:bc},props:{history:{type:fo.e,required:!0}},data:function(){return{showTags:!1,showAnnotation:!1,showCopyModal:!1,showPrivacyModal:!1,showDeleteModal:!1,showPurgeModal:!1}},computed:{annotation:{get:function(){return this.history.annotation||""},set:function(e){e.length&&e!==this.history.annotation&&this.updateFields({annotation:e})}},historyName:{get:function(){var e;return(null===(e=this.history)||void 0===e?void 0:e.name)||""},set:function(e){e.length&&e!==this.history.name&&this.updateFields({name:e})}},exportLink:function(){return"histories/".concat(this.history.id,"/export")}},methods:{updateFields:function(){var e=arguments,t=this;return Cc(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:{},t.$emit("updateHistory",kc({id:t.history.id},i));case 2:case"end":return n.stop()}}),n)})))()},deleteHistory:function(e){var t=this;return Cc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$emit("deleteHistory",t.history),e.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()},purgeHistory:function(e){var t=this;return Cc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$emit("purgeHistory",t.history),e.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()},makePrivate:function(e){var t=this;return Cc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$emit("secureHistory",t.history),e.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()}}},Tc=(n(2091),Object(T.a)(Mc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("h6",{staticClass:"text-nowrap text-truncate mr-auto"},[n("span",{staticClass:"size"},[e._v(e._s(e._f("localize")(e.history.niceSize)))])]),e._v(" "),n("PriorityMenu",{staticStyle:{"max-width":"50%"},attrs:{"starting-height":28}},[n("PriorityMenuItem",{key:"edit-history-tags",attrs:{title:"Edit History Tags",icon:"fas fa-tags",pressed:e.showTags},on:{click:function(t){e.showTags=!e.showTags}}}),e._v(" "),n("PriorityMenuItem",{key:"edit-history-annotation",attrs:{title:"Edit Annotation",icon:"fas fa-comment",pressed:e.showAnnotation},on:{click:function(t){e.showAnnotation=!e.showAnnotation}}}),e._v(" "),n("PriorityMenuItem",{key:"copy-history",attrs:{title:"Copy History",icon:"fas fa-copy"},on:{click:function(t){e.showCopyModal=!e.showCopyModal}}}),e._v(" "),n("PriorityMenuItem",{key:"share",attrs:{title:"Share or Publish",icon:"fas fa-handshake"},on:{click:function(t){return e.backboneRoute("/histories/sharing",{id:e.history.id})}}}),e._v(" "),n("PriorityMenuItem",{key:"delete-this-history",attrs:{title:"Delete this History",icon:"fas fa-trash"},on:{click:function(t){e.showDeleteModal=!e.showDeleteModal}}}),e._v(" "),n("PriorityMenuItem",{key:"purge-this-history",attrs:{title:"Purge this History",icon:"fas fa-burn"},on:{click:function(t){e.showPurgeModal=!e.showPurgeModal}}}),e._v(" "),n("PriorityMenuItem",{key:"structure",attrs:{title:"Show Structure",icon:"fas fa-code-branch"},on:{click:function(t){return e.backboneRoute("/histories/show_structure")}}}),e._v(" "),n("PriorityMenuItem",{key:"extract-workflow",attrs:{title:"Extract Workflow",icon:"fas fa-file-export"},on:{click:function(t){return e.iframeRedirect("/workflow/build_from_current_history")}}}),e._v(" "),n("PriorityMenuItem",{key:"set-permissions",attrs:{title:"Set Permissions",icon:"fas fa-user-lock"},on:{click:function(t){return e.backboneRoute("/histories/permissions",{id:e.history.id})}}}),e._v(" "),n("PriorityMenuItem",{key:"make-private",attrs:{title:"Make Private",icon:"fas fa-lock"},on:{click:function(t){e.showPrivacyModal=!e.showPrivacyModal}}}),e._v(" "),n("PriorityMenuItem",{key:"resume-paused-jobs",attrs:{title:"Resume Paused Jobs",icon:"fas fa-play"},on:{click:function(t){return e.iframeRedirect("/history/resume_paused_jobs?current=True")}}}),e._v(" "),n("PriorityMenuItem",{key:"export-citations",attrs:{title:"Export Tool Citations",icon:"fas fa-stream"},on:{click:function(t){return e.backboneRoute("/histories/citations",{id:e.history.id})}}}),e._v(" "),n("PriorityMenuItem",{key:"export-history-to-file",attrs:{title:"Export History to File",icon:"fas fa-file-archive"},on:{click:function(t){return e.backboneRoute(e.exportLink)}}})],1)],1),e._v(" "),n("ClickToEdit",{staticClass:"history-title mt-2",attrs:{"tag-name":"h3","tooltip-title":e._f("localize")("Rename history..."),"tooltip-placement":"top"},model:{value:e.historyName,callback:function(t){e.historyName=t},expression:"historyName"}}),e._v(" "),n("transition",{attrs:{name:"shutterfade"}},[e.showAnnotation?n("Annotation",{staticClass:"history-annotation mt-2",model:{value:e.annotation,callback:function(t){e.annotation=t},expression:"annotation"}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"shutterfade"}},[e.showTags?n("HistoryTags",{staticClass:"mt-2",attrs:{history:e.history}}):e._e()],1),e._v(" "),n("CopyHistoryModal",{attrs:{history:e.history},model:{value:e.showCopyModal,callback:function(t){e.showCopyModal=t},expression:"showCopyModal"}}),e._v(" "),n("b-modal",{attrs:{title:"Make History Private","title-tag":"h2"},on:{ok:e.makePrivate},model:{value:e.showPrivacyModal,callback:function(t){e.showPrivacyModal=t},expression:"showPrivacyModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("\n            This will make all the data in this history private (excluding library datasets), and will set\n            permissions such that all new data is created as private. Any datasets within that are currently shared\n            will need to be re-shared or published. Are you sure you want to do this?\n        ")])]),e._v(" "),n("b-modal",{attrs:{title:"Delete History?","title-tag":"h2"},on:{ok:e.deleteHistory},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete the current history?")])]),e._v(" "),n("b-modal",{attrs:{title:"Permanently Delete History?","title-tag":"h2"},on:{ok:e.purgeHistory},model:{value:e.showPurgeModal,callback:function(t){e.showPurgeModal=t},expression:"showPurgeModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Really delete the current history permanently? This cannot be undone.")])])],1)}),[],!1,null,null,null).exports),jc={props:{message:{type:String,default:"This history is empty."}},methods:{openGlobalUploadModal:Fr.c,clickDataLink:function(){this.eventHub.$emit("openToolSection","getext")}}},Oc=Object(T.a)(jc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-alert",{attrs:{show:""}},[n("h4",{staticClass:"mb-1"},[n("i",{staticClass:"fa fa-info-circle"}),e._v(" "),n("span",[e._v(e._s(e._f("l")(e.message)))])]),e._v(" "),n("p",[n("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.openGlobalUploadModal(t)}}},[e._v("You can load your own data")]),e._v(" or\n        "),n("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clickDataLink(t)}}},[e._v("get data from an external source")]),e._v(".\n    ")])])}),[],!1,null,null,null).exports,Dc={components:{DebouncedInput:n(429).a},props:{params:{type:ws.a,required:!0}},computed:{skip:{get:function(){return this.params.skip},set:function(e){var t=this.params.clone();t.skip=e,this.updateParams(t)}},filterText:{get:function(){return this.params.filterText},set:function(e){var t=this.params.clone();t.filterText=e,this.updateParams(t)}},showDeleted:{get:function(){return this.params.showDeleted},set:function(e){var t=this.params.clone();t.showDeleted=e,this.updateParams(t)}},showHidden:{get:function(){return this.params.showHidden},set:function(e){var t=this.params.clone();t.showHidden=e,this.updateParams(t)}}},methods:{updateParams:function(e){this.$emit("update:params",e)}}},Lc=Object(T.a)(Dc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.params?n("b-input-group",[n("DebouncedInput",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.value,a=t.input;return[n("b-form-input",{attrs:{size:"sm",value:i,placeholder:e._f("localize")("Search Filter")},on:{input:a}})]}}],null,!1,2881419369),model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),n("b-input-group-append",[n("b-button",{attrs:{size:"sm",pressed:e.showDeleted,variant:e.showDeleted?"info":"secondary"},on:{click:function(t){e.showDeleted=!e.showDeleted}}},[e._v("\n            "+e._s(e._f("localize")("Deleted"))+"\n        ")]),e._v(" "),n("b-button",{attrs:{size:"sm",pressed:e.showHidden,variant:e.showHidden?"info":"secondary"},on:{click:function(t){e.showHidden=!e.showHidden}}},[e._v("\n            "+e._s(e._f("localize")("Hidden"))+"\n        ")])],1)],1):e._e()}),[],!1,null,null,null).exports;function Ec(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Ac(e,t,n){return Ic.apply(this,arguments)}function Ic(){var e;return e=regeneratorRuntime.mark((function e(t,n,i){var a,r,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(s.length>3&&void 0!==s[3])||s[3],"list"!=t){e.next=5;break}r=Za.a.createListCollection,e.next=18;break;case 5:if("paired"!=t){e.next=9;break}r=tr.a.createPairCollection,e.next=18;break;case 9:if("list:paired"!=t){e.next=13;break}r=ir.a.createPairedListCollection,e.next=18;break;case 13:if(!t.startsWith("rules")){e.next=17;break}r=ar.a.createCollectionViaRules,e.next=18;break;case 17:throw new Error("Unknown collectionType encountered ".concat(t));case 18:return o=Pc(n,i),e.next=21,r(o,a);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})),(Ic=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Ec(r,i,a,o,s,"next",e)}function s(e){Ec(r,i,a,o,s,"throw",e)}o(void 0)}))}).apply(this,arguments)}var Pc=function(e,t){var n=Array.from(t.values());return{historyId:e,toJSON:function(){return n},createHDCA:function(e,t,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=u.a.Deferred();return o.resolve(null,{collection_type:t,name:n,copy_elements:a,hide_source_items:i,element_identifiers:e,options:r})}}};function Yc(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Rc(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Yc(r,i,a,o,s,"next",e)}function s(e){Yc(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Hc={mixins:[Kl.a],components:{ContentFilters:Lc,PriorityMenu:Jl.a,PriorityMenuItem:Jl.b},props:{history:{type:pc.a,required:!0},params:{type:ws.a,required:!0},contentSelection:{type:Map,required:!0},showSelection:{type:Boolean,required:!0},totalMatches:{type:Number,required:!0}},data:function(){return{showFilter:!1}},computed:{showContentFilters:function(){var e=this.params,t=e.showHidden,n=e.showDeleted,i=e.filterText;return this.showFilter||t||n||i},localParams:{get:function(){return this.params},set:function(e){this.$emit("update:params",e.clone())}},hasSelection:function(){return this.contentSelection.size>0},countHidden:function(){return this.history.contents_active.hidden}},methods:{unhideAll:function(e){var t=this;return Rc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fo.p)(t.history);case 2:t.$emit("manualReload"),e.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},deleteAllHidden:function(e){var t=this;return Rc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fo.j)(t.history);case 2:t.$emit("manualReload"),e.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},purgeAllDeleted:function(e){var t=this;return Rc(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fo.m)(t.history);case 2:t.$emit("manualReload"),e.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},hideSelected:function(){this.runOnSelection(fo.l)},unhideSelected:function(){this.runOnSelection(fo.q)},deleteSelected:function(){this.runOnSelection(fo.k)},undeleteSelected:function(){this.runOnSelection(fo.o)},purgeSelected:function(){this.runOnSelection(fo.n)},runOnSelection:function(e){var t=this;return Rc(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Array.from(t.contentSelection.values()),a=i.map((function(e){return e.type_id})),n.next=4,e(t.history,a);case 4:t.$emit("resetSelection"),t.$emit("manualReload");case 6:case"end":return n.stop()}}),n)})))()},buildDatasetList:function(){var e=this;return Rc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildNewCollection("list");case 2:case"end":return t.stop()}}),t)})))()},buildDatasetPair:function(){var e=this;return Rc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildNewCollection("paired");case 2:case"end":return t.stop()}}),t)})))()},buildListOfPairs:function(){var e=this;return Rc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildNewCollection("list:paired");case 2:case"end":return t.stop()}}),t)})))()},buildCollectionFromRules:function(){var e=this;return Rc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildNewCollection("rules");case 2:case"end":return t.stop()}}),t)})))()},buildNewCollection:function(e){var t=this;return Rc(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ac(e,t.history.id,t.contentSelection);case 2:return i=n.sent,n.next=5,Object(Zl.c)(t.history,i);case 5:return a=n.sent,n.next=8,Object(Ks.b)(a);case 8:t.$emit("manualReload");case 9:case"end":return n.stop()}}),n)})))()}},watch:{hasSelection:function(e){e&&this.$emit("update:showSelection",!0)}}},Nc=Object(T.a)(Hc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("header",{staticClass:"d-flex align-items-center justify-content-between"},[n("h6",{staticClass:"text-nowrap mr-3"},[n("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Matches")]),e._v(" "),n("a",{attrs:{href:"#"},on:{click:function(t){e.showFilter=!e.showFilter}}},[n("span",[e._v(e._s(e.totalMatches))])])]),e._v(" "),n("PriorityMenu",{staticStyle:{"max-width":"50%"},attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"filter",attrs:{title:"Filter History Content",icon:"fa fa-filter",pressed:e.showFilter},on:{click:function(t){e.showFilter=!e.showFilter}}}),e._v(" "),n("PriorityMenuItem",{key:"selection",attrs:{title:"Operations on multiple datasets",icon:"fas fa-check-square",pressed:e.showSelection},on:{click:function(t){return e.$emit("update:show-selection",!e.showSelection)}}}),e._v(" "),n("PriorityMenuItem",{key:"copy-datasets",attrs:{title:"Copy Datasets",icon:"fas fa-copy"},on:{click:function(t){return e.iframeRedirect("/dataset/copy_datasets")}}}),e._v(" "),n("PriorityMenuItem",{key:"collapse-expanded",attrs:{title:"Collapse Expanded Datasets",icon:"fas fa-compress-alt"},on:{click:function(t){return e.emit("collapseAllContent")}}}),e._v(" "),n("PriorityMenuItem",{key:"show-hidden-datasets",attrs:{title:"Unhide All Hidden Datasets",icon:"fas fa-eye"},on:{click:function(t){return e.$bvModal.show("show-hidden-content")}}}),e._v(" "),n("PriorityMenuItem",{key:"delete-hidden",attrs:{title:"Delete Hidden Datasets",icon:"fas fa-trash"},on:{click:function(t){return e.$bvModal.show("delete-hidden-content")}}}),e._v(" "),n("PriorityMenuItem",{key:"purge-hidden",attrs:{title:"Purge Hidden Datasets",icon:"fas fa-burn"},on:{click:function(t){return e.$bvModal.show("purge-deleted-content")}}})],1)],1),e._v(" "),n("transition",{attrs:{name:"shutterfade"}},[e.showContentFilters?n("content-filters",{staticClass:"content-filters mt-1",attrs:{params:e.localParams},on:{"update:params":function(t){e.localParams=t}}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"shutterfade"}},[e.showSelection?n("b-button-toolbar",{staticClass:"content-selection justify-content-between mt-1"},[n("b-button-group",[n("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.$emit("selectAllContent")}}},[e._v("\n                    "+e._s(e._f("localize")("Select All"))+"\n                ")]),e._v(" "),n("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.$emit("resetSelection")}}},[e._v("\n                    "+e._s(e._f("localize")("Unselect All"))+"\n                ")])],1),e._v(" "),n("b-dropdown",{staticClass:"ml-auto",attrs:{size:"sm",text:"With Selected",disabled:!e.hasSelection}},[n("b-dropdown-item",{on:{click:e.hideSelected}},[e._v("\n                    "+e._s(e._f("localize")("Hide Datasets"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.unhideSelected}},[e._v("\n                    "+e._s(e._f("localize")("Unhide Datasets"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.deleteSelected}},[e._v("\n                    "+e._s(e._f("localize")("Delete Datasets"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.undeleteSelected}},[e._v("\n                    "+e._s(e._f("localize")("Undelete Datasets"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.purgeSelected}},[e._v("\n                    "+e._s(e._f("localize")("Permanently Delete Datasets"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.buildDatasetList}},[e._v("\n                    "+e._s(e._f("localize")("Build Dataset List"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.buildDatasetPair}},[e._v("\n                    "+e._s(e._f("localize")("Build Dataset Pair"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.buildListOfPairs}},[e._v("\n                    "+e._s(e._f("localize")("Build List of Dataset Pairs"))+"\n                ")]),e._v(" "),n("b-dropdown-item",{on:{click:e.buildCollectionFromRules}},[e._v("\n                    "+e._s(e._f("localize")("Build Collection from Rules"))+"\n                ")])],1)],1):e._e()],1),e._v(" "),n("b-modal",{attrs:{id:"show-hidden-content",title:"Show Hidden Datasets","title-tag":"h2"},on:{ok:e.unhideAll}},[n("p",[e._v(e._s(e._f("localize")("Really unhide all hidden datasets?")))])]),e._v(" "),n("b-modal",{attrs:{id:"delete-hidden-content",title:"Delete Hidden Datasets","title-tag":"h2"},on:{ok:e.deleteAllHidden}},[n("p",[e._v(e._s(e._f("localize")("Really delete all hidden datasets?")))])]),e._v(" "),n("b-modal",{attrs:{id:"purge-deleted-content",title:"Purge Deleted Datasets","title-tag":"h2"},on:{ok:e.purgeAllDeleted}},[n("p",[e._v(e._s(e._f("localize")("Really delete all deleted datasets permanently? This cannot be undone.")))])])],1)}),[],!1,null,null,null).exports;function $c(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var Fc={data:function(){return{tool:null}},computed:{modalTitle:function(){return this.tool?"Tool Help: ".concat(this.tool.name):"Tool Help"},helpHtml:function(){return this.tool?this.tool.help:""},hasTool:{get:function(){return Boolean(this.tool)},set:function(e){this.tool=null}}},methods:{toggleToolHelp:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.tool||n.tool.job_id!=e){t.next=4;break}n.closePanel(),t.next=7;break;case 4:return t.next=6,Object(Zl.l)(e);case 6:n.tool=t.sent;case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(e){$c(r,i,a,o,s,"next",e)}function s(e){$c(r,i,a,o,s,"throw",e)}o(void 0)}))})()},closePanel:function(){this.tool=null}},created:function(){this.eventHub.$on("toggleToolHelp",this.toggleToolHelp)}},Wc=Object(T.a)(Fc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:e.modalTitle},model:{value:e.hasTool,callback:function(t){e.hasTool=t},expression:"hasTool"}},[e.tool&&e.tool.help.length?n("div",{domProps:{innerHTML:e._s(e.tool.help)}}):n("p",[e._v(e._s(e._f("localize")("Tool help is unavailable for this dataset.")))])])}),[],!1,null,null,null).exports,zc=n(902),Uc=function(e){return JSON.parse(JSON.stringify(e))},Vc={props:{keyField:{type:String,required:!0},contents:{type:Array,required:!0},startKeyIndex:{type:Number,default:0},totalMatches:{type:Number,default:0},topRows:{type:Number,default:0},bottomRows:{type:Number,default:0},pageSize:{type:Number,default:fo.i.pageSize},suppressionPeriod:{type:Number,default:250},debug:{type:Boolean,default:!1}},data:function(){return{manualStartIndex:null,sbWidth:30}},computed:{itemStartIndex:function(){var e;return null!==(e=this.manualStartIndex)&&void 0!==e?e:this.startKeyIndex},itemWindow:function(){return this.contents.slice(this.itemStartIndex,this.itemStartIndex+this.pageSize)},dataStartIndex:function(){return this.itemStartIndex+this.topRows},cursor:function(){return this.totalMatches>0?this.dataStartIndex/this.totalMatches:0},manualStartKey:function(){var e,t,n=this.manualStartIndex;return null===(e=this.contents)||void 0===e?void 0:null===(t=e[n])||void 0===t?void 0:t[this.keyField]},scrollSliderContainerStyles:function(){var e=this.sbWidth+1;return{width:"".concat(e,"px")}},showScroller:function(){return this.sbWidth>0||this.topRows>0}},watch:{contents:function(){this.manualStartIndex=null},manualStartKey:function(e,t){void 0!==e&&e!==t&&this.$emit("scroll",{key:e})},cursor:function(e){this.debouncedAdjustScrollTop(e)}},created:function(){this.suppressEvents=!1,this.suppressionTimeout=null,this.debouncedUpdateCursor=Object(zc.debounce)(this.updateCursor,100),this.debouncedAdjustScrollTop=Object(zc.debounce)(this.adjustScrollTop,100)},updated:function(){this.checkScrollbars()},mounted:function(){this.checkScrollbars()},methods:{log:function(){if(this.debug){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,["Scroller ->"].concat(n))}},reportProps:function(e){var t=Uc(this._data),n=Uc(this._props);console.group(e),console.dir({data:t,props:n}),console.groupEnd()},getItemKey:function(e){return e[this.keyField]},onWheel:function(e){var t=e.deltaY;if(this.showScroller){var n=0==t?0:Math.abs(t)/t;this.manualStartIndex=function(e,t,n){return Math.max(t,Math.min(n,e))}(this.itemStartIndex+n,0,this.totalMatches-1)}},onScroll:function(){this.debouncedUpdateCursor()},updateCursor:function(){if(!this.suppressEvents){var e=this.$refs.scrollSliderContainer,t=this.$refs.scrollSlider;this.log("updateCursor",t.clientHeight,e.clientHeight,e.scrollTop);var n=Math.abs(t.clientHeight-e.clientHeight),i=n>0?e.scrollTop/n:0;this.$emit("scroll",{cursor:i})}},adjustScrollTop:function(e){var t=this.$refs.scrollSliderContainer,n=this.$refs.scrollSlider;if(t&&n){var i=1*(n.clientHeight-t.clientHeight)*e,a=t.scrollTop,r=this.getFirstRowHeight(),o=Math.abs(i-a);o>r&&(this.log("adjustScrollTop",e,i,o),this.setScrollTop(i))}},getFirstRowHeight:function(){var e,t,n=(null===(e=this.$refs)||void 0===e?void 0:null===(t=e.listing.querySelector("ul > li"))||void 0===t?void 0:t.offsetHeight)||10;return parseInt(n)},setScrollTop:function(e){var t=this;this.suppressEvents=!0,this.suppressionTimeout&&(clearTimeout(this.suppressionTimeout),this.suppressionTimeout=null),this.log("setScrollTop",e,this.suppressionPeriod),this.$refs.scrollSliderContainer.scrollTop=Math.floor(e),this.suppressionTimeout=setTimeout((function(){t.log("unsupressing"),t.suppressEvents=!1}),this.suppressionPeriod)},checkScrollbars:function(){this.sbWidth=this.scrollBarWidth("listing")},scrollBarWidth:function(e){var t,n=null===(t=this.$refs)||void 0===t?void 0:t[e];return n?n.offsetWidth-n.clientWidth:0}}},Bc=(n(2092),Object(T.a)(Vc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"scrollContainer",on:{wheel:function(t){return t.preventDefault(),e.onWheel(t)}}},[n("div",{ref:"listing",staticClass:"listing"},[n("ul",e._l(e.itemWindow,(function(t,i){return n("li",{key:e.getItemKey(t,i)},[e._t("default",[n("pre",[e._v(e._s(t))])],{item:t,index:i,rowKey:e.getItemKey(t,i)})],2)})),0)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showScroller,expression:"showScroller"}],ref:"scrollSliderContainer",staticClass:"scrollSliderContainer",style:e.scrollSliderContainerStyles,on:{scroll:e.onScroll}},[n("div",{ref:"scrollSlider"})])])}),[],!1,null,null,null).exports),qc=(n(2093),{props:{item:{type:Object,required:!0},index:{type:Number,required:!0}}}),Gc=Object(T.a)(qc,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"collapsed",attrs:{"data-state":"waiting"}},[t("nav",{staticClass:"content-top-menu d-flex align-items-center justify-content-between p-1"},[t("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[t("span",{staticClass:"name"},[this._v("Placholder: "+this._s(this.item.hid))])])])])}),[],!1,null,null,null).exports,Jc=n(466),Kc=n(41);function Xc(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function Qc(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Xc(r,i,a,o,s,"next",e)}function s(e){Xc(r,i,a,o,s,"throw",e)}o(void 0)}))}}var Zc={components:{DatasetUI:Jc.a},props:{item:{type:Object,required:!0}},computed:{dataset:function(){return new fo.c(this.item)}},methods:{onDelete:function(){var e=arguments,t=this;return Qc(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,Object(Zl.e)(t.item,i);case 3:return a=n.sent,n.next=6,Object(Ks.b)(a);case 6:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var e=this;return Qc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({visible:!0});case 2:case"end":return t.stop()}}),t)})))()},onUndelete:function(){var e=this;return Qc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({deleted:!1});case 2:case"end":return t.stop()}}),t)})))()},onUpdate:function(e){var t=this;return Qc(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Zl.o)(t.item,e);case 2:return i=n.sent,n.next=5,Object(Ks.b)(i);case 5:case"end":return n.stop()}}),n)})))()},onCopyLink:function(){var e=this.dataset.getUrl("download"),t=this.localize("Link is copied to your clipboard");Object(xt.a)(Object(Kc.a)(e),t)}}},ed=Object(T.a)(Zc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.dataset?n("DatasetUI",e._g(e._b({attrs:{dataset:e.dataset},on:{"update:dataset":e.onUpdate,delete:e.onDelete,undelete:e.onUndelete,unhide:e.onUnhide,"copy-link":e.onCopyLink}},"DatasetUI",e.$attrs,!1),e.$listeners)):e._e()}),[],!1,null,null,null).exports,td=(n(581),ed);function nd(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function id(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){nd(r,i,a,o,s,"next",e)}function s(e){nd(r,i,a,o,s,"throw",e)}o(void 0)}))}}var ad={components:{DscUI:n(467).a},props:{item:{type:Object,required:!0}},computed:{dsc:function(){return new fo.d(this.item)}},methods:{onDelete:function(){var e=arguments,t=this;return id(regeneratorRuntime.mark((function n(){var i,a,r,o,s,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.recursive,r=void 0!==a&&a,o=i.purge,s=void 0!==o&&o,l=t.item,n.next=5,Object(Zl.f)(l,r,s);case 5:if(!(c=n.sent).deleted){n.next=10;break}return d=Object.assign(l,{isDeleted:c.deleted}),n.next=10,Object(Ks.b)(d);case 10:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var e=this;return id(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({visible:!0});case 2:case"end":return t.stop()}}),t)})))()},onUndelete:function(){var e=this;return id(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdate({deleted:!1});case 2:case"end":return t.stop()}}),t)})))()},onUpdate:function(e){var t=this;return id(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Zl.o)(t.item,e);case 2:return i=n.sent,n.next=5,Object(Ks.b)(i);case 5:case"end":return n.stop()}}),n)})))()}}},rd=Object(T.a)(ad,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.dsc?n("DscUI",e._g(e._b({staticClass:"dataset-collection",attrs:{dsc:e.dsc},on:{"update:dsc":e.onUpdate,delete:e.onDelete,undelete:e.onUndelete,unhide:e.onUnhide}},"DscUI",e.$attrs,!1),e.$listeners)):e._e()}),[],!1,null,null,null).exports,od=(n(582),n(580),{props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},computed:{dsc:function(){return new Pl.a(this.item)},state:function(){return this.dsc.state||fo.g.OK}}});function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(n),!0).forEach((function(t){cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dd={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.contentItemComponent,e._g(e._b({tag:"component",staticClass:"content-item p-1",class:{loading:e.loading},attrs:{tabindex:e.index},nativeOn:{mouseover:function(t){return t.target!==t.currentTarget?null:(t.stopPropagation(),e.setFocus(e.index))},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),e.setFocus(e.index-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),e.setFocus(e.index+1))}]}},"component",e.bindProps,!1),e.$listeners))},staticRenderFns:[],components:{Placeholder:Gc,Dataset:td,DatasetCollection:rd,Subcollection:Object(T.a)(od,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._g(e._b({staticClass:"collapsed",attrs:{"data-state":e.state},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-right",void 0,t.key,void 0)?null:t.target!==t.currentTarget?null:(t.stopPropagation(),t.preventDefault(),e.$emit("viewCollection"))},click:function(t){return t.stopPropagation(),e.$emit("viewCollection")}}},"div",e.$attrs,!1),e.$listeners),[n("nav",{staticClass:"content-top-menu d-flex align-items-center justify-content-between p-1"},[n("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[n("span",{staticClass:"name"},[e._v(e._s(e.dsc.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v("\n                ("+e._s(e._f("localize")(e.dsc.collectionType))+" "+e._s(e._f("localize")(e.dsc.collectionCountDescription))+")\n            ")])])])])}),[],!1,null,null,null).exports},props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},data:function(){return{suppressFocus:!1}},methods:{setFocus:function(e){if(!this.suppressFocus){var t=this.$el.closest(".scroller").querySelector('[tabindex="'.concat(e,'"]'));t&&t.focus()}}},computed:{loading:function(){return!this.item},contentItemComponent:function(){return"Placeholder"},bindProps:function(){return ld(ld({},this.$props),this.$attrs)}},created:function(){var e=this;this.$root.$on("bv::dropdown::show",(function(){return e.suppressFocus=!0})),this.$root.$on("bv::dropdown::hide",(function(){return e.suppressFocus=!1}))}},ud={mixins:[dd],computed:{contentItemComponent:function(){switch(this.item.history_content_type){case"dataset":return"Dataset";case"dataset_collection":return"Subcollection";default:return"Placeholder"}}}},hd={filters:{reportPayload:Ps},components:{HistoryContentProvider:kl,Layout:Bl,HistoryMessages:Gl,HistoryDetails:Tc,HistoryEmpty:Oc,ContentOperations:Nc,ToolHelpModal:Wc,Scroller:Bc,HistoryContentItem:{mixins:[dd],computed:{contentItemComponent:function(){if(void 0===this.item.id)return"Placeholder";switch(this.item.history_content_type){case"dataset":return"Dataset";case"dataset_collection":return"DatasetCollection";default:return"Placeholder"}}}},ExpandedItems:Wl,SelectedItems:Vl},props:{history:{type:fo.e,required:!0}},data:function(){return{params:new fo.i,useItemSelection:!1}},computed:{historyId:function(){return this.history.id}}},fd=Object(T.a)(hd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HistoryContentProvider",{attrs:{parent:e.history,params:e.params,"disable-poll":!1,debug:!1,"debounce-period":500},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.loading,a=t.payload,r=t.manualReload,o=t.setScrollPos;return[n("ExpandedItems",{attrs:{"scope-key":e.history.id,"get-item-key":function(e){return e.type_id}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.isExpanded,l=t.setExpanded;return[n("SelectedItems",{attrs:{"scope-key":e.history.id,"get-item-key":function(e){return e.type_id}},scopedSlots:e._u([{key:"default",fn:function(t){var c=t.selectedItems,d=t.showSelection,u=t.setShowSelection,h=t.selectItems,f=t.isSelected,p=t.setSelected,m=t.resetSelection;return[n("Layout",{scopedSlots:e._u([{key:"nav",fn:function(){return[e._t("nav")]},proxy:!0},{key:"details",fn:function(){return[n("HistoryDetails",e._g({staticClass:"history-details",attrs:{history:e.history}},e.$listeners))]},proxy:!0},{key:"messages",fn:function(){return[n("HistoryMessages",{staticClass:"history-messages m-2",attrs:{history:e.history}})]},proxy:!0},{key:"listcontrols",fn:function(){return[n("ContentOperations",{attrs:{history:e.history,"total-matches":a.totalMatches,loading:i,params:e.params,"content-selection":c,"show-selection":d},on:{"update:params":function(t){e.params=t},"update:content-selection":h,"update:show-selection":u,resetSelection:m,selectAllContent:function(e){return h(a.contents)},manualReload:r}})]},proxy:!0},{key:"listing",fn:function(){return[e.history.empty?n("HistoryEmpty",{staticClass:"m-2"}):a&&a.noResults?n("HistoryEmpty",{staticClass:"m-2",attrs:{message:"No Results."}}):a?n("Scroller",e._b({class:{loadingBackground:i},attrs:{"key-field":"hid",debug:!1},on:{scroll:o},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.index;return[n("HistoryContentItem",{attrs:{item:i,index:a,"show-selection":d,expanded:s(i),selected:f(i)},on:{"update:expanded":function(e){return l(i,e)},"update:selected":function(e){return p(i,e)},viewCollection:function(t){return e.$emit("viewCollection",i)}}})]}}],null,!0)},"Scroller",a,!1)):e._e()]},proxy:!0},{key:"modals",fn:function(){return[n("ToolHelpModal")]},proxy:!0}],null,!0)})]}}],null,!0)})]}}],null,!0)})]}}])})}),[],!1,null,null,null).exports,pd={components:{PriorityMenuItem:Jl.b,PriorityMenu:Jl.a},props:{history:{type:fo.e,required:!0},selectedCollections:{type:Array,required:!0,validate:function(e){return e.length>0}}},computed:{rootCollection:function(){return this.selectedCollections[0]},breadCrumbOptions:function(){var e=this.selectedCollections.slice(0,-1);return e.map((function(t,n){return{key:t.type_id,value:e.slice(0,n+1),text:t.name}}))},downloadCollectionUrl:function(){var e="";return this.rootCollection&&(e="".concat(this.rootCollection.url,"/download")),e}},methods:{reselect:function(e){this.$emit("update:selectedCollections",e)},back:function(){var e=this.selectedCollections.slice(0,-1);this.reselect(e)},close:function(){this.reselect([])}}},md=Object(T.a)(pd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.breadCrumbOptions.length?n("b-dropdown",{staticClass:"mr-auto",attrs:{size:"sm",text:"Go to...",boundary:"viewport"}},[n("b-dropdown-item",{on:{click:e.close}},[e._v(" History: "+e._s(e.history.name)+" ")]),e._v(" "),e._l(e.breadCrumbOptions,(function(t){return n("b-dropdown-item",{key:t.key,on:{click:function(n){return e.reselect(t.value)}}},[e._v("\n            "+e._s(t.text)+"\n        ")])}))],2):n("b-button",{staticClass:"mr-auto",attrs:{size:"sm"},on:{click:e.close}},[e._v(" Back to: "+e._s(e.history.name)+" ")]),e._v(" "),n("PriorityMenu",{attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"download-collection",attrs:{title:"Download Collection",icon:"fas fa-file-download",tag:"a",download:"",href:e.downloadCollectionUrl}}),e._v(" "),n("PriorityMenuItem",{key:"back-up",attrs:{title:"Back One",icon:"fas fa-level-up-alt"},on:{click:e.back}})],1)],1)}),[],!1,null,null,null).exports,_d=n(102),gd=n(585),vd={components:{ClickToEdit:Xl.a,ContentTags:gd.a,Nametag:_d.a},props:{dsc:{type:fo.d,required:!0},writable:{type:Boolean,required:!0}}};function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(n),!0).forEach((function(t){wd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kd(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var xd={filters:{reportPayload:Ps},components:{DscProvider:$l,CollectionContentProvider:Il,Layout:Bl,TopNav:md,Details:Object(T.a)(vd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"history-details"},[e.writable?n("ClickToEdit",{staticClass:"history-title mt-3",attrs:{value:e.dsc.name,"tag-name":"h3","tooltip-title":e._f("localize")("Rename collection...")},on:{input:function(t){return e.$emit("update:dsc",{name:t})}}}):n("h3",{staticClass:"history-title mt-3"},[e._v(e._s(e.dsc.name))]),e._v(" "),n("p",{staticClass:"mt-1"},[n("i",{staticClass:"fas fa-folder"}),e._v("\n        a "+e._s(e._f("localize")(e.dsc.collectionType))+"\n        "+e._s(e._f("localize")(e.dsc.collectionCount))+"\n    ")]),e._v(" "),n("transition",{attrs:{name:"shutterfade"}},[e.writable?n("ContentTags",{attrs:{content:e.dsc}}):e.dsc.tags&&e.dsc.tags.length?n("div",{staticClass:"nametags p-1"},e._l(e.dsc.tags,(function(e){return n("Nametag",{key:e,attrs:{tag:e}})})),1):e._e()],1)],1)}),[],!1,null,null,null).exports,Scroller:Bc,CollectionContentItem:ud,ExpandedItems:Wl},props:{history:{type:fo.e,required:!0},selectedCollections:{type:Array,required:!0}},computed:{selectedCollection:function(){var e=this.selectedCollections;return e[e.length-1]},isRoot:function(){return this.selectedCollection==this.selectedCollections[0]},writable:function(){return this.isRoot}},methods:{updateDsc:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.writable){n.next=6;break}return n.next=3,Object(Zl.o)(e,t);case 3:return a=n.sent,n.next=6,Object(Ks.b)(bd(bd({},e),a));case 6:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,a){var r=n.apply(e,t);function o(e){kd(r,i,a,o,s,"next",e)}function s(e){kd(r,i,a,o,s,"throw",e)}o(void 0)}))})()}}};function Sd(e){return function(e){if(Array.isArray(e))return Cd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Md={components:{HistoryComponent:fd,CurrentCollection:Object(T.a)(xd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DscProvider",{attrs:{"is-root":e.isRoot,"debounce-period":500,collection:e.selectedCollection},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.dsc;return[i?n("CollectionContentProvider",{attrs:{parent:i,debug:!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.loading,r=t.payload,o=t.setScrollPos;return[n("ExpandedItems",{attrs:{"scope-key":e.selectedCollection.id,"get-item-key":function(e){return e.type_id}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.isExpanded,l=t.setExpanded;return[n("Layout",{scopedSlots:e._u([{key:"nav",fn:function(){return[n("TopNav",e._g({attrs:{history:e.history,"selected-collections":e.selectedCollections}},e.$listeners))]},proxy:!0},{key:"details",fn:function(){return[n("Details",{attrs:{dsc:i,writable:e.writable},on:{"update:dsc":function(t){return e.updateDsc(i,t)}}})]},proxy:!0},{key:"listing",fn:function(){return[n("Scroller",e._b({class:{loadingBackground:a},attrs:{"key-field":"element_index"},on:{scroll:o},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.index;return[n("CollectionContentItem",{attrs:{item:i,index:a,expanded:s(i),writable:e.writable},on:{"update:expanded":function(e){return l(i,e)},viewCollection:function(t){return e.$emit("viewCollection",i)}}})]}}],null,!0)},"Scroller",r,!1))]},proxy:!0}],null,!0)})]}}],null,!0)})]}}],null,!0)}):e._e()]}}])})}),[],!1,null,null,null).exports},props:{history:{type:fo.e,required:!0}},data:function(){return{breadcrumbs:[]}},provide:{STATES:fo.g},methods:{drillDown:function(e){this.breadcrumbs=[].concat(Sd(this.breadcrumbs),[e])}}},Td=Object(T.a)(Md,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.history&&!e.breadcrumbs.length?n("HistoryComponent",e._g({attrs:{history:e.history},on:{viewCollection:e.drillDown},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,{history:e.history},t)]}}}))],null,!0)},e.$listeners)):e.breadcrumbs.length?n("CurrentCollection",{attrs:{history:e.history,"selected-collections":e.breadcrumbs},on:{"update:selectedCollections":function(t){e.breadcrumbs=t},"update:selected-collections":function(t){e.breadcrumbs=t},viewCollection:e.drillDown}}):n("div",[n("span",{staticClass:"sr-only"},[e._v("Loading...")])])}),[],!1,null,null,null).exports,jd=n(268),Od={components:{StatelessTags:ec.a,UtcDate:fe.a},props:{currentHistory:{type:Object,required:!0},histories:{type:Array,default:function(){return[]}},showModal:{type:Boolean,default:!1}},data:function(){return{fields:[{key:"name",sortable:!0},{key:"tags",sortable:!0},{label:"Updated",key:"update_time",sortable:!0}],sortBy:"update_time",sortDesc:!0,filter:null,rows:[],perPage:50,currentPage:1,totalRows:1,historyRows:[],currentHistoryRow:{},showModalModel:!1}},watch:{showModal:function(e){this.showModalModel=e},histories:function(e){var t=this;this.filter||(this.totalRows=e.length),this.historyRows=e.map((function(e){return e.id==t.currentHistory.id&&(k.default.set(e,"_rowVariant","success"),t.currentHistoryRow=e),e}))}},methods:{toggleHidden:function(){this.$emit("hideModal")},onFiltered:function(e){this.totalRows!=e.length&&(this.totalRows=e.length,this.currentPage=1)},switchToHistory:function(e,t){this.$emit("update:currentHistory",e),this.currentHistoryRow._rowVariant=null,k.default.set(e,"_rowVariant","success"),this.currentHistoryRow=e}}},Dd=Object(T.a)(Od,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div"),e._v(" "),n("b-modal",{attrs:{id:"select-history-modal",title:"Switch to History"},on:{hidden:e.toggleHidden},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})]},proxy:!0}]),model:{value:e.showModalModel,callback:function(t){e.showModalModel=t},expression:"showModalModel"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-table",{attrs:{id:"history-table",striped:"",hover:"",fields:e.fields,items:e.historyRows,filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage,"sticky-header":"50vh"},on:{filtered:e.onFiltered,"row-clicked":e.switchToHistory},scopedSlots:e._u([{key:"cell(tags)",fn:function(e){return[n("stateless-tags",{attrs:{value:e.item.tags,disabled:!0}})]}},{key:"cell(update_time)",fn:function(e){return[n("UtcDate",{attrs:{date:e.value,mode:"elapsed"}})]}}])})],1)],1)}),[],!1,null,null,null).exports;function Ld(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var Ed={mixins:[Kl.a],components:{PriorityMenu:Jl.a,PriorityMenuItem:Jl.b},methods:{clearCache:function(){return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ks.j)();case 2:return e.next=4,Object(Ks.c)();case 4:Object(Kc.d)();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){Ld(r,i,a,o,s,"next",e)}function s(e){Ld(r,i,a,o,s,"throw",e)}o(void 0)}))})();var e},switchToLegacyHistoryPanel:eo.c}},Ad=Object(T.a)(Ed,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PriorityMenu",{attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"select-new-history",attrs:{title:"Select History",icon:"fa fa-folder-open"},on:{click:function(t){return e.$emit("selectHistoryModal")}}}),e._v(" "),n("PriorityMenuItem",{key:"create-new-history",attrs:{title:"Create New History",icon:"fa fa-plus"},on:{click:function(t){return e.$emit("createNewHistory")}}}),e._v(" "),n("PriorityMenuItem",{key:"view-all-histories",attrs:{title:"View All Histories",icon:"fa fa-columns"},on:{click:function(t){return e.redirect("/history/view_multiple")}}}),e._v(" "),n("PriorityMenuItem",{key:"saved-histories",attrs:{title:"Saved Histories",icon:"fas fa-save"},on:{click:function(t){return e.backboneRoute("/histories/list")}}}),e._v(" "),n("PriorityMenuItem",{key:"clear-history-cache",attrs:{title:"Clear Cache",icon:"fa fa-refresh"},on:{click:function(t){return t.stopPropagation(),e.clearCache(t)}}}),e._v(" "),n("PriorityMenuItem",{key:"use-legacy-history",attrs:{title:"Return to legacy history panel",icon:"fas fa-exchange-alt"},on:{click:e.switchToLegacyHistoryPanel}})],1)}),[],!1,null,null,null).exports,Id={components:{CurrentUser:jd.a,UserHistories:Fl.a,HistoryPanel:Td,HistorySelector:Dd,HistoriesMenu:Ad},data:function(){return{showModal:!1}},methods:{showModalHandler:function(e){this.showModal=!this.showModal}}},Pd=Object(T.a)(Id,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CurrentUser",{staticClass:"d-flex flex-column",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.user;return[i?n("UserHistories",{attrs:{user:i},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.currentHistory,a=t.histories,r=t.handlers;return[i?n("HistoryPanel",e._g({attrs:{history:i},scopedSlots:e._u([{key:"nav",fn:function(){return[n("div",[n("HistorySelector",{attrs:{histories:a,"current-history":i,"show-modal":e.showModal},on:{"update:currentHistory":r.setCurrentHistory,hideModal:e.showModalHandler}}),e._v(" "),n("HistoriesMenu",e._g({on:{selectHistoryModal:e.showModalHandler}},r))],1)]},proxy:!0}],null,!0)},r)):n("div",{staticClass:"flex-grow-1 loadingBackground h-100"},[n("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"sr-only"},[e._v("Loading History...")])])]}}],null,!0)}):e._e()]}}])})}),[],!1,null,null,null).exports,Yd=(n(2094),co.CurrentHistoryView.extend({loadHistory:function(e,t){return this.setModel(new Rn.a({id:e})),this.trigger("loading"),t.view="dev-detailed",this.model.fetch(t)}})),Rd=f.a.View.extend({initialize:function(e,t){var n=Object(o.a)();this.userIsAnonymous=n.user.isAnonymous(),this.allow_user_dataset_purge=t.config.allow_user_dataset_purge,this.root=t.root,this.historyView=new Yd({fakeHistoryViewModel:!0,className:"fake ".concat(co.CurrentHistoryView.prototype.className," middle"),purgeAllowed:this.allow_user_dataset_purge,linkTarget:"galaxy_main"}),n.currHistoryPanel=this.historyView,n.currHistoryPanel.listenToGalaxy(n),this.model=new f.a.Model({}),this.setElement("<div/>"),this.historyView.setElement(this.$el),this.historyView.connectToQuotaMeter(n.quotaMeter),n.listenTo(this.historyView,"history-size-change",(function(){n.user.fetch({url:"".concat(n.user.urlRoot(),"/").concat(n.user.id||"current")})})),Rr.a.watch((function(e,t){return t["betaHistory/currentHistory"]}),(function(e){var t,i=n.currHistoryPanel;((null==i?void 0:null===(t=i.model)||void 0===t?void 0:t.id)||void 0)!=e.id&&i.setModel(new Rn.a({id:e.id}))}))},render:function(){u()("#right > .unified-panel-header").remove(),u()("#right > .unified-panel-controls").remove(),u()("#right > .unified-panel-body").remove(),u()("#right").addClass("beta").prepend(this.$el);var e=this.$el[0];return Object(Xr.a)(Pd)({},e),this}});Object(a.a)((function(e,t){var n=t.options,i=void 0===n?{}:n;console.log("Analysis custom page setup");var s=Object(eo.a)()?Rd:uo,d=Object.assign({},i,{config:Object.assign({},i.config,{hide_panels:e.params.hide_panels,hide_masthead:e.params.hide_masthead}),Left:Qr,Right:s,Router:c.a.extend({routes:{"(/)(#)(_=_)":"home","(/)root*":"home","(/)login/confirm":"show_new_user_confirmation","(/)tools/view":"show_tools_view","(/)tools/json":"show_tools_json","(/)tours(/)(:tour_id)":"show_tours","(/)user(/)":"show_user","(/)user(/)cloud_auth":"show_cloud_auth","(/)user(/)external_ids":"show_external_ids","(/)user(/)(:form_id)":"show_user_form","(/)pages(/)create(/)":"show_pages_create","(/)pages(/)edit(/)":"show_pages_edit","(/)pages(/)sharing(/)":"show_pages_sharing","(/)pages(/)(:action_id)":"show_pages","(/)visualizations(/)":"show_plugins","(/)visualizations(/)edit(/)":"show_visualizations_edit","(/)visualizations(/)sharing(/)":"show_visualizations_sharing","(/)visualizations/(:action_id)":"show_visualizations","(/)workflows/import":"show_workflows_import","(/)workflows/trs_import":"show_workflows_trs_import","(/)workflows/trs_search":"show_workflows_trs_search","(/)workflows/run(/)":"show_workflows_run","(/)workflows(/)list":"show_workflows","(/)workflows/invocations":"show_workflow_invocations","(/)workflows/invocations/report":"show_workflow_invocation_report","(/)workflows/list_published(/)":"show_workflows_published","(/)workflows/create(/)":"show_workflows_create","(/)histories(/)citations(/)":"show_history_citations","(/)histories(/)rename(/)":"show_histories_rename","(/)histories(/)sharing(/)":"show_histories_sharing","(/)histories(/)import(/)":"show_histories_import","(/)histories(/)(:history_id)(/)export(/)":"show_history_export","(/)histories(/)permissions(/)":"show_histories_permissions","(/)histories/view":"show_history_view","(/)histories/show_structure":"show_history_structure","(/)histories(/)(:action_id)":"show_histories","(/)datasets(/)list(/)":"show_datasets","(/)custom_builds":"show_custom_builds","(/)datasets/edit":"show_dataset_edit_attributes","(/)datasets/error":"show_dataset_error","(/)interactivetool_entry_points(/)list":"show_interactivetool_list","(/)libraries*path":"show_library_folder"},require_login:["show_user","show_user_form","show_workflows","show_cloud_auth","show_external_ids"],authenticate:function(e,t){var n=Object(o.a)();return n.user&&n.user.id||-1==this.require_login.indexOf(t)},_display_vue_helper:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=k.default.extend(e),r=document.createElement("div");n&&(r.active_tab=n),this.page.display(r,i),new a({store:Rr.a,propsData:t}).$mount(r)},_display_vue_router:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("div");t&&(i.active_tab=t),this.page.display(i,n),new k.default({router:e,render:function(e){return e(Hr)}}).$mount(i)},show_tours:function(e){e?Ce.a.giveTourById(e):this.page.display(new Ce.a.ToursView)},show_new_user_confirmation:function(){this._display_vue_helper(fa.a)},show_user:function(){var e=Object(o.a)();this._display_vue_helper(ie,{enableQuotas:e.config.enable_quotas,userId:e.user.id})},show_user_form:function(e,t){var n=G(t.id);this.page.display(new H.a.View(r.default.extend(n[e],{active_tab:"user"})))},show_interactivetool_list:function(){this._display_vue_helper(Qe)},show_library_folder:function(e){var t;null===(t=this.page.toolPanel)||void 0===t||t.component.hide(0),this.page.panels.right.hide(),this._display_vue_router(Yr,{folder_id:e})},show_cloud_auth:function(){this._display_vue_helper(Qi)},show_external_ids:function(){this._display_vue_helper(ha)},show_visualizations:function(e){var t="list_published"==e?"shared":"user";this.page.display(new je.View({action_id:e,plural:"Visualizations",item:"visualization",active_tab:t}))},show_visualizations_edit:function(){this.page.display(new H.a.View({url:"visualization/edit?id=".concat(q.a.get("id")),redirect:"visualizations/list",active_tab:"visualization"}))},show_visualizations_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Visualizations",model_class:"Visualization"})},show_workflows_published:function(){var e=q.a.get("f-username");this.page.display(new Me.a({url_base:"".concat(Object(a.b)(),"workflow/list_published"),active_tab:"shared",url_data:{"f-username":null==e?"":e}}))},show_history_view:function(){this._display_vue_helper($t,{id:q.a.get("id")})},show_workflow_invocation_report:function(){var e=q.a.get("id");this._display_vue_helper(Ut,{invocationId:e},null,!0)},show_workflow_invocations:function(){this._display_vue_helper(gn,{})},show_history_structure:function(){this._display_vue_helper(Rt,{id:q.a.get(" id: ")})},show_histories:function(e){var t=new $n.View({action_id:e});this.page.display(t)},show_history_citations:function(){this._display_vue_helper(Mn,{id:q.a.get("id"),source:"histories"})},show_histories_rename:function(){this.page.display(new H.a.View({url:"history/rename?id=".concat(q.a.get("id")),redirect:"histories/list"}))},show_histories_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Histories",model_class:"History"})},show_histories_import:function(){this._display_vue_helper(vt)},show_history_export:function(e){this._display_vue_helper(At,{historyId:e})},show_tools_view:function(){var e;null===(e=this.page.toolPanel)||void 0===e||e.component.hide(),this.page.panels.right.hide(),this._display_vue_helper(Ln)},show_tools_json:function(){this._display_vue_helper(Pn)},show_histories_permissions:function(){this.page.display(new H.a.View({url:"history/permissions?id=".concat(q.a.get("id")),redirect:"histories/list"}))},show_datasets:function(){this._display_vue_helper(be)},show_pages:function(e){var t="list_published"==e?"shared":"user";this.page.display(new je.View({action_id:e,plural:"Pages",item:"page",active_tab:t}))},show_pages_create:function(){var e="page/create",t=q.a.get("invocation_id");t&&(e+="?invocation_id=".concat(t)),this.page.display(new H.a.View({url:e,redirect:"pages/list",active_tab:"user"}))},show_pages_edit:function(){this.page.display(new H.a.View({url:"page/edit?id=".concat(q.a.get("id")),redirect:"pages/list",active_tab:"user"}))},show_pages_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Pages",model_class:"Page"})},show_plugins:function(){this._display_vue_helper(Wn)},show_workflows:function(){this._display_vue_helper(at)},show_workflows_create:function(){this.page.display(new H.a.View({url:"workflow/create",redirect:"workflow/editor",active_tab:"workflow",submit_title:"Create",submit_icon:"fa-check",cancel_redirect:"workflows/list"}))},show_workflows_run:function(){this._loadWorkflow()},show_workflows_import:function(){this._display_vue_helper(Le)},show_workflows_trs_import:function(){var e={queryTrsServer:q.a.get("trs_server"),queryTrsId:q.a.get("trs_id"),queryTrsVersionId:q.a.get("trs_version"),isRun:"true"===q.a.get("run_form")};this._display_vue_helper(We,e)},show_workflows_trs_search:function(){this._display_vue_helper(Ve)},show_custom_builds:function(){var e=this,t=this.page.historyPanel.historyView;t&&t.model&&t.model.id?this._display_vue_helper(Se):window.setTimeout((function(){e.show_custom_builds()}),500)},show_dataset_edit_attributes:function(){this.page.display(new qn.View)},show_dataset_error:function(){this.page.display(new Vn.View)},home:function(e){e.tool_id||e.job_id?"upload1"===e.tool_id?(this.page.toolPanel.upload.show(),this._loadCenterIframe("welcome")):this._loadToolForm(e):e.workflow_id?this._loadWorkflow():e.m_c?this._loadCenterIframe("".concat(e.m_c,"/").concat(e.m_a)):this._loadCenterIframe("welcome")},_loadToolForm:function(e){e.tool_id&&(e.id=l()(e.tool_id)),e.version&&(e.version=l()(e.version)),this.page.display(new R.View(e))},_loadCenterIframe:function(e,t){e=(t=t||Object(a.b)())+e,this.page.$("#galaxy_main").prop("src",e)},_loadWorkflow:function(){var e=q.a.get("id"),t=Object(o.a)(),n="prefer"==t.config.simplified_workflow_run_ui;"prefer"==q.a.get("simplified_workflow_run_ui")&&(n=!0);var i={workflowId:e,preferSimpleForm:n,simpleFormTargetHistory:t.config.simplified_workflow_run_ui_target_history,simpleFormUseJobCache:"on"==t.config.simplified_workflow_run_ui_job_cache};this._display_vue_helper(mn,i,"workflow")}})});e.page=new ho.a.View(d)})),window.addEventListener("load",(function(){return Object(a.d)("analysis")}))}]);
//# sourceMappingURL=analysis.bundled.js.map